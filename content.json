[{"title":"è¿œç¨‹è®¿é—® jupyter","date":"2021-06-03T16:00:00.000Z","path":"/è¿œç¨‹è®¿é—® jupyter/","text":"æœ€è¿‘åˆå¼€å§‹æŠ˜è…¾äº† jupyter äº†ï¼Œå› ä¸ºå®éªŒå®¤çš„ç½‘ç»œç¯å¢ƒå¤ªå·®ï¼Œæ¯æ¬¡æˆ‘ä½¿ç”¨ conda å¼€å¯ä¸€ä¸ªæ–°çš„ç¯å¢ƒï¼Œç„¶åä¸‹è½½ä¸€äº›æ–°çš„åŒ…æ—¶ä¼šéå¸¸çš„æ…¢ï¼Œæ…¢æˆ‘è¿˜èƒ½å¿ï¼Œé—®é¢˜æ˜¯ç»å¸¸ä¸‹è½½å¤±è´¥ï¼Œæµªè´¹æˆ‘çš„æ—¶é—´:sob:ï¼Œæ¥ç€æˆ‘æƒ³åˆ°æˆ‘æœ‰ä¸€å°è…¾è®¯äº‘çš„æœåŠ¡å™¨ï¼Œæˆ‘å°±æƒ³åœ¨æœåŠ¡å™¨ä¸Šä¸‹è½½ jupyterï¼Œç„¶åè¿œç¨‹è®¿é—®ã€‚ ä¸‹è½½ Minicondaé¦–å…ˆéœ€è¦ä¸‹è½½ Minicondaï¼Œæˆ‘æ²¡æœ‰ä¸‹è½½ Anacondaï¼Œå› ä¸ºæˆ‘ä¸éœ€è¦é‚£ä¹ˆå¤šçš„åŒ…ï¼ŒæŒ‰éœ€ä¸‹è½½å³å¯ wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh å¦‚æœæ²¡æœ‰ wget å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ yum -y install wget è¿›è¡Œä¸‹è½½ã€‚ è¿™é‡Œä¸‹è½½äº†ä¸€ä¸ª shell è„šæœ¬ï¼Œè¿è¡Œè¯¥è„šæœ¬å³å¯è‡ªåŠ¨å®Œæˆ Miniconda çš„ä¸‹è½½ chmod +x Miniconda3-latest-Linux-x86_64.sh # æ·»åŠ å¯æ‰§è¡Œæƒé™./Miniconda3-latest-Linux-x86_64.sh # æ‰§è¡Œè„šæœ¬ åœ¨ä¸‹è½½çš„æœŸé—´ä¼šé—®ä¸€äº›é—®é¢˜ï¼Œå›ç­” yes å³å¯ã€‚ å®‰è£…å®Œæ¯•ä¹‹åï¼Œé‡æ–°è¿›å…¥å‘½ä»¤è¡Œï¼Œè¾“å…¥ conda -V å¦‚æœæ­£ç¡®è¾“å‡ºäº†ç‰ˆæœ¬å·å°±è¯´æ˜ä¸‹è½½æˆåŠŸäº†ã€‚ ä¸‹è½½ jupyterä¸‹é¢æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç¯å¢ƒï¼Œç¯å¢ƒåå°±å«åš jupyter å¥½äº† conda create -n jupyter ç„¶åæ¿€æ´»ç¯å¢ƒ conda activate jupyter æ¥ç€ä¸‹è½½ jupyter conda install jupyter é…ç½®å¯†ç æˆ‘ä»¬è¦è¿œç¨‹è®¿é—® jupyterï¼Œå°±éœ€è¦é…ç½®å¯†ç æ¥è¿›è¡Œç™»å½•ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ ipython (ä¸‹è½½ jupyter çš„æ—¶å€™å°±å·²ç»ä¸‹è½½å¥½äº† ipython) ä¾¿å¯ä»¥è¿›å…¥ä¸€ä¸ª python äº¤äº’å¼ shell ipython ä¾æ¬¡è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ from notebook.auth import passwdpasswd() æ¥ç€ä¾¿ä¼šæç¤ºä½ è¾“å…¥å¯†ç ï¼Œè¾“å…¥å¯†ç åä¼šç»™ä½ ä¸€ä¸ªå¯†æ–‡å­—ç¬¦ä¸²ï¼Œå¦‚ 'sha1:43b95b731276:5d330ee6f6054613b3ab4cc59c5048ff7c70f549' è¿™ä¸ªå¯†æ–‡å­—ç¬¦ä¸²åœ¨ jupyter çš„é…ç½®æ–‡ä»¶ä¸­ä¼šç”¨åˆ°ï¼Œå…ˆä¿å­˜/å¤åˆ¶ä¸‹æ¥ã€‚ jupyter é…ç½®æ–‡ä»¶æ¥ç€æˆ‘ä»¬ä¾¿è¦é…ç½® jupyter çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œè¿è¡Œ jupyter notebook --generate-config ä¼šç”Ÿæˆ ~/.jupyter/jupyter_notebook_config.py è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰“å¼€ç¼–è¾‘ vi ~/.jupyter/jupyter_notebook_config.py åœ¨å…¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½® c.NotebookApp.ip='*' #è®¾ç½®è¿œç¨‹è®¿é—® jupyter çš„ipï¼Œ*è¡¨ç¤ºæ‰€æœ‰ ip éƒ½å¯ä»¥è®¿é—®c.NotebookApp.allow_remote_access = True # å…è®¸è¿œç¨‹è®¿é—®c.NotebookApp.password = 'sha1:5df252f58b7f:bf65d53125bb36c085162b3780377f66d73972d1' #å¡«å†™åˆšåˆšç”Ÿæˆçš„å¯†æ–‡ c.NotebookApp.open_browser = False # ç¦æ­¢notebookå¯åŠ¨æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨(åœ¨ linux æœåŠ¡å™¨ä¸€èˆ¬éƒ½æ˜¯ ssh å‘½ä»¤è¡Œè®¿é—®ï¼Œæ²¡æœ‰å›¾å½¢ç•Œé¢çš„ã€‚æ‰€ä»¥ï¼Œå¯åŠ¨ä¹Ÿæ²¡å•¥ç”¨) c.NotebookApp.port =8888 #æŒ‡å®šè®¿é—®çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯8888 å¯åŠ¨ jupyterä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤å¯åŠ¨ jupyter jupyter notebook --allow-root è¿™ä¸ªå‘½ä»¤å¯åŠ¨åä¼šåœ¨å‰å°è¿è¡Œï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ› jupyter åœ¨åå°è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ nohup jupyter notebook --allow-root &gt; jupyter.log 2&gt;&amp;1 &amp; å› ä¸ºæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨æœ¬æœºé€šè¿‡æœåŠ¡å™¨çš„å…¬ç½‘ ip:8888 çš„æ–¹å¼æ¥è®¿é—®è¯¥ jupyter notebookã€‚ PSï¼šå¦‚æœä½ æƒ³åœ¨æœåŠ¡å™¨åœæ­¢ juputerï¼Œé¦–å…ˆè¿è¡Œ ps è¯¥å‘½ä»¤å¯ä»¥æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œæˆ‘ä»¬æ‰¾åˆ° jupyter è¿›ç¨‹çš„ pidï¼Œç„¶åé€šè¿‡ kill -9 pid æ¥æ€æ­» jupyter æœåŠ¡ï¼Œå³å¯åœæ­¢ jupyterã€‚ å‚è€ƒé“¾æ¥ linux ä¸­å®‰è£…miniconda Linuxä¸Šé…ç½®Jupyter Notebookè¿œç¨‹è®¿é—® äº‘æœåŠ¡å™¨ä¸­è®©jupyteråå°è¿è¡Œçš„æ–¹æ³•(ä¸‰)","tags":[{"name":"Jupyter - CentOS","slug":"Jupyter-CentOS","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Jupyter-CentOS/"}]},{"title":"ä½¿ç”¨ Github Actions éƒ¨ç½² VuePress åšå®¢","date":"2021-05-30T16:00:00.000Z","path":"/ä½¿ç”¨ Github Actions éƒ¨ç½² VuePress åšå®¢/","text":"éšç€æˆ‘ VuePress åšå®¢ä¸­çš„ä¸œè¥¿è¶Šæ¥è¶Šå¤šï¼Œæ¯æ¬¡æˆ‘æ‰“åŒ…å¥½é¡¹ç›®ç„¶åä¸Šä¼ åˆ° Github ä¸Šéœ€è¦å¥½ä¸€ä¼šå„¿æ—¶é—´ï¼Œä¹‹å‰åœ¨ä¸€äº›æ–‡ç« ä¸­çŸ¥é“ Github Actions å¯ä»¥å¸®æˆ‘è‡ªåŠ¨éƒ¨ç½²é¡¹ç›®ï¼Œæ­£å¥½ä»Šå¤©å°è¯•å°è¯•ã€‚ åœ¨ä½¿ç”¨ Github Actions ä»¥å‰ï¼Œéƒ¨ç½²è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š å†™æ–‡ç«  ç”Ÿæˆé™æ€æ–‡ä»¶ å°†é™æ€æ–‡ä»¶éƒ¨ç½²åˆ° Github Page ä¸Š ä½¿ç”¨äº† Github Actions åï¼Œè¿‡ç¨‹å˜ä¸ºäº†ï¼š å†™æ–‡ç«  æäº¤æ–‡ç« åˆ° Github ä¸Š é…ç½®æ–‡ä»¶æ¥ç€æˆ‘ä»¬ä»‹ç»å¦‚ä½•ä½¿ç”¨è¿™ä¸€åˆ©å™¨ã€‚é¦–å…ˆä½ éœ€è¦åœ¨ä½ çš„é¡¹ç›®ä¸‹æ–°å»º .github/workflows/ æ–‡ä»¶å¤¹ï¼Œæ¥ç€åœ¨ workflows æ–‡ä»¶å¤¹ä¸‹æ–°å¢ xxx.yml æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åéšæ„ï¼Œä½†æ˜¯å¿…é¡»æ˜¯ YAML æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘æ–°å¢æ–‡ä»¶åä¸º deploy.ymlï¼Œç»™å‡ºæˆ‘çš„é…ç½®å†…å®¹(å»æ‰äº†ä¸€äº›ä¸ªæ€§åŒ–çš„é…ç½®) name: Build and Deployon: push: branches: - masterjobs: build-and-deploy: runs-on: ubuntu-latest steps: - name: Checkout ğŸ›ï¸ uses: actions/checkout@v2.3.1 - name: Install and Build ğŸ”§ run: | npm install npm run build - name: Deploy ğŸš€ uses: JamesIves/github-pages-deploy-action@4.1.3 with: BRANCH: gh-pages FOLDER: docs/.vuepress/dist ACCESS_TOKEN: $&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125; å½“ä½ å‘ Github æäº¤ä»£ç æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨çš„æ£€æµ‹ .github/workflows/ ç›®å½•ï¼Œå¦‚æœæœ‰é…ç½®çš„è¯ï¼Œå°±ä¼šæ ¹æ®ä½ çš„é…ç½® workflow è‡ªåŠ¨éƒ¨ç½²é¡¹ç›®ã€‚ ä»ä¸Šé¢çš„é…ç½®çœ‹ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨é—¨ï¼š nameï¼šè¿™ä¸ª workflow çš„åç§°ï¼Œè‡ªå·±éšä¾¿å– onï¼šè§¦å‘æ¡ä»¶ on: push: branches: - master ä¸Šè¿°è¡¨ç¤ºå½“æˆ‘ä»¬å‘ master åˆ†æ”¯ push æ—¶å°±ä¼šè§¦å‘è¯¥ workflow jobsï¼šè§„å®šè¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¾‹å¦‚ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä»»åŠ¡ build-and-deployï¼Œæ¯ä¸ªä»»åŠ¡åŒ…å«å¦‚ä¸‹é…ç½® runs-onï¼šè¿è¡Œæ‰€éœ€è¦çš„è™šæ‹Ÿæœºç¯å¢ƒï¼ŒGithub ä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹ç¯å¢ƒ ubuntu-latestï¼Œubuntu-18.04æˆ–ubuntu-16.04 windows-latestï¼Œwindows-2019æˆ–windows-2016 macOS-latestæˆ–macOS-10.14 è¿™é‡Œæˆ‘ä»¬é€‰æ‹©äº† ubuntu-latest stepsï¼šä»»åŠ¡è¿è¡Œçš„æ­¥éª¤ æ¥ç€æˆ‘ä»¬å¯¹æˆ‘ä»¬è¿è¡Œçš„æ­¥éª¤è¿›è¡Œè¯´æ˜ï¼Œæˆ‘ä»¬çš„æ­¥éª¤åŒ…å«ä¸‰æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯æ‹‰å–ä¸»åˆ†æ”¯çš„ä»£ç  - name: Checkout ğŸ›ï¸ uses: actions/checkout@v2.3.1 ç¬¬äºŒæ­¥ï¼Œè¿è¡Œä¸¤ä¸ªå‘½ä»¤ npm install ä¸ npm run build - name: Install and Build ğŸ”§ run: | npm install npm run build ç¬¬ä¸‰æ­¥ï¼Œå°† ç”Ÿæˆçš„é™æ€æ–‡ä»¶å¤¹éƒ¨ç½²åˆ° gh-pages åˆ†æ”¯ä¸Š - name: Deploy ğŸš€ uses: JamesIves/github-pages-deploy-action@4.1.3 with: BRANCH: gh-pages FOLDER: docs/.vuepress/dist ACCESS_TOKEN: $&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125; é…ç½®å¯†é’¥ä½¿ç”¨ Github Actions æ˜¯éœ€è¦ ACCESS-TOKENï¼Œæ—¢ç„¶éƒ½å·²ç»ä¼šä½¿ç”¨ Github äº†ï¼Œå°±è‚¯å®šçŸ¥é“è¿™ä¸ªä¸œè¥¿æ€ä¹ˆç”Ÿæˆäº†ï¼Œå¦‚æœä¸ä¼šï¼Œè¯·æ±‚å‚ç…§å®˜æ–¹æ–‡æ¡£ã€‚ æˆ‘ä»¬éœ€è¦åœ¨ä»“åº“çš„ Setting ä¸­é€‰æ‹© Secrets ç‚¹å‡»å³ä¸Šæ–¹çš„ New repository secret Name å¿…é¡»å†™ä¸º ACCESS_TOKENï¼ŒValue å°±æ˜¯ä½ çš„ tokenï¼Œå¡«å†™å®Œæ¯•ç‚¹å‡» Add secretï¼Œå¦‚æœå¡«å†™æ²¡æœ‰é—®é¢˜çš„è¯ï¼Œç‚¹å‡»ä¹‹åå°±ä¼šæç¤ºæ·»åŠ æˆåŠŸã€‚ æ¯æ¬¡å½“ä½ å°† Vuepress é¡¹ç›®æäº¤åˆ° Github ä¸Šçš„æ—¶å€™ï¼ŒGithub å°±ä¼šè‡ªåŠ¨å¸®ä½ éƒ¨ç½²é¡¹ç›®ã€‚ åœ¨ Actions çš„è¿™ä¸ªé€‰é¡¹ä¸­å¯ä»¥çœ‹åˆ°é¡¹ç›®çš„éƒ¨ç½²æƒ…å†µï¼Œä¸Šé¢å¯ä»¥çœ‹åˆ°æˆ‘å°è¯•äº†ä¸‰æ¬¡ï¼Œç¬¬ä¸‰æ¬¡æˆåŠŸäº†ï¼Œå‰ä¸¤æ¬¡æ˜¯è¸©å‘ï¼Œä¸‹é¢å°±ä»‹ç»äº†æˆ‘è¸©çš„ä¸¤æ¬¡å‘ã€‚ è¸©å‘åœ¨ VuePress å®˜ç½‘ä¸Šé¢ï¼Œç»™å‡ºçš„æ„å»ºè„šæœ¬å‘½ä»¤æ˜¯ npm run docs:build æˆ‘è§‰å¾—éº»çƒ¦ï¼Œæ”¹ä¸ºäº† npm run buildï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œå°±æç¤ºæˆ‘æ²¡æœ‰è¿™ä¸ªè„šæœ¬ æˆ‘æ”¹è¿‡æ¥äº†ï¼Œæ‰€ä»¥å¦‚æœä½ æ„å»ºçš„è„šæœ¬å‘½ä»¤å’Œæˆ‘çš„ä¸ä¸€è‡´çš„è¯ï¼Œè¿˜æ˜¯è¦æ”¹çš„ã€‚ å¦ä¸€ä¸ªå‘ï¼Œä¸Šé¢é…ç½®å¥½äº†ä»¥åï¼Œæˆ‘å°†æˆ‘çš„ VuePress åšå®¢æäº¤åˆ° Githubï¼Œä½†æ˜¯è¿è¡Œä¸€æ®µæ—¶é—´ä¹‹åçˆ†å‡ºäº†é”™è¯¯ ä»é”™è¯¯çš„ç±»å‹çœ‹å¥½åƒæ˜¯è¶…å†…å­˜äº†ï¼Œç„¶åç»è¿‡æˆ‘çš„æœç´¢ï¼Œåœ¨ Github çš„ä¸€ä¸ª issue ä¸­æ‰¾åˆ°äº†è§£å†³åŠæ³•ï¼Œæ·»åŠ ä¸‹é¢çš„ç¯å¢ƒå˜é‡ env: NODE_OPTIONS: '--max_old_space_size=4096' æ›´æ”¹åçš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ &#123;17-18&#125;name: Build and Deployon: push: branches: - masterjobs: build-and-deploy: runs-on: ubuntu-latest steps: - name: Checkout ğŸ›ï¸ uses: actions/checkout@v2.3.1 - name: Install and Build ğŸ”§ run: | npm install npm run build env: NODE_OPTIONS: '--max_old_space_size=4096' - name: Deploy ğŸš€ uses: JamesIves/github-pages-deploy-action@4.1.3 with: BRANCH: gh-pages FOLDER: docs/.vuepress/dist ACCESS_TOKEN: $&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125;","tags":[{"name":"Github Actions - VuePress","slug":"Github-Actions-VuePress","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Github-Actions-VuePress/"}]},{"title":"è®¿é—®å¯¹è±¡çš„å±æ€§","date":"2021-04-29T16:00:00.000Z","path":"/è®¿é—®å¯¹è±¡ä¸­çš„å±æ€§/","text":"æœ¬ç¯‡æ–‡ç« å…³äºéå†å¯¹è±¡å±æ€§çš„é—®é¢˜ï¼ŒåŒ…æ‹¬ for ...inï¼ŒObject.keys()ï¼ŒReflect.ownKeys()ï¼Œ Object.getOwnPropertyNames()ï¼ŒObjectgetOwnPropertySymbols() ç­‰æ–¹æ³•åŠåŒºåˆ«ã€‚ Object.keys()Object.keys(obj) æ–¹æ³•è¿”å›å¯¹è±¡ obj ä¸Šæ‰€æœ‰å¯æšä¸¾çš„å±æ€§ï¼Œä¸åŒ…æ‹¬å…¶åŸå‹ä¸Šçš„å±æ€§ let parent = &#123; category: 'parent'&#125;// è®¾ç½® person ä¸º child çš„åŸå‹let child = Object.create(parent)child.name = 'Alice'child[Symbol('age')] = 18Object.defineProperty(child, 'gender', &#123; enumerable: false, value: 'female'&#125;)console.log(Object.keys(child)) // [ 'name' ] éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒObject.keys() æ— æ³•å¾—åˆ°é”®ä¸º symbol ç±»å‹çš„å±æ€§ã€‚ Reflect.ownKeys()Reflect æ˜¯åœ¨ ES6 ä¸­æå‡ºçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Reflect.ownKeys(obj) å–å¾—å¯¹è±¡ obj ä¸Šæ‰€æœ‰çš„å±æ€§ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾çš„å±æ€§ä»¥åŠ symbol ç±»å‹çš„å±æ€§ï¼Œä½†æ˜¯å®ƒä¸èƒ½è·å¾—å…¶åŸå‹ä¸Šçš„å±æ€§ã€‚ console.log(Reflect.ownKeys(child)) // [ 'name', 'gender', Symbol(age) ] for â€¦ infor ... in åŒæ ·å¯ä»¥å¾—åˆ°å¯¹è±¡ obj ä¸Šæ‰€æœ‰å¯æšä¸¾çš„å±æ€§(ä¸åŒ…æ‹¬ symbol ç±»å‹çš„å±æ€§)ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥è·å¾—å…¶åŸå‹ä¸Šçš„å±æ€§ const keys = []for (key in child) &#123; keys.push(key)&#125;console.log(keys) // [ 'name', 'category' ] å¦‚æœå¸Œæœ›åªè·å¾—å½“å‰å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œå¯ä»¥é€šè¿‡ obj.hasOwnProperty(key) æ–¹æ³•è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æœ key æ˜¯ obj ä¸Šçš„å±æ€§ï¼Œè€Œä¸æ˜¯å…¶åŸå‹ä¸Šçš„å±æ€§ï¼Œåˆ™ä¼šè¿”å› trueï¼Œå¦åˆ™è¿”å› false const keys = []for (key in child) &#123; if (child.hasOwnProperty(key)) &#123; keys.push(key) &#125;&#125;console.log(keys) // [ 'name' ] ä¹Ÿå¯å¯¹ Object.keys() æˆ– Reflect.ownKeys() è¿›è¡Œéå† let keys = []for (key of Object.keys(child)) &#123; keys.push(key)&#125;console.log(keys) // [ 'name' ]keys = []for (key of Reflect.ownKeys(child)) &#123; keys.push(key)&#125;console.log(keys) // [ 'name', 'gender', Symbol(age) ] Object.getOwnPropertyNames()é€šè¿‡ Object.getOwnPropertyNames(obj) å¯ä»¥è·å¾—å¯¹è±¡ obj ä¸Šæ‰€æœ‰ç±»å‹ä¸º string çš„å±æ€§ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾çš„ï¼Œä½†ä¸åŒ…æ‹¬å…¶åŸå‹ä¸Šçš„å±æ€§å€¼ console.log(Object.getOwnPropertyNames(child)); // [ 'name', 'gender' ] Object.getOwnPropertySymbols()é€šè¿‡ Object.getOwnPropertySymbols(obj) å¯ä»¥è·å¾—å¯¹è±¡ obj ä¸Šæ‰€æœ‰ç±»å‹ä¸º symbol çš„å±æ€§ï¼ŒåŒ…æ‹¬ä¸å¯æšä¸¾çš„ï¼Œä½†ä¸åŒ…å«å…¶åŸå‹ä¸Šçš„å±æ€§ console.log(Object.getOwnPropertySymbols(child)) // [ Symbol(age) ]","tags":[]},{"title":"é˜²æŠ–ä¸èŠ‚æµ","date":"2021-04-29T16:00:00.000Z","path":"/é˜²æŠ–ä¸èŠ‚æµ/","text":"é˜²æŠ–ä¸èŠ‚æµæ˜¯ä¸¤ä¸ªå‡ºäºæ€§èƒ½è€ƒè™‘æå‡ºçš„æ¦‚å¿µï¼Œå¦‚æœåœ¨çŸ­æ—¶é—´å†…å¤šæ¬¡è§¦å‘åŒä¸€å‡½æ•°ï¼Œå¯èƒ½ä¼šäº§ç”Ÿé¡µé¢çš„å¡é¡¿ï¼Œä»¥åŠæ€§èƒ½çš„é™ä½ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæå‡ºäº†é˜²æŠ–ä¸èŠ‚æµä¸¤ä¸ªè§£å†³æ–¹æ¡ˆã€‚ é˜²æŠ–ä¸èŠ‚æµçš„æ¦‚å¿µä¸ºäº†è§£é‡Šå¦‚ä¸Šçš„ä¸¤ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªä¾‹å­å¼€å§‹ã€‚æœ‰ä¸€ä¸ªæœç´¢æ¡†ï¼Œå½“ç”¨æˆ·è¾“å…¥æœç´¢å†…å®¹æ—¶ï¼Œä¼šåŒæ—¶å‘åç«¯å‘èµ·è¯·æ±‚ï¼Œç»™å‡ºç›¸è¿‘çš„è¯æ¡ä»¥ç»™ç”¨æˆ·æç¤º å¦‚æœå½“æ¯æ¬¡ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå­—ç¬¦éƒ½å‘éƒ½ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆå‘èµ·è¯·æ±‚çš„æ¬¡æ•°å°±å¤ªé¢‘ç¹äº†ï¼Œè¿™æ—¶æœ‰ä¸¤ç§ç­–ç•¥ï¼š å½“ç”¨æˆ·åœæ­¢è¾“å…¥ä¸€æ®µæ—¶é—´åï¼Œä¾‹å¦‚ 500msï¼Œæˆ‘ä»¬å‘åç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ æ¯éš”å›ºå®šçš„æ—¶é—´å‘åç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ ç¬¬ä¸€ç§ç­–ç•¥æˆ‘ä»¬å«åšé˜²æŠ–ï¼Œç¬¬äºŒç§ç­–ç•¥æˆ‘ä»¬ç§°ä¸ºèŠ‚æµã€‚ æœ‰ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»ï¼Œä»¥å…¬äº¤è½¦å‘è½¦ä¸ºä¾‹ï¼Œæœ‰ä¸¤ç§å‘è½¦æ–¹æ¡ˆï¼š å½“ä¹˜å®¢ä¸Šè½¦åï¼Œå¦‚æœç»è¿‡ä¸€æ®µæ—¶é—´æ²¡æœ‰ä¹˜å®¢ä¸Šè½¦äº†ï¼Œå°±å‘è½¦ å‘è½¦æ—¶é—´å›ºå®šï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å‘ä¸€æ¬¡è½¦ æˆ‘ä»¬å°†å‘è½¦æ¯”å–»ä¸ºå‘åç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆè¿™ä¸¤ç§å‘è½¦çš„ç­–ç•¥å°±åˆ†åˆ«å¯¹åº”ä¸ºé˜²æŠ–å’ŒèŠ‚æµã€‚ é˜²æŠ–å®ç°æˆ‘ä»¬è¦å®ç°ä¸€ä¸ª debounce å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä»¥åŠæ—¶é—´ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œdebounce å‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å˜ä¸ºé˜²æŠ–çš„å‡½æ•°ï¼Œå³å¤šæ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œåªæœ‰ç»è¿‡æŒ‡å®šæ—¶é—´åï¼Œå‡½æ•°æ‰ä¼šè§¦å‘ä¸€æ¬¡ const debounce = (fn, time) =&gt; &#123; let timerId return function(...args) &#123; clearTimeout(timerId) timerId = setTimeout(() =&gt; &#123; fn.apply(this, args) &#125;, time) &#125;&#125; ä¸Šé¢æœ‰å‡ ä¸ªæ³¨æ„äº‹é¡¹ï¼š timerId è¦æ”¾åœ¨è¿”å›çš„å‡½æ•°ä¹‹å¤–ï¼Œå½¢æˆé—­åŒ…ï¼Œä»¥ç¡®ä¿æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶è®¿é—®çš„æ˜¯åŒä¸€ä¸ª timerId è¿”å›çš„å‡½æ•°ä¸è¦å†™æˆç®­å¤´å‡½æ•°çš„å½¢å¼ // ä¸è¦å†™æˆè¿™æ ·return (...args) =&gt; &#123; &#125; å› ä¸ºè¿™æ ·ä¼šä¸¢å¤± this æœ€åè¦é€šè¿‡ apply æ–¹æ³•å°† this ä¼ å…¥ èŠ‚æµå®ç°æˆ‘ä»¬è¦å®ç°ä¸€ä¸ª throttle å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ™®é€šå‡½æ•°è½¬åŒ–ä¸ºèŠ‚æµå‡½æ•°ï¼Œä¹Ÿæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‡½æ•°ä¸ºæ—¶é—´ï¼Œå½“å¤šæ¬¡è°ƒç”¨è¯¥å‡½æ•°ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…åªèƒ½è§¦å‘ä¸€æ¬¡ const throttle = (fn, time) =&gt; &#123; let pre = 0; return function(...args) &#123; let now = Date.now(); if (now - pre &gt; time) &#123; fn.apply(this, args); pre = now; &#125; &#125;&#125; pre è¡¨ç¤ºä¸Šä¸€æ¬¡æ‰§è¡Œçš„æ—¶é—´ï¼Œé»˜è®¤å€¼ä¸º 0ï¼Œè¿™æ ·ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¼šç«‹å³æ‰§è¡Œè¯¥å‡½æ•°ã€‚æ¯æ¬¡æ‰§è¡Œå‡½æ•°æ—¶ï¼Œåˆ¤æ–­è·ä¸Šæ¬¡æ‰§è¡Œå·²ç»ç»è¿‡çš„æ—¶é—´ Date.now() - start æ˜¯å¦å¤§äºè®¾å®šçš„æ—¶é—´ï¼Œå¤§äºåˆ™æ‰§è¡Œï¼Œå°äºåˆ™ä¸æ‰§è¡Œï¼Œä»¥è¾¾åˆ°èŠ‚æµçš„ç›®çš„ï¼Œæ‰§è¡Œå‡½æ•°åï¼Œè®¾ç½® pre ä¸ºå½“å‰å‡½æ•°æ‰§è¡Œæ—¶çš„æ—¶åˆ»ã€‚ è¿”å›çš„å‡½æ•°ä¸èƒ½å†™ä¸ºç®­å¤´å‡½æ•°ï¼ŒåŒæ ·æ˜¯å› ä¸ºä¼šä¸¢å¤± thisã€‚","tags":[]},{"title":"æ§åˆ¶å¯¹è±¡çš„è®¿é—®","date":"2021-04-12T16:00:00.000Z","path":"/æ§åˆ¶å¯¹è±¡çš„è®¿é—®/","text":"æœ¬ç¯‡æ–‡ç« æ€»ç»“æ§åˆ¶å¯¹è±¡è®¿é—®çš„ç›¸å…³ APIã€‚ Object.definePropertyObject.defineProperty å¯ä»¥å¯¹å¯¹è±¡çš„å±æ€§è¿›è¡Œé…ç½®ï¼Œå®ƒæ¥æ”¶å¦‚ä¸‹å‚æ•°ï¼š objï¼šå¯¹è±¡ propï¼šå±æ€§ descriptorï¼šå±æ€§æè¿°ç¬¦ å…¶ä¸­ descriptor åŒ…æ‹¬å¦‚ä¸‹é…ç½®é€‰é¡¹ valueï¼šå±æ€§çš„å€¼ writableï¼šå±æ€§æ˜¯å¦å¯å†™ï¼Œé»˜è®¤ä¸º false setï¼šä¸ºå±æ€§è®¾ç½®å€¼æ—¶ä¼šè§¦å‘æ­¤æ–¹æ³•ï¼Œè®¾ç½®çš„æ–°å€¼ä¼šä½œä¸ºå‚æ•°ä¼ å…¥ getï¼šè®¿é—®æ­¤å±æ€§æ˜¯ä¼šè§¦å‘æ­¤æ–¹æ³• configurableï¼šè¯¥å±æ€§æ˜¯å¦å¯å†æ¬¡è¿›è¡Œé…ç½®ï¼Œé»˜è®¤ä¸º false enumerableï¼šæ˜¯å¦å¯éå†ï¼Œé»˜è®¤ä¸º false å…¶ä¸­ value ä¸ writable æ˜¯ä¸€ç»„ï¼Œset å’Œ get æ˜¯ä¸€ç»„ï¼ŒäºŒè€…ä¸å¯åŒæ—¶ä½¿ç”¨ã€‚ ä¾‹å­1const obj = &#123;&#125;Object.defineProperty(obj, 'name', &#123; value: 'Alice', writable: false&#125;)console.log(obj.name) // Aliceobj.name = 'Bob' // ä¸å¯å†™ï¼Œæ›´æ”¹æ— æ•ˆconsole.log(obj.name) // Alice åœ¨ä¸Šé¢æˆ‘ä»¬ä¸º obj çš„ name å±æ€§é…ç½®äº† value å±æ€§ä¸º Alice ä½œä¸º obj.name çš„åˆå§‹å€¼ï¼Œåˆé…ç½®äº† writable ä¸º falseï¼Œè¡¨æ˜è¯¥å±æ€§æ˜¯ä¸å¯å†™çš„ï¼Œå¯¹è¯¥å±æ€§è¿›è¡Œèµ‹å€¼æ—¶æ— æ•ˆçš„ã€‚ ä¾‹å­2const obj = &#123;&#125;let usernameObject.defineProperty(obj, 'name', &#123; set(value) &#123; if (value === 'Alice') &#123; username = value &#125; &#125;, get() &#123; return username &#125;&#125;)obj.name = 'Alice' // èµ‹å€¼æœ‰æ•ˆconsole.log(obj.name) // Aliceobj.name = 'Bob' // èµ‹å€¼æ— æ•ˆ console.log(obj.name) // Alice ä¸Šé¢æˆ‘ä»¬ä¸º obj çš„ name å±æ€§é…ç½®äº† set å’Œ get æ–¹æ³•ï¼Œæ²¡å½“æˆ‘ä»¬ä¸º obj.name èµ‹äºˆæ–°å€¼æ—¶éƒ½ä¼šè°ƒç”¨ set æ–¹æ³•ï¼Œå¹¶å°†æ–°å€¼ä¼ å…¥ï¼Œåœ¨ set æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯¹æ–°å€¼è¿›è¡Œäº†åˆ¤æ–­ï¼Œå¦‚æœæ–°å€¼ä¸º Alice åˆ™æˆ‘ä»¬èµ‹å€¼ç»™ usernameï¼›æ¯æ¬¡å½“æˆ‘ä»¬è®¿é—® obj.name æ—¶ï¼Œåˆ™ä¼šè§¦å‘ get æ–¹æ³•ï¼Œåœ¨ get æ–¹æ³•ä¸­æˆ‘ä»¬ç›´æ¥è¿”å›äº† username è¿™ä¸ªå˜é‡çš„å€¼ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥æ§åˆ¶å¯¹è±¡å±æ€§çš„è®¿é—®æ“ä½œã€‚ ä¾‹å­3const obj = &#123; a: 1, b: 2&#125;console.log(Object.keys(obj)) // [ 'a', 'b' ]Object.defineProperty(obj, 'a', &#123; enumerable: false // ä¸å¯æšä¸¾&#125;)console.log(Object.keys(obj)) // [ 'b' ] åœ¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª obj å¯¹è±¡ï¼Œå…¶ä¸­æœ‰ a, b ä¸¤ä¸ªå±æ€§ï¼Œé»˜è®¤éƒ½æ˜¯å¯æšä¸¾çš„ã€‚é€šè¿‡ Object.keys æ–¹æ³•å¯ä»¥å–å¾—å¯¹è±¡ä¸­æ‰€ä»¥å¯æšä¸¾çš„å±æ€§ï¼Œè¿™æ—¶å®ƒä»¬éƒ½åœ¨è¿”å›çš„æ•°ç»„ä¸­ï¼›æ¥ç€æˆ‘ä»¬é…ç½® a ä¸ºä¸å¯æšä¸¾ï¼Œæ­¤æ—¶å†æ¬¡è°ƒç”¨ Object.keysï¼Œæ­¤æ—¶ a å°±ä¸åœ¨è¿”å›çš„æ•°ç»„ä¸­äº†ã€‚ ä¾‹å­4const obj = &#123; a: 1, b: 2&#125;Object.defineProperty(obj, 'a', &#123; enumerable: false, configurable: false&#125;)console.log(Object.keys(obj)) // [ 'b' ]// TypeError: Cannot redefine property: aObject.defineProperty(obj, 'a', &#123; enumerable: true&#125;) ä¸Šé¢æˆ‘ä»¬é…ç½®äº† a ä¸ºä¸å¯æšä¸¾ï¼Œå¹¶ä¸”é…ç½® configurable ä¸º falseï¼Œç„¶åæ¥ç€æˆ‘ä»¬åˆæƒ³é…ç½®å±æ€§ a ä¸ºå¯æšä¸¾çš„ï¼Œä½†æ˜¯ä¼šæŠ¥é”™ TypeError: Cannot redefine property: aï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬é…ç½® configurable ä¸º falseï¼Œè¡¨ç¤ºä¸å¯å†æ¬¡é…ç½®ï¼Œå½“æˆ‘ä»¬å†æ¬¡å¯¹å±æ€§ a è¿›è¡Œé…ç½®ä¾¿ä¼šæŠ¥é”™ã€‚ const obj = &#123; a: 1, b: 2&#125;Object.defineProperty(obj, 'a', &#123; enumerable: false, configurable: true // å¯ç»§ç»­é…ç½®&#125;)console.log(Object.keys(obj)) // [ 'b' ]Object.defineProperty(obj, 'a', &#123; enumerable: true&#125;)console.log(Object.keys(obj)) // [ 'a', 'b' ] Object.definePropertiesObject.defineProperties æ¯æ¬¡åªèƒ½é…ç½®å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œè€Œ Object.defineProperties å¯ä»¥ä¸€æ¬¡æ€§é…ç½®å¯¹è±¡çš„å¤šä¸ªå±æ€§ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š Object.defineProperties(obj, &#123; prop1: &#123; // é…ç½®é€‰é¡¹åŒ Object.defineProperty &#125;, prop2: &#123; // ... &#125;&#125;) è§ä¸‹ä¾‹ï¼š const obj = &#123; name: 'Alice', age: 25&#125;Object.defineProperties(obj, &#123; name: &#123; writable: false // ä¸èƒ½å†™ name å±æ€§ &#125;, age: &#123; enumerable: false, // ä¸èƒ½éå†åˆ° age è¿™ä¸ªå±æ€§ get() &#123; return 18 // åˆ«é—®ï¼Œé—®å°±æ˜¯ 18 &#125; &#125;&#125;) Object.preventExtensionsObject.preventExtions(obj) å¯ä»¥ä½¿å¾—å¯¹è±¡ obj ä¸å¯æ‰©å±•ï¼Œå³ä¸èƒ½ä¸ºå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ const obj = &#123; name: 'Alice', age: 20&#125;Object.preventExtensions(obj)obj.gender = 'female' // æ— æ³•æ·»åŠ æ–°çš„å±æ€§console.log(obj.gender) // undefined ä¸Šé¢æˆ‘ä»¬å°† obj è®¾ç½®ä¸ºä¸å¯æ‰©å±•åè¯•å›¾æ·»åŠ æ–°çš„å±æ€§ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æˆåŠŸã€‚è®¾ç½®ä¸ºä¸å¯æ‰©å±•åï¼Œæˆ‘ä»¬å¯ä»¥æ­£å¸¸è®¿é—®ç°æœ‰å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œä»¥åŠæ›´æ”¹å’Œåˆ é™¤ const obj = &#123; name: 'Alice', age: 20&#125;Object.preventExtensions(obj)obj.name = 'Bob'console.log(obj.name) // Bobdelete obj.nameconsole.log(Object.keys(obj)) // [ 'age' ] å¯¹è±¡ä¸€æ—¦å˜ä¸ºä¸å¯æ‰©å±•åï¼Œå°±ä¸€ç›´æ˜¯ä¸å¯æ‰©å±•çš„ã€‚é€šè¿‡ Object.isExtensible æ–¹æ³•å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯æ‰©å±•çš„ const obj = &#123; name: 'Alice', age: 20&#125;console.log(Object.isExtensible(obj)) // trueObject.preventExtensions(obj)console.log(Object.isExtensible(obj)) // false Object.sealseal çš„æ„æ€æ˜¯å°å°ï¼ŒObject.seal æ¯” Object.preventExtensiable æ›´è¿‘ä¸€æ­¥ï¼Œè¢« seal äº†çš„å¯¹è±¡ï¼Œé™¤äº†å˜ä¸ºä¸å¯æ‰©å±•ï¼Œè¿˜ä¸å¯é…ç½® configurable: falseï¼Œå±æ€§ä¸èƒ½è¢«åˆ é™¤äº†ä»¥åŠå±æ€§ä¸èƒ½è¢« Object,defineProperty è¿›è¡Œé…ç½®äº† const obj = &#123; name: 'Alice', age: 20&#125;Object.seal(obj)obj.gender = 'female'console.log(obj.female) // undefined, ä¸å¯æ‰©å±•delete obj.nameconsole.log(obj.name) // Alice, ä¸å¯åˆ é™¤ ä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥å¯¹è±¡ç°æœ‰çš„å±æ€§è¿›è¡Œæ›´æ”¹çš„ const obj = &#123; name: 'Alice', age: 20&#125;Object.seal(obj)obj.name = 'Bob'console.log(obj.name) // Bob é€šè¿‡ Object.isSealed å¯ä»¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢« seal äº† const obj = &#123;&#125;console.log(Object.isSealed(obj)) // falseObject.seal(obj)console.log(Object.isSealed(obj)) // true Object.freezefreeze æ˜¯å†»ç»“çš„æ„æ€ï¼Œå®ƒç›¸å¯¹äº Object.seal æ›´è¿›ä¸€æ­¥ï¼Œä¸ä»…ä¸å¯æ‰©å±•ï¼Œä¸å¯é…ç½®ï¼Œå¯¹è±¡çš„æ•°æ®ç†Ÿæ‚‰ writable ä¼šè¢«è®¾ç½®ä¸º false const obj = &#123; name: 'Alice'&#125;Object.freeze(obj)obj.age = 18 // ä¸å¯æ‰©å±•ï¼Œæ— æ•ˆobj.name = 'Bob' // ä¸å¯ä¿®æ”¹ï¼Œæ— æ•ˆdelete obj.name // ä¸å¯é…ç½®ï¼Œæ— æ•ˆconsole.log(obj) // &#123; name: 'Alice' &#125; ä½†æ˜¯å¦‚æœæœ‰å®šä¹‰ set æ–¹æ³•çš„è¯ï¼Œå¯¹è±¡å±æ€§è¿˜æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ const obj = &#123; name: 'Alice'&#125;let username = obj.nameObject.defineProperty(obj, 'name', &#123; set(value) &#123; username = value &#125;, get() &#123; return username &#125;&#125;)Object.freeze(obj)obj.name = 'Bob'console.log(obj.name) // Bob é€šè¿‡ Object.isFrozen æ–¹æ³•å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢« freeze äº† const obj = &#123;&#125;console.log(Object.isFrozen(obj)) // falseObject.freeze(obj)console.log(Object.isFrozen(obj)) // true ProxyProxy æ˜¯ ES6 ä¸­çš„æ–°ç‰¹æ€§ï¼Œå®ƒå¯ä»¥ä¸ºå¯¹è±¡åšä¸€å±‚ä»£ç†ï¼Œå½“ç”¨æˆ·é€šè¿‡ä»£ç†è®¿é—®å¯¹è±¡æ—¶ï¼Œä»£ç†å¯ä»¥æ‹¦æˆªä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ä¸ºå±æ€§èµ‹å€¼ï¼Œè®¿é—®å±æ€§çš„å€¼ï¼Œä»è€Œæ§åˆ¶å¯¹è±¡çš„è®¿é—®ã€‚Proxy å¯ä»¥æ‹¦æˆª 13 ç§æ“ä½œï¼Œè¿™é‡Œä¸ä¼šè¯¦ç»†ä»‹ç»ï¼Œåªä¼šä»‹ç» set å’Œ get æ‹¦æˆªã€‚ Proxy çš„è¯­æ³•å¦‚ä¸‹ const proxy = new Proxy(target, &#123; // æ‹¦æˆªçš„æ–¹æ³•&#125;) ä¾‹å­1const target = &#123; name: 'Alice', age: 18&#125;let proxy = new Proxy(target, &#123; set(trapTarget, key, value, receiver) &#123; // åªèƒ½ä¸º age å±æ€§èµ‹å€¼ï¼Œå¹¶ä¸”å€¼å¿…é¡»ä¸å¤§äº 18 æ‰èƒ½èµ‹å€¼æˆåŠŸ if (key === 'age' &amp;&amp; value &lt;= 18) &#123; trapTarget[key] = value &#125; &#125;&#125;)// æ— æ³•ä¸º name èµ‹å€¼proxy.name = 'Bob'console.log(proxy.name) // Aliceconsole.log(target.name) // Alice// å¤§äº 18 èµ‹å€¼å¤±è´¥proxy.age = 19console.log(proxy.age) // 18console.log(target.age) // 18// ä¸å¤§äº 18ï¼Œèµ‹å€¼æˆåŠŸproxy.age = 15console.log(proxy.age) // 15console.log(target.age) // 15 ä¸Šé¢æˆ‘ä»¬ä¸º target å¯¹è±¡åšäº†å±‚ä»£ç†ï¼Œå½“æˆ‘ä»¬é€šè¿‡ä»£ç†èµ‹å€¼æ—¶ï¼Œä¼šè¢« set æ–¹æ³•æ‹¦æˆªï¼Œset æ–¹æ³•æ¥æ”¶å››ä¸ªå‚æ•°ï¼š trapTargetï¼šè¢«ä»£ç†çš„å¯¹è±¡ keyï¼šè¢«èµ‹å€¼çš„å±æ€§ valueï¼šè¢«èµ‹çš„å€¼ receiverï¼šæ“ä½œå‘ç”Ÿçš„å¯¹è±¡ï¼Œå³ä»£ç†å¯¹è±¡ ä¸Šé¢æˆ‘ä»¬åªå…è®¸å¯¹ age å±æ€§èµ‹å€¼ï¼Œå¹¶ä¸”èµ‹çš„å€¼ä¸èƒ½å¤§äº 18ã€‚ ä¾‹å­2const target = &#123; name: 'Alice', age: 20&#125;let proxy = new Proxy(target, &#123; get(trapTarget, key, receiver) &#123; if (key === 'age') &#123; return 18 &#125; return trapTarget[key] &#125;&#125;)console.log(proxy.age) // 18console.log(target.age) // 20 æˆ‘ä»¬å¯¹ target çš„ get æ–¹æ³•è¿›è¡Œäº†ä»£ç†ï¼Œå½“æˆ‘ä»¬é€šè¿‡ä»£ç†å¯¹è±¡è®¿é—®å±æ€§å€¼æ—¶ï¼Œå¦‚æœè®¿é—®çš„æ˜¯ age å±æ€§ï¼Œåˆ™è¿”å› 18ï¼Œå…¶ä»–å±æ€§ä¸åšå¤„ç†ç›´æ¥è¿”å›åŸå€¼ã€‚ å¦‚æœç›´æ¥é€šè¿‡ target è®¿é—®å±æ€§çš„è¯ï¼Œæ“ä½œæ˜¯ä¸ä¼šè¢«æ‹¦æˆªçš„ï¼Œä»£ç†æ²¡æœ‰ä½œç”¨ã€‚ å‚è€ƒæ–‡çŒ® Object.defineProperty Proxyå’ŒRelect ã€ŠJavaSCripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ï¼Œç¬¬ä¸‰ç‰ˆ","tags":[]},{"title":"Vuex","date":"2021-04-04T16:00:00.000Z","path":"/Vuex/","text":"ä»¥å‰æˆ‘ä»¬æ•°æ®çš„è·å–ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡çˆ¶ç»„ä»¶å‘å­ç»„ä»¶æ•°æ®ï¼Œæˆ–è€…é€šè¿‡å‘å­ç»„ä»¶æ³¨å†Œè‡ªå®šä¹‰äº‹ä»¶ï¼Œä½¿å¾—å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ã€‚å¦‚æœç»„ä»¶çš„å±‚çº§æ¯”è¾ƒæ·±ï¼Œç»„ä»¶æ•°æ®çš„ä¼ é€’è·¨è¶Šå¤šä¸ªå±‚çº§ï¼Œé‚£ä¹ˆæ— è®ºæ˜¯ä»çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®åˆ°å­ç»„ä»¶ï¼Œè¿˜æ˜¯ä»å­ç»„ä»¶ä¼ é€’æ•°æ®åˆ°çˆ¶ç»„ä»¶ï¼Œéƒ½ä¼šå†™å‡ºéš¾çœ‹çš„ä»£ç ã€‚ Vuex æä¾›äº†å…¨å±€ç®¡ç†æ•°æ®èƒ½åŠ›ï¼Œå®ƒé›†ä¸­ç®¡ç†æ‰€æœ‰éœ€è¦è¢«å…±äº«çš„æ•°æ®ï¼Œæ— è®ºç»„ä»¶åœ¨ä»€ä¹ˆå±‚çº§ï¼Œéƒ½å¯ä»¥ç›´æ¥å‘ Vuex è·å–æ•°æ®ã€‚ å®‰è£…å¯¹äº script æ ‡ç­¾å¼•å…¥ &lt;script src=\"https://unpkg.com/vuex\"&gt;&lt;/script&gt; å¯¹äº npm é¡¹ç›® npm install vuex --save å¯¹äº vue-cli é¡¹ç›® vue add vuex å¯ä»¥é€šè¿‡ vue ui é€šè¿‡ GUI ç•Œé¢åˆ›å»ºä¸€ä¸ªå¸¦ Vuex é¢„è®¾çš„é¡¹ç›®ã€‚ Get Startedé¦–å…ˆé€šè¿‡ vue-cli åˆ›å»ºä¸€ä¸ª Vue é¡¹ç›®ï¼Œå‘½ä»¤è¡Œæˆ– GUI çš„æ–¹å¼éƒ½æ˜¯å¯ä»¥çš„ï¼Œæ¥ç€æ·»åŠ  vuex æ’ä»¶ï¼Œæ·»åŠ  vuex æ’ä»¶çš„æ—¶å€™ä¼šåœ¨ src ç›®å½•ä¸‹æ–°å»º store æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª index.js æ–‡ä»¶ï¼Œæˆ‘ä»¬é¦–å…ˆå¿½ç•¥å¥½äº†ï¼Œå…¨éƒ¨åˆ é™¤ï¼Œåªç•™ä¸‹ App.vue ä»¥åŠ main.jsã€‚ æ¯ä¸€ä¸ª Vuex å°±æ˜¯ä¸€ä¸ªæ•°æ®ä»“åº“(store)ï¼Œå®ƒä¿å­˜ç€åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„çŠ¶æ€ï¼Œå®ƒæœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š store ä¸­çš„æ•°æ®ä¹Ÿæ˜¯å“åº”å¼çš„ï¼Œå½“ store ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¾èµ–äºè¯¥æ•°æ®çš„è§†å›¾ä¹Ÿä¼šç›¸åº”çš„æ›´æ–° ä¸èƒ½ç›´æ¥ä¿®æ”¹ store ä¸­çš„çŠ¶æ€ï¼Œå¿…é¡»é€šè¿‡æ˜¾ç¤ºçš„æäº¤ä¸€ä¸ªè¯·æ±‚ï¼Œè®© Vuex å¤„ç†è¯·æ±‚å˜æ›´æ•°æ®ï¼Œè¿™æ ·åšå¯ä»¥è®°å½•çŠ¶æ€çš„å˜åŒ–ï¼Œä¾¿äºè°ƒè¯• æˆ‘ä»¬é€šè¿‡ new Vuex.Store æ¥åˆ›å»ºä¸€ä¸ª storeï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å±æ€§ï¼š state actions mutations getters modules æœ¬å°èŠ‚åˆšå¼€å§‹æ¥è§¦ Vuexï¼Œåªä½¿ç”¨ state ä¸ mutations ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­ stateï¼šä¿å­˜ç€æ‰€æœ‰çš„æ•°æ®(çŠ¶æ€) mutationsï¼šå®šä¹‰æ›´æ”¹æ•°æ®çš„æ–¹æ³• æ–°å»º store/index.jsï¼Œå†…å®¹å¦‚ä¸‹ import Vue from 'vue'import Vuex from 'vuex'Vue.use(Vuex)const store = new Vuex.Store(&#123; state: &#123; count: 0 &#125;, mutations: &#123; increment(state) &#123; state.count++ &#125; &#125;&#125;)export default store æˆ‘ä»¬å®šä¹‰çš„ store æœ‰ä¸€ä¸ªæ•°æ® countï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä¿®æ”¹çŠ¶æ€çš„æ–¹æ³• incrementï¼Œå®ƒå¯ä»¥å¯¹ count é€’å¢ï¼Œæœ€åæˆ‘ä»¬å°†è¿™ä¸ª store å¯¼å‡ºã€‚æˆ‘ä»¬åœ¨ main.js ä¸­å¼•å…¥è¿™ä¸ª storeï¼Œå¹¶ä¸”åœ¨åˆ›å»º Vue å®ä¾‹æ—¶ä¼ å…¥è¯¥ store import Vue from 'vue'import App from './App.vue'import store from './store'Vue.config.productionTip = falsenew Vue(&#123; store, render: h =&gt; h(App)&#125;).$mount('#app') è¿™æ · Vue ä¾¿ä¼šå°†è¿™ä¸ª store æ³¨å…¥åˆ°æ‰€æœ‰çš„ç»„ä»¶ä¸­ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡ $store è¿™ä¸ªè®¡ç®—å±æ€§è®¿é—®åˆ°å®ƒã€‚é€šè¿‡ $store.state å¯ä»¥è®¿é—®åˆ° store å®šä¹‰çš„æ•°æ®ã€‚App.vue çš„å†…å®¹å¦‚ä¸‹ &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;p&gt;&#123;&#123;$store.state.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&lt;button&gt;+1&lt;&#x2F;button&gt;&lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; æ­¤æ—¶é¡µé¢å¦‚ä¸‹ æˆ‘ä»¬èƒ½å¤Ÿè®¿é—® store ä¸­çš„æ•°æ®äº†ï¼Œæ¥ç€æˆ‘ä»¬çœ‹å¦‚ä½•ä¿®æ”¹é¡µé¢çš„æ•°æ®ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥é€šè¿‡ $store.state è¿›è¡Œä¿®æ”¹ã€‚æˆ‘ä»¬ä¸ºæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;p&gt;&#123;&#123;$store.state.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&lt;button @click&#x3D;&quot;increment&quot;&gt;+1&lt;&#x2F;button&gt;&lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; methods: &#123; increment() &#123; this.$store.state.count++ &#125; &#125;,&#125;&lt;&#x2F;script&gt; ä¿®æ”¹æˆåŠŸäº†ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ä¸Šé¢æåŠè¿‡ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œå› ä¸ºç›´æ¥ä¿®æ”¹çŠ¶æ€æˆ‘ä»¬æ— æ³•è®°å½•çŠ¶æ€çš„å˜åŒ–ï¼Œå¯¼è‡´æˆ‘ä»¬è°ƒè¯•æ—¶æ— æ³•çŸ¥é“çŠ¶æ€æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼Œå¦‚æœæˆ‘ä»¬è¦æ›´æ”¹çŠ¶æ€çš„è¯ï¼Œéœ€è¦å‘èµ·ä¸€ä¸ªè¯·æ±‚è®© Vuex å¸®æˆ‘ä»¬ä¿®æ”¹æ•°æ®ï¼Œå‘èµ·è¯·æ±‚çš„æ–¹æ³•ä¾¿æ˜¯ store.commitï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š typeï¼šå‘èµ·çš„è¯·æ±‚çš„ç±»å‹ payloadï¼šéœ€è¦ä¼ é€’çš„å‚æ•° å…¶ä¸­ type ä¾¿æ˜¯æˆ‘ä»¬åœ¨ mutations ä¸­å®šä¹‰çš„æ–¹æ³•åï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼ä¿®æ”¹çŠ¶æ€ methods: &#123; increment() &#123; // this.$store.state.count++ this.$store.commit('increment') &#125;&#125;, é€šè¿‡ vue-devtoolsï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°æ¯ä¸€æ¬¡æ•°æ®å˜åŒ–çš„è®°å½•ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥å›åˆ°ä¹‹å‰ä»»æ„çš„ä¸€ä¸ªçŠ¶æ€(æ—¶ç©ºæ—…è¡Œ)ï¼Œè¿™ä¼šä¸ºæˆ‘ä»¬è°ƒè¯•ç¨‹åºå¸¦æ¥å·¨å¤§çš„æ–¹ä¾¿ã€‚ ä¸Šé¢çš„ increment æ–¹æ³•å¹¶ä¸éœ€è¦é¢å¤–çš„å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰ä¼ é€’ payloadï¼Œä¸ºäº†æ¼”ç¤ºæ­¤å±æ€§çš„ä½œç”¨ï¼Œæˆ‘ä»¬åœ¨ mutations ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³• incrementByï¼Œå®ƒå¯ä»¥å¢åŠ æŒ‡å®šå¤§å°çš„å€¼ const store = new Vuex.Store(&#123; state: &#123; count: 0 &#125;, mutations: &#123; increment(state) &#123; state.count++ &#125;, incrementBy(state, payload) &#123; state.count += payload.count &#125; &#125;&#125;) æ¥ç€æˆ‘ä»¬åœ¨ App.vue ä¸­æ–°å¢ä¸€ä¸ªæŒ‰é’®ï¼Œè¡¨ç¤ºå¢åŠ ä¸€ä¸ªæŒ‡å®šçš„å€¼ &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;p&gt;&#123;&#123;$store.state.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt; &lt;button @click&#x3D;&quot;increment&quot;&gt;+1&lt;&#x2F;button&gt; &lt;button @click&#x3D;&quot;incrementByTen&quot;&gt;+10&lt;&#x2F;button&gt; &lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; æˆ‘ä»¬å¸Œæœ›å½“ç‚¹å‡»ç¬¬äºŒä¸ªæŒ‰é’®æ—¶å°† count +10ï¼Œæˆ‘ä»¬ä¾¿æ¥å®ç° incrementByTen incrementByTen() &#123; this.$store.commit('incrementBy', &#123; count: 10 &#125;) æ³¨æ„åˆ°æ­¤æ—¶æˆ‘ä»¬ä¸º commit ä¼ é€’ç¬¬äºŒä¸ªå‚æ•° payloadï¼Œå®ƒä¼šè¢«ä¼ é€’ç»™ mutations ä¸­çš„ incrementBy æ–¹æ³•ï¼ŒincrementBy ä¼šæ®æ­¤ä¿®æ”¹æ•°æ® æˆ‘ä»¬å¯ä»¥å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå½“ç”¨æˆ·è§†å›¾ç›´æ¥ä¿®æ”¹çŠ¶æ€æ—¶ï¼Œå°†ä¼šåœ¨æ§åˆ¶å°ç»™å‡ºè­¦å‘Šã€‚å¯åŠ¨ä¸¥æ ¼æ¨¡å¼çš„æ–¹æ³•å¦‚ä¸‹ &#123;10&#125;const store = new Vuex.Store(&#123; state: &#123; count: 0 &#125;, mutations: &#123; increment(state) &#123; state.count++ &#125; &#125;, strict: true&#125;) å¼€å¯ä¸¥æ ¼æ¨¡å¼åï¼Œå½“æˆ‘ä»¬ç›´æ¥ä¿®æ”¹æ•°æ®æ—¶ï¼Œæ§åˆ¶å°å°†ä¼šç»™å‡ºè­¦å‘Šï¼Œå½“ç„¶å¹¶ä¸èƒ½é˜»æ­¢ä½ ä¿®æ”¹æ•°æ®ã€‚ æ ¸å¿ƒæ¦‚å¿µä¸Šé¢æˆ‘ä»¬ä»”ç»†ä»‹ç»äº† state ä¸ mutations è¿™ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œæ¥ä¸‹æ¥ä¾¿æ·±å…¥äº†è§£æ·±å…¥äº†è§£å…¶ä»–é‡è¦çš„æ¦‚å¿µã€‚ gettersæœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦è·å¾— store ä¸­æ•°æ®çš„æ´¾ç”Ÿå±æ€§ï¼Œä¾‹å¦‚åŠ å…¥æœ‰å¦‚ä¸‹ store const store = new Vuex.Store(&#123; state: &#123; todos: [&#123; done: false, content: 'Run' &#125;, &#123; done: true, content: 'Read' &#125;] &#125;&#125;) æˆ‘ä»¬å¯èƒ½ä¼šåœ¨å¾ˆå¤šçš„ç»„ä»¶ä¸­éœ€è¦è®¿é—® todos ä¸­æœ‰å“ªäº›å…ƒç´  done ä¸º trueï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šåœ¨ç»„ä»¶ä¸­æ·»åŠ è®¡ç®—å±æ€§ computed: &#123; doneTodos () &#123; return this.$store.state.todos.filter(todo =&gt; todo.done) &#125;&#125; ä½†æ˜¯æˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªç”¨åˆ°çš„åœ°æ–¹éƒ½æ·»åŠ è¿™ä¸ªå±æ€§ï¼Œä»£ç é‡å¤äº†ã€‚Vuex å…è®¸æˆ‘ä»¬åœ¨ store ä¸­å®šä¹‰ getter(ç›¸å½“äº store ä¸­çš„è®¡ç®—å±æ€§) &#123;11-15&#125;const store = new Vuex.Store(&#123; state: &#123; todos: [&#123; done: false, content: 'Run' &#125;, &#123; done: true, content: 'Read' &#125;] &#125;, getters: &#123; doneTodos(state) &#123; return state.todos.filter(todo =&gt; todo.done) &#125; &#125;&#125;) æ¥ç€æˆ‘ä»¬ä¾¿å¯ä»¥åœ¨ç»„ä»¶ä¸­é€šè¿‡ $getters.doneTodos è·å¾—æ­¤å±æ€§äº†ã€‚ getter ä¹Ÿå¯ä»¥æ¥æ”¶å…¶ä»– getter ä½œä¸ºç¬¬äºŒä¸ª getter getters: &#123; doneTodos(state) &#123; return state.todos.filter(todo =&gt; todo.done) &#125;, doneTodoCounts(state, getters) &#123; return getters.doneTodos.length &#125;&#125; actionsæˆ‘ä»¬è¦æ±‚ mutations ä¸­çš„æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„(ä¸ºä»€ä¹ˆ? å®˜ç½‘è§£é‡Šäº†ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰ç†è§£)ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦å¼‚æ­¥çš„æ”¹å˜æ•°æ®æ—¶ï¼Œå°±ä¸å¾—ä¸å€ŸåŠ©äº actionsã€‚ä»¥è®¡æ•°å™¨æ¡ˆä¾‹ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¸Œæœ›ç‚¹å‡» +1 æŒ‰é’®åè¿‡ 1s è¿›è¡Œå¢åŠ ï¼Œæˆ‘ä»¬å®šä¹‰å¦‚ä¸‹ store const store = new Vuex.Store(&#123; state: &#123; loading: false, count: 0 &#125;, mutations: &#123; increment(state) &#123; state.count++ &#125;, setLoadingFalse(state) &#123; state.loading = false &#125;, setLoadingTrue(state) &#123; state.loading = true &#125; &#125;, actions: &#123; incrementAsync(store) &#123; store.commit('setLoadingTrue') setTimeout(() =&gt; &#123; store.commit('increment') store.commit('setLoadingFalse') &#125;, 1000) &#125; &#125;, strict: true&#125;) åœ¨ store ä¸­å®šä¹‰äº†ä¸¤ä¸ªçŠ¶æ€ï¼Œloading è¡¨ç¤ºæ­£åœ¨åŠ è½½ä¸­ï¼Œcount è¡¨ç¤ºè®¡æ•°å™¨çš„å€¼ï¼›åœ¨ mutations å®šä¹‰äº†ä¸¤ä¸ªä¿®æ”¹æ•°æ®çš„æ–¹æ³•ï¼›åœ¨ actions ä¸­å®šä¹‰äº†å¼‚æ­¥ä¿®æ”¹æ•°æ®çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é¦–å…ˆè®¾ç½® loading ä¸º trueï¼Œè¡¨ç¤ºæ•°æ®æ­£åœ¨åŠ è½½ï¼Œç»è¿‡ 1s åï¼Œå°† loading è®¾ç½®ä¸º falseï¼Œå¹¶å‘å‡ºä¿¡å·å¢åŠ  countã€‚ App.vue çš„å†…å®¹å¦‚ä¸‹ &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;p v-if&#x3D;&quot;$store.state.loading&quot;&gt;Loading&lt;&#x2F;p&gt; &lt;p v-else&gt;&#123;&#123;$store.state.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt; &lt;button @click&#x3D;&quot;increment&quot;&gt;+1&lt;&#x2F;button&gt; &lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; methods: &#123; increment() &#123; &#125; &#125;,&#125;&lt;&#x2F;script&gt; æˆ‘ä»¬å¸Œæœ›å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè§¦å‘ actions ä¸­å®šä¹‰çš„ incrementAsync è¿™ä¸ª actionï¼Œè§¦å‘ actions éœ€è¦é€šè¿‡ store.dispatch è¿™ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹ŸåŒæ ·æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š type payload å…·ä½“æ„ä¹‰åŒ commitï¼Œä¿®æ”¹ App.vue methods: &#123; increment() &#123; this.$store.dispatch('incrementAsync') &#125;&#125; è‡³æ­¤ç»™å‡º Vuex çš„å·¥ä½œçš„è¿‡ç¨‹ï¼Œæƒ³å¿…å¤§å®¶å¯ä»¥å¾ˆå®¹æ˜“çš„çœ‹æ‡‚äº† moduleså› ä¸ºæ‰€æœ‰çš„çŠ¶æ€éƒ½ä¿å­˜åœ¨ storeï¼Œå½“é¡¹ç›®è§„æ¨¡è¾ƒå¤§æ—¶ï¼ŒåŠ¿å¿…ä¼šä½¿å¾— store ä¸­çš„çŠ¶æ€è§å¾—ååˆ†è‡ƒè‚¿ã€‚Vuex å…è®¸æˆ‘ä»¬å°† stotr åˆ’åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationã€actionã€getter const moduleA = &#123; state: &#123; count: 0 &#125;, mutations: &#123; inc(state) &#123; state.count++ &#125; &#125;&#125;const moduleB = &#123; state: &#123; count: 0 &#125;, mutations: &#123; inc(state) &#123; state.count++ &#125; &#125;&#125;const store = new Vuex.Store(&#123; state: &#123; count: 0 &#125;, mutations: &#123; inc(state) &#123; state.count++ &#125; &#125;, modules: &#123; a: moduleA, b: moduleB &#125;&#125;) æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ª moduleï¼Œåœ¨æ¯ä¸ª module é‡Œé¢éƒ½å®šä¹‰äº†ä¸€ä¸ªå˜é‡ countï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ª mutationï¼Œç”¨ä»¥å¯¹ count é€’å¢ã€‚ç°å¦‚ä»Šå¯ä»¥é€šè¿‡ store.state.moduleName æ¥è®¿é—®æ¨¡å—å…¶ä¸­çš„çŠ¶æ€ï¼ŒApp.vue ä¸­çš„å†…å®¹å¦‚ä¸‹ &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;p&gt;&#123;&#123;$store.state.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&#123;&#123;$store.state.a.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&#123;&#123;$store.state.b.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt; &lt;button @click&#x3D;&quot;inc&quot;&gt;+1&lt;&#x2F;button&gt; &lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; methods: &#123; inc() &#123; this.$store.commit(&#39;inc&#39;) &#125; &#125;,&#125;&lt;&#x2F;script&gt; å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ‰€æœ‰çš„ mutation éƒ½è¢«è§¦å‘äº† å¯¹äº actions ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¹Ÿä¼šè§¦å‘æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ actionsã€‚å› ä¸ºæ¨¡å—ä¸­çš„ action ä¸ mutation éƒ½æ˜¯æ³¨å†Œåœ¨å…¨å±€å‘½åç©ºé—´çš„ï¼Œå¦‚æœå¸Œæœ›æ¨¡å—å…·æœ‰æ›´é«˜çš„å°è£…æ€§ï¼Œå¯ä»¥ä¸ºæ¨¡å—æ·»åŠ  namespaced: true å±æ€§ï¼Œæ¨¡å—ä¸­çš„ action ä¸ mutation ä¼šè¢«æ³¨å†Œåˆ° moduleName/ ä¸‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ commit(&#39;moduleName/inc&#39;) æ¥è§¦å‘æ¨¡å—ä¸‹çš„ mutation &#123;2,14&#125;const moduleA = &#123; namespaced: true, state: &#123; count: 0 &#125;, mutations: &#123; inc(state) &#123; state.count++ &#125; &#125;&#125;const moduleB = &#123; namespaced: true, state: &#123; count: 0 &#125;, mutations: &#123; inc(state) &#123; state.count++ &#125; &#125;&#125; ä¿®æ”¹ App.vue &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;p&gt;&#123;&#123;$store.state.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&#123;&#123;$store.state.a.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt;&#123;&#123;$store.state.b.count&#125;&#125;&lt;&#x2F;p&gt; &lt;p&gt; &lt;button @click&#x3D;&quot;inc&quot;&gt;å…¨å±€ count +1&lt;&#x2F;button&gt; &lt;button @click&#x3D;&quot;inca&quot;&gt;æ¨¡å—a count +1&lt;&#x2F;button&gt; &lt;button @click&#x3D;&quot;incb&quot;&gt;æ¨¡å—b count +1&lt;&#x2F;button&gt; &lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; methods: &#123; inc() &#123; this.$store.commit(&#39;inc&#39;) &#125;, inca() &#123; this.$store.commit(&#39;a&#x2F;inc&#39;) &#125;, incb() &#123; this.$store.commit(&#39;b&#x2F;inc&#39;) &#125; &#125;,&#125;&lt;&#x2F;script&gt; ä½¿ç”¨äº†å‘½åç©ºé—´ä¹‹åï¼Œåœ¨ action æ¥æ”¶åˆ°çš„ dispatch ä¸ commit å‡æ˜¯å±€éƒ¨åŒ–çš„ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨ action ä¸­ dispatch å…¶ä»– action æˆ–è€… commit ä¸€ä¸ª mutation ä¸éœ€è¦æ·»åŠ æ¨¡å—å‰ç¼€ &#123;12-15&#125;const moduleA = &#123; namespaced: true, state: &#123; count: 0 &#125;, mutations: &#123; inc(state) &#123; state.count++ &#125; &#125;, actions: &#123; incAsync(&#123;state, commit&#125;) &#123; setTimeout(() =&gt; &#123; commit('inc') // =&gt; commit('moduleName/inc') &#125;, 1000) &#125; &#125;&#125; åœ¨ getter ä¸­æ¥æ”¶åˆ°çš„ getters ä¹Ÿæ˜¯å±€éƒ¨çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ·»åŠ æ¨¡å—å‰ç¼€æ¥è®¿é—®æ¨¡å—å†…çš„ getter getters: &#123; doneTodoCounts(state, getters) &#123; return getters['doneTods'].length // =&gt; getters['moduleName/doneTodos'] &#125;&#125; æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨æ¨¡å—ä¸­è®¿é—®å…¨å±€çš„state ä¸ getter ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è®¿é—®ï¼š mutationï¼šç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æ¥æ”¶åˆ°å…¨å±€çŠ¶æ€ rootState getterï¼šç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥è·å¾— rootStateï¼Œç¬¬å››ä¸ªå‚æ•°å¯ä»¥è·å¾— rootGetters actionï¼šå¯ä»¥ç›´æ¥é€šè¿‡ store.rootState ä¸ store.rootGetters è·å¾—å…¨å±€ state ä¸ getters æ˜ å°„æ–¹æ³•æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­è®¿é—® store ä¸­çš„æ•°æ®æ—¶ï¼Œéœ€è¦é€šè¿‡ this.$store.state.xxx è®¿é—®æ•°æ®æˆ–è€… this.$store.commit(type) æ›´æ”¹æ•°æ®ï¼Œæ¯æ¬¡éƒ½éœ€è¦å†™ä¸€å¤§ä¸²ã€‚ç°åœ¨ Vuex ä¸ºæˆ‘ä»¬æä¾›äº†æ˜ å°„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å°‘æ•²å‡ ä¸‹é”®ç›˜ã€‚ mapStatemapState å¯ä»¥å°† store ä¸­çš„çŠ¶æ€æ˜ å°„ä¸ºç»„ä»¶çš„è®¡ç®—å±æ€§ import &#123;mapState&#125; from 'vuex'export default &#123; computed: &#123; ...mapState(['count']) // this.$store.state.count =&gt; this.count &#125;&#125; mapState è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤éœ€è¦é€šè¿‡å±•å¼€è¿ç®—ç¬¦ ... å°†å…¶å±•å¼€åˆ° computed ä¸­ï¼Œæ¥ç€æˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡ this.count è®¿é—®åˆ° store ä¸­çš„ count äº†ã€‚ é€šè¿‡ mapState è¿˜å¯ä»¥å°†æ¨¡å—æ˜ å°„åˆ°è®¡ç®—å±æ€§ computed: &#123; ...mapState(['user']) // this.$store.state.user =&gt; this.user&#125; ä»è€Œå¯ä»¥é€šè¿‡ this.user.xxx è®¿é—®åˆ°æ¨¡å— user ä¸­çš„æ•°æ®ã€‚å¦‚æœå¸Œæœ›å°†æ¨¡å—ä¸­å…·ä½“çš„æ•°æ®æ˜ å°„åˆ°ç»„ä»¶çš„è®¡ç®—å±æ€§ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿™ä¹ˆå†™ computed: &#123; ...mapState(['user/username', 'user/age']), // =&gt; this.username, this.age&#125; æˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡ this.username ä¸ this.age è®¿é—®åˆ°æ¨¡å— user ä¸­çš„æ•°æ®äº†ã€‚ä¸Šé¢æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªç®€ä¾¿å†™æ³• computed: &#123; ...mapState('user', ['username', 'age'])&#125; maoState æ–¹æ³•è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªå¯¹è±¡æ¥å®šä¹‰æ˜ å°„å…³ç³» ...mapState(&#123; count: state =&gt; state.count, // this.$store.state.count =&gt; this.count acount: state =&gt; state.a.count, // this.$store.state.a.count =&gt; this.acount bcount: state =&gt; state.b.count // this.$store.state.b.count =&gt; this.bcount&#125;) mapGettersmapGetter çš„ä½¿ç”¨åŒ mapStateï¼Œå¯ä»¥å°† getter æ˜ å°„åˆ°è®¡ç®—å±æ€§ computed: &#123; ...mapGetters(['doneTodos']) // this.$store.getters.doneTodos =&gt; this.doneTodos&#125; å¦‚æœä½ æƒ³ä¸ºè®¡ç®—å±æ€§å–åˆ«åï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ computed: &#123; ...mapGetters(&#123; dones: 'doneTodos' // this.$store.getters.doneTodos =&gt; this.dones &#125;)&#125;, mapMutationsmapMutations å¯ä»¥å°† this.$store.commit(type) æ˜ å°„åˆ°ç»„ä»¶çš„æ–¹æ³•ä¸Š methods: &#123; ...mapMutations(&#123; inc: 'inc', // this.$store.commit('inc') =&gt; this.inc inca: 'a/inc', // this.$store.commit('a/inc') =&gt; this.inca incb: 'b/inc' // this.$store.commit('b.inc') =&gt; this.incb &#125;)&#125; mapActionsmapActions å¯ä»¥å°† this.$store.dispatch(type) æ˜ å°„åˆ°ç»„ä»¶çš„æ–¹æ³•ä¸Š ...mapActions(&#123; incAsync: 'incAsync' // this.$store.dispatch('incAsync') =&gt; this.incAsync&#125;) æ’ä»¶æˆ‘ä»¬åˆ›å»º store æ—¶ï¼Œè¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ª plugins é€‰é¡¹ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ä¸º Vuex æ·»åŠ æ’ä»¶ã€‚Vuex æ’ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ store ä½œä¸ºå”¯ä¸€çš„å‚æ•°ï¼Œplugins ä¸ºæˆ‘ä»¬æš´éœ²å‡ºæ¯æ¬¡ mutation çš„é’©å­ const persist = store =&gt; &#123; // store åˆå§‹åŒ–åè°ƒç”¨ store.subscribe((mtation, state) =&gt; &#123; // æ¯æ¬¡ mutation åè°ƒç”¨ &#125;)&#125; æˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„æ’ä»¶ï¼Œæ¥æŒä¹…åŒ– storeï¼Œæ¯æ¬¡é‡æ–°å¯åŠ¨é¡¹ç›®æ—¶ä» localStorage ä¸­è¯»å–æ•°æ®ï¼Œæ¯æ¬¡çŠ¶æ€å˜æ›´æ—¶å°†æ•°æ®å­˜å…¥åˆ° localStorage ä¸­ const persist = store =&gt; &#123; // store åˆå§‹åŒ–åè°ƒç”¨ const state = localStorage.getItem('state') if(state != null) &#123; store.replaceState(JSON.parse(state)) &#125; store.subscribe((mtation, state) =&gt; &#123; // æ¯æ¬¡ mutation åè°ƒç”¨ localStorage.setItem('state', JSON.stringify(state)) &#125;)&#125; åœ¨åˆ›å»º store ä¼ å…¥è¯¥æ’ä»¶ const store = new Vuex.Store(&#123; state: &#123;...&#125;, getters: &#123;...&#125;, mutations: &#123;...&#125;, actions: &#123;...&#125;, modules: &#123;...&#125;, plugins: [persist]&#125;) å‚è€ƒé“¾æ¥ï¼š Vuexå®˜æ–¹æ–‡æ¡£","tags":[]},{"title":"vue-cli çš„ä½¿ç”¨","date":"2021-04-01T16:00:00.000Z","path":"/vue-cliçš„ä½¿ç”¨/","text":"åœ¨ä¹‹å‰ä½¿ç”¨ Vue çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯æ”¾åœ¨ä¸€ä¸ª script æ ‡ç­¾ä¸­ï¼Œæ‰€æœ‰çš„ä»£ç æ”¾åœ¨ä¸€èµ·ï¼ŒåŠ¿å¿…ä¼šå¸¦æ¥ç»´æŠ¤ä¸Šçš„å›°éš¾ï¼Œå¦å¤–ï¼Œç°å¦‚ä»Šçš„è½¯ä»¶å¼€å‘æ¨¡å¼ï¼Œéƒ½æ˜¯å¤šäººåä½œï¼Œæ‰€æœ‰çš„ä»£ç éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œä¹Ÿä¼šç»™å¤šäººåä½œå¸¦æ¥å›°æ‰°ï¼Œæˆ‘ä»¬éœ€è¦æ›´åŠ å·¥ç¨‹çš„æ–¹å¼æ¥å†™ Vue ä»£ç ã€‚ ä¸€èˆ¬æˆ‘ä»¬è¦æ±‚ä¸€ä¸ª Vue ç»„ä»¶å¯¹åº”ä¸€ä¸ªä»¥ .vue ç»“å°¾çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ &#x2F;&#x2F; Hello.vue&lt;template&gt; &lt;div&gt; &#123;&#123;msg&#125;&#125; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; msg: &#39;Hello World!&#39; &#125; &#125;,&#125;&lt;&#x2F;script&gt; ä¸Šé¢å°±å®šä¹‰äº†ä¸€ä¸ªå±€éƒ¨ç»„ä»¶ã€‚ å®‰è£… vue-cliå¯¹äºä¸Šè¿° .vue æ–‡ä»¶æ˜¯æ— æ³•åœ¨æµè§ˆå™¨æ˜¾ç¤ºçš„ï¼Œå› ä¸ºæµè§ˆå™¨åªè®¤è¯† html, css, javascript æ–‡ä»¶ï¼Œæ‰€ä»¥è¦ä½¿å¾— .vue æ–‡ä»¶èƒ½å¤Ÿæ˜¾ç¤ºåœ¨æµè§ˆå™¨ï¼Œæˆ‘ä»¬éœ€è¦æŸç§å·¥å…·å°†ä¸Šè¿°ä»£ç è½¬åŒ–ä¸ºæµè§ˆå™¨è®¤è¯†çš„å½¢å¼ï¼Œè¿™å°±è¦å€ŸåŠ©äº vue-cliï¼Œé¦–å…ˆå¯¹å…¶è¿›è¡Œä¸‹è½½ npm install -g @vue/cli é€šè¿‡ vue --version å¯ä»¥æŸ¥çœ‹æ‰€å®‰è£…çš„ vue-cli çš„ç‰ˆæœ¬ vue --version@vue/cli 4.5.12 æˆ‘ä»¬å¯ä»¥é€šè¿‡ vue serve å¿«é€Ÿåœ¨æµè§ˆå™¨æ˜¾ç¤ºä¸€ä¸ª .vue æ–‡ä»¶ï¼Œä¸è¿‡éœ€è¦å…ˆä¸‹è½½ä¸€ä¸ªå…¨å±€æ‰©å±• npm install -g @vue/cli-service-global æ¥ç€ä¾¿å¯æŸ¥çœ‹ä¸€ä¸ªç»„ä»¶çš„åŸå‹(å³åœ¨æµè§ˆå™¨æ˜¾ç¤ºè¯¥ç»„ä»¶) vue serve Hello.vue vue-cli ä¼šå¯¹ Hello.vue è¿›è¡Œä¸€ç•ªå¤„ç†ï¼Œæ¥ç€ä¼šåœ¨æ§åˆ¶å°æ‰“å°å¦‚ä¸‹ä¿¡æ¯ æˆ‘ä»¬å¯ä»¥åœ¨æŒ‡å®šåœ°å€ http://localhost:8080/ æŸ¥çœ‹è¯¥ç»„ä»¶çš„åŸå‹ï¼Œå¦‚ä¸‹ åˆ›å»ºä¸€ä¸ªé¡¹ç›®vue-createå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª Vue é¡¹ç›® vue create é¡¹ç›®å æ¥ç€ Vue ä¾¿ä¼šæç¤ºä½¿ç”¨ä½•ç§é¢„è®¾(preset) åˆ›å»ºçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹æ‰€ç¤º å…¶ä¸­ main.js ä¾¿æ˜¯å…¥å£æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ import Vue from 'vue'import App from './App.vue'Vue.config.productionTip = falsenew Vue(&#123; render: h =&gt; h(App),&#125;).$mount('#app') å°±æ˜¯å¼•å…¥äº† App.vue ç»„ä»¶ï¼Œå¹¶æŠŠè¯¥ç»„ä»¶æŒ‚è½½åœ¨äº† id ä¸º app å…ƒç´ ä¸Šï¼ŒApp.vue çš„å†…å®¹å¦‚ä¸‹ &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;img alt&#x3D;&quot;Vue logo&quot; src&#x3D;&quot;.&#x2F;assets&#x2F;logo.png&quot;&gt; &lt;HelloWorld msg&#x3D;&quot;Welcome to Your Vue.js App&quot;&#x2F;&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;import HelloWorld from &#39;.&#x2F;components&#x2F;HelloWorld.vue&#39;export default &#123; name: &#39;App&#39;, components: &#123; HelloWorld &#125;&#125;&lt;&#x2F;script&gt;&lt;style&gt;#app &#123; font-family: Avenir, Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-align: center; color: #2c3e50; margin-top: 60px;&#125;&lt;&#x2F;style&gt; .vue æ–‡ä»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆ templateï¼šå®šä¹‰æ¨¡æ¿å†…å®¹ scriptï¼šåœ¨å…¶ä¸­å®šä¹‰æ•°æ®ï¼Œè®¡ç®—å±æ€§ï¼Œæ–¹æ³•ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç­‰ç­‰ styleï¼šå®šä¹‰ç»„ä»¶æ ·å¼ åœ¨ App.vue ä¸­åˆå¼•å…¥äº† HelloWorld.vueï¼Œå› ä¸º HelloWorld.vue çš„å†…å®¹æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±ä¸å±•ç¤ºäº†ï¼Œæˆ‘ä»¬æ¥çœ‹æ¸²æŸ“åçš„é¡µé¢æ˜¯ä»€ä¹ˆæ ·å­ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ npm run serve é¡¹ç›®æ„å»ºå®Œæˆä¹‹åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥åœ¨ http://localhost:8080/ çœ‹åˆ°æ¸²æŸ“åçš„é¡µé¢ vue uié™¤äº†é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å›¾å½¢åŒ–çš„ç•Œé¢åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ vue uiï¼Œä¾¿ä¼šåœ¨æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ª UI ç•Œé¢ ç‚¹å‡» Create æ¥åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›® å¡«å†™å®Œä¿¡æ¯åï¼Œä¾¿ä¼šè®©ä½ é€‰æ‹©é¢„è®¾ é€‰æ‹©å®Œé¢„è®¾åä¾¿å¯åˆ›å»ºé¡¹ç›®äº†ï¼Œåˆ›å»ºå®Œé¡¹ç›®åä¾¿å¯åœ¨å¯è§†åŒ–é¡µé¢å¯åŠ¨é¡¹ç›® ç®€å•çš„ Vue é¡¹ç›®ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ .vue ç»„ä»¶çš„å½¢å¼æ¥å®ç°ä¸‹é¢çš„åŠŸèƒ½ è¿™ä¸ªåŠŸèƒ½åœ¨ä¹‹å‰æˆ‘ä»¬å·²ç»å®ç°è¿‡äº†ï¼Œä¸»è¦åˆ†è§£ä¸ºä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œä¸¤ä¸ªå­ç»„ä»¶ App.vue CourseAdd.vue CourseDisplay.vue App.vue çš„å†…å®¹å¦‚ä¸‹ &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;CourseAdd @addCourse&#x3D;&quot;addCourse&quot;&gt;&lt;&#x2F;CourseAdd&gt; &lt;CourseDisplay :courses&#x3D;&quot;courses&quot;&gt;&lt;&#x2F;CourseDisplay&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;import CourseAdd from &#39;.&#x2F;components&#x2F;CourseAdd&#39;import CourseDisplay from &#39;.&#x2F;components&#x2F;CourseDisplay&#39;export default &#123; name: &#39;App&#39;, components: &#123; CourseAdd, CourseDisplay &#125;, data() &#123; return &#123; courses: [&#39;è¯­æ–‡&#39;, &#39;æ•°å­¦&#39;, &#39;è‹±è¯­&#39;] &#125; &#125;, methods: &#123; addCourse(course) &#123; this.courses.push(course) &#125; &#125;&#125;&lt;&#x2F;script&gt; åœ¨ App.vue ä¸­å¯¼å…¥äº† CourseAdd ä¸ CourseDisplay ä¸¤ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”ä¸º CourseAdd ç»„ä»¶ç»‘å®šäº†è‡ªå®šä¹‰äº‹ä»¶ï¼Œç›®çš„æ˜¯ä¸ºäº†å°†æ•°æ®ç”±å­ç»„ä»¶ä¼ é€’åˆ°çˆ¶ç»„ä»¶ï¼Œä¸º CourseDisplay ä¼ é€’äº† courses ä»¥åšå±•ç¤ºã€‚ CourseAdd.vue çš„å†…å®¹å¦‚ä¸‹ &lt;template&gt; &lt;div&gt; &lt;p&gt;&lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;course&quot; @keydown.enter&#x3D;&quot;addCourse&quot;&gt;&lt;&#x2F;p&gt; &lt;p&gt;&lt;button @click&#x3D;&quot;addCourse&quot;&gt;æ·»åŠ è¯¾ç¨‹&lt;&#x2F;button&gt;&lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; name: &#39;CourseAdd&#39;, data() &#123; return &#123; course: &#39;&#39; &#125; &#125;, methods: &#123; addCourse() &#123; &#x2F;&#x2F; ç©ºæ ¼ä»¥åŠç©ºå†…å®¹ä¸åšæäº¤ if (this.course.trim() &#x3D;&#x3D;&#x3D; &#39;&#39;) &#123; return; &#125; this.$emit(&#39;addCourse&#39;, this.course) this.course &#x3D; &#39;&#39; &#125; &#125;,&#125;&lt;&#x2F;script&gt;&lt;style&gt;input &#123; outline: none; border: none; border-bottom: 2px solid black; padding: 5px 5px;&#125;&lt;&#x2F;style&gt; æˆ‘ä»¬ä¸º input ç»‘å®šäº†æŒ‰é”®äº‹ä»¶ï¼Œå½“æˆ‘ä»¬æŒ‰ä¸‹ enter é”®æ—¶å°±ä¼šè§¦å‘ addCourse æ–¹æ³•ï¼Œåœ¨ addCourse æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è§¦å‘äº†è‡ªå®šä¹‰äº‹ä»¶ addCourse ï¼Œå¹¶ä¸”å‘äº‹ä»¶ä¼ é€’äº†æ•°æ®ï¼›æˆ–è€…å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¹Ÿå¯è§¦å‘æ­¤äº‹ä»¶ã€‚ CourseDisplay.vue çš„å†…å®¹å¦‚ä¸‹ &lt;template&gt; &lt;div&gt; &lt;ul&gt; &lt;li v-for&#x3D;&quot;course in courses&quot; :key&#x3D;&quot;course&quot;&gt; &#123;&#123;course&#125;&#125; &lt;&#x2F;li&gt; &lt;&#x2F;ul&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; name: &#39;CourseDisplay&#39;, props: &#123; courses: Array &#125;&#125;&lt;&#x2F;script&gt; ä»£ç ååˆ†ç®€å•ï¼Œåªæ˜¯å°†çˆ¶ç»„ä»¶ä¼ å…¥çš„ courses è¿›è¡Œå±•ç¤ºã€‚ æœ€ååœ¨ main.js ä¸­å¼•å…¥ App.vue import Vue from 'vue'import App from './App.vue'Vue.config.productionTip = falsenew Vue(&#123; render: h =&gt; h(App),&#125;).$mount('#app') åœ¨å‘½ä»¤è¡Œè¾“å…¥ npm run serve å³å¯åœ¨æµè§ˆå™¨è§‚å¯Ÿåˆ°ä¸Šè¿°åŠ¨å›¾åŠŸèƒ½ã€‚ æ’ä»¶Vue CLI ä½¿ç”¨äº†ä¸€å¥—åŸºäºæ’ä»¶çš„æ¶æ„ã€‚å¦‚æœä½ æŸ¥é˜…ä¸€ä¸ªæ–°åˆ›å»ºé¡¹ç›®çš„ package.jsonï¼Œå°±ä¼šå‘ç°ä¾èµ–éƒ½æ˜¯ä»¥ @vue/cli-plugin- å¼€å¤´çš„ã€‚æ’ä»¶å¯ä»¥ä¿®æ”¹ webpack çš„å†…éƒ¨é…ç½®ï¼Œä¹Ÿå¯ä»¥å‘ vue-cli-service æ³¨å…¥å‘½ä»¤ã€‚åœ¨é¡¹ç›®åˆ›å»ºçš„è¿‡ç¨‹ä¸­ï¼Œç»å¤§éƒ¨åˆ†åˆ—å‡ºçš„ç‰¹æ€§éƒ½æ˜¯é€šè¿‡æ’ä»¶æ¥å®ç°çš„ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ vue add å‘½ä»¤ä¸ºé¡¹ç›®æ·»åŠ ä¸€ä¸ªæ’ä»¶ vue add router å› ä¸º vue add å‘½ä»¤å¯èƒ½ä¿®æ”¹ä½ ç°æœ‰çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æ¨èåœ¨å®‰è£…æ’ä»¶ä¹‹å‰ï¼Œå°†å½“å‰é¡¹ç›®çš„çš„æœ€æ–°çŠ¶æ€æäº¤ã€‚ åç»­æˆ‘ä»¬ä½¿ç”¨çš„ç»„ä»¶åº“éƒ½æ˜¯é€šè¿‡æ’ä»¶çš„æ–¹å¼æ·»åŠ çš„ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ UI é¡µé¢ä¸ºé¡¹ç›®ç®¡ç†æ’ä»¶ã€‚ é™æ€è·¯å¾„æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨é™æ€èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚åœ¨ App.vue ä¸­å¼•ç”¨ src/assets/logo.png &lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;img src&#x3D;&quot;.&#x2F;assets&#x2F;logo.png&quot; alt&#x3D;&quot;&quot;&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; æ‰€æœ‰é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•å…¥çš„èµ„æºéƒ½ä¼šè¢« Webpack æ‰“åŒ…ï¼Œå¯¹äºå›¾ç‰‡èµ„æºä¼šè¢«æ”¾åœ¨æ ¹ç›®å½•ä¸‹é¢çš„ img æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰€ä»¥ä¸Šé¢çš„å¼•ç”¨å®é™…ä¸Šä¼šè¢«è§£æä¸º æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç»å¯¹è·¯å¾„æ¥å¼•å…¥èµ„æºæ–‡ä»¶ï¼Œå› ä¸ºé¡¹ç›® public ä¸­çš„æ–‡ä»¶ä¸ä¼šç»è¿‡ Webpack å¤„ç†ï¼Œè€Œæ˜¯ä¼šè¢«ç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼Œæ‰€ä»¥é€šè¿‡ç»å¯¹è·¯å¾„å¼•ç”¨çš„èµ„æºï¼Œå°±æ˜¯åœ¨ public æ–‡ä»¶å¤¹ä¸­çš„èµ„æºã€‚ &lt;img src&#x3D;&quot;&#x2F;assets&#x2F;logo.png&quot; alt&#x3D;&quot;&quot;&gt; å°±ç›¸å½“äºè®¿é—® public/assets/logo.pngã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œvue-cli å‡è®¾ä½ æ˜¯éƒ¨ç½²åœ¨ä¸€ä¸ªåŸŸåçš„æ ¹ç›®å½•ä¸‹ï¼Œå¦‚ https://www.app.com/ï¼Œä½†æ˜¯å¦‚æœä½ çš„é¡¹ç›®æ˜¯éƒ¨ç½²åœ¨ä¸€ä¸ªå­è·¯å¾„ä¸Šï¼Œåˆ™ä½ å°±éœ€è¦ä½¿ç”¨ publicPath æŒ‡å®šè¿™ä¸ªå­è·¯å¾„ï¼Œä¾‹å¦‚ä½ çš„åº”ç”¨è¢«éƒ¨ç½²åœ¨ https://www.app.com/demo/ ä¸‹ï¼Œåˆ™åº”å½“å°†ä½ çš„ publicPath è®¾ç½®ä¸º /demo/ // vue.config.jsmodule.exports = &#123; publicPath: '/demo/'&#125; å¦‚æœé€šè¿‡ç»å¯¹è·¯å¾„å¼•å…¥èµ„æºï¼Œåˆ™éœ€è¦åœ¨ data ä¸­å®šä¹‰ publicPath data() &#123; return &#123; publicPath: process.env.BASE_URLï¼Œ // ... &#125;&#125;, æ¥ç€åœ¨ä¿®æ”¹å¼•å…¥æ–¹å¼ &lt;img :src&#x3D;&quot;&#96;$&#123;publicPath&#125;assets&#x2F;logo.png&#96;&quot; alt&#x3D;&quot;&quot;&gt; å¦‚æœæ˜¯é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•å…¥çš„èµ„æºï¼Œåˆ™ä¸å¿…è¿™ä¹ˆéº»çƒ¦ï¼ŒWebpack ä¼šå¸®æˆ‘ä»¬é™¤äº†å¥½ä¸€åˆ‡ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ vue.config.js ä¸­å®šä¹‰å¥½ publicPath å³å¯ï¼Œæ‰€ä»¥å°½å¯èƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•å…¥èµ„æºã€‚ Webpack ä¸ºæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåˆ«åï¼Œ@ï¼Œå®ƒè¡¨ç¤ºé¡¹ç›®çš„ src ç›®å½•ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å¼•ç”¨èµ„æº &lt;img src&#x3D;&quot;@&#x2F;assets&#x2F;logo.png&quot; alt&#x3D;&quot;&quot;&gt; CSSScoped CSSåœ¨ç»„ä»¶ style æ ‡ç­¾ä¸­å®šä¹‰çš„ CSS å…¶å®æ˜¯å…¨å±€ CSSï¼Œå®ƒä¼šå¯¹å…¶ä»–ç»„ä»¶çš„æ ·å¼ä¹Ÿä¼šäº§ç”Ÿå½±å“ï¼Œä¾‹å¦‚å¯¹äºå¦‚ä¸‹ä¸¤ä¸ªç»„ä»¶ &#x2F;&#x2F; Component1.vue&lt;template&gt; &lt;div class&#x3D;&quot;com&quot;&gt;&lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; name: &#39;Component1&#39;&#125;&lt;&#x2F;script&gt;&lt;style&gt;.com &#123; width: 100px; height: 100px; background-color: aqua; margin-bottom: 10px;&#125;&lt;&#x2F;style&gt; &#x2F;&#x2F; Component2.vue&lt;template&gt; &lt;div class&#x3D;&quot;com&quot;&gt;&lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; name: &#39;Component2&#39;&#125;&lt;&#x2F;script&gt; ä¸Šé¢å®šä¹‰äº†ä¸¤ä¸ªç»„ä»¶ï¼ŒComponent1.vue ä¸­å®šä¹‰äº†æ ·å¼ï¼ŒCoponent2.vue ä¸­æ²¡æœ‰å®šä¹‰æ ·å¼ï¼Œä½†æ˜¯ Component1.vue ä¸­çš„æ ·å¼æ˜¯å…¨å±€çš„ï¼Œæ‰€ä»¥ Component2.vue ç»„ä»¶ä¹Ÿä¼šå—åˆ°å½±å“ï¼Œåœ¨ App.vue ä¸­ä½¿ç”¨è€…ä¸¤ä¸ªç»„ä»¶ &#x2F;&#x2F; App.vue&lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;component-1 &#x2F;&gt; &lt;component-2 &#x2F;&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;import Component1 from &#39;.&#x2F;components&#x2F;Component1&#39;import Component2 from &#39;.&#x2F;components&#x2F;Componnet2&#39;export default &#123; name: &#39;App&#39;, components: &#123; Component1, Component2 &#125;&#125;&lt;&#x2F;script&gt; è¿è¡Œ npm run serve æŸ¥çœ‹é¡µé¢ è¦ä½¿å¾— Component1 ä¸­çš„æ ·å¼ä¸å½±å“å…¶ä»–ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸º style æ ‡ç­¾æ·»åŠ  scoped å±æ€§ &lt;style scoped&gt;.com &#123; width: 100px; height: 100px; background-color: aqua; margin-bottom: 10px;&#125;&lt;&#x2F;style&gt; è¿™æ—¶åœ¨è§‚å¯Ÿé¡µé¢ è¿™æ—¶å‘ç°åªæœ‰ Component1.vue ç»„ä»¶æœ‰æ ·å¼ã€‚å…¶åŸç†æ˜¯ä¼šä¸º Component1.vue ç»„ä»¶æ·»åŠ è‡ªå®šä¹‰å±æ€§ ä¸Šé¢çš„ç»„ä»¶æ˜¯ Component1ï¼Œä¸‹é¢çš„ç»„ä»¶æ˜¯ Component2ï¼Œå¯è§ Component1 ä¸Šæœ‰ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ data-v-04421304ï¼Œæ¥ç€ä½¿ç”¨ä¸€ä¸ªå±æ€§é€‰æ‹©å™¨ä½¿å¾—æ ·å¼åªå¯¹ Component1 ç”Ÿæ•ˆ Module CSSå¦ä¸€ç§æ¯”è¾ƒæµè¡Œçš„æ–¹æ¡ˆæ˜¯ CSS in JSï¼Œä¹Ÿå°±æ˜¯ Module CSSï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸º style æ ‡ç­¾æ·»åŠ äº† module æ ‡ç­¾ &lt;style module&gt;.com &#123; width: 100px; height: 100px; background-color: aqua; margin-bottom: 10px;&#125;&lt;&#x2F;style&gt; æ·»åŠ  module å±æ€§åï¼Œç»„ä»¶ä¸­ä¾¿ä¼šæœ‰ $style è¿™ä¸ªè®¡ç®—å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ $style.ç±»å çš„æ–¹å¼ä¸ºç»„ä»¶æ·»åŠ æ ·å¼ï¼Œä¾‹å¦‚ &lt;template&gt; &lt;div :class&#x3D;&quot;$style.com&quot;&gt;&lt;&#x2F;div&gt;&lt;&#x2F;template&gt; å®é™…çš„ç±»åä¸º Component1_com_2ata3ï¼Œå®ƒçš„ç»„æˆä¸º ç»„ä»¶å_ç±»å_å“ˆå¸Œä¸²ã€‚ Module CSS ç›¸å¯¹äº Scoped CSS è¾ƒä¸ºçµæ´» &lt;div :class&#x3D;&quot;$style.com&quot;&gt;Hello World&lt;&#x2F;div&gt;&lt;div :class&#x3D;&quot;[$style.com, $style.red]&quot;&gt;Hello World&lt;&#x2F;div&gt;&lt;div :class&#x3D;&quot;&#123;[$style.red]: isRed&#125;&quot;&gt;Hello World&lt;&#x2F;div&gt; å¯ä»¥é€šè¿‡æ•°æ®æ¥æ§åˆ¶æ˜¯å¦æ·»åŠ ç±»åï¼Œä»è€Œæ§åˆ¶æ ·å¼ï¼Œä»¥åŠæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ JS ä¸­è®¿é—® $style created() &#123; console.log(this.$style);&#125; Module CSS ä¸ Scoped CSS å¹¶æ— é«˜ä¸‹ä¹‹åˆ†ï¼Œå“ªä¸ªç”¨èµ·æ¥èˆ’æœä¾¿ä½¿ç”¨å“ªä¸ªã€‚","tags":[{"name":"Vue","slug":"Vue","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Vue/"},{"name":"æ¡†æ¶","slug":"æ¡†æ¶","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%A1%86%E6%9E%B6/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"VueRouter","date":"2021-04-01T16:00:00.000Z","path":"/VueRouter/","text":"Vue ç»å¸¸è¢«ç”¨æ¥æ„å»ºå•é¡µåº”ç”¨ï¼Œè¿™æ„å‘³ç€éœ€è¦åœ¨å‰ç«¯å®Œæˆåœ¨å¤šä¸ªè§†å›¾ä¹‹é—´çš„åˆ‡æ¢ï¼Œæƒ³è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œç›®å‰çš„è§£å†³æ–¹æ¡ˆé€šè¿‡ç›‘æ§è·¯ç”±ï¼Œæ ¹æ®è·¯ç”±æ¥åˆ‡æ¢ä¸åŒçš„ç»„ä»¶ï¼Œä»¥è¾¾åˆ°å¤šè§†å›¾çš„åˆ‡æ¢ã€‚Vue å®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›äº† Vue Router æ¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸ªç›®çš„ã€‚ å®‰è£…å¦‚æœä½ çš„é¡¹ç›®åªæ˜¯ç®€å•çš„ HTML é¡µé¢ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ CDN å¼•å…¥ Vue Router &lt;script src=\"https://unpkg.com/vue-router/dist/vue-router.js\"&gt;&lt;/script&gt; å¦‚æœä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ª npm é¡¹ç›®ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ npm ä¸‹è½½ Vue Router npm install --save vue-router å¦‚æœä½ æ˜¯é€šè¿‡ vue-cli åˆ›å»ºçš„é¡¹ç›®ï¼Œåˆ™ä½ å¯é€šè¿‡ vue add æ¥æ·»åŠ  Vue Router vue add router åŸºæœ¬ä½¿ç”¨é¦–å…ˆçœ‹å…¥å£ç»„ä»¶ App.vue &#x2F;&#x2F; App.vue&lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;router-link to&#x3D;&quot;&#x2F;&quot;&gt;Index&lt;&#x2F;router-link&gt; &lt;router-link to&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;router-link&gt; &lt;router-view&gt;&lt;&#x2F;router-view&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; å…¶ä¸­ç‰µæ¶‰åˆ°ä¸¤ä¸ªæ–°æ ‡ç­¾ï¼š &lt;router-link&gt;ï¼šé»˜è®¤ä¼šè¢«æ¸²æŸ“ä¸ºè¶…é“¾æ¥ï¼Œå½“ç‚¹å‡»æ—¶ä¼šè·³è½¬åˆ° to å±æ€§æŒ‡å®šçš„åœ°å€(è·¯ç”±) &lt;router-view&gt;ï¼šæ ¹æ®è·¯ç”±è¢«æ¸²æŸ“ä¸ºç‰¹å®šçš„ç»„ä»¶ æ¥ä¸‹æ¥æˆ‘ä»¬ä¾¿è¦å®šä¹‰è·¯ç”±ä¸ç»„ä»¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚æˆ‘ä»¬å°†å¯¹åº”å†™åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åæœŸç»´æŠ¤ï¼Œæ–°å»ºæ–‡ä»¶å¤¹ routerï¼Œæ¥ç€åœ¨å…¶ä¸­æ–°å»ºæ–‡ä»¶ index.jsï¼Œåœ¨å…¶ä¸­å®šä¹‰è·¯ç”±è§„åˆ™ // router/index.jsimport Vue from 'vue'import VueRouter from 'vue-router'import Index from '@/views/Index.vue'import About from '@/views/About.vue'Vue.use(VueRouter);const routes = [&#123; path: '/', component: Index&#125;, &#123; path: '/about', component: About&#125;]const router = new VueRouter(&#123; routes&#125;)export default router é™¤å¼€å¼•å…¥ç»„ä»¶çš„ä»£ç ï¼Œé¦–å…ˆæˆ‘ä»¬é€šè¿‡ Vue.use(VueRouter) ä½¿ç”¨äº† VueRouter æ’ä»¶ï¼Œæ¥ç€æˆ‘ä»¬å®šä¹‰çš„è·¯ç”±ä¸ç»„ä»¶çš„å¯¹åº”å…³ç³» è·¯ç”± ç»„ä»¶ / Index /about About å½“è·¯ç”±ä¸º / æ—¶ï¼Œ&lt;router-view&gt; ä¾¿ä¼šè¢«æ¸²æŸ“ä¸º &lt;Index&gt;ï¼Œå½“è·¯ç”±ä¸º /about æ—¶ï¼Œ&lt;router-view&gt; ä¾¿ä¼šè¢«æ¸²æŸ“ä¸º &lt;About&gt;ã€‚Index.vue ä¸ About.vue çš„å†…å®¹å¦‚ä¸‹ &#x2F;&#x2F; Index.vue&lt;template&gt; &lt;div&gt; &lt;h1&gt;Welcome to Index page!&lt;&#x2F;h1&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; &#x2F;&#x2F; About.vue&lt;template&gt; &lt;div&gt; &lt;h1&gt;This is About page!&lt;&#x2F;h1&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; å†…å®¹éƒ½ååˆ†çš„ç®€å•ã€‚æ¥ç€æˆ‘ä»¬æ ¹æ®è·¯ç”±å¯¹åº”å…³ç³»åˆ›å»ºäº† VueRouter å®ä¾‹ routerï¼Œå¹¶å°†å…¶å¯¼å‡ºã€‚åœ¨å…¥å£æ–‡ä»¶ main.js ä¸­æˆ‘ä»¬ä½¿ç”¨è¯¥ router // main.jsimport Vue from 'vue'import App from './App.vue'import router from './router'Vue.config.productionTip = falsenew Vue(&#123; router, render: h =&gt; h(App)&#125;).$mount('#app') å½“æˆ‘ä»¬ç‚¹å‡»é“¾æ¥æ—¶ï¼Œåœ°å€æ å‘ç”Ÿå˜åŒ–ï¼Œä¸”æ¸²æŸ“çš„ç»„ä»¶ä¹Ÿé¡ºåº”å˜åŒ–ã€‚ VueRouter æœ‰ä¸¤ç§å¯¼èˆªæ¨¡å¼ï¼š hash history æ³¨æ„åˆ°åœ°å€æ ä¸­å‡ºç°äº† #ï¼Œè¡¨ç¤ºæ­¤æ—¶ VueRouter æ˜¯ hash æ¨¡å¼ï¼Œåœ°å€æ ä¸­æœ‰ # æœªå…ä¸å¥½çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»º VueRouter å®ä¾‹æ—¶è®¾ç½® mode é€‰é¡¹ä¸º &#39;history&#39;ï¼Œè¿™æ—¶ VueRouter ä¾¿æ˜¯ history æ¨¡å¼äº† // router/index.jsconst router = new VueRouter(&#123; mode: 'history', routes&#125;) è¿™æ—¶åœ°å€æ ä¸Šä¾¿æ²¡æœ‰ # äº†ã€‚ æœ‰çš„æ—¶å€™è·¯å¾„çš„æ‹¼å†™æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè·¯ç”±å‘½åï¼Œç„¶ååœ¨ to å±æ€§ç›´æ¥æŒ‡å®šè·³è½¬çš„è·¯ç”±åç§°ã€‚é¦–å…ˆæˆ‘ä»¬åœ¨ routes æ•°ç»„ä¸­ä¸ºè·¯ç”±æŒ‡å®šåç§° // router/index.jsconst routes = [&#123; name: 'index', path: '/', component: Index&#125;, &#123; name: 'about', path: '/about', component: About&#125;] ä¸Šé¢æˆ‘ä»¬é€šè¿‡ name å±æ€§ä¸ºè·¯ç”±æŒ‡å®šäº†åç§°ï¼Œæ¥ç€æˆ‘ä»¬ä¿®æ”¹ App.vue ä¸­çš„å¯¼èˆªé“¾æ¥ &#x2F;&#x2F; App.vue&lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;router-link :to&#x3D;&quot;&#123;name: &#39;index&#39;&#125;&quot;&gt;Index&lt;&#x2F;router-link&gt; &lt;router-link :to&#x3D;&quot;&#123;name: &#39;about&#39;&#125;&quot;&gt;About&lt;&#x2F;router-link&gt; &lt;router-view&gt;&lt;&#x2F;router-view&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; åŠ¨æ€è·¯ç”±åŒ¹é…æœ‰çš„æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦ä¸ºç»„ä»¶ä¼ é€’é¢å¤–çš„å‚æ•°ï¼Œä»¥æ˜¾ç¤ºä¸åŒçš„ä¿¡æ¯ï¼Œä¾‹å¦‚ /user/1 æ˜¾ç¤º id = 1 çš„ç”¨æˆ·çš„ä¿¡æ¯ï¼Œ/user/2 æ˜¾ç¤º id = 2 ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå‚æ•°é€šè¿‡è·¯ç”±ä¼ é€’ï¼Œè¿™ç§è·¯ç”±æˆ‘ä»¬ç§°ä¸ºåŠ¨æ€è·¯ç”±ã€‚ä¸ºäº†èƒ½å¤Ÿæ¥æ”¶åˆ°å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦å¦‚ä¸‹å®šä¹‰è·¯ç”±ä¸ç»„ä»¶çš„å…³ç³» // router/index.jsconst routes = [&#123; path: '/user/:id', component: User&#125;] æ³¨æ„åˆ°åŠ¨æ€è·¯ç”±çš„å®šä¹‰æ–¹å¼ path: &#39;/user/:id&#39;ï¼Œæ¥ç€æˆ‘ä»¬ä¾¿å¯åœ¨ User ç»„ä»¶ä¸­é€šè¿‡è®¡ç®—å±æ€§ $route æ¥è®¿é—®åˆ°ä¼ å…¥çš„å‚æ•°ï¼Œ$route åŒ…å«å¦‚ä¸‹å±æ€§ fullpath path query params name æˆ‘ä»¬å¯ä»¥é€šè¿‡ $route.params.id æ¥è®¿é—®åˆ°ä¼ å…¥çš„å‚æ•°ï¼ŒUser.vue å¦‚ä¸‹ &#x2F;&#x2F; User.vue&lt;template&gt; &lt;div&gt; &lt;p&gt;User: &#123;&#123;$route.params.id&#125;&#125;&lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; App.vue çš„å†…å®¹å¦‚ä¸‹ &#x2F;&#x2F; App.vue&lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;router-link to&#x3D;&quot;&#x2F;user&#x2F;1&quot;&gt;user1&lt;&#x2F;router-link&gt; &lt;router-link to&#x3D;&quot;&#x2F;user&#x2F;2&quot;&gt;user2&lt;&#x2F;router-link&gt; &lt;router-view&gt;&lt;&#x2F;router-view&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŠ¨æ€è·¯ç”±ç»„ä»¶è¿›è¡Œåˆ‡æ¢æ—¶ä¼šè¿›è¡Œç»„ä»¶å¤ç”¨ï¼Œå½“è·¯ç”±ä» /user/1 å˜ä¸º /user/2 æ—¶å¹¶æ²¡æœ‰é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œè€Œæ˜¯å¤ç”¨äº†ä¹‹å‰çš„ç»„ä»¶ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ created æ–¹æ³•ä¸­æ‰“å°ä¿¡æ¯ï¼Œå¦‚æœåœ¨åˆ‡æ¢ç»„ä»¶æ—¶ï¼Œä¿¡æ¯å§‹ç»ˆåªæ‰“å°äº†ä¸€æ¬¡ï¼Œå°±è¯´æ˜ç»„ä»¶åªè¢«åˆ›å»ºäº†ä¸€æ¬¡ï¼Œå³ç»„ä»¶å¤ç”¨äº† &#x2F;&#x2F; User.vue&lt;template&gt; &lt;div&gt; &lt;p&gt;User: &#123;&#123;$route.params.id&#125;&#125;&lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; created() &#123; console.log(&#39;created&#39;) &#125;,&#125;&lt;&#x2F;script&gt; ç»„ä»¶å¤ç”¨èƒ½å¤Ÿå¸¦æ¥æ€§èƒ½ä¸Šçš„ä¼˜åŠ¿ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ ¹æ®è·¯ç”±å‚æ•°è¯·æ±‚æ•°æ®ï¼Œå› ä¸ºç»„ä»¶å¤ç”¨çš„å…³ç³»ï¼Œæ— æ³•é€šè¿‡ç”Ÿå‘½å‘¨æœŸé’©å­è¯·æ±‚æ•°æ®ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬å™¨æ¥ç›‘å¬ $watchï¼Œå½“è·¯ç”±å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬ä¾¿å‘èµ·è¯·æ±‚ &#x2F;&#x2F; User.vue&lt;template&gt; &lt;div&gt; &lt;p&gt;User: &#123;&#123;$route.params.id&#125;&#125;&lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; watch: &#123; $route: &#123; immediate: true, handler() &#123; console.log(&#39;route change!&#39;, this.$route.params.id); &#125; &#125; &#125;&#125;&lt;&#x2F;script&gt; åœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ $route ä¼šä½¿å¾—ç»„ä»¶ä¸è·¯ç”±å½¢æˆé«˜åº¦çš„è€¦åˆï¼Œæˆ‘ä»¬å¸Œæœ›è·¯ç”±å‚æ•°èƒ½å¤Ÿé€šè¿‡ props ä¼ é€’ç»™ç»„ä»¶ã€‚é¦–å…ˆéœ€è¦åœ¨è·¯ç”±å®šä¹‰ä¸­æ·»åŠ  props å±æ€§ï¼Œå¹¶å£°æ˜ä¸º true &#123;5&#125;// router/index.jsconst routes = [&#123; path: '/user/:id', component: User, props: true&#125;] æ¥ç€åœ¨ User ç»„ä»¶ä¸­å¯¹ props å±æ€§è¿›è¡Œå£°æ˜ &#x2F;&#x2F; User.vue&lt;template&gt; &lt;div&gt; &lt;p&gt;User: &#123;&#123;id&#125;&#125;&lt;&#x2F;p&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; props: [&#39;id&#39;]&#125;&lt;&#x2F;script&gt; åµŒå¥—è·¯ç”±å‡è®¾åœ¨ User ç»„ä»¶ä¸­è¿˜åµŒå¥—è¿™ä¸€å±‚è·¯ç”± &#x2F;&#x2F; User.vue&lt;template&gt; &lt;div&gt; &lt;p&gt;User: &#123;&#123;$route.params.id&#125;&#125;&lt;&#x2F;p&gt; &lt;router-view&gt;&lt;&#x2F;router-view&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt; ä¾‹å¦‚å½“è·¯ç”±ä¸º /user/:id/foo æ—¶ï¼ŒUser ç»„ä»¶ä¸­çš„ &lt;router-view&gt; æ¸²æŸ“ä¸º Foo ç»„ä»¶ï¼Œå½“è·¯ç”±ä¸º /user:id/bar æ—¶ï¼Œæ¸²æŸ“ä¸º Bar ç»„ä»¶ï¼Œå½“è·¯ç”±ä¸º /user/:id/ æ—¶ï¼Œæ¸²æŸ“ä¸º UserHome ç»„ä»¶ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ router/index.js &#123;5-14&#125;// router/index.jsconst routes = [&#123; path: '/user/:id', component: User, children: [&#123; path: '', component: UserHome &#125;, &#123; path: 'foo', component: Foo &#125;, &#123; path: 'bar', component: Bar &#125;]&#125;] æ³¨æ„åˆ°æˆ‘ä»¬æ·»åŠ äº† children å±æ€§ï¼Œè¿™æ˜¯åµŒå¥—è·¯ç”±çš„å…³é”®ã€‚ä¿®æ”¹ App.vue ä¸­çš„è·³è½¬é“¾æ¥ &#x2F;&#x2F; App.vue&lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;router-link to&#x3D;&quot;&#x2F;user&#x2F;1&#x2F;foo&quot;&gt;user&#x2F;1&#x2F;foo&lt;&#x2F;router-link&gt; &lt;router-link to&#x3D;&quot;&#x2F;user&#x2F;1&#x2F;bar&quot;&gt;user&#x2F;1&#x2F;bar&lt;&#x2F;router-link&gt; &lt;router-link to&#x3D;&quot;&#x2F;user&#x2F;1&#x2F;&quot;&gt;user&#x2F;1&#x2F;&lt;&#x2F;router-link&gt; &lt;router-view&gt;&lt;&#x2F;router-view&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;style&gt;a &#123; margin-right: 10px;;&#125;&lt;&#x2F;style&gt; ç¼–ç¨‹å¼çš„å¯¼èˆªé™¤äº†é€šè¿‡é“¾æ¥çš„æ–¹å¼å¯¹è·¯ç”±è¿›è¡Œæ›´æ”¹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ $router è®¡ç®—å±æ€§æ›´æ”¹è·¯ç”±ï¼Œå¦‚ $router.push() $router.replace() æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸ºå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ // å­—ç¬¦ä¸²router.push('home')// å¯¹è±¡router.push(&#123; path: 'home' &#125;)// å‘½åçš„è·¯ç”±router.push(&#123; name: 'user', params: &#123; userId: '123' &#125;&#125;)// å¸¦æŸ¥è¯¢å‚æ•°ï¼Œå˜æˆ /register?plan=privaterouter.push(&#123; path: 'register', query: &#123; plan: 'private' &#125;&#125;) æ³¨æ„ï¼šå¦‚æœæä¾›äº† pathï¼Œparams ä¼šè¢«å¿½ç•¥ï¼Œä¸Šè¿°ä¾‹å­ä¸­çš„ query å¹¶ä¸å±äºè¿™ç§æƒ…å†µã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä¸‹é¢ä¾‹å­çš„åšæ³•ï¼Œä½ éœ€è¦æä¾›è·¯ç”±çš„ name æˆ–æ‰‹å†™å®Œæ•´çš„å¸¦æœ‰å‚æ•°çš„ pathï¼š const userId = '123'router.push(&#123; name: 'user', params: &#123; userId &#125;&#125;) // -&gt; /user/123router.push(&#123; path: `/user/$&#123;userId&#125;` &#125;) // -&gt; /user/123// è¿™é‡Œçš„ params ä¸ç”Ÿæ•ˆrouter.push(&#123; path: '/user', params: &#123; userId &#125;&#125;) // -&gt; /user $router.replace æ¥æ”¶çš„å‚æ•°åŒ $router.push ç›¸åŒï¼Œå”¯ä¸€ä¸åŒåœ¨äº replace æ˜¯æ›¿æ¢å½“å‰çš„å†å²è®°å½•ï¼Œè€Œ push æ˜¯æ·»åŠ ä¸€æ¡å†å²è®°å½•ï¼Œå®ƒçš„å£°æ˜å¼å†™æ³•ä¸º &lt;router-link :to&#x3D;&quot;...&quot; replace&gt; æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ $router.go æ–¹æ³•åœ¨å†å²è®°å½•ä¹‹é—´è·³è½¬ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ•´æ•° $n$ï¼Œæ­£æ•°è¡¨ç¤ºå‘å‰è·³è½¬å¤šå°‘æ­¥ï¼Œè´Ÿæ•°è¡¨ç¤ºå‘åè·³è½¬å¤šå°‘æ­¥ // åœ¨æµè§ˆå™¨è®°å½•ä¸­å‰è¿›ä¸€æ­¥ï¼Œç­‰åŒäº history.forward()router.go(1)// åé€€ä¸€æ­¥è®°å½•ï¼Œç­‰åŒäº history.back()router.go(-1)// å‰è¿› 3 æ­¥è®°å½•router.go(3)// å¦‚æœ history è®°å½•ä¸å¤Ÿç”¨ï¼Œé‚£å°±é»˜é»˜åœ°å¤±è´¥å‘—router.go(-100)router.go(100) é‡å®šå‘ä¸åˆ«åé‡å®šå‘å°±æ˜¯å½“ä½ è®¿é—®è·¯ç”± /a æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°è·¯ç”± /bï¼Œå¦‚ä¸‹é…ç½® const routes = [&#123; path: '/a', redirect: '/b'&#125;] é‡å®šå‘ä¹Ÿå¯ä»¥æŒ‡å®šä¸ºä¸€ä¸ªå‘½åçš„è·¯ç”± const routes = [&#123; path: '/a', redirect: &#123; name: 'index' &#125;&#125;] å‡è®¾ /b æ˜¯ /a çš„åˆ«åï¼Œå½“æˆ‘ä»¬è®¿é—® /b æ—¶ï¼Œè·¯ç”±ä¸å˜ï¼Œä½†æ˜¯ä¼šä½¿ç”¨ /a å¯¹åº”çš„ç»„ä»¶ï¼Œé…ç½®å¦‚ä¸‹ const routes = [&#123; path: '/a', component: A, alias: '/b'&#125;] è·¯ç”±å®ˆå«å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªè·¯ç”±å‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ˜¯è¦å¯¹èº«ä»½è¿›è¡ŒéªŒè¯ï¼Œæ˜¯å¦æœ‰æƒé™è®¿é—®è¿™ä¸ªè·¯ç”±ï¼ŒVue Router æä¾›äº†è·¯ç”±å®ˆå«æ¥åšè¿™ä»¶äº‹æƒ…ï¼Œè·¯ç”±å®ˆå«ä¸»è¦ç”¨æ¥è·³è½¬æˆ–è€…å–æ¶ˆçš„æ–¹å¼æ¥å®ˆå«è·¯ç”±ã€‚è·¯ç”±å®ˆå«åˆ†ä¸ºä¸‰ç§ï¼š å…¨å±€ è·¯ç”± ç»„ä»¶ å…¨å±€å‰ç½®å®ˆå«å¯ä»¥é€šè¿‡ router.beforeEach æ³¨å†Œä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå« const router = new VueRouter(&#123; ... &#125;)router.beforeEach((to, from, next) =&gt; &#123; // ...&#125;) å½“æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªè·¯ç”±ä¹‹å‰ä¼šè§¦å‘æ­¤å®ˆå«æ–¹æ³•ï¼Œè¯¥å®ˆå«æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š toï¼šå³å°†è¦è¿›å…¥çš„ç›®æ ‡ è·¯ç”±å¯¹è±¡ fromï¼šå½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”± next:ï¼š next()ï¼šæ”¾è¡Œ next(false)ï¼šä¸­æ–­å½“å‰å¯¼èˆªï¼Œå¦‚æœ URL æ”¹å˜äº†ï¼Œåˆ™ URL ä¼šè¢«é‡ç½®åˆ° from è·¯ç”±å¯¹åº”çš„åœ°å€ next(&#39;/&#39;) æˆ–è€… next({ path: &#39;/&#39; })ï¼šè·³è½¬åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€ã€‚å½“å‰çš„å¯¼èˆªè¢«ä¸­æ–­ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªæ–°çš„å¯¼èˆªã€‚ä½ å¯ä»¥å‘ next ä¼ é€’ä»»æ„ä½ç½®å¯¹è±¡ï¼Œä¸”å…è®¸è®¾ç½®è¯¸å¦‚ replace: trueã€name: &#39;home&#39; ä¹‹ç±»çš„é€‰é¡¹ next(error)ï¼šå¦‚æœä¼ å…¥ next çš„å‚æ•°æ˜¯ä¸€ä¸ª Error å®ä¾‹ï¼Œåˆ™å¯¼èˆªä¼šè¢«ç»ˆæ­¢ä¸”è¯¥é”™è¯¯ä¼šè¢«ä¼ é€’ç»™ router.onError() æ³¨å†Œè¿‡çš„å›è°ƒ router.beforeEach((to, from, next) =&gt; &#123; if (to.name !== 'Login' &amp;&amp; !isAuthenticated) next(&#123; name: 'Login' &#125;) else next()&#125;) è·¯ç”±å®ˆå«å¯ä»¥åœ¨ routes ä¸­é…ç½®è·¯ç”±å®ˆå« beforeEnter const routes = [&#123; path: '/a', component: A, beforeEnter: (to, from, next) =&gt; &#123; // ... &#125;&#125;] æ–¹æ³•å‚æ•°åŒä¸Šã€‚ ç»„ä»¶å†…çš„å®ˆå«ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰è·¯ç”±å®ˆå«ï¼Œæœ‰ä¸‰ä¸ªï¼š beforeRouteEnter(to, from, next)ï¼šè¿›å…¥è¯¥ç»„ä»¶æ—¶è§¦å‘ï¼Œåœ¨å…¶ä¸­ä¸èƒ½è·å¾—ç»„ä»¶å®ä¾‹ this beforeRouteUpdate(to, from, next)ï¼šè·¯ç”±å‘ç”Ÿæ”¹å˜ï¼Œä¸”ç»„ä»¶è¢«å¤ç”¨æ—¶è§¦å‘ï¼Œå³åŠ¨æ€è·¯ç”± beforeRouteLeave(to, from, next)ï¼šç¦»å¼€å½“å‰ç»„ä»¶å¯¹åº”çš„è·¯ç”±æ—¶è§¦å‘ ç»„ä»¶ç¼“å­˜å½“æˆ‘ä»¬åœ¨ä¸åŒçš„è·¯ç”±ä¹‹é—´è¿›è¡Œåˆ‡æ¢æ—¶ï¼Œè·¯ç”±å¯¹åº”çš„ç»„ä»¶ä¼šè¢«é”€æ¯ä¸é‡å»º(åŠ¨æ€è·¯ç”±ç»„ä»¶å¯èƒ½ä¼šè¢«å¤ç”¨)ï¼Œé¢‘ç¹çš„åˆ›å»ºç»„ä»¶å¯èƒ½ä¼šå¯¹æ€§èƒ½å¸¦æ¥å½±å“ï¼Œæˆ‘ä»¬å¯ä»¥ç»„ä»¶åŠ ä¸Šç¼“å­˜ï¼Œå½“å†æ¬¡æ¥åˆ°æŸä¸ªè·¯ç”±æ—¶ï¼Œä¸æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä½¿ç”¨ç¼“å­˜çš„ç»„ä»¶ã€‚ ä¸º &lt;router-view&gt; çš„å¤–å±‚åŠ ä¸Š &lt;keep-alive&gt; å¯ä»¥å°†ç»„ä»¶è¿›è¡Œç¼“å­˜ï¼Œä¸ºäº†éªŒè¯ç»„ä»¶æ˜¯å¦æœ‰ç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨ created é’©å­å‡½æ•°ä¸­æ‰“å°æ¶ˆæ¯ï¼Œå¦‚æœåœ¨å¤šæ¬¡åˆ‡æ¢è·¯ç”±æ—¶åªæ‰“å°ä¸€æ¬¡æ¶ˆæ¯ï¼Œè¯´æ˜ç»„ä»¶è¢«ç¼“å­˜äº†ï¼Œå¹¶æ²¡æœ‰é‡æ–°åˆ›å»ºç»„ä»¶ &#x2F;&#x2F; Index.vue&lt;template&gt; &lt;div&gt; &lt;h1&gt;Welcome to Index page!&lt;&#x2F;h1&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; created() &#123; console.log(&#39;Index.vue created!&#39;) &#125;,&#125;&lt;&#x2F;script&gt; &#x2F;&#x2F; About.vue&lt;template&gt; &lt;div&gt; &lt;h1&gt;This is About page!&lt;&#x2F;h1&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;script&gt;export default &#123; created() &#123; console.log(&#39;About.vue created!&#39;) &#125;,&#125;&lt;&#x2F;script&gt; &#x2F;&#x2F; App.vue&lt;template&gt; &lt;div id&#x3D;&quot;app&quot;&gt; &lt;router-link to&#x3D;&quot;&#x2F;&quot;&gt;Index&lt;&#x2F;router-link&gt; &lt;router-link to&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;router-link&gt; &lt;keep-alive&gt; &lt;router-view&gt;&lt;&#x2F;router-view&gt; &lt;&#x2F;keep-alive&gt; &lt;&#x2F;div&gt;&lt;&#x2F;template&gt;&lt;style&gt;a &#123; margin-right: 10px;;&#125;&lt;&#x2F;style&gt; const routes = [&#123; name: 'index', path: '/', component: Index&#125;, &#123; name: 'about', path: '/about', component: About&#125;] å½“æˆ‘ä»¬å¤šæ¬¡æ”¹å˜è·¯ç”±æ—¶ï¼Œç»„ä»¶åªè¢«åˆ›å»ºäº†ä¸€æ¬¡ï¼Œå¯è§ç»„ä»¶è¢«ç¼“å­˜äº†ã€‚ å‚è€ƒé“¾æ¥ Vue Router å®˜æ–¹æ–‡æ¡£","tags":[]},{"title":"Hexoæ¸²æŸ“é—®é¢˜","date":"2021-03-29T16:00:00.000Z","path":"/Hexoæ¸²æŸ“é—®é¢˜/","text":"è¿™å‡ å¤©å†™äº†ä¸€ç¯‡æœ‰å…³äº Vue.js çš„åšå®¢ï¼Œåœ¨è®²è¿°æ’å€¼è¯­æ³•æ—¶ä¼šç”¨åˆ° }}ï¼Œä½†æ˜¯ Hexo åšå®¢ä½¿ç”¨çš„æ˜¯ Nunjucks æ¥è§£ææ–‡ç« ï¼Œå†…å®¹ä¸­å¦‚æœåŒ…å« {{ }} æˆ–è€… {% %} å°±ä¼šå‘ç”Ÿé”™è¯¯ å®˜æ–¹ç»™å‡ºäº†ä¸‰ç§è§£å†³åŠæ³•ï¼š ä½¿ç”¨ raw æ ‡ç­¾ &#123;% raw %&#125;å°†åŒ…å« &#123;&#123; &#125;&#125; æˆ–è€… &#123;&#123;% %&#125;&#125; çš„å†…å®¹æ”¾åœ¨å…¶ä¸­&#123;% endraw %&#125; ä½¿ç”¨ ` æˆ–è€… ``` `&#123;&#123; &#125;&#125;` `&#123;% %&#125;` åœ¨ front-matter ä¸­ç¦æ­¢ Nunjucks disableNunjucks: true æˆ‘é¦–å…ˆé€‰æ‹©çš„æ˜¯ç¬¬ä¸‰ä¸ªè§£å†³åŠæ³•ï¼Œè®¾ç½® front-matterï¼Œä½†æ˜¯æ²¡æœ‰ç”¨ï¼›è€Œç¬¬äºŒä¸ªåŠæ³•ç›´æ¥æ’é™¤ï¼Œå› ä¸ºæˆ‘çš„ {{}} å°±æ˜¯æ”¾åœ¨ single backtick ä¸­ï¼Œä½†æ˜¯æ˜æ˜¾æ²¡æœ‰æ•ˆæœï¼›é‚£æˆ‘åªæœ‰é€‰æ‹©ç¬¬ä¸€ç§åŠæ³•äº†ï¼Œä½†æ˜¯äº‹æƒ…æ²¡æœ‰è§£å†³ï¼Œå› ä¸º }} ä¼šè¢«è§£æä¸ºè¡Œå†…å…¬å¼ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘å¼€å¯äº† mathjaxï¼Œå¯¼è‡´é¡µé¢æ˜¾ç¤ºé”™è¯¯ã€‚ ä½†æ˜¯å±±ç©·æ°´å¤ç–‘æ— è·¯ï¼Œæˆ‘æƒ³äº†æƒ³ä¸ºä»€ä¹ˆæ²¡æœ‰åŠ  raw æ ‡ç­¾ä¹‹å‰ä¸ä¼šå°† }} è§£æä¸ºæ•°å­¦å…¬å¼ï¼Œå› ä¸º }} æ”¾åœ¨ single backtick ä¸­ï¼Œä¼šè¢«ä¼˜å…ˆè§£æä¸º code æ ‡ç­¾ï¼ŒåŠ äº† raw æ ‡ç­¾ä¹‹åå°±ä¸ä¼šè§£æäº†ï¼Œå› æ­¤æˆ‘å°† `&#123;&#123;&#125;&#125;` å…¨éƒ¨æ¢æˆäº† &lt;code&gt;&#123;&#123;&#125;&#125;&lt;/code&gt; ä¿®æ”¹ä¹‹å‰ï¼š ä¿®æ”¹ä¹‹åï¼š è‡³æ­¤æœç„¶èƒ½å¤Ÿæ­£å¸¸çš„æ¸²æŸ“äº†ã€‚","tags":[{"name":"è¸©å‘","slug":"è¸©å‘","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E8%B8%A9%E5%9D%91/"},{"name":"Hexo","slug":"Hexo","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Hexo/"}]},{"title":"Vue.js å…¥é—¨","date":"2021-03-28T16:00:00.000Z","path":"/Vue.jså…¥é—¨/","text":"æœ¬ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯å¿«é€Ÿçš„å…¥é—¨ Vue.jsï¼ŒåŠ›æ±‚èƒ½å¤Ÿé€šè¿‡æœ¬ç¯‡æ–‡ç« äº†è§£ Vue.js çš„åŸºæœ¬ç”¨æ³•ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè¦†ç›– Vue.js çš„æ–¹æ–¹é¢é¢ï¼Œåœ¨è¯»å®Œæœ¬ç¯‡æ–‡ç« ä¹‹åï¼Œä¾¿å¯é˜…è¯» Vue.js çš„å®˜æ–¹æ•™ç¨‹ï¼Œè¿›ä¸€æ­¥çš„äº†è§£ Vue çš„è¿›é˜¶å†…å®¹ã€‚ Vue å¸¦æ¥çš„å¼€å‘æ€ç»´çš„æ”¹å˜å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªè¦æ±‚ï¼Œè¦æˆ‘ä»¬æ ¹æ®ä¸€ä¸ªæ•°ç»„æ¸²æŸ“å‡ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹äºä¸‹é¢çš„æ•°ç»„ const courses = ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­']; è¦æ±‚æ¸²æŸ“å‡ºä¸‹é¢çš„ HTML ç»“æ„ &lt;ul&gt; &lt;li&gt;è¯­æ–‡&lt;/li&gt; &lt;li&gt;æ•°å­¦&lt;/li&gt; &lt;li&gt;è‹±è¯­&lt;/li&gt;&lt;/ul&gt; æ‰€ä»¥æˆ‘ä»¬ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç  const courses = ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­'];const ulEle = document.getElementsByTagName(\"ul\")[0];courses.forEach(item =&gt; &#123; const liEle = document.createElement('li'); liEle.innerText = item; ulEle.append(liEle);&#125;) å¦‚æœæ•°ç»„çš„å†…å®¹å‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‰‹åŠ¨æ›´æ–°ä¸Šè¿°çš„ HTML ç»“æ„ã€‚æ‰€ä»¥ä¼ ç»Ÿçš„å¼€å‘æ–¹å¼ä¸ºæ›´æ–°æ•°æ®ï¼Œæ ¹æ®æ•°æ®æ“ä½œ DOM æ ‘ã€‚ é‚£ä¹ˆä½¿ç”¨ Vue ä¼šæœ‰ä»€ä¹ˆä¸åŒï¼Œæ¥çœ‹ä¸€ä¸ªä½¿ç”¨ Vue çš„æ–¹å¼æ¥å®ç°ä¸Šè¿°çš„åŠŸèƒ½ &lt;div id=\"app\"&gt; &lt;ul&gt; &lt;li v-for=\"course in courses\" :key=\"course\"&gt;&#123;&#123;course&#125;&#125;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script src=\"vue.js\"&gt;&lt;/script&gt;&lt;script&gt; new Vue(&#123; el: '#app', data() &#123; return &#123; courses: ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­'] &#125; &#125;, &#125;)&lt;/script&gt; ä¸Šé¢çš„ç¨‹åºå¯èƒ½çœ‹ä¸æ‡‚ï¼Œæ¯•ç«Ÿè¿˜æ²¡æœ‰å¼€å§‹å­¦ï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒã€‚ä»ä»£ç é‡ä¸Šçœ‹ï¼ŒäºŒè€…ä¼¼ä¹ç›¸å·®ä¸å¤§ï¼Œå¯èƒ½è¿˜æœ‰ç‚¹å¤šï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ›´æ–°æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬ä¸å¿…æ“ä½œ DOM æ ‘æ¥æ›´æ–°é¡µé¢äº†ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVue è‡ªåŠ¨åœ°å¸®æˆ‘ä»¬æ›´æ–°é¡µé¢ï¼Œè¿™ç§æ¨¡å¼æˆ‘ä»¬ç§°ä¸º MVVMï¼Œå…¶ä¸­çš„ V è¡¨ç¤º Viewï¼Œè€Œ M è¡¨ç¤º Modelï¼Œæ•°æ®ä¸è§†å›¾è¿›è¡Œäº†ç»‘å®šï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å›¾ä¹Ÿä¼šç›¸åº”çš„æ›´æ–°ï¼Œå¦‚ä¸‹å›¾ æ‰€ä»¥ Vue ç»™æˆ‘ä»¬å¸¦æ¥å¼€å‘æ€ç»´ä¸Šçš„æ”¹å˜å°±æ˜¯ï¼Œæˆ‘ä»¬åªéœ€è¦æ“ä½œæ•°æ®å³å¯ï¼Œè€Œæ›´æ–°é¡µé¢çš„å·¥ä½œä¸éœ€è¦æˆ‘ä»¬æ¥åšäº†ã€‚ Hello Worldå®‰è£… Vueå®‰è£… Vue å½“ç„¶æ˜¯é€‰æ‹©å®˜ç½‘äº†ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©é€šè¿‡ CDN å¼•å…¥æ–‡ä»¶ï¼Œä¾‹å¦‚ &lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt; Hello Worldä¸‹é¢å°±æ˜¯ç»å…¸çš„ Hello World ç¨‹åºï¼Œæ–°å»ºä¸€ä¸ª HTML æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=\"app\"&gt; &#123;&#123;message&#125;&#125; &lt;/div&gt; &lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt; &lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World!' &#125; &#125; &#125;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; é¡µé¢ä¸Šæ˜¾ç¤ºçš„å†…å®¹å¦‚ä¸‹ï¼š å‘ç”Ÿäº†ä»€ä¹ˆæˆ‘ä»¬å…ˆç®€å•çš„æ‹ä¸€æ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸€åˆ‡å…ˆä»ä¸‹é¢çš„ä»£ç è¯´èµ· const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World!' &#125; &#125;&#125;) ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Vue çš„å®ä¾‹ new Vue()ï¼Œå¹¶ä¸”å‘å…¶ä¸­ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬è¿™ä¹ˆä¸¤ä¸ªå±æ€§ï¼š elï¼šç»‘å®šçš„ DOM å…ƒç´  dataï¼šè¿”å›ä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°ï¼Œè¿”å›å¯¹è±¡ä¸­çš„æ•°æ®ä¸è§†å›¾è¿›è¡Œäº†ç»‘å®šï¼Œå½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œç›¸åº”çš„è§†å›¾ä¹Ÿä¼šå‘ç”Ÿæ›´æ–° å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Vue å®ä¾‹æ—¶ï¼Œé¦–å…ˆå®ƒä¼šæ ¹æ® el å±æ€§æŒ‡å®šçš„é€‰æ‹©å™¨æ‰¾åˆ°ç›¸åº”çš„ DOM å…ƒç´ ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ª DOM ç»“æœä¸ºæ¨¡æ¿(template)ï¼Œä¾‹å¦‚ä¸Šä¾‹æ ¹æ® #app é€‰æ‹©å™¨æˆ‘ä»¬æ‰¾åˆ° &lt;div id=\"app\"&gt; &#123;&#123;message&#125;&#125;&lt;/div&gt; æ¥ç€ä¾¿ä¼šè§£æè¯¥æ¨¡æ¿ï¼Œä¾‹å¦‚ä¸Šé¢å°† {{message}} æ›¿æ¢ä¸ºäº† data ä¸­å®šä¹‰çš„æ•°æ® message çš„å¯¹åº”çš„å€¼ï¼Œå³ Hello World!ï¼Œè§£æå®Œæ¯•åä¾¿ä¼šæ¸²æŸ“é¡µé¢ï¼Œæˆ‘ä»¬ä¾¿åœ¨é¡µé¢ä¸Šçœ‹åˆ°äº† Hello World!ã€‚ å› ä¸º Vue å¯¹ data å±æ€§ä¸­å®šä¹‰çš„æ•°æ®è¿›è¡Œäº†æ‹¦æˆªï¼Œä¸€æ—¦æˆ‘ä»¬æ”¹å˜å¯¹è±¡å±æ€§çš„å€¼ï¼ŒVue ä¾¿ä¼šå¯¹ç”¨åˆ°è¯¥å±æ€§çš„æ¨¡æ¿è¿›è¡Œè§£æã€æ¸²æŸ“ã€‚ æ‹¦æˆªæ•°æ®æ˜¯é€šè¿‡ Object.definePropety() æ¥åšåˆ°çš„ï¼Œå¯ä»¥é€šè¿‡ MDN æ¥äº†è§£è¯¥æ–¹æ³•çš„ä½¿ç”¨ã€‚ Vueå®ä¾‹ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨å˜é‡ vm æ¥æ”¶äº† new Vue() è¿”å›çš„ Vue å®ä¾‹ï¼Œç°åœ¨æˆ‘ä»¬çœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆã€‚ $elæ¨¡æ¿ç»è¿‡ Vue è§£æã€æ¸²æŸ“ä»¥åï¼Œç„¶åæ ¹æ®è¯¥æ¨¡æ¿ç”Ÿæˆä¸€ä¸ª DOM å…ƒç´ æŒ‚è½½åœ¨é¡µé¢ä¸­ï¼Œè€Œè¿™ä¸ª DOM å…ƒç´ æˆ‘ä»¬å¯ä»¥é€šè¿‡ vm.$el è¿›è¡Œè®¿é—®å¾—åˆ° $dataé€šè¿‡ vm.$data å¯ä»¥å¾—åˆ° data å±æ€§è¿”å›çš„å¯¹è±¡ æˆ‘ä»¬å¯ä»¥é€šè¿‡ vm.$data æ¥ä¿®æ”¹æ•°æ® ä¸Šé¢æˆ‘ä»¬ä¿®æ”¹æ•°æ® message ä¸º Hello Vueï¼Œé¡µé¢ä¾¿å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿›ä¸€æ­¥è¯å®äº†æ•°æ®ä¸è§†å›¾çš„ç»‘å®šã€‚ ä¸ºäº†æ–¹ä¾¿é€šè¿‡ vm æ“ä½œæ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½è¢«æŒ‚è½½åˆ°äº† vm ä¸Šï¼Œå³æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ vm è®¿é—®ä»¥åŠä¿®æ”¹æ•°æ®ï¼Œè€Œä¸å¿…é€šè¿‡ vm.$data ä¸Šé¢æˆ‘ä»¬é€šè¿‡ vm.message ç›´æ¥ä¿®æ”¹äº†æ•°æ®ï¼Œé¡µé¢ä¹Ÿç«‹å³å‘ç”Ÿäº†å˜åŒ–ã€‚ æ— è®ºæˆ‘ä»¬æ˜¯é€šè¿‡ vm.message è¿˜æ˜¯ vm.$data.message ä¿®æ”¹æ•°æ®ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯äº’ç›¸å½±å“çš„ã€‚å³å½“æˆ‘ä»¬é€šè¿‡ vm.xxx ä¿®æ”¹æ•°æ®ï¼Œé‚£ä¹ˆ vm.$data.xxx çš„å€¼ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œåä¹‹äº¦ç„¶ã€‚ æ¨¡æ¿è¯­æ³•æœ¬å°èŠ‚ä¸»è¦è®²å¦‚ä½•åœ¨æ¨¡æ¿ä¸­å¼•ç”¨åœ¨ data å±æ€§ä¸­å®šä¹‰çš„æ•°æ®ã€‚ æ’å€¼ åœ¨æ¨¡æ¿ä¸­é€šè¿‡ {{}} æ’å€¼è¯­æ³•ä¾¿å¯å¼•ç”¨åœ¨ data ä¸­å®šä¹‰çš„æ•°æ®ï¼Œæ­£å¦‚ä¸Šä¾‹ä¸­çš„ {{message}}ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œ{{}} å†…éƒ¨å¯ä»¥æ˜¯ä»»ä½•çš„ JavaScript è¡¨è¾¾å¼ï¼Œå¦‚ &#123;&#123;1 + 2&#125;&#125;&#123;&#123;message === 'xxx' ? 'foo' : 'bar'&#125;&#125;&#123;&#123;message.split('').reverse().join('')&#125;&#125; {{}} ä¸­çš„å†…å®¹ä¼šè¢«è§£æï¼Œç„¶åè¢«æ›¿æ¢ä¸ºç›¸åº”çš„å†…å®¹ã€‚ æŒ‡ä»¤v-bindå¦‚æœæˆ‘ä»¬æƒ³è®©æ¨¡æ¿ä¸­çš„å±æ€§ä¸æ•°æ®è¿›è¡ŒåŠ¨æ€ç»‘å®šï¼Œæˆ‘ä»¬ä¾¿éœ€è¦å€ŸåŠ©äº v-bind å±æ€§ï¼Œæœ‰ä¸‹é¢çš„æ¨¡æ¿ä»¥åŠæ•°æ® &lt;div id=\"app\"&gt; &lt;p title=\"message\"&gt;Hello World&lt;/p&gt;&lt;/div&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World!' &#125; &#125;&#125;) å½“æˆ‘ä»¬å°†é¼ æ ‡æ”¾ç½®åœ¨ p æ ‡ç­¾ä¸Šæ—¶ï¼Œæ˜¾ç¤ºçš„ title æ˜¯ messageï¼Œè€Œä¸æ˜¯æ•°æ® Hello World!ï¼Œè¯´æ˜ title å±æ€§å¹¶æ²¡æœ‰ä¸ message è¿›è¡Œç»‘å®šï¼Œå› ä¸ºå›¾æ¯”è¾ƒéš¾æˆªï¼Œæ‰€ä»¥è‡ªå·±è¯•éªŒä¸€ä¸‹ã€‚ä¸è¿‡ä»æ¸²æŸ“åçš„ DOM å…ƒç´ å¯ä»¥è¯æ˜è¿™ä¸€ç‚¹ æˆ‘ä»¬å¸Œæœ› p æ ‡ç­¾çš„ title å±æ€§ä¸ data ä¸­å®šä¹‰çš„ massage è¿›è¡Œç»‘å®šï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å±æ€§ title ç­¾ååŠ ä¸Š v-bind: å³å¯ &lt;div id=\"app\"&gt; &lt;p v-bind:title=\"message\"&gt;Hello World&lt;/p&gt;&lt;/div&gt; è¿™æ—¶å°†é¼ æ ‡æ”¾åœ¨ p æ ‡ç­¾ï¼Œè¿™æ—¶æ˜¾ç¤ºçš„ä¾¿æ˜¯ Hello World!ï¼Œä»æ¸²æŸ“åçš„ DOM å…ƒç´ å¯ä»¥è¯æ˜è¿™ä¸€ç‚¹ å¹¶ä¸”è¿™æ—¶æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œç›¸åº”çš„æ•°æ®ä¹Ÿä¼šå‘ç”Ÿå˜åŒ– å› ä¸º v-bind: æ¯”è¾ƒå¸¸ç”¨ï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ªç¼©å†™ :ï¼Œä¸Šè¿°æ¨¡æ¿å¯ä»¥æ”¹ä¸º &lt;div id=\"app\"&gt; &lt;p :title=\"message\"&gt;Hello World&lt;/p&gt;&lt;/div&gt; class å±æ€§ä¸ style å±æ€§ä¹Ÿå¯ä»¥ä½¿ç”¨ v-bind ç»‘å®šå±æ€§ï¼Œä¸è¿‡ç±»ä¸æ ·å¼å®åœ¨å¤ªè¿‡ç‰¹æ®Šï¼Œæ‰€ä»¥ Vue å¯¹å…¶æœ‰åšä¸€äº›ç‰¹æ®Šçš„æ‰©å±•ï¼Œå¯ä»¥å‚è§å®˜ç½‘ã€‚ v-onæŒ‡ä»¤ v-on å¯ä»¥ç»‘å®šä¸€ä¸ªäº‹ä»¶ &lt;div id=\"app\"&gt; &lt;p v-on:click=\"clear\"&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World!' &#125; &#125; &#125;)&lt;/script&gt; åœ¨ä¸Šé¢æˆ‘ä»¬ä¸º p æ ‡ç­¾æ·»åŠ äº†ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ v-on:click=&quot;clear&quot;ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» p æ ‡ç­¾æ—¶ä¼šè§¦å‘ä¸€ä¸ªå« clear çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•éœ€è¦åœ¨ methods é€‰é¡¹ä¸­è¿›è¡Œå®šä¹‰ï¼Œå¦‚ä¸‹ const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World!' &#125; &#125;, methods: &#123; clear() &#123; this.message = \"\" &#125; &#125;&#125;) clear çš„æ–¹æ³•ä¼šå°† message æ•°æ®è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸² å½“æˆ‘ä»¬ç‚¹å‡» p æ ‡ç­¾æ—¶ï¼Œmessage æ•°æ®å˜ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œç›¸åº”çš„é¡µé¢ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚ ç»‘å®šäº‹ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„æ“ä½œï¼Œæ‰€ä»¥ä¹Ÿæœ‰ç¼©å†™ï¼Œä¸Šé¢çš„ v-on: å¯ä»¥æ›¿æ¢ä¸º @ &lt;div id=\"app\"&gt; &lt;p @click=\"clear\"&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;&lt;/div&gt; é™¤äº†ä½¿ç”¨ v-on æŒ‡ä»¤ç»‘å®š methods ä¸­çš„äº‹ä»¶ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å†…è”æ“ä½œæ•°æ® &lt;div id=\"app\"&gt; &lt;p&gt; &lt;!-- ç›´æ¥å†…è”ä¿®æ”¹æ•°æ® --&gt; &lt;button @click=\"message = 'Hello'\"&gt;Hello&lt;/button&gt; &lt;button @click=\"message = 'Hi'\"&gt;Hi&lt;/button&gt; &lt;/p&gt; &lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: \"#app\", data() &#123; return &#123; message: \"Hello Vue!\" &#125; &#125;, &#125;)&lt;/script&gt; åœ¨å†…è”çš„å†™æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ $event è®¿é—®åˆ° event äº‹ä»¶å¯¹è±¡ã€‚ åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­è°ƒç”¨ event.preventDefault() æˆ– event.stopPropagation() æ˜¯éå¸¸å¸¸è§çš„æ“ä½œï¼ŒVue ä¸º v-on æä¾›äº†äº‹ä»¶ä¿®é¥°ç¬¦ .stopï¼šé˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­ .preventï¼šé˜»æ­¢é»˜è®¤è¡Œä¸º .captureï¼šä½¿ç”¨æ•è·æ¨¡å¼ .onceï¼šäº‹ä»¶åªæ‰§è¡Œä¸€æ¬¡ åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦æ£€æµ‹æŒ‰ä¸‹äº†å“ªä¸ªé”®ï¼ŒVue å¯ä»¥åœ¨ç›‘å¬äº‹ä»¶æ—¶æ·»åŠ æŒ‰é”®ä¿®é¥°ç¬¦ &lt;input @keyup.enter=\"submit\"&gt; å¤„ç†å‡½æ•°åªä¼šåœ¨ event.key ç­‰äº enter è¢«è°ƒç”¨ï¼ŒVue æä¾›å¦‚ä¸‹æŒ‰é”®ä¿®é¥°ç¬¦ .enter .tab .delete .esc .space .up .down .left .right åœ¨ç›‘å¬é¼ æ ‡ç‚¹å‡»äº‹ä»¶æ—¶ï¼Œæœ‰æ—¶ä¹Ÿä¼šåˆ¤æ–­æŒ‰ä¸‹äº†é¼ æ ‡çš„å“ªä¸ªæŒ‰é’®ï¼ŒVue ä¹Ÿæä¾›äº†ç›¸åº”çš„é¼ æ ‡ä¿®é¥°ç¬¦ .left .right .middle åœ¨æ—¥å¸¸çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨å¿«æ·é”®è¿›è¡Œå¿«æ·æ“ä½œï¼Œè®¾ç½®å¿«æ·é”®ä¸€èˆ¬éœ€è¦ç³»ç»ŸæŒ‰é”®ç¬¦é…åˆï¼Œå¦‚ ctrlï¼Œå› æ­¤ Vue ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ç³»ç»ŸæŒ‰é”®ç¬¦ï¼ŒåŒ…æ‹¬ .ctrl .alt .shift &lt;!-- Alt + C --&gt;&lt;input @keyup.alt.67=\"clear\"&gt;&lt;!-- Ctrl + Click --&gt;&lt;div @click.ctrl=\"doSomething\"&gt;Do something&lt;/div&gt; .exact ä¿®é¥°ç¬¦å…è®¸ä½ æ§åˆ¶ç”±ç²¾ç¡®çš„ç³»ç»Ÿä¿®é¥°ç¬¦ç»„åˆè§¦å‘çš„äº‹ä»¶ &lt;!-- å³ä½¿ Alt æˆ– Shift è¢«ä¸€åŒæŒ‰ä¸‹æ—¶ä¹Ÿä¼šè§¦å‘ --&gt;&lt;button v-on:click.ctrl=\"onClick\"&gt;A&lt;/button&gt;&lt;!-- æœ‰ä¸”åªæœ‰ Ctrl è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ --&gt;&lt;button v-on:click.ctrl.exact=\"onCtrlClick\"&gt;A&lt;/button&gt;&lt;!-- æ²¡æœ‰ä»»ä½•ç³»ç»Ÿä¿®é¥°ç¬¦è¢«æŒ‰ä¸‹çš„æ—¶å€™æ‰è§¦å‘ --&gt;&lt;button v-on:click.exact=\"onClick\"&gt;A&lt;/button&gt; v-ifã€v-showv-if å’Œ v-show æŒ‡ä»¤å¯ä»¥æ§åˆ¶å…ƒç´ æ˜¯å¦æ¸²æŸ“ &lt;div id=\"app\"&gt; &lt;p v-if=\"show\"&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt; &lt;button @click=\"toggle\"&gt;toggle&lt;/button&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World!', show: true &#125; &#125;, methods: &#123; toggle() &#123; this.show = !this.show; &#125; &#125;, &#125;)&lt;/script&gt; ä¸Šé¢æˆ‘ä»¬ä¸º p æ ‡ç­¾ä½¿ç”¨äº† v-if æŒ‡ä»¤ï¼ŒæŒ‡å®šäº†å®ƒçš„å€¼ä¸º showï¼Œå½“æ•°æ® show ä¸º true æ‰ä¼šæ˜¾ç¤ºæ ‡ç­¾ pï¼Œä¸º false æ—¶åˆ™ä¸ä¼šæ˜¾ç¤ºã€‚åœ¨é¡µé¢ä¸­è¿˜æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä¼šè§¦å‘ toggle æ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•æ˜¯å°† show è¿›è¡Œå–åï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå¦‚æœ p æ ‡ç­¾æ˜¾ç¤ºï¼Œé‚£ä¹ˆç‚¹å‡»æŒ‰é’®æ—¶å®ƒä¼šä»é¡µé¢æ¶ˆå¤±ï¼Œåä¹‹äº¦ç„¶ ä½¿ç”¨ v-show ä¹Ÿä¼šè¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œæˆ‘ä»¬å°†æ¨¡æ¿ä¸­çš„ v-if ä¿®æ”¹ä¸º v-show &lt;div id=\"app\"&gt; &lt;p v-show=\"show\"&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt; &lt;button @click=\"toggle\"&gt;toggle&lt;/button&gt;&lt;/div&gt; é‚£ä¹ˆäºŒè€…æœ‰ä½•ä¸åŒ? v-show æ˜¯æ§åˆ¶å…ƒç´ çš„ display å±æ€§æ¥æ§åˆ¶å…ƒç´ æ˜¯å¦æ˜¾ç¤ºä¸å¦çš„ï¼Œè€Œ v-if åˆ™æ˜¯ä» DOM æ ‘ä¸Šç§»é™¤å…ƒç´ æˆ–è€…æ·»åŠ å…ƒç´ ï¼Œå¹¶ä¸” v-if æ˜¯æƒ°æ€§çš„ï¼Œæ‰€è°“æƒ°æ€§æŒ‡çš„æ˜¯å¦‚æœä¸€å¼€å§‹æ¸²æŸ“æ¡ä»¶ä¸º falseï¼Œé‚£ä¹ˆä»€ä¹ˆä¹Ÿä¸åšï¼Œåªæœ‰å½“æ¡ä»¶ç¬¬ä¸€æ¬¡ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“ã€‚ æ‰€ä»¥å½“å…ƒç´ é¢‘ç¹åˆ‡æ¢æ—¶ï¼Œv-if æ¯æ¬¡éƒ½éœ€è¦åˆ›å»ºå…ƒç´ ï¼Œç›¸å¯¹äº v-show æ¥è¯´æœ‰è¾ƒå¤§çš„å¼€é”€ï¼Œæ‰€ä»¥å¯¹äºè¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬é€‰æ‹© v-showï¼Œå¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œå› æ­¤ v-if ç›¸å½“äº v-show æœ‰æ›´ä½çš„åˆå§‹æ¸²æŸ“å¼€é”€ï¼Œæ‰€ä»¥è¿™æ—¶æˆ‘ä»¬é€‰æ‹© v-ifã€‚ å¦å¤– v-if å¯ä»¥ä¸ v-else-if ä»¥åŠ v-else é…åˆä½¿ç”¨ï¼Œå‚è€ƒä¸‹é¢çš„ä»£ç  &lt;div id=\"app\"&gt; &lt;p v-if=\"count % 3 === 0\"&gt;&#123;&#123;count&#125;&#125;: 3n&lt;/p&gt; &lt;p v-else-if=\"count % 3 === 1\"&gt;&#123;&#123;count&#125;&#125;: 3n + 1&lt;/p&gt; &lt;p v-else&gt;&#123;&#123;count&#125;&#125;: 3n + 2&lt;/p&gt; &lt;button @click=\"inc\"&gt;INC&lt;/button&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; count: 0 &#125; &#125;, methods: &#123; inc() &#123; this.count++; &#125; &#125;, &#125;)&lt;/script&gt; åœ¨ data æ•°æ®ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª count å˜é‡ï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³• incï¼Œè¯¥æ–¹æ³•å¯¹æ•°æ® count è¿›è¡Œé€’å¢ã€‚åœ¨æ¨¡æ¿ä¸­ &lt;p v-if=\"count % 3 === 0\"&gt;&#123;&#123;count&#125;&#125;: 3n&lt;/p&gt;&lt;p v-else-if=\"count % 3 === 1\"&gt;&#123;&#123;count&#125;&#125;: 3n + 1&lt;/p&gt;&lt;p v-else&gt;&#123;&#123;count&#125;&#125;: 3n + 2&lt;/p&gt; æˆ‘ä»¬å¯¹ä¸‰ä¸ªæ ‡ç­¾ä½¿ç”¨äº† v-if v-else-if v-else ä¸‰ä¸ªæŒ‡ä»¤ï¼Œæ ¹æ® count å¯¹ 3 ä½™æ•°çš„å€¼æ¥å†³å®šæ˜¾ç¤ºå“ªä¸€ä¸ª v-forå‡è®¾æœ‰ä¸€ä¸ªæ•°ç»„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒæ¸²æŸ“ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œå°è¯•å¦‚ä¸‹å†™æ³• &lt;div id=\"app\"&gt; &lt;ul&gt; &lt;li&gt;&#123;&#123;courses[0]&#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123;courses[1]&#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123;courses[2]&#125;&#125;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; courses: ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­'] &#125; &#125; &#125;)&lt;/script&gt; è™½ç„¶ä¸Šé¢çš„ä»£ç å¯ä»¥è¾¾åˆ°æˆ‘ä»¬çš„åŠŸèƒ½ï¼Œä½†æ˜¯å®åœ¨ä¸å¤Ÿçµæ´»ï¼š æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé¡µé¢ä¸èƒ½å‘ç”Ÿæ”¹å˜ï¼Œä¾‹å¦‚åƒ courses æ•°ç»„ä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œé¡µé¢çš„å†…å®¹ä¸ä¼šå‘ç”Ÿæ”¹å˜ ä»£ç é‡å¤ï¼Œä¸Šé¢æˆ‘ä»¬æ˜¯ä¸€é¡¹ä¸€é¡¹çš„å†™å‡ºè¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦‚æœæ•°ç»„å¾ˆå¤§ï¼Œæœ‰ä¸€ä¸‡ä¸ªå…ƒç´ ï¼Œéš¾é“æˆ‘ä»¬è¦å†™ä¸€ä¸‡è¡Œå—ï¼Œä¸ä»…éš¾ä»¥ç»´æŠ¤ï¼Œè€Œä¸”å¾ˆä¸‘ ä½¿ç”¨ v-for å¯ä»¥è½»æ˜“çš„è§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¿®æ”¹æ¨¡æ¿ä»£ç å¦‚ä¸‹ &lt;div id=\"app\"&gt; &lt;ul&gt; &lt;li v-for=\"course in courses\" :key=\"course\"&gt;&#123;&#123;course&#125;&#125;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; æˆ‘ä»¬åœ¨ li æ ‡ç­¾ä¸Šé¢æ·»åŠ äº† v-for æŒ‡ä»¤ï¼ŒVue ä¼šå¸®æˆ‘ä»¬ä»æ•°ç»„ä¸­å–å‡ºå…ƒç´ ï¼Œç„¶åå¯¹äºæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ¸²æŸ“å‡ºä¸€ä¸ª li æ ‡ç­¾ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“æ•°ç»„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé¡µé¢ä¹Ÿä¼šç›¸åº”çš„æ”¹å˜ï¼Œå¦å¤–ï¼Œæ— è®ºæ•°ç»„ä¸­æœ‰å¤šå°‘é¡¹ï¼Œä»£ç éƒ½ä¸éœ€è¦æ›´æ”¹ã€‚ ä»”ç»†è§‚å¯Ÿï¼Œæˆ‘ä»¬è¿˜ä¸º li æ ‡ç­¾ç»‘å®šäº†ä¸€ä¸ª key å±æ€§ï¼Œå®ƒæ˜¯ä½œä¸º li å±æ€§çš„å”¯ä¸€æ ‡è¯†ï¼Œé‚£ä¹ˆå®ƒæœ‰ä»€ä¹ˆç”¨å‘¢? å‡è®¾æˆ‘ä»¬å‘æ›´æ”¹äº†æ•°ç»„(å¢åŠ ã€åˆ é™¤ã€æ”¹å˜å…ƒç´ çš„å€¼)ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°æ¸²æŸ“æ‰€æ‰€æœ‰çš„ li æ ‡ç­¾å—? å½“ç„¶ä¸éœ€è¦ï¼Œæˆ‘ä»¬åªè¦æ¸²æŸ“é‚£äº›æ›´æ”¹äº† li æ ‡ç­¾å°±å¯ä»¥äº†ï¼Œè€Œè¯†åˆ«å“ªäº›æ ‡ç­¾æ›´æ”¹äº†ï¼Œæ­£æ˜¯éœ€è¦é€šè¿‡ key å±æ€§åŠåˆ°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨ v-for æŒ‡ä»¤æ—¶ï¼Œæœ€å¥½åŒæ—¶è®¾ç½® key å±æ€§ã€‚ å®˜ç½‘æ¨èä¸è¦åŒæ—¶ä½¿ç”¨ v-for ä¸ v-if æŒ‡ä»¤ï¼Œå¦‚æœåŒæ—¶ä½¿ç”¨äº† v-for ä¸ v-ifï¼Œé‚£ä¹ˆ v-for çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚ v-modelv-model æŒ‡ä»¤ä¸€èˆ¬ç”¨äºè¡¨å•ï¼Œå®ƒå¯ä»¥å°† data ä¸­å®šä¹‰çš„æ•°æ®ä¸è¡¨å•çš„ value å€¼è¿›è¡ŒåŒå‘ç»‘å®šï¼Œæ‰€è°“çš„åŒå‘ç»‘å®šæŒ‡çš„æ˜¯ï¼š æ•°æ®æ”¹å˜ï¼Œè¡¨å•çš„å€¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ– è¡¨å•æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥ï¼Œè¡¨å•çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œä½¿å¾—æ•°æ®ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ &lt;div id=\"app\"&gt; &lt;p&gt;&lt;input type=\"text\" v-model=\"message\"&gt;&lt;/p&gt; &lt;p&gt;&lt;button @click=\"reverse\"&gt;reverse&lt;/button&gt;&lt;/p&gt; &#123;&#123;message&#125;&#125;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: '' &#125; &#125;, methods: &#123; reverse() &#123; this.message = this.message.split('').reverse().join('') &#125; &#125;, &#125;)&lt;/script&gt; ä¸Šé¢æˆ‘ä»¬åœ¨ input ä¸­ä½¿ç”¨äº† v-model æŒ‡å®šï¼Œå®ƒä¸æ•°æ® message è¿›è¡Œäº†ç»‘å®šï¼Œè¿™å°±æ„å‘³ç€å½“æˆ‘ä»¬è¾“å…¥å­—ç¬¦æ—¶ï¼Œæ•°æ® message ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå½“æˆ‘ä»¬æ”¹å˜æ•°æ® message æ—¶ï¼Œè¾“å…¥æ¡†ä¸­çš„å†…å®¹ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ v-model å…¶å®å°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³– &lt;input type=\"text\" v-model=\"message\"&gt; ç›¸å½“äº &lt;input type=\"text\" :value=\"message\" @input=\"message = $event.target.value\"&gt; è®¡ç®—å±æ€§ä¸ç›‘å¬å™¨è®¡ç®—å±æ€§æˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ¿çš„æ’å€¼ä¸­ä½¿ç”¨ä»»ä½•çš„ JavaScript è¡¨è¾¾å¼ï¼Œè¿™å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ›´åŠ çš„çµæ´» &lt;div id=\"app\"&gt; &lt;p&gt;&#123;&#123;message.split('').reverse().join('')&#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World' &#125; &#125;, &#125;)&lt;/script&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨æ¨¡æ¿çš„æ’å€¼ä¸­ä½¿ç”¨äº†ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„è¡¨è¾¾å¼ï¼Œå¯èƒ½éœ€è¦ä¸€å®šçš„æ—¶é—´æ‰èƒ½æ˜ç™½æˆ‘ä»¬åšçš„äº‹æƒ…ï¼šç¿»è½¬å­—ç¬¦ä¸²ã€‚åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ¯”è¾ƒå¤æ‚çš„æ’å€¼è¡¨è¾¾å¼ï¼Œä¼šä½¿å¾—æ¨¡æ¿è¿‡é‡ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§æ¥å®Œæˆä¸Šé¢çš„ç›®çš„ &lt;div id=\"app\"&gt; &lt;p&gt;message: &#123;&#123;message&#125;&#125;&lt;/p&gt; &lt;p&gt;reversedMessage: &#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World' &#125; &#125;, computed: &#123; reversedMessage() &#123; return this.message.split('').reverse().join(''); &#125; &#125; &#125;)&lt;/script&gt; åœ¨åˆ›å»º Vue å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ª computed å±æ€§ï¼Œè¯¥å±æ€§åŒ…å«å¤šä¸ªæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æˆ‘ä»¬ç§°ä¸ºè®¡ç®—å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥å¼•ç”¨è¿™äº›å±æ€§ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨ p æ ‡ç­¾ä¸­ç›´æ¥å¼•ç”¨äº†è¯¥è®¡ç®—å±æ€§ &lt;p&gt;reversedMessage: &#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt; å½“ Vue è§£ææ¨¡æ¿æ—¶ï¼Œä¼šä½¿ç”¨ reversedMessage æ–¹æ³•çš„è¿”å›å€¼æ¥æ›¿ä»£æ¨¡æ¿ä¸­å¼•ç”¨çš„è®¡ç®—å±æ€§ã€‚åœ¨è®¡ç®—å±æ€§ä¸­æˆ‘ä»¬ä¾èµ–äº†åœ¨ data ä¸­å®šä¹‰çš„æ•°æ®ï¼Œå½“ data ä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè®¡ç®—å±æ€§ä¹Ÿä¼šç›¸åº”çš„å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥è®¡ç®—å±æ€§ä¹Ÿæ˜¯ä¸è§†å›¾è¿›è¡Œç»‘å®šçš„ã€‚ å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè®¡ç®—å±æ€§æ˜¯æœ‰ç¼“å­˜çš„ï¼Œå¦‚æœåœ¨å¤šå¤„è®¿é—®è®¡ç®—å±æ€§ï¼Œåªä¼šè°ƒç”¨ä¸€æ¬¡ computed ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œç„¶åå°†å…¶ç»“æœç¼“å­˜èµ·æ¥ ï¼Œå¦‚æœåœ¨æ¨¡æ¿ä¸­æœ‰å¤šå¤„ä½¿ç”¨è®¡ç®—å±æ€§ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡éœ€è¦è®¡ç®—ï¼Œåé¢ç›´æ¥ä½¿ç”¨ç¼“å­˜å³å¯ï¼Œæ‰€ä»¥å¯¹äºä¸€äº›è®¡ç®—å¤æ‚ï¼Œè€—æ—¶çš„ä»»åŠ¡æˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§ &lt;div id=\"app\"&gt; &lt;p&gt;reversedMessage: &#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt; &lt;p&gt;reversedMessage: &#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt; &lt;p&gt;reversedMessage: &#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123;count&#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; message: 'Hello World', count: 0 &#125; &#125;, computed: &#123; reversedMessage() &#123; this.count++; return this.message.split('').reverse().join(''); &#125; &#125; &#125;)&lt;/script&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­å¼•ç”¨äº†ä¸‰æ¬¡è®¡ç®—å±æ€§ &lt;p&gt;reversedMessage: &#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt;&lt;p&gt;reversedMessage: &#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt;&lt;p&gt;reversedMessage: &#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt; å¹¶ä¸”æˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ªæ•°æ®é¡¹ countï¼Œå½“æˆ‘ä»¬æ¯æ¬¡è°ƒç”¨ computed å±æ€§ä¸­çš„ reversedMessage ä¾¿ä¼šå¯¹ count è¿›è¡Œé€’å¢ï¼Œè™½ç„¶æˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­å¼•ç”¨äº†ä¸‰æ¬¡è®¡ç®—å±æ€§ï¼Œä½†æ˜¯å› ä¸ºè®¡ç®—å±æ€§æœ‰ç¼“å­˜ï¼Œæ‰€ä»¥ count çš„è®¡æ•°åº”è¯¥ä¸º 1ï¼Œé¡µé¢æ˜¾ç¤ºå¦‚ä¸‹ è®¡ç®—å±æ€§ä¹Ÿä¼šè¢«æŒ‚è½½åˆ° Vue å®ä¾‹ vm ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ vm.xxx çš„å½¢å¼è®¿é—®è®¡ç®—å±æ€§ ç›‘å¬å™¨handleråœ¨åˆ›å»º Vue å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ªé€‰é¡¹ watchï¼Œå®ƒå¯ä»¥ç›‘å¬ data ä¸­å®šä¹‰çš„æ•°æ®ï¼Œå½“ç›‘å¬çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¾¿ä¼šæ‰§è¡Œç›¸åº”çš„æ“ä½œ &lt;div id=\"app\"&gt; &lt;p&gt;&lt;input type=\"text\" v-model=\"question\"&gt;&lt;/p&gt; &#123;&#123;message&#125;&#125;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; question: '', message: '' &#125; &#125;, watch: &#123; question: &#123; handler() &#123; this.message = this.question.split('').reverse().join('') &#125; &#125; &#125; &#125;)&lt;/script&gt; ä¸Šé¢çš„ä»£ç æˆ‘ä»¬ç›‘å¬äº†æ•°æ® question watch: &#123; question: &#123; handler() &#123; this.message = this.question.split('').reverse().join('') &#125; &#125;&#125; å½“æˆ‘ä»¬å‘è¾“å…¥æ¡†è¾“å…¥æ•°æ®æ—¶ï¼Œquestion å°±ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šæ‰§è¡Œä¸Šè¿° question ä¸­çš„ handler æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­æˆ‘ä»¬å°†æ•°æ® message è®¾ç½®ä¸º question çš„ç¿»è½¬ ç›‘å¬å™¨è¿˜å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºæ›´æ–°å‰çš„å€¼ä¸æ›´æ–°åçš„å€¼ watch: &#123; question: &#123; handler(oldValue, newValue) &#123; this.message = this.question.split('').reverse().join('') &#125; &#125;&#125; å¦‚æœç›‘å¬çš„æ•°æ®åªæœ‰ handler æ–¹æ³•ï¼Œåˆ™å¯ä»¥ç®€å†™ä¸ºå¦‚ä¸‹ watch: &#123; question() &#123; this.message = this.question.split('').reverse().join('') &#125;&#125; immediateç»§ç»­çœ‹ä¸€ä¸ªå¾ˆç®€å•çš„ä»£ç  &lt;div id=\"app\"&gt; &lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123;reversedMessage&#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: \"#app\", data() &#123; return &#123; message: 'Hello World!', reversedMessage: '' &#125; &#125;, watch: &#123; message() &#123; this.reversedMessage = this.message.split('').reverse().join('') &#125; &#125; &#125;)&lt;/script&gt; ä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸¤ä¸ªå±æ€§ message ä¸ reversedMessageï¼Œå¹¶ä¸”æˆ‘ä»¬ç›‘å¬äº† messageï¼Œå½“ message å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¾¿ä¼šå°† reversedMessage è®¾ç½®ä¸º message çš„ç¿»è½¬ã€‚æ­¤æ—¶çš„é¡µé¢æ˜¾ç¤ºä¸º reversedMessage çš„å†…å®¹ä¸ºç©ºï¼Œå¹¶ä¸æ˜¯ message çš„ç¿»è½¬ï¼Œè¿™æ˜¯å› ä¸ºåªæœ‰å½“ message å‘ç”Ÿå˜åŒ–æ—¶ï¼Œwatch ä¸­çš„æ–¹æ³•æ‰ä¼šæ‰§è¡Œã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›ç«‹å³æ‰§è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿è¦è®¾ç½® immediate å‚æ•°ä¸º true watch: &#123; message: &#123; immediate: true, handler() &#123; this.reversedMessage = this.message.split('').reverse().join('') &#125; &#125;&#125; æ­¤æ—¶é¡µé¢æ˜¾ç¤ºä¸º deepå½“æˆ‘ä»¬ç›‘å¬ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå¯èƒ½éœ€è¦ç”¨åˆ° deep å±æ€§ã€‚è€ƒè™‘ä¸‹é¢çš„åœºæ™¯ &lt;div id=\"app\"&gt; &lt;p @click=\"changeName\"&gt;username: &#123;&#123;user.username&#125;&#125;&lt;/p&gt; &lt;p&gt;gender: &#123;&#123;user.gender&#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: \"#app\", data() &#123; return &#123; user: &#123; username: 'Alice', gender: 'female' &#125; &#125; &#125;, methods: &#123; changeName() &#123; this.user.username = \"Bob\"; &#125; &#125;, watch: &#123; user: &#123; handler() &#123; this.user.gender = 'male' &#125; &#125; &#125; &#125;)&lt;/script&gt; åœ¨ data ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ•°æ® userï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µ username å’Œ genderï¼›åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ’å€¼è¯­æ³•ä½¿ç”¨äº†è¿™ä¸¤ä¸ªæ•°æ®ï¼Œå¹¶ä¸”å½“æˆ‘ä»¬ç‚¹å‡» username æ—¶ï¼Œä¼šä¿®æ”¹ username çš„å€¼ï¼›åœ¨ watch ä¸­æˆ‘ä»¬ç›‘å¬äº† userï¼Œå½“ user å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šè®¾ç½® gender çš„å€¼ ä¸Šé¢æˆ‘ä»¬ç‚¹å‡» username æ—¶ï¼Œusername çš„å€¼çš„ç¡®å‘ç”Ÿäº†æ”¹å˜ï¼Œä½†æ˜¯ gender å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆ? è¿™ä¸ªä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬ä½¿ç”¨ watch ç›‘å¬ userï¼Œä½†æ˜¯å½“æˆ‘ä»¬ä¿®æ”¹ user.username çš„æ—¶å€™ï¼Œuser æ ¹æœ¬æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›ä¿®æ”¹å¯¹è±¡çš„å±æ€§ä¹Ÿèƒ½è¢«ç›‘å¬åˆ°ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥è®¾ç½® deep å±æ€§ä¸º true watch: &#123; user: &#123; deep: true, handler() &#123; this.user.gender = 'male' &#125; &#125;&#125; è®¡ç®—å±æ€§ä¸ç›‘å¬å™¨ï¼š ç›‘å¬å™¨çš„ä½œç”¨æ˜¯ç›‘å¬æ•°æ®çš„å˜åŒ–ï¼Œç„¶åè§¦å‘ä¸€ä¸ªè¡Œä¸ºï¼Œä¾‹å¦‚å¼‚æ­¥æ“ä½œã€è¯·æ±‚æ•°æ® è®¡ç®—å±æ€§æ˜¯æ ¹æ®å½“å‰æ•°æ®è®¡ç®—å¾—åˆ°ä¸€ä¸ªå€¼ ç”±äºè®¡ç®—å±æ€§å…·æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬è€ƒè™‘ä½¿ç”¨è®¡ç®—å±æ€§ã€‚ ç”Ÿå‘½å‘¨æœŸå¯¹äºä¸€ä¸ª Vue å®ä¾‹ï¼Œä»åˆ›å»ºåˆ°è¢«é”€æ¯ï¼Œä¼šç»å†ä¸€ç³»åˆ—çš„é˜¶æ®µï¼Œå°±å¦‚åŒäººä¸€æ ·ï¼Œä»å‡ºç”Ÿåˆ°æ­»äº¡ï¼Œä¼šç»å†å¹¼å¹´ã€é’å¹´ã€ä¸­å¹´ã€è€å¹´ç­‰ä¸€ç³»åˆ—çš„é˜¶æ®µã€‚Vue ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›é’©å­å‡½æ•°ï¼Œä¾‹å¦‚ beforeCreate å‡½æ•°ï¼Œå½“åˆå§‹åŒ–æ•°æ®ä¹‹å‰ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œåˆå¦‚ created å‡½æ•°ï¼Œå½“åˆå§‹åŒ–æ•°æ®ä¹‹åä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ Vue å®ä¾‹çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç°åœ¨ä½ ä¸éœ€è¦å¼„æ‡‚æ‰€æœ‰çš„ä¸œè¥¿ï¼Œä½†éšç€å¯¹ Vue ä½¿ç”¨çš„æ·±å…¥ï¼Œå®ƒçš„å‚è€ƒä»·å€¼ä¼šè¶Šæ¥è¶Šé«˜ ä¸Šå›¾ç‰µæ¶‰åˆ°å¦‚ä¸‹é’©å­å‡½æ•°ï¼š beforeCreateï¼šåˆå§‹åŒ–æ•°æ®ä¹‹å‰è°ƒç”¨è¯¥å‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­ä¸èƒ½é€šè¿‡ vm.xxx è®¿é—®æ•°æ® createdï¼šåˆå§‹æ•°æ®ä¹‹åè°ƒç”¨è¯¥å‡½æ•°ï¼Œè¿™æ—¶å¯ä»¥è®¿é—®åˆ°æ•°æ® beforeMountï¼š æ¸²æŸ“ $el ä¹‹å‰è°ƒç”¨è¯¥å‡½æ•° mountedï¼šæ¸²æŸ“ $el ä¹‹åè°ƒç”¨è¯¥å‡½æ•° beforeUpdateï¼šæ•°æ®æ›´æ–°ä¹‹å‰æ‰§è¡Œè¯¥å‡½æ•° updatedï¼šæ•°æ®æ›´æ–°ä¹‹åæ‰§è¡Œè¯¥å‡½æ•° beforeDestroyï¼šVue å®ä¾‹é”€æ¯ä¹‹å‰æ‰§è¡Œè¯¥å‡½æ•° destroyedï¼šVue å®ä¾‹é”€æ¯ä¹‹åæ‰§è¡Œè¯¥å‡½æ•° &lt;div id=\"app\"&gt; &#123;&#123;message&#125;&#125;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: \"#app\", data() &#123; return &#123; message: 'Hello Vue!' &#125; &#125;, beforeCreate() &#123; // æ•°æ®æœªåˆå§‹åŒ–ï¼Œæ— æ³•è®¿é—® console.log(\"åœ¨ beforeCreate ä¸­è®¿é—®æ•°æ®ï¼š\", this.message); // undefined &#125;, created() &#123; // æ•°æ®åˆå§‹åŒ–å®Œæ¯•ï¼Œå¯ä»¥è®¿é—® console.log(\"åœ¨ created ä¸­è®¿é—®æ•°æ®ï¼š\",this.message); // Hello Vue! // æ­¤æ—¶è¿˜æ²¡åˆ›å»º $elï¼Œæ‰€ä»¥æ— æ³•è®¿é—®åˆ° $el console.log(\"åœ¨ created ä¸­è®¿é—® $el\", this.$el); // undefined &#125;, beforeMount() &#123; // æ¨¡æ¿è¯­æ³•ä¸­çš„è¡¨è¾¾å¼æœªè¢«æ¸²æŸ“ console.log(\"åœ¨ beforeMount ä¸­è®¿é—® $el\", this.$el); &#125;, mounted() &#123; // æ¨¡æ¿è¯­æ³•ä¸­çš„è¡¨è¾¾å¼å·²ç»è¢«æ›¿æ¢ä¸ºäº†æ•°æ® console.log(\"åœ¨ mounted ä¸­è®¿é—® $el\", this.$el); &#125; &#125;)&lt;/script&gt; ä¸Šè¿°ä»£ç ä¸­çš„é’©å­å‡½æ•°ä¼šæŒ‰ç…§ beforeCreate created beforeMount mounted çš„é¡ºåºæ‰§è¡Œï¼Œæ§åˆ¶å°æ‰“å°ç»“æœå¦‚ä¸‹ å½“æˆ‘ä»¬æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œä¼šé‡æ–°æ¸²æŸ“é¡µé¢ï¼Œåœ¨æ¸²æŸ“é¡µé¢ä¹‹å‰ä¼šè°ƒç”¨ beforeUpdate å‡½æ•°ï¼Œæ¸²æŸ“ä¹‹åä¼šè°ƒç”¨ updated å‡½æ•°(è¿™ä¸¤ä¸ªé’©å­å‡½æ•°çš„ç”¨å¤„ä¸å¤§ï¼Œå¾ˆå°‘ä½¿ç”¨)ã€‚ ç»è¿‡å®éªŒæˆ‘å‘ç°æ— æ³•åœ¨ updated é’©å­å‡½æ•°ä¸­è®¿é—® $elã€‚ æ¯”è¾ƒå¸¸ç”¨çš„é’©å­å‡½æ•°æœ‰ä¸¤ä¸ªï¼š createdï¼šè¿™é‡Œå¯ä»¥å‘åç«¯è¯·æ±‚æ•°æ® mountedï¼šåœ¨è¿™é‡Œå¯ä»¥æ“ä½œ DOM å…ƒç´  ç»„ä»¶ä¸€ä¸ªé¡µé¢ä¸€èˆ¬ç”±å¾ˆå¤šä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¾‹å¦‚ header main footer ç­‰éƒ¨åˆ† æˆ‘ä»¬æŠŠè¿™äº›éƒ¨åˆ†ç§°ä¹‹ä¸ºç»„ä»¶ï¼Œé€šè¿‡ä½¿ç”¨ç»„ä»¶æ­å»ºé¡µé¢ï¼Œå°±åƒæ­ç§¯æœ¨ä¸€æ ·æ­å»ºé¡µé¢ï¼Œç»„ä»¶å¯ä»¥åœ¨ä¸åŒçš„é¡µé¢ç›´æ¥å¤ç”¨(åŒ…æ‹¬æ ·å¼ä»¥åŠé€»è¾‘)ï¼Œå¤ç”¨æ€§å¾—åˆ°äº†å¢å¼ºï¼Œå¹¶ä¸”æ˜“äºç»´æŠ¤ã€‚ å®šä¹‰ç»„ä»¶ã€ä½¿ç”¨ç»„ä»¶ç»„ä»¶åˆ†ä¸ºä¸¤ç§ï¼š å…¨å±€ç»„ä»¶ å±€éƒ¨ç»„ä»¶ é€šè¿‡ Vue.component å¯ä»¥æ„å»ºä¸€ä¸ªå…¨å±€ç»„ä»¶ï¼Œä¸‹é¢ç»™å‡ºä¸€ä¸ªç¤ºä¾‹ Vue.component(\"my-list\", &#123; template: `&lt;ul&gt;&lt;li v-for=\"c in courses\" :key=\"c\"&gt;&#123;&#123;c&#125;&#125;&lt;/li&gt;&lt;/ul&gt;`, data() &#123; return &#123; courses: ['è¯­æ–‡', 'æ•°å­¦'] &#125; &#125;, methods: &#123; &#125;,&#125;) ç¬¬ä¸€ä¸ªå‚æ•° my-list æ˜¯ç»„ä»¶çš„åç§°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä»–ç»„ä»¶ä¸­é€šè¿‡ &lt;my-list&gt;&lt;/my-list&gt; ä½¿ç”¨è¯¥ç»„ä»¶ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¦‚ä¸‹é€‰é¡¹ï¼š templateï¼šè¯¥ç»„ä»¶å¯¹åº”çš„æ¨¡æ¿ dataï¼šç»„ä»¶åŒ…å«çš„æ•°æ® methodsï¼šç»„ä»¶åŒ…å«çš„æ–¹æ³• â€¦ è¯¥å¯¹è±¡éœ€è¦è®¾ç½®çš„å­—æ®µä¸æˆ‘ä»¬åˆ›å»º Vue å®ä¾‹è®¾ç½®çš„å­—æ®µå·®ä¸å¤šã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªä½¿ç”¨è¯¥ç»„ä»¶çš„ä¾‹å­ &lt;div id=\"app\"&gt; &lt;!-- ä½¿ç”¨ç»„ä»¶ --&gt; &lt;my-list&gt;&lt;/my-list&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; // åˆ›å»ºç»„ä»¶ Vue.component(\"my-list\", &#123; template: `&lt;ul&gt;&lt;li v-for=\"c in courses\" :key=\"c\"&gt;&#123;&#123;c&#125;&#125;&lt;/li&gt;&lt;/ul&gt;`, data() &#123; return &#123; courses: ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­'] &#125; &#125;, methods: &#123; &#125;, &#125;) const vm = new Vue(&#123; el: '#app' &#125;)&lt;/script&gt; æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å¦‚ä¸‹å£°æ˜ä¸€ä¸ªå±€éƒ¨ç»„ä»¶ const myList = &#123; template: `&lt;ul&gt;&lt;li v-for=\"c in courses\" :key=\"c\"&gt;&#123;&#123;c&#125;&#125;&lt;/li&gt;&lt;/ul&gt;`, data() &#123; return &#123; courses: ['ç‰©ç†', 'åŒ–å­¦', 'ç”Ÿç‰©'] &#125; &#125;,&#125; è¦ä½¿ç”¨å±€éƒ¨ç»„ä»¶ï¼Œéœ€è¦äº‹å…ˆåœ¨ components å±æ€§è¿›è¡Œå£°æ˜ const vm = new Vue(&#123; el: '#app', components: &#123; \"my-list\": myList &#125;&#125;) è¿™æ ·æ‰å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç»„ä»¶ my-list &lt;div id=\"app\"&gt; &lt;my-list&gt;&lt;/my-list&gt;&lt;/div&gt; propsåœ¨ä¸Šé¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª my-list ç»„ä»¶ï¼Œmy-list ç»„ä»¶å±•ç¤ºçš„æ•°æ®æ˜¯åœ¨å…¶å†…éƒ¨çš„ data ä¸­å®šä¹‰çš„ï¼Œä½†æ˜¯å®ƒä½œä¸ºä¸€ä¸ªé€šç”¨ç»„ä»¶ï¼Œå®ƒå±•ç¤ºçš„å†…å®¹åº”è¯¥ç”±ä½¿ç”¨è¯¥ç»„ä»¶çš„ç»„ä»¶ä¼ å…¥ï¼Œæœ¬èŠ‚è®²è¿°çš„ä¾¿æ˜¯å¦‚ä½•å‘ç»„ä»¶ä¼ å…¥æ•°æ®ã€‚ çˆ¶å­ç»„ä»¶ å¦‚æœä¸€ä¸ªç»„ä»¶ A åœ¨å…¶å†…éƒ¨ä½¿ç”¨äº†ç»„ä»¶ B ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç§° A æ˜¯ B çš„çˆ¶ç»„ä»¶ï¼ŒB æ˜¯ A çš„å­ç»„ä»¶ã€‚ ä¼ é€’æ•°æ®å¦‚æœæˆ‘ä»¬æƒ³è¦ç»™ç»„ä»¶ my-list ä¼ å…¥æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å±æ€§ (props) è¿›è¡Œä¼ å…¥ &lt;div id=\"app\"&gt; &lt;!-- ä¼ é€’æ•°æ® --&gt; &lt;my-list :courses=\"courses\"&gt;&lt;/my-list&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; Vue.component('my-list', &#123; // åœ¨ props ä¸­å£°æ˜æ¥æ”¶çš„æ•°æ® props: ['courses'], template: `&lt;ul&gt;&lt;li v-for=\"c in courses\" :key=\"c\"&gt;&#123;&#123;c&#125;&#125;&lt;/li&gt;&lt;/ul&gt;`&#125;)const vm = new Vue(&#123; el: \"#app\", data() &#123; return &#123; courses: ['è¯­æ–‡', 'æ•°å­¦', 'è‹±è¯­'] &#125; &#125;,&#125;)&lt;/script&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸º my-list ç»„ä»¶çš„ courses å±æ€§ç»‘å®šæ•°æ®æ¥ä¼ é€’æ•°æ®ï¼Œè€Œåœ¨ my-list ç»„ä»¶ä¸­è¦æ˜¯ç”¨ä¼ å…¥çš„æ•°æ®ï¼Œåˆ™éœ€è¦åœ¨å®ƒçš„ props å±æ€§ä¸­è¿›è¡Œå£°æ˜ï¼Œè¿™æ ·æ‰å¯ä»¥ä½¿ç”¨ä¼ å…¥çš„æ•°æ®ã€‚ ä¼ é€’ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ å¦‚æœä½ æƒ³è¦å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½ä½œä¸º prop ä¼ å…¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„ v-bind (å–ä»£ v-bind:prop-name)ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„å¯¹è±¡ postï¼š post: &#123; id: 1, title: 'My Journey with Vue'&#125; ä¸‹é¢çš„æ¨¡æ¿ï¼š &lt;component v-bind=\"post\"&gt;&lt;/component&gt; ç­‰ä»·äº &lt;component :id=\"post.id\" :title=\"post.title\"&gt;&lt;/component&gt; ç±»å‹æ£€æŸ¥props é™¤äº†å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ä»¥å¤–ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ props: &#123; courses: Array&#125; ä¸Šé¢çš„æ„æ€æ˜¯ï¼Œæ¥æ”¶åˆ°çš„ courses å±æ€§å¿…é¡»ä¸ºæ•°ç»„ã€‚é™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥å¯¹ä¼ å…¥å‚æ•°åšæ›´å¤šçš„éªŒè¯ props: &#123; courses: &#123; type: Array, required: true, // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå‡½æ•°è¿”å› default: function() &#123; return ['ç‰©ç†', 'åŒ–å­¦', 'ç”Ÿç‰©']; &#125;, validator(value) &#123; return value.length &gt; 2 &#125; &#125;&#125; typeï¼šè§„å®šä¼ å…¥å±æ€§çš„ç±»å‹ï¼Œå¯ä»¥æœ‰å¦‚ä¸‹å–å€¼ String Number Boolean Array Object Date Function Symbol Promise requiredï¼šæ˜¯å¦æ˜¯å¿…é¡»çš„ defaultï¼šå¦‚æœä¸ä¼ å…¥æ•°æ®ï¼Œåˆ™ä½¿ç”¨è¯¥é»˜è®¤å€¼ validatorï¼šå‡½æ•°ï¼Œå¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œæ ¡éªŒ å¦‚æœä¼ å…¥çš„æ•°æ®æ²¡æœ‰é€šè¿‡éªŒè¯çš„è¯ï¼Œå°±ä¼šåœ¨æ§åˆ¶å°æ‰“å°é”™è¯¯ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸å‘ç»„ä»¶ my-list ä¼ å…¥æ•°æ® &lt;my-list &gt;&lt;/my-list&gt; å› ä¸ºæ²¡æœ‰ä¼ å…¥æ•°æ®ï¼Œæ‰€ä»¥ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¹¶ä¸”å› ä¸ºæˆ‘ä»¬è¦æ±‚å¿…é¡»ä¼ å…¥æ•°æ® required: trueï¼Œæ‰€ä»¥åœ¨æ§åˆ¶å°ç»™å‡ºäº†ä¸€ä¸ªè­¦å‘Šã€‚ æ³¨æ„ï¼š props å‚æ•°çš„éªŒè¯æ˜¯åœ¨å®ä¾‹åŒ–ç»„ä»¶ä¹‹å‰ï¼Œå› æ­¤æ— æ³•åœ¨ default å’Œ validator ä¸­è®¿é—®ç»„ä»¶ä¸­å®šä¹‰çš„æ•°æ®(å¦‚ data computed ç­‰) æ³¨æ„åœ¨ JavaScript ä¸­å¯¹è±¡å’Œæ•°ç»„æ˜¯é€šè¿‡å¼•ç”¨ä¼ å…¥çš„ï¼Œæ‰€ä»¥å¯¹äºä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡ç±»å‹çš„ prop æ¥è¯´ï¼Œåœ¨å­ç»„ä»¶ä¸­æ”¹å˜å˜æ›´è¿™ä¸ªå¯¹è±¡æˆ–æ•°ç»„æœ¬èº«å°†ä¼šå½±å“åˆ°çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¸è¦åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹ prop $attrså¦‚æœæˆ‘ä»¬å‘ç»„ä»¶ä¼ å…¥äº†ä¸€ä¸ªå±æ€§ï¼Œä½†æ˜¯åœ¨ç»„ä»¶ä¸­å¹¶æ²¡æœ‰åœ¨ props ä¸­å£°æ˜è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§ä¼šè¢«é»˜è®¤æ·»åŠ åˆ°ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Š Vue.component('my-list', &#123; template: `&lt;div&gt;&lt;p&gt;my-list&lt;/p&gt;&lt;/div&gt;`,&#125;) å¦‚ä¸Šæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå…¨å±€ç»„ä»¶ï¼Œå®ƒæ²¡æœ‰åœ¨ props ä¸­å£°æ˜éœ€è¦æ¥æ”¶çš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬å‘å…¶ä¼ é€’æ•°æ®ï¼Œé‚£ä¹ˆä¼ é€’çš„æ•°æ®ä¼šè¢«æ”¾åœ¨æ ¹å…ƒç´ ä¸Šï¼Œä¹Ÿå°±æ˜¯ div å…ƒç´ ä¸Š &lt;div id=\"app\"&gt; &lt;my-list :title=\"title\"&gt;&lt;/my-list&gt;&lt;/div&gt; const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; title: 'Vue' &#125; &#125;,&#125;) å¦‚æœä¸å¸Œæœ›æ ¹å…ƒç´ ç›´æ¥ç»§æ‰¿å±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ç»„ä»¶çš„é€‰é¡¹ä¸­è®¾ç½® inheritAttrs: false Vue.component('my-list', &#123; template: `&lt;div&gt;&lt;p&gt;my-list&lt;/p&gt;&lt;/div&gt;`, inheritAttrs: false&#125;) è¿™æ—¶æˆ‘ä»¬å‘ç°æ ¹å…ƒç´ ä¸Šæ²¡æœ‰ç»§æ‰¿ä¼ å…¥çš„å±æ€§äº†ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ $attrs è·å¾—çˆ¶ç»„ä»¶ä¼ å…¥çš„å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å†³å®šå°†å±æ€§èµ‹äºˆå“ªä¸ªå…ƒç´  Vue.component('my-list', &#123; template: `&lt;div&gt;&lt;p v-bind=\"$attrs\"&gt;my-list&lt;/p&gt;&lt;/div&gt;`, inheritAttrs: false&#125;) ä¸Šé¢æˆ‘ä»¬å†³å®šå°†æ‰€æœ‰æ¥æ”¶åˆ°çš„ä¸”æœªåœ¨ props ä¸­å£°æ˜çš„å±æ€§å…¨éƒ¨æ”¾åœ¨ p æ ‡ç­¾ä¸Š æ³¨æ„ï¼šåœ¨ props ä¸­å·²ç»å£°æ˜çš„å±æ€§ä¸ä¼šåœ¨ $attrs ä¸­å‡ºç°ã€‚ è‡ªå®šä¹‰äº‹ä»¶ä¸Šé¢è®²è¿°äº†çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œé‚£ä¹ˆå­ç»„ä»¶å¦‚ä½•å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®å‘¢? å‡è®¾æœ‰ä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œå®ƒç»´æŠ¤ç€ä¸€ä¸ª courses çš„æ•°ç»„ï¼Œå®ƒæœ‰ä¸¤ä¸ªå­ç»„ä»¶ course-addï¼šç”¨ä»¥å‘ courses ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ® course-displayï¼šç”¨ä»¥å±•ç¤º courses ä¸­çš„æ•°æ® &lt;div id=\"app\"&gt; &lt;course-add&gt;&lt;/course-add&gt; &lt;course-display :courses=\"courses\"&gt;&lt;/course-display&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; Vue.component('course-add', &#123; template: ` &lt;div&gt; &lt;p&gt;&lt;input type=\"text\" v-model=\"course\"&gt;&lt;/input&gt;&lt;/p&gt; &lt;p&gt;&lt;button @click=\"add\"&gt;æ·»åŠ è¯¾ç¨‹&lt;/button&gt;&lt;/p&gt; &lt;/div&gt; `, data() &#123; return &#123; course: '' &#125; &#125;, methods: &#123; add() &#123; &#125; &#125;, &#125;); Vue.component('course-display', &#123; props: &#123; courses: Array &#125;, template: ` &lt;ul&gt; &lt;li v-for=\"c in courses\" :key=\"c\"&gt;&#123;&#123;c&#125;&#125;&lt;/li&gt; &lt;/ul&gt; ` &#125;) const vm = new Vue(&#123; el: '#app', data() &#123; return &#123; courses: ['Node.js', 'Vue', 'React'] &#125; &#125;, &#125;)&lt;/script&gt; æˆ‘ä»¬å¸Œæœ›å½“æˆ‘ä»¬ç‚¹å‡»æ·»åŠ è¯¾ç¨‹çš„æŒ‰é’®æ—¶ï¼Œå‘çˆ¶ç»„ä»¶çš„ courses æ·»åŠ ä¸€é—¨è¯¾ç¨‹ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•å°†å­ç»„ä»¶çš„æ•°æ®ä¼ é€’åˆ°çˆ¶ç»„ä»¶ã€‚è¦åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œåªèƒ½é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼å°†æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼Œé¦–å…ˆæˆ‘ä»¬ä¸ºç»„ä»¶ course-add ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰çš„äº‹ä»¶ &lt;course-add @add-course=\"addCourse\"&gt;&lt;/course-add&gt; æˆ‘ä»¬ä¸ºç»„ä»¶ course-add ç»‘å®šäº† add-course è¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œè¦è§¦å‘è¯¥è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¯é€šè¿‡ this.$emit(&#39;add-course&#39;) è§¦å‘ï¼Œç‚¹æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶æˆ‘ä»¬ä¾¿è§¦å‘è¯¥äº‹ä»¶ï¼Œå³ // course-addmethods: &#123; add() &#123; // é€šè¿‡åç»­å‚æ•°å°†æ•°æ®ä¼ é€’ this.$emit('add-course', this.course); this.course = ''; &#125;&#125; å› ä¸ºæˆ‘ä»¬ä¸º add-course è¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶ç»‘å®šäº†çˆ¶ç»„ä»¶çš„ addCourse æ–¹æ³•ï¼Œæ‰€ä»¥å½“è§¦å‘ add-course è¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œä¾¿ä¼šè°ƒç”¨çˆ¶ç»„ä»¶çš„ addCourse æ–¹æ³• // çˆ¶ç»„ä»¶methods: &#123; addCourse(course) &#123; // å°†å­ç»„ä»¶ä¼ é€’çš„æ•°æ®åŠ å…¥åˆ° courses æ•°ç»„ä¸­ this.courses.push(course); &#125;&#125; æˆ‘ä»¬å†æ¬¡æ‹ä¸€æ‹æµç¨‹ï¼š ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘å­ç»„ä»¶çš„ add æ–¹æ³• åœ¨ add æ–¹æ³•ä¸­ï¼Œè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ add-courseï¼Œå¹¶ä¼ é€’æ•°æ® è‡ªå®šä¹‰äº‹ä»¶ add-course ç»‘å®šçš„å¤„ç†å‡½æ•°ä¸ºçˆ¶ç»„ä»¶çš„ addCourse æ–¹æ³• åœ¨çˆ¶ç»„ä»¶çš„ addCourse æ–¹æ³•ä¸­æˆ‘ä»¬æ‹¿åˆ°å­ç»„ä»¶ä¼ é€’çš„æ•°æ®ï¼Œå¹¶æ·»åŠ åˆ° courses ä¸­ è¸©å‘ï¼šHTML çš„å±æ€§å¤§å°å†™æ˜¯ä¸æ•æ„Ÿçš„ï¼Œä¼šä¸€å¾‹è½¬åŒ–ä¸ºå°å†™ã€‚å¦‚æœä½ ä¸ºç»„ä»¶æ·»åŠ å¦‚ä¸‹è‡ªå®šä¹‰äº‹ä»¶ addCourseï¼Œé‚£ä¹ˆå®ƒä¼šè¢«è½¬åŒ–ä¸ºå°å†™çš„å½¢å¼ï¼Œå³ addcourseï¼Œæ‰€ä»¥å¦‚æœä½ é€šè¿‡ this.$emit(&#39;addCourse&#39;) è§¦å‘äº‹ä»¶çš„è¯æ˜¯ä¸ä¼šæˆåŠŸçš„ï¼Œæ‰€ä»¥ä¸€å¾‹æ¨èä½¿ç”¨ kebab-case å‘½åï¼Œå³ add-courseã€‚ åŒå‘ç»‘å®šå¦‚æœæˆ‘ä»¬ä¸ºç»„ä»¶ç»‘å®š v-model æ—¶ï¼Œå®ƒå®é™…ä¸Šè‡ªåŠ¨ç»‘å®šäº† value å±æ€§ï¼Œä»¥åŠæ·»åŠ äº†ä¸€ä¸ªåä¸º input çš„è‡ªå®šä¹‰äº‹ä»¶ Vue.component('base-input', &#123; props: &#123; value: String &#125;, template: `&lt;input type=\"text\" :value=\"value\" @input=\"input\"&gt;`, methods: &#123; input(event) &#123; this.$emit('input', event.target.value); &#125; &#125;,&#125;) æˆ‘ä»¬ä¸‹é¢å¯ä»¥å‘ä½¿ç”¨æ­£å¸¸è¡¨å•ä¸€æ ·ä½¿ç”¨è¯¥ç»„ä»¶ &lt;div id=\"app\"&gt; &lt;base-input v-model=\"message\"&gt;&lt;/base-input&gt; &lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt;&lt;/div&gt; const vm = new Vue(&#123; el: \"#app\", data() &#123; return &#123; message: '' &#125; &#125;,&#125;) å› ä¸ºå‘å•é€‰æ¡†ã€å¤é€‰æ¡†è¿™æ ·çš„è¾“å…¥æ§ä»¶å¯èƒ½ä¼šå°† value ç”¨äºä¸åŒçš„ç›®çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ model å±æ€§é¿å…è¿™æ ·çš„å†²çª Vue.component('base-checkbox', &#123; model: &#123; prop: 'checked', event: 'change' &#125;, props: &#123; checked: Boolean &#125;, template: ` &lt;input type=\"checkbox\" :checked=\"checked\" @change=\"$emit('change', change)\" &gt; `, methods: &#123; change(event) &#123; this.$emit('change', event.target.checked); &#125; &#125;&#125;) ä¸Šé¢æˆ‘ä»¬åœ¨ model å±æ€§ä¸­å£°æ˜ç»‘å®šçš„å±æ€§ä¸º checked ä»¥åŠç»‘å®šçš„è‡ªå®šä¹‰äº‹ä»¶ä¸º changeã€‚ åŠ¨æ€ç»„ä»¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;component&gt; ä»¥åŠ :is å±æ€§æ¥åŠ¨æ€çš„åˆ‡æ¢ç»„ä»¶ &lt;div id=\"app\"&gt; &lt;input type=\"radio\" name=\"component\" @click=\"currentComponent = 'component-a'\" checked&gt;A &lt;input type=\"radio\" name=\"component\" @click=\"currentComponent = 'component-b'\"&gt;B &lt;component :is=\"currentComponent\"&gt;&lt;/component&gt;&lt;/div&gt; å½“æˆ‘ä»¬ç‚¹å‡»å•é€‰æ¡†æ—¶ï¼Œä¼šä¿®æ”¹ currentComponent çš„å€¼ï¼Œè€Œ component ä¼šæ ¹æ® currentComponent é€‰æ‹©å±•ç¤ºä»€ä¹ˆç»„ä»¶ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬ç‚¹å‡»ç¬¬ä¸€ä¸ªå•é€‰æ¡†æ—¶ï¼ŒcurrentComponent çš„å€¼ä¼šè¢«è®¾ç½®ä¸º component-aï¼Œå› æ­¤ &lt;component&gt; ä¼šå±•ç¤º component-a è¿™ä¸ªç»„ä»¶ã€‚åœ¨ä¸‹é¢æˆ‘ä»¬å®šä¹‰ç”¨åˆ°çš„ç»„ä»¶ Vue.component('component-a', &#123; template: `&lt;p&gt;component-a&lt;/p&gt;`&#125;)Vue.component('component-b', &#123; template: `&lt;p&gt;component-b&lt;/p&gt;`&#125;)const vm = new Vue(&#123; el: \"#app\", data() &#123; return &#123; currentComponent: \"component-a\" &#125; &#125;,&#125;) æ’æ§½æ’æ§½å†…å®¹é™¤äº†å¯ä»¥é€šè¿‡ prop å‘ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ’æ§½å‘ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œä¾‹å¦‚ &lt;layout&gt; content&lt;/layout&gt; å…¶ä¸­ content ä¾¿æ˜¯ä¼ é€’çš„æ•°æ®ï¼Œå®ƒä¼šè¢«åˆ†å‘åˆ° layout ç»„ä»¶ä¸­ç‰¹å®šçš„ä½ç½®ä¸­ã€‚å‡è®¾ layout ç»„ä»¶çš„æ¨¡æ¿å¦‚ä¸‹ &lt;div&gt; &lt;header&gt;&lt;/header&gt; &lt;main&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/main&gt; &lt;footer&gt;&lt;/footer&gt;&lt;/div&gt; é‚£ä¹ˆè¯¥æ¨¡æ¿ä¼šè¢«æ¸²æŸ“ä¸º &lt;div&gt; &lt;header&gt;&lt;/header&gt; &lt;main&gt; content &lt;/main&gt; &lt;footer&gt;&lt;/footer&gt;&lt;/div&gt; content ä¼šæ›¿æ¢ layout ä¸­çš„ &lt;slot&gt;&lt;/slot&gt; æ ‡ç­¾ï¼Œslot ä¾¿æ˜¯æ’æ§½çš„æ„æ€ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå ä½ç½®çš„ã€‚ åå¤‡æ’æ§½å¦‚æœæ²¡æœ‰ç»„ä»¶ä¼ å…¥åˆ†å‘çš„å†…å®¹ï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨é»˜è®¤å€¼ï¼Œè¿™æ—¶ä¾¿å¯ä»¥ä½¿ç”¨åèƒŒæ’æ§½ &lt;div&gt; &lt;header&gt;&lt;/header&gt; &lt;main&gt; &lt;slot&gt;é»˜è®¤å†…å®¹&lt;/slot&gt; &lt;/main&gt; &lt;footer&gt;&lt;/footer&gt;&lt;/div&gt; slot æ ‡ç­¾ä¸­çš„å†…å®¹å°±æ˜¯é»˜è®¤å€¼ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰ä¸º layout ç»„ä»¶ä¼ å…¥å†…å®¹æ—¶ä¾¿ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼Œå¦‚ &lt;layout&gt;&lt;/layout&gt; ä¼šè¢«æ¸²æŸ“ä¸º &lt;div&gt; &lt;header&gt;&lt;/header&gt; &lt;main&gt; é»˜è®¤å†…å®¹ &lt;/main&gt; &lt;footer&gt;&lt;/footer&gt;&lt;/div&gt; å…·åæ’æ§½æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¤šä¸ªæ’æ§½ï¼Œæœ‰å¦‚ä¸‹ layout ç»„ä»¶ &lt;div&gt; &lt;header&gt; &lt;!-- è¿™ä¸ªåœ°æ–¹æ”¾å¤´éƒ¨ --&gt; &lt;/header&gt; &lt;main&gt; &lt;!-- è¿™ä¸ªåœ°æ–¹æ”¾å†…å®¹ --&gt; &lt;/main&gt; &lt;footer&gt; &lt;!-- è¿™ä¸ªåœ°æ–¹æ”¾é¡µè„š --&gt; &lt;/footer&gt;&lt;/div&gt; è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ä¸º slot æ ‡ç­¾æŒ‡å®š name å±æ€§ï¼Œä»¥åŒºåˆ«ä¸åŒçš„æ’æ§½ &lt;div&gt; &lt;header&gt; &lt;slot name=\"header\"&gt;&lt;/slot&gt; &lt;/header&gt; &lt;main&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/main&gt; &lt;footer&gt; &lt;slot name=\"footer\"&gt;&lt;/slot&gt; &lt;/footer&gt;&lt;/div&gt; ä¸Šè¿°æˆ‘ä»¬æ²¡æœ‰ä¸º main ä¸­çš„ slot æŒ‡å®š name å±æ€§ï¼Œå®ƒä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„åç§° defaultã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¦‚ä¸‹ä½¿ç”¨ layout ç»„ä»¶è¿›è¡Œç»„ä»¶åˆ†å‘ &lt;layout&gt; &lt;template v-slot:header&gt; &lt;h1&gt;è¿™æ˜¯ä¸€ä¸ª Header&lt;/h1&gt; &lt;/template&gt; &lt;template v-slot:default&gt; &lt;p&gt;å†…å®¹&lt;/p&gt; &lt;p&gt;å†…å®¹&lt;/p&gt; &lt;/template&gt; &lt;template v-slot:footer&gt; &lt;small&gt;è¿™æ˜¯é¡µè„š&lt;/small&gt; &lt;/template&gt;&lt;/layout&gt; layout ç»„ä»¶æœ€ç»ˆä¼šè¢«æ¸²æŸ“ä¸º &lt;div&gt; &lt;header&gt; &lt;h1&gt;è¿™æ˜¯ä¸€ä¸ª Header&lt;/h1&gt; &lt;/header&gt; &lt;main&gt; &lt;p&gt;å†…å®¹&lt;/p&gt; &lt;p&gt;å†…å®¹&lt;/p&gt; &lt;/main&gt; &lt;footer&gt; &lt;small&gt;è¿™æ˜¯é¡µè„š&lt;/small&gt; &lt;/footer&gt;&lt;/div&gt; åŒ v-on ä¸ v-bind ä¸€æ ·ï¼Œv-slot ä¹Ÿæœ‰ç¼©å†™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸Šè¿°çš„ v-slot: æ›¿æ¢ä¸º # &lt;layout&gt; &lt;template #header&gt; &lt;h1&gt;è¿™æ˜¯ä¸€ä¸ª Header&lt;/h1&gt; &lt;/template&gt; &lt;template #default&gt; &lt;p&gt;å†…å®¹&lt;/p&gt; &lt;p&gt;å†…å®¹&lt;/p&gt; &lt;/template&gt; &lt;template #footer&gt; &lt;small&gt;è¿™æ˜¯é¡µè„š&lt;/small&gt; &lt;/template&gt;&lt;/layout&gt; ä½œç”¨åŸŸæ’æ§½å¦‚æœèƒ½åœ¨æ’æ§½ä¸­è®¿é—®å­ç»„ä»¶æ‰æœ‰çš„æ•°æ®æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå‡è®¾æœ‰å¦‚ä¸‹çš„ &lt;current-user&gt; ç»„ä»¶ &lt;span&gt; &lt;slot&gt;&lt;/slot&gt;&lt;/span&gt; æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè®¿é—® current-user ç»„ä»¶ä¸­çš„ user æ•°æ® &lt;current-user&gt; &#123;&#123;user.firstName&#125;&#125;&lt;/current-user&gt; ä½†æ˜¯ä¸Šè¿°è®¿é—®çš„æ˜¯ current-user çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç ä¸ä¼šæ­£å¸¸å·¥ä½œã€‚ä¸ºäº†è®¿é—®åˆ°å­ç»„ä»¶çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º slot å…ƒç´ ç»‘å®šä¸€ä¸ªå±æ€§ &lt;span&gt; &lt;slot :user=\"user\"&gt;&lt;/slot&gt;&lt;/span&gt; æ¥ç€æˆ‘ä»¬ä¾¿å¯ä»¥ä»¥ä¸‹é¢çš„æ–¹å¼è®¿é—® current-user çš„æ•°æ®äº† &lt;current-user&gt; &lt;template v-slot:default=\"slotProps\"&gt; &#123;&#123;slotProps.user.firstName&#125;&#125; &lt;/template&gt;&lt;/current-user&gt; å¦‚æœ current-user ä¸­åªæœ‰é»˜è®¤æ’æ§½çš„è¯ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥ç®€å†™ä¸º &lt;current-user v-slot=\"slotProps\"&gt; &#123;&#123;slotProps.user.firstName&#125;&#125;&lt;/current-user&gt; å¦å¤–æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»“æ„è¯­æ³•ï¼Œä» slotProps ä¸­è§£æ„å‡º userï¼Œå¦‚ &lt;current-user v-slot=\"&#123;user&#125;\"&gt; &#123;&#123;user.firstName&#125;&#125;&lt;/current-user&gt; åŠ¨ç”»Vue åœ¨æ’å…¥ã€æ›´æ–°ã€ç§»é™¤ DOM å…ƒç´ æ—¶ï¼Œæä¾›ä¸åŒçš„æ–¹å¼åº”ç”¨è¿‡æ¸¡æ•ˆæœã€‚ transitionVue æä¾›äº† transition ç»„ä»¶ï¼Œå¯ä»¥ä¸ºä»»ä½•ç»„ä»¶ä»¥åŠå…ƒç´ æä¾›è¿›å…¥ã€ç¦»å¼€è¿‡æ¸¡ï¼Œä¸‹é¢ç»™å‡ºä¸€ä¸ªä¾‹å­ &lt;div id=\"app\"&gt; &lt;p v-if=\"show\"&gt;Hello World!&lt;/p&gt; &lt;p&gt;&lt;button @click=\"toggle\"&gt;toggle&lt;/button&gt;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; new Vue(&#123; el: \"#app\", data() &#123; return &#123; show: true &#125; &#125;, methods: &#123; toggle() &#123; this.show = !this.show; &#125; &#125;, &#125;)&lt;/script&gt; ç°åœ¨ç‚¹å‡»æŒ‰é’®æ²¡æœ‰ä»»ä½•çš„è¿‡æ¸¡æ•ˆæœï¼Œç°åœ¨æˆ‘ä»¬ä¸º p æ ‡ç­¾å¤–é¢æ·»åŠ  transition ç»„ä»¶ &lt;div id=\"app\"&gt; &lt;transition name=\"fade\"&gt; &lt;p v-if=\"show\"&gt;Hello World!&lt;/p&gt; &lt;/transition&gt; &lt;p&gt;&lt;button @click=\"toggle\"&gt;toggle&lt;/button&gt;&lt;/p&gt;&lt;/div&gt; ä¸ºå…ƒç´ åŒ…è£¹ transition ç»„ä»¶ä»¥åï¼ŒVue ä¼šåšå¦‚ä¸‹å¤„ç†ï¼š è‡ªåŠ¨å—…æ¢ç›®æ ‡å…ƒç´ æ˜¯å¦åº”ç”¨äº† CSS è¿‡æ¸¡æˆ–åŠ¨ç”»ï¼Œå¦‚æœæ˜¯ï¼Œåœ¨æ°å½“çš„æ—¶æœºæ·»åŠ /åˆ é™¤ CSS ç±»å å¦‚æœè¿‡æ¸¡ç»„ä»¶æä¾›äº† JavaScript é’©å­å‡½æ•°ï¼Œè¿™äº›é’©å­å‡½æ•°å°†åœ¨æ°å½“çš„æ—¶æœºè¢«è°ƒç”¨ å¦‚æœæ²¡æœ‰æ‰¾åˆ° JavaScript é’©å­å¹¶ä¸”ä¹Ÿæ²¡æœ‰æ£€æµ‹åˆ° CSS è¿‡æ¸¡/åŠ¨ç”»ï¼ŒDOM æ“ä½œ (æ’å…¥/åˆ é™¤) åœ¨ä¸‹ä¸€å¸§ä¸­ç«‹å³æ‰§è¡Œ CSS åŠ¨ç”»å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº† CSS åŠ¨ç”»ï¼Œåœ¨å…ƒç´ æ’å…¥ä¹‹å‰ï¼Œ trasnition ç»„ä»¶ä¼šä¸ºåŒ…è£¹å…ƒç´ æ·»åŠ  v-enter ç±»ï¼Œå…¶ä¸­ v å°±æ˜¯åœ¨ transition æŒ‡å®šçš„ name å±æ€§å€¼ï¼Œå¦‚ä¸Šé¢çš„ name å±æ€§å€¼ä¸º fadeï¼Œæ‰€ä»¥ä¼šæ·»åŠ  fade-enter ç±»ï¼Œè¯¥ç±»ç”¨ä»¥å®šä¹‰åŠ¨ç”»çš„åˆå§‹çŠ¶æ€ï¼Œåœ¨å…ƒç´ æ’å…¥ä¹‹åä¼šè¢«ç§»é™¤ï¼›åœ¨æ’å…¥çš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ·»åŠ ä¸€ä¸ª v-enter-active ä»¥åŠ v-enter-toç±»ï¼Œv-enter-active ä¸ºå…ƒç´ å®šä¹‰è¿‡æ¸¡çŠ¶æ€ï¼Œåœ¨åŠ¨ç”»å®Œæˆä¹‹åè¢«ç§»é™¤ï¼Œ v-enter-to ç”¨ä»¥å®šä¹‰è¿‡æ¸¡ç»“æŸæ—¶çš„çŠ¶æ€ï¼Œä¹Ÿæ˜¯åœ¨åŠ¨ç”»å®Œæˆä¹‹åè¢«ç§»é™¤ã€‚ å¯¹äºç¦»åœºåŠ¨ç”»ä¹Ÿæ˜¯åŒç†ï¼Œåœ¨ç¦»åœºä¹‹å‰ä¼šæ·»åŠ ä¸€ä¸ª v-leave ç±»ï¼Œç”¨ä»¥å®šä¹‰åŠ¨ç”»çš„åˆå§‹çŠ¶æ€ï¼ŒåŠ¨ç”»å¼€å§‹åè¢«ç§»é™¤ï¼Œåœ¨ç¦»åœºçš„è¿‡ç¨‹ä¸­ä¼šæ·»åŠ  v-leave-active å’Œ v-leave-to ç±»ï¼Œåˆ†åˆ«ç”¨ä»¥åŠ¨ç”»çš„è¿‡æ¸¡çŠ¶æ€ä»¥åŠåŠ¨ç”»æœ€ç»ˆçŠ¶æ€ã€‚ .fade-enter, .fade-leave-to &#123; opacity: 0;&#125;.fade-enter-active, .fade-leave-active &#123; transition: opacity 0.5s;&#125;.fade-enter-to, .fade-leave &#123; opacity: 1;&#125; æ•ˆæœå¦‚ä¸‹ï¼š é™¤äº†å¯ä»¥ä½¿ç”¨ transition å±æ€§å®šä¹‰è¿‡æ¸¡çŠ¶æ€ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ animation åŠ¨ç”»ï¼Œä¾‹å¦‚ .bounce-in-enter-active&#123; animation: bounce-in 0.5s;&#125; .bounce-in-leave-active &#123; animation: bounce-in 0.5s reverse;&#125;@keyframes bounce-in &#123; 0% &#123; transform: scale(0); &#125; 50% &#123; transform: scale(1.5); &#125; 100% &#123; transform: scale(1); &#125;&#125; ä½¿ç”¨ CSS åŠ¨ç”»åº“æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å±æ€§è‡ªå®šä¹‰è¿‡æ¸¡ç±»åï¼š enter-class enter-active-class enter-to-class leave-class leave-active-class leave-to-class è¿™äº›ç±»çš„ä¼˜å…ˆçº§é«˜äºæ™®é€šçš„ç±»åï¼Œè¿™å¯¹äº Vue çš„è¿‡æ¸¡ç³»ç»Ÿå’Œå…¶ä»–ç¬¬ä¸‰æ–¹ CSS åŠ¨ç”»åº“ï¼Œå¦‚ Animate.css ç»“åˆä½¿ç”¨ååˆ†æœ‰ç”¨ &lt;link href=\"https://cdn.jsdelivr.net/npm/animate.css@3.5.1\" rel=\"stylesheet\" type=\"text/css\"&gt;&lt;div id=\"app\"&gt; &lt;transition name=\"bounce-in\" enter-active-class=\"animated tada\" leave-active-class=\"animated bounceOutRight\" &gt; &lt;p v-if=\"show\"&gt;Hello&lt;/p&gt; &lt;/transition&gt; &lt;p&gt;&lt;button @click=\"toggle\"&gt;toggle&lt;/button&gt;&lt;/p&gt;&lt;/div&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; new Vue(&#123; el: \"#app\", data() &#123; return &#123; show: true &#125; &#125;, methods: &#123; toggle() &#123; this.show = !this.show; &#125; &#125;, &#125;)&lt;/script&gt; ä½¿ç”¨ JS åŠ¨ç”»åº“Vue è¿‡æ¸¡ç³»ç»Ÿè¿˜æä¾›äº†ä¸€ç³»åˆ—çš„é’©å­å‡½æ•°ï¼š before-enterï¼šè¿›å…¥ä¹‹å‰ enterï¼šè¿›å…¥çš„æ—¶å€™ after-enterï¼šè¿›å…¥å®Œæˆ before-leaveï¼šç¦»å¼€ä¹‹å‰ leaveï¼šç¦»å¼€æ—¶ after-leaveï¼šç¦»å¼€ä¹‹å è¿™äº›é’©å­å‡½æ•°ä¼šåœ¨ç‰¹å®šçš„é˜¶æ®µè§¦å‘ï¼Œæˆ‘ä»¬å¯ä»¥é…åˆ JS åŠ¨ç”»åº“æ¥å®ç°åŠ¨ç”»æ•ˆæœ &lt;div id=\"app\"&gt; &lt;p&gt;&lt;button @click=\"toggle\"&gt;toggle&lt;/button&gt;&lt;/p&gt; &lt;transition v-on:before-enter=\"beforeEnter\" v-on:enter=\"enter\" v-on:leave=\"leave\" &gt; &lt;p v-if=\"show\"&gt;Hello&lt;/p&gt; &lt;/transition&gt;&lt;/div&gt;&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js\"&gt;&lt;/script&gt;&lt;script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"&gt;&lt;/script&gt;&lt;script&gt; const vm = new Vue(&#123; el: \"#app\", data() &#123; return &#123; show: true &#125; &#125;, methods: &#123; toggle() &#123; this.show = !this.show; &#125;, beforeEnter: function (el) &#123; el.style.opacity = 0 el.style.transformOrigin = 'left' &#125;, enter: function (el, done) &#123; Velocity(el, &#123; opacity: 1, fontSize: '1.4em' &#125;, &#123; duration: 300 &#125;) Velocity(el, &#123; fontSize: '1em' &#125;, &#123; complete: done &#125;) &#125;, leave: function (el, done) &#123; Velocity(el, &#123; translateX: '15px', rotateZ: '50deg' &#125;, &#123; duration: 600 &#125;) Velocity(el, &#123; rotateZ: '100deg' &#125;, &#123; loop: 2 &#125;) Velocity(el, &#123; rotateZ: '45deg', translateY: '30px', translateX: '30px', opacity: 0 &#125;, &#123; complete: done &#125;) &#125; &#125;, &#125;)&lt;/script&gt; å‚è€ƒæ–‡çŒ® Vueå®˜æ–¹æ–‡æ¡£","tags":[{"name":"Vue","slug":"Vue","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Vue/"},{"name":"æ¡†æ¶","slug":"æ¡†æ¶","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%A1%86%E6%9E%B6/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%8D%E7%AB%AF/"}]},{"title":"åˆå¹¶Kä¸ªå‡åºé“¾è¡¨","date":"2021-03-25T16:00:00.000Z","path":"/åˆå¹¶Kä¸ªå‡åºé“¾è¡¨/","text":"é¢˜ç›®æè¿°ç»™ä½ ä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨éƒ½å·²ç»æŒ‰å‡åºæ’åˆ—ã€‚è¯·ä½ å°†æ‰€æœ‰é“¾è¡¨åˆå¹¶åˆ°ä¸€ä¸ªå‡åºé“¾è¡¨ä¸­ï¼Œè¿”å›åˆå¹¶åçš„é“¾è¡¨ã€‚ è§£é¢˜æ€è·¯æˆ‘ä¸€å¼€å§‹çš„è§£é¢˜æ€è·¯å°±æ˜¯å°†ä¸¤ä¸ªé“¾è¡¨ä¸€ä¸€åˆå¹¶ï¼Œæ€è·¯å¦‚ä¸‹ï¼š list1 + list2 -&gt; list list3 + list -&gt; list list4 + list -&gt; list â€¦ æ‰€ä»¥ç¬¬ä¸€ç‰ˆçš„ä»£ç å¦‚ä¸‹ public ListNode mergeKLists(ListNode[] lists) &#123; ListNode root = null; if (lists.length == 0) &#123; return root; &#125; root = Arrays.stream(lists).reduce(null, this::mergeTwoList); return root;&#125;// åˆå¹¶ä¸¤ä¸ªé“¾è¡¨private ListNode mergeTwoList(ListNode l1, ListNode l2) &#123; if (l1 == null) &#123; return l2; &#125; if (l2 == null) &#123; return l1; &#125; ListNode p1 = l1; ListNode p2 = l2; ListNode dummyNode = new ListNode(0); ListNode cuerNode = dummyNode; while (p1 != null &amp;&amp; p2 != null) &#123; if (p1.val &lt;= p2.val) &#123; cuerNode.next = p1; cuerNode = cuerNode.next; p1 = p1.next; &#125; else &#123; cuerNode.next = p2; cuerNode = cuerNode.next; p2 = p2.next; &#125; &#125; if (p1 == null) &#123; cuerNode.next = p2; &#125; else &#123; cuerNode.next = p1; &#125; return dummyNode.next;&#125; ç„¶åä¸€æäº¤ï¼Œå‘ç°åªè¶…è¿‡äº† 24% çš„äºº è¯´æ˜è‚¯å®šæœ‰æ›´å¿«çš„ç®—æ³•ï¼Œæˆ‘ä¾¿å»æ‰¾é¢˜è§£ï¼Œåœ¨é¢˜è§£ä¸­å‘ç°å‘ç°ä½¿ç”¨åˆ†æ²»çš„æ€è·¯å¯ä»¥æ›´å¿«çš„å¾—åˆ°æ’åºå¥½çš„æ•°ç»„ã€‚ç”±äºè€å¼Ÿæˆ‘å½’å¹¶æ’åºå·²ç»å†™å¾—ç‚‰ç«çº¯é’äº†ï¼Œå¾ˆå¿«å¾—åˆ°äº†ç¬¬äºŒç‰ˆçš„ä»£ç  public ListNode mergeKLists(ListNode[] lists) &#123; if (lists.length == 0) &#123; return null; &#125; return mergeKLists(lists, 0 , lists.length - 1);&#125;private ListNode mergeKLists(ListNode[] lists, int left, int right) &#123; if (left == right) &#123; return lists[left]; &#125; ListNode leftList = null; ListNode rightList = null; int mid = left + (right - left) / 2; leftList = mergeKLists(lists, left, mid); rightList = mergeKLists(lists, mid + 1, right); return mergeTwoList(leftList, rightList);&#125;// åˆå¹¶ä¸¤ä¸ªé“¾è¡¨çš„ä»£ç åŒä¸Šï¼Œè¿™é‡Œä¾¿ä¸åˆ—å‡º å†æ¬¡æäº¤ å·²ç»æ‰“è´¥ 87% çš„äººäº†ï¼Œæ—¶é—´ä» 120ms é™åˆ°äº† 2msï¼Œå†æ¬¡æ„Ÿå—åˆ°äº†ç®—æ³•çš„é­…åŠ›ã€‚ åœ¨æœ€åæˆ‘ç¨å¾®åˆ†æå½’å¹¶çš„æ–¹æ³•ä¸ºä»€ä¹ˆæ¯”ä¸€ä¸ªä¸ªåˆå¹¶è¾ƒå¿«ï¼Œä»åˆå¹¶çš„æ¬¡æ•°çœ‹ï¼Œä¸€ä¸ªä¸ªåˆå¹¶éœ€è¦åˆå¹¶ $n - 1$ æ¬¡ï¼Œè€Œå½’å¹¶æ’åºéœ€è¦åˆå¹¶$$\\frac{n}{2} + \\frac{n}{4} + \\frac{n}{8} + \\dots + 1$$ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä¸å¦¨å‡è®¾ $n = 2^i$ï¼Œå³ $n$ ä¸º $2$ çš„æ•´æ•°æ¬¡å¹‚ï¼Œåˆ™ä¸Šæ¬¡å¯ä»¥æ”¹ä¸º$$\\sum_{i = 1}^{\\log_2 n} \\frac{n}{2^i} \\approx n - 1$$æ‰€ä»¥ä»åˆå¹¶çš„æ¬¡æ•°ä¸Šçœ‹ï¼Œå‡ ä¹æ˜¯ç›¸å½“çš„ã€‚ä½†æ˜¯æ³¨æ„åˆ°ä¸€ä¸€åˆå¹¶å¾—åˆ°çš„é“¾è¡¨è¶Šæ¥è¶Šé•¿$$\\sum_{i=1}^{\\log _{2} n} \\frac{n}{2^{i}} \\approx n-1$$ list + listi -&gt; list list + list(i + 1) -&gt; list â€¦ é“¾è¡¨ list è¶Šæ¥è¶Šé•¿ï¼Œåˆå¹¶éœ€è¦çš„æ—¶é—´å°±è¶Šå¤šã€‚ä½†æ˜¯å¯¹äºå½’å¹¶åˆå¹¶ï¼Œå®ƒå…ˆå°†é“¾è¡¨æ•°ç»„åˆ’åˆ†ä¸ºä¸¤ä¸ªä¸€ç»„ç„¶ååˆå¹¶ï¼Œè¿™ä¸¤ä¸ªä¸€ç»„çš„é“¾è¡¨éƒ½æ˜¯è¾ƒçŸ­çš„ï¼Œæ‰€éœ€åˆå¹¶çš„é€Ÿåº¦è¾ƒå¿«ã€‚æ‰€ä»¥è™½ç„¶ä»–ä»¬åˆå¹¶çš„æ¬¡æ•°ç›¸å·®ä¸å¤§ï¼Œä½†æ˜¯å½’å¹¶åˆå¹¶çš„é“¾è¡¨è¾ƒä¸€ä¸€åˆå¹¶çŸ­å¾ˆå¤šï¼Œæ‰€ä»¥ä¾¿ä¼šè¾ƒå¿«ã€‚ å‚è€ƒé“¾æ¥ åˆå¹¶Kä¸ªå‡åºé“¾è¡¨","tags":[{"name":"leetcode","slug":"leetcode","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/leetcode/"},{"name":"ç½—é©¬æ•°å­—","slug":"ç½—é©¬æ•°å­—","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97/"}]},{"title":"ä¸‰æ•°ä¹‹å’Œ","date":"2021-03-17T16:00:00.000Z","path":"/ä¸‰æ•°ä¹‹å’Œ/","text":"é¢˜ç›®æè¿°ç»™ä½ ä¸€ä¸ªåŒ…å« $n$ ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  $a$ï¼Œ$b$ï¼Œ$c$ ï¼Œä½¿å¾— $a + b + c = 0$ ã€‚è¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º $0$ ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚ æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚ è§£é¢˜æ€è·¯å¦‚æœåªæ˜¯å•çº¯çš„ä¸‰æ•°ä¹‹å’Œï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€é“å¾ˆç®€å•çš„é¢˜ï¼Œé¦–å…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œæ¥ç€å›ºå®šä¸€ä¸ªæ•°ï¼Œç„¶ååœ¨å‰©ä¸‹çš„æ•°ä¸­æŸ¥æ‰¾æœ‰æ— ä¸¤ä¸ªæ•°å­—ä¸è¿™ä¸ªå›ºå®šçš„æ•°å­—åŠ èµ·æ¥ä¸º $0$ï¼Œæœ‰åˆ™æ‰¾åˆ°ä¸€å¯¹ï¼Œä½¿ç”¨åŒæŒ‡é’ˆå³å¯ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¸¤æ•°ä¹‹å’Œã€‚ä½†æ˜¯é¢˜ç›®è¦æ±‚æ‰¾åˆ°æ‰€æœ‰çš„ä¸é‡å¤çš„ä¸‰å…ƒç»„ï¼Œè¿™å°±ä½¿å¾—é¢˜ç›®æœ‰ç‚¹ä¸ä¸€æ ·äº†ã€‚æ­£æ˜¯å› ä¸ºåœ¨è¿™é‡Œè€—è´¹äº†å¤§é‡çš„æ—¶é—´ï¼Œæˆ‘æ‰å†³å®šå°†æ­¤é¢˜è®°å½•ä¸‹æ¥ã€‚ ä¸€å¼€å§‹æˆ‘çš„æƒ³æ³•å°±æ˜¯å…ˆæ‰¾åˆ°æ‰€æœ‰çš„ä¸‰å…ƒç»„ï¼Œç„¶åå»é‡ã€‚æ‰¾åˆ°æ‰€æœ‰çš„ä¸‰å…ƒç»„å®¹æ˜“ï¼Œä½†æ˜¯å»é‡éš¾ï¼Œä¸€å¼€å§‹æˆ‘æƒ³ä½¿ç”¨ Set é›†åˆè¿›è¡Œå»é‡ã€‚ä½†æ˜¯å› ä¸ºæ¯ä¸€ä¸ªä¸‰å…ƒç»„éƒ½æ˜¯ä¸€ä¸ª List é›†åˆï¼Œå»é‡æ¯”è¾ƒçš„æ˜¯åœ°å€å€¼ï¼Œæ‰€ä»¥ç›´æ¥æ·»åŠ  List é›†åˆåˆ° Set é›†åˆä¸­æ˜¯æ— æ³•å»é‡ã€‚å› æ­¤æˆ‘äº§ç”Ÿäº†ä¸€ä¸ªå¤§èƒ†çš„æƒ³æ³•ï¼Œå› ä¸ºå®ƒæ¯”è¾ƒçš„æ˜¯åœ°å€å€¼ï¼Œæ‰€ä»¥æˆ‘æƒ³å†™ä¸€ä¸ªç±»ç»§æ‰¿ List ç±»ï¼Œç„¶åé‡å†™å®ƒçš„ hashCode ä¸ equals æ–¹æ³•(æˆ‘ä¸çŸ¥é“ Set æ˜¯ä¸æ˜¯é è¿™ä¸¤ä¸ªåˆ¤é‡çš„)ï¼Œä½†æ˜¯æœ€åè¿˜æ˜¯å¤±è´¥äº†ã€‚ åæ¥æˆ‘å°±å»çœ‹é¢˜è§£ï¼Œä½†æ˜¯å› ä¸ºé™·å…¥äº†ç‰›è§’å°–ï¼Œæ— æ³•ç†è§£ï¼Œè§‰å¾—äººå®¶è®²çš„ä¸å¯¹ï¼Œåæ¥æˆ‘å°±è¯•å›¾å¤ç°äººå®¶çš„ä»£ç ï¼Œå› ä¸ºä»£ç æ˜¯æ ¹æ®åˆ«äººçš„æ€è·¯ï¼Œä½†æ˜¯æŒ‰ç…§è‡ªå·±çš„ç†è§£å†™çš„ï¼Œæ‰€ä»¥å†™çš„ä¸å¯¹ï¼Œé€šè¿‡å¯¹æ¯”äººå®¶çš„ä»£ç ï¼Œå‘ç°æœ‰ä¸€ä¸ªåœ°æ–¹å†™é”™äº†ï¼Œè¿™ä¸ªåœ°æ–¹æ­£æ˜¯æˆ‘é™·å…¥è¯¯åŒºçš„åœ°æ–¹ï¼Œæ‰€ä»¥é€šè¿‡çº æ­£æˆ‘å°±æ˜ç™½åˆ«äººçš„ç®—æ³•ï¼Œä¹Ÿå°±æ˜ç™½äº†å¦‚ä½•å»é‡ã€‚ ç®—æ³•å»é‡çš„æ ¸å¿ƒå°±æ˜¯å¦‚æœå½“å‰å›ºå®šçš„æ•°ä¸ä¸Šä¸€ä¸ªæ•°ç›¸åŒï¼Œé‚£ä¹ˆå°±è·³è¿‡è¿™ä¸ªæ•°ã€‚æˆ‘ä¸€å¼€å§‹ä¸ç†è§£çš„åŸå› æœ‰ä¸¤ä¸ªï¼š æ²¡æœ‰æ„è¯†åˆ°é¢˜ç›®è¦æ±‚æ‰€æœ‰çš„ä¸‰å…ƒç»„ï¼Œè€Œæˆ‘ä¹‹å‰çš„ç®—æ³•è¿˜æ˜¯ä¸¤æ•°ä¹‹å’Œçš„é€»è¾‘ï¼Œæ‰¾åˆ°ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ä¸‰å…ƒç»„åˆ™ç»“æŸï¼Œè¿™å°±å¯¼è‡´æˆ‘æ²¡æœ‰æ„è¯†åˆ°æ¯ä¸€æ¬¡éƒ½ä¼šæ‰¾åˆ°æ‰€æœ‰ä¸å›ºå®šæ•°æœ‰å…³çš„æ‰€æœ‰ä¸‰å…ƒç»„ï¼Œè¿™å°±æ„å‘³ç€ä¸‹é¢é‚£ä¸ªæ•°å¦‚æœä¸å®ƒä¹‹å‰çš„æ•°ç›¸åŒçš„è¯ï¼Œå®ƒå°±æ²¡æœ‰æŸ¥æ‰¾çš„å¿…è¦ï¼Œå¦åˆ™å°±ä¼šé‡å¤ã€‚ å¦ä¸€ä¸ªåŸå› å°±æ˜¯æˆ‘çœ‹æˆäº†å¦‚æœä¸‹ä¸€ä¸ªæ•°ä¸å½“å‰æ•°ç›¸åŒï¼Œåˆ™è·³è¿‡å½“å‰æ•°ï¼Œç›´æ¥æ¥åˆ°ä¸‹ä¸€ä¸ªæ•°ï¼Œè¿™ä¸ªç®—æ³•è‚¯å®šæ˜¯é”™çš„ï¼Œæ€ªè‡ªå·±æ²¡æœ‰çœ‹æ¸… å¦ä¸€ä¸ªæœ‰å¯èƒ½é‡å¤çš„æƒ…å†µï¼Œå…ˆä¸¾ä¸ªä¾‹å­ï¼Œç»™å®šæ•°ç»„ [-1, 0, 0, 1, 1 ]ï¼Œé¦–å…ˆå›ºå®šæ•° -1 æ­¤æ—¶æˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªä¸‰å…ƒç»„ [-1, 0, 1] ä½¿å¾—ä¸‰æ•°ä¹‹å’Œä¸º $0$ï¼Œä½†æ˜¯å› ä¸ºè¦æ‰¾åˆ°æ‰€æœ‰çš„ä¸‰å…ƒç»„ï¼Œæ‰€ä»¥è¦ç»§ç»­å¯»æ‰¾ è¿™æ—¶æˆ‘ä»¬å‘ç°åˆæ‰¾åˆ°ä¸€ä¸ªä¸‰å…ƒç»„ [-1, 0, 1]ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™ä¸ªä¸‰å…ƒç»„ä¸ä¹‹å‰é‚£ä¸ªä¸‰å…ƒç»„é‡å¤äº†ï¼Œå…¶é‡å¤çš„åŸå› å°±æ˜¯ nums[start] == nums[start + 1] || nums[end] == nums[end - 1]ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦é‡åˆ°ä¸Šè¿°æƒ…å†µç›´æ¥è·³è¿‡å½“å‰æ•°ï¼Œä¾‹å¦‚å½“ nums[start] == nums[start + 1] çš„æ—¶å€™ï¼Œç›´æ¥ start++ã€‚ class Solution &#123; public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums) &#123; List&lt;List&lt;Integer&gt;&gt; results = new ArrayList&lt;&gt;(); if (nums.length &lt; 3) &#123; return results; &#125; // é¦–å…ˆè¿›è¡Œæ’åº Arrays.sort(nums); for (int i = 0; i &lt; nums.length; i++) &#123; int target = nums[i]; // å› ä¸ºæ˜¯å‡åºï¼Œå¦‚æœå½“å‰çš„æ•° &gt; 0ï¼Œè¯´æ˜åé¢çš„æ•°å…¨å¤§äº 0ï¼Œä¸å¯èƒ½åŠ èµ·æ¥ä¸º 0 if (target &gt; 0) &#123; break; &#125; // ä¸è¶³ä¸‰ä¸ªæ•°ï¼Œbreak if (i + 2 &gt;= nums.length) &#123; break; &#125; // å¦‚æœå½“å‰æ•°ä¸å‰ä¸€ä¸ªæ•°ç›¸åŒï¼Œé˜²æ­¢é‡å¤ï¼Œè·³è¿‡ if (i &gt; 0 &amp;&amp; nums[i - 1] == nums[i]) continue; int start = i + 1; int end = nums.length - 1; while (start &lt; end) &#123; if (nums[start] + nums[end] + target == 0) &#123; List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); res.add(target); res.add(nums[start]); res.add(nums[end]); results.add(res); // é˜²æ­¢é‡å¤ while (start &lt; end &amp;&amp; nums[start] == nums[start + 1]) start++; while (start &lt; end &amp;&amp; nums[end] == nums[end - 1]) end--; start++; end--; &#125; else if (nums[start] + nums[end] + target &lt; 0) &#123; start++; &#125; else &#123; end--; &#125; &#125; &#125; return results; &#125;&#125; å‚è€ƒé“¾æ¥ ä¸‰æ•°ä¹‹å’Œ","tags":[{"name":"leetcode","slug":"leetcode","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/leetcode/"}]},{"title":"ç½—é©¬æ•°å­—ä¸æ•°å­—çš„è½¬æ¢","date":"2021-03-16T10:00:00.000Z","path":"/ç½—é©¬æ•°å­—ä¸æ•°å­—çš„è½¬æ¢/","text":"ç½—é©¬æ•°å­—è½¬æ•°å­—é¢˜ç›®æè¿°ç½—é©¬æ•°åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦ å­—ç¬¦ æ•°å€¼ I 1 V 5 X 10 L 50 C 100 D 500 M 1000 ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš XXVII, å³ä¸º XX + V + II ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š I å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚ X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚ C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚ ç»™å®šä¸€ä¸ªæ•´æ•°ï¼Œå°†å…¶è½¬ä¸ºç½—é©¬æ•°å­—ï¼Œè¾“å…¥ç¡®ä¿åœ¨ 1 åˆ° 3999 çš„èŒƒå›´å†…ã€‚ è§£é¢˜æ€è·¯å°†ç½—é©¬æ•°å­—åœ¨æ¯ä¸ªä½ç½®çš„æ‰€æœ‰å¯èƒ½çš„å–å€¼åˆ—å‡ºï¼Œä¾‹å¦‚å¯¹äºä¸ªä½æœ‰å¦‚ä¸‹æƒ…å†µ \"\", \"I\", \"II\", \"III\", \"IV\", \"V\", \"VI\", \"VII\", \"VIII\", \"IX\" ä»¥ä¸Šå­—ç¬¦åˆ†åˆ«å¯¹åº” 0-9ï¼Œç„¶åå–å‡ºä¸ªä½çš„æ•°å­—ï¼Œæ ¹æ®æ•°å­—çš„å¤§å°é€‰æ‹©å¯¹åº”çš„å­—ç¬¦ï¼Œæ¥ç€å–å‡ºåä½ä¸Šçš„æ•°å­—ï¼Œæ‰¾åˆ°å¯¹åº”çš„å­—ç¬¦ï¼Œä»¥æ­¤ç±»æ¨ import java.util.Stack;public class Solution &#123; public String intToRoman(int num) &#123; // åˆ—å‡ºæ¯ä¸ªä½ç½®çš„æ‰€æœ‰æƒ…å†µ String[][] maps = new String[4][]; maps[0] = new String[]&#123;\"\", \"I\", \"II\", \"III\", \"IV\", \"V\", \"VI\", \"VII\", \"VIII\", \"IX\"&#125;; maps[1] = new String[]&#123;\"\", \"X\", \"XX\", \"XXX\", \"XL\", \"L\", \"LX\", \"LXX\", \"LXXX\", \"XC\"&#125;; maps[2] = new String[]&#123;\"\", \"C\", \"CC\", \"CCC\", \"CD\", \"D\", \"DC\", \"DCC\", \"DCCC\", \"CM\"&#125;; // é¢˜ç›®è§„å®šæ•°å­—èŒƒå›´åœ¨ 1-3999ï¼Œæ‰€ä»¥è¿™é‡Œåˆ—åˆ° 3000 å³å¯ maps[3] = new String[]&#123;\"\", \"M\", \"MM\", \"MMM\"&#125;; StringBuilder stringBuilder = new StringBuilder(); Stack&lt;String&gt; stack = new Stack(); // ä¾æ¬¡å–å‡ºä¸ªä½ï¼Œåä½ ... int index = 0; while (num != 0) &#123; int n = num % 10; num /= 10; stack.push(maps[index][n]); index++; &#125; while (!stack.isEmpty()) &#123; stringBuilder.append(stack.pop()); &#125; return stringBuilder.toString(); &#125;&#125; å¦ä¸€ç§æ€è·¯æ˜¯è´ªå¿ƒæ³•ï¼Œæƒ³æƒ³æˆ‘ä»¬æ˜¯æ€ä¹ˆæ‰¾é›¶é’±çš„ï¼Œæ¯æ¬¡éƒ½æ‰¾é¢å€¼æœ€å¤§çš„ï¼Œæˆ‘ä»¬æ‰¾ 154 å…ƒï¼Œæˆ‘ä»¬é¦–å…ˆæ‰¾é¢å€¼æœ€å¤§çš„ 100 å—ï¼Œç„¶åå‰© 54ï¼Œæ¥ç€æ‰¾é¢å€¼æœ€å¤§çš„ 50ï¼Œå‰© 4 å…ƒï¼Œæ‰¾ 4 ä¸ªç¡¬å¸ã€‚ å¦‚æœæˆ‘ä»¬æŠŠè¦è½¬åŒ–çš„æ•°å­—çœ‹åšæ˜¯è¦æ‰¾çš„é›¶é’±ï¼Œç½—é©¬æ•°å­—å°±æ˜¯å¯¹åº”çš„é’ç¥¨ï¼Œæˆ‘ä»¬æŠŠç½—é©¬æ•°å­—å¯¹åº”çš„é’ç¥¨æœ‰å¤šç§æƒ…å†µåˆ—å‡ºæ¥ï¼Œç„¶åæŒ‰ç…§æ‰¾é›¶é’±çš„è§„åˆ™æ‰¾é’±å³å¯ import java.util.Stack;public class Solution &#123; public String intToRoman(int num) &#123; // ç½—é©¬\"é’ç¥¨\"çš„é¢å€¼å¤§å°ä¾æ¬¡æ’åˆ— int[] nums = &#123;1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1&#125;; String[] roma = &#123;\"M\", \"CM\", \"D\", \"CD\", \"C\", \"XC\", \"L\", \"XL\", \"X\", \"IX\", \"V\", \"IV\", \"I\"&#125;; int index = 0; StringBuilder stringBuilder = new StringBuilder(); while (num != 0) &#123; // ä½¿ç”¨ç›®å‰æœ€å¤§çš„é¢å€¼ if (num &gt;= nums[index]) &#123; stringBuilder.append(roma[index]); num -= nums[index]; continue; &#125; index++; &#125; return stringBuilder.toString(); &#125;&#125; æ•°å­—è½¬ç½—é©¬æ•°å­—é¢˜ç›®æè¿°ç½—é©¬æ•°å­—ä¸æ•°å­—çš„è½¬æ¢è§„åˆ™å¦‚ä¸Šé¢˜ä»‹ç»ï¼Œè¿™é“é¢˜çš„è¦æ±‚æ˜¯å°†ç½—é©¬æ•°å­—è½¬åŒ–ä¸ºæ•°å­—ã€‚ è§£é¢˜æ€è·¯å¦‚æœè¿˜æ˜¯å°†ç½—é©¬æ•°å­—çœ‹åšé’ç¥¨ï¼Œå°†å…¶è½¬åŒ–ä¸ºæ•°å­—çš„è¿‡ç¨‹ï¼Œä¸å°±æ˜¯ç›¸å½“äºæ•°é’±å—ï¼å°†é’ç¥¨è½¬åŒ–ä¸ºå¯¹åº”çš„æ•°å€¼ï¼Œç„¶ååŠ èµ·æ¥å³å¯ public class Solution &#123; public int romanToInt(String s) &#123; // ä¸ºäº†å¤„ç†æ–¹ä¾¿ï¼Œå°†ä¸¤ä½çš„ç½—é©¬æ•°å­—è½¬ä¸ºä¸€ä½çš„å­—ç¬¦ s = s.replace(\"IV\", \"a\"); s = s.replace(\"IX\", \"b\"); s = s.replace(\"XL\", \"c\"); s = s.replace(\"XC\", \"d\"); s = s.replace(\"CD\", \"e\"); s = s.replace(\"CM\", \"f\"); int sum = 0; // å°†ç½—é©¬æ•°å­—å¯¹åº”çš„æ•°å€¼åŠ èµ·æ¥å³å¯ for (char c: s.toCharArray()) &#123; sum += romaToNum(c); &#125; return sum; &#125; // ç½—é©¬æ•°å­—å¯¹åº”çš„æ•°å€¼ private int romaToNum(char c) &#123; switch (c) &#123; case 'I' : return 1; case 'V': return 5; case 'X': return 10; case 'L': return 50; case 'C': return 100; case 'D': return 500; case 'M': return 1000; case 'a': return 4; case 'b': return 9; case 'c': return 40; case 'd': return 90; case 'e': return 400; case 'f': return 900; default: return 0; &#125; &#125;&#125; è¿˜æœ‰ä¸€ç§ç¼–ç¨‹çš„æ€è·¯ï¼Œä¸ä¸Šé¢çš„è´ªå¿ƒæ³•ä¸€æ ·ï¼Œç›´æ¥æ£€æŸ¥æœ€å¤§çš„é’ç¥¨ï¼Œç„¶åä¸€ç›´åŠ èµ·æ¥ public class Solution &#123; public int romanToInt(String s) &#123; int[] nums = &#123;1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1&#125;; String[] roma = &#123;\"M\", \"CM\", \"D\", \"CD\", \"C\", \"XC\", \"L\", \"XL\", \"X\", \"IX\", \"V\", \"IV\", \"I\"&#125;; int index = 0; int sum = 0; while (!\"\".equals(s)) &#123; // ä¾æ¬¡æŸ¥æ‰¾å¼€å¤´çš„æœ€å¤§é’ç¥¨ï¼Œç„¶ååŠ èµ·æ¥ if (s.startsWith(roma[index])) &#123; sum += nums[index]; s = s.substring(roma[index].length()); continue; &#125; index++; &#125; return sum; &#125;&#125; å‚è€ƒæ–‡çŒ® æ•´æ•°è½¬ç½—é©¬æ•°å­— ç½—é©¬æ•°å­—è½¬æ•´æ•°","tags":[{"name":"leetcode","slug":"leetcode","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/leetcode/"},{"name":"ç½—é©¬æ•°å­—","slug":"ç½—é©¬æ•°å­—","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97/"}]},{"title":"Node.jsä¹‹Koa","date":"2021-03-15T16:00:00.000Z","path":"/Node.jsä¹‹Koa/","text":"Koa æ˜¯å·ç§°æ˜¯ Node.js çš„ä¸‹ä¸€ä»£ Web å¼€å‘æ¡†æ¶ï¼Œå®ƒæ˜¯åŸ Express å›¢é˜Ÿè®¾è®¡çš„æ–°çš„ Web å¼€å‘æ¡†æ¶ï¼Œä¸åƒ Express ä½¿ç”¨å›è°ƒå‡½æ•°çš„å¼€å‘æ–¹å¼ï¼Œåœ¨ Koa ä¸­ä½¿ç”¨ asnyc å‡½æ•°ï¼Œä½¿ç”¨åŒæ­¥çš„å†™æ³•å†™å‡ºå¼‚æ­¥çš„ä»£ç ï¼Œè®©å¼€å‘æœ‰æ›´å¥½çš„å¼€å‘ä½“éªŒã€‚ å…¥é—¨æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ Koa å»ºç«‹ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨ï¼Œå‘å‰ç«¯è¿”å› Hello World!ã€‚é¦–å…ˆä¸‹è½½ koa npm install koa --save æ¥ç€åœ¨æ–‡ä»¶ä¸­å¯¼å…¥ koa ä½¿ç”¨å³å¯ const Koa = require('koa');const app = new Koa();app.use(async ctx =&gt; &#123; ctx.body = \"Hello World!\";&#125;);app.listen(3000); ä¸Šè¿°ä»£ç æˆ‘ä»¬å¼•å…¥äº† Koaï¼Œæ¥ç€ä½¿ç”¨ new Koa() åˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œå¹¶ä¸”ç›‘å¬äº† 3000 ç«¯å£ã€‚å½“æœ‰è¯·æ±‚åˆ°æ¥æ—¶ï¼Œæˆ‘ä»¬ä¼šç›´æ¥è¿”å› Hello World!ã€‚ä¸‹é¢ä½¿ç”¨ Postman å‘å‡ºä¸€ä¸ª GET è¯·æ±‚ï¼Œå“åº”å¦‚ä¸‹ ä¸­é—´ä»¶æ´‹è‘±æ¨¡å‹å½“è¯·æ±‚åˆ°æ¥æ—¶ï¼Œéœ€è¦ç»è¿‡ä¸€ç³»åˆ—çš„å¤„ç†å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œç„¶åæ‰ä¼šå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œä¸­é—´ç»è¿‡çš„å¤„ç†å‡½æ•°ï¼Œæˆ‘ä»¬å°±ç§°ä¸ºä¸­é—´ä»¶ã€‚è¿™äº›ä¸­é—´ä»¶å¯ä»¥æˆ‘ä»¬æ·»åŠ å¾ˆå¤šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚è§£æè¯·æ±‚å‚æ•°ï¼Œç®¡ç†é™æ€èµ„æºæ–‡ä»¶ï¼Œå¤„ç† cookie ç­‰ç­‰ï¼Œè¿™äº›åŠŸèƒ½æˆ‘ä»¬éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªä¸­é—´ä»¶ã€‚ ä¸Šè¿°æˆ‘ä»¬è¯´ä¸­é—´ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š ctxï¼šä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒåŒ…å«è¯·æ±‚ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒå†™å“åº”ä¿¡æ¯ nextï¼šä¸‹ä¸€ä¸ªä¸­é—´ä»¶ æˆ‘ä»¬é€šè¿‡ä¸‹é¢è¿™å¼ å›¾æ¥çœ‹ä¸­é—´ä»¶çš„æ‰§è¡Œè¿‡ç¨‹(æ´‹è‘±æ¨¡å‹) å½“è¯·æ±‚åˆ°æ¥æ—¶ï¼Œé¦–å…ˆä¼šç»è¿‡æˆ‘ä»¬æ·»åŠ çš„ä¸­é—´ä»¶ï¼Œå½“æˆ‘ä»¬åœ¨ä¸­é—´ä»¶æ—¶è°ƒç”¨ next æ–¹æ³•æ—¶ï¼Œä¾¿ä¼šæ¥åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œç›´åˆ°æŸä¸ªä¸­é—´ä»¶æ²¡æœ‰è°ƒç”¨ next æ–¹æ³•ä¾¿æ‰§è¡Œå®Œæ¯•ï¼Œæ¥ç€ä¾¿ä¼šå›åˆ°ä¸Šä¸€ä¸ªä¸­é—´ä»¶è°ƒç”¨ next å¤„çš„åœ°æ–¹ï¼Œæ‰§è¡Œä¹‹åçš„ä»£ç ã€‚ å½“ç»è¿‡ä¸­é—´ä»¶å¤„ç†è¿‡åï¼Œä¸€èˆ¬ä¸­é—´ä»¶ä¼šå¯¹ä¸Šä¸‹æ–‡ ctx è¿›è¡Œè®¾ç½®ï¼Œæˆ‘ä»¬ä¾¿æ ¹æ®å¯¹ ctx çš„è®¾ç½®ï¼Œäº§ç”Ÿç›¸åº”çš„å“åº”ç»™å‰ç«¯ã€‚ const Koa = require('koa');const app = new Koa();// ä¸­é—´ä»¶ 1const middleware1 = async (ctx, next) =&gt; &#123; console.log(\"ä¸­é—´ä»¶ 1 before\"); await next(); console.log(\"ä¸­é—´ä»¶ 1 after\");&#125;;// ä¸­é—´ä»¶ 2const middleware2 = async (ctx, next) =&gt; &#123; console.log(\"ä¸­é—´ä»¶ 2 before\"); await next(); console.log(\"ä¸­é—´ä»¶ 2 after\")&#125;;// ä¸­é—´ä»¶ 3const middleware3 = async ctx =&gt; &#123; console.log(\"ä¸­é—´ä»¶ 3\"); ctx.body = \"Hello World!\";&#125;;// é€šè¿‡ use æ–¹æ³•ä¸ºåº”ç”¨æ·»åŠ ä¸­é—´ä»¶app.use(middleware1);app.use(middleware2);app.use(middleware3);app.listen(3000); ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨ use æ–¹æ³•æ·»åŠ äº†ä¸‰ä¸ªä¸­é—´ä»¶ï¼Œæ ¹æ®ä¸Šé¢çš„æ¨¡å‹ï¼Œä¸éš¾å¾—å‡ºæ§åˆ¶å°çš„æ‰“å°ç»“æœä¸º ä¸­é—´ä»¶ 1 beforeä¸­é—´ä»¶ 2 beforeä¸­é—´ä»¶3ä¸­é—´ä»¶ 2 afterä¸­é—´ä»¶ 1 after æˆ‘ä»¬åœ¨ ä¸­é—´ä»¶ 3 ä¸­è®¾ç½®äº† ctx.body ä¸º Hello Worldï¼ŒKoa ä¾¿ä¼šæ ¹æ®æ­¤ä¿¡æ¯å‘å‰ç«¯å‘é€ Hello World!ã€‚ ç®€æ˜“å®ç°ä¸ºäº†åŠ æ·±å¯¹ä¸­é—´ä»¶æ‰§è¡Œçš„ç†è§£ï¼Œè¿™é‡Œç»™å‡ºç®€æ˜“ç‰ˆçš„ä¸­é—´ä»¶çš„å®ç° const http = require('http');class Koa &#123; constructor() &#123; this.middleware = [] &#125; // æ·»åŠ ä¸­é—´ä»¶ use(fn) &#123; this.middleware.push(fn); &#125; // æ ¹æ® req å’Œ res åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡ createContext(req, res) &#123; const context = &#123;&#125;; context.req = req; context.res = res; return context; &#125; // ä¸²è”æ‰€æœ‰çš„ä¸­é—´ä»¶ compose(middleware) &#123; return function (ctx) &#123; function dispatch(i) &#123; let fn = middleware[i]; if (!fn) &#123; return Promise.resolve(); &#125; return Promise.resolve(fn(ctx, dispatch.bind(null, i + 1))); &#125; return dispatch(0); &#125; &#125; // æ•´ä½“çš„æ‰§è¡Œæµç¨‹ callback() &#123; // ä¸²è”ä¸­é—´ä»¶ï¼Œå½“æ‰§è¡Œè¿”å›çš„å‡½æ•°æ—¶ï¼Œä¼šä»¥æ´‹è‘±æ¨¡å‹å½¢å¼æ‰§è¡Œä¸­é—´ä»¶ let fn = this.compose(this.middleware); // å¤„ç†è¯·æ±‚ï¼Œç”Ÿæˆä¸Šä¸‹æ–‡ --&gt; æ‰§è¡Œä¸­é—´ä»¶ --&gt; äº§ç”Ÿå“åº” const handleRequest = (req, res) =&gt; &#123; const ctx = this.createContext(req, res); return this.handleRequest(ctx, fn); &#125;; return handleRequest; &#125; // ç›‘å¬ç«¯å£æ—¶åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ listen(...args) &#123; const server = http.createServer(this.callback()); return server.listen(...args); &#125; // å¦‚ä½•å¤„ç†è¯·æ±‚ handleRequest(ctx, fnMiddleware) &#123; res.statusCode = 404; const handleResponse = () =&gt; this.respond(ctx); // æ‰§è¡Œä¸­é—´ä»¶ --&gt; äº§ç”Ÿå“åº” return fnMiddleware(ctx).then(handleResponse); &#125; // æ ¹æ®ä¸Šä¸‹æ–‡äº§ç”Ÿå“åº” respond(ctx) &#123; const res = ctx.res; res.setHeader(\"Context-Type\", \"text/plain\"); res.end(ctx.body); &#125;&#125;module.exports = Koa; ä¸Šè¿°ä»£ç çš„æ‰§è¡Œæµç¨‹æ˜¯ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ listen æ–¹æ³•ç›‘å¬ç«¯å£æ—¶ï¼Œä¼šåˆ©ç”¨ Node å†…ç½®çš„ http æ¨¡å—åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶å°† this.callback è¿”å›çš„å‡½æ•°ä½œä¸ºå¤„ç†å‡½æ•° listen(...args) &#123; const server = http.createServer(this.callback()); return server.listen(...args);&#125;callback() &#123; let fn = this.compose(this.middleware); const handleRequest = (req, res) =&gt; &#123; const ctx = this.createContext(req, res); return this.handleRequest(ctx, fn); &#125;; return handleRequest;&#125; åœ¨ this.callback å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè°ƒç”¨äº† compose æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥å°†é€šè¿‡ use æ–¹æ³•æ·»åŠ çš„ä¸­é—´ä»¶å»ºæ¨¡ä¸ºæ´‹è‘±æ¨¡å‹ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•° fnï¼Œå½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¾¿ä¼šä»¥æ´‹è‘±æ¨¡å‹æ‰§è¡Œæ‰€æœ‰çš„ä¸­é—´ä»¶ã€‚ compose(middleware) &#123; return function (ctx) &#123; function dispatch(i) &#123; let fn = middleware[i]; if (!fn) &#123; return Promise.resolve(); &#125; return Promise.resolve(fn(ctx, dispatch.bind(null, i + 1))); &#125; return dispatch(0); &#125;&#125; åœ¨ this.callback è¿”å›å¤„ç†è¯·æ±‚çš„å‡½æ•°ä¸­ï¼Œé¦–å…ˆæ ¹æ® req å’Œ res åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡ // æ¼”ç¤ºä»£ç ï¼Œåªæ˜¯å°† reqï¼Œres æŒ‚è½½åœ¨ ctx ä¸Šé¢createContext(req, res) &#123; const context = &#123;&#125;; context.req = req; context.res = res; return context;&#125; æ¥ç€ä¾¿å°†ä¸Šä¸‹æ–‡å¯¹è±¡ ctx ä¼ é€’ç»™ fn ä¸­é—´ä»¶è¿›è¡Œå¤„ç†ï¼Œ handleRequest(ctx, fnMiddleware) &#123; res.statusCode = 404; const handleResponse = () =&gt; this.respond(ctx); return fnMiddleware(ctx).then(handleResponse);&#125; ä¸­é—´ä»¶å¤„ç†å®Œæˆä¹‹åï¼Œä¾¿æ ¹æ®ä¸Šä¸‹æ–‡å¯¹è±¡ä½œå‡ºå“åº”(è¿™é‡Œä¸ºäº†æ¼”ç¤ºï¼Œåªæ˜¯å°† ctx.body çš„å†…å®¹ç›´æ¥è¿”å›) respond(ctx) &#123; const res = ctx.res; res.setHeader(\"Context-Type\", \"text/plain\"); // ç›´æ¥å°† ctx.body çš„å†…å®¹è¿”å› res.end(ctx.body);&#125; ä¸Šè¿°ä»£ç åªæ˜¯ä¸ºäº†æ¼”ç¤º Koa æ•´ä½“çš„æ‰§è¡Œæµç¨‹ä»¥åŠä¸­é—´ä»¶æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Œåœ¨å®ç°çš„è¿‡ç¨‹ä¸­å¿½ç•¥äº†é”™è¯¯çš„å¤„ç†ï¼Œä¸Šè¿°äº§ç”Ÿä¸Šä¸‹æ–‡çš„ä»£ç ä»¥åŠæ ¹æ®ä¸Šä¸‹æ–‡å¯¹è±¡äº§ç”Ÿå“åº”çš„ä»£ç åªæ˜¯ä¸ºäº†æ¼”ç¤ºã€‚ ContextKoa Context å°è£…äº† Node çš„ request å’Œ response å¯¹è±¡ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Contextï¼Œå¹¶å°†æ­¤ Context ä¼ é€’ç»™ä¸­é—´ä»¶è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚ const Koa = require('koa');const app = new Koa();// å°† Context ä¼ é€’ç»™ä¸­é—´ä»¶è¿›è¡Œå¤„ç†app.use(async ctx =&gt; &#123; ctx.body = \"Hello World!\"; console.log(ctx);&#125;);app.listen(3000); ä¸‹é¢ä»‹ç» Context çš„ APIã€‚ ctx.reqï¼šNode åŸç”Ÿçš„ Request å¯¹è±¡ ctx.resï¼šNode åŸç”Ÿçš„ Response å¯¹è±¡ ctx.requestï¼šKoa çš„ Request å¯¹è±¡ ctx.responseï¼šKoa çš„ Response å¯¹è±¡ è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ ctx.res ç›´æ¥è¿”å›ç»“æœï¼Œä½†æ˜¯è¿™ç§ç»•è¿‡ Koa çš„ response å¯¹è±¡çš„è¡Œä¸ºï¼Œä¼šç ´å Koa çš„æ•´ä½“æµç¨‹ï¼Œæ‰€ä»¥ä¸æ¨èä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å’Œå±æ€§ res.statusCode res.write() res.end() res.writeHead() å…¶å® ctx ä¸Šå¾ˆå¤šçš„å±æ€§éƒ½æ˜¯ ctx.request ä¸ ctx.response çš„ä»£ç† ctx.header ï¼š ctx.request.header ctx.method ï¼š ctx.request.method ctx.body ï¼šctx.response.body ctx.type ï¼šctx.response.type â€¦ Requestä»¥ä¸‹ä»‹ç»çš„å±æ€§å’Œæ–¹æ³•éƒ½å±äº ctx.requestã€‚ headerã€headersã€geté€šè¿‡ header è·å¾—æ‰€æœ‰çš„è¯·æ±‚å¤´(ä¹Ÿå¯ä»¥é€šè¿‡ ctx.header è·å¾—) const Koa = require('koa');const app = new Koa();app.use(async ctx =&gt; &#123; // å°†è¯·æ±‚å¤´è¿”å› ctx.body = ctx.header;&#125;);app.listen(3000); headers æ˜¯ header çš„åˆ«åï¼ŒäºŒè€…çš„å€¼æ˜¯ä¸€æ ·çš„(header === headers)ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ ctx.headers è®¿é—®ã€‚ é€šè¿‡ get() æ–¹æ³•å¯ä»¥è·å¾—æŸä¸€ä¸ªè¯·æ±‚å¤´çš„ä¿¡æ¯ app.use(async ctx =&gt; &#123; console.log(ctx.get(\"Host\")); // localhost:3000&#125;); methodã€urlé€šè¿‡ method ä¸ url å¯ä»¥çŸ¥é“è¯·æ±‚æ–¹æ³•ä»¥åŠè¯·æ±‚è·¯å¾„ï¼Œè¿™ä¸ªä¸¤ä¸ªå±æ€§ä¹Ÿå¯ä»¥é€šè¿‡ ctx.xxx ç›´æ¥è®¿é—® app.use(async ctx =&gt; &#123; ctx.body = &#123; method: ctx.method, url: ctx.url &#125;;&#125;); originã€protocolã€hosté€šè¿‡ origin å¯ä»¥è·å¾—åè®® (protocol) å’Œä¸»æœº (host) å app.use(async ctx =&gt; &#123; ctx.body = &#123; origin: ctx.origin &#125;;&#125;); åè®®ä»¥åŠä¸»æœºåç§°å¯ä»¥ç›´æ¥é€šè¿‡ protocol ä¸ host å±æ€§è·å¾— app.use(async ctx =&gt; &#123; ctx.body = &#123; protocol: ctx.protocol, host: ctx.host &#125;;&#125;); hrefè·å¾—å…¨éƒ¨çš„è¯·æ±‚è·¯å¾„ï¼ŒåŒ…æ‹¬åè®®ã€ä¸»æœºå’Œ urlï¼Œç›¸å½“äº origin + url app.use(async ctx =&gt; &#123; ctx.body = &#123; origin: ctx.origin, url: ctx.url, href: ctx.href &#125;;&#125;); pathã€querystringã€searché€šè¿‡ path å¯ä»¥è·å¾—è¯·æ±‚è·¯å¾„ï¼Œå³ url ä¸­ ? ä¹‹å‰çš„å†…å®¹ï¼Œè€Œ querystring ä¸­ä¿å­˜çš„æ˜¯ ? ä¹‹åçš„å†…å®¹(ä¸åŒ…æ‹¬ ?)ï¼Œä¸ querystring åŠå…¶ç›¸ä¼¼çš„ä¸€ä¸ªå±æ€§æ˜¯ searchï¼Œå®ƒä¿å­˜çš„ä¹Ÿæ˜¯ ? ä¹‹åçš„å†…å®¹ï¼Œä¸è¿‡æ˜¯åŒ…æ‹¬ ? app.use(async ctx =&gt; &#123; ctx.body = &#123; path: ctx.path, querystring: ctx.querystring, search: ctx.search &#125;;&#125;); Responseä»¥ä¸‹å±æ€§éƒ½æ˜¯ ctx.response çš„å±æ€§ï¼Œå¦‚æœåœ¨ä»£ç ä¸­ç›´æ¥é€šè¿‡ ctx è®¿é—®å¦‚ä¸‹å±æ€§ï¼Œè¯´æ˜ ctx å¯¹è¿™äº›å±æ€§åšäº†ä»£ç†ã€‚ bodyé€šè¿‡ body æ¥è®¾ç½®å“åº”ä½“ï¼Œå®ƒå¯ä»¥æ˜¯å¦‚ä¸‹å‡ ç§ç±»å‹ï¼š String Buffer Stream Object null å½“æˆ‘ä»¬è®¾ç½® ctx.body æ—¶ï¼Œå¦‚æœçŠ¶æ€ç è¿˜æœªè¢«è®¾ç½®ï¼Œä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬å°†çŠ¶æ€ç è®¾ç½®ä¸º 200 æˆ– 204ã€‚å¹¶ä¸”æ ¹æ®è¿”å›çš„ç±»å‹è®¾ç½® Content-Type å“åº”å¤´ï¼š ç±»å‹ Content-Type String text/plainï¼Œtext/htmlï¼Œé»˜è®¤ç¼–ç ä¸º utf-8 Buffer application/octet-stream Stream application/octet-stream Object application/json å¯¹äº String å’Œ Buffer ç±»å‹çš„æ•°æ®ï¼Œè¿˜ä¼šè®¡ç®—å†…å®¹çš„é•¿åº¦ï¼Œå¹¶ä¸”è®¾ç½® Content-Length å“åº”å¤´ã€‚ headerã€headersé€šè¿‡ header å¯ä»¥è·å¾—å“åº”å¤´å¯¹è±¡ app.use(async ctx =&gt; &#123; ctx.body = \"Hello World!\"; console.log(ctx.response.header);&#125;); è¾“å‡ºç»“æœä¸º [Object: null prototype] &#123; 'content-type': 'text/plain; charset=utf-8', 'content-length': '12'&#125; å½“æˆ‘ä»¬å¯¹ ctx.body è¿›è¡Œè®¾ç½®æ—¶ï¼Œå®ƒä¼šæ ¹æ®è®¾ç½®ç»™ ctx.body çš„å†…å®¹ï¼Œå¯¹ content-type å“åº”å¤´è¿›è¡Œè®¾ç½®ï¼Œå¹¶ä¸”ä¼šè®¡ç®— ctx.body çš„é•¿åº¦ï¼Œå¯¹ content-length å“åº”å¤´è¿›è¡Œè®¾ç½®ã€‚ headers æ˜¯ header çš„åˆ«åï¼ŒäºŒè€…æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚ typetype æ˜¯ç”¨æ¥è®¾ç½®è¿”å›çš„æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆ app.use(async ctx =&gt; &#123; ctx.body = fs.createReadStream(\"./girl.jpg\");&#125;); ä¸Šè¿°æˆ‘ä»¬ä¸ºå‰ç«¯è¿”å›äº†ä¸€å¼ å›¾ç‰‡çš„äºŒè¿›åˆ¶æµï¼Œå®ƒé»˜è®¤çš„ç±»å‹ä¸º application/octet-streamï¼Œå½“æˆ‘ä»¬è¿”å›ç»™æµè§ˆå™¨æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä¸‹è½½å†…å®¹ï¼Œè€Œä¸æ˜¯å°†å…¶è§£æä¸ºå›¾ç‰‡ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ type å±æ€§è®¾ç½®è¿”å›çš„æ•°æ®ä¸ºå›¾ç‰‡ï¼Œè¿™æ ·æµè§ˆå™¨ä¾¿å¯ä»¥å¯¹æµè¿›è¡Œè§£æç„¶ååœ¨é¡µé¢å±•ç¤º app.use(async ctx =&gt; &#123; ctx.type = \"jpg\"; ctx.body = fs.createReadStream(\"./girl.jpg\");&#125;); æˆ‘ä»¬çŸ¥é“æµè§ˆå™¨æ˜¯æ ¹æ® MIME ç±»å‹æ¥æ˜¯è¯†åˆ«æ•°æ®ç±»å‹çš„ï¼Œä½†æ˜¯ä¸Šé¢æˆ‘ä»¬è®¾ç½®çš„ç±»å‹ä¸º jpgï¼Œè€Œä¸æ˜¯ jpg å¯¹åº”çš„ MIME ç±»å‹ image/jpegï¼Œè¿™æ—¶å› ä¸º Koa ä¼šæ ¹æ®æˆ‘ä»¬è®¾ç½®çš„ç±»å‹ï¼Œæ‰¾åˆ°å¯¹åº”çš„ MIME ç±»å‹ç„¶åè®¾ç½® type å±æ€§ app.use(async ctx =&gt; &#123; ctx.type = \"jpg\"; console.log(ctx.type); // image/jpeg ctx.body = fs.createReadStream(\"./girl.jpg\");&#125;); è¿˜å¯ä»¥ç›´æ¥ä¸º type å±æ€§ç›´æ¥è®¾ç½®ä¸ºå“åº”çš„ MIME ç±»å‹ app.use(async ctx =&gt; &#123; ctx.type = \"image/jpeg\"; ctx.body = fs.createReadStream(\"./girl.jpg\");&#125;); åœ¨è®¾ç½® type å±æ€§æ—¶ï¼Œä¼šåŒæ—¶è®¾ç½® Content-Type å“åº”å¤´ã€‚ lengthå½“æˆ‘ä»¬è®¾ç½® ctx.body ä¸º String æˆ–è€…ä¸º Buffer ç±»å‹æ—¶ï¼Œä¼šè‡ªåŠ¨è®¾ç½® Content-Length å“åº”å¤´ï¼Œé€šè¿‡ length å±æ€§æˆ‘ä»¬å¯ä»¥çŸ¥é“å†…å®¹é•¿åº¦ä¸ºå¤šå°‘ï¼Œå³ Content-Length å¯¹åº”çš„å€¼ app.use(async ctx =&gt; &#123; ctx.body = \"Hello World!\"; console.log(ctx.length); // 12&#125;); æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ length å±æ€§æ¥è®¾ç½® Content-Length å“åº”å¤´ app.use(async ctx =&gt; &#123; ctx.body = \"Hello World!\"; ctx.length = 10;&#125;); å®é™…æˆ‘ä»¬å‘é€çš„å†…å®¹æœ‰ 12 ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯æˆ‘ä»¬è®¾ç½® Conetnt-Length åªæœ‰ 10 ä¸ªå­—èŠ‚ï¼Œæµè§ˆå™¨æ ¹æ® Content-Length çš„å¤§å°æ¥æ¥æ”¶æ•°æ®ï¼Œè¿™ä¼šå¯¼è‡´æµè§ˆå™¨åªæ¥æ”¶åˆ° 10 ä¸ªå­—èŠ‚çš„æ•°æ® statusã€messageå¯ä»¥é€šè¿‡ status æ¥è®¾ç½®è¿”å›çš„çŠ¶æ€ç ï¼Œé€šè¿‡ message å±æ€§æ¥è®¾ç½®è¿”å›çš„ä¿¡æ¯ã€‚å½“æˆ‘ä»¬è®¾ç½®çŠ¶æ€ç æ—¶ï¼Œä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬è®¾ç½® message çš„å€¼ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬è®¾ç½®çŠ¶æ€ç ä¸º 200 æ—¶ï¼Œmessage çš„å€¼å°±ä¼šè¢«è®¾ç½®ä¸º OKï¼Œå½“æˆ‘ä»¬è®¾ç½®çŠ¶æ€ç ä¸º 404 æ—¶ï¼Œmessage å°±ä¼šè¢«è®¾ç½®ä¸º Not Found app.use(async ctx =&gt; &#123; ctx.status = 404; console.log(ctx.message); // Not Found&#125;); å½“æˆ‘ä»¬è¿”å›çš„çŠ¶æ€ç ä¸º 404 å¹¶ä¸”æ²¡æœ‰è®¾ç½® body å±æ€§æ—¶ï¼Œä¼šå‘å‰ç«¯è¿”å›å­—ç¬¦ä¸² Not Foundã€‚ çŠ¶æ€ç ä»¥åŠå¯¹åº”çš„é»˜è®¤ message å¦‚ä¸‹(ä¸å¿…è®°å¿†) 100 â€œcontinueâ€ 101 â€œswitching protocolsâ€ 102 â€œprocessingâ€ 200 â€œokâ€ 201 â€œcreatedâ€ 202 â€œacceptedâ€ 203 â€œnon-authoritative informationâ€ 204 â€œno contentâ€ 205 â€œreset contentâ€ 206 â€œpartial contentâ€ 207 â€œmulti-statusâ€ 208 â€œalready reportedâ€ 226 â€œim usedâ€ 300 â€œmultiple choicesâ€ 301 â€œmoved permanentlyâ€ 302 â€œfoundâ€ 303 â€œsee otherâ€ 304 â€œnot modifiedâ€ 305 â€œuse proxyâ€ 307 â€œtemporary redirectâ€ 308 â€œpermanent redirectâ€ 400 â€œbad requestâ€ 401 â€œunauthorizedâ€ 402 â€œpayment requiredâ€ 403 â€œforbiddenâ€ 404 â€œnot foundâ€ 405 â€œmethod not allowedâ€ 406 â€œnot acceptableâ€ 407 â€œproxy authentication requiredâ€ 408 â€œrequest timeoutâ€ 409 â€œconflictâ€ 410 â€œgoneâ€ 411 â€œlength requiredâ€ 412 â€œprecondition failedâ€ 413 â€œpayload too largeâ€ 414 â€œuri too longâ€ 415 â€œunsupported media typeâ€ 416 â€œrange not satisfiableâ€ 417 â€œexpectation failedâ€ 418 â€œIâ€™m a teapotâ€ 422 â€œunprocessable entityâ€ 423 â€œlockedâ€ 424 â€œfailed dependencyâ€ 426 â€œupgrade requiredâ€ 428 â€œprecondition requiredâ€ 429 â€œtoo many requestsâ€ 431 â€œrequest header fields too largeâ€ 500 â€œinternal server errorâ€ 501 â€œnot implementedâ€ 502 â€œbad gatewayâ€ 503 â€œservice unavailableâ€ 504 â€œgateway timeoutâ€ 505 â€œhttp version not supportedâ€ 506 â€œvariant also negotiatesâ€ 507 â€œinsufficient storageâ€ 508 â€œloop detectedâ€ 510 â€œnot extendedâ€ 511 â€œnetwork authentication requiredâ€ å½“æˆ‘ä»¬è®¾ç½® ctx.body ä¸ºé™¤ null ä»¥å¤–å¤–çš„æ•°æ®æ—¶ï¼ŒçŠ¶æ€ç ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸º 200ï¼Œå¯¹åº”çš„æ¶ˆæ¯ä¼šä¼šè¢«è®¾ç½®ä¸º OKã€‚å½“æˆ‘ä»¬è®¾ç½® ctx.body ä¸º null æ—¶ï¼ŒçŠ¶æ€ç ä¼šè¢«è®¾ç½®ä¸º 204ï¼Œå¯¹åº”çš„æ¶ˆæ¯ä¼šè¢«è®¾ç½®ä¸º No Contentã€‚ lastModifiedã€etagè¿™æ˜¯ç”¨æ¥è®¾ç½® LastModified ä¸ ETag å“åº”å¤´ï¼ŒLastModified çš„æ ¼å¼åº”è¯¥ä¸ºä¸€ä¸ª UTC å­—ç¬¦ä¸²ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä¸º lastModified è®¾ç½®ä¸ºä¸€ä¸ª Date å¯¹è±¡ï¼ŒKoa å†…éƒ¨ä¼šå¸®æˆ‘ä»¬è½¬åŒ–ä¸º UTC å­—ç¬¦ä¸² app.use(async ctx =&gt; &#123; ctx.lastModified = new Date();&#125;); è™½ç„¶ Koa ä¼šå°† Date è½¬åŒ–ä¸º UTC å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æˆ‘å‘ç°æ—¶åŒºä¸å¯¹ï¼Œç›®å‰æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•ã€‚ é€šè¿‡ etag å±æ€§è®¾ç½® ETag å“åº”å¤´ï¼Œè®¾ç½®çš„å†…å®¹ä¼šä½¿ç”¨ &quot;&quot; åŒ…è£¹èµ·æ¥ app.use(async ctx =&gt; &#123; ctx.etag = \"hi\";&#125;); getã€setã€appendã€removeä¸Šè¿°å››ä¸ªæ–¹æ³•éƒ½æ˜¯ä¸å“åº”å¤´ç›¸å…³çš„ï¼š get(filed)ï¼šè·å¾—æŒ‡å®šå“åº”å¤´çš„å†…å®¹ setï¼šåˆ†ä¸ºä¸¤ç§ set(field, value)ï¼šè®¾ç½®ä¸€ä¸ªå“åº”å¤´ set(fields)ï¼šè®¾ç½®å¤šä¸ªå“åº”å¤´ append(field, value)ï¼šå‘å“åº”å¤´è¿½åŠ å†…å®¹ remove(field)ï¼šåˆ é™¤å“åº”å¤´ app.use(async ctx =&gt; &#123; ctx.set(&#123; \"Content-Type\": \"text/html\", \"Last-Modified\": (new Date()).toUTCString() &#125;); // åˆ é™¤ Last-Modified å“åº”å¤´ ctx.remove(\"Last-Modified\"); // ä¸è¦ä½¿ç”¨ ctx.getï¼Œè¿™æ˜¯è·å–è¯·æ±‚å¤´çš„æ–¹æ³• ctx.body = ctx.response.get(\"Content-Type\");&#125;); redirecté€šè¿‡ redirect(url) æ–¹æ³•é‡å®šå‘åˆ°æ–°çš„è·¯å¾„ app.use(async ctx =&gt; &#123; ctx.redirect(\"http://www.baidu.com\");&#125;); å½“æˆ‘ä»¬è®¿é—® http://localhost:3000/ æ—¶ä¼šè¢«é‡å®šå‘åˆ° http://www.baidu.comï¼Œä½¿ç”¨ redirect æ–¹æ³•è¿›è¡Œé‡å®šå‘ï¼Œä¼šé»˜è®¤è®¾ç½®çŠ¶æ€ç ä¸º 302ï¼Œå¦‚æœéœ€è¦æ›´æ”¹çŠ¶æ€ç ï¼Œå¯ä»¥é€šè¿‡ status å±æ€§ç›´æ¥æ›´æ”¹ï¼Œåœ¨è°ƒç”¨ redirct æ–¹æ³•ä¹‹å‰æˆ–ä¹‹åéƒ½å¯ä»¥ã€‚ attachment è°ƒç”¨ attachment æ–¹æ³•ï¼Œä¼šè®¾ç½® Content-Disposition å“åº”å¤´ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°è¯¥å“åº”å¤´ä¹‹åï¼Œä¼šå¯¹å‰ç«¯è¿”å›çš„å†…å®¹è¿›è¡Œä¸‹è½½ã€‚attachment æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•° app.use(async ctx =&gt; &#123; ctx.body = fs.createReadStream(\"./girl.jpg\"); ctx.attachment(\"girl.jpg\");&#125;); å½“æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨è®¿é—® http://localhost:3000/ æ—¶ï¼Œä¼šå¼¹å‡ºä¸‹é¢çš„çª—å£æç¤ºæˆ‘ä»¬è¿›è¡Œä¸‹è½½ è·¯ç”±æˆ‘ä»¬åº”å½“æ ¹æ®ä¸åŒçš„è¯·æ±‚è·¯å¾„ï¼Œäº§ç”Ÿä¸åŒçš„å“åº”ï¼Œè€Œè·¯ç”±æ­£æ˜¯å®šä¹‰è¿™äº›è¡Œä¸ºçš„ã€‚æˆ‘ä»¬é€šè¿‡å¯¹ urlã€pathã€method ç­‰å±æ€§è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åè¿”å›ä¸åŒçš„å“åº” class Router &#123; constructor() &#123; this.routers = &#123;&#125; &#125; // å½“è¯·æ±‚ä»¥ method æ–¹æ³•è®¿é—® path è·¯å¾„æ—¶ï¼Œæ·»åŠ å¯¹åº”çš„å¤„ç†å‡½æ•°åˆ° routers addHandle(method, path, handle) &#123; this.routers[path] = this.routers[path] || &#123;&#125;; let handles = this.routers[path][method] = this.routers[path][method] || []; handles.push(handle); // å¯é“¾å¼æ‰§è¡Œ return this; &#125; get(path, handle) &#123; return this.addHandle(\"get\", path, handle); &#125; post(path, handle) &#123; return this.addHandle(\"post\", path, handle); &#125; // å°†å¤šä¸ªå¤„ç†å‡½æ•°ä¸²è”èµ·æ¥ compose(middleware = []) &#123; return function (ctx) &#123; function dispatch(i) &#123; let fn = middleware[i]; if (!fn) &#123; return Promise.resolve(); &#125; return Promise.resolve(fn(ctx, dispatch.bind(null, i + 1))); &#125; return dispatch(0); &#125; &#125; // è¿”å›ä¸€ä¸ªä¸­é—´ä»¶ routes() &#123; return async (ctx, next) =&gt; &#123; // æ‰¾åˆ°åŒ¹é…çš„è·¯å¾„ let matchedPath = this.routers[ctx.path]; // æ‰¾åˆ°å¯¹åº”æ–¹æ³•çš„å¤„ç†å‡½æ•° const handles = matchedPath[ctx.method.toLowerCase()] || []; // å°†å¤„ç†å‡½æ•°ä¸²è”èµ·æ¥ï¼Œç„¶åæ‰§è¡Œ return this.compose(handles)(ctx, next); &#125; &#125;&#125;module.exports = Router; ä¸Šé¢æˆ‘ä»¬å†™äº†ä¸€ä¸ª Router ç±»ï¼Œå¦‚ä¸‹ä½¿ç”¨ const userRouter = new Router();userRouter.get('/user/name', async (ctx, next) =&gt; &#123; ctx.body = \"Alice\"; await next();&#125;); ä¸Šé¢çš„ç¨‹åºè¡¨ç¤ºï¼Œå½“è¯·æ±‚ä»¥ get æ–¹æ³•è®¿é—® /user/name è·¯å¾„æ—¶ï¼Œä¾¿æ‰§è¡Œå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥ä¸ºåŒä¸€è·¯å¾„æ·»åŠ å¤šä¸ªå¤„ç†å‡½æ•°ï¼Œä¼šæ ¹æ®æ·»åŠ çš„é¡ºåºä¾æ¬¡æ‰§è¡Œ userRouter.get('/user/name', async (ctx, next) =&gt; &#123; ctx.body = \"Alice\"; await next();&#125;).get('/user/name', async (ctx, next) =&gt; &#123; ctx.type = \"html\"; await next();&#125;); ä½¿ç”¨æ—¶ï¼Œè°ƒç”¨ Router å®ä¾‹çš„ routes æ–¹æ³•å°±ä¼šè¿”å›ä¸€ä¸ªä¸­é—´ä»¶ï¼Œé€šè¿‡ app.use å°†è¯¥ä¸­é—´ä»¶æ’å…¥å³å¯ const Koa = require('koa');const Router = require('./Router');const queryString = require('querystring');let userRouter = new Router();// å½“ä»¥ get æ–¹æ³•è®¿é—® /user/name è·¯å¾„æ—¶ï¼Œè¿”å› AliceuserRouter.get('/user/name', async (ctx, next) =&gt; &#123; ctx.body = \"Alice\"; await next();&#125;);// å½“ä»¥ post æ–¹æ³•è®¿é—® /user/name è·¯å¾„æ—¶ï¼Œå°†è¯·æ±‚å‚æ•°è¿”å›userRouter.post('/user/name', async (ctx, next) =&gt; &#123; const req = ctx.req; const postData = await getPostData(req); ctx.body = postData; await next();&#125;);// è·å¾— post è¯·æ±‚å‚æ•°çš„å‡½æ•°const getPostData = async req =&gt; &#123; return new Promise(resolve =&gt; &#123; let buffers = []; req.on(\"data\", data =&gt; &#123; buffers.push(data); &#125;); req.on(\"end\", () =&gt; &#123; let data = Buffer.concat(buffers).toString(); resolve(queryString.parse(data)); &#125;) &#125;)&#125;;const app = new Koa();// ä½¿ç”¨è·¯ç”±ä¸­é—´ä»¶app.use(userRouter.routes());app.listen(3000); å‘é€ get è¯·æ±‚ å‘é€ post è¯·æ±‚ ä¸Šé¢æ˜¯ä½¿ç”¨äº†æˆ‘ä»¬è‡ªå·±å†™äº† Router ç±»ï¼Œæ”¯æŒçš„åŠŸèƒ½ä¸å¤šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®˜ç½‘æä¾›çš„ Router æ’ä»¶ï¼Œé¦–å…ˆè¿›è¡Œä¸‹è½½ npm i @koa&#x2F;router --save ç„¶åå¼•å…¥ Router const Router = require('@koa/router'); ä½¿ç”¨æ–¹æ³•åŒä¸Šä¸€æ ·ã€‚ è·å–è¯·æ±‚æ•°æ®é€šè¿‡ ctx.query å¯ä»¥è·å¾— get è¯·æ±‚çš„æ•°æ® app.use(async ctx =&gt; &#123; const query = ctx.query; ctx.body = query;&#125;); è·å– post è¯·æ±‚çš„æ•°æ®éœ€è¦æ‰‹åŠ¨è§£æè¯·æ±‚ä½“ const getPostData = async req =&gt; &#123; return new Promise(resolve =&gt; &#123; let buffers = []; req.on(\"data\", data =&gt; &#123; buffers.push(data); &#125;); req.on(\"end\", () =&gt; &#123; let data = Buffer.concat(buffers).toString(); // å€ŸåŠ©äº† Node æä¾›çš„æ ¸å¿ƒæ¨¡å— querystring è§£æè¯·æ±‚å‚æ•°ä¸ºå¯¹è±¡ resolve(queryString.parse(data)); &#125;); &#125;);&#125;;app.use(async ctx =&gt; &#123; const postData = await getPostData(ctx.req); ctx.body = postData;&#125;); é™¤äº†æ‰‹åŠ¨è§£æå‚æ•°å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ©äºä¸­é—´ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ koa-bodyparserï¼Œé¦–å…ˆè¿›è¡Œå®‰è£… npm i koa-bodyparser --save koa-bodyparser è§£æè¯·æ±‚å‚æ•°ä¹‹åä¼šå°†è¯·æ±‚å‚æ•°æ”¾åœ¨ ctx.request.body ä¸Šé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¿é—® ctx.request.body æ¥è·å– post è¯·æ±‚å‚æ•° const bodyParser = require('koa-bodyparser');app.use(bodyParser());app.use(async ctx =&gt; &#123; ctx.body = ctx.request.body;&#125;); æš´éœ²é™æ€èµ„æºå¯¹äºæˆ‘ä»¬åœ¨ç½‘é¡µé‡Œé¢å¼•ç”¨çš„ JavaScriptã€CSSã€å›¾ç‰‡ç­‰é™æ€èµ„æºæ–‡ä»¶ï¼Œå®ƒä¹Ÿä¼šèµ°æˆ‘ä»¬çš„è·¯ç”±ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦ä¸ºå®ƒä»¬å†™å¤„ç†å‡½æ•°ï¼Œå…¶å®å°±æ˜¯ç›´æ¥å°†æ–‡ä»¶è¿”å›ã€‚æˆ‘ä»¬é¦–å…ˆçœ‹å¦‚æœä¸åšå¤„ç†çš„æƒ…å†µï¼Œé¦–å…ˆæœ‰è¿™ä¸ªä¸€ä¸ª HTML æ–‡ä»¶ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"/public/css/index.css\"&gt;&lt;/head&gt;&lt;body&gt; Hello World!&lt;/body&gt;&lt;/html&gt; åœ¨ HTML æ–‡ä»¶ä¸­å¼•ç”¨äº†ä¸€ä¸ª CSS æ–‡ä»¶ï¼ŒCSS æ–‡ä»¶å†…å®¹å¦‚ä¸‹ body &#123; color: red; font-size: 40px;&#125; ä¸Šé¢åªæ˜¯è®¾ç½®äº†å­—ä½“çš„é¢œè‰²å’Œå¤§å°ï¼Œæµè§ˆå™¨ä¼šå‘æœåŠ¡å™¨è¯·æ±‚ CSS æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬æœåŠ¡å™¨æ²¡æœ‰å¯¹è¿™ç§é™æ€èµ„æºçš„è¯·æ±‚åšå¤„ç†ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½è¿”å› CSS æ–‡ä»¶ï¼ŒæœåŠ¡å™¨ç«¯ä»£ç å¦‚ä¸‹ï¼Œåªæ˜¯ç›´æ¥è¿”å›äº†ä¸€ä¸ª HTML æ–‡ä»¶ const Koa = require('koa');const fs = require('fs');const app = new Koa();const path = require('path');const Router = require('@koa/router');const router = new Router();router.get('/', async (ctx, next) =&gt; &#123; ctx.type = 'html'; ctx.body = fs.createReadStream(path.resolve('public/index.html')); await next();&#125;);app.use(router.routes());app.listen(3000); ç°åœ¨æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨è®¿é—® å­—ä½“çš„é¢œè‰²å’Œå¤§å°æ²¡æœ‰å˜åŒ–ï¼Œè¯´æ˜æ²¡æœ‰åŠ è½½åˆ° CSS æ–‡ä»¶ï¼Œå¹¶ä¸”æ§åˆ¶å°ä¹Ÿæ˜¾ç¤ºæ–‡ä»¶èµ„æºåŠ è½½å¤±è´¥ã€‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¸­é—´ä»¶ koa-static æ¥å¤„ç†é™æ€èµ„æºï¼Œé¦–å…ˆè¿›è¡Œä¸‹è½½ npm i koa-static --save ä½¿ç”¨å¦‚ä¸‹ const Koa = require('koa');const fs = require('fs');const app = new Koa();const path = require('path');const Router = require('@koa/router');// ä½¿ç”¨ koa-static ä¸­é—´ä»¶const server = require('koa-static');const router = new Router();router.get('/', async (ctx, next) =&gt; &#123; ctx.type = 'html'; ctx.body = fs.createReadStream(path.resolve('public/index.html')); await next();&#125;);// å°†å½“å‰ç›®å½•å½“åšé™æ€æœåŠ¡çš„æ ¹ç›®å½•app.use(server(path.resolve('.')));app.use(router.routes());app.listen(3000); å†æ¬¡è®¿é—® æ ·å¼ç”Ÿæ•ˆäº†ï¼Œè¯´æ˜ koa-static èµ·ä½œç”¨äº†ã€‚ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨å½“å‰ç›®å½•ä½œä¸ºé™æ€èµ„æºçš„æ ¹ç›®å½•ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ public ç›®å½•ä½œä¸ºé™æ€èµ„æºçš„æ ¹ç›®å½• app.use(server(path.resolve('public'))); é‚£ä¹ˆå¼•ç”¨ CSS æ–‡ä»¶çš„æ–¹å¼éœ€è¦ä¿®æ”¹ä¸º &lt;link rel=\"stylesheet\" href=\"/css/index.css\"&gt; æ–‡ä»¶ä¸Šä¼ æœ¬èŠ‚ç ”ç©¶å¦‚ä½•å¤„ç†ä¸Šä¼ æ–‡ä»¶ï¼Œå‰ç«¯ä¸Šä¼ æ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;input type=\"file\" id=\"upload\"&gt; &lt;script&gt; const upload = document.getElementById(\"upload\"); upload.addEventListener(\"change\", event =&gt; &#123; // è·å¾—ä¸Šä¼ çš„æ–‡ä»¶ let file = event.target.files[0]; // æ·»åŠ åˆ° FormData å¯¹è±¡ä¸­ let data = new FormData(); data.append(\"file\", file); // ä¸Šä¼ æ–‡ä»¶ fetch('http://localhost:3000/upload', &#123; method: 'post', body: data, // è®¾ç½®ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹ä¸º multipart/form-dataï¼Œè¡¨ç¤ºä¸Šä¼ çš„ä¸ºæ–‡ä»¶ // headers: &#123; // 'Content-Type': 'multipart/form-data' // &#125; &#125;).then(res =&gt; &#123; console.log(res); &#125;).catch(err =&gt; &#123; console.error(err); &#125;) &#125;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; è¿™é‡Œè®°å½•ä¸€ä¸ªå‘ï¼Œåœ¨ä½¿ç”¨ fetch ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œä¸è¦æ‰‹åŠ¨è®¾ç½® &#39;Content-Type&#39;: &#39;multipart/form-data&#39;ï¼Œå› ä¸ºè¿˜éœ€è¦è®¾ç½®åˆ†ç•Œå­—ç¬¦ï¼Œè¿™ä¸ªåˆ†ç•Œå­—ç¬¦æ˜¯éšæœºç”Ÿæˆï¼Œæ‰€ä»¥ Content-Type å¤´éƒ¨å°±ç”± fetch è‡ªå·±å»ç”Ÿæˆï¼Œå¦åˆ™åç«¯çš„ä¸€äº›ä¸­é—´ä»¶ä¸èƒ½è§£æå†…å®¹ã€‚ ä¸ºäº†è§£æä¸Šä¼ çš„æ•°æ®ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ multipart/form-data çš„æ•°æ®æ ¼å¼ã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾ä¸Šä¼ äº†ä¸¤ä¸ªå­—æ®µï¼Œç¬¬ä¸€ä¸ªå­—æ®µçš„åç§°ä¸º fileï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­çš„å†…å®¹ä¸º Hello World!ï¼›ç¬¬äºŒä¸ªå­—æ®µä¸º nameï¼Œå®ƒçš„å€¼ä¸º Aliceã€‚é‚£ä¹ˆå®ƒä»¬å½¢æˆçš„è¯·æ±‚ä½“çš„æ•°æ®å¦‚ä¸‹ ------WebKitFormBoundaryHdpL0f6HyVyJAFokContent-Disposition: form-data; name=\"file\"; filename=\"hello.txt\"Content-Type: text/plainHello World!------WebKitFormBoundaryHdpL0f6HyVyJAFokContent-Disposition: form-data; name=\"name\"Alice------WebKitFormBoundaryHdpL0f6HyVyJAFok-- æ¯ä¸ªå­—æ®µä¹‹é—´éƒ½ä¼šä½¿ç”¨ä¸€ä¸ªåˆ†ç•Œçº¿åˆ†å¼€ï¼Œè¿™ä¸ªåˆ†ç•Œçº¿çš„ç»„æˆæ˜¯ ------WebKitFormBoundary åŠ ä¸Šä¸€ä¸ªéšæœºçš„ 16 ä½å“ˆå¸Œï¼Œåœ¨æ¯ä¸ªå­—æ®µä¸­ä¹Ÿåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯å­—æ®µæœ‰å…³çš„è¯·æ±‚å¤´ï¼Œä¾‹å¦‚ Content-Typeã€Content-Disposition ï¼Œç¬¬äºŒéƒ¨åˆ†å°±æ˜¯å­—æ®µçš„å…·ä½“å†…å®¹ï¼Œä¸¤éƒ¨åˆ†ä½¿ç”¨ç©ºè¡Œè¿›è¡Œéš”å¼€ã€‚ æˆ‘å°è¯•è¿‡è‡ªå·±è§£ææ•°æ®ï¼Œä½†æ˜¯èŠ±è´¹æ•°ä¸ªå°æ—¶ï¼Œè¿˜æ˜¯æ²¡æœ‰æˆåŠŸï¼Œå› æ­¤æ”¾å¼ƒï¼Œæ„Ÿå…´è¶£å¯ä»¥å°è¯•è‡ªå·±è§£æï¼ è¿™é‡Œä»‹ç»ä½¿ç”¨ä¸­é—´ä»¶ koa-body æ¥è·å¾—ä¸Šä¼ çš„æ–‡ä»¶é¦–å…ˆè¿›è¡Œä¸‹è½½ npm i koa-body --save ç„¶åä½¿ç”¨ä¾¿å¯ä»¥ä½¿ç”¨äº† const koaBody = require('koa-body');app.use(koaBody(&#123; multipart: true&#125;)); koa-body ä¼šå°†ä¸Šä¼ çš„æ–‡ä»¶è®¾ç½®åœ¨ ctx.request.files å±æ€§ï¼Œæˆ‘ä»¬é€šè¿‡ files.file å±æ€§æ¥è·å¾—ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå¦‚æœä¸Šä¼ çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª File å¯¹è±¡ï¼Œå¦‚æœä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªç”± File å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼›å…¶ä»–è¡¨å•è¯·æ±‚å­—æ®µè®¾ç½®åœ¨ ctx.request.body å±æ€§ä¸Šã€‚ koa-body ä¼šå…ˆå°†æ–‡ä»¶ä¿å­˜åœ¨ C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Temp\\\\ ç›®å½•ä¸‹ï¼Œå…·ä½“çš„è·¯å¾„å¯ä»¥ç”± File å¯¹è±¡çš„ path å±æ€§è·å¾—ï¼Œé€šè¿‡ name å±æ€§å¯ä»¥è·å¾—ä¸Šä¼ çš„æ–‡ä»¶åï¼Œé€šè¿‡ type å±æ€§å¯å¾—çŸ¥ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹ const Koa = require('koa');const Router = require('@koa/router');const koaBody = require('koa-body');const fs = require('fs');const path = require('path');const app = new Koa();const router = new Router();router.post('/upload', async (ctx, next) =&gt; &#123; const file = ctx.request.files.file; // å°†æ¥æ”¶åˆ°çš„æ–‡ä»¶ä¿å­˜åœ¨å½“å‰ç›®å½• fs.createReadStream(file.path).pipe(fs.createWriteStream(path.resolve(file.name))); ctx.body = \"ä¸Šä¼ æˆåŠŸ\"; await next();&#125;);app.use(koaBody(&#123; multipart: true&#125;));app.use(router.routes());app.listen(3000); å‚è€ƒæ–‡ç«  Koaå®˜ç½‘ Koaè¿›é˜¶å­¦ä¹ ç¬”è®° ç©è½¬Koa-æ ¸å¿ƒåŸç†åˆ†æ æ‰‹å†™@koa/routeræºç  NodeJs koa2å®ç°æ–‡ä»¶ä¸Šä¼  Error when POST file multipart/form-data #505 è¸©å‘ç¯‡â€“ä½¿ç”¨ fetch ä¸Šä¼ æ–‡ä»¶","tags":[{"name":"ä¸­é—´ä»¶","slug":"ä¸­é—´ä»¶","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"name":"Koa","slug":"Koa","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Koa/"},{"name":"HTTP","slug":"HTTP","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/HTTP/"}]},{"title":"ç››æ°´æœ€å¤šçš„å®¹å™¨","date":"2021-03-14T15:51:00.000Z","path":"/ç››æ°´æœ€å¤šçš„å®¹å™¨/","text":"é¢˜ç›®æè¿°ç»™ä½  $n$ ä¸ªéè´Ÿæ•´æ•° $a_1, a_2, \\dots, a_n$ï¼Œæ¯ä¸ªæ•°ä»£è¡¨åæ ‡ä¸­çš„ä¸€ä¸ªç‚¹ $(i, a_i)$ã€‚åœ¨åæ ‡å†…ç”»å‡º $n$ æ¡å‚ç›´çº¿ï¼Œå‚ç›´çº¿ $i$ çš„ä¸¤ä¸ªç«¯ç‚¹ $(i, a_i)$ å’Œ $(i, 0)$ã€‚æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ $x$ è½´å…±åŒæ„æˆå®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚ è¯´æ˜ï¼šä¸èƒ½å€¾æ–œå®¹å™¨ã€‚ ä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹éè´Ÿæ•´æ•° $[1, 8, 6, 2, 5, 4, 8, 3, 7]$ å¦‚å›¾ä¸¤æ¡çº¢è‰²çº¿å½¢æˆçš„è“è‰²åŒºåŸŸèƒ½å¤Ÿç››æ”¾æœ€å¤šçš„æ°´ï¼Œå…¶å€¼ä¸º $7*7=49$ã€‚ è§£é¢˜æ€è·¯æœ€ç®€å•çš„æ€è·¯å°±æ˜¯éå†æ‰€æœ‰æŸ±ä¹‹é—´èƒ½å¤Ÿå®¹çº³å¤šå°‘æµé‡ï¼Œç„¶åå–æœ€å¤§å€¼ public int maxArea(int[] height) &#123; int max = 0; for (int i = 0; i &lt; height.length - 1; i++) &#123; for (int j = i + 1; j &lt; height.length; j++) &#123; max = Math.max(max, (j - i) * Math.min(height[i], height[j])); &#125; &#125; return max;&#125; ç°åœ¨æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªæ›´å¿«çš„ç®—æ³•ã€‚æˆ‘ä»¬è€ƒè™‘èŒƒå›´ $[i, j]$ ä¹‹é—´çš„æŸ±å­èƒ½å¤Ÿå®¹çº³å¤šå°‘æ°´é‡ã€‚é¦–å…ˆè€ƒè™‘è¾¹ç•Œçš„ä¸¤ä¸ªæŸ±å­ $(i, a_i)$ ä¸ $(j, a_j)$ ä¹‹é—´èƒ½å¤Ÿå®¹çº³å¤šå°‘æ°´é‡ï¼Œæˆ‘ä»¬ä¸å¦¨å‡è®¾ $a_i \\leq a_j$ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹é—´èƒ½å¤Ÿå®¹çº³çš„æ°´ä¸º$$a_i * (j - i)$$é‚£ä¹ˆå¯¹äºä»»ä½• $i &lt; k &lt; j$ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæŸ± $(i, a_i)$ ä¸æŸ± $(k, a_k)$ èƒ½å¤Ÿå®¹çº³çš„æ°´é‡ä¸€å®šå°äº $a_i * (j - i)$ã€‚å› ä¸º $x$ ä¸ $a_k$ ä¹‹é—´æœ€çŸ­çš„è¾¹ä¸º $\\min ( a_i, a_k ) \\leq a_i$ å› ä¸º$i &lt; k &lt; j$ï¼Œæ‰€ä»¥ $k - i &lt; j - i$ æ‰€ä»¥ $(i, x)$ ä¸$(k ,a_k)$ èƒ½å¤ŸåŒ…å«çš„æ°´é‡$$\\min ( a_i, a_k ) * (k - i) &lt; a_i * (j - i)$$å› ä¸ºæ‰¾çš„æ˜¯èƒ½å¤Ÿå®¹çº³æœ€å¤§çš„æ°´é‡ï¼Œæˆ‘ä»¬ä¸å¿…è€ƒè™‘ $(i, a_i)$ ä¸å…¶ä»–æŸ±çš„é…å¯¹äº†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¾ˆå¤šçš„è®¡ç®—é‡ã€‚ å°†ä¸Šé¢çš„æƒ³æ³•è½¬åŒ–ä¸ºç®—æ³•æ­¥éª¤ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯è®¡ç®—èŒƒå›´ $[0, length-1]$ ä¹‹é—´çš„æŸ±å­èƒ½å¤Ÿå®¹çº³å¤šå°‘æ°´é‡ï¼Œåˆå§‹ä»¤ i = 0, j = length -1ã€‚ç®—æ³•è¿‡ç¨‹ä¸ºï¼Œå½“æˆ‘ä»¬æ¥åˆ°$(i, a_i)$ ä¸ $(j, a_j)$ ä¸¤ä¸ªæŸ±æ—¶ï¼š é¦–å…ˆè®¡ç®—å®ƒä»¬èƒ½å¤Ÿå®¹çº³å¤šå°‘æ°´é‡ï¼Œå¦‚æœå¤§äºç›®å‰çš„æœ€å¤§å€¼ï¼Œåˆ™æ›´æ–°æœ€å¤§å€¼ï¼Œå¦åˆ™ä¸æ›´æ–°æœ€å¤§å€¼ å¦‚æœ $a_i \\leq a_j$ï¼Œé‚£ä¹ˆä¸å¿…è®¡ç®—æŸ± $(i, a_i)$ ä¸å…¶ä»–æŸ±çš„é…å¯¹ï¼Œæ‰§è¡Œ i++ å¦‚æœ $a_i &gt; a_j$ï¼Œé‚£ä¹ˆä¸å¿…è®¡ç®— $(j, a_j)$ ä¸å…¶ä»–æŸ±çš„é…å¯¹ï¼Œæ‰§è¡Œ j-- å½“ $i \\geq j$ æ—¶ï¼Œç®—æ³•æ‰§è¡Œç»“æŸï¼Œæ­¤æ—¶çš„æœ€å¤§å€¼å³ä¸ºèƒ½å¤Ÿå®¹çº³çš„æœ€å¤§æ°´é‡ã€‚ public int maxArea(int[] height) &#123; int start = 0; int end = height.length - 1; int max= 0; while (start &lt; end) &#123; // è®¡ç®—ä¸¤ä¸ªæŸ±ä¹‹é—´èƒ½å¤Ÿå®¹çº³çš„æ°´é‡ï¼Œå¦‚æœå¤§äºæœ€å¤§å€¼ï¼Œåˆ™æ›´æ–°æœ€å¤§å€¼ int s = (end - start) * Math.min(height[start], height[end]); if (max &lt; s) &#123; max = s; &#125; // å¦‚æœ a_i &lt;= a_jï¼Œåˆ™ i++ï¼Œå¦åˆ™ j-- if (height[start] &lt;= height[end]) &#123; start++; &#125; else &#123; end--; &#125; &#125; return max;&#125; å‚è€ƒæ–‡çŒ® ç››æ°´æœ€å¤šçš„å®¹å™¨","tags":[{"name":"leetcode","slug":"leetcode","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/leetcode/"},{"name":"åŒæŒ‡é’ˆ","slug":"åŒæŒ‡é’ˆ","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"}]},{"title":"Node.jsä¹‹EventEmitter","date":"2021-03-11T16:00:00.000Z","path":"/Node.jsä¹‹EventEmitter/","text":"EventEmitter çš„ä½¿ç”¨EventEmitter ä¸ºæˆ‘ä»¬æä¾›äº†äº‹ä»¶è®¢é˜…æœºåˆ¶ï¼Œé€šè¿‡å¼•å…¥ events æ¨¡å—æ¥ä½¿ç”¨å®ƒã€‚ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();// ç›‘å¬ data äº‹ä»¶eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data\");&#125;);// è§¦å‘ data äº‹ä»¶eventEmitter.emit(\"data\"); ä¸Šè¿°ä»£ç æˆ‘ä»¬ä½¿ç”¨ on æ–¹æ³•æ¥ä¸ºäº‹ä»¶ç»‘å®šå›è°ƒå‡½æ•°ï¼Œä½¿ç”¨ emit æ–¹æ³•æ¥è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ onã€addListeneræˆ‘ä»¬å¯ä»¥é€šè¿‡ on å’Œ addListener æ–¹æ³•æ¥ä¸ºæŸäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ï¼ŒäºŒè€…çš„ä½¿ç”¨æ˜¯ä¸€æ · eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data\");&#125;);eventEmitter.addListener(\"data\", () =&gt; &#123; console.log(\"data\");&#125;); ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºäº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œå½“ EventEmitter å®ä¾‹å¯¹è±¡è°ƒç”¨ emit è§¦å‘ç›¸åº”çš„äº‹ä»¶æ—¶ä¾¿ä¼šè°ƒç”¨è¯¥å›è°ƒå‡½æ•°ï¼Œå¦‚ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data\");&#125;);eventEmitter.addListener(\"data\", () =&gt; &#123; console.log(\"data\");&#125;);eventEmitter.emit(\"data\"); åœ¨æ§åˆ¶å°ä¼šæ‰“å°å‡ºä¸¤æ¬¡ data datadata ä»ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå¯ä»¥ä¸ºåŒä¸€äº‹ä»¶ç»‘å®šå¤šä¸ªå›è°ƒå‡½æ•°ã€‚ æ‰§è¡Œé¡ºåºå½“ä½¿ç”¨ on æˆ– addListener ç»‘å®šå¤šä¸ªå›è°ƒå‡½æ•°æ—¶ï¼Œè§¦å‘çš„é¡ºåºå°±æ˜¯æ·»åŠ çš„é¡ºåºï¼Œå¦‚ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data 1\");&#125;);eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data 2\");&#125;);eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data 3\");&#125;);eventEmitter.emit(\"data\"); ä¼šåœ¨æ§åˆ¶å°ä¾æ¬¡æ‰“å°å‡º data 1data 2data 3 é‡å¤æ·»åŠ å¹¶ä¸”ä½¿ç”¨ on æ–¹æ³•ç»‘å®šäº‹ä»¶æ—¶ï¼Œå¹¶ä¸ä¼šåšå»é‡æ£€æŸ¥ const &#123;EventEmitter&#125; = require('events');const eventEmitter = new EventEmitter();const listener = () =&gt; &#123; console.log(\"lsitener\");&#125;eventEmitter.on(\"data\", listener);eventEmitter.on(\"data\", listener);eventEmitter.emit(\"data\"); æ§åˆ¶å°çš„æ‰“å°ç»“æœä¸º lsitenerlsitener ä¸Šé¢çš„ç¨‹åºä¸ºäº‹ä»¶ç»‘å®šäº†ä¸¤æ¬¡ listener è¿™ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å†…éƒ¨å¹¶ä¸ä¼šæ£€æŸ¥æ˜¯å¦å·²ç»æ·»åŠ è¿‡è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œç„¶åå»é‡ï¼Œæ‰€ä»¥ä¸Šé¢åœ¨æ§åˆ¶å°æ‰“å°å‡ºäº†ä¸¤æ¬¡ listenerã€‚ ä¼ é€’å‚æ•°å¦å¤–å›è°ƒå‡½æ•°è¿˜å¯ä»¥æ¥æ”¶å‚æ•°ï¼Œå‚æ•°é€šè¿‡ emit è§¦å‘äº‹ä»¶æ—¶ä¼ å…¥ï¼Œå¦‚ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.on(\"data\", data =&gt; &#123; console.log(data);&#125;);// ä¸ºå›è°ƒå‡½æ•°ä¼ å…¥å‚æ•° HelloWorld!eventEmitter.emit(\"data\", \"HelloWorld!\"); ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨ emit è§¦å‘äº‹ä»¶æ—¶ï¼Œè¿˜ä¼ é€’äº†é¢å¤–çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä¼šè¢«ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚ åŒæ­¥æ‰§è¡Œå¦å¤–ä¸€ä¸ªæ¯”è¾ƒå…³å¿ƒçš„é—®é¢˜ï¼Œäº‹ä»¶çš„è§¦å‘æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Œæˆ‘ä»¬åšä¸€ä¸ªå®éªŒ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"è§¦å‘äº† data äº‹ä»¶ï¼\");&#125;);console.log(\"start\");eventEmitter.emit(\"data\");console.log(\"end\"); ä¸Šé¢æˆ‘ä»¬æˆ‘ä»¬åœ¨è§¦å‘äº‹ä»¶å‰åéƒ½å‘æ§åˆ¶å°æ‰“å°äº†ä¿¡æ¯ï¼Œå¦‚æœè§¦å‘äº‹ä»¶åæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œé‚£ä¹ˆåé¢çš„æ‰“å°è¯­å¥å°±ä¼šå…ˆæ‰§è¡Œï¼Œå¦åˆ™å¦‚æœæ˜¯åŒæ­¥çš„è¯ï¼Œå°±ä¼šå…ˆæ‰§è¡Œäº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚æ‰§è¡Œç»“æœå¦‚ä¸‹ startè§¦å‘äº† data äº‹ä»¶ï¼end å¯è§äº‹ä»¶è§¦å‘æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚ offã€removeListeneroff ä¸ removeListener æ–¹æ³•çš„ä½œç”¨åŒ on å’Œ addLsitener çš„ä½œç”¨æ˜¯ç›¸åçš„ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ä¸ºæŸä¸ªäº‹ä»¶åˆ é™¤å¯¹åº”çš„å›è°ƒå‡½æ•° const &#123;EventEmitter&#125; = require('events');const eventEmitter = new EventEmitter();let listener1 = () =&gt; &#123; console.log(\"listener1\");&#125;let listener2 = () =&gt; &#123; console.log(\"listener2\");&#125;eventEmitter.on(\"data\", listener1);eventEmitter.on(\"data\", listener2);// ç¬¬ä¸€æ¬¡è§¦å‘ï¼Œä¸¤ä¸ªå›è°ƒå‡½æ•°å¦ä¼šæ‰§è¡ŒeventEmitter.emit(\"data\");eventEmitter.off(\"data\", listener1);// ç¬¬äºŒæ¬¡è§¦å‘ï¼Œåªä¼šæ‰§è¡Œ listener2eventEmitter.emit(\"data\"); æ§åˆ¶å°æ‰“å°ç»“æœä¸º listener1listener2listener2 ç¬¬ä¸€æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸¤ä¸ªäº‹ä»¶éƒ½ä¼šè§¦å‘ï¼Œç„¶åæˆ‘ä»¬ä¸ºäº‹ä»¶åˆ é™¤äº† listener1 è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡è§¦å‘æ—¶ï¼Œåªä¼šè§¦å‘ listener2ã€‚ æ³¨æ„ï¼šå¦‚æœæˆ‘ä»¬ä½¿ç”¨ on æˆ–è€… addListener ç»‘å®šçš„æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œé‚£ä¹ˆä¾¿æ— æ³•é€šè¿‡ off å’Œ removeListener å»è§£ç»‘ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå› ä¸ºå®ƒä¼šé€šè¿‡æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°çš„å¼•ç”¨æ˜¯å¦ç›¸åŒæ¥è§£ç»‘å‡½æ•°çš„ã€‚ onceä½¿ç”¨ once å¯ä»¥ç»‘å®šä¸€ä¸ªåªæ‰§è¡Œä¸€æ¬¡çš„å›è°ƒå‡½æ•°ï¼Œå½“è§¦å‘ä¸€æ¬¡ä¹‹åï¼Œè¯¥å›è°ƒå‡½æ•°ä¾¿è‡ªåŠ¨ä¼šè¢«è§£ç»‘ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.once(\"data\", () =&gt; &#123; console.log(\"data\");&#125;);eventEmitter.emit(\"data\");eventEmitter.emit(\"data\"); ä¸Šè¿°ä»£ç æˆ‘ä»¬ä½¿ç”¨ once ä¸º data äº‹ä»¶ç»‘å®šäº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç„¶åä½¿ç”¨ emit æ–¹æ³•è§¦å‘äº†ä¸¤æ¬¡ï¼Œå› ä¸ºä½¿ç”¨ once ç»‘å®šçš„å›è°ƒå‡½æ•°åªä¼šè¢«è§¦å‘ä¸€æ¬¡ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡è§¦å‘ï¼Œå›è°ƒå‡½æ•°ä¸ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥åœ¨æ§åˆ¶å°åªæ‰“å°äº†ä¸€æ¬¡ dataã€‚ å¦å¤–åŒ on ç»‘å®šçš„å›è°ƒå‡½æ•°ä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡ emit æ–¹æ³•å‘å›è°ƒå‡½æ•°ä¼ é€’å‚æ•° const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.once(\"data\", data =&gt; &#123; console.log(data);&#125;);eventEmitter.emit(\"data\", \"Hello\"); æ§åˆ¶å°æ‰“å°ç»“æœ Hello prependListenerã€prependOnceListenerä½¿ç”¨ on æˆ–è€… addListener ä¸ºäº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•°ä¼šè¢«æ ¹æ®æ·»åŠ çš„é¡ºåºæ‰§è¡Œï¼Œè€Œä½¿ç”¨ prependLsitener ç»‘å®šçš„äº‹ä»¶å›è°ƒå‡½æ•°ä¼šåœ¨å…¶ä»–å›è°ƒå‡½æ•°ä¹‹å‰æ‰§è¡Œ const &#123;EventEmitter&#125; = require('events');const eventEmitter = new EventEmitter();eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"on\");&#125;);eventEmitter.prependListener(\"data\", () =&gt; &#123; console.log(\"prepend\");&#125;);eventEmitter.emit(\"data\"); ä¸Šè¿°ä»£æ‰“æˆ‘ä»¬å…ˆç”¨æ§åˆ¶å°çš„æ‰“å°ç»“æœä¸º prependon prependOnceListener åŒ prependListenerï¼Œä¸è¿‡å®ƒç»‘å®šçš„å›è°ƒå‡½æ•°åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ const &#123;EventEmitter&#125; = require('events');const eventEmitter = new EventEmitter();eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"on\");&#125;);eventEmitter.prependOnceListener(\"data\", () =&gt; &#123; console.log(\"prepend once\");&#125;);eventEmitter.emit(\"data\");eventEmitter.emit(\"data\"); ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨ prependOnceListener ç»‘å®šäº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“è§¦å‘äº‹ä»¶æ—¶ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šåœ¨å…¶ä»–å‡½æ•°ä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥å½“ç¬¬äºŒæ¬¡æˆ‘ä»¬è§¦å‘å‡½æ•°æ—¶ï¼Œè¯¥å›è°ƒå‡½æ•°ä¸ä¼šæ‰§è¡Œï¼Œæ§åˆ¶å°æ‰“å°ç»“æœä¸º prepend onceonon removeAllListenersremoveAllListeners([event]) æ–¹æ³•å¯ä»¥åˆ é™¤äº‹ä»¶ event ç»‘å®šçš„æ‰€æœ‰å›è°ƒå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥ event å‚æ•°çš„è¯ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å°±ä¼šåˆ é™¤æ‰€æœ‰äº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•° const &#123;EventEmitter&#125; = require('events');const eventEmitter = new EventEmitter();eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data 1\");&#125;);eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data 2\");&#125;);eventEmitter.emit(\"data\");eventEmitter.removeAllListeners(\"data\");eventEmitter.emit(\"data\"); ä¸Šé¢ç¨‹åºä¸º data äº‹ä»¶ç»‘å®šäº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨ removeAllListeners æ–¹æ³•ä¹‹å‰åˆ†åˆ«è§¦å‘äº†ä¸€æ¬¡ data äº‹ä»¶ï¼Œç¬¬äºŒæ¬¡è§¦å‘ data äº‹ä»¶æ—¶ï¼Œä¸ä¼šæœ‰ä»»ä½•çš„å›è°ƒå‡½æ•°è¢«æ‰§è¡Œï¼ŒremoveAllListeners åˆ é™¤äº† data äº‹ä»¶ç»‘å®šçš„æ‰€æœ‰å›è°ƒå‡½æ•°ã€‚æ§åˆ¶å°çš„æ‰“å°ç»“æœä¸ºï¼š data 1data 2 eventNamesé€šè¿‡ eventNames æ–¹æ³•æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸ºå“ªäº›äº‹ä»¶ç»‘å®šäº†å›è°ƒå‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.on(\"start\", () =&gt; &#123; console.log(\"start\");&#125;);eventEmitter.on(\"end\", () =&gt; &#123; console.log(\"end\");&#125;);eventEmitter.on(\"error\", () =&gt; &#123; console.log(\"error\");&#125;);console.log(eventEmitter.eventNames()); // [ 'start', 'end', 'error' ] å¦‚æœæˆ‘ä»¬å°†æŸäº‹ä»¶çš„æ‰€æœ‰å›è°ƒå‡½æ•°åˆ é™¤åï¼Œæ­¤æ—¶ eventNames ä¾¿ä¸ä¼šè¿”å›è¯¥äº‹ä»¶äº† eventEmitter.removeAllListeners(\"error\");console.log(eventEmitter.eventNames()); // [ 'start', 'end' ] listenerCountlistenerCount æ–¹æ³•å¯ä»¥å¾—åˆ°æŸä¸ªäº‹ä»¶ç»‘å®šäº†å¤šå°‘ä¸ªå›è°ƒå‡½æ•° const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.on(\"data\", () =&gt; &#123;&#125;);eventEmitter.on(\"data\", () =&gt; &#123;&#125;);console.log(eventEmitter.listenerCount(\"data\")); // 2 setMaxLsitenersã€getMaxListenerssetMaxListeners æ˜¯ç”¨æ¥è®¾ç½®æœ€å¤šä¸ºæ¯ä¸ªäº‹ä»¶ç»‘å®šå¤šå°‘ä¸ªå›è°ƒå‡½æ•°ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯å¯ä»¥ç»‘å®šè¶…è¿‡è®¾ç½®çš„æ•°ç›®çš„å›è°ƒå‡½æ•°çš„ï¼Œä¸è¿‡å½“ä½ ç»‘å®šè¶…è¿‡æŒ‡å®šæ•°ç›®çš„å›è°ƒå‡½æ•°æ—¶ï¼Œä¼šåœ¨æ§åˆ¶å°ç»™å‡ºä¸€ä¸ªè­¦å‘Š const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();// è®¾ç½®åªèƒ½ä¸ºæ¯ä¸ªå›è°ƒå‡½æ•°ç»‘å®š 1 ä¸ªå›è°ƒå‡½æ•°eventEmitter.setMaxListeners(1);// ä¸º data äº‹ä»¶ç»‘å®šäº†ä¸‰ä¸ªå›è°ƒå‡½æ•°eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data 1\");&#125;);eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data 2\");&#125;);eventEmitter.on(\"data\", () =&gt; &#123; console.log(\"data 3\");&#125;); è¿è¡Œä¸Šè¿°ç¨‹åºï¼Œæ§åˆ¶å°æ‰“å°ç»“æœä¸º data 1data 2data 3(node:36928) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 2 data listeners added to [EventEmitter]. Use emitter.setMaxListeners() to increase limit å¯è§äº‹ä»¶ç»‘å®šçš„ä¸‰ä¸ªå›è°ƒå‡½æ•°éƒ½å¯ä»¥è¢«è§¦å‘ï¼Œå¹¶ä¸”åœ¨æ§åˆ¶å°æ‰“å°å‡ºäº†ä¸€æ¡è­¦å‘Šä¿¡æ¯ã€‚ getMaxListeners æ˜¯è·å¾—èƒ½ä¸ºæ¯ä¸ªäº‹ä»¶ç»‘å®šå¤šå°‘ä¸ªå›è°ƒå‡½æ•°çš„æ–¹æ³•ï¼Œä½¿ç”¨ setMaxListeners è®¾ç½®çš„å€¼æ—¶å¤šå°‘ï¼Œè¿”å›çš„å€¼å°±æ˜¯å¤šå°‘ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.setMaxListeners(1);console.log(eventEmitter.getMaxListeners()); // 1 å¦‚æœæ²¡æœ‰ä½¿ç”¨ setMaxLsiteners è¿›è¡Œè®¾ç½®ï¼Œé‚£ä¹ˆé»˜è®¤èƒ½å¤Ÿä¸ºæ¯ä¸ªäº‹ä»¶æœ€å¤šç»‘å®š 10 ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ EventEmitter çš„ defaultMaxListeners å±æ€§è·å¾—è¯¥å€¼ const &#123;EventEmitter&#125; = require(\"events\");console.log(EventEmitter.defaultMaxListeners); // 10 listenersã€rawListenerså½“æˆ‘ä»¬ä½¿ç”¨ once ç»‘å®šä¸€ä¸ªå›è°ƒå‡½æ•°æ—¶ï¼Œä¸ä¼šç›´æ¥ä¸ºè¯¥äº‹ä»¶ç»‘å®šè¯¥å‡½æ•°ï¼Œè€Œæ˜¯ä¼šä½¿ç”¨ä¸€ä¸ªå‡½æ•°åŒ…è£…è¯¥å‡½æ•°ï¼Œè¿™ä¸ªåŒ…è£…å‡½æ•°ç§°ä¸º wrapperï¼Œç„¶åä¸ºè¯¥äº‹ä»¶ç»‘å®š wrapper å‡½æ•°ï¼Œåœ¨ wrapper å‡½æ•°å†…éƒ¨ï¼Œè®¾å®šäº†å½“æ‰§è¡Œä¸€æ¬¡ä¹‹åå°†è‡ªå·±è§£ç»‘çš„é€»è¾‘ã€‚ listeners è¿”å›æŒ‡å®šäº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•°ç»„æˆçš„æ•°ç»„ï¼Œè€Œ rawListeners ä¹Ÿæ˜¯è¿”å›æŒ‡å®šäº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•°ç»„æˆçš„æ•°ç»„ï¼Œä¸ listeners ä¸åŒçš„æ˜¯ï¼Œå¯¹äº once ç»‘å®šçš„å›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ wrapperï¼Œè€Œä¸æ˜¯åŸç”Ÿç»‘å®šçš„å‡½æ•°ã€‚ const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.once(\"data\", () =&gt; &#123; console.log(\"once\");&#125;)let fns = eventEmitter.listeners(\"data\");// once ç»‘å®šçš„å‡½æ•°ï¼Œä¸æ˜¯ wrapperï¼Œå†…éƒ¨æ²¡æœ‰è§£ç»‘çš„é€»è¾‘ï¼Œæ‰€ä»¥åé¢è§¦å‘ data äº‹ä»¶æ—¶è¿˜ä¼šæ‰§è¡Œ once ç»‘å®šçš„å‡½æ•°fns[0]()eventEmitter.emit(\"data\"); æ§åˆ¶å°æ‰“å°ç»“æœä¸º onceonce ä¸‹é¢å°†ä¸Šé¢çš„ listeners æ›¿æ¢ä¸º rawListeners const &#123;EventEmitter&#125; = require(\"events\");const eventEmitter = new EventEmitter();eventEmitter.once(\"data\", () =&gt; &#123; console.log(\"once\");&#125;)let fns = eventEmitter.rawListeners(\"data\");// å› ä¸ºè¿”å›çš„æ˜¯ once ç»‘å®šå‡½æ•°çš„ wrapperï¼Œå…¶å†…éƒ¨æœ‰æ‰§è¡Œä¸€æ¬¡åè§£ç»‘çš„é€»è¾‘// æ‰€ä»¥åé¢è§¦å‘äº‹ä»¶æ—¶ once ç»‘å®šçš„å‡½æ•°ä¸ä¼šå†æ‰§è¡Œfns[0]()eventEmitter.emit(\"data\"); æ§åˆ¶å°çš„æ‰“å°ç»“æœä¸º once å®ç°ä¸€ä¸ª EventEmitteråœ¨è¿™ä¸ªå°èŠ‚å°†ä»é›¶å®ç°ä¸€ä¸ª EventEmitterï¼Œæ¥åŠ æ·±å¯¹è¯¥æ¨¡å—çš„ç†è§£ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ª listeners æ¥å­˜å‚¨æ‰€æœ‰ç»‘å®šçš„å›è°ƒå‡½æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ª Map å¯¹è±¡ï¼Œé”®æ˜¯äº‹ä»¶åï¼Œè€Œå€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­ä¿å­˜çš„æ˜¯è¯¥äº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚ class EventEmitter &#123; constructor() &#123; this.listeners = new Map(); &#125;&#125; onã€addListenerä½¿ç”¨ on ç»‘å®šå›è°ƒå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å…ˆåˆ¤æ–­ Map é›†åˆä¸­æ˜¯å¦æœ‰ä¸ºè¯¥äº‹ä»¶ç»‘å®šå›è°ƒå‡½æ•°ï¼Œå¦‚æœæœ‰å–å‡ºå¯¹åº”æ•°ç»„ï¼Œå¹¶æ·»åŠ è¯¥å›è°ƒå‡½æ•°è¿›æ•°ç»„ï¼Œæ²¡æœ‰åˆ™æ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ·»åŠ è¯¥å›è°ƒå‡½æ•°ï¼Œå¹¶æ·»åŠ è¿› Map é›†åˆ on(event, callback) &#123; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); fns.push(callback);&#125; addListener çš„åŠŸèƒ½ä¸ on æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨ on æ–¹æ³•å³å¯ addListener(event, callback) &#123; this.on(event, callback);&#125; emitå½“æˆ‘ä»¬ä½¿ç”¨ emit è§¦å‘äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ä» Map å–å‡ºå¯¹åº”çš„å›è°ƒå‡½æ•°ç»„æˆçš„æ•°ç»„ï¼Œç„¶åä¾æ¬¡å–å‡ºå‡½æ•°æ‰§è¡Œã€‚å¦å¤–æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ emit ä¼ é€’å‚æ•° emit(event, ...args) &#123; if(!this.listeners.has(event)) &#123; return; &#125; let fns = this.listeners.get(event); let values = []; for(let fn of fns) &#123; values.push(fn); &#125; for (let fn of values) &#123; fn(...args); &#125;&#125; è¿™é‡Œä½ å¯èƒ½ä¼šè§‰å¾—æˆ‘å†™çš„æœ‰ç‚¹å¤æ‚ï¼Œæ‰€ä»¥ä½ ä¼šè§‰å¾—ç›´æ¥è¿™ä¹ˆå†™æ›´å¥½ emit(event, ...args) &#123; if(!this.listeners.has(event)) &#123; return; &#125; for (let fn of fns) &#123; fn(...args); &#125;&#125; ä¸€å¼€å§‹æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆå†™çš„ï¼Œä½†æ˜¯å› ä¸º once ç»‘å®šçš„å‡½æ•°å®ƒåœ¨æ‰§è¡Œå®Œæ¯•åå°†è‡ªå·±ä»æ•°ç»„ä¸­ç§»é™¤ï¼Œå¹¶ä¸”æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œå¾ªç¯çš„æ—¶å€™ï¼Œæ•°ç»„æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ï¼Œä½¿ç”¨ä¸Šè¿°çš„æ–¹å¼ä¼šä½¿å¾—ä¸€äº›å›è°ƒå‡½æ•°ä¼šè¢«æ¼æ‰ï¼Œæ‰€ä»¥æˆ‘æ‰ä¼šå…ˆå°†æ•°ç»„ä¸­çš„å‡½æ•°å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åéå†è¿™ä¸ªæ–°çš„æ•°ç»„ï¼Œå› ä¸º once ç»‘å®šçš„å‡½æ•°å®ƒåªä¼šåˆ é™¤åŸæ•°ç»„ä¸­çš„å‡½æ•°ï¼Œè€Œä¸ä¼šåˆ é™¤æ–°çš„è¿™ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æ–°æ•°ç»„çš„é•¿åº¦åœ¨éå†çš„è¿‡ç¨‹ä¸ä¼šæ”¹å˜ï¼Œä¹Ÿå°±ä¸ä¼šå‘ç”Ÿæ¼æ‰å‡½æ•°æœªæ‰§è¡Œçš„æƒ…å†µã€‚ prependListenerå®ç° prependListener çš„é€»è¾‘åŒ on ä¸€æ ·ï¼Œä¸è¿‡æˆ‘ä»¬æ˜¯å¾€æ•°ç»„çš„æœ€å‰æ–¹æ·»åŠ å›è°ƒå‡½æ•° prependListener(event, callback) &#123; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); fns.unshift(callback);&#125; offã€removeListenerä½¿ç”¨ off æ–¹æ³•æ˜¯ç”¨æ¥è§£ç»‘äº‹ä»¶çš„ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°æŒ‡å®šçš„å‡½æ•°ï¼Œç„¶ååˆ é™¤å³å¯ off(event, callback) &#123; if(!this.listeners.has(event)) &#123; return; &#125; let fns = this.listeners.get(event); // æ‰¾å‡ºæ•°ç»„ä¸­çš„å›è°ƒå‡½æ•°ï¼Œç„¶ååˆ é™¤ for (let i = 0; i &lt; fns.length; i++) &#123; if(fns[i] === callback) &#123; fns.splice(i, 1); break; &#125; &#125; // å¦‚æœåˆ é™¤å›è°ƒå‡½æ•°åï¼Œæ•°ç»„ä¸ºç©ºï¼Œåˆ™åˆ é™¤è¯¥äº‹ä»¶ if (fns.length === 0) &#123; this.listeners.delete(event); &#125;&#125; removeListener åŒ off çš„ä½œç”¨ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨å†…éƒ¨ç›´æ¥è°ƒç”¨ off æ–¹æ³•å³å¯ removeListener(event, callback) &#123; this.off(event, callback);&#125; onceã€prependOnceListenerä½¿ç”¨ once ç»‘å®šä¸€ä¸ªåªæ‰§è¡Œä¸€æ¬¡çš„å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†ç»‘å®šçš„å›è°ƒå‡½æ•°ä½¿ç”¨ä¸€ä¸ªå‡½æ•°åŒ…è£…ä¸€ä¸‹ï¼Œç„¶åæ·»åŠ è¿›æ•°ç»„ä¸­ï¼Œè¿™ä¸ªåŒ…è£…å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸º wrapperã€‚åœ¨åŒ…è£…å‡½æ•°ä¸­ï¼Œå½“æ‰§è¡Œä¸€éåä¼šå°†è‡ªå·±ä»æ•°ç»„ä¸­åˆ é™¤ once(event, callback) &#123; let wrapper = (...args) =&gt; &#123; callback(...args); this.off(event, wrapper); &#125; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); fns.push(wrapper);&#125; prependOnceListener çš„å®ç°åŒ onceï¼Œåªæ˜¯å‘æ•°ç»„çš„å¼€å¤´æ’å…¥å‡½æ•°ï¼Œå°†ä¸Šé¢ä»£ç ä¸­çš„ push æ¢ä¸º unshift å³å¯ prependOnceListener(event, callback) &#123; let wrapper = (...args) =&gt; &#123; callback(...args); this.off(event, wrapper); &#125; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); fns.unshift(wrapper);&#125; removeAllListenersç›´æ¥ä»åˆ é™¤å¯¹åº”çš„äº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥å…·ä½“äº‹ä»¶çš„è¯ï¼Œåˆ™éœ€è¦åˆ é™¤æ‰€æœ‰çš„äº‹ä»¶ removeAllListeners(event) &#123; // å¦‚æœæ²¡æœ‰ä¼ å…¥ eventï¼Œåˆ™åˆ é™¤æ‰€æœ‰äº‹ä»¶ if (event === undefined) &#123; this.listeners = new Map(); return; &#125; this.listeners.delete(event);&#125; eventNamesè·å¾—å·²ç»ç»‘å®šäº†å“ªäº›äº‹ä»¶ eventNames() &#123; return [...this.listeners.keys()];&#125; listenerCountè·å¾—æŸäº‹ä»¶ç»‘å®šå¯å¤šå°‘ä¸ªå›è°ƒå‡½æ•° listenerCount(event) &#123; return this.listeners.get(event).length;&#125; ä¸Šè¿°çš„å®ç°æœ‰ä¸€ä¸ª bugï¼Œé‚£å°±æ˜¯æ— æ³•åˆ é™¤ä½¿ç”¨ once ç»‘å®šçš„å‡½æ•°ï¼Œæˆ‘çš„æƒ³æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ª Map å°† once ç»‘å®šçš„å‡½æ•°åŒå¯¹åº”çš„ wrapper å¯¹åº”ï¼Œåˆ é™¤æ—¶å³å¯æ ¹æ® once çš„å›è°ƒå‡½æ•°æ‰¾åˆ°å¯¹åº”çš„ wrapper ç„¶ååˆ é™¤ constructor() &#123; this.listeners = new Map(); // ä¿å­˜ once çš„å›è°ƒå‡½æ•°ä¸å¯¹åº”çš„ wrapper this.onceToWrapper = new Map();&#125;once(event, callback) &#123; let wrapper = (...args) =&gt; &#123; callback(...args); // åˆ é™¤ä¹‹å‰ï¼Œåˆ é™¤ callback å’Œ wrapper çš„å…³ç³» this.onceToWrapper.delete(callback); this.off(event, wrapper); &#125; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); // æ·»åŠ ä¹‹å‰ï¼Œç»‘å®š callback å’Œ wrapper çš„å…³ç³» this.onceToWrapper.set(callback, wrapper); fns.push(wrapper);&#125;prependOnceListener(event, callback) &#123; let wrapper = (...args) =&gt; &#123; callback(...args); // åŒä¸Š this.onceToWrapper.delete(callback); this.off(event, wrapper); &#125; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); // åŒä¸Š this.onceToWrapper.set(callback, wrapper); fns.unshift(wrapper);&#125;off(event, callback) &#123; if(!this.listeners.has(event)) &#123; return; &#125; let fns = this.listeners.get(event); // å…ˆä» onceToWrapper ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰å¯¹åº”çš„ wrapperï¼Œå¦‚æœæœ‰è¯´æ˜æ˜¯ once ç»‘å®šçš„ callback = this.onceToWrapper.get(callback) || callback; for (let i = 0; i &lt; fns.length; i++) &#123; if(fns[i] === callback) &#123; fns.splice(i, 1); break; &#125; &#125; if (fns.length === 0) &#123; this.listeners.delete(event); &#125;&#125; å…¨éƒ¨ä»£ç å¦‚ä¸‹ class EventEmitter &#123; constructor() &#123; this.listeners = new Map(); this.onceToWrapper = new Map(); &#125; on(event, callback) &#123; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); fns.push(callback); &#125; addListener(event, callback) &#123; this.on(event, callback); &#125; emit(event, ...args) &#123; if(!this.listeners.has(event)) &#123; return; &#125; let fns = this.listeners.get(event); let values = []; for(let fn of fns) &#123; values.push(fn); &#125; for (let fn of values) &#123; fn(...args); &#125; &#125; prependListener(event, callback) &#123; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); fns.unshift(callback); &#125; off(event, callback) &#123; if(!this.listeners.has(event)) &#123; return; &#125; let fns = this.listeners.get(event); callback = this.onceToWrapper.get(callback) || callback; for (let i = 0; i &lt; fns.length; i++) &#123; if(fns[i] === callback) &#123; fns.splice(i, 1); break; &#125; &#125; if (fns.length === 0) &#123; this.listeners.delete(event); &#125; &#125; removeListener(event, callback) &#123; this.off(event, callback); &#125; once(event, callback) &#123; let wrapper = (...args) =&gt; &#123; callback(...args); this.onceToWrapper.delete(callback); this.off(event, wrapper); &#125; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); this.onceToWrapper.set(callback, wrapper); fns.push(wrapper); &#125; prependOnceListener(event, callback) &#123; let wrapper = (...args) =&gt; &#123; callback(...args); this.onceToWrapper.delete(callback); this.off(event, wrapper); &#125; if(!this.listeners.has(event)) &#123; this.listeners.set(event, []); &#125; let fns = this.listeners.get(event); this.onceToWrapper.set(callback, wrapper); fns.unshift(wrapper); &#125; removeAllListeners(event) &#123; if (event === undefined) &#123; this.listeners = new Map(); return; &#125; this.listeners.delete(event); &#125; eventNames() &#123; return [...this.listeners.keys()]; &#125; listenerCount(event) &#123; return this.listeners.get(event).length; &#125;&#125; å‚è€ƒæ–‡çŒ® How to code your own event emitter in Node.js: a step-by-step guide Nodejs|Events","tags":[{"name":"EventEmitter","slug":"EventEmitter","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/EventEmitter/"}]},{"title":"ES6ï¼šç”¨æ¨¡å—å°è£…ä»£ç ","date":"2021-03-10T16:00:00.000Z","path":"/ES6ï¼šç”¨æ¨¡å—å°è£…ä»£ç /","text":"åœ¨æ—©æœŸï¼ŒJavaScript ä¸€èˆ¬æ˜¯ç”¨æ¥å½“åšç‹¬ç«‹æ‰§è¡Œçš„è„šæœ¬ï¼Œå®ƒä»¬çš„ç¨‹åºæ¯”è¾ƒå°ï¼Œéšç€ JavaScript çš„å‘å±•ï¼ŒJavaScript çš„ç¨‹åºä¹Ÿæ›´åŠ çš„å¤æ‚ï¼Œæ‰€ä»¥å°±éœ€è¦å°†ç¨‹åºæŒ‰æ¨¡å—åˆ’åˆ†ï¼Œå¹¶ä¸”æ¨¡å—ä¹‹é—´å¯ä»¥äº’ç›¸å¯¼å…¥ï¼Œç”±æ­¤å‚¬ç”Ÿäº†å¾ˆå¤šçš„è§„èŒƒï¼Œå¦‚ CMD ä¸ AMDï¼Œç°å¦‚ä»Š ES6 ä¹Ÿæä¾›åŸç”Ÿçš„æ¨¡å—æœºåˆ¶æ”¯æŒã€‚ æ¨¡å—çœŸæ­£çš„é­”åŠ›æ‰€åœ¨æ˜¯ä»…å¯¼å‡ºå’Œå¯¼å…¥ä½ éœ€è¦çš„ç»‘å®šï¼Œè€Œä¸æ˜¯å°†æ‰€ç”¨ä¸œè¥¿éƒ½æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚åªæœ‰å¾ˆå¥½åœ°ç†è§£äº†å¯¼å‡ºå’Œå¯¼å…¥æ‰èƒ½ç†è§£æ¨¡å—ä¸è„šæœ¬çš„åŒºåˆ«ã€‚ æ¨¡å—çš„å¯¼å‡ºé€šè¿‡ export å…³é”®å­—å¯ä»¥å°†ä¸€ä¸ªå€¼ã€å‡½æ•°ã€å¯¹è±¡å¯¼å‡ºï¼Œå¦‚ export const a = 1;export function add(x, y) &#123; return x + y;&#125;export const obj = &#123; name: \"Alice\", age: 18&#125;;export class Person &#123; constructor(name) &#123; this.name = name; &#125;&#125; æ¨¡å—ä¸æ”¯æŒåŠ¨æ€çš„å¯¼å‡ºï¼Œä¸èƒ½åœ¨å‡½æ•°æˆ–è€… if è¯­å¥å—å†…å¯¼å‡º if (condition) &#123; // è¿™æ ·çš„è¯­æ³•æ˜¯ä¸å…è®¸çš„ export ...&#125; æˆ‘ä»¬å¯¼å‡ºå˜é‡æ—¶ï¼Œå¯ä»¥é€šè¿‡ as ä¸ºå˜é‡é‡å‘½åï¼Œä¾‹å¦‚ function add() &#123;&#125;// å°† add é‡å‘½åä¸º sumï¼Œåç»­å¯¼å…¥æ—¶ç›´æ¥å¯¼å…¥ sumexport add as sum æ¨¡å—çš„å¯¼å…¥é€šè¿‡ import è¯­æ³•å¯ä»¥åœ¨å…¶ä»–æ¨¡å—å¯¼å‡ºçš„å†…å®¹è¿›è¡Œå¯¼å…¥ï¼Œä¾‹å¦‚ a.js å¯¼å‡ºå¦‚ä¸‹ // a.jsexport let name = \"Alice\"; æˆ‘ä»¬åœ¨ b.js ä¸­ä½¿ç”¨ import è¯­å¥è¿›è¡Œå¯¼å…¥ // b.jsimport &#123;name&#125; from \"./a.js\";console.log(name); // Alice éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œimport å¯¼å…¥ä¸ºåªè¯»å¯¼å…¥ï¼Œå³ä¸èƒ½ä¿®æ”¹å¯¼å…¥çš„å€¼ import &#123;name&#125; from \"./a.js\";// ä¸‹é¢çš„è¡Œä¸ºå°†æŠ¥é”™ï¼ŒUncaught TypeError: Assignment to constant variable.name = \"Bob\"; ä½†æ˜¯è€ƒè™‘ä¸‹é¢çš„æƒ…å†µ // a.jsexport let name = \"Alice\";export function setName(value) &#123; name = value;&#125; // b.jsimport &#123;name, setName&#125; from \"./a.js\";// å¯ä»¥é€šè¿‡ setName ä¿®æ”¹ namesetName(\"Bob\");console.log(name); // Bob å¯ä»¥é€šè¿‡ setName æ¥ä¿®æ”¹ name çš„å€¼ã€‚ åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ as è¯­æ³•ä¸ºå¯¼å…¥çš„å˜é‡é‡å‘½å // b.jsimport &#123;name as alice&#125; from \"./a.js\";console.log(alice); // Alice é€šè¿‡ **import *** å¯ä»¥å¯¼å…¥æ¨¡å—ä¸­çš„æ‰€æœ‰å†…å®¹ import * as a from './a.js'console.log(a.name); // Alice æ¨¡å—çš„é»˜è®¤å€¼æˆ‘ä»¬å¯ä»¥é€šè¿‡ export default å¯¼å‡ºæ¨¡å—çš„é»˜è®¤å€¼ // a.jsfunction add(x, y) &#123; return x + y;&#125;export default add é€šè¿‡ export default å¯¼å‡ºçš„å˜é‡å¯ä»¥ç›´æ¥é€šè¿‡ import å¼•ç”¨ // b.jsimport add from './a.js' é»˜è®¤å¯¼å‡ºè¿˜å¯ä»¥å†™ä¸º export add as default è¿™ç§å†™æ³•åŒ export default çš„æ•ˆæœä¸€è‡´ï¼Œå¦å¤–å¯ä»¥é€šä¸‹é¢çš„è¿™ç§æ–¹å¼ä¸ºé»˜è®¤å¯¼å…¥é‡å‘½å // ä¸ºé»˜è®¤å¯¼å…¥é‡å‘½åimport &#123;default as add&#125; from './a.js' å½“åŒæ—¶å¯¼å…¥é»˜è®¤å¯¼å‡ºä¸å…¶ä»–å¯¼å‡ºæ—¶ï¼Œå¯ä»¥è¿™ä¹ˆå†™ // a.js// ä¸€èˆ¬å¯¼å‡ºexport let name = \"Alice\";// é»˜è®¤å¯¼å‡ºexport default function add() &#123; return x + y;&#125; // b.jsimport add, &#123;name&#125; from './a.js'; æµè§ˆå™¨ä¸­ä½¿ç”¨æ¨¡å—åœ¨ script ä¸­ä½¿ç”¨æ¨¡å—è¦åœ¨ script æ ‡ç­¾ä¸­ä½¿ç”¨æ¨¡å—ï¼Œéœ€è¦è®¾ç½® script æ ‡ç­¾çš„ type=â€moduleâ€ &lt;script type=\"module\"&gt; import add from './a.js';&lt;/script&gt;&lt;script type=\"module\" src=\"./b.js\"&gt;&lt;/script&gt; æ¨¡å—åŠ è½½é¡ºåºå¦‚æœ script çš„ type å±æ€§è¢«è®¾ç½®ä¸ºäº† moduleï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨ä¸ºæ¯ä¸€ä¸ª script æ ‡ç­¾æ·»åŠ ä¸€ä¸ª defer å±æ€§ï¼Œå½“è§£æåˆ°æ­¤ script æ ‡ç­¾æ—¶ï¼Œå®ƒä¼šç«‹å³ä¸‹è½½è¯¥æ¨¡å—æ–‡ä»¶ï¼Œä½†æ˜¯ä¸‹è½½å®Œæˆåä¸ä¼šæ‰§è¡Œï¼Œåªæœ‰ç­‰åˆ°æ–‡æ¡£è§£æå®Œæ¯•æ‰ä¼šæ‰§è¡Œã€‚ å¹¶ä¸”æ‰§è¡Œçš„é¡ºåºä¸ script å®šä¹‰çš„é¡ºåºæœ‰å…³ï¼Œå®šä¹‰åœ¨å‰çš„ script æ ‡ç­¾å…ˆæ‰§è¡Œ &lt;script type=\"module\" src=\"./module1.js\"&gt;&lt;/script&gt;&lt;script type=\"module\" src=\"./module2.js\"&gt;&lt;/script&gt; è™½ç„¶å¯èƒ½ module2.js å…ˆä¸‹è½½å®Œæ¯•ï¼Œä½†æ˜¯ module1.js å®šä¹‰åœ¨ç­¾åï¼Œæ‰€ä»¥ module1.js ä¼šå…ˆäº module2.js æ‰§è¡Œã€‚ ä¸€ä¸ªæ¨¡å—ä¼šè¢«å¤šä¸ªæ¨¡å—æ‰€å¼•ç”¨ï¼Œä½†æ˜¯æ‰€æœ‰çš„æ¨¡å—åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœæœ‰å¤šä¸ªæ¨¡å—å¯¼å…¥åŒä¸€æ¨¡å—ï¼Œç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶ï¼Œæ‰§è¡Œè¯¥æ¨¡å—ï¼Œç„¶åæ”¾å…¥ç¼“å­˜ï¼Œç¬¬äºŒä¸ªåŠä»¥åå¯¼å…¥è¯¥æ¨¡å—æ—¶ç›´æ¥ä»ç¼“å­˜ä¸­è·å¾—å¯¼å…¥çš„æ¨¡å—ï¼Œè€Œä¸ä¼šå†æ¬¡æ‰§è¡Œæ­¤æ¨¡å—ã€‚ æµè§ˆå™¨ä¸­çš„æ¨¡å—è¯´æ˜ç¬¦å½“æˆ‘ä»¬ä½¿ç”¨ import å¯¼å…¥æ¨¡å—æ—¶ï¼Œæµè§ˆå™¨è¦æ±‚è·¯å¾„æ˜¯ä»¥ä¸‹å‡ ç§æ ¼å¼ï¼š . /ï¼šä»å½“å‰ç›®å½•å¼€å§‹è§£æ ../ï¼šä»çˆ¶ç›®å½•å¼€å§‹è§£æ /ï¼šä»æ ¹ç›®å½•å¼€å§‹è§£æ æ‰€ä»¥ä¸‹é¢çš„å¯¼å…¥è¯­å¥åœ¨æµè§ˆå™¨ä¸­æ˜¯æ— æ•ˆçš„ import add from 'example.js'import sum from 'example/index.js' å› ä¸ºä¸Šè¿°çš„å¯¼å…¥è·¯å¾„ä¸æ˜¯ä»¥ ./ ../ æˆ–è€… / å¼€å¤´ï¼Œæ‰€ä»¥æ— æ³•è¢«æµè§ˆå™¨åŠ è½½ã€‚","tags":[{"name":"æ¨¡å—","slug":"æ¨¡å—","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%A8%A1%E5%9D%97/"}]},{"title":"ES6ï¼šProxyå’ŒReflect","date":"2021-03-09T16:00:00.000Z","path":"/ES6ï¼šProxyå’ŒReflect/","text":"åœ¨ ES6 ä¹‹å‰æˆ‘ä»¬å¾ˆéš¾æ¨¡ä»¿ä¸€ä¸ªå†…ç½®çš„å¯¹è±¡çš„è¡Œä¸ºï¼Œä¾‹å¦‚æ¨¡ä»¿æ•°ç»„ï¼Œå½“æ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ æ—¶ï¼Œlength çš„é•¿åº¦ +1ï¼Œå½“æ”¹å˜ length çš„å¤§å°æ—¶ï¼Œä¹Ÿä¼šå¯¹æ•°ç»„ä¸­çš„å…ƒç´ äº§ç”Ÿå½±å“ï¼Œæˆ‘ä»¬å¾ˆéš¾é€šè¿‡ç°æœ‰çš„è¯­æ³•å»åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œåœ¨ ES6 ä¸­ç»™æˆ‘ä»¬æä¾›äº† Proxyï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåˆ›å»ºå†…å»ºçš„å¯¹è±¡ã€‚ Proxy å¯ä»¥ä¸ºå¯¹è±¡åšä¸€å±‚ä»£ç†ï¼Œæ‹¦æˆªå¯¹è±¡çš„ä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ä¸ºå¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œè®¿é—®å¯¹è±¡çš„å±æ€§å€¼ï¼Œä½¿ç”¨ in æ“ä½œåˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§ç­‰ç­‰ï¼Œè¿™äº›æ“ä½œéƒ½å¯ä»¥è¢«æ‹¦æˆªï¼Œä»è€Œå¯ä»¥å¯¹è¦è®¿é—®çš„å±æ€§è¿›è¡ŒéªŒè¯ä»è€Œå†³å®šé‡‡ç”¨ä»€ä¹ˆè¡Œä¸ºã€‚ let target = &#123;&#125;;let proxy = new Proxy(target, &#123;&#125;);proxy.name = \"Alice\";console.log(proxy.name); // Aliceconsole.log(target.name); // Aliceproxy.name = \"Bob\";console.log(proxy.name); // Bobconsole.log(target.name); // Bob ä¸Šè¿°å¯¹ proxy çš„æ“ä½œä¼šè¢«æ— æ¡ä»¶çš„è½¬å‘åˆ° targetï¼Œproxy ä¸­å¹¶ä¸ä¼šå­˜å‚¨ name è¿™ä¸ªå±æ€§ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯é€šè¿‡è½¬å‘åˆ° target å®Œæˆçš„ã€‚æ‰€ä»¥å½“æˆ‘ä»¬ä¸º proxy.name èµ‹äºˆä¸€ä¸ªæ–°å€¼ï¼Œè¿™ä¸ªæ“ä½œä¼šè¢«è½¬å‘åˆ°targetï¼Œä¹Ÿå°±æ˜¯ä¸º target.name èµ‹äºˆä¸€ä¸ªæ–°å€¼ï¼Œå½“æˆ‘ä»¬è®¿é—® proxy.name å±æ€§çš„æ—¶å€™ï¼Œè¿™ä¸ªæ“ä½œä¹Ÿä¼šè¢«è½¬å‘åˆ° targetï¼Œè¿”å›çš„æ˜¯ target.name çš„å€¼ã€‚ Proxy å¯ä»¥æ‹¦æˆªä¸‹é¢çš„ä¸€äº›è¡Œä¸º ä¸‹é¢å°±å…·ä½“ä»‹ç»ç”¨æ³•ã€‚ setå½“æˆ‘ä»¬ä¸ºå¯¹è±¡çš„å±æ€§èµ‹å€¼æ—¶ï¼Œå¯ä»¥é€šè¿‡ set æ–¹æ³•æ¥æ‹¦æˆªè¿™ä¸ªè¡Œä¸ºï¼Œset æ–¹æ³•æ¥æ”¶å››ä¸ªå‚æ•°ï¼š trapTargetï¼štargetå¯¹è±¡ keyï¼šè¦å†™å…¥çš„å±æ€§ valueï¼šè¢«å†™å…¥çš„å±æ€§å€¼ receiverï¼šæ“ä½œå‘ç”Ÿçš„å¯¹è±¡ï¼Œä¾‹å¦‚ proxy.name è®¾ç½®å±æ€§å€¼æ—¶ï¼Œreceiver å°±æ˜¯ proxy let target = &#123;&#125;;let proxy = new Proxy(target, &#123; set(trapTarget, key, value, receiver) &#123; if (key === 'name') &#123; return false; &#125; Reflect.set(trapTarget, key, value, receiver); &#125;&#125;); ä¸Šé¢æˆ‘ä»¬æ‹¦æˆªäº†ä¸ºå±æ€§èµ‹å€¼çš„è¯·æ±‚ï¼Œå¦‚æœå½“æˆ‘ä»¬ä¸º name å±æ€§èµ‹å€¼æ—¶ï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½ä¸åšï¼Œå¦åˆ™å°±ç›´æ¥å°†æ“ä½œè½¬å‘ç»™ targetï¼Œä¸Šé¢ Reflect.set(traptarget, key, value, receiver) å°±æ˜¯å°†æ“ä½œè½¬å‘ç»™targetï¼ŒReflect.set æ¥æ”¶çš„å‚æ•°ä¸ set æ–¹æ³•ä¸€æ · proxy.name = \"Alice\";console.log(proxy.name); // undefinedconsole.log(target.name); // undefinedproxy.age = 10;console.log(proxy.age); // 10console.log(target.age); // 10 ä¸Šé¢æˆ‘ä»¬é€šè¿‡ proxy ä¸º name å±æ€§èµ‹å€¼ï¼Œå‘ç°å¹¶æ²¡æœ‰æˆåŠŸï¼Œæ‰“å°å‡ºçš„ç»“æœæ˜¯ undefinedï¼Œå› ä¸ºæˆ‘ä»¬æ‹¦æˆªäº†èµ‹å€¼è¯·æ±‚ï¼Œæ— æ³•ä¸º name å±æ€§èµ‹å€¼ï¼›ä½†æ˜¯å½“æˆ‘ä»¬ä¸ºå…¶ä»–å±æ€§èµ‹å€¼æ—¶ï¼Œå®ƒä¼šè¢«ç›´æ¥è½¬å‘åˆ° targetï¼Œæ‰€ä»¥èµ‹å€¼æ—¶æˆåŠŸçš„ã€‚ getå½“æˆ‘ä»¬è®¿é—®å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼Œå¯ä»¥é€šè¿‡ get æ–¹æ³•æ‹¦æˆªè¿™ä¸ªè¯·æ±‚ï¼Œget æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•° trapTarget key receiver å‚æ•°çš„å«ä¹‰åŒä¸Šï¼Œä¸å¤šåšè§£é‡Šã€‚ let proxy = new Proxy(target, &#123; // ... get(trapTarget, key, receiver) &#123; if(!(key in receiver))&#123; throw new Error(\"è¯¥å±æ€§ä¸å­˜åœ¨\"); &#125; Reflect.get(trapTarget, key, receiver); &#125;&#125;); ä¸Šé¢æˆ‘ä»¬æ‹¦æˆªäº†è®¿é—®å¯¹è±¡å±æ€§å€¼çš„è¯·æ±‚ï¼Œé¦–å…ˆæˆ‘ä»¬ä¼šæŸ¥æ‰¾å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¼šæŠ›å‡ºé”™è¯¯(è€Œä¸æ˜¯è¿”å› undefined)ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥é€šè¿‡ Reflect.get è½¬å‘ç»™ target proxy.gender = \"male\";console.log(proxy.sex); haså½“æˆ‘ä»¬ä½¿ç”¨ in æ“ä½œç¬¦åˆ¤æ–­å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ has æ–¹æ³•æ‹¦æˆªè¿™ä¸ªè¯·æ±‚ï¼Œhas æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•° trapTarget key let target = &#123; name: \"Alice\", age: 18&#125;;let proxy = new Proxy(target, &#123; has(trapTarget, key) &#123; if (key === 'age') &#123; return false; &#125; return Reflect.has(trapTarget, key); &#125;&#125;); å½“æŸ¥æ‰¾çš„ key çš„å€¼æ˜¯ age æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å› falseï¼Œå¦åˆ™ç›´æ¥è½¬å‘åˆ° target ä¸Š console.log(\"name\" in proxy); // trueconsole.log(\"age\" in proxy); // false deletePropertydelete æ“ä½œç”¨ä»¥åˆ é™¤å¯¹è±¡çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ deleteProperty æ¥æ‹¦æˆªè¿™ä¸€è¡Œä¸ºï¼ŒdeleteProperty æ¥æ”¶ä¸¤ä¸ªå‚æ•° trapTarget key let target = &#123; name: \"Alice\", age: 18&#125;;let proxy = new Proxy(target, &#123; deleteProperty(trapTarget, key) &#123; if (key === 'age') &#123; return false; &#125; else &#123; return Reflect.deleteProperty(trapTarget, key); &#125; &#125;&#125;); å½“æˆ‘ä»¬æƒ³åˆ é™¤ age å±æ€§æ—¶ï¼Œç›´æ¥è¿”å› false è€Œä¸åšåˆ é™¤æ“ä½œï¼Œè¡¨ç¤ºåˆ é™¤å¤±è´¥ï¼Œå½“æƒ³åˆ é™¤å…¶ä»–å±æ€§æ—¶ï¼Œåˆ™å°†æ“ä½œè½¬å‘ç»™ target console.log(proxy.age); // 18console.log(delete proxy.age); // falseconsole.log(proxy.age); // 18 å¯¹è±¡åŸå‹æˆ‘ä»¬å¯ä»¥é€šè¿‡ Object.setPrototypeOf å’Œ Object.getPrototypeOf ä¸ºå¯¹è±¡è®¾ç½®åŸå‹ä»¥åŠè®¿é—®å¯¹è±¡çš„åŸå‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ setPrototypeOf ä¸ getPrototypeOf æ¥æ‹¦æˆªè¿™ä¸ªè¡Œä¸ºã€‚setPrototypeOf æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š trapTarget protoï¼šåŸå‹ setPrototypeOf è¿”å› false è¡¨ç¤ºè®¾ç½®åŸå‹å¤±è´¥ï¼Œè¿”å›ä»»ä¸€é false å€¼ Object.setPrototype ä¼šè®¤ä¸ºåŸå‹è®¾ç½®æˆåŠŸ let target = &#123;&#125;;let proxy = new Proxy(target, &#123; setPrototypeOf(trapTarget, proto) &#123; if (!(\"name\" in proto)) &#123; return false; &#125; return Reflect.setPrototypeOf(target, proto); &#125;&#125;); ä¸Šé¢å½“æˆ‘ä»¬è®¾ç½®åŸå‹æ—¶ï¼Œå¦‚æœåŸå‹å¯¹è±¡æ²¡æœ‰ name å±æ€§ï¼Œæˆ‘ä»¬è¿”å› falseï¼Œè¡¨ç¤ºåŸå‹è®¾ç½®å¤±è´¥ let proto = &#123; age: 18&#125;;try &#123; Object.setPrototypeOf(proxy, proto);&#125; catch (e) &#123; console.log(\"åŸå‹è®¾ç½®å¤±è´¥\"); // âˆš&#125;console.log(Object.getPrototypeOf(proxy) === proto); // false getPrototype æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š tarpTarget getPrototype å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡æˆ–è€… nullï¼Œå¦åˆ™ä¼šæŠ¥é”™ let target = &#123; name: 'Alice'&#125;;let proxy = new Proxy(target, &#123; getPrototypeOf(trapTarget) &#123; if (\"name\" in trapTarget) &#123; return null; &#125; return Reflect.getPrototypeOf(trapTarget); &#125;&#125;); å¦‚æœå¯¹è±¡å…·æœ‰ name å±æ€§ï¼Œæˆ‘ä»¬å°±ç›´æ¥è¿”å› nullï¼Œå¦åˆ™èµ°é»˜è®¤è¡Œä¸º console.log(Object.getPrototypeOf(proxy)); // null å¯¹è±¡æ‰©å±•Object.isExtensible æ˜¯åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯æ‰©å±•çš„ï¼Œè€Œ Object.preventExtensions æ˜¯ç”¨æ¥è®¾ç½®å¯¹è±¡ä¸å¯æ‰©å±•çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ isExtensible å’Œ preventExtensions æ¥æ‹¦æˆªé»˜è®¤è¡Œä¸ºï¼Œå®ƒä»¬éƒ½æ¥æ”¶ä¸€ä¸ªå‚æ•° trapTarget ä¸”è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒisExtensible è¿”å›çš„å¸ƒå°”å€¼è¡¨ç¤ºååˆ†å¯æ‰©å±•ï¼Œè€Œ preventExtensions è¿”å›çš„å¸ƒå°”å€¼è¡¨ç¤ºæ˜¯å¦è®¾ç½®ä¸å¯æ‰©å±•ï¼Œè¿”å› false è¡¨ç¤ºä¸è®¾ç½®ä¸å¯æ‰©å±•ã€‚ isExtensiable è¿”å›çš„å€¼ä¸€å®šè¦ä¸ Object.isExtensible å’Œ Reflect.isExtensible è¿”å›çš„å€¼ç›¸åŒï¼Œå½“ preventExtensions è¿”å› false æ—¶ï¼ŒObject.preventExtensions ä¼šè®¤ä¸ºè®¾ç½®å¤±è´¥ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ let target = &#123;&#125;let proxy = new Proxy(target, &#123; isExtensible(target) &#123; return Reflect.isExtensible(target); &#125;, preventExtensions(target) &#123; return false; &#125;&#125;);console.log(Object.isExtensible(target)); // trueconsole.log(Object.isExtensible(proxy)); // truetry &#123; console.log(Object.preventExtensions(proxy));&#125; catch (e) &#123; console.log(e); // âˆš&#125;console.log(Object.isExtensible(target)); // trueconsole.log(Object.isExtensible(proxy)); // true å¯¹è±¡æè¿°ç¬¦å½“æˆ‘ä»¬è°ƒç”¨ Object.defineProperty æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ defineProperty æ¥æ‹¦æˆªè¿™ä¸€è¡Œä¸ºï¼ŒdefineProperty æ¥æ”¶ä¸‰ä¸ªå‚æ•° trapTarget key descriptor let target = &#123; name: \"Alice\"&#125;;let proxy = new Proxy(target, &#123; defineProperty(trapTarget, key, descriptor) &#123; if (typeof key === 'symbol') &#123; return false; &#125; return Reflect.defineProperty(trapTarget, key, descriptor); &#125;&#125;); ä¸Šè¿°æ‹¦æˆªäº† definePropertyï¼Œå½“é…ç½®çš„é”®ä¸º Symbol ç±»å‹æ—¶ï¼Œè¿”å› falseï¼Œè¡¨ç¤ºä¸å¯é…ç½®ï¼Œè€Œå¯¹äºå­—ç¬¦ä¸²ç±»å‹çš„é”®åˆ™è°ƒç”¨ Reflect è½¬å‘ç»™ target å¯¹è±¡ Object.defineProperty(proxy, \"age\", &#123; value: 18, writable: true, configurable: true, enumerable: true&#125;);console.log(proxy.age); // 18let sym = Symbol();try &#123; // ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºä¸å¯é…ç½® Symbol ç±»å‹çš„é”® Object.defineProperty(proxy, sym, &#123; value: \"Hello\" &#125;);&#125;catch (e) &#123; console.log(\"ä¸å¯é…ç½® Symbol é”®\") // âˆš&#125; Object.getOwnPropertyDescriptor æ–¹æ³•ä½¿ç”¨è·å¾—å±æ€§çš„æè¿°ç¬¦çš„ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨ getOwnPropertyDescriptor è¿›è¡Œæ‹¦æˆªï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•° trapTarget key è¿”å›å€¼å¯ä»¥æ˜¯ undefined æˆ–è€…ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è±¡ä¸­çš„å±æ€§åªèƒ½åŒ…æ‹¬ enumerable configurable value writable get set å¦‚æœè¿”å›çš„å¯¹è±¡é™¤äº†å…¶ä»–çš„å±æ€§ï¼Œé‚£ä¹ˆObject.getOwnPropertyDescriptor ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ let proxy = new Proxy(target, &#123; getOwnPropertyDescriptor(trapTarget, key) &#123; if (typeof key === 'symbol') &#123; return null; &#125; return Reflect.getOwnPropertyDescriptor(trapTarget, key); &#125;&#125;); ä¸Šé¢çš„ç¨‹åºè¡¨ç¤ºï¼Œæ— æ³•è·å¾—åˆ°é”®ä¸º Symbol ç±»å‹çš„æè¿°ç¬¦ã€‚ ownKeyså½“æˆ‘ä»¬è°ƒç”¨ Object.keysï¼ŒObject.getOwnPropertyNamesï¼ŒObject.getOwnPropertySymbolsï¼ŒObject.assign æ—¶ï¼Œé¦–å…ˆä¼šåœ¨å†…éƒ¨è°ƒç”¨ [[OwnPropertyKeys]] æ¥å¾—åˆ°ä¸€ä¸ªæ•°ç»„ç”¨äºä¸Šè¿°æ–¹æ³•ç­›é€‰ï¼ŒObject.keysï¼ŒObject.getOwnPropertyNames è¿”å›çš„ç»“æœå°† Symbol ç±»å‹çš„å€¼æ’é™¤åœ¨å¤–ï¼ŒObject.getOwnPropertySymbols å°†å­—ç¬¦ä¸²ç±»å‹çš„å€¼æ’é™¤åœ¨å¤–ï¼ŒObject.assign ä¸¤ç§ç±»å‹éƒ½æ”¯æŒã€‚ æˆ‘ä»¬é€šè¿‡ ownKeys è¿™ä¸ªæ–¹æ³•æ¥æ‹¦æˆª [[OwnPropertyKeys]] çš„è¡Œä¸ºï¼Œå®ƒåªæ¥å—ä¸€ä¸ªå‚æ•° trapTarget è¿”å›å€¼å¿…é¡»ä¸ºæ•°ç»„æˆ–è€…ç±»æ•°ç»„ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯ã€‚ let target = &#123; _name: \"Alice\", age: 18&#125;;let proxy = new Proxy(target, &#123; ownKeys(trapTarget) &#123; return Reflect.ownKeys(trapTarget).filter(item =&gt; &#123; return typeof item !== 'string' || item[0] !== '_' &#125;) &#125;&#125;);console.log(Object.keys(proxy)); // [ 'age' ] ä¸Šé¢çš„ç¨‹åºè¿‡æ»¤æ‰äº†ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„å±æ€§ï¼Œå› ä¸ºè¿™æ ·çš„å±æ€§è¡¨ç¤ºç§æœ‰å±æ€§ï¼Œä¸æƒ³è¢«è®¿é—®åˆ°ã€‚ apply å’Œ constructProxy è¿˜å¯ä»¥ç”¨æ¥ä»£ç†å‡½æ•°ï¼Œå¯ä»¥æ‹¦æˆªå‡½æ•°çš„è°ƒç”¨ã€‚æ ¹æ®è°ƒç”¨çš„æ–¹å¼ä¸åŒï¼Œæœ‰ä¸¤ä¸ªæ‹¦æˆªçš„æ–¹æ³• applyï¼šæ­£å¸¸è°ƒç”¨å‡½æ•° constructï¼šé€šè¿‡ new è°ƒç”¨å‡½æ•° apply æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•° trapTargetï¼šæ‰§è¡Œçš„å‡½æ•° thisArgumentï¼šå‡½æ•°å†…éƒ¨çš„ this argumentsListï¼šä¼ å…¥å‡½æ•°çš„å‚æ•°ï¼Œä»¥æ•°ç»„çš„å½¢å¼æ˜¾ç¤º construct æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•° trapTarget argumentsList let target = function(...values) &#123; return values.reduce((previousValue, currentValue) =&gt; previousValue + currentValue))&#125;;let proxy = new Proxy(target, &#123; apply(target, thisArg, argArray) &#123; argArray.forEach(item =&gt; &#123; if (typeof item !== 'number') &#123; throw new Error(\"å‚æ•°å¿…é¡»å…¨éƒ¨ä¸ºæ•°å­—\"); &#125; &#125;) return Reflect.apply(target, thisArg, argArray); &#125;&#125;);const result = proxy(1, 2, 3, 4);console.log(result); ä¸Šé¢çš„ç¨‹åºåˆ©ç”¨ apply æˆªè·äº†å‡½æ•°è°ƒç”¨æ¥åšå‚æ•°æ ¡éªŒï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°ä¸å…¨æ˜¯æ•°å­—çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚ æœ‰çš„æ—¶å€™å‡½æ•°åªèƒ½é€šè¿‡ new çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šåˆ¤æ–­ new.target å˜é‡æ¥çº æ­£è¡Œä¸ºï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æˆªè·æ™®é€šå‡½æ•°è°ƒç”¨ï¼Œç„¶åè¿”å›ä¸€ä¸ª new è°ƒç”¨çš„ç»“æœ function Person(name) &#123; this.name = name;&#125;let PersonProxy = new Proxy(Person, &#123; apply(target, thisArg, argArray) &#123; return Reflect.construct(target, argArray); &#125;&#125;);let alice = new PersonProxy(\"Alice\");console.log(alice instanceof Person); // truelet bob= PersonProxy(\"Bob\");console.log(bob instanceof Person); // true è¿™ä¸ªæ—¶å€™æ— è®ºæ˜¯æ™®é€šè°ƒç”¨è¿˜æ˜¯ new è°ƒç”¨ï¼Œè¿”å›çš„éƒ½æ˜¯ Person çš„å®ä¾‹å¯¹è±¡ã€‚ æ’¤é”€ä»£ç†ä¸Šé¢åˆ›å»ºçš„ä»£ç†å¯¹è±¡éƒ½æ˜¯ä¸å¯æ’¤é”€ï¼Œå°±æ˜¯è¯´å®ƒä¸€ç›´ä»£ç†ç€ç›®æ ‡å¯¹è±¡ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›ä»£ç†åœ¨æŸä¸ªæ—¶åˆ»å¤±æ•ˆï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦æ’¤é”€ä»£ç†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Promise.revecable æ–¹æ³•åˆ›å»ºèƒ½å¤Ÿæ’¤é”€çš„ä»£ç†å¯¹è±¡ï¼Œå®ƒæ¥æ”¶çš„å‚æ•°åŒ Proxy æ„é€ å‡½æ•°ç›¸åŒï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­å…·æœ‰ä¸¤ä¸ªå±æ€§ï¼š proxyï¼šå¯è¢«æ’¤é”€çš„ä»£ç†å¯¹è±¡ revokeï¼šè°ƒç”¨è¯¥æ–¹æ³•å¯æ’¤é”€ä»£ç†ï¼Œè°ƒç”¨è¯¥æ–¹æ³•åä»£ç†å¯¹è±¡ä¸å¯ç”¨ let target = &#123; name: \"Alice\"&#125;;let &#123;proxy, revoke&#125; = Proxy.revocable(target, &#123; get(target, key, receiver) &#123; return \"Bob\"; &#125;&#125;);console.log(proxy.name); // Bob// æ’¤é”€ä»£ç†ï¼Œæ­¤åä¸èƒ½ä½¿ç”¨ proxyrevoke();// æŠ¥é”™ï¼ŒTypeError: Cannot read property 'Symbol(nodejs.util.inspect.custom)' of nullconsole.log(proxy);","tags":[{"name":"Proxy","slug":"Proxy","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Proxy/"},{"name":"Reflect","slug":"Reflect","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Reflect/"}]},{"title":"ES6ï¼šPromiseä¸å¼‚æ­¥ç¼–ç¨‹","date":"2021-03-08T16:00:00.000Z","path":"/ES6ï¼šPromiseä¸å¼‚æ­¥ç¼–ç¨‹/","text":"å¼‚æ­¥ç¼–ç¨‹èƒŒæ™¯JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œæ„å‘³ç€åŒä¸€æ—¶åˆ»åªæœ‰ä¸€å¤„ä»£ç åœ¨æ‰§è¡Œï¼Œæ‰€ä»¥å®ƒçš„çº¿ç¨‹ä¸èƒ½è¢«é˜»å¡ä½ï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸€ä¸ªç›®çš„ï¼ŒJavaScript ä½¿ç”¨ä»»åŠ¡é˜Ÿåˆ—çš„æœºåˆ¶æ¥å®ç°å¼‚æ­¥ç¼–ç¨‹ã€‚å¼‚æ­¥ç¼–ç¨‹ä¸€èˆ¬æœ‰ä¸¤ç§æ¨¡å¼ äº‹ä»¶æ¨¡å‹ å›è°ƒæ¨¡å‹ äº‹ä»¶æ¨¡å‹æ˜¯æŒ‡ä¸ºæŸäº‹ä»¶ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œæ­¤å‡½æ•°ï¼Œä¸€èˆ¬åœ¨ DOM ç¼–ç¨‹ä¸­æ¯”è¾ƒå¸¸è§ï¼Œä¾‹å¦‚ä¸ºæŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ document.getElementById(\"btn\").addEventListener(\"click\", event =&gt; &#123; // å¤„ç†ç‚¹å‡»äº‹ä»¶&#125;) å›è°ƒæ¨¡å‹åœ¨ Node.js çš„ I/O æ“ä½œä¸­æ¯”è¾ƒå¸¸è§ï¼Œåœ¨è¯»å–æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬è‚¯å®šä¸èƒ½é˜»å¡çº¿ç¨‹ç­‰å¾…æ–‡ä»¶è¯»å–å®Œæ¯•ï¼Œç„¶åè¿›è¡Œæ“ä½œï¼Œè¿™é‡Œçš„è§£å†³åŠæ³•æ˜¯åœ¨è°ƒç”¨è¯»å–æ–‡ä»¶çš„å‡½æ•°æ—¶ï¼Œä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨æ–‡ä»¶è¢«è¯»å–å®Œæˆæ—¶ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”è¯»å–åˆ°çš„æ•°æ®ä¼šä½œä¸ºå‚æ•°ä¼ å…¥è¯¥å‡½æ•° const fs = require(\"fs\");// ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¤„ç†æ•°æ®çš„å›è°ƒå‡½æ•°ï¼Œå®ƒä¼šåœ¨æ–‡ä»¶è¯»å–å®Œæ¯•æ—¶æ‰§è¡Œfs.readFile(\"a.txt\", (err, data) =&gt; &#123; // å¤„ç†æ•°æ®&#125;)// ä¸‹é¢çš„ç¨‹åºä¸ç”¨ç­‰åˆ°æ–‡ä»¶è¯»å–å®Œæ¯•å³å¯æ‰§è¡Œ// å¦‚æœä¸‹é¢çš„ç¨‹åºè¦ç”¨åˆ°è¯»å–åˆ°çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥æ”¾åœ¨å›è°ƒå‡½æ•°ä¸­ å½“å›è°ƒå‡½æ•°åµŒå¥—è¾ƒå¤šæ—¶ï¼Œé€ æˆä»£ç ååˆ†éš¾ä»¥é˜…è¯»ï¼Œè¿™ç§æƒ…å†µç§°ä¹‹ä¸ºå›è°ƒåœ°ç‹±ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ ES6 ä¸­æå‡ºäº† Promiseï¼Œè¿›ä¸€æ­¥åœ¨ ES7 æå‡ºäº† async â€¦ await è¯­æ³•ã€‚ PromiseåŸºç¡€Promise çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ new Promise(fn1).then(fn2) å…¶ä¸­ fn1 å’Œ fn2 éƒ½æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œfn1 æ¥æ”¶ä¸¤ä¸ªå‚æ•° resolve å’Œ rejectï¼Œè¿™ä¸¤ä¸ªå‚æ•°ä¹Ÿéƒ½æ˜¯å‡½æ•°ï¼Œåªæœ‰å½“åœ¨ fn1 ä¸­è°ƒç”¨äº† resolve æ–¹æ³•åï¼Œfn2 æ–¹æ³•æ‰ä¼šè¢«æ‰§è¡Œã€‚æ‰€ä»¥ Promise å¯ä»¥ä¿è¯å‡½æ•°æ‰§è¡Œçš„é¡ºåºï¼Œå¹¶ä¸” fn1 å‘ resolve ä¼ å…¥çš„å‚æ•°è¢«è¢«ä¼ é€’ç»™ fn2 let promise = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(\"Hello\"); &#125;, 1000);&#125;);promise.then(data =&gt; &#123; console.log(data);&#125;); ä¸Šè¿°ä»£ç ä¼šåœ¨ 1s åæ‰“å°å‡º Helloï¼Œå› ä¸ºåœ¨ 1s åæ‰æ‰§è¡Œ resolve å‡½æ•°ï¼Œæ­¤æ—¶ fn2 æ‰ä¼šè¢«æ‰§è¡Œï¼Œå¹¶ä¸” Hello ä¼šä½œä¸ºå‚æ•°ä¼ å…¥ fn2ã€‚ ç°åœ¨æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹å›è°ƒæ¨¡å‹ä¸ Promise æ¨¡å‹ const fs = require(\"fs\");fs.readFile(\"a.txt\", (err, data) =&gt; &#123; if (err) return; fs.writeFile(\"b.txt\", data, err =&gt; &#123; &#125;)&#125;) let promise = new Promise((resolve, reject) =&gt; &#123; fs.readFile(\"a.txt\", (err, data) =&gt; &#123; if (err) reject(err) resolve(data) &#125;)&#125;);promise.then(data =&gt; &#123; fs.writeFile(\"b.txt\", data);&#125;) ä¸Šé¢çš„ç‰ˆæœ¬ä¸ºå›è°ƒæ¨¡å‹ç‰ˆæœ¬ï¼Œä¸‹é¢çš„ç‰ˆæœ¬ä¸º Promise ç‰ˆæœ¬ï¼Œä»å†™æ³•ä¸Šçœ‹å›è°ƒç‰ˆæœ¬æ˜¯ä¸€å±‚åµŒå¥—ä¸€å±‚ä»¥æ­¤æ¥ä¿è¯åŒæ­¥æ€§ï¼Œå¦‚æœæœ‰è¾ƒå¤šçš„åµŒå¥—çš„è¯ï¼Œä»£ç è‚¯å®šååˆ†éš¾è¯»ï¼Œä½“éªŒæ„Ÿååˆ†ä¸å¥½ï¼›è€Œ Promise çš„å†™æ³•åˆ™æ¯”è¾ƒåƒåŒæ­¥çš„å†™æ³•(å†™æ³•ä¸Šä¸åŒæ­¥çš„å†™æ³•ç±»ä¼¼ï¼Œä½†æ˜¯å®é™…ä¸Šè¿˜æ˜¯å¼‚æ­¥çš„)ï¼Œå³ä½¿åµŒå¥—å†å¤šï¼Œå¯è¯»æ€§ä¹Ÿååˆ†çš„å¥½ã€‚ é”™è¯¯å¤„ç†å¦‚æœåœ¨ fn1 ä¸­å‡ºç°äº†é”™è¯¯æ€ä¹ˆåŠï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬å³å°†ä»‹ç»çš„ rejectï¼Œå…¶å® Promise è¿˜æœ‰ä¸€ç§ç”¨æ³• new Promise(fn1).then(fn2, fn3) then å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‡½æ•°ï¼Œå½“åœ¨ fn1 ä¸­è°ƒç”¨ resolve æ–¹æ³•åï¼Œfn2 è¢«æ‰§è¡Œï¼Œå½“åœ¨ fn1 ä¸­æ‰§è¡Œ reject æ–¹æ³•åï¼Œfn3 è¢«æ‰§è¡Œã€‚resolve è¡¨ç¤ºå‡½æ•°æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œç”¨äºä¼ é€’æ•°æ®ï¼Œè€Œ reject è¡¨ç¤ºå‡½æ•°å‡ºé”™ï¼Œä¸€èˆ¬ç”¨äºä¼ é€’é”™è¯¯ï¼Œå‘ reject ä¼ é€’çš„å‚æ•°ä¼šè¢«ä¼ é€’ç»™ fn3ï¼Œæ‰€ä»¥ fn2 æ˜¯ fn1 æˆåŠŸæ‰§è¡Œåçš„å¤„ç†é€»è¾‘ï¼Œè€Œ fn3 æ˜¯ fn1 æ‰§è¡Œå‡ºé”™åçš„å¤„ç†é€»è¾‘ let promise = new Promise((resolve, reject) =&gt; &#123; fs.readFile(\"a.txt\", (err, data) =&gt; &#123; // å¦‚æœå‡ºé”™ï¼Œåˆ™è°ƒç”¨ reject æ–¹æ³•ï¼Œå¹¶å°†é”™è¯¯ä¿¡æ¯ä¼ å…¥ if (err) reject(err) resolve(data) &#125;)&#125;);promise.then(data =&gt; &#123; fs.writeFile(\"b.txt\", data);&#125;, err =&gt; &#123; console.log(err);&#125;); å…¶å®è¿˜æœ‰ä¸€ç§å†™æ³• new Promise(fn1).then(fn2).catch(fn3) è¿™ç§å†™æ³•ä¸ä¸Šé¢çš„å†™æ³•æ˜¯ä¸€æ ·çš„ promise.then(data =&gt; &#123; fs.writeFile(\"b.txt\", data);&#125;).catch(err =&gt; &#123; console.log(err);&#125;) é“¾å¼è°ƒç”¨ä¸‹é¢ç»§ç»­ä»‹ç» Promise çš„æ–°æ¨¡å¼ï¼Œé“¾å¼è°ƒç”¨ new Promise(fn1).then(fn2).then(fn3).then(fn4) å› ä¸ºæ¯ä¸€ä¸ª then æ–¹æ³•éƒ½è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œé“¾å¼çš„è°ƒç”¨ let promise = new Promise((resolve, reject) =&gt; &#123; console.log(1); resolve();&#125;).then(() =&gt; &#123; console.log(2);&#125;).then(() =&gt; &#123; console.log(3);&#125;).then(() =&gt; &#123; console.log(4);&#125;); ä¸Šé¢çš„ç¨‹åºä¼šä¾æ¬¡æ‰“å°å‡º 1 2 3 4ã€‚ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯é“¾å¼è°ƒç”¨å¦‚ä½•ä¼ é€’å€¼ï¼Œç­”æ¡ˆæ˜¯é€šè¿‡è¿”å›å€¼ let promise = new Promise((resolve, reject) =&gt; &#123; resolve(\"Hello\");&#125;).then(data =&gt; &#123; console.log(data); // é€šè¿‡ return å°†æ•°æ®ä¼ é€’åˆ°ä¸‹é¢çš„æ–¹æ³•ä¸­ return \"World\";&#125;).then(data =&gt; &#123; console.log(data);&#125;) ä¸Šè¿°çš„æ‰“å°ç»“æœä¸º HelloWorld æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å• then æ–¹æ³•çš„å®ç°æ¥ç†è§£ä¸Šé¢çš„é€»è¾‘ function then(fn) &#123; return new Promise((resolve, reject) =&gt; &#123; const result = fn(); resolve(result); &#125;) &#125; ä¸Šé¢åªæ˜¯ä¸ºäº†ç†è§£ä»£ç çš„ç®€å•å®ç°ï¼Œå¹¶ä¸æ˜¯ then æ–¹æ³•çš„çœŸæ­£å®ç°ã€‚ ä½†æ˜¯å¦‚æœä¼ å…¥ then ä¸­çš„å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡çš„è¯å°±æœ‰æ‰€ä¸åŒï¼Œåé¢é“¾å¼è°ƒç”¨ä¼ å…¥ then ä¸­çš„å‡½æ•°å¿…é¡»ç­‰åˆ°è¿”å› Promise æ‰§è¡Œ resolve æ–¹æ³•ä¹‹åæ‰ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”å‘ resolve ä¼ å…¥çš„å€¼ä¼šè¢«ä¼ é€’ let promise = new Promise(resolve =&gt; &#123; resolve();&#125;).then(() =&gt; &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; resolve(\"Hello World\"); &#125;, 1000) &#125;)&#125;).then(data =&gt; &#123; console.log(data); // Hello World&#125;) ä¸Šé¢ 1s ä¹‹åä¼šæ‰“å°å‡º Hello Worldã€‚æˆ‘ä»¬è¿›ä¸€æ­¥æ”¹è¿› then æ–¹æ³•çš„å®ç°æ¥ç†è§£ä¸Šè¿°çš„æ‰§è¡Œç»“æœ function then(fn) &#123; return new Promise((resolve, reject) =&gt; &#123; const result = fn(); if (result instanceof Promise) &#123; result.then(resolve); &#125; else &#123; resolve(result); &#125; &#125;)&#125; finallyåœ¨é“¾å¼è°ƒç”¨çš„æœ€åä¸€èˆ¬è°ƒç”¨ finally æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ— è®ºä¸Šé¢çš„é“¾å¼è°ƒç”¨æˆåŠŸæ‰§è¡Œï¼Œæˆ–è€…æ˜¯é“¾å¼è°ƒç”¨çš„è¿‡ç¨‹ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œä¼ é€’ç»™ finally æ–¹æ³•çš„å‡½æ•°æœ€ç»ˆéƒ½ä¼šè¢«æ‰§è¡Œ let promise = new Promise((resolve, reject) =&gt; &#123; resolve();&#125;).then(() =&gt; &#123; console.log(\"then ä¸­å‡½æ•°è¢«æ‰§è¡Œ\"); // âˆš&#125;).catch(() =&gt; &#123; console.log(\"catch ä¸­å‡½æ•°è¢«æ‰§è¡Œ\");&#125;).finally(() =&gt; &#123; console.log(\"finally ä¸­å‡½æ•°è¢«æ‰§è¡Œ\"); // âˆš&#125;) let promise = new Promise((resolve, reject) =&gt; &#123; reject();&#125;).then(() =&gt; &#123; console.log(\"then ä¸­å‡½æ•°è¢«æ‰§è¡Œ\"); &#125;).catch(() =&gt; &#123; console.log(\"catch ä¸­å‡½æ•°è¢«æ‰§è¡Œ\"); // âˆš&#125;).finally(() =&gt; &#123; console.log(\"finally ä¸­å‡½æ•°è¢«æ‰§è¡Œ\"); // âˆš&#125;) ç”±äºè¿™ä¸€ç‰¹æ€§ï¼Œfinally æ–¹æ³•ä¸€èˆ¬è¢«ç”¨äºè¿›è¡Œèµ„æºçš„å›æ”¶ã€‚ é™æ€æ–¹æ³•æœ¬èŠ‚è®²è¿° Promise çš„é™æ€æ–¹æ³•ï¼Œä¸è¿‡åœ¨è®²è§£é™æ€æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬è°ˆä¸€è°ˆ Promise å¯¹è±¡çš„çŠ¶æ€ï¼ŒPromise å¯¹è±¡æœ‰ä¸‰ç§çŠ¶æ€ï¼š pending resolved(æœ‰çš„åœ°æ–¹ç§°ä¸º fulfilled) rejected åœ¨è°ƒç”¨ resolve æˆ– reject æ–¹æ³•ä¹‹å‰ï¼ŒPromise å¯¹è±¡å¤„äº pending çŠ¶æ€ï¼Œæ­¤æ—¶ä¼ å…¥ then ä¸­çš„å‡½æ•°ä¸èƒ½è¢«æ‰§è¡Œï¼Œå½“è°ƒç”¨ resolve æ–¹æ³•åï¼ŒçŠ¶æ€ç”± pending å˜ä¸º resolvedï¼Œå½“è°ƒç”¨ reject åï¼ŒçŠ¶æ€ç”± pending å˜ä¸º rejectedï¼Œä¸€æ—¦çŠ¶æ€å˜ä¸º resolvedæˆ– rejected ä¹‹åï¼ŒçŠ¶æ€ä¸å¯æ”¹å˜ï¼Œå¹¶ä¸” resolvedå’Œ rejected çŠ¶æ€åªèƒ½ç”± pending çŠ¶æ€è½¬å˜è€Œæ¥ã€‚ å½“ Promise çš„çŠ¶æ€ä¸º resolvedæ—¶ï¼Œä¼ å…¥ then æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‡½æ•°å°±å¯ä»¥æ‰§è¡Œäº†ï¼Œå½“ Promise çš„çŠ¶æ€ä¸º rejected æ—¶ï¼Œä¼ å…¥ then çš„ç¬¬äºŒä¸ªå‡½æ•°æˆ–è€…ä¼ å…¥ catch æ–¹æ³•çš„å‡½æ•°å°±å¯ä»¥æ‰§è¡Œäº†ã€‚ ä¸‹é¢æˆ‘ä»¬ä»‹ç» Promise çš„é™æ€æ–¹æ³• Promise.resolve Promise.all Promise.allSettled Promise.race Promise.resolvePromise.resolve è¿”å›ä¸€ä¸ª Promiseï¼Œæ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒï¼Œè¿”å›ä¸åŒçš„å€¼ï¼Œåˆ†ä¸ºä¸‰ç§æƒ…å†µ ä¼ å…¥ä¸€ä¸ª Promise å¯¹è±¡ï¼Œç›´æ¥è¿”å›è¯¥ Promise å¯¹è±¡ let promise = new Promise((resolve, reject) =&gt; &#123;&#125;)let res = Promise.resolve(promise);console.log(res === promise); // true ä¼ å…¥ä¸€ä¸ªå¸¦æœ‰ then æ–¹æ³•çš„å¯¹è±¡ï¼Œé¦–å…ˆæ‰§è¡Œ then æ–¹æ³•ï¼Œå¹¶ä¸”å°† resolve å’Œ reject ä¼ å…¥ï¼Œè¿”å›çš„ Promise çŠ¶æ€ç”± then æ–¹æ³•æ˜¯å¦è°ƒç”¨ resolve ä¸ reject æ–¹æ³•å†³å®šï¼Œå¹¶ä¸”å‘ resolve å’Œ reject ä¼ é€’çš„å‚æ•°ä¼šè¢«ä¼ é€’ Promise.resolve(&#123; then(resolve, reject) &#123; resolve(\"Hello World!\") &#125;&#125;).then(data =&gt; &#123; console.log(data); // Hello World!&#125;) ä¼ å…¥å…¶ä»–å€¼æ—¶ï¼Œè¿”å›ä¸€ä¸ª resolved çŠ¶æ€çš„ Promiseï¼Œå¹¶ä¸”ä¼ å…¥çš„å€¼ä¼šä½œä¸º resolve æ–¹æ³•çš„å‚æ•°è¢«ä¼ é€’ Promise.resolve(3).then(data =&gt; &#123; console.log(data); // 3&#125;) ç»è¿‡ä¸Šé¢çš„è®²è§£ï¼Œå¯ä»¥ç®€å•å†™ä¸€ä¸ª Promise.resolve çš„å®ç° Promise.resolve = value =&gt; &#123; if (value instanceof Promise) &#123; return value; &#125; return new Promise((resolve, reject) =&gt; &#123; if (typeof value === 'object' &amp;&amp; typeof value.then === 'function') &#123; value.then(resolve, reject); &#125; else &#123; resolve(value); &#125; &#125;)&#125; Promise.allPromise.all æ¥æ”¶ä¸€ä¸ª Promise å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œè¿”å›ä¸€ä¸ª Promiseï¼Œåªæœ‰å½“æ•°ç»„ä¸­çš„æ‰€æœ‰ Promise éƒ½ resolved åï¼Œè¿”å›çš„ Promise æ‰ä¼šå˜ä¸º resolved çŠ¶æ€ï¼Œå¹¶ä¸”å°†æ‰€æœ‰ Promise ä¼ é€’çš„ç»“æœå°è£…ä¸ºæ•°ç»„ä¼ é€’ä¸‹å» let promise1 = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(1); &#125;, 1000);&#125;);let promise2 = Promise.resolve(2);Promise.all([promise1, promise2]).then(results =&gt; &#123; console.log(results); // 1s åæ‰“å° [ 1, 2 ]&#125;); ä¸€æ—¦æ•°ç»„ä¸­çš„ Promise æœ‰ä»»ä¸€ä¸ªå˜ä¸º rejectedï¼Œè¿”å›çš„ Promise å°±ä¼šå˜ä¸º rejected çŠ¶æ€ let promise1 = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(1); &#125;, 1000);&#125;);// rejected çŠ¶æ€çš„ Promiselet promise2 = Promise.reject(2);Promise.all([promise1, promise2]).then(results =&gt; &#123; console.log(results);&#125;).catch(err =&gt; &#123; console.log(err); // 2ï¼Œrejectä¼ é€’çš„å‚æ•°&#125;); æ‰€ä»¥ all ä¸­çš„ Promise è¦ä¹ˆä¸€èµ·æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œæˆ‘ä»¬æ‹¿ä¸åˆ°éƒ¨åˆ†æˆåŠŸçš„ Promise ç»“æœã€‚ Promise.allSettledPromise.allSettled æ–¹æ³•æ˜¯è§£å†³ Promise.all ä¸€æ—¦ä¸€ä¸ª Promise å˜ä¸º rejectedï¼Œå…¶ä»–å˜ä¸º resolved çŠ¶æ€ Promise ä¼ é€’çš„ç»“æœå°±ä»¿ä½›è¢«åæ‰äº† Promise.allSettled([promise1, promise2]).then(results =&gt; &#123; console.log(results); // [ // &#123; status: 'fulfilled', value: 1 &#125;, // &#123; status: 'rejected', reason: 2 &#125; // ]&#125;) Promise.allSettled æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª resolved çŠ¶æ€çš„ Promiseï¼Œæ•°ç»„ä¸­çš„ Promise çš„æ‰§è¡Œç»“æœä¼šä»¥å¯¹è±¡çš„å½¢å¼æ·»åŠ åˆ° results æ•°ç»„ä¸­ï¼Œstatus è¡¨ç¤º Promise æœ€ç»ˆçš„çŠ¶æ€ï¼Œvalue å’Œ reason åˆ†åˆ«è¡¨ç¤ºæˆåŠŸæ‰§è¡Œæ—¶ä¼ é€’çš„å€¼ä»¥åŠæ‰§è¡Œå‡ºé”™æ—¶ä¼ é€’çš„é”™è¯¯åŸå› ã€‚ Promise.racePromise.race æ–¹æ³•ä¹Ÿæ˜¯æ¥æ”¶ä¸€ä¸ª Promise ç»„æˆçš„æ•°ç»„ï¼Œè¿”å›ä¸€ä¸ª Promiseï¼Œå½“æ•°ç»„ä¸­æœ‰ä»»ä¸€ Promise çš„çŠ¶æ€å˜ä¸º resolved æˆ–è€… rejectedï¼Œè¿”å›çš„ Promise å°±ä¼šç›¸åº”çš„å˜ä¸º resolved æˆ– rejectedã€‚æ­£å¦‚ race æ‰€æš—ç¤ºçš„ï¼Œæ˜¯å¤šä¸ª Promise åœ¨ç«äº‰ï¼Œæœ€ç»ˆé€‰æ‹©æœ€å¿«çš„é‚£ä¸ª let promise1 = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(1); &#125;, 1000);&#125;);let promise2 = Promise.resolve(&#123; then(resolve, reject) &#123; setTimeout(() =&gt; &#123; resolve(2); &#125;, 2000); &#125;&#125;);// promise1 ä¼šç‡å…ˆæ‰§è¡Œ resolveï¼Œæ‰€ä»¥å¾—åˆ°çš„ç»“æœæ˜¯promise1 ä¼ é€’çš„ç»“æœPromise.race([promise1, promise2]).then(data =&gt; &#123; console.log(data); // 1&#125;); Promise ä¸ç”Ÿæˆå™¨ä¸Šé¢ä½¿ç”¨ Promise ç¼–å†™çš„å¼‚æ­¥ä»£ç å·²ç»ä¸åŒæ­¥ä»£ç å¾ˆç›¸ä¼¼äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°† Promise ä¸ ç”Ÿæˆå™¨ç»“åˆèµ·æ¥ï¼Œä½¿å¾—ä»£ç çš„å†™æ³•çœ‹èµ·æ¥æ›´åŠ çš„åƒåŒæ­¥çš„å†™æ³•ï¼Œä¾‹å¦‚ let promise = new Promise((resolve, reject) =&gt; &#123; fetch(\"/id/2\").then(name =&gt; &#123; resolve(name) &#125;)&#125;).then(name =&gt; &#123; return new Promise(resolve =&gt; &#123; fetch(`/name/$&#123;name&#125;`).then(score =&gt; &#123; resolve(score); &#125;) &#125;)&#125;).then(score =&gt; &#123; console.log(score);&#125;); ä¸Šé¢çš„ä»£ç æ˜¯å…ˆæ ¹æ® id å‘æœåŠ¡å™¨è¯·æ±‚ nameï¼Œç„¶åæ ¹æ® name å‘æœåŠ¡å™¨è¯·æ±‚è·å¾—çš„åˆ†æ•°ï¼Œæœ€åæ‰“å°å‡ºåˆ†æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½æœ‰æ›´åŠ åŒæ­¥çš„å†™æ³•ï¼Œä¾‹å¦‚ asyncTaskRunner(*() =&gt; &#123; const name = yield fetch(\"id/2\"); const score = yield fetch(`/name/$&#123;name&#125;`); console.log(score);&#125;) è¿™ç§å†™æ³•å¯ä»¥é€šè¿‡ Promise ä¸ Generator æ¥åšåˆ°ã€‚asyncTaskRunner çš„å®ç°å¦‚ä¸‹ function asyncTaskRunner(generator) &#123; const iterator = generator(); function handle(result) &#123; if(result.done) return; const resultValue = result.value; if (resultValue instanceof Promise) &#123; resultValue.then(data =&gt; &#123; handle(iterator.next(data)); &#125;).catch(err =&gt; &#123; iterator.throw(err); &#125;) &#125; &#125; try &#123; handle(iterator.next()); &#125; catch (err) &#123; iterator.throw(err); &#125;&#125; åœ¨ ES7 ä¸­æå‡ºäº† async â€¦ await è¯­æ³•ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬ä»¥åŒæ­¥çš„æ–¹å¼å†™å‡ºå¼‚æ­¥ä»£ç  (async () =&gt;&#123; const name = await fetch(\"/id/2\"); const score = await fetch(`/name/$&#123;name&#125;`); console.log(score);&#125;)(); åªéœ€è¦åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨å‰åŠ å…¥ async å…³é”®å­—ï¼Œå°† yield æ¢ä¸º await å³å¯ä»¥åŒæ­¥æ–¹å¼å†™å‡ºä¼˜é›…çš„å¼‚æ­¥ä»£ç ã€‚","tags":[{"name":"Promise","slug":"Promise","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Promise/"}]},{"title":"ES6ï¼šæ”¹è¿›çš„æ•°ç»„åŠŸèƒ½","date":"2021-03-06T16:00:00.000Z","path":"/ES6ï¼šæ”¹è¿›çš„æ•°ç»„åŠŸèƒ½/","text":"Array çš„æ–°æ–¹æ³•Array.ofåœ¨ JavaScript ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡æ„é€ å‡½æ•° Arrayï¼Œå¦ä¸€ä¸ªæ˜¯é€šè¿‡å­—é¢é‡ [] çš„æ–¹å¼ã€‚é€šè¿‡ Array åˆ›å»ºä¸€ä¸ªæ•°ç»„æ—¶ï¼Œå¦‚æœä¼ å…¥äº†ä¸€ä¸ªæ•°å­— $n$ï¼Œè¡¨ç¤ºçš„æ˜¯åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º $n$ çš„æ•°ç»„ï¼›å¦‚æœä¼ å…¥äº†ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«è¯¥å‚æ•°çš„æ•°ç»„ï¼›å¦‚æœä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªåŒ…å«è¿™äº›å‚æ•°çš„æ•°ç»„ let arr = new Array(2); // åˆ›å»ºé•¿åº¦ä¸º 2 çš„æ•°ç»„console.log(arr); // [ &lt;2 empty items&gt; ]arr = new Array(\"2\");console.log(arr); // [ '2' ]arr = new Array(1, 2, 3);console.log(arr); // [ 1, 2, 3 ] æ ¹æ®å‚æ•°ä¸ªæ•°ä»¥åŠç±»å‹çš„ä¸åŒï¼Œåˆ›å»ºå‡ºçš„æ•°ç»„ä¹Ÿä¸åŒï¼Œè¿™ç§è¡Œä¸ºå¯èƒ½ä¼šä¸ºå¼€å‘è€…å¸¦æ¥è®°å¿†ä¸Šçš„è´Ÿæ‹…ï¼Œæ‰€ä»¥åœ¨ ES6 ä¸­æä¾›äº†ä¸€ä¸ª Array.of æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ¥æ”¶å¤šä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ å°±æ˜¯ä¼ å…¥çš„å‚æ•°ï¼Œä¸å‚æ•°çš„ä¸ªæ•°ä»¥åŠç±»å‹æ— å…³ let arr = Array.of(2);console.log(arr); // [ 2 ]arr = Array.of(1, 2, 3);console.log(arr); // [ 1, 2, 3 ] Array.fromArray.from æ–¹æ³•çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªç±»æ•°ç»„è½¬åŒ–ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œä¾‹å¦‚å°† arguments è½¬åŒ–ä¸ºçœŸæ­£çš„æ•°ç»„ function translateArray() &#123; let arr = Array.from(arguments); console.log(arr instanceof Array);&#125;translateArray(1, 2); // true ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡è½¬åŒ–ä¸ºçœŸæ­£çš„æ•°ç»„ let obj = &#123; *[Symbol.iterator]() &#123; yield 1; yield 2; yield 3; &#125;&#125;;let arr = Array.from(obj);console.log(arr); // [ 1, 2, 3 ]console.log(arr instanceof Array); // true Array.from çš„ç¬¬äºŒä¸ªå‚æ•°è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç±»ä¼¼äº map å‡½æ•° function translateArray() &#123; return Array.from(arguments, item =&gt; item + 1);&#125;let numbers = translateArray(1, 2);console.log(numbers); // [ 2, 3 ] å¦‚æœåœ¨å›è°ƒå‡½æ•°ä¸­éœ€è¦ç”¨åˆ° this çš„è¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ thisã€‚ find å’Œ findIndexfind å’Œ findIndex éƒ½æ˜¯ç”¨æ¥æœç´¢çš„æ–¹æ³•ï¼Œå®ƒä»¬éƒ½æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºæ¡ä»¶æ¥è¿›è¡Œæœç´¢ let arr = [1, 2, 3, 4, 5];let item = arr.find(i =&gt; i % 2 === 0);let index = arr.findIndex(i =&gt; i % 2 === 0);// ç¬¬ä¸€ä¸ªå¶æ•°console.log(item); // 2// ç¬¬ä¸€ä¸ªå¶æ•°å‡ºç°çš„ä¸‹æ ‡console.log(index); // 1 å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥å›è°ƒå‡½æ•°ä¸­ç”¨åˆ°çš„ thisã€‚ fillfill æ–¹æ³•çš„ä½œç”¨æ˜¯å°†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ å¡«å……ä¸ºæŒ‡å®šå€¼ let arr = new Array(5);console.log(arr); // [ &lt;5 empty items&gt; ]arr.fill(3);console.log(arr); // [ 3, 3, 3, 3, 3 ] fill æ–¹æ³•è¿˜å¯ä»¥æ¥æ”¶èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ï¼Œè¡¨ç¤ºå°†æ•°ç»„æŸä¸ªéƒ¨åˆ†å¡«å……ä¸ºæŒ‡å®šå€¼ arr.fill(5, 0, 3); // å°† [0, 3) å¡«å……ä¸º 5console.log(arr); // [ 5, 5, 5, 3, 3 ] copyWithinlet arr = [1, 2, 3, 4, 5];// å¤åˆ¶ [0, 3) åˆ°ä»¥ä¸‹æ ‡ä¸º 1 å¼€å§‹çš„ä½ç½®arr.copyWithin(1, 0, 3);console.log(arr); // [ 1, 1, 2, 3, 5 ] å®šå‹æ•°ç»„åœ¨ JavaScript ä¸­æ•°å­—éƒ½æ˜¯ä½¿ç”¨æµ®ç‚¹æ•°å­˜å‚¨çš„ï¼Œå³ä½¿ç”¨ 64 ä½æ¥å­˜å‚¨æ•°å­—ï¼Œä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šçš„åœºåˆï¼Œä¾‹å¦‚å¯¹äºå›¾åƒï¼Œå¯¹äºæ¯ä¸€ä¸ªåƒç´ åªéœ€è¦ 8 ä½æ¥å­˜å‚¨å³å¯ï¼Œå¦‚æœä½¿ç”¨ 64 ä½å­˜å‚¨æ•°æ®ï¼Œå¿…ç„¶ä¼šé€ æˆå†…å­˜ä¸Šçš„æµªè´¹ï¼Œå¹¶ä¸”æ˜¯ 8 å€çš„æµªè´¹ï¼Œæ‰€ä»¥å°± ES6 å°±æå‡ºäº†å®šå‹æ•°ç»„æ¥é’ˆå¯¹è¿™äº›ç‰¹æ®Šçš„åœºæ™¯ã€‚ ArrayBufferæ‰€æœ‰å®šå‹æ•°ç»„çš„åŸºç¡€éƒ½æ˜¯ ArrayBufferï¼Œå®ƒè¡¨ç¤ºå æ®ä¸€å®šå­—èŠ‚çš„å†…å­˜åŒºåŸŸï¼Œé€šè¿‡è°ƒç”¨ ArrayBuffer æ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ†é…æŒ‡å®šæ•°ç›®å­—èŠ‚çš„å†…å­˜ let buffer = new ArrayBuffer(10); // åˆ†é… 10 ä¸ªå­—èŠ‚çš„å†…å­˜console.log(buffer); è¾“å‡ºä¸º ArrayBuffer &#123; [Uint8Contents]: &lt;00 00 00 00 00 00 00 00 00 00&gt;, byteLength: 10&#125; DataViewæˆ‘ä»¬å¯ä»¥é€šè¿‡ DataView æ¥æŸ¥çœ‹å’Œæ“ä½œ ArrayBuffer const buffer = new ArrayBuffer(10);const view = new DataView(buffer); DataView æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ª ArrayBuffer å¯¹è±¡ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•° byteOffsetï¼šåç§»é‡ï¼Œé»˜è®¤æ˜¯ 0 byteLengthï¼šå­—èŠ‚é•¿åº¦ï¼Œé»˜è®¤æ˜¯ buffer çš„é•¿åº¦ // è·å¾—åç§»é‡ä¸º 0ï¼Œé•¿åº¦ä¸º 2 å­—èŠ‚çš„ viewconst view = new DataView(buffer, 0, 2); DataView å¯¹è±¡åŒ…å«å¦‚ä¸‹å±æ€§ bufferï¼šä¼ å…¥æ„é€ å‡½æ•°çš„ ArrayBuffer å¯¹è±¡ byteOffsetï¼šä¼ å…¥æ„é€ å‡½æ•°çš„ byteOffset byteLengthï¼šä¼ å…¥æ„é€ å‡½æ•°çš„ byteLength const buffer = new ArrayBuffer(10);const view1 = new DataView(buffer);const view2 = new DataView(buffer, 2, 5);console.log(view1.buffer === view2.buffer); // trueconsole.log(view1.byteOffset); // 0console.log(view1.byteLength); // 10console.log(view2.byteOffset); // 2console.log(view2.byteLength); // 5 é€šè¿‡ä¸‹é¢çš„æ–¹æ³•å¯ä»¥è¯»å–å’Œè®¾ç½® buffer ä¸­çš„å€¼ getInt8(offset, littleEndian) setInt8(offset, value, littleEndian) getUInt8(offset, littleEndian) setUInt8(offset, value, littleEndian) ä»¥ä¸Šæš‚ä¸”å¿½ç•¥å‚æ•° littleEndian let buffer = new ArrayBuffer(10);let view = new DataView(buffer);// 0000 1010view.setInt8(0, 10);// 1000 1010 è¡¥ç  1111 0110view.setInt8(1, -10);let s = view.getInt8(0);console.log(s); // 10// 1111 0110 =&gt; 246s = view.getUint8(1);console.log(s); // 246 æ­¤å¤–è¿˜å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•è®¾ç½®æµ®ç‚¹æ•°çš„å€¼ getFloat32 setFloat32 getFloat64 setFloat64 æ¥æ”¶çš„å‚æ•°åŒä¸Šé¢ä¸€æ · // 3F 80 00 00view.setFloat32(0, 1);// 3F 80 00 00view.setFloat32(2, 1);// 3F 80 00 00 3F 80 00 00res = view.getFloat64(0);console.log(res); // 0.007933616638183594 å®šå‹æ•°ç»„ä¸€ä¸ªå®šå‹æ•°ç»„å…¶å®å°±æ˜¯ä¸€ä¸ªæŒ‡å®šç±»å‹ DataViewï¼Œå…·ä½“æœ‰å¦‚ä¸‹å®šå‹æ•°ç»„ å‘ä¸Šå›¾ä¸­çš„æ„é€ å‡½æ•°ä¼ å…¥ä¸€ä¸ª buffer åˆ›å»ºå®šå‹æ•°ç»„ï¼Œå¦å¤–è¿˜å¯ä»¥ä¼ å…¥ byteOffset å’Œ byteLength ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œè¿™ä¸¤ä¸ªå¯é€‰å‚æ•°çš„é»˜è®¤å€¼åŒ DataView let buffer = new ArrayBuffer(10);let int8 = new Int8Array(buffer, 1, 2);console.log(int8.buffer === buffer); // trueconsole.log(int8.byteOffset); // 1console.log(int8.byteLength); // 2console.log(int8); // Int8Array(2) [ 0, 0 ] byteLength å¿…é¡»èƒ½å¤Ÿæ•´é™¤å®šå‹æ•°ç»„è¡¨ç¤ºçš„å…ƒç´ å¤§å°ï¼Œå‡å¦‚å‘ Int16Array ä¼ å…¥ä¸€ä¸ªå¤§å°ä¸ºå¥‡æ•°çš„ byteLengthï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ï¼Œå› ä¸º Int16Array ä¸­æ¯ä¸ªå…ƒç´ å æ®ä¸¤ä¸ªå­—èŠ‚ï¼Œè€Œå¥‡æ•°ä¸èƒ½æ•´é™¤ 2ï¼Œå³æ— æ³•å¹³å‡åˆ†é…ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ let int16 = new Int16Array(buffer, 0, 9); // 9 ä¸èƒ½æ•´é™¤ 2ï¼Œä¼šæŠ¥é”™ é™¤æ­¤ä»¥å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºåˆ†é…å¤šå°‘å­—èŠ‚çš„å†…å­˜ç»™å­—èŠ‚æ•°ç»„ï¼ŒåŒç†éœ€è¦æ³¨æ„ä¼ å…¥çš„æ•°å­—è¦èƒ½å¤Ÿæ•´é™¤å®šå‹æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å¤§å° let int16 = new Int16Array(8); å¦‚æœæ²¡æœ‰å‘æ„é€ å‡½æ•°ä¼ å…¥ä»»ä½•å‚æ•°æ—¶ï¼Œé»˜è®¤ä¼ å…¥çš„å‚æ•°ä¸º 0ï¼Œè¿™æ—¶å®šå‹æ•°ç»„ä¸èƒ½ä¿å­˜æ•°æ®ï¼Œå› ä¸ºæ²¡æœ‰ä¸ºå®ƒåˆ†é…å†…å­˜ç©ºé—´ã€‚ é™¤æ­¤ä»¥å¤–ï¼Œå®šå‹æ•°ç»„çš„æ„é€ å‡½æ•°è¿˜å¯ä»¥æ¥æ”¶å¦‚ä¸‹å‡ ç§ç±»å‹çš„å‚æ•° ä¸€ä¸ªå®šå‹æ•°ç»„ï¼šå°†å®šå‹æ•°ç»„ä¸­çš„å…ƒç´ ä¸€ä¸ªä¸ªçš„å¤åˆ¶åˆ°æ–°çš„å®šå‹æ•°ç»„ä¸­ï¼Œæ‰€ä»¥ä¸¤ä¸ªå®šå‹æ•°ç»„çš„ buffer æ˜¯ä¸åŒçš„ ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼šè°ƒç”¨å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨ï¼Œå°†å¾—åˆ°çš„å…ƒç´ ä¸€ä¸ªä¸ªçš„æ·»åŠ åˆ°å®šå‹æ•°ç»„ä¸­ ä¸€ä¸ªæ•°ç»„ ä¸€ä¸ªç±»æ•°ç»„ï¼Œå¦‚ arguments let int8 = new Int8Array([25, 50]); // ä½¿ç”¨æ•°ç»„ä½œä¸ºå‚æ•°let int16 = new Int16Array(int8); // ä½¿ç”¨å®šå‹æ•°ç»„ä½œä¸ºå‚æ•°console.log(int8.buffer === int16.buffer); // false å®šå‹æ•°ç»„ä¸ä¸€èˆ¬æ•°ç»„çš„ç›¸ä¼¼ä¹‹å¤„åœ¨å¾ˆå¤šçš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå®šå‹æ•°ç»„å½“åšæ˜¯ä¸€èˆ¬æ•°ç»„ let int8 = new Int8Array([25, 50]);console.log(int8.length); // 2console.log(int8[0]); // 25console.log(int8[1]); // 50 å®šå‹æ•°ç»„çš„é•¿åº¦ä¸€æ—¦ç¡®å®šå°±ä¸èƒ½å†æ”¹å˜ å…±åŒæ–¹æ³•å®šå‹æ•°ç»„ä¸æ™®é€šæ•°ç»„æœ‰ä»¥ä¸‹å…±åŒæ–¹æ³• let int8 = new Int8Array([25, 50]);let newArr = int8.slice(0, 1);console.log(newArr instanceof Int8Array); // truelet res = int8.find(i =&gt; i &gt; 30);console.log(res); // 50 å…±åŒçš„è¿­ä»£å™¨å®šå‹æ•°ç»„ä¹Ÿæœ‰ä¸‰ä¸ªè¿­ä»£å™¨ï¼Œå³ entriesã€keys å’Œ valuesï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦å’Œ for â€¦ of å¾ªç¯ let arr = [...int8];console.log(arr instanceof Array); // truefor (let v of int8) &#123; console.log(v); // 25 // 50&#125; of ä¸ from æ–¹æ³•å®šå‹æ•°ç»„ä¹Ÿæœ‰ of å’Œ from æ–¹æ³• let int8 = Int8Array.of(3, 56);let float32 = Float32Array.from([1.5, 2.5]);console.log(int8); // Int8Array(2) [ 3, 56 ]console.log(float32); // Float32Array(2) [ 1.5, 2.5 ] å®šå‹æ•°ç»„ä¸ä¸€èˆ¬æ•°ç»„çš„ä¸åŒä¹‹å¤„è¡Œä¸ºä¸åŒä¸€èˆ¬æ•°ç»„çš„é•¿åº¦æ˜¯å¯å˜çš„ï¼Œä½†æ˜¯å®šå‹æ•°ç»„çš„é•¿åº¦ä¸å¯å˜ let int8 = new Int8Array([0, 1]);console.log(int8.length); // 2int8[2] = 5; // æ— æ•ˆï¼Œé•¿åº¦ä¸å¯å˜console.log(int8.length); // 2 å®šå‹æ•°ç»„ä¼šæ£€æŸ¥ä¼ å…¥çš„æ•°æ®æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæ— æ•ˆä¼ å…¥çš„å€¼ä¼šè¢«æ›¿æ¢ä¸º 0 let int8 = new Int8Array([\"hi\"]); // ä¼šè¢«æ›¿æ¢ä¸º 0console.log(int8.length); // 1console.log(int8[0]); // 0 å¯¹å®šå‹æ•°ç»„è¿›è¡Œä¿®æ”¹ä¹Ÿä¼šå¯¹å€¼çš„ç±»å‹è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœæ˜¯æ— æ•ˆçš„ç±»å‹ï¼Œåˆ™å€¼ä¼šè¢«æ›¿æ¢ä¸º 0 let int8 = new Int8Array([1, 2]);let newInt8 = int8.map(i =&gt; \"hi\");console.log(newInt8); // Int8Array(2) [ 0, 0 ] ç¼ºå¤±çš„æ–¹æ³•å®šå‹æ•°ç»„æ²¡æœ‰ä»¥ä¸‹æ–¹æ³• å› ä¸ºä¸Šé¢çš„æ–¹æ³•éƒ½ä¼šæ”¹å˜æ•°ç»„çš„é•¿åº¦ï¼Œæ‰€ä»¥å®šå‹æ•°ç»„æ²¡æœ‰ä»¥ä¸Šæ–¹æ³•æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ã€‚ æ–°å¢çš„æ–¹æ³•ç›¸æ¯”äºä¸€èˆ¬æ•°ç»„ï¼Œå®šå‹æ•°ç»„æ–°å¢äº†ä¸¤ä¸ªæ–¹æ³• setï¼šå°†ä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°å®šå‹æ•°ç»„ä¸­ subarrayï¼šä»å®šå‹æ•°ç»„ä¸­æŠ½å–ä¸€éƒ¨åˆ†åˆ°æ–°çš„å®šå‹æ•°ç»„ä¸­ set æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œä»¥åŠä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œæ•°æ®æ’å…¥çš„åç§»é‡ï¼Œå¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œé‚£ä¹ˆåç§»é‡é»˜è®¤ä¸º 0 let int8 = new Int8Array(4); // æ•°ç»„é•¿åº¦ä¸º 4int8.set([1, 2]); // å°† [1, 2] å¤åˆ¶åˆ°å®šå‹æ•°ç»„å‰ä¸¤ä¸ªä½ç½®int8.set([3, 4], 2); // å°† [3, 4] å¤åˆ¶åˆ°å®šå‹æ•°ç»„ä¸‹æ ‡ä»¥ 2 å¼€å§‹çš„ä¸¤ä¸ªä½ç½®console.log(int8); // Int8Array(4) [ 1, 2, 3, 4 ] subarray æ¥æ”¶ä¸¤ä¸ªå¯é€‰çš„å‚æ•° startï¼šèµ·å§‹ä½ç½®ï¼Œç¼ºçœä¸º 0 endï¼šç»ˆæ­¢ä½ç½®ï¼Œç¼ºçœä¸ºæ•°ç»„çš„é•¿åº¦ æŠ½å–çš„èŒƒå›´ä¸º [start, end)ï¼Œå·¦é—­å³å¼€ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å®šå‹æ•°ç»„ let int8 = new Int8Array([1, 2, 3, 4]);let arr1 = int8.subarray(); // ç¼ºçœï¼Œé»˜è®¤æ˜¯æŠ½å–æ•´ä¸ªæ•°ç»„let arr2 = int8.subarray(1); // æŠ½å– [1, 4)ï¼Œ4 ä¸ºæ•°ç»„çš„é•¿åº¦let arr3 = int8.subarray(1, 2); // æŠ½å– [1, 2)console.log(arr1); // Int8Array(4) [ 1, 2, 3, 4 ]console.log(arr2); // Int8Array(3) [ 2, 3, 4 ]console.log(arr3); // Int8Array(1) [ 2 ]","tags":[{"name":"Array","slug":"Array","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Array/"}]},{"title":"Node.jsä¹‹Stream","date":"2021-03-05T16:00:00.000Z","path":"/Node.jsä¹‹Stream/","text":"å¼•å…¥ Streamå‡è®¾æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¼šå†™å‡ºä»¥ä¸‹ä»£ç  const fs = require('fs');const path = require('path');const copy = (source, target) =&gt; &#123; fs.readFile(path.resolve(source), (err, data) =&gt; &#123; if(err) &#123; throw new Error(err.toString()); return; &#125; fs.writeFile(path.resolve(target), data, (err) =&gt; &#123; if(!err) &#123; console.log(\"å¤åˆ¶æˆåŠŸï¼\"); &#125; &#125;) &#125;)&#125; ä¸Šé¢çš„ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯å…ˆè¯»å– source æ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼Œç„¶åå°†å†…å®¹å†™å…¥åˆ° target æ–‡ä»¶ä¸­ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯éœ€è¦è¯»å–å®Œ source é‡Œé¢çš„æ‰€æœ‰å†…å®¹ï¼Œç„¶åå°†å†…å®¹å†™å…¥åˆ° target ä¸­ã€‚ è¿™æ ·åšå°±æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå½“æˆ‘ä»¬è¯»å–å¤§æ–‡ä»¶æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå†…å­˜ä¸å¤Ÿç”¨çš„æƒ…å†µï¼Œå› ä¸ºå®ƒä¼šå…ˆå°†æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹éƒ½è¯»å–åˆ°å†…å­˜ï¼›å¦å¤–è¿˜å°±æ˜¯æ—¶é—´ï¼Œä¸€æ¬¡æ€§è¯»å–ä¸€ä¸ªå¤§æ–‡ä»¶åˆ°å†…å­˜ï¼Œæ˜¯éœ€è¦æ¯”è¾ƒé•¿çš„æ—¶é—´çš„ï¼Œç”¨æˆ·å¯èƒ½ä¼šæœ‰å¡é¡¿çš„æ„Ÿè§‰ã€‚ å¦ä¸€ç§è§£å†³åŠæ³•å°±æ˜¯è¾¹è¯»è¾¹å†™ï¼Œè¯»å–éƒ¨åˆ†æ–‡ä»¶å†…å®¹ï¼Œç„¶åå°†å†…å®¹å†™å…¥åˆ°æ–°æ–‡ä»¶ä¸­ï¼Œè¿™æ ·åœ¨å†…å­˜ä¸­çš„æ•°æ®åªæ˜¯éƒ¨åˆ†å†…å®¹ï¼Œä¸ä¼šå æœ‰å¤ªå¤šçš„å†…å­˜ï¼Œç”±äºæ˜¯è¾¹è¯»ç¼–å†™ï¼Œç”¨æˆ·å¯ä»¥å¾ˆå¿«çš„å¾—åˆ°å“åº”ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚ åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€å¹…åŠ¨å›¾æ¥å½¢è±¡çš„å±•ç¤ºä½¿ç”¨æµå‰åæ•°æ®çš„æµåŠ¨æƒ…å†µ Node.js ç»™æˆ‘ä»¬æä¾› Stream çš„ APIï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†å¤§æ–‡ä»¶çš„ã€‚å› ä¸ºæ•°æ®æ˜¯ä¸€éƒ¨åˆ†ä¸€éƒ¨åˆ†çš„å¤„ç†ï¼Œå°±åƒæ˜¯æ°´æµä¸€æ ·ï¼Œæ‰€ä»¥è¿™ä¸ªæ¨¡å—çš„åç§°å°±ç§°ä¸º Streamã€‚ const fs = require('fs');function copy(source, target) &#123; const rs = fs.createReadStream(source); const ws = fs.createWriteStream(target); rs.on('data', data =&gt; &#123; ws.write(data); &#125;); rs.on('end', () =&gt; &#123; ws.end(); &#125;);&#125; ä¸Šé¢ä»£ç çš„ç»†èŠ‚å°†åœ¨åæ–‡æ­æ™“ã€‚ Stream çš„åˆ†ç±»Stream å¯ä»¥åˆ†ä¸ºå››ç±» Readableï¼šå¯è¯»æµï¼Œæ•°æ®çš„æä¾›è€… Writeableï¼šå¯å†™æµï¼Œæ•°æ®çš„æ¶ˆè´¹è€… Duplexï¼šå¯å†™å¯è¯»æµ(åŒå·¥æµ) Transformï¼šæ˜¯ Duplex çš„ç‰¹æ®Šæƒ…å†µï¼Œè½¬æ¢æµï¼Œå¯¹è¾“å…¥çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åè¾“å‡º å¯è¯»æµä¸å¯å†™æµæ˜¯åŸºç¡€ï¼Œå¸¸è§çš„å¯è¯»æµä¸å¯å†™æµå¦‚ä¸‹ å¯è¯»æµ å¯å†™æµ HTTP Request HTTP Reponse fs read streams fs write streams process.stdin process.stdout TCP sockets TCP sockets zlib streams zlib streams crypto streams crypto streams Stream æ˜¯ EventEmitter çš„å®ä¾‹ï¼Œæœ‰è‡ªå®šä¹‰çš„äº‹ä»¶ã€‚ Readable Streamå¯è¯»æµæœ‰ä¸¤ä¸ªæ¨¡å¼ï¼Œæš‚åœæ¨¡å¼ä¸æµåŠ¨æ¨¡å¼ã€‚å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæµæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç›‘å¬äº† readable äº‹ä»¶ï¼Œå®ƒå°±ä¼šæ¥åˆ°æš‚åœæ¨¡å¼ï¼Œåœ¨æš‚åœæ¨¡å¼ä¸‹ï¼Œå®ƒä¼šä¸æ–­çš„è¯»å–æ•°æ®åˆ°ç¼“å†²åŒºï¼Œå½“è¯»å–åˆ°çš„æ•°æ®è¶…è¿‡é¢„è®¾çš„å¤§å°æ—¶ï¼Œå®ƒç”±å±æ€§ highWaterMark æŒ‡å®š(é»˜è®¤ä¸º 64kB)ï¼Œä¾¿ä¼šè§¦å‘ readable äº‹ä»¶ï¼Œreadable äº‹ä»¶çš„è§¦å‘æœ‰ä¸¤ç§æƒ…å†µï¼š ç¼“å­˜åŒºä¸­çš„æ•°æ®è¾¾åˆ° highWaterMark é¢„è®¾çš„å¤§å° æ•°æ®æºçš„æ•°æ®å·²ç»è¢«è¯»å–å®Œæ¯• const fs = require('fs');const rs = fs.createReadStream('a.txt', &#123; highWaterMark: 1 // ç¼“å­˜åŒºæœ€å¤šå­˜å‚¨ 1 å­—èŠ‚&#125;);rs.on('readable', () =&gt; &#123; let data; while(data=rs.read()) &#123; console.log(data.toString()); &#125;&#125;) ä¸Šé¢çš„ç¨‹åºè®¾ç½® highWaterMark ä¸º 1ï¼Œå³æ¯æ¬¡è¯»å–åˆ°ä¸€ä¸ªå­—èŠ‚ä¾¿ä¼šè§¦å‘ readable å‘½ä»¤ï¼Œæ¯æ¬¡å½“è§¦å‘ readable å‘½ä»¤æ—¶ï¼Œæˆ‘ä»¬è°ƒç”¨å¯è¯»æµçš„ read([size]) æ–¹æ³•ä»ç¼“å†²åŒºä¸­è¯»å–æ•°æ®(è¯»å–åˆ°çš„æ•°æ®ä¸º Buffer)ï¼Œç„¶åæ‰“å°åˆ°æ§åˆ¶å°ã€‚ å½“æˆ‘ä»¬ä¸ºå¯è¯»æµç»‘å®š data äº‹ä»¶æ—¶ï¼Œå¯è¯»æµä¾¿ä¼šåˆ‡æ¢åˆ°æµåŠ¨çŠ¶æ€ï¼Œå½“ä½äºæµåŠ¨çŠ¶æ€æ—¶ï¼Œå¯è¯»æµä¼šè‡ªåŠ¨çš„ä»æ–‡ä»¶ä¸­è¯»å–å†…å®¹åˆ°ç¼“å†²åŒºï¼Œå½“ç¼“å†²åŒºä¸­çš„å†…å®¹å¤§äºè®¾å®šçš„ highWaterMark çš„å¤§å°æ—¶ï¼Œä¾¿ä¼šè§¦å‘ data äº‹ä»¶ï¼Œå°†ç¼“å†²åŒºä¸­çš„æ•°æ®ä¼ é€’ç»™ data äº‹ä»¶ç»‘å®šçš„å‡½æ•°ã€‚ä»¥ä¸Šè¿‡ç¨‹ä¼šè‡ªåŠ¨ä¸æ–­è¿›è¡Œã€‚å½“æ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½è¢«è¯»å–å®Œæˆæ—¶ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘ end äº‹ä»¶ã€‚ const fs = require('fs');const rs = fs.createReadStream('a.txt', &#123; highWaterMark: 2&#125;);rs.on('data', data =&gt; &#123; console.log(data.toString());&#125;);rs.on('end', () =&gt; &#123; console.log(\"æ–‡ä»¶è¯»å–å®Œæ¯•ï¼\");&#125;); æš‚åœæ¨¡å¼åƒæ˜¯æ‰‹åŠ¨æ­¥æªï¼Œè€ŒæµåŠ¨æ¨¡å¼åˆ™åƒæ˜¯è‡ªåŠ¨æ­¥æªã€‚æš‚åœæ¨¡å¼ä¸æµåŠ¨æ¨¡å¼ä¹Ÿå¯ä»¥ç›¸äº’åˆ‡æ¢ï¼Œé€šè¿‡ pause() å¯ä»¥ä»æš‚åœçŠ¶æ€åˆ‡æ¢åˆ°æµåŠ¨çŠ¶æ€ï¼Œé€šè¿‡ resume() åˆ™å¯ä»¥ä»æš‚åœæ¨¡å¼åˆ‡æ¢åˆ°æµåŠ¨æ¨¡å¼ã€‚ å¯è¯»æµçš„ä¸€ä¸ªç»å…¸å®ä¾‹å°±æ˜¯ http ä¸­çš„è¯·æ±‚å¯¹è±¡ reqï¼Œä¸‹é¢çš„ç¨‹åºå±•ç¤ºäº†é€šè¿‡ç›‘å¬ req çš„ data äº‹ä»¶æ¥è¯»å– HTTP è¯·æ±‚ä½“ä¸­çš„å†…å®¹ const http = require('http');const app = http.createServer();app.on('request', (req, res) =&gt; &#123; let datas = []; req.on('data', data =&gt; &#123; datas.push(data); &#125;); req.on('end', () =&gt; &#123; req.body = Buffer.concat(datas); // å½“è¯»å–å®Œ body ä¸­çš„å†…å®¹ä¹‹åï¼Œå°†å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ res.end(req.body); &#125;);&#125;)app.listen(3000, () =&gt; &#123; console.log(\"æœåŠ¡å¯åŠ¨åœ¨ 3000 ç«¯å£... ...\");&#125;) Writable Streamå¯å†™æµä¸å¯è¯»æµç›¸ä¼¼ï¼Œå½“æˆ‘ä»¬å‘å¯å†™æµå†™å…¥æ•°æ®æ—¶(é€šè¿‡å¯å†™æµçš„ write() æ–¹æ³•å†™æ•°æ®)ï¼Œä¼šç›´æ¥å°†æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œå¦‚æœå†™å…¥çš„æ•°æ®æ¯”è¾ƒæ…¢çš„è¯ï¼Œé‚£å°±å°±ä¼šå°†æ•°æ®å†™å…¥åˆ°ç¼“å†²åŒºï¼Œå½“ç¼“å†²åŒºä¸­çš„å†…å®¹è¾¾åˆ° highWaterMark è®¾å®šçš„å¤§å°æ—¶ï¼Œwrite æ–¹æ³•å°±ä¼šè¿”å›ä¸€ä¸ª falseï¼Œè¡¨æ˜ä¸èƒ½æ¥å—æ›´å¤šçš„æ•°æ®äº†ã€‚ å½“ç¼“å†²åŒºä¸­çš„æ•°æ®å…¨éƒ¨è¢«æ¶ˆè´¹å®Œäº†(å†™å…¥äº†æ–‡ä»¶ä¸­æˆ–è€…è¢«åˆ«çš„æµæ¶ˆè´¹äº†)ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘ drain äº‹ä»¶ã€‚ const fs = require('fs');const ws = fs.createWriteStream('b.txt', &#123; highWaterMark: 16 * 1024&#125;);function writeMillionTimes(writer, data, encoding, callback) &#123; let i = 10000; write(); function write() &#123; // è¡¨ç¤ºæ˜¯å¦å¯ä»¥å‘å¯å†™æµä¸­å†™å…¥æ•°æ® let ok = true; while(i-- &gt; 0 &amp;&amp; ok) &#123; // å½“ writer.write() æ–¹æ³•è¿”å› false è¡¨ç¤ºä¸å¯å†™å…¥æ•°æ® ok = writer.write(data, encoding, i === 0 ? callback : null); &#125; if(i &gt; 0) &#123; // è¯´æ˜ ok ä¸º falseï¼Œå³ä¸èƒ½å‘ç¼“å†²åŒºä¸­å†™å…¥å†…å®¹äº† console.log(\"drain\", i); // ç›‘å¬ drain äº‹ä»¶ï¼Œå½“é˜Ÿåˆ—æ¶ˆè´¹å®Œæ¯•æ—¶ç»§ç»­è°ƒç”¨ write() æ–¹æ³•å†™å…¥ writer.once('drain', write); &#125; &#125;&#125;writeMillionTimes(ws, 'simple', 'utf-8', () =&gt; &#123; console.log(\"end\");&#125;) è¾“å‡ºä¸º drain 7268drain 4536drain 1804end è¯´æ˜æœ‰ä¸‰æ¬¡ç¼“å†²åŒºä¸­çš„å†…å®¹è¾¾åˆ°äº† 16KBï¼Œå¯ä»¥éªŒç®—ä¸Šé¢çš„æ•°å­—ä¹‹é—´çš„å·®å€¼ï¼Œåœ¨ä¹˜ä»¥ 6(simple çš„å­—èŠ‚æ•°)ï¼Œå¤§å°å¤§çº¦ä¸º 16 * 1024 å·¦å³ï¼Œå¦‚ $$(7268 - 4536) * 6 = 16392 \\approx 16384 = 16 * 1024$$ æˆ‘ä»¬è¿˜å¯ä»¥è°ƒç”¨å¯å†™æµçš„ end() æ–¹æ³•ï¼Œè¡¨ç¤ºå°†ç¼“å­˜ä¸­çš„å†…å®¹æ¸…ç©ºå†™å…¥æ–‡ä»¶ï¼Œå¹¶å…³é—­æ–‡ä»¶ï¼Œæ­¤æ—¶ä¼šè§¦å‘ close äº‹ä»¶ const fs = require('fs');const ws = fs.createWriteStream('b.txt');ws.write('Hello');ws.write('World');ws.end('!');ws.on('close', () =&gt; &#123; console.log(\"close\"); // close&#125;) å½“è°ƒç”¨ end() æ–¹æ³•ä¹‹åå°±ä¸èƒ½è°ƒç”¨ write() æ–¹æ³•äº†ï¼Œå¦åˆ™ä¼šæŠ¥é”™ const fs = require('fs');const ws = fs.createWriteStream('b.txt');ws.write('Hello');ws.write('World');ws.end('!');ws.write('write again'); // Error [ERR_STREAM_WRITE_AFTER_END]: write after end å½“è°ƒç”¨ end() æ–¹æ³•ä¹‹åï¼Œå¹¶ä¸”æ•°æ®ç¼“å†²åŒºä¸­çš„æ•°æ®å·²ç»å†™å…¥ä¹‹åä¼šè§¦å‘å¯å†™æµçš„ finish äº‹ä»¶ const fs = require('fs');const ws = fs.createWriteStream('b.txt');ws.write('Hello');ws.write('World');ws.end('!');ws.on('close', () =&gt; &#123; console.log(\"close\");&#125;);ws.on('finish', () =&gt; &#123; console.log(\"finish\");&#125;); æ‰“å°ç»“æœæ˜¯ finishclose è¯´æ˜ finish äº‹ä»¶ä¼šåœ¨ close äº‹ä»¶ä¹‹å‰è¢«è§¦å‘ã€‚ å¯å†™æµçš„ç»å…¸ä¾‹å­å°±æ˜¯ http æ¨¡å—çš„å“åº”å¯¹è±¡ resï¼Œä¸‹é¢çš„ç¨‹åºæ¼”ç¤ºäº†å½“è¯·æ±‚åˆ°æ¥æ—¶ï¼Œæˆ‘ä»¬è¯»å–ä¸€ä¸ª html é¡µé¢è¿”å›ç»™å®¢æˆ·ç«¯ const http = require('http');const fs = require('fs');const app = http.createServer();app.on('request', (req, res) =&gt; &#123; const rs = fs.createReadStream('index.html'); rs.on('data', data =&gt; &#123; res.write(data); &#125;) rs.on('end', () =&gt; &#123; res.end() &#125;);&#125;);app.listen(3000, () =&gt; &#123; console.log(\"æœåŠ¡å¯åŠ¨åœ¨ 3000 ç«¯å£ ... ...\");&#125;) Duplex Stream ä¸ Transform StreamDuplexï¼Œå³åŒå·¥çš„æ„æ€ï¼Œå®ƒæ—¢å¯ä»¥æ¥æ”¶æ•°æ®ï¼Œä¹Ÿå¯ä»¥è¾“å‡ºæ•°æ®ï¼Œå®ƒçš„è¾“å…¥å’Œè¾“å‡ºä¹‹é—´å¯ä»¥æ²¡æœ‰ä»»ä½•çš„å…³ç³»ï¼Œå°±åƒæ˜¯ä¸€ä¸ªéƒ¨ä»¶å†…éƒ¨æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„ç³»ç»Ÿã€‚Duplex ç»§æ‰¿äº† å¯è¯»æµ(Readable)ï¼Œå¹¶ä¸”æ‹¥æœ‰å¯å†™æµ(Writable)çš„æ‰€æœ‰æ–¹æ³•ã€‚ Transform Stream ç»§æ‰¿äº† Duplex Streamï¼Œå®ƒåŒæ ·å…·æœ‰å¯è¯»æµä¸å¯å†™æµçš„èƒ½åŠ›ï¼Œå¹¶ä¸”å®ƒçš„è¾“å‡ºä¸è¾“å…¥ä¹‹é—´æ˜¯æœ‰å…³ç³»çš„ï¼Œä¸­é—´åšäº†ä¸€æ¬¡è½¬æ¢ã€‚å¸¸è§çš„è½¬æ¢æµæœ‰ zlibï¼Œcryptoã€‚ å‡ºäºæ–‡ç« ç»“æ„çš„è€ƒè™‘ï¼Œåœ¨è¿™é‡Œä¸è¯¦ç»†è®²è§£è¿™ä¸¤ä¸ªæµï¼Œåœ¨åæ–‡ä¸­ä¼šå®ç°è¿™ä¸¤ä¸ªæµï¼Œä»¥åŠ æ·±å¯¹è¿™ä¸¤ä¸ªæµçš„ç†è§£ã€‚ pipeæˆ‘ä»¬å¯ä»¥æ··åˆä½¿ç”¨å¯è¯»æµä¸å¯å†™æµæ¥è¿›è¡Œæ–‡ä»¶çš„å¤åˆ¶ const fs = require('fs');function copy(source, target) &#123; const rs = fs.createReadStream(source); const ws = fs.createWriteStream(target); rs.on('data', data =&gt; &#123; ws.write(data); &#125;); rs.on('end', () =&gt; &#123; ws.end(); &#125;);&#125;copy('a.txt', 'b.txt'); ä½†æ˜¯ä¸Šé¢çš„å†™æ³•å´ä¸è¢«å»ºè®®ä½¿ç”¨ï¼Œå› ä¸ºæ²¡æœ‰è€ƒè™‘åˆ°å¯è¯»æµä¸å¯å†™æµé€Ÿåº¦ä¹‹é—´çš„å·®å¼‚ï¼Œå¦‚æœå¯è¯»æµè¾“å‡ºæ•°æ®çš„é€Ÿåº¦å¤§äºå¯å†™æµå†™å…¥æ•°æ®çš„é€Ÿåº¦ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰æ•°æ®ä¸€ç›´å †å‹åœ¨ç¼“å­˜åŒºï¼Œå¯¼è‡´å ç”¨è¿‡é«˜çš„å†…å­˜ï¼Œä¸“ä¸šæœ¯è¯­å«åšç§¯å‹ã€‚ æˆ‘ä»¬éœ€è¦æ”¹å–„ä¸Šé¢çš„ç¨‹åºï¼Œå…·ä½“åšå¤§å°±æ˜¯å½“ write() æ–¹æ³•è¿”å› falseï¼Œæˆ‘ä»¬åˆ‡æ¢å¯è¯»æµçš„æ¨¡å¼ä¸ºæš‚åœæ¨¡å¼ï¼Œå½“å¯å†™æµè§¦å‘äº† drain äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¾¿å°†å¯è¯»æµçš„çŠ¶æ€åˆ‡æ¢ä¸ºæµåŠ¨æ¨¡å¼ const fs = require('fs');function copy(source, target) &#123; const rs = fs.createReadStream(source); const ws = fs.createWriteStream(target); rs.on('data', data =&gt; &#123; if (!ws.write(data)) &#123; rs.pause(); &#125; &#125;); rs.on('end', () =&gt; &#123; ws.end(); &#125;); ws.on('drain', () =&gt; &#123; rs.resume(); &#125;)&#125; é‚£æ˜¯ä¸æ˜¯æ¯æ¬¡æˆ‘ä»¬ä½¿ç”¨æµéƒ½éœ€è¦å†™è¿™ä¹ˆå¤šçš„ä»£ç ï¼Œå½“ç„¶ä¸æ˜¯ã€‚å®˜æ–¹ä¸ºå¯è¯»æµæä¾›äº†ä¸€ä¸ª pipe(ws) æ–¹æ³•ï¼Œpipe æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯å†™æµï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†å¯è¯»æµä¸­æ•°æ®å†™å…¥åˆ°å¯å†™æµä¸­å»ï¼Œå¹¶ä¸”å®ƒå†…éƒ¨æœ‰åšé€Ÿåº¦å·®å¼‚çš„å¤„ç†ã€‚æ‰€ä»¥ä¸Šé¢çš„å†™æ³•å¯ä»¥æ”¹ä¸ºä¸‹é¢çš„ç‰ˆæœ¬ const fs = require('fs');function copy(source, target) &#123; const rs = fs.createReadStream(source); const ws = fs.createWriteStream(target); rs.pipe(ws);&#125; å½“æˆ‘ä»¬è°ƒç”¨ pipe æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘å¯å†™æµçš„ pipe äº‹ä»¶ã€‚pipe çš„å®ç°å‚è€ƒå¦‚ä¸‹ Readable.prototype.pipe = function(ws) &#123; this.on('data', data =&gt; &#123; if (!ws.write(data)) &#123; this.pause(); &#125; &#125;); ws.on('drain', () =&gt; &#123; this.resume(); &#125;); // è§¦å‘ pipe äº‹ä»¶ ws.emit('pipe', this); // è¿”å›å¯å†™æµï¼Œä»¥æ”¯æŒé“¾å¼è°ƒç”¨ return ws;&#125; è¿™é‡Œç»™å‡ºå®˜ç½‘ç”»çš„ä¸€ä¸ªæœ‰å…³ pipe çš„æµç¨‹å›¾ +===================+ x--&gt; Piping functions +--&gt; src.pipe(dest) | x are set up during |===================| x the .pipe method. | Event callbacks | +===============+ x |-------------------| | Your Data | x They exist outside | .on('close', cb) | +=======+=======+ x the data flow, but | .on('data', cb) | | x importantly attach | .on('drain', cb) | | x events, and their | .on('unpipe', cb) |+---------v---------+ x respective callbacks. | .on('error', cb) || Readable Stream +----+ | .on('finish', cb) |+-^-------^-------^-+ | | .on('end', cb) | ^ | ^ | +-------------------+ | | | | | ^ | | ^ ^ ^ | +-------------------+ +=================+ ^ | ^ +----&gt; Writable Stream +---------&gt; .write(chunk) | | | | +-------------------+ +=======+=========+ | | | | | ^ | +------------------v---------+ ^ | +-&gt; if (!chunk) | Is this chunk too big? | ^ | | emit .end(); | Is the queue busy? | | | +-&gt; else +-------+----------------+---+ | ^ | emit .write(); | | | ^ ^ +--v---+ +---v---+ | | ^-----------------------------------&lt; No | | Yes | ^ | +------+ +---v---+ ^ | | | ^ emit .pause(); +=================+ | | ^---------------^-----------------------+ return false; &lt;-----+---+ | +=================+ | | | ^ when queue is empty +============+ | ^------------^-----------------------&lt; Buffering | | | |============| | +&gt; emit .drain(); | ^Buffer^ | | +&gt; emit .resume(); +------------+ | | ^Buffer^ | | +------------+ add chunk to queue | | &lt;---^---------------------&lt; +============+ å®ç°æµåœ¨æœ¬èŠ‚ä¸­æˆ‘ä»¬å®ç°å…·ä½“æ¥æµï¼Œé€šè¿‡å®ç°æµå¯ä»¥è¿›ä¸€æ­¥åŠ æ·±å¯¹ Stream å†…éƒ¨å·¥ä½œç»†èŠ‚çš„ç†è§£ã€‚ å®ç°å¯è¯»æµä¸Šé¢æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ fs.createReadableStream() æ–¹æ³•æ¥å¾—åˆ°ä¸€ä¸ªå¯è¯»æµçš„ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è‡ªå·±å®ç°ä¸€ä¸ªå¯è¯»æµã€‚å®ç°å¯è¯»æµåªéœ€è¦ç»§æ‰¿ Readable ç±»ï¼Œç„¶åå®ç° _read() æ–¹æ³•å³å¯ const &#123;Readable&#125; = require('stream');class IeteratorReadableStream extends Readable &#123; constructor(iterator) &#123; super(); this.iterator = iterator; &#125; _read() &#123; let data = this.iterator.next(); // console.log(data); if(data.done) &#123; this.push(null); &#125; else &#123; // å¿…é¡» push å­—ç¬¦ä¸²æˆ–è€… Buffer this.push(data.value+''); &#125; &#125;&#125;module.exports = IeteratorReadableStream; ä¸Šè¿°æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå¯è¯»æµï¼Œå¯è¯»æµæ¥æ”¶ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªè¿­ä»£å™¨ä½œä¸ºè¿™ä¸ªå¯è¯»æµçš„æ•°æ®æºã€‚å¯è¯»æµä¼šè‡ªåŠ¨çš„è°ƒç”¨ _read è·å–æ•°æ®ï¼Œåœ¨ _read æ–¹æ³•ä¸­æˆ‘ä»¬ä»è¿­ä»£å™¨ä¸­è·å–æ•°æ®ï¼Œå¹¶ä¸”è°ƒç”¨äº† push æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨å°±æ˜¯å°†æ•°æ®æ”¾å…¥åˆ°ç¼“å­˜åŒºä¸­ï¼Œåªèƒ½å‘å…¶ä¸­ push å­—ç¬¦ä¸²æˆ–è€… Bufferï¼Œå½“æˆ‘ä»¬å‘å…¶ä¸­ push null æ—¶å°±è¡¨ç¤ºæ•°æ®å·²ç»è¢«å…¨éƒ¨è¯»å–å®Œæ¯•ã€‚ æ‰€ä»¥å¯è¯»æµçš„æ‰§è¡Œé€»è¾‘ä¸ºï¼Œæ¯æ¬¡è°ƒç”¨ _read æ–¹æ³•ä»æ•°æ®æºè¯»å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®å­˜å…¥ç¼“å­˜åŒºï¼Œç„¶åè§¦å‘ data äº‹ä»¶ï¼Œå°†ç¼“å­˜åŒºä¸­çš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’ç»™ data äº‹ä»¶ç»‘å®šçš„å›è°ƒå‡½æ•°ï¼Œå¾ªç¯ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°å‘ç¼“å­˜åŒº push null æ—¶ï¼Œå°±è¡¨ç¤ºæ•°æ®æºä¸­çš„æ•°æ®å·²ç»è¢«è¯»å–å®Œæ¯•ï¼Œæ­¤æ—¶ä¼šè§¦å‘ end äº‹ä»¶ã€‚ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºæ•°æ®æºä¼ å…¥ const IeteratorReadableStream = require('./IteratorReadableStream');function *getData() &#123; for(let i = 0; i &lt; 5; i++) &#123; yield i; &#125;&#125;let rs = new IeteratorReadableStream(getData());rs.on('data', data =&gt; &#123; console.log(data.toString());&#125;);rs.on('end', () =&gt; &#123; console.log(\"è¿­ä»£ç»“æŸ\");&#125;); è¾“å‡ºä¸º 01234è¿­ä»£ç»“æŸ å®ç°å¯å†™æµå®ç°å¯å†™æµçš„è¿‡ç¨‹åŒå®ç°å¯è¯»æµçš„è¿‡ç¨‹ç±»ä¼¼ï¼Œé¦–å…ˆéœ€è¦ç»§æ‰¿ Writable ç±»ï¼Œæ¥ç€å®ç° _write æ–¹æ³•å³å¯ const fs = require('fs');const &#123;Writable&#125; = require('stream');class FileWritableStream extends Writable &#123; constructor(filepath) &#123; super(); this.filepath = filepath; &#125; _write(chunk, encoding, callback) &#123; fs.appendFile(this.filepath, chunk, &#123; encoding &#125;, callback) &#125;&#125; ä¸Šé¢æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå¯å†™æµï¼Œè¿™ä¸ªå¯å†™æµæ¥æ”¶ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å‘è¿™ä¸ªæ–‡ä»¶ä¸­è¿½åŠ æ•°æ®ï¼Œæ¯æ¬¡å½“æˆ‘ä»¬è°ƒç”¨å¯å†™æµçš„ write() æ–¹æ³•æ—¶ï¼Œå®ƒä¼šå‘ç¼“å†²åŒºå†™å…¥æ•°æ®ï¼Œå½“è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œä¾¿ä¼šè°ƒç”¨ _write() æ–¹æ³•å°†æ•°æ®æ–°å¢åˆ°æ–‡ä»¶ä¸­ã€‚ process.stdin.pipe(new FileWritableStream('c.txt')); ä¸Šé¢è¿™è¡Œä»£ç çš„ä½œç”¨å°±æ˜¯å°†ä»æ ‡å‡†è¾“å…¥çš„å­—ç¬¦è¾“å‡ºåˆ° c.txt ä¸­ã€‚ å®ç°åŒå·¥æµDuplex Stream æ—¢å¯ä»¥ä½œä¸ºå¯è¯»æµï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¯å†™æµï¼Œå¹¶ä¸”å®ƒçš„è¾“å…¥ä¸è¾“å‡ºä¹‹é—´å¯ä»¥æ²¡æœ‰å…³ç³»ã€‚Duplex Stream ç»§æ‰¿äº† Readableï¼Œå¹¶ä¸”æ‹¥æœ‰ Writable çš„æ‰€æœ‰ï¼Œæˆ‘ä»¬åªè¦åˆ†åˆ«å®ç° _read() å’Œ _write() æ–¹æ³•å³å¯ const &#123; Duplex &#125; = require('stream');class CustomDuplexStream extends Duplex &#123; constructor() &#123; super(); this.currentCharCode = 65; &#125; _read() &#123; if(this.currentCharCode &lt;= 90) &#123; this.push(String.fromCharCode(this.currentCharCode++)) &#125; else &#123; this.push(null); &#125; &#125; _write(chunk, encoding, callback) &#123; console.log(chunk.toString()); callback(); &#125;&#125; ä¸Šé¢åŒå·¥æµçš„å¯è¯»æµéƒ¨åˆ†å°±æ˜¯å°†å¤§å†™çš„ 26 ä¸ªå­—æ¯æ·»åŠ è¿›äº†ç¼“å­˜åŒºï¼Œè€Œå¯å†™æµéƒ¨åˆ†å°±æ˜¯ç›´æ¥å°†æ•°æ®è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚å¯è§åŒå·¥æµå¯è¯»æµä¸å¯å†™æµä¹‹é—´å¹¶æ²¡æœ‰ä»»ä½•çš„å…³ç³» const dp = new CustomDuplexStream();dp.write(\"1\");dp.write(\"2\");dp.end();dp.pipe(process.stdout); è¾“å‡ºä¸º 12ABCDEFGHIJKLMNOPQRSTUVWXYZ å®ç°è½¬æ¢æµTranform Stream æ˜¯ Duplex çš„ç‰¹ä¾‹ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªåŒå·¥æµï¼Œä¸è¿‡å®ƒçš„è¾“å…¥å’Œè¾“å‡ºä¹‹é—´æœ‰å…³è”ï¼Œå®ƒçš„å†…éƒ¨é€šè¿‡ _transform() æ–¹æ³•å°†å¯å†™æµæ¥æ”¶åˆ°çš„æ•°æ®ç»è¿‡è½¬æ¢åä¼ å…¥åˆ°å¯è¯»æµä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å®ç°è½¬æ¢æµï¼Œåªéœ€è¦å®ç° _transform() æ–¹æ³•å³å¯ const &#123; Transform &#125; = require('stream');class UpperTransformStream extends Transform &#123; _transform(chunk, encoding, callback) &#123; this.push(chunk.toString().toUpperCase()); callback(); &#125;&#125; ä¸Šé¢æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè½¬æ¢æµï¼Œå®ƒå¯ä»¥å°†è¾“å…¥çš„å°å†™å­—ç¬¦è½¬åŒ–ä¸ºå¤§å†™å­—ç¬¦ç„¶åè¾“å‡º const ts = new UpperTransformStream();const rs = fs.createReadStream('a.txt');rs.pipe(ts).pipe(process.stdout); ä¸Šé¢ç¨‹åºä¼šè¯»å– a.txt ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œå°†å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ç„¶åè¾“å‡ºåœ¨æ§åˆ¶å°ã€‚ è½¬æ¢æµåœ¨å®é™…åº”ç”¨ä¸­è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸ª Node.js å†…ç½®çš„è½¬æ¢æµ zlibï¼Œå®ƒçš„ä½œç”¨å¯¹æ–‡ä»¶è¿›è¡Œè§£å‹ç¼©ï¼Œå°†æ–‡ä»¶å‹ç¼©ä¸ºå‹ç¼©æ–‡ä»¶ï¼Œæˆ–è€…å°†å‹ç¼©æ–‡ä»¶è§£å‹ä¸ºæ­£å¸¸æ–‡ä»¶ï¼Œè¿™ä¸å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„è½¬æ¢æµå˜›ï¼ const zlib = require('zlib');const fs = require('fs');const args = process.argv.slice(2);const source = fs.createReadStream(args[0]);const target = fs.createWriteStream(args[1]);const gzip = zlib.createGzip();source.pipe(gzip).pipe(target); æˆ‘ä»¬å¯ä»¥é€šè¿‡ node gzip.js Graph.md Graph.md.gz æ¥è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œå®ƒå¯ä»¥å°† Graph.md ä½¿ç”¨ gzip å‹ç¼©ä¸º Graph.md.gzã€‚ æ–‡ä»¶å¤§å°ä» 201KB å‹ç¼©åˆ°äº† 51KBã€‚ åŒæ ·çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ zlib.createGunzip() æ¥åˆ›å»ºä¸€ä¸ªè§£å‹ç¼©çš„è½¬æ¢æµï¼Œå…·ä½“ç»†èŠ‚åŒå‹ç¼©æ–‡ä»¶ç›¸åŒï¼Œä¸åšä»‹ç»ã€‚ æœ¬ç¯‡æ–‡ç« åˆ°æ­¤ç»“æŸï¼Œæƒ³å¿…åˆ°è¿™é‡Œå·²ç»å¯¹ Stream çš„ä½¿ç”¨å·²ç»æœ‰æ‰€äº†è§£äº†ï¼Œä½†æ˜¯æœ¬ç¯‡æ–‡ç« å¹¶æ²¡æœ‰åˆ—ä¸¾æ‰€æœ‰æœ‰å…³ Stream çš„ APIï¼Œå¦‚æœæƒ³æ›´åŠ è¯¦ç»†çš„äº†è§£ Stream çš„ APIï¼Œé‚£ä¹ˆæ¥ä¸‹å»å°±å¯ä»¥é˜…è¯»å®˜æ–¹æ–‡æ¡£äº†ã€‚ å‚è€ƒæ–‡çŒ® Nodeâ€™s Stream æ•°æ®æµä¸­çš„ç§¯å‹é—®é¢˜ æ·±å…¥ç†è§£ Node.js Stream å†…éƒ¨æœºåˆ¶ Node.js Stream - åŸºç¡€ç¯‡","tags":[{"name":"Stream","slug":"Stream","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Stream/"},{"name":"zlib","slug":"zlib","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/zlib/"}]},{"title":"ES6ï¼šJavaScriptä¸­çš„ç±»","date":"2021-03-02T16:00:00.000Z","path":"/ES6ï¼šJavaScriptä¸­çš„ç±»/","text":"JavaScript ä¸åŒäº Javaã€C++ ç­‰å…¸å‹çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ŒJavaScript åœ¨è¿‡å»å¹¶æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œæ‰€ä»¥ä¸€äº›ä» Java æˆ– C++ ç­‰å…¶ä»–é¢å‘è¯­è¨€è½¬è¿‡æ¥çš„å¼€å‘è€…ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼Œæ‰€ä»¥åœ¨ ES6 ä¸­å¼•å…¥äº†ç±»çš„æ¦‚å¿µã€‚ åŸºæœ¬ä½¿ç”¨å®šä¹‰ç±»ä½¿ç”¨å…³é”®å­— class å£°æ˜ä¸€ä¸ªç±» class Person &#123; constructor(name) &#123; this.name = name; &#125; sayHello() &#123; console.log(`Hello $&#123;this.name&#125;`) &#125;&#125;let amy = new Person(\"Amy\");amy.sayHello(); // Hello Amy éœ€è¦æ³¨æ„çš„æ˜¯ class åªæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå³ä¸€ä¸ª class å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•° class Person &#123; // ...&#125;console.log(typeof Person); // function ç±»ä¸æ„é€ å‡½æ•°æœ‰å¦‚ä¸‹ä¸åŒï¼š ç±»çš„å£°æ˜ä¸ä¼šæå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨ åœ¨ç±»å†…éƒ¨çš„ä»£ç è‡ªåŠ¨è¿è¡Œåœ¨ä¸¥æ ¼æ¨¡å¼ (strict mode) ä¹‹ä¸‹ ç±»ä¸­çš„æ–¹æ³•éƒ½æ˜¯ä¸å¯æšä¸¾çš„ ç±»ä¸­çš„æ–¹æ³•éƒ½æ²¡æœ‰å†…ç½®çš„ [[Construct]] æ–¹æ³•ï¼Œæ‰€ä»¥å½“ä½  new ä¸€ä¸ªç±»å†…éƒ¨çš„æ–¹æ³•æ—¶ï¼Œä¼šæŠ›å‡ºé”™è¯¯ ä¸ä½¿ç”¨ new è°ƒç”¨ç±»ä¼šå‘ç”Ÿé”™è¯¯ åœ¨ç±»ä¸­çš„æ–¹æ³•ä¸­ä¸èƒ½ä¿®æ”¹ç±»å class Person &#123; contructor() &#123; // ä¸èƒ½åœ¨æ–¹æ³•ä¸­ä¿®æ”¹ç±»å Person = \"foo\"; &#125;&#125; æ‰€ä»¥ä¸Šé¢ç±»çš„å£°æ˜ä¸ä¸‹é¢çš„ä»£ç ç­‰ä»· // 1. ç±»çš„å£°æ˜ä¸ä¼šæå‡åˆ°ä½œç”¨åŸŸçš„é¡¶éƒ¨let Person = (function (o, properties) &#123; // 2. åœ¨ç±»å†…éƒ¨çš„ä»£ç è‡ªåŠ¨è¿è¡Œåœ¨ä¸¥æ ¼æ¨¡å¼ (strict mode) ä¹‹ä¸‹ \"use strict\"; // 6. åœ¨ç±»ä¸­çš„æ–¹æ³•ä¸­ä¸èƒ½ä¿®æ”¹ç±»å (ä½¿ç”¨ const å®šä¹‰) const Person = function (name) &#123; // 5. ä¸ä½¿ç”¨ new è°ƒç”¨ç±»ä¼šå‘ç”Ÿé”™è¯¯ if (typeof new.target === 'undefined') &#123; throw new Error(\"Must be called by new\"); &#125; this.name = name; &#125;; Object.defineProperty(Person.prototype, \"sayHello\", &#123; value: function () &#123; // 4. ç±»ä¸­çš„æ–¹æ³•éƒ½æ²¡æœ‰å†…ç½®çš„ [[Construct]] æ–¹æ³•ï¼Œæ‰€ä»¥å½“ä½  new ä¸€ä¸ªç±»å†…éƒ¨çš„æ–¹æ³•æ—¶ï¼Œä¼šæŠ›å‡ºé”™è¯¯ if (typeof new.target !== 'undefined') &#123; throw new Error(\"Method in class can't be called by new!\"); &#125; console.log(`Hello $&#123;this.name&#125;`); &#125;, // 3. ç±»ä¸­çš„æ–¹æ³•éƒ½æ˜¯ä¸å¯æšä¸¾çš„ enumerable: false, writable: false, configurable: false &#125;); return Person;&#125;)(); ç±»è¡¨è¾¾å¼ç±»è¡¨è¾¾å¼çš„æ¦‚å¿µä¸å‡½æ•°è¡¨è¾¾å¼ç›¸å¯¹åº” let Person = class &#123; constructor(name) &#123; this.name = name; &#125; sayHello() &#123; console.log(`Hello $&#123;this.name&#125;`) &#125;&#125;; æˆ–è€… let Person = class Person2&#123; // ...&#125;;console.log(typeof Person); // functionconsole.log(typeof Person2); // undefined ç±»ä¸å‡½æ•°ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå³å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼è¿”å›ã€‚ è®¿é—®å™¨å±æ€§æˆ‘ä»¬å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰è®¿é—®å™¨å±æ€§ class Person &#123; constructor(name) &#123; this._name = name; &#125; set name(value) &#123; if (typeof value === 'string') &#123; this._name = value; &#125; &#125; get name() &#123; return this._name; &#125;&#125;let amy = new Person(\"Amy\");console.log(amy.name); // Amyamy.name = 10;console.log(amy.name); // Amyamy.name = \"Big\";console.log(amy.name); // Big è®¡ç®—å±æ€§åä¸å¯¹è±¡ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç±»ä¸­çš„æ–¹æ³•åè®¾ç½®è®¡ç®—å±æ€§å let methodName = \"sayHello\";class Person &#123; constructor(name) &#123; this.name = name; &#125; // è®¡ç®—å±æ€§å [methodName]() &#123; console.log(`Hello $&#123;this.name&#125;`); &#125;&#125;let amy = new Person(\"Amy\");amy.sayHello(); // Hello Amy ç”Ÿæˆå™¨æ–¹æ³•ç±»ä¸­çš„æ–¹æ³•è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ class Person &#123; *generateNames() &#123; yield \"Amy\"; yield \"Bob\"; yield \"Candy\"; &#125;&#125;let person = new Person();let iterator = person.generateNames();for (let name of iterator) &#123; console.log(name); // Amy // Bob // Candy&#125; è¿˜å¯ä»¥ä¸ºç±»ç¼–å†™ä¸€ä¸ªé»˜è®¤çš„è¿­ä»£å™¨ï¼Œå³ [Symbol.iterator] class Stack &#123; constructor(...items) &#123; this.items= [...items]; &#125; push(value) &#123; this.items.push(value); &#125; pop() &#123; return this.items.pop(); &#125; *[Symbol.iterator]() &#123; yield *this.items.values(); &#125;&#125; ä¸Šé¢æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ ˆçš„æ•°æ®ç»“æ„ï¼Œå¹¶æä¾›ä¸€ä¸ªè¿­ä»£å™¨æ¥éå†è¯¥æ ˆã€‚ é™æ€æ–¹æ³•é™æ€æ–¹æ³•æ˜¯ç±»çš„æ–¹æ³•ï¼Œä¸æ˜¯å®ä¾‹çš„æ–¹æ³•ï¼Œå¦‚ function Person(name) &#123; this.name = name;&#125;Person.print = console.log; ä¸Šé¢æˆ‘ä»¬åœ¨ Person ä¸Šå®šä¹‰äº†ä¸€ä¸ª print æ–¹æ³•ï¼Œå› ä¸º Person çš„å®ä¾‹ç»§æ‰¿çš„æ˜¯ Person.prototypeï¼Œæ‰€ä»¥ Person çš„å®ä¾‹è®¿é—®ä¸äº† print æ–¹æ³•ï¼Œè¿™ç§åªå¯ä»¥é€šè¿‡ç±»åè®¿é—®çš„æ–¹æ³•æˆ‘ä»¬ç§°ä¸ºé™æ€æ–¹æ³•ï¼Œåœ¨ class å®šä¹‰çš„ç±»ä¸­ï¼Œé€šè¿‡åœ¨æ–¹æ³•åå‰åŠ  static å…³é”®å­—è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯é™æ€æ–¹æ³• class Person &#123; constructor(name) &#123; this.name = name; &#125; static print(value) &#123; console.log(value); &#125;&#125;const person = new Person(\"å°æ˜\");// TypeError: person.print is not a functionperson.print(); // é”™è¯¯ï¼Œå®ä¾‹æ— æ³•è®¿é—®é™æ€æ–¹æ³• ç»§æ‰¿åœ¨ ES5 ä¸­å®ç°ç±»çš„ç»§æ‰¿ï¼Œéœ€è¦è´¹ä¸€ç•ªé¢å¤–çš„åŠŸå¤« function Person(name) &#123; this.name = name;&#125;Person.prototype.sayHello = function () &#123; console.log(\"Hello World!\");&#125;function Student(name) &#123; Person.call(this, name);&#125;Student.prototype = Object.create(Person.prototype, &#123; constructor: Student, writable: true, enumerable: true, configurable: true&#125;);let stu = new Student(\"Alice\");stu.sayHello(); // Hello Worldconsole.log(stu instanceof Student); // trueconsole.log(stu instanceof Person); // true åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡å…³é”®å­— extends å³å¯æ¥ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œå¦‚ class Person &#123; constructor(name) &#123; this.name = name; &#125; sayHello() &#123; console.log(\"Hello World\"); &#125;&#125;class Student **extends** Person&#123; constructor(name) &#123; super(name); &#125;&#125;let stu = new Student(\"Alice\");stu.sayHello(); // Hello Worldconsole.log(stu instanceof Student); // trueconsole.log(stu instanceof Person); // true ç»§æ‰¿è‡ªå…¶å®ƒç±»çš„ç±»ç§°ä¸ºå­ç±»ï¼Œæˆ–è€…æ´¾ç”Ÿç±»ã€‚åœ¨å­ç±»çš„æ„é€ æ–¹æ³• constructor ä¸­ï¼Œå¿…é¡»é¦–å…ˆé€šè¿‡è°ƒç”¨ super æ–¹æ³•æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿™é‡Œåˆå§‹åŒ– thisï¼Œå¦‚æœæ²¡æœ‰è°ƒç”¨ super æ–¹æ³•çš„è¯ï¼Œä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸” super æ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”å¿…é¡»åœ¨è®¿é—® this å˜é‡ä¹‹å‰ã€‚ å”¯ä¸€ä¸ç”¨åœ¨å­ç±»ä¸­è°ƒç”¨ super æ–¹æ³•çš„æƒ…å†µå°±æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚ æ–¹æ³•é‡å†™æˆ‘ä»¬å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»ä¸­çš„æ–¹æ³• class Person &#123; constructor(name) &#123; this.name = name; &#125; sayHello() &#123; console.log(\"Hello World\"); &#125;&#125;class Student extends Person&#123; constructor(name) &#123; super(name); &#125; // é‡å†™çˆ¶ç±»çš„æ–¹æ³• **sayHello() &#123; console.log(\"Hi\"); &#125;**&#125;let stu = new Student(\"Alice\");stu.sayHello(); // Hi ä¸Šé¢åœ¨ Student ä¸­é‡å†™äº† Person sayHello æ–¹æ³•ï¼Œæ‰€ä»¥æœ€åæ‰“å°å‡ºçš„ç»“æœæ˜¯ â€œHiâ€ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»ä¸­è¢«é‡å†™æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ super è°ƒç”¨ï¼Œsuper æŒ‡å‘çš„å°±æ˜¯çˆ¶ç±»çš„æ–¹æ³• class Student extends Person&#123; // ... sayHello() &#123; **super.sayHello();** console.log(\"Hi\"); &#125;&#125;let stu = new Student(\"Alice\");stu.sayHello(); // Hello World // Hi é™æ€æ–¹æ³•ç»§æ‰¿ç±»ä¸­çš„é™æ€æ–¹æ³•ä¹Ÿå¯ä»¥è¢«ç»§æ‰¿ class Person &#123; static print(...value) &#123; console.log(...value); &#125;&#125;class Student extends Person&#123;&#125;Student.print(\"Hello\", \"World\"); ä¸Šé¢ Student ç»§æ‰¿äº† Personï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ Student è°ƒç”¨å®ƒç»§æ‰¿çš„ Person çš„é™æ€æ–¹æ³• printã€‚ ç»§æ‰¿è‡ªè¡¨è¾¾å¼extends åé¢ä¸ä»…ä»…å¯ä»¥æ˜¯ç±»åï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦å‡½æ•°æœ‰ [[Contructor]] æ–¹æ³•å³å¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œåªè¦è¡¨è¾¾å¼çš„ç»“æœæ˜¯å…·æœ‰ [[Contructor]] æ–¹æ³•çš„å‡½æ•°å³å¯ function Person(name) &#123; this.name = name;&#125;Person.print = console.log;// ç»§æ‰¿è‡ªä¸€ä¸ªå‡½æ•°class Student extends Person&#123;&#125;Student.print(\"Hello\", \"World\"); // Hello World ç»§æ‰¿å†…ç½®ç±»æˆ‘ä»¬å¯ä»¥ç»§æ‰¿å†…ç½® (build-in) ç±» class MyArray extends Array&#123;&#125;let arr = new MyArray();arr[0] = \"red\";console.log(arr); // MyArray(1) [ 'red' ]console.log(arr.length); // 1arr.length = 0;console.log(arr); // MyArray(0) [] ä¸Šé¢æˆ‘ä»¬è‡ªå®šç±»ç»§æ‰¿äº† Array å³æ•°ç»„ï¼Œå› æ­¤å®ƒçš„å·¥ä½œæ–¹å¼é€šæ•°ç»„ç±»ä¼¼ã€‚ Symbol.species å±æ€§é¦–å…ˆä»‹ç»ä¸€ä¸‹æ•°ç»„çš„ slice æ–¹æ³•ï¼Œslice æ–¹æ³•æ˜¯å¯¹æ•°ç»„å†…çš„å…ƒç´ è¿›è¡Œæ‹·è´ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œbegin å’Œ endï¼Œè¡¨ç¤ºæ‹·è´çš„èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®ï¼Œè¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœé»˜è®¤æ²¡æœ‰ä¼ å…¥å‚æ•°çš„è¯ï¼Œbegin çš„é»˜è®¤å€¼æ˜¯ 0ï¼Œend é»˜è®¤è¡¨ç¤ºæ‹·è´åˆ°æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´  let arr = [\"red\", \"green\", \"blue\"];let newArr = arr.slice(0, 2);console.log(newArr); // [ 'red', 'green' ]console.log(newArr instanceof Array); // true æˆ‘ä»¬çŸ¥é“ slice è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒæ˜¯ Array ç±»å‹çš„å®ä¾‹ï¼Œç°åœ¨å¦‚æœæˆ‘ä»¬è‡ªå®šä¹‰ç±» MyArray ç»§æ‰¿ Array ç±»ï¼Œè°ƒç”¨ slice æ–¹æ³• class MyArray extends Array &#123;&#125;let arr = new MyArray();arr.push(...[\"red\", \"green\", \"blue\"]);let newArr = arr.slice();console.log(newArr instanceof MyArray); // trueconsole.log(newArr instanceof Array); // true æˆ‘ä»¬å‘ç°è¿”å›çš„æ˜¯ MyArray çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ Array å®ä¾‹ï¼Œè¿™æ˜¯å› ä¸º Symbol.species å±æ€§ï¼Œå®ƒæ§åˆ¶ç€ slice æ–¹æ³•è¿”å›çš„æ•°ç»„æ˜¯è°çš„å®ä¾‹ class MyArray extends Array &#123; **static get [Symbol.species]() &#123; return Array; &#125;**&#125;let arr = new MyArray();arr.push(...[\"red\", \"green\", \"blue\"]);let newArr = arr.slice();console.log(newArr instanceof MyArray); // **false**console.log(newArr instanceof Array); // true ä¸Šé¢æˆ‘ä»¬åœ¨ MyArray ä¸­æ·»åŠ äº†ä¸€ä¸ªé™æ€æ–¹æ³• [Symbol.species]ï¼Œå®ƒè¿”å›çš„å€¼æ—¶ Arrayï¼Œè¡¨ç¤ºè°ƒç”¨ slice æ–¹æ³•åè¿”å›çš„å®ä¾‹æ˜¯ Array çš„å®ä¾‹ã€‚ new.targetæˆ‘ä»¬å¯ä»¥åœ¨ç±»çš„ contructor æ–¹æ³•ä¸­è®¿é—® new.targetï¼Œé€šè¿‡ new.target æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€è°“çš„æŠ½è±¡ç±»ï¼ŒæŒ‡çš„å°±æ˜¯ä¸èƒ½è¢« new å‡ºå®ä¾‹çš„ç±»ï¼Œå®ƒåªèƒ½è¢«ç»§æ‰¿ class Shape &#123; constructor(name) &#123; if (new.target === Shape) &#123; throw new Error(\"Can't be called by new!\"); &#125; &#125;&#125;class Rectangle extends Shape&#123; constructor(name, width, height) &#123; super(name); this.width = width; this.height = height; &#125;&#125;let rec = new Shape(\"é•¿æ–¹å½¢\"); Shape ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒä¸èƒ½é€šè¿‡ new æ¥å®ä¾‹åŒ–ï¼Œä¸Šé¢å½“æˆ‘ä»¬ new Shape æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ æˆ‘ä»¬å¯ä»¥å®ä¾‹åŒ–å®ƒçš„å­ç±» let rec = new Rectangle(\"é•¿æ–¹å½¢\", 10, 5);","tags":[{"name":"class","slug":"class","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/class/"}]},{"title":"ES6ï¼šè¿­ä»£å™¨ä¸ç”Ÿæˆå™¨","date":"2021-03-01T16:00:00.000Z","path":"/ES6ï¼šè¿­ä»£å™¨å’Œç”Ÿæˆå™¨/","text":"è¿­ä»£å™¨æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ for å¾ªç¯æ¥éå†æ•°ç»„ let arr = [\"red\", \"green\", \"blue\"]for (let i = 0; i &lt; arr.length; i++) &#123; console.log(arr[i]);&#125; ä¸Šè¿°ä»£ç æ˜¯ä½¿ç”¨å˜é‡ i ä½œä¸ºä¸‹æ ‡æ¥è®¿é—®æ•°ç»„ï¼Œä½†æ˜¯å¯¹äºä¸€äº›æ— åºçš„é›†åˆï¼Œä¾‹å¦‚ Map æˆ‘ä»¬ä¾¿ä¸èƒ½é€šè¿‡ä¸‹æ ‡çš„å½¢å¼è¿›è¡Œè®¿é—®ï¼Œæ‰€ä»¥æœ‰å¿…è¦æä¾›ç»Ÿä¸€çš„æ–¹å¼æ¥è®¿é—®é›†åˆï¼Œè¿™å°±æ˜¯è¿­ä»£å™¨ã€‚ æ‰€è°“çš„è¿­ä»£å™¨é‚£å½“ç„¶æ˜¯ç”¨æ¥è¿­ä»£ç”¨çš„ï¼Œè¿­ä»£çš„å¯¹è±¡å¯ä»¥æ˜¯æ•°ç»„ï¼Œé›†åˆä»¥åŠå¯¹è±¡ã€‚è¿­ä»£å™¨å«æœ‰ä¸€ä¸ªæ–¹æ³• next()ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨å°±æ˜¯ä»æ•°ç»„ (é›†åˆã€å¯¹è±¡) å–å‡ºä¸€ä¸ªå€¼ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸¤ä¸ªå±æ€§ï¼š doneï¼šä¸ºå¸ƒå°”å€¼ï¼Œfalse è¡¨ç¤ºé›†åˆä¸­è¿˜æœ‰å…ƒç´ å¯éå†ï¼Œtrue è¡¨ç¤ºé›†åˆä¸­æ²¡æœ‰å…ƒç´ å¯éå† valueï¼š å¦‚æœ done ä¸º falseï¼Œvalue çš„å€¼ä¸ºé›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ å€¼ï¼Œå¦‚æœ done ä¸º trueï¼Œvalue çš„å€¼ä¸º undefined function getIterator() &#123; let i = 0; return &#123; next() &#123; return &#123; done: i &gt; 3, value: i &gt; 3 ? undefined : i++ &#125; &#125; &#125;&#125;let iterator = getIterator();console.log(iterator.next()); // &#123; done: false, value: 0 &#125;console.log(iterator.next()); // &#123; done: false, value: 1 &#125;console.log(iterator.next()); // &#123; done: false, value: 2 &#125;console.log(iterator.next()); // &#123; done: false, value: 3 &#125;console.log(iterator.next()); // &#123; done: true, value: undefined &#125; getIterator è¿”å›ä¸€ä¸ªå…·æœ‰ next æ–¹æ³•çš„å¯¹è±¡ï¼Œnext æ–¹æ³•è¿”å›ä¸€ä¸ªå…·æœ‰ done å’Œ value å±æ€§çš„å¯¹è±¡ï¼Œæ¯æ¬¡è°ƒç”¨ next æ–¹æ³•ï¼Œéƒ½ä¼šå¯¹ i è¿›è¡Œ ++ ï¼Œå½“ i &gt; 3 æ—¶ï¼Œdone çš„å€¼å°±ä¸º trueï¼Œä¸”è¿”å›çš„ value å€¼ä¸º undefinedã€‚ ç”Ÿæˆå™¨ç”Ÿæˆå™¨çš„ä½œç”¨æ˜¯æ¥ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨çš„ï¼Œä¸Šé¢æˆ‘ä»¬è‡ªå®šä¹‰çš„è¿­ä»£å™¨éœ€è¦è‡ªå·±ç»´æŠ¤ done å’Œ value å±æ€§ï¼Œä½¿ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚ç”Ÿæˆå™¨çš„è¯­æ³•å°±æ˜¯åœ¨ function å…³é”®å­—ååŠ ä¸€ä¸ª * å·ï¼Œé€šè¿‡ yield è¿”å›è¢«è¿­ä»£çš„å…ƒç´  function *getIterator() &#123; let i = 0 while (i &lt;=3) &#123; yield i++ &#125;&#125;let iterator = getIterator()console.log(iterator.next()); // &#123; done: false, value: 0 &#125;console.log(iterator.next()); // &#123; done: false, value: 1 &#125;console.log(iterator.next()); // &#123; done: false, value: 2 &#125;console.log(iterator.next()); // &#123; done: false, value: 3 &#125;console.log(iterator.next()); // &#123; done: true, value: undefined &#125; å½“æˆ‘ä»¬è°ƒç”¨ getIterator æ–¹æ³•æ—¶ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œè¯¥æ–¹æ³•ï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚æ¯å½“è¯¥è¿­ä»£å™¨è°ƒç”¨ next æ–¹æ³•æ—¶ï¼Œå°±ä¼šå¼€å§‹æ‰§è¡Œå‡½æ•°ï¼Œç›´è‡³é‡åˆ° yield è¯­å¥ï¼Œå®ƒä¼šæŠŠ yield åçš„è¡¨è¾¾å¼ä½œä¸º value å±æ€§çš„å€¼è¿”å›ï¼Œä¾‹å¦‚é‡åˆ°yield 1 æ—¶ï¼Œè¿”å›å¯¹è±¡ {done: false, value: 1} ã€‚ å½“è¿”å›å¯¹è±¡åï¼Œä¸ä¼šç»§ç»­æ‰§è¡Œå‡½æ•°ï¼Œè€Œæ˜¯ä¼šæŒ‚èµ·è¯¥å‡½æ•°ï¼Œç›´åˆ°è¿­ä»£å™¨å†æ¬¡è°ƒç”¨ next æ–¹æ³•æ—¶ï¼Œå°±ä¼šä»ä¸Šæ¬¡æŒ‚èµ·çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ° yield è¯­å¥æˆ–è€…æ‰§è¡Œå®Œå‡½æ•°ã€‚ å½“æ‰§è¡Œå®Œå‡½æ•°æ—¶ä¼šè¿”å› {done: true, value: undefined} ï¼Œå¦‚æœæ˜¯é€šè¿‡ return è¯­å¥ç»“æŸå‡½æ•°çš„ï¼Œä¾‹å¦‚ return 10 ï¼Œé‚£ä¹ˆè¿™æ—¶ä¼šè¿”å› {done: true, value: 10} ã€‚ å› ä¸ºç”Ÿæˆå™¨åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥æœ‰å‡½æ•°è¡¨è¾¾å¼çš„å½¢å¼ï¼Œå®ƒçš„å‡½æ•°è¡¨è¾¾å¼å½¢å¼å¦‚ä¸‹ let getIterator = function *() &#123; // do something&#125; åŒæ ·ç”Ÿæˆå™¨ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡çš„æ–¹æ³• let o = &#123; *getIterator() &#123; &#125;&#125;let iterator = o.getIterator() å½“ç”Ÿæˆå™¨ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œ* è¦æ”¾åœ¨æ–¹æ³•åå‰ï¼Œå¦‚ *getIterator ã€‚ å¯è¿­ä»£ä¸ forâ€¦of å¾ªç¯å¯è¿­ä»£çš„æ¦‚å¿µæ˜¯é’ˆå¯¹å¯¹è±¡æå‡ºï¼Œå¦‚æœå¯¹è±¡å«æœ‰ Symbol.iterator å±æ€§ï¼Œé‚£ä¹ˆå°±è¯´å®ƒæ˜¯å¯è¿­ä»£çš„ã€‚Symbol.iterator æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å»è¿­ä»£ä¸€ä¸ªå¯¹è±¡ let obj = &#123; [Symbol.iterator]() &#123; let i = 1; return &#123; next() &#123; return &#123; done: i &gt; 3, value: i &gt; 3 ? undefined : i++ &#125; &#125; &#125; &#125;&#125;let iterator = obj[Symbol.iterator]()let result = iterator.next();while(!result.done) &#123; console.log(result.value); // 1 // 2 // 3 result = iterator.next();&#125; ä¸Šé¢éå†å¯¹è±¡è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦å†™ä¸€äº›æ¨¡æ¿ä»£ç ï¼Œå¦‚ let iterator = obj[Symbol.iterator]()let result = iterator.next();while(!result.done) &#123; // æ‹¿åˆ° result.valueï¼Œç„¶ååšä¸€äº›äº‹æƒ… result = iterator.next();&#125; æ‰€ä»¥ä¸ºäº†ç®€åŒ–ä»£ç çš„ç¼–å†™ï¼ŒES6 æå‡ºä¸€ä¸ªæ–°çš„ for â€¦ of è¯­æ³•ç³–æ¥å¸®æˆ‘ä»¬éå†å¯è¿­ä»£çš„å¯¹è±¡ï¼Œä¸Šé¢éå†å¯¹è±¡çš„ä»£ç å¯ä»¥å†™ä¸ºå¦‚ä¸‹ for(value of obj) &#123; console.log(value); // 1 // 2 // 3&#125; ä»£ç ç®€æ´äº†å¾ˆå¤šï¼Œä½†æ˜¯æˆ‘ä»¬è¦æ˜ç™½ for â€¦ of ä¸æ˜¯é»‘é­”æ³•ï¼Œfor â€¦ of æ‰€åšçš„äº‹æƒ…åŒä¸Šé¢å†™çš„æ¨¡æ¿ä»£ç åšçš„äº‹æƒ…æ˜¯ä¸€æ ·çš„ã€‚ æ‰€æœ‰ç”±ç”Ÿæˆå™¨ç”Ÿæˆçš„è¿­ä»£å™¨éƒ½æ˜¯å¯è¿­ä»£çš„ï¼Œå› ä¸ºç”Ÿæˆå™¨ä¼šé»˜è®¤ä¸ºè¿­ä»£å™¨çš„ Symbol.iterator å±æ€§èµ‹å€¼ã€‚ let getIterator = function *() &#123; yield 1 yield 2&#125;let iterator = getIterator()for (let value of iterator) &#123; console.log(value); // 1 // 2&#125; æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„ Symbol.iteraor æ˜¯å¦ä¸º function æ¥åˆ¤æ–­è¯¥å¯¹è±¡æ˜¯å¦å¯è¿­ä»£ function isIterable(obj) &#123; return typeof obj[Symbol.iterator] === 'function';&#125;let array = [1, 2, 3]let map = new Map()let set = new Set()let weakMap = new WeakMap()let weakSet = new WeakSet()console.log(isIterable(array)); // trueconsole.log(isIterable(map)); // trueconsole.log(isIterable(set)); // trueconsole.log(isIterable(weakMap)); // falseconsole.log(isIterable(weakSet)); // false å†…ç½®çš„è¿­ä»£å™¨é›†åˆè¿­ä»£å™¨é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬çŸ¥é“æ•°ç»„ã€Map ä»¥åŠ Set è¿™ä¸‰ä¸ªå‡ ä¸ªéƒ½æ˜¯å¯è¿­ä»£çš„ï¼Œä¸‹é¢æˆ‘ä»¬å°±å°†å­¦ä¹ å®ƒä»¬å†…ç½®çš„è¿­ä»£å™¨ã€‚æ¯ä¸€ä¸ªé›†åˆéƒ½æœ‰å¦‚ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š entries keys values è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œentries è¿­ä»£å™¨ä¸­çš„å…ƒç´ ä¸ºé”®å€¼å¯¹ç»„æˆæ•°ç»„ï¼Œkeys ä¸­çš„å…ƒç´ ä¸ºé›†åˆä¸­çš„é”®ï¼Œvalues ä¸­çš„å…ƒç´ ä¸ºé›†åˆçš„å€¼ã€‚ å…¶å®å¯¹äºæ•°ç»„å’Œ Set æ¥è¯´æ²¡æœ‰é”®çš„æ¦‚å¿µï¼Œä½†æ˜¯ä¸ºäº†æ¥å£çš„ç»Ÿä¸€ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰ä¸€ä¸‹æ•°ç»„ä¸ Set çš„é”®ï¼šæ•°ç»„çš„é”®å°±æ˜¯ä¸‹æ ‡ (0, 1, â€¦)ï¼ŒSet çš„é”®ä¸å®ƒçš„å€¼ç›¸åŒã€‚ å®šä¹‰å¦‚ä¸‹é›†åˆ let arr = [\"red\", \"green\", \"blue\"]let set = new Set([\"Alice\", \"Bob\"]);let map = new Map();map.set(\"Chinese\", 88);map.set(\"Math\", 98);map.set(\"English\",59); entries for(let entry of arr.entries()) &#123; console.log(entry); // [ 0, 'red' ] // [ 1, 'green' ] // [ 2, 'blue' ]&#125;for(let entry of set.entries()) &#123; console.log(entry); // [ 'Alice', 'Alice' ] // [ 'Bob', 'Bob' ]&#125;for(let entry of map.entries()) &#123; console.log(entry); // [ 'Chinese', 88 ] // [ 'Math', 98 ] // [ 'English', 59 ]&#125; keys for(let key of arr.keys()) &#123; console.log(key); // 0 // 1 // 2&#125;for(let key of set.keys()) &#123; console.log(key); // Alice // Bob&#125;for(let key of map.keys()) &#123; console.log(key); // Chinese // Math // English&#125; values for(let value of arr.values()) &#123; console.log(value); // red // green // blue&#125;for(let value of set.values()) &#123; console.log(value); // Alice // Bob&#125;for(let value of map.values()) &#123; console.log(value); // 88 // 98 // 59 ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯é›†åˆå®ƒä»¬çš„ Symbol.iterator æ˜¯ä»€ä¹ˆï¼Œå¯¹äºæ•°ç»„å’Œ Set æ¥è¯´ï¼Œå®ƒä»¬çš„ Symbol.iterator ä¸ values ç›¸åŒï¼Œå¯¹äº Map æ¥è®²ï¼Œå®ƒä»¬çš„ Symbol.iterator ä¸ entries ç›¸åŒ for(let item of arr)&#123; console.log(item); // red // green // blue&#125;for(let item of set)&#123; console.log(item); // Alice // Bob&#125;for(let item of map)&#123; console.log(item); // [ 'Chinese', 88 ] // [ 'Math', 98 ] // [ 'English', 59 ]&#125; å­—ç¬¦ä¸²è¿­ä»£å™¨å­—ç¬¦ä¸²è¶Šæ¥è¶Šåƒæ•°ç»„äº†ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ ‡å»è®¿é—®å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼éå†å­—ç¬¦ä¸² const str = \"Hi ğ ®·\"for(let i = 0; i &lt; str.length; i++) &#123; console.log(str[i]);&#125; ä½†æ˜¯å› ä¸º JavaScript ä¸è¯†åˆ« 4 ä¸ªå­—èŠ‚è¡¨ç¤ºçš„å­—ç¬¦ï¼Œæ‰€ä»¥æ‰“å°å¦‚ä¸‹ Hiï¿½ï¿½ æ‰€å¹¸ ES6 å¯¹ Unicode æä¾›å…¨å¥—æ”¯æŒï¼Œæ‰€ä»¥ ES6 æä¾›çš„å­—ç¬¦ä¸²è¿­ä»£å™¨è§£å†³äº†è¿™ä¸ªé—®é¢˜ for(let c of str) &#123; console.log(c);&#125; Hi ğ ®· å±•å¼€è¿ç®—ç¬¦çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ function removeDuplicate(array) &#123; let set = new Set(array) return [...set]&#125; ä¸Šé¢è¿™ä¸ªå‡½æ•°æ˜¯å¯¹å»é™¤æ•°ç»„ä¸­çš„é‡å¤å…ƒç´ ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬ä½¿ç”¨äº† [â€¦set] å±•å¼€è¿ç®—ç¬¦ï¼Œå°† Set é›†åˆå±•å¼€ä¸ºä¸€ä¸ªæ•°ç»„è¿”å›ï¼Œé‚£ä¹ˆ JavaScript å†…éƒ¨æ˜¯æ€ä¹ˆåšçš„ï¼Œå…¶å®å†…éƒ¨é»˜è®¤è°ƒç”¨äº† Set é›†åˆè¿­ä»£å™¨ï¼Œç„¶åå°† Set é›†åˆä¸­çš„å…ƒç´ æ·»åŠ åˆ°æ•°ç»„ä¸­çš„ let arr = [...set]// ç­‰ä»·äºlet arr = []for(let value of set) &#123; arr.push(value)&#125; è¿­ä»£å™¨é«˜çº§ç”¨æ³•ä¸ºè¿­ä»£å™¨ä¼ å…¥å‚æ•°æˆ‘ä»¬åœ¨è°ƒç”¨è¿­ä»£å™¨çš„ next æ–¹æ³•æ—¶ï¼Œè¿˜å¯ä»¥å‘å…¶ä¸­ä¼ å…¥ä¸€ä¸ªå‚æ•° function *getIterator() &#123; let first = yield 1; yield first + 2;&#125; let iterator = getIterator();console.log(iterator.next()); // &#123; value: 1, done: false &#125;console.log(iterator.next(2)); // &#123; value: 4, done: false &#125; ä¸Šé¢çš„åŠ¨å›¾è¯´æ˜äº†ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ï¼šå½“æˆ‘ä»¬è°ƒç”¨ç¬¬ä¸€ä¸ª next æ—¶ï¼Œæ–¹æ³•å¼€å§‹æ‰§è¡Œï¼Œå½“æ‰§è¡Œåˆ° yield 1 ååœæ­¢æ‰§è¡Œï¼ŒæŒ‚èµ·å‡½æ•°å¹¶å°†å€¼è¿”å›ï¼Œå½“æˆ‘ä»¬ç¬¬äºŒæ¬¡è°ƒç”¨ next æ—¶ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä¼šè¢«ä¼ é€’ç»™ firstï¼Œæ¥ç€ç»§ç»­æ‰§è¡Œï¼Œå½“æ‰§è¡Œåˆ° yield first + 2 æŒ‚èµ·å‡½æ•°ï¼Œå¹¶è¿”å›å€¼ã€‚ æŠ›å‡ºé”™è¯¯è¿­ä»£å™¨è¿˜æœ‰ä¸€ä¸ª throw æ–¹æ³•ï¼Œå®ƒå¯ä»¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå…·ä½“çš„åº”ç”¨åœºæ™¯æˆ‘è¿˜ä¸æ¸…æ¥š function *getIterator() &#123; let first = yield 1; try &#123; let second = yield first + 2 &#125; catch (e) &#123; second = 6; &#125; yield second&#125;const iterator = getIterator();console.log(iterator.next()); // &#123; value: 1, done: false &#125;console.log(iterator.next(2)); // &#123; value: 4, done: false &#125;console.log(iterator.throw(new Error(\"error...\"))); // &#123; value: 6, done: false &#125;console.log(iterator.next()); // &#123; value: undefined, done: true &#125; å§”æ‰˜ç”Ÿæˆå™¨æœ‰çš„æ—¶å€™å¸Œæœ›èƒ½å¤Ÿç»„åˆä¸¤ä¸ªè¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ yield* çš„è¯­å¥æ¥ç»„åˆä¸¤ä¸ªè¿­ä»£å™¨ function *generator01() &#123; yield 1; yield 2;&#125;function *generator02() &#123; yield 3; yield 4;&#125;function *generatorCombine() &#123; yield *generator01(); yield *generator02();&#125;for (value of generatorCombine()) &#123; console.log(value); // 1 // 2 // 3 // 4&#125; yield *gengerator01() è¡¨ç¤ºå§”æ‰˜ generator01 è¿™ä¸ªç”Ÿæˆå™¨æ¥åšäº‹æƒ…ï¼Œå½“æ‰§è¡Œåˆ°è¿™æ¡è¯­å¥æ—¶ï¼Œæ¥ä¸‹æ¥ä¼šè¿›å…¥ generator01 å†…éƒ¨å»æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ° yield è¯­å¥ï¼Œåˆ™ä¼šå°†å‡½æ•°æŒ‚èµ·ï¼Œç„¶åå°†å€¼è¿”å›ï¼Œå½“ä¸‹æ¬¡è°ƒç”¨ next æ–¹æ³•æ—¶åˆ™ä»ä¸Šæ¬¡æŒ‚èµ·çš„åœ°æ–¹é‡æ–°å¼€å§‹æ‰§è¡Œã€‚","tags":[{"name":"è¿­ä»£å™¨","slug":"è¿­ä»£å™¨","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8/"},{"name":"ç”Ÿæˆå™¨","slug":"ç”Ÿæˆå™¨","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%94%9F%E6%88%90%E5%99%A8/"}]},{"title":"Node.jsä¹‹Buffer","date":"2021-03-01T16:00:00.000Z","path":"/Node.jsä¹‹Buffer/","text":"Buffer æ˜¯ Node.js çš„å†…ç½®ç±»å‹ï¼Œå®ƒæ˜¯ç”¨æ¥è¡¨ç¤ºå†…å­˜ä¸­ä¸€å—åŒºåŸŸçš„ï¼Œå®ƒä¿å­˜çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå¯ä»¥å°†å®ƒçœ‹åšä¸ºä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ã€‚ Buffer å¯ä»¥ç”¨æ¥è¡¨ç¤ºå›¾ç‰‡ã€è§†é¢‘è¿™æ ·çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦å¤–æˆ‘ä»¬ä»æ–‡ä»¶ä¸­è¯»å–åˆ°çš„ä¹Ÿæ˜¯ Buffer ç±»å‹çš„æ•°æ®ï¼Œä»ç½‘ç»œä¸­æ¥æ”¶çš„æ•°æ®ä¹Ÿæ˜¯ Buffer ç±»å‹çš„æ•°æ®ï¼Œæ‰€ä»¥å­¦ä¹  Buffer è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ Buffer ä½äºå…¨å±€ä½œç”¨åŸŸä¸­ï¼Œæ‰€ä»¥ä¸éœ€è¦é€šè¿‡ require(&#39;buffer&#39;) æ¥å¼•å…¥ Bufferã€‚ åˆ›å»º Buffer å¯¹è±¡allocæˆ‘ä»¬å¯ä»¥é€šè¿‡ Buffer.alloc(size, [fill], [encoding]) æ¥åˆ†é…ä¸€ä¸ª size å­—èŠ‚å¤§å°çš„å†…å­˜ï¼Œè¿˜å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•° fillï¼šä½¿ç”¨ fill æ¥å¡«å…… Buffer ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚ encodingï¼šå¦‚æœ fill ä¸ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä½¿ç”¨ encoding æ¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç ä¸ºäºŒè¿›åˆ¶ å½“ä¸æŒ‡å®š fill å‚æ•°ï¼Œé»˜è®¤ä¸ºå¡«å…… 0ã€‚ const buf1 = Buffer.alloc(5);console.log(buf1); // &lt;Buffer 00 00 00 00 00&gt;const buf2 = Buffer.alloc(10, 1);console.log(buf2); // &lt;Buffer 01 01 01 01 01 01 01 01 01 01&gt;const buf3 = Buffer.alloc(12, \"hello world!\", \"utf-8\");console.log(buf3); // &lt;Buffer 68 65 6c 6c 6f 20 77 6f 72 6c 64 21&gt; æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ allocUnsafe(size) æ¥åˆ†é…æŒ‡å®šå¤§å°çš„å†…å­˜ï¼Œä¸è¿‡ä¸ä¼šé»˜è®¤å¡«å…… 0ï¼Œå…¶ä¸­çš„å†…å®¹ä¸ç¡®å®š const buf = Buffer.allocUnsafe(5);console.log(buf); // &lt;Buffer c0 84 7c 2a 7b&gt; æˆ‘ä»¬å¯ä»¥é€šè¿‡ fill(fill, encoding) æ–¹æ³•ä¸º Buffer å¯¹è±¡å¡«å……æŒ‡å®šå€¼ const buf = Buffer.allocUnsafe(5);buf.fill(0);console.log(buf); // &lt;Buffer 00 00 00 00 00&gt; fromæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ Buffer.from() æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ª Buffer å¯¹è±¡ï¼Œfrom æ–¹æ³•å¯ä»¥æ¥æ”¶çš„å‚æ•°åŒ…æ‹¬æ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼ŒBuffer å¯¹è±¡ï¼Œå¯¹è±¡ç­‰ç±»å‹ã€‚ æ¥æ”¶ä¸€ä¸ªæ•´å½¢æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ•´æ•°åº”è¯¥åœ¨ 0~255 ä¹‹é—´ï¼Œè¶…å‡ºæ­¤èŒƒå›´çš„æ•°å­—å°†ä¼šè¢«æˆªæ–­ const buf = Buffer.from([1, 2, 3, 4, 5]);console.log(buf); // &lt;Buffer 01 02 03 04 05&gt; æˆ‘ä»¬è¿˜å¯ä»¥åƒå…¶ä¸­ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶æŒ‡å®šç¼–ç ï¼Œå®ƒä¼šä½¿ç”¨æŒ‡å®šç¼–ç å°†å­—ç¬¦ä¸²ç¼–ç ä¸ºäºŒè¿›åˆ¶ï¼Œå¦‚æœä¸æŒ‡å®šç¼–ç çš„è¯ï¼Œé»˜è®¤ä¸ºç¼–ç ä¸º utf-8 const buf = Buffer.from(\"hello\", \"utf-8\");console.log(buf); // &lt;Buffer 68 65 6c 6c 6f&gt; from æ–¹æ³•è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ª Buffer å¯¹è±¡ï¼Œå®ƒä¼šæ‹·è´ä¼ å…¥çš„ Buffer å¯¹è±¡ä¸­çš„æ•°æ®åˆ°æ–°çš„ Buffer å¯¹è±¡ä¸­ const buf1 = Buffer.from(\"hello\", \"utf-8\");const buf2 = Buffer.from(buf1);console.log(buf1 === buf2); // falseconsole.log(buf2.toString()); // hello from æ–¹æ³•è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä¼ å…¥å¯¹è±¡ï¼Œé¦–å…ˆä¼šå°†å¯¹è±¡è½¬åŒ–ä¸ºåŸå§‹å€¼ï¼Œç„¶åæ ¹æ®åŸå§‹å€¼è½¬åŒ–ä¸ºå¯¹åº”çš„äºŒè¿›åˆ¶æ•°ç»„ let obj = &#123; [Symbol.toPrimitive](hint) &#123; return \"a\"; &#125;,&#125;;const buf = Buffer.from(obj);console.log(buf.toString()); // a Buffer å¯¹è±¡çš„å±æ€§lengthé€šè¿‡ length å±æ€§å¯ä»¥çŸ¥é“ Buffer æ•°ç»„çš„é•¿åº¦ const buf = Buffer.from(\"Hello World!\");console.log(buf.length); // 12 bufferBuffer å¯¹è±¡å†…éƒ¨å®é™…å­˜å‚¨æ•°æ®çš„æ˜¯ä¸€ä¸ª ArrayBuffer çš„å¯¹è±¡ï¼Œé€šè¿‡ buffer å±æ€§å¯ä»¥å¾—åˆ°è¿™ä¸ªå¯¹è±¡ const buf = Buffer.alloc(5);console.log(buf.buffer); // ArrayBuffer &#123; [Uint8Contents]: &lt;00 00 00 00 00&gt;, byteLength: 5 &#125; è¯» Buffer å¯¹è±¡æœ¬èŠ‚ä»‹ç»å¦‚ä½•è®¿é—® Buffer å¯¹è±¡ä¸­çš„å†…å®¹ã€‚ ä¸‹æ ‡åœ¨æ–‡ç« çš„å¼€å¤´æè¿‡ï¼Œæˆ‘ä»¬å¯ä»¥å°† Buffer å¯¹è±¡çœ‹åšæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ï¼Œæ—¢ç„¶æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ä¸‹æ ‡çš„å½¢å¼æ¥è®¿é—®æ•°ç»„ä¸­çš„å†…å®¹ã€‚ const buf = Buffer.from([1, 2, 3, 4, 5]);console.log(buf[0]); // 1console.log(buf[5]); // undefined å®ƒä»¬ä¼šä»¥è¡¥ç çš„å½¢å¼è§£æå­—èŠ‚ï¼Œè¿”å›å¯¹åº”çš„æ•°å­—ã€‚ readXxxæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ buf.readInt8() buf.readInt16() buf.readUint8() buf.readUint16() ç­‰æ–¹æ³•æ¥è®¿é—® Buffer å¯¹è±¡ä¸­çš„å†…å®¹ã€‚ const buf = Buffer.from([1, 2, 3, 4, 5]);console.log(buf.readInt8(2)); // 3// è®¿é—®è¶…å‡ºèŒƒå›´çš„å†…å®¹ï¼Œä¼šæŠ›å‡º RangeErrorconsole.log(buf.readInt8(5)); // RangeError [ERR_OUT_OF_RANGE]: The value of \"offset\" is out of range. è¿­ä»£å™¨Buffer å¯¹è±¡çš„è¿­ä»£å™¨åŒæ•°ç»„çš„è¿­ä»£å™¨ç›¸åŒï¼Œä¹Ÿæœ‰ä¸‰ä¸ªè¿­ä»£å™¨ï¼Œåˆ†åˆ«æ˜¯ entries keys values æˆ‘ä»¬é€šè¿‡éå†è¿­ä»£å™¨æ¥è®¿é—® Buffer å¯¹è±¡ä¸­çš„å†…å®¹ã€‚ const buf = Buffer.from([3, 4, 2]);for (let entry of buf.entries()) &#123; // æ•°ç»„çš„ä¸€ä¸ªå…ƒç´ ä¸ºä¸‹æ ‡ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸ºä¸‹æ ‡å¯¹åº”çš„å…ƒç´  console.log(entry); // [ 0, 3 ] // [ 1, 4 ] // [ 2, 2 ]&#125; for (let key of buf.keys()) &#123; console.log(key); // 0 // 1 // 2&#125; for (let value of buf.values()) &#123; console.log(value); // 3 // 4 // 2&#125; å†™ Buffer å¯¹è±¡æœ¬å°èŠ‚è®²è§£å¦‚ä½•å‘ Buffer å¯¹è±¡ä¸­å†™å…¥å†…å®¹ã€‚ ä¸‹æ ‡æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ä¸‹æ ‡æ¥æ”¹å˜ Buffer å¯¹è±¡ä¸­çš„å†…å®¹ const buf = Buffer.from([1, 2, 3]);// é€šè¿‡ä¸‹æ ‡è®¾ç½®å€¼buf[0] = 4;console.log(buf); // &lt;Buffer 04 02 03&gt; writeæˆ‘ä»¬å¯ä»¥é€šè¿‡ write(string, [offset], [length], [encoding]) æ–¹æ³•å‘ Buffer ä¸­å†™å…¥å­—ç¬¦ä¸²ï¼š stringï¼šè¡¨ç¤ºè¦å†™å…¥çš„å­—ç¬¦ä¸² offsetï¼šåç§»é‡ï¼Œå³è·³è¿‡ offset ä¸ªå­—èŠ‚å¼€å§‹å†™å…¥ï¼Œé»˜è®¤ä¸º 0 lengthï¼šè¦å†™å…¥çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œä¸è¶…è¿‡ buf.length - offsetï¼Œé»˜è®¤å€¼ä¸º buf.length - offset encodingï¼šæŒ‡å®šç¼–ç ï¼Œé»˜è®¤ä¸º utf-8 è¯¥æ–¹æ³•è¿”å›å·²å†™å…¥çš„å­—èŠ‚æ•°ã€‚ const buf = Buffer.from([1, 2, 3, 4]);// è·³è¿‡ 1 ä¸ªå­—èŠ‚å¼€å§‹å†™å…¥ï¼Œ1hi4buf.write(\"hi\", 1);console.log(buf); // &lt;Buffer 01 68 69 04&gt; writeXxxåŒ readXxxï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ writeInt8() æ–¹æ³•å‘ buf ä¸­å†™å…¥æ•°æ®ï¼Œæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š valueï¼šè¦å†™å…¥çš„å€¼ offsetï¼šåç§»é‡ï¼Œé»˜è®¤ä¸º 0 const buf = Buffer.alloc(5);buf.writeInt8(1, 0);buf.writeInt8(3, 1);console.log(buf); // &lt;Buffer 01 03 00 00 00&gt; è¸©å‘ï¼šæ²¡æœ‰ writeInt16()ï¼Œä¸è¿‡æœ‰ writeInt16BE() ä¸ writeInt16LE()ï¼Œåˆ†åˆ«ä»£è¡¨ä»¥å¤§ç«¯åºã€å°ç«¯åºå†™å…¥ å…¶ä»–æ–¹æ³•isBufferè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥åˆ¤æ–­è¯¥å¯¹è±¡æ˜¯ä¸æ˜¯ä¸€ä¸ª Buffer å¯¹è±¡ let obj1 = &#123;&#125;;let obj2 = Buffer.alloc(3);console.log(Buffer.isBuffer(obj1)); // falseconsole.log(Buffer.isBuffer(obj2)); // true isEncodingè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªä»£è¡¨ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè¿”å› Buffer æ˜¯å¦æ”¯æŒè¯¥ç§ç¼–ç ï¼Œå¦‚æœæ”¯æŒåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false console.log(Buffer.isEncoding(\"utf-8\")); // trueconsole.log(Buffer.isEncoding(\"utf8\")); // trueconsole.log(Buffer.isEncoding(\"hex\")); // trueconsole.log(Buffer.isEncoding(\"latin\")); // falseconsole.log(Buffer.isEncoding(\"gbk\")); // false sliceslice(start, end) å¯ä»¥è£åˆ‡åŸæœ‰çš„ Buffer å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Buffer å¯¹è±¡ï¼Œå…¶ä¸­ start å’Œ end ä»£è¡¨è£åˆ‡çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œå·¦é—­å³å¼€ [start, end)ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œstart é»˜è®¤ä¸º 0ï¼Œend é»˜è®¤ä¸º buf.lengthã€‚è¿”å›çš„ Buffer å¯¹è±¡ä¸åŸå…ˆå¯¹è±¡å¼•ç”¨çš„æ˜¯åŒä¸€å—å†…å­˜ï¼Œå³å®ƒä»¬çš„ buffer å±æ€§æ˜¯ä¸€æ ·çš„ã€‚ const buffer = Buffer.from(\"hello world!\");const newBuffer = buffer.slice(6); // è£åˆ‡ 6 ä»¥åçš„å†…å®¹åˆ°æ–°æ•°ç»„console.log(newBuffer.toString()); // world!console.log(buffer.buffer === newBuffer.buffer); // true subarraysubarray(start, end) å‡ ä¹å¯ä»¥çœ‹åšç­‰åŒäº slice æ–¹æ³•äº†ï¼ŒäºŒè€…çš„è¯­ä¹‰ä¸åŒï¼Œä¸è¿‡è¡Œä¸ºç¡®å®ä¸€è‡´çš„ï¼Œsubarray çš„è¯­ä¹‰è¡¨ç¤ºè¿”å›åŸæ•°ç»„çš„æŸä¸ªèŒƒå›´çš„å­æ•°ç»„ï¼Œè€Œ slice çš„è¯­ä¹‰è¡¨ç¤ºçš„è£åˆ‡ã€‚åŒæ · subarray è¿”å›æ–°çš„ Buffer å¯¹è±¡ï¼Œå¹¶ä¸”è¿”å›çš„ Buffer å¯¹è±¡çš„ buffer ä¸åŸ Buffer å¯¹è±¡çš„ buffer å±æ€§æ˜¯ç›¸åŒçš„ã€‚ const buffer = Buffer.from(\"hello world!\");const newBuffer = buffer.subarray(6);console.log(newBuffer.toString()); // world!console.log(buffer.buffer === newBuffer.buffer); // true copycopy(target, [targetStart], [sourceStart], [sourceEnd]) æ–¹æ³•æ˜¯å°† source ä» sourceStart åˆ° sourceEnd çš„å†…å®¹å¤åˆ¶åˆ° target ä» targetStart çš„ä½ç½®ï¼Œè§ä¸‹åŠ¨å›¾ é™¤äº† target ä»¥å¤–ï¼Œå…¶ä»–ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰å‚æ•°ï¼ŒtargetStart ä¸ sourceStart çš„é»˜è®¤å€¼ä¸º 0ï¼ŒsourceEnd çš„é»˜è®¤å€¼ä¸º buf.length. const buf1 = Buffer.from(\"HelloWorld\");const buf2 = Buffer.alloc(8);buf1.copy(buf2, 0, 1, 9);console.log(buf2.toString()); // elloWorl includesbuf.includes(value, [offset], [encoding]) æ–¹æ³•çš„ä½œç”¨æ˜¯åˆ¤æ–­ value æ˜¯å¦åœ¨ buf ä¸­ã€‚ value å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª Buffer å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°ï¼›offset ç”¨æ¥è§„å®šæŸ¥æ‰¾èŒƒå›´ï¼Œè¡¨ç¤ºä» offset å¤„å¼€å§‹æŸ¥æ‰¾ï¼Œé»˜è®¤ä¸º 0ï¼›enconding è¡¨ç¤ºç¼–ç ï¼Œé»˜è®¤ä¸º utf-8ã€‚ const buf = Buffer.from(\"HelloWorld\");// é»˜è®¤ä» 0 å¼€å§‹æœç´¢console.log(buf.includes(\"H\")); // true// ä» 1 å¼€å§‹æœç´¢ï¼Œåé¢ä¸åŒ…å« Hconsole.log(buf.includes(\"H\", 1)); // falseconsole.log(buf.includes(Buffer.from(\"Hello\"))); // true// H å¯¹åº”çš„ utf-8 ç¼–ç ä¸º 72console.log(buf.includes(72)); // true indexOfbuf.indexOf(value, [offset], [encoding]) æ˜¯ç”¨æ¥æŸ¥æ‰¾ value åœ¨ buf ä¸­çš„ä¸‹æ ‡çš„ï¼Œå‚æ•°çš„å«ä¹‰åŒ includes æ–¹æ³•ç›¸åŒï¼Œå¦‚æœåœ¨ buf æ‰¾ä¸åˆ° valueï¼Œé‚£ä¹ˆä¼šè¿”å› -1ï¼Œæ‰€ä»¥ includes(value) æ–¹æ³•å…¶å®å°±ç›¸å½“äº indexOf(value) !== -1 const buf = Buffer.from(\"HelloWorld\");console.log(buf.indexOf(\"H\")); // 0console.log(buf.indexOf(\"H\", 1)); // -1console.log(buf.indexOf(Buffer.from(\"World\"))); // 5console.log(buf.indexOf(72)); // 0 equalsbuf.equals(otherBuffer) æ˜¯æ¯”è¾ƒä¸¤ä¸ª Buffer å¯¹è±¡çš„å­—èŠ‚æ˜¯å¦å®Œå…¨ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false const buf1 = Buffer.alloc(5);const buf2 = Buffer.alloc(5);const buf3 = Buffer.allocUnsafe(5);console.log(buf1.equals(buf2)); // trueconsole.log(buf1.equals(buf3)); // false å‚è€ƒæ–‡çŒ® Buffer|Node.js æ–‡æ¡£","tags":[{"name":"Buffer","slug":"Buffer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Buffer/"}]},{"title":"Node.jsä¹‹MongoDB","date":"2021-02-27T16:00:00.000Z","path":"/Node.jsä¹‹MongoDB/","text":"æœ¬ç« è®²è§£å¦‚ä½•ä½¿ç”¨ Node.js æ“ä½œ MongoDB æ•°æ®åº“ã€‚åˆ†ä¸ºä¸¤éƒ¨åˆ† MongoDB çš„å®‰è£…ä¸ä½¿ç”¨ Node.js ç¬¬ä¸‰æ–¹æ¨¡å— mongoose çš„ä½¿ç”¨ MongoDB ç®€ä»‹MongoDB æ˜¯ä¸€ä¸ª NoSQL æ•°æ®åº“ï¼Œå®ƒçš„æ•°æ®ç»„ç»‡ç»“æ„ä¸º æ•°æ®åº“ é›†åˆ æ–‡æ¡£ ä¸€ä¸ªæ•°æ®åº“ (database) åŒ…å«å¤šä¸ªé›†åˆ (collections)ï¼Œä¸€ä¸ªé›†åˆåŒ…å«å¤šä¸ªæ–‡æ¡£ (document)ï¼Œåœ¨ MongoDB ä¸­ï¼Œæ–‡æ¡£æ˜¯ JSON æ ¼å¼çš„å¯¹è±¡ &#123; \"_id\": ObjectId(\"6008027ec026735cc4aab553\"), \"username\": \"Alice\", \"todo\": \"å­¦ä¹ \"&#125; è¿›å…¥ MongoDB å®˜ç½‘ è¿›è¡Œå®‰è£… ç„¶åä¸€ç›´ä¸‹ä¸€æ­¥è¿›è¡Œå®‰è£…å³å¯ã€‚å®‰è£…å¥½ä¹‹åï¼Œè¿è¡Œ net start MongoDB å°±å¯ä»¥å¯åŠ¨ MongoDB æœåŠ¡ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œè¾“å…¥ mongo å³å¯è¿æ¥åˆ° MongoDB æœåŠ¡å™¨ï¼Œç„¶åè¿›å…¥ MongoDB shellï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œè¾“å…¥å‘½ä»¤æ“ä½œæ•°æ®åº“ æ“ä½œæ•°æ®åº“æŸ¥çœ‹æ•°æ®åº“ä½¿ç”¨ show dbs æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®åº“ &gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBnote 0.000GBtodo 0.000GB åˆ›å»ºæ•°æ®åº“ä½¿ç”¨ use æ•°æ®åº“ æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ï¼Œ &gt; use ipartmentswitched to db ipartment&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBnote 0.000GBtodo 0.000GB æˆ‘ä»¬å‘ç°å¹¶æ²¡æœ‰å‘ç°æ–°å»ºçš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å¿…é¡»å‘æ•°æ®åº“ä¸­æ’å…¥å†…å®¹ï¼Œæ‰ä¼šæ˜¾ç¤ºæ–°åˆ›å»ºçš„æ•°æ®åº“ &gt; db.coll.insert(&#123;name: 'Alice'&#125;)WriteResult(&#123; \"nInserted\" : 1 &#125;)&gt; show dbsadmin 0.000GBconfig 0.000GBipartment 0.000GBlocal 0.000GBnote 0.000GBtodo 0.000GB æˆ‘ä»¬å‘ ipartment æ•°æ®åº“çš„ coll é›†åˆä¸­æ·»åŠ äº†ä¸€æ¡æ–‡æ¡£ {name: &#39;Alice&#39;}ã€‚ åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ use æ•°æ®åº“ çš„æ–¹å¼æ¥åˆ‡æ¢æ•°æ®åº“ï¼Œé€šè¿‡å‘å‘½ä»¤è¡Œè¾“å…¥ db å¯ä»¥çŸ¥é“ç›®å‰åœ¨ä½¿ç”¨å“ªä¸ªæ•°æ®åº“ &gt; use noteswitched to db note&gt; dbnote åˆ é™¤æ•°æ®åº“åˆ é™¤æ•°æ®åº“ï¼Œä½¿ç”¨ db.dropDatabase() åˆ é™¤æ•°æ®åº“ # åˆ é™¤ä¹‹å‰ï¼Œæœ‰ ipartment æ•°æ®åº“&gt; show dbsadmin 0.000GBconfig 0.000GBipartment 0.000GBlocal 0.000GBnote 0.000GBtodo 0.000GB&gt; use ipartmentswitched to db ipartment&gt; db.dropDatabase()&#123; \"dropped\" : \"ipartment\", \"ok\" : 1 &#125;# åˆ é™¤ä¹‹åï¼Œipartment æ•°æ®åº“è¢«åˆ é™¤&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBnote 0.000GBtodo 0.000GB æ“ä½œé›†åˆæŸ¥çœ‹é›†åˆä½¿ç”¨ show collections æˆ– show tables æŸ¥çœ‹æŸæ•°æ®åº“ä¸‹æ‰€æœ‰çš„é›†åˆ &gt; use adminswitched to db admin&gt; show collectionssystem.version&gt; show tablessystem.version æ·»åŠ é›†åˆä½¿ç”¨ db.createCollection(name, options) æ¥åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•° nameï¼šé›†åˆçš„åå­— optionsï¼šå¯é€‰é€‰é¡¹ cappedï¼šä¸ºä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå½“å€¼ä¸º true æ—¶è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„é›†åˆï¼Œæ­¤æ—¶å¿…é¡»è¦æŒ‡å®š size é€‰é¡¹æŒ‡å®šé›†åˆçš„å¤§å°ã€‚å½“è¾¾åˆ°æœ€å¤§å€¼æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è¦†ç›–æœ€æ—©çš„æ–‡æ¡£ã€‚ sizeï¼šä¸ºå›ºå®šé›†åˆæŒ‡å®šæœ€å¤§å€¼ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ŒæŒ‡å®šè¯¥é€‰é¡¹æ—¶ï¼Œéœ€è¦è®¾ç½® capped é€‰é¡¹ä¸º true maxï¼šæŒ‡å®šé›†åˆèƒ½å¤ŸåŒ…å«çš„æ–‡æ¡£çš„æœ€å¤§æ•°é‡ # æ·»åŠ é›†åˆä¹‹å‰&gt; show collectionsnotemodels# æ·»åŠ é›†åˆ&gt; db.createCollection('test')&#123; \"ok\" : 1 &#125;# æ·»åŠ é›†åˆä¹‹å&gt; show collectionsnotemodelstest æˆ–è€…æˆ‘ä»¬å¯ä»¥é€šè¿‡ db.é›†åˆå.insert() ç›´æ¥å‘é›†åˆä¸­æ’å…¥ä¸€æ¡æ–‡æ¡£çš„æ–¹å¼æ¥æ–°å»ºä¸€ä¸ªé›†åˆ # æ·»åŠ é›†åˆä¹‹å‰ï¼Œåªæœ‰ä¸¤ä¸ªé›†åˆ&gt; show collectionsnotemodelstest# å‘æ•°æ®åº“çš„ coll é›†åˆä¸­æ·»åŠ ä¸€æ¡æ–‡æ¡£&gt; db.coll.insert(&#123;name: 'Bob'&#125;)WriteResult(&#123; \"nInserted\" : 1 &#125;)# æ’å…¥æ•°æ®ä¹‹åæœ‰ä¸‰ä¸ªé›†åˆ&gt; show collectionscollnotemodelstest åˆ é™¤é›†åˆé€šè¿‡ db.é›†åˆ.drop() æ–¹æ³•æ¥åˆ é™¤ä¸€ä¸ªé›†åˆ # åˆ é™¤ä¹‹å‰æœ‰ 3 ä¸ªé›†åˆ&gt; show collectionscollnotemodelstest# åˆ é™¤ coll é›†åˆ&gt; db.coll.drop()true# åˆ é™¤ä¹‹åæœ‰ä¸¤ä¸ªé›†åˆ&gt; show collectionsnotemodelstest é‡å‘½åé›†åˆä½¿ç”¨ db.é›†åˆ.renameCollection(name) æ¥ä¸ºé›†åˆé‡å‘½å &gt; show collectionsnotemodelstest# å°† test é›†åˆå‘½åä¸º rename&gt; db.test.renameCollection('rename')&#123; \"ok\" : 1 &#125;&gt; show collectionsnotemodelsrename æ“ä½œæ–‡æ¡£æ·»åŠ æ–‡æ¡£ä½¿ç”¨ db.é›†åˆ.insert() å‘æ–‡æ¡£ä¸­æ·»åŠ æ–‡æ¡£ &gt; use testswitched to db test# å‘ test æ•°æ®åº“çš„ data é›†åˆä¸­æ·»åŠ ä¸€æ¡æ–‡æ¡£&gt; db.data.insert(&#123;name: 'Alice', age: 18&#125;)WriteResult(&#123; \"nInserted\" : 1 &#125;) æ¯æ¬¡æ’å…¥ä¸€ä¸ªæ–‡æ¡£æ—¶ï¼Œæ–‡æ¡£ä¸­ä¼šé»˜è®¤æ·»åŠ ä¸€ä¸ª _id å±æ€§ (å½“ç„¶å¦‚æœä½ æ‰‹åŠ¨æŒ‡å®šäº† _id å±æ€§ï¼Œå°±ä¸ä¼šæ·»åŠ äº†)ï¼Œè¿™ä¸ª _id å±æ€§å°±æ˜¯è¿™ä¸ªæ–‡æ¡£çš„ä¸»é”®ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨ insert æ–¹æ³•æ’å…¥æ–‡æ¡£æ—¶ï¼Œå¦‚æœä¸»é”®å†²çªäº†(_id å±æ€§çš„å€¼ç›¸åŒ)ï¼Œé‚£ä¹ˆæ­¤æ—¶æ’å…¥ä¼šå¤±è´¥ã€‚ MongoDB è¿˜æä¾› insertOne() ä¸ insertMany() ä¸¤ä¸ªæ–¹æ³•æ¥æ’å…¥æ•°æ®ï¼Œé¡¾åæ€ä¹‰ï¼ŒinsertOne() æ˜¯ç”¨æ¥æ’å…¥ä¸€æ¡æ•°æ®çš„ï¼Œè€Œ insertMany() æ˜¯ç”¨æ¥æ·»åŠ å¤šæ¡æ•°æ®çš„ã€‚ # æ’å…¥ä¸€æ¡æ•°æ®&gt; db.data.insertOne(&#123;name: \"Bob\", age: 20&#125;)&#123; \"acknowledged\" : true, \"insertedId\" : ObjectId(\"603a33bc6999db0166256f73\")&#125;# æ’å…¥å¤šæ¡æ•°æ®&gt; db.data.insertMany([&#123;name: 'Candy', age: 30&#125;,&#123;name: \"David\"&#125;])&#123; \"acknowledged\" : true, \"insertedIds\" : [ ObjectId(\"603a33fc6999db0166256f74\"), ObjectId(\"603a33fc6999db0166256f75\") ]&#125; æŸ¥è¯¢æ–‡æ¡£ä½¿ç”¨ db.é›†åˆ.find(query) æ–¹æ³•æ¥æŸ¥è¯¢é›†åˆä¸­ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ï¼Œquery å°±æ˜¯æŸ¥è¯¢æ¡ä»¶ã€‚å½“æˆ‘ä»¬ä¸ä¼ å…¥ query æ—¶æˆ–è€… query ä¸º {} æ—¶ï¼Œè¡¨ç¤ºçš„æ˜¯æŸ¥è¯¢é›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£ # æŸ¥è¯¢é›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£&gt; db.data.find()&#123; \"_id\" : ObjectId(\"603a30186999db0166256f72\"), \"name\" : \"Alice\", \"age\" : 18 &#125;&#123; \"_id\" : ObjectId(\"603a33bc6999db0166256f73\"), \"name\" : \"Bob\", \"age\" : 20 &#125;&#123; \"_id\" : ObjectId(\"603a33fc6999db0166256f74\"), \"name\" : \"Candy\", \"age\" : 30 &#125;&#123; \"_id\" : ObjectId(\"603a33fc6999db0166256f75\"), \"name\" : \"David\" &#125; # æŸ¥è¯¢æ–‡æ¡£ä¸­ name å±æ€§å€¼ä¸º Alice çš„æ‰€æœ‰æ–‡æ¡£&gt; db.data.find(&#123;name: 'Alice'&#125;)&#123; \"_id\" : ObjectId(\"603a30186999db0166256f72\"), \"name\" : \"Alice\", \"age\" : 18 &#125; å¦‚æœæˆ‘ä»¬åªæ˜¯å¸Œæœ›è¿”å›ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ findOne()ã€‚ æ›´æ–°æ–‡æ¡£ä½¿ç”¨ db.é›†åˆ.update(conditions, doc) æ ¹æ®æ¡ä»¶ conditions æ–¹æ³•æ¥æ›´æ–°æ–‡æ¡£ï¼Œdoc ä¸ºæ›´æ–°åçš„æ–‡æ¡£ # æ›´æ–°å‰&gt; db.students.find()&#123; \"_id\" : ObjectId(\"603b4a6282fe3db58b69cc6d\"), \"name\" : \"Alice\", \"age\" : 20 &#125;# å°† age &gt; 18 çš„ä¸€æ¡æ–‡æ¡£æ›´æ–°ä¸º &#123;name: \"Alice\", age: 18&#125;&gt; db.students.update(&#123;age: &#123;$gt: 18&#125;&#125;, &#123;name: \"Alice\", age: 18&#125;)WriteResult(&#123; \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 &#125;)# æ›´æ–°å&gt; db.students.find()&#123; \"_id\" : ObjectId(\"603b4a6282fe3db58b69cc6d\"), \"name\" : \"Alice\", \"age\" : 18 &#125; ä¸Šé¢æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„ç¬¦å· $gtï¼Œå®ƒè¡¨ç¤ºå¤§äºï¼Œè€Œ {age: {$gt: 18}} å°±è¡¨ç¤º age &gt; 18ã€‚ç›¸å…³ç¬¦å·è¿˜æœ‰ $gteï¼šå¤§äºç­‰äº $ltï¼šå°äº $lteï¼šå°äºç­‰äº $neqï¼šä¸ç­‰äº $eqï¼šç­‰äº å¦å¤–å¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³æ›´æ–°æŸä¸ªå­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ $set ç¬¦å· # æ›´æ–°å‰&gt; db.students.find()&#123; \"_id\" : ObjectId(\"603b4a6282fe3db58b69cc6d\"), \"name\" : \"Alice\", \"age\" : 18 &#125;# åªæ›´æ–° age å­—æ®µ&gt; db.students.update(&#123;age: 18&#125;, &#123;$set: &#123;age: 19&#125;&#125;)WriteResult(&#123; \"nMatched\" : 1, \"nUpserted\" : 0, \"nModified\" : 1 &#125;)# æ›´æ–°å&gt; db.students.find()&#123; \"_id\" : ObjectId(\"603b4a6282fe3db58b69cc6d\"), \"name\" : \"Alice\", \"age\" : 19 &#125; åˆ é™¤æ–‡æ¡£ä½¿ç”¨ db.é›†åˆ.remove(query) æ¥åˆ é™¤ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰æ–‡æ¡£ï¼Œquery å³ä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œå½“ query ä¸º {} æˆ–è€…ä¸ä¼ å…¥ query å‚æ•°æ—¶ï¼Œæ„æ€ä¸ºåˆ é™¤æ‰€æœ‰æ–‡æ¡£ # æŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£&gt; db.data.find()&#123; \"_id\" : ObjectId(\"603a30186999db0166256f72\"), \"name\" : \"Alice\", \"age\" : 18 &#125;&#123; \"_id\" : ObjectId(\"603a33bc6999db0166256f73\"), \"name\" : \"Bob\", \"age\" : 20 &#125;&#123; \"_id\" : ObjectId(\"603a33fc6999db0166256f74\"), \"name\" : \"Candy\", \"age\" : 30 &#125;&#123; \"_id\" : ObjectId(\"603a33fc6999db0166256f75\"), \"name\" : \"David\" &#125;# åˆ é™¤ name ä¸º Alice çš„æ–‡æ¡£&gt; db.data.remove(&#123;name: 'Alice'&#125;)WriteResult(&#123; \"nRemoved\" : 1 &#125;)# æŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£ï¼Œå‘ç°å°‘äº†ä¸€æ¡æ–‡æ¡£&gt; db.data.find()&#123; \"_id\" : ObjectId(\"603a33bc6999db0166256f73\"), \"name\" : \"Bob\", \"age\" : 20 &#125;&#123; \"_id\" : ObjectId(\"603a33fc6999db0166256f74\"), \"name\" : \"Candy\", \"age\" : 30 &#125;&#123; \"_id\" : ObjectId(\"603a33fc6999db0166256f75\"), \"name\" : \"David\" &#125; å¦å¤– remove(query, options) æ–¹æ³•è¿˜æ¥å—ä¸€ä¸ªå¯é€‰å‚æ•° optionsï¼Œoptions æœ‰ä¸€ä¸ªé€‰é¡¹ justOneï¼Œå½“ justOne ä¸º true æˆ–è€…ä¸º 1 æ—¶ï¼Œè¡¨ç¤ºåªåˆ é™¤ä¸€æ¡æ–‡æ¡£ã€‚ mongooseä¸‹é¢æˆ‘ä»¬ä»‹ç»å¦‚ä½•ä½¿ç”¨ Node.js æ“ä½œ MongonDBã€‚å®˜æ–¹æä¾› mongodb æ¨¡å—æ¯”è¾ƒéš¾ç”¨ï¼Œè¿™é‡Œé€‰æ‹©å¤§å®¶å¸¸ç”¨çš„æ¨¡å— mongooseã€‚ å®‰è£… mongoose npm install mongoose --save æ¥çœ‹ä¸€ä¸ªç®€å•çš„ demoï¼Œå‘æ•°æ®åº“ä¸­æ·»åŠ äº†ä¸€æ¡æ–‡æ¡£ const mongoose = require(\"mongoose\");// è¿æ¥ä¸Š test æ•°æ®åº“mongoose.connect(\"mongodb://localhost:27017/test\", &#123; useNewUrlParser: true, useUnifiedTopology: true,&#125;);// è·å¾—æ•°æ®åº“å¯¹è±¡const db = mongoose.connection;db.on(\"error\", () =&gt; &#123; console.error(\"æ•°æ®åº“è¿æ¥å¤±è´¥!\");&#125;);db.once(\"open\", () =&gt; &#123; console.log(\"æ•°æ®åº“è¿æ¥æˆåŠŸ!\");&#125;);// å®šä¹‰æ¨¡å¼ï¼Œæ–‡æ¡£çš„å­—æ®µçš„åç§°ä»¥åŠå¯¹åº”çš„ç±»å‹const StudentSchema = new mongoose.Schema(&#123; name: String, age: Number,&#125;);// æ ¹æ®æ¨¡å¼åˆ›å»ºæ¨¡å‹å¯¹è±¡const StudentModel = mongoose.model(\"students\", StudentSchema);// æ ¹æ®æ¨¡å‹åˆ›å»ºæ–‡æ¡£const alice = new StudentModel(&#123; name: \"Alice\", age: 18,&#125;);// å‘é›†åˆä¸­æ·»åŠ ä¸€æ¡æ–‡æ¡£alice.save(); é¦–å…ˆæˆ‘ä»¬è¿æ¥äº† test æ•°æ®åº“ï¼Œæ¥ç€æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¨¡å¼ (Schema)ï¼Œå®ƒè§„å®šäº†é›†åˆä¸­æ–‡æ¡£æ¯ä¸ªå­—æ®µçš„åç§°ä»¥åŠå€¼çš„ç±»å‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ ¹æ®è¿™ä¸ªæ¨¡å¼åˆ›å»ºä¸€ä¸ªæ¨¡å‹ (Model)ï¼Œå¹¶ä¸”åˆ›å»ºäº†ä¸€ä¸ªåä¸º students çš„é›†åˆã€‚ é›†åˆçš„åç§°ä¸æ¨¡å‹çš„åç§°(å³ model() æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°)æœ‰å…³ï¼Œé›†åˆåç§°æ˜¯æ¨¡å‹åç§°çš„å°å†™ç‰ˆã€‚å¹¶ä¸”å¦‚æœæ¨¡å‹åç§°çš„æœ€åä¸€ä¸ªå­—ç¬¦ä¸ºå­—æ¯ï¼Œé‚£ä¹ˆé›†åˆåç§°å°±ä¼šå˜ä¸ºå¯¹åº”çš„å¤æ•°å½¢å¼ï¼›å¦‚æœæœ€åä¸€ä¸ªå­—ç¬¦ä¸ºæ•°å­—ï¼Œåˆ™ä¸å˜ æ¨¡å‹åç§° é›†åˆåç§° Student students Student1 student1 STUDENT students ä¸‹é¢æˆ‘ä»¬æ ¹æ®åˆ›å»ºçš„æ¨¡å‹åˆ›å»ºäº†ä¸€æ¡æ–‡æ¡£ï¼Œæ¥ç€è°ƒç”¨ save() æ–¹æ³•ï¼Œå°†è¿™æ¡æ–‡æ¡£æ·»åŠ åˆ°é›†åˆä¸­å»ã€‚ ä¸ºäº†ä¸‹é¢æ¼”ç¤ºçš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Modelï¼Œå¹¶å°†å…¶å¯¼å‡º // StudentModel.jsconst mongoose = require(\"mongoose\");mongoose.connect(\"mongodb://localhost:27017/test\", &#123; useNewUrlParser: true, useUnifiedTopology: true,&#125;);const db = mongoose.connection;db.on(\"error\", () =&gt; &#123; console.error(\"æ•°æ®åº“è¿æ¥å¤±è´¥!\");&#125;);db.once(\"open\", () =&gt; &#123; console.log(\"æ•°æ®åº“è¿æ¥æˆåŠŸ!\");&#125;);const StudentScheme = new mongoose.Schema(&#123; name: String, age: Number,&#125;);const StudentModel = mongoose.model(\"students\", StudentScheme);module.exports = StudentModel; æ·»åŠ æ–‡æ¡£é€šè¿‡å‘é›†åˆæ·»åŠ æ–‡æ¡£æœ‰ä¸‰ç§æ–¹æ³•ï¼š save create insertMany å…¶ä¸­ save æ–¹æ³•æ˜¯ Model å®ä¾‹çš„æ–¹æ³•ï¼Œè€Œ create ä¸ insertMany æ–¹æ³•æ˜¯ Model çš„æ–¹æ³•ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ª demo const StudentModel = require(\"./StudentModel\");// save æ–¹æ³•const bob = new StudentModel(&#123; name: \"Bob\", age: 18 &#125;);bob.save();// Model.create æ–¹æ³•StudentModel.create(&#123; name: \"Candy\", age: 20,&#125;);// Model.insertMany æ–¹æ³•let docs = [ &#123; name: \"David\", age: 40, &#125;, &#123; name: \"Eva\", age: 19, &#125;,];StudentModel.insertMany(docs); æŸ¥çœ‹æ•°æ®åº“ &gt; db.students.find()&#123; \"_id\" : ObjectId(\"603a5b85606f6555b0151f65\"), \"name\" : \"David\", \"age\" : 40, \"__v\" : 0 &#125;&#123; \"_id\" : ObjectId(\"603a5b85606f6555b0151f66\"), \"name\" : \"Eva\", \"age\" : 19, \"__v\" : 0 &#125;&#123; \"_id\" : ObjectId(\"603a5b85606f6555b0151f63\"), \"name\" : \"Bob\", \"age\" : 18, \"__v\" : 0 &#125;&#123; \"_id\" : ObjectId(\"603a5b85606f6555b0151f64\"), \"name\" : \"Candy\", \"age\" : 20, \"__v\" : 0 &#125; æŸ¥è¯¢æ–‡æ¡£æŸ¥è¯¢æ•°æ®ä¸»è¦æœ‰å¦‚ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š find findOne findById ä¸Šé¢çš„ä¸‰ä¸ªæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ª Promiseï¼Œå®ƒä»¬çš„ç”¨æ³•è§ä¸‹é¢çš„ demo const StudentModel = require(\"./StudentModel\");// æŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£const results = StudentModel.find();results.then((docs) =&gt; &#123; docs.forEach((doc) =&gt; &#123; console.log(doc.name); // David // Eva // Bob // Candy &#125;);&#125;);// æŸ¥è¯¢ name ä¸º Bob çš„ä¸€æ¡æ–‡æ¡£let doc = StudentModel.findOne(&#123; name: \"Bob\" &#125;);doc.then((bob) =&gt; &#123; console.log(bob.name); // Bob&#125;);// æ ¹æ® _id å±æ€§æ¥æŸ¥è¯¢æ–‡æ¡£doc = StudentModel.findById(\"603a5b85606f6555b0151f64\");doc.then((candy) =&gt; &#123; console.log(candy.name); // Candy&#125;); æ›´æ–°æ–‡æ¡£æœ‰å…³æ›´æ–°æ–‡æ¡£çš„æ–¹æ³•æœ‰å¦‚ä¸‹å‡ ç§ï¼š update updateOne updateMany findOneAndUpdate findByIdAndUpdate update æ–¹æ³•æ¥æ”¶å‚æ•°å¦‚ä¸‹ conditions doc options callback æˆ‘ä»¬æ ¹æ®æ¡ä»¶ conditions æ‰¾åˆ°éœ€è¦æ›´æ–°çš„æ–‡æ¡£ï¼Œç„¶åæ ¹æ® doc æ›´æ–°æ–‡æ¡£ï¼Œoptions åŒ…å«å¦‚ä¸‹é€‰é¡¹ upsert(boolean)ï¼šå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ–°çš„æ–‡æ¡£ multi(boolean)ï¼šæ˜¯å¦æ›´æ–°å¤šæ¡æŸ¥è¯¢ setDefaultsOnInsert(boolean)ï¼šå¦‚æœ upsert ä¸º trueï¼Œé‚£ä¹ˆæ’å…¥æ–‡æ¡£æ—¶ä½¿ç”¨é»˜è®¤å€¼ updateOne è¡¨ç¤ºåªæ›´æ–°ä¸€æ¡æ–‡æ¡£ï¼Œå³ä½¿è®¾ç½®äº† multi ä¸º trueï¼›updateMany å¯ä»¥æ›´æ–°å¤šæ¡æ–‡æ¡£ï¼Œå³ä½¿è®¾ç½®äº† multi ä¸º falseã€‚ const StudentModel = require(\"./StudentModel\");StudentModel.update(&#123; name: \"Bob\" &#125;, &#123; $set: &#123; age: 30 &#125; &#125;); findByIdAndUpdate() ä¸ findOneAndUpdate() ä¹Ÿå¯ä»¥ç”¨æ¥æ›´æ–°ä¸€æ¡æ–‡æ¡£ã€‚ åˆ é™¤æ–‡æ¡£æœ‰å…³åˆ é™¤æ–‡æ¡£çš„æ–¹æ³•æœ‰å¦‚ä¸‹ä¸‰ç§ï¼š deleteOne deleteMany findByIdAndDelete findOneAndDelete è¸©å‘ï¼šä¸€ç›´ä½¿ç”¨ä¸Šè¿°æ–¹æ³•åˆ é™¤å¤±è´¥å¤±è´¥ï¼Œåæ¥å‘ç°éœ€è¦åœ¨è°ƒç”¨æ–¹æ³•åéœ€è¦åŠ ä¸Š exec() è§ä¸‹æ–¹ demo æ¼”ç¤ºæ–¹æ³•çš„ä½¿ç”¨ const StudentModel = require(\"./StudentModel\");// åˆ é™¤ age ä¸º 19 çš„ä¸€æ¡æ–‡æ¡£StudentModel.deleteOne(&#123; age: 19 &#125;).exec();// åˆ é™¤ age &gt; 15 çš„æ‰€æœ‰æ–‡æ¡£StudentModel.deleteMany(&#123; age: &#123; $gt: 15 &#125; &#125;);// åˆ é™¤ name ä¸º Alice çš„æ–‡æ¡£StudentModel.findOneAndDelete(&#123; name: \"Alice\" &#125;).exec();// æ ¹æ® id åˆ é™¤æ–‡æ¡£StudentModel.findByIdAndDelete(\"603a5b85606f6555b0151f65\").exec(); å‚è€ƒæ–‡ç«  MongoDB æ•°æ®é›†åˆæ“ä½œï¼é›†åˆçš„æŸ¥çœ‹ã€åˆ›å»ºã€é‡å‘½åã€åˆ é™¤ MongoDB æ•™ç¨‹ Express æ•™ç¨‹ 3ï¼šä½¿ç”¨æ•°æ®åº“ (Mongoose) ä¸€ç¯‡æ–‡ç« å¸¦ä½ å…¥é—¨ Mongoose","tags":[{"name":"MongoDB","slug":"MongoDB","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/MongoDB/"},{"name":"mongoose","slug":"mongoose","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/mongoose/"}]},{"title":"Node.jsä¹‹Expresså…¥é—¨","date":"2021-02-24T16:00:00.000Z","path":"/Node.jsä¹‹Expresså…¥é—¨/","text":"Express æ˜¯åŸºäº Node.js çš„ Web æ¡†æ¶ï¼Œé€šè¿‡ Express å¯ä»¥å¿«é€Ÿçš„æ­å»ºä¸€ä¸ª Web åº”ç”¨ã€‚ åŸºæœ¬ä½¿ç”¨å®‰è£… express mkdir express-democd express-demonpm init -ynpm i express --save ä½¿ç”¨ Express å†™ä¸€ä¸ªç®€å•çš„ Web åº”ç”¨ // index.jsconst express = require('express');const app = express();app.get(\"/\", (req, res) =&gt; &#123; res.send(\"Hello World!\");&#125;);app.listen(3000); åœ¨ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨ï¼ŒæœåŠ¡å¯åŠ¨åœ¨ 3000 ç«¯å£ï¼Œå½“æˆ‘ä»¬ä»¥ get æ–¹æ³•è®¿é—® / è·¯å¾„æ—¶ï¼Œä¼šè¿”å› Hello World!ã€‚ node index.js è·¯ç”±è·¯ç”±å®šä¹‰äº†æœåŠ¡å™¨å¦‚ä½•å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚ä½œå‡ºç›¸åº”ï¼Œå®ƒç”±ä¸€ä¸ªç‰¹å®šçš„ URI ä»¥åŠä¸€ä¸ª HTTP æ–¹æ³•ç¡®å®šï¼Œæ¯ä¸€ä¸ªè·¯ç”±éƒ½è‡³å°‘å¯¹åº”ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚ åœ¨ Express ä¸­ï¼Œè·¯ç”±ç”±å¦‚ä¸‹å½¢å¼å®šä¹‰ app.method(path, handler) å…¶ä¸­ï¼š appï¼šexpress å®ä¾‹ methodï¼šHTTP è¯·æ±‚æ–¹æ³•ï¼Œå¦‚ get, post, delete â€¦ â€¦ pathï¼šè¯·æ±‚è·¯å¾„ï¼Œå¦‚ /ã€/add handlerï¼šè¯¥è·¯ç”±å¯¹åº”çš„è¯·æ±‚ ä¸‹é¢çœ‹å‡ ä¸ªä¾‹å­ // å½“å®¢æˆ·ç«¯ä»¥ POST è®¿é—® / è·¯å¾„æ—¶ï¼Œè¿”å› POSTapp.post(\"/\", (req, res) =&gt; &#123; res.send(`POST`) &#125;); const fs = require('fs').promises;// å½“å®¢æˆ·ç«¯ä»¥ GET æ–¹æ³•è®¿é—® /hello è·¯å¾„æ—¶ï¼Œè¿”å› hello.txt ä¸­çš„å†…å®¹app.get(\"/hello\", (req, res) =&gt; &#123; (async () =&gt; &#123; try &#123; const data = await fsreadFile('./hello.txt','utf-8'); res.send(data); &#125; catch(e) &#123; res.send(\"æ–‡ä»¶è¯»å–å¤±è´¥\"); &#125; &#125;)()&#125;); æš´éœ²é™æ€èµ„æºæ–‡ä»¶å½“æˆ‘ä»¬åœ¨ html é€šè¿‡ script src å»è¯·æ±‚ javascript css å›¾ç‰‡èµ„æºæ–‡ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸è¦é€šè¿‡è·¯ç”±å¤„ç†ï¼Œè€Œæ˜¯ç›´æ¥å°†æ–‡ä»¶è¿”å›ï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦å°†èµ„æºæ–‡ä»¶å¤¹æš´éœ²å‡ºæ¥ã€‚ app.use(express.static('public')) é€šè¿‡ä¸Šé¢ä¸€è¡Œä»£ç ï¼Œå°†æ ¹ç›®å½•ä¸‹çš„ public æ–‡ä»¶å¤¹ä¸­çš„é™æ€èµ„æºæš´éœ²å‡ºæ¥äº†ã€‚public æ–‡ä»¶å¤¹çš„å†…å®¹å¦‚ä¸‹ public script index.js css index.css å½“æˆ‘ä»¬å°† public æ–‡ä»¶å¤¹æš´éœ²ä¹‹åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡ http://localhost:3000/script/index.jshttp://localhost:3000/css/index.css è®¿é—®é™æ€èµ„æºã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºèµ„æºæ–‡ä»¶å¤¹è§„å®šè™šæ‹Ÿç›®å½•ï¼Œä¾‹å¦‚ app.use('/static', express.static('public')) ä¸Šé¢æˆ‘ä»¬èµ„æºæ–‡ä»¶æ‰€åœ¨çš„è™šæ‹Ÿç›®å½•ä¸º /staticï¼Œå³æˆ‘ä»¬ç°åœ¨è¦ä»¥ä¸‹é¢çš„æ–¹å¼è®¿é—®èµ„æºæ–‡ä»¶ http://localhost:3000/static/script/index.jshttp://localhost:3000/static/css/index.css ä¸­é—´ä»¶æ‰€è°“çš„ä¸­é—´ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾å®é™…çš„è·¯ç”±ä¹‹å‰å¯¹è¯·æ±‚å¯¹è±¡ä»¥åŠå“åº”å¯¹è±¡åšä»»ä½•çš„å¤„ç†ã€‚ä¾‹å¦‚ä¸Šè¿°æš´éœ²é™æ€èµ„æºæ–‡ä»¶ç›®å½•å°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå®ƒå¯ä»¥å°†èµ„æºæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ç›´æ¥è¿”å›ã€‚ ä¸ºä»€ä¹ˆå«åšä¸­é—´ä»¶ï¼Œæˆ‘çŒœæ˜¯å› ä¸ºå®ƒä½äºè¯·æ±‚ä¸è·¯ç”±å“åº”ä¸­é—´ï¼Œæ‰€ä»¥ç§°å®ƒä¸ºä¸­é—´ä»¶ æˆ‘ä»¬è¯´ä¸­é—´ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•° function(req, res, next) &#123; // åšä¸€äº›äº‹æƒ…&#125; å…¶ä¸­ï¼š reqï¼šè¯·æ±‚å¯¹è±¡ resï¼šå“åº”å¯¹è±¡ nextï¼šä¸‹ä¸€ä¸ªä¸­é—´ä»¶ å…¶ä¸­ next æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä¸€èˆ¬å¦‚æœä¸åœ¨è¿™ä¸ªä¸­é—´ä»¶ä¸­ç»ˆæ­¢å“åº”çš„è¯ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨å‡½æ•°çš„æœ€åè°ƒç”¨ next() æ–¹æ³•ï¼Œè¡¨ç¤ºåº”ç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚ ä¸º Express åº”ç”¨ä¸­é—´ä»¶ä¹Ÿå¾ˆç®€å•ï¼Œå°±ç›´æ¥ä½¿ç”¨ app.use(ä¸­é—´ä»¶å‡½æ•°) å³å¯ï¼Œä¾‹å¦‚ app.use((req, res, next) =&gt; &#123; req.requestTime = Date.now(); next();&#125;) ä¸Šé¢æˆ‘ä»¬å†™äº†ä¸€ä¸ªä¸­é—´ä»¶ï¼Œè¯¥ä¸­é—´ä»¶çš„å‡½æ•°å°±æ˜¯ä¸ºè¯·æ±‚å¯¹è±¡æ·»åŠ äº†ä¸€ä¸ª requestTime çš„å±æ€§ï¼Œç”¨æ¥è¡¨ç¤ºè¯·æ±‚åˆ°æ¥çš„æ—¶é—´ã€‚è¿™æ ·åœ¨åé¢çš„è·¯ç”±å¤„ç†å‡½æ•°ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ req.requestTime è¿™ä¸ªå±æ€§ app.get(\"/\", (req, res) =&gt; &#123; console.log(req.requestTime); res.send(`è¯·æ±‚æ—¶é—´æ˜¯ï¼š$&#123;req.requestTime&#125;`)&#125;) åœ¨è¿™é‡Œä»‹ç»ä¸€ä¸ªå¸¸ç”¨çš„ä¸­é—´ä»¶ï¼Œbody-parserï¼Œå®ƒå¯ä»¥è§£æ HTTP è¯·æ±‚ä½“å³ body ä¸­çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€šè¿‡å®ƒæ‹¿åˆ° POST è¯·æ±‚çš„è¯·æ±‚å‚æ•°ã€‚ é¦–å…ˆå®‰è£… body-aprser npm i body-parser --save ä½¿ç”¨ const bodyParser = require('body-parser');app.use(bodyParser.urlencoded(&#123;extended: false&#125;));app.use(bodyParser.json()); body-parser ä¼šå°†è§£æçš„ç»“æœæ·»åŠ åˆ° req.body ä¸Šé¢ï¼Œåœ¨è·¯ç”±å¤„ç†å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ req.body æ‹¿åˆ° POST çš„è¯·æ±‚å‚æ•° // å°†è¯·æ±‚å‚æ•°ç›´æ¥è¿”å›app.post(\"/\",(req, res) =&gt; &#123; res.send(req.body);&#125;) å‚è€ƒæ–‡çŒ® Expresså®˜ç½‘ body-parser ä½¿ç”¨è¯¦è§£","tags":[{"name":"Express","slug":"Express","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Express/"},{"name":"ä¸­é—´ä»¶","slug":"ä¸­é—´ä»¶","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/"}]},{"title":"Node.jsä¹‹äº‹ä»¶å¾ªç¯","date":"2021-02-23T03:46:00.000Z","path":"/Node.jsä¹‹äº‹ä»¶å¾ªç¯/","text":"Node.js æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æ˜¯å®ƒå´å¯ä»¥åº”ç”¨åœ¨é«˜å¹¶å‘åœºæ™¯ï¼ŒåŸå› å°±æ˜¯å®ƒçš„äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚æ‰€ä»¥æœ¬ç¯‡æ–‡ç« æ¥ä»‹ç» Node.js çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚ åŒæ­¥ä¸å¼‚æ­¥å› ä¸º Node.js æ˜¯å•çº¿ç¨‹çš„ï¼Œä»£ç çš„æ‰§è¡Œä¸èƒ½ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œå› ä¸ºåŒæ­¥æ‰§è¡Œä¼šé˜»å¡ä»£ç ï¼Œåœ¨å•çº¿ç¨‹ä¸­é˜»å¡ä»£ç æ„å‘³ç€æ•´ä¸ªç¨‹åºéƒ½è¢«é˜»å¡åˆ°äº†ï¼Œä»è€Œæ— æ³•å¤„ç†å…¶ä»–ä»»åŠ¡ã€‚å…¶ä»–åç«¯è¯­è¨€ä¼šä½¿ç”¨å¤šä¸ªçº¿ç¨‹å»æ‰§è¡Œä»£ç ï¼Œå³ä½¿ä¸€ä¸ªçº¿ç¨‹è¢«é˜»å¡åˆ°äº†ï¼Œå…¶ä»–çš„çº¿ç¨‹ä¹Ÿä¸ä¼šæœ‰å½±å“ã€‚ æ‰€ä»¥ Node.js ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼å»æ‰§è¡Œä»£ç ï¼Œä¸ºäº†æ›´å¥½çš„ç†è§£å¼‚æ­¥çš„æ¦‚å¿µï¼Œæˆ‘æ‰“ä¸ªæ¯”æ–¹ï¼Œå‡è®¾ä½ è¯·æˆ‘åšä¸€ä»¶äº‹æƒ…ï¼ŒåŒæ­¥çš„æ–¹å¼å°±æ˜¯ä½ ä¼šä¸€ç›´ç­‰æˆ‘å°†äº‹æƒ…åšå®Œï¼Œåœ¨æˆ‘æŠŠäº‹æƒ…åšå®Œä¹‹å‰ï¼Œä½ ä¸èƒ½å¹²åˆ«çš„äº‹æƒ…ï¼›å¼‚æ­¥çš„æ–¹å¼å°±æ˜¯ä½ è¯·æˆ‘åšä¸€ä»¶äº‹æƒ…ï¼Œåœ¨æˆ‘åšäº‹æƒ…çš„æ—¶å€™ä½ å¯ä»¥å¹²åˆ«çš„äº‹ï¼Œç­‰åˆ°æˆ‘å°†äº‹æƒ…åšå®Œçš„æ—¶å€™æˆ‘ä¼šå»é€šçŸ¥ä½ ã€‚ ä»¥è¯»å–æ–‡ä»¶ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥çœ‹åŒæ­¥çš„å†™æ³• const fs = require(\"fs\");// ç¨‹åºä¼šè¢«é˜»å¡åœ¨è¿™é‡Œï¼ŒçŸ¥é“æ–‡ä»¶è¯»å–å®Œæ¯•const data = fs.readFileSync(\"./hello.txt\", \"utf-8\");console.log(data);console.log(\"åŒæ­¥è¯»å–\"); è¾“å‡ºç»“æœä¸º Hello World!åŒæ­¥è¯»å– å› ä¸ºæ˜¯åŒæ­¥è¯»å–æ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šç¨‹åºä¼šé˜»å¡åœ¨è¿™é‡Œï¼Œç›´åˆ°è¯»å–å®Œæ–‡ä»¶æ‰ä¼šç»§ç»­æ‰§è¡Œä»£ç ï¼Œæ‰€ä»¥å…ˆè¾“å‡ºè¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œç„¶åè¾“å‡º åŒæ­¥è¯»å–ã€‚ æ¥ç€çœ‹å¼‚æ­¥çš„å†™æ³• const fs = require(\"fs\");// ç¨‹åºä¸ä¼šè¢«é˜»å¡åœ¨è¿™é‡Œfs.readFile(\"./hello.txt\", \"utf-8\", (err, data) =&gt; &#123; if (!err) &#123; console.log(data); &#125;&#125;);console.log(\"å¼‚æ­¥è¯»å–\"); è¾“å‡ºç»“æœä¸º å¼‚æ­¥è¯»å–Hello World! å› ä¸ºæ˜¯å¼‚æ­¥è¯»å–æ–‡ä»¶ï¼Œæ­¤æ—¶ä¸ä¼šé˜»å¡ç¨‹åºçš„æ‰§è¡Œï¼Œä¼šç»§ç»­æ‰§è¡Œä»£ç ï¼Œæ‰€ä»¥ä¼šå…ˆæ‰“å°å‡º å¼‚æ­¥è¯»å–ï¼Œç­‰åˆ°æ–‡ä»¶è¯»å–å®Œæ¯•æ—¶ï¼Œåˆ™ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œæ‰“å°å‡ºè¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹ã€‚ äº‹ä»¶é˜Ÿåˆ—ä¸‹é¢æˆ‘ä»¬å°±æ¥å‰–æ Node.js å¼‚æ­¥æ‰§è¡Œçš„èƒŒåè¿‡ç¨‹ï¼Œæˆ‘ä»¬çŸ¥é“ Node.js æ˜¯ä¸€é—¨åŸºäºäº‹ä»¶é©±åŠ¨çš„è¯­è¨€ï¼Œæˆ‘ä»¬ç›‘å¬æŸç±»äº‹ä»¶ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚äº‹ä»¶ï¼Œå¹¶ä¸ºå®ƒç»‘å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œåˆ™ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚ äº‹å®ä¸Šå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå›è°ƒå‡½æ•°å¹¶ä¸ä¼šç«‹å³å¾—åˆ°æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šæ·»åŠ åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œè€Œæ‰§è¡Œå¼•æ“åˆ™ä¼šä¸æ–­çš„ä»é˜Ÿåˆ—ä¸­å–å‡ºäº‹ä»¶æ‰§è¡Œï¼Œå–å‡ºäº‹ä»¶æ‰§è¡Œçš„è¿™ä¸ªè¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼Œå°±æ˜¯è¯´å…ˆæ·»åŠ è¿›é˜Ÿåˆ—ä¸­çš„å‡½æ•°ä¼šè¢«å…ˆæ‰§è¡Œï¼Œå¹¶ä¸”å…ˆæ‰§è¡Œå®Œå‰é¢çš„å‡½æ•°æ‰èƒ½æ‰§è¡Œåé¢çš„å‡½æ•°ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ setTimeout(() =&gt; &#123; // è¯¥å›è°ƒå‡½æ•°ä¼šèŠ±è´¹ 100 ms let end = Date.now(); while (end - start &lt; 100) &#123; end = Date.now(); &#125;&#125;, 5);setTimeout(() =&gt; &#123; let end = Date.now(); console.log(`å»¶æ—¶äº† $&#123;end - start&#125; ms æ‰§è¡Œ`); // å»¶æ—¶äº† 100 ms æ‰§è¡Œ&#125;, 10); ä¸Šé¢æˆ‘ä»¬è®¾ç½®äº†ä¸¤ä¸ªå®šæ—¶å™¨ï¼Œä¸€ä¸ªå»¶æ—¶ 5ms åæ‰§è¡Œï¼Œä¸€ä¸ªå»¶æ—¶ 10ms åæ‰§è¡Œï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ç¬¬äºŒä¸ªå®šæ—¶å™¨æ˜¯åœ¨å»¶æ—¶ 100ms åæ‰§è¡Œçš„ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬é¢„æœŸçš„é‚£æ ·ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œæˆ‘ä»¬è®¾ç½®çš„ 5ms ä¸ 10ms è¿™äº›æ—¶é—´å¹¶ä¸æ˜¯æŒ‡å»¶æ—¶ 5ms æˆ– 10ms åæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè€Œæ˜¯æŒ‡å»¶æ—¶æŒ‡å®šæ—¶é—´åå°†è¿™äº›å›è°ƒå‡½æ•°æ·»åŠ è¿›äº‹ä»¶é˜Ÿåˆ—ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ—¶é—´çº¿ 0ms æ—¶ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸ºç©º 5ms æ—¶ï¼Œç¬¬ä¸€ä¸ªå®šæ—¶å™¨æ—¶é—´åˆ°è¾¾ï¼Œå°†å›è°ƒå‡½æ•°æ·»åŠ è¿›äº‹ä»¶é˜Ÿåˆ— æ‰§è¡Œå¼•æ“æ£€æŸ¥äº‹ä»¶é˜Ÿåˆ—ï¼Œå‘ç°é˜Ÿåˆ—ä¸­æœ‰äº‹ä»¶æœªæ‰§è¡Œï¼Œå–å‡ºæ‰§è¡Œ 10ms æ—¶ï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨æ—¶é—´åˆ°è¾¾ï¼Œå°†å›è°ƒå‡½æ•°æ·»åŠ è¿›äº‹ä»¶é˜Ÿåˆ—ï¼Œä½†æ˜¯å› ä¸ºå‰é¢ä¸€ä¸ªå›è°ƒå‡½æ•°è¿˜åœ¨æ‰§è¡Œä¸­ï¼Œè¯¥å›è°ƒå‡½æ•°ä¸ä¼šæ‰§è¡Œ 100ms æ—¶ï¼Œç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ‰§è¡Œå®Œæ¯• æ‰§è¡Œå¼•æ“æ¥ç€æ£€æŸ¥äº‹ä»¶é˜Ÿåˆ—ï¼Œå‘ç°é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œå–å‡ºç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ‰§è¡Œå‡½æ•°æ‰§è¡Œ æ‰€ä»¥ç»è¿‡äº† 100msï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œã€‚ äº‹ä»¶å¾ªç¯è§£å†³å®é™…çš„é—®é¢˜ï¼Œä¸Šé¢çš„æ¨¡å‹æƒ³å¿…å·²ç»å¤Ÿç”¨äº†ï¼Œä½†æ˜¯å¦‚æœè¦åº”å¯¹é¢è¯•é¢˜ï¼Œå´è¿˜æ˜¯éœ€è¦æ›´åŠ æ·±å…¥çš„äº†è§£ã€‚é¦–å…ˆçœ‹ä¸€ä¸ªä¾‹å­ console.log(\"start\");const start = Date.now();setImmediate(() =&gt; &#123; console.log(\"setImmediate\");&#125;);setTimeout(() =&gt; &#123; console.log(\"setTimeout\");&#125;, 5);process.nextTick(() =&gt; &#123; console.log(\"nexTick\");&#125;);new Promise((resolve) =&gt; &#123; console.log(\"resolve\"); resolve();&#125;).then(() =&gt; &#123; console.log(\"then\");&#125;);let end = Date.now();while (end - start &lt; 5) &#123; end = Date.now();&#125;console.log(\"end\"); è¯·é—®ä¸Šé¢ç¨‹åºçš„è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆ? æˆ‘å…ˆå–ä¸ªå…³å­ï¼Œå¸Œæœ›ä½ çœ‹å®Œä¸‹é¢çš„å†…å®¹ä¹‹åèƒ½å¤Ÿå›ç­”å‡ºæ¥ã€‚ åœ¨ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥å»ºæ¨¡äº†ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œäº‹å®ä¸Šè¿™ä¸ªé˜Ÿåˆ—éœ€è¦è¢«æ‹†åˆ†å¥½å‡ ä¸ªé˜Ÿåˆ— â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€&gt;â”‚ timers â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚ pending callbacks â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚ idle, prepare â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ incoming: â”‚â”‚ â”‚ poll â”‚&lt;â”€â”€â”€â”€â”€â”¤ connections, â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ data, etc. â”‚â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚ check â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â””â”€â”€â”¤ close callbacks â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ä¸Šé¢æˆ‘ä»¬å°†é˜Ÿåˆ—æ‹†åˆ†ä¸ºäº† 6 ä¸ªé˜¶æ®µï¼Œæ¯ä¸€ä¸ªé˜¶æ®µéƒ½æœ‰ä¸€ä¸ªé˜Ÿåˆ— timersï¼šsetTimeout ä»¥åŠ setInterval ä¸­çš„å›è°ƒå‡½æ•°ä¼šæ”¾å…¥è¿™ä¸ªé˜Ÿåˆ— pending callbacksï¼šç”±äºæŸäº›åŸå› éœ€è¦æ¨è¿Ÿåˆ°ä¸‹ä¸€è½®å¾ªç¯çš„ I/O å›è°ƒå‡½æ•°æ”¾åœ¨è¿™ä¸ªé˜Ÿåˆ—(ç›®å‰æˆ‘è¿˜æ²¡æœ‰é‡åˆ°è¿‡æ­¤ç±»äº‹ä»¶) idle, prepareï¼šè¿™ä¸ªé˜Ÿåˆ—æ˜¯ Node.js å†…éƒ¨ä½¿ç”¨çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒ pollï¼šI/O äº‹ä»¶ï¼Œç½‘ç»œè¯·æ±‚ç­‰äº‹ä»¶ä¼šæ”¾åœ¨è¿™ä¸ªé˜Ÿåˆ— checkï¼šsetImmediate ä¸­çš„å›è°ƒå‡½æ•°ä¼šæ”¾åœ¨è¿™ä¸ªé˜Ÿåˆ— closeï¼šä¸ close ç›¸å…³æ–¹æ³•ä¼šæ”¾åœ¨è¿™ä¸ªé˜Ÿåˆ—ï¼Œä¾‹å¦‚ socket.on(&#39;close&#39;, callback) Node ä¼šä¾æ¬¡ç»å†è¿™ 6 ä¸ªé˜¶æ®µï¼Œåªæœ‰å°†æŸä¸ªé˜¶æ®µä¸­é˜Ÿåˆ—çš„æ‰€æœ‰å‡½æ•°éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šè¿›å…¥åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚ä½†æ˜¯å…³äº poll é˜¶æ®µæœ‰ä¸€ç‚¹ä¸åŒä¹‹å¤„ï¼Œå½“è¿›å…¥ poll é˜¶æ®µä»¥åï¼Œå®ƒä¼šè®¡ç®— timers å®šæ—¶å™¨ä¸­ä¸‹ä¸€ä¸ªå®šæ—¶å™¨åˆ°è¾¾çš„æ—¶é—´ï¼Œç„¶åæ£€æŸ¥ poll é˜Ÿåˆ—æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œå¦‚æœæœ‰å°±æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºã€‚å½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ æ˜¯å¦å·²ç»åˆ°è¾¾äº†ä¸‹ä¸€ä¸ªå®šæ—¶å™¨åˆ°è¾¾çš„æ—¶é—´ï¼Œå³ timers é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œå¦‚æœæœ‰åˆ™ç»§ç»­äº‹ä»¶å¾ªç¯ï¼Œæ¥åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µ å¦‚æœ timers é˜Ÿåˆ—ä¸­æ²¡æœ‰ä»»åŠ¡ï¼Œé‚£ä¹ˆæ£€æŸ¥ check é˜Ÿåˆ—æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œå¦‚æœæœ‰ç»§ç»­è¿›è¡Œäº‹ä»¶å¾ªç¯ å¦‚æœ timers é˜Ÿåˆ—å’Œ check é˜Ÿåˆ—éƒ½æ²¡æœ‰ä»»åŠ¡ï¼Œé‚£ä¹ˆå°±ä¼šä¸€ä¸ªåœç•™åœ¨ poll é˜¶æ®µï¼Œç­‰å¾…æ–°çš„ä»»åŠ¡åˆ°æ¥ï¼Œç„¶åæ‰§è¡Œè¯¥ä»»åŠ¡ æ‰€ä»¥ä¼šæœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¼šå¤„äº poll é˜¶æ®µã€‚ æˆ‘ä»¬æŠŠä¸€æ¬¡å¾ªç¯ç§°ä¸ºä¸€ä¸ª tickã€‚ ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æåŠ process.nextTick ä¸ promise.then ä¸­çš„å›è°ƒå‡½æ•°æ”¾åœ¨å“ªä¸ªé˜Ÿåˆ—ã€‚å…¶å®è¿˜æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼ŒnextTickQueue å’Œ microTaskQueueï¼Œprocess.nextTick ä¸­çš„å›è°ƒå‡½æ•°ä¼šè¢«æ”¾ç½®åœ¨ nextTickQueue ä¸­ï¼Œè€Œ promise.then ä¸­çš„å›è°ƒå‡½æ•°è¢«è¢«æ”¾ç½®åœ¨ microTaskQueue ä¸­ã€‚ é‚£ä¹ˆè¿™ä¸¤ä¸ªé˜Ÿåˆ—åœ¨å›¾ä¸­å¤„äºä½•ç§ä½ç½®ï¼Œå…¶å®åœ¨è¿›å…¥æ¯ä¸ªé˜¶æ®µä¹‹å‰ï¼Œéƒ½ä¼šæ£€æŸ¥ä¸€éè¿™ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå¦‚æœæœ‰ä»»åŠ¡çš„è¯å°±ä¼šæ‰§è¡Œï¼Œç›´è‡³å°†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚å¹¶ä¸” nextTickQueue é˜Ÿåˆ—ä¸­çš„å‡½æ•°æ¯” microTaskQueue é˜Ÿåˆ—ä¸­çš„å‡½æ•°å…ˆè¢«æ‰§è¡Œã€‚ æ˜ç™½ä¸Šé¢çš„å†…å®¹ä¹‹åæˆ‘ä»¬æ¥çœ‹é‚£é“é¢˜ç›® console.log(\"start\");const start = Date.now();setImmediate(() =&gt; &#123; console.log(\"setImmediate\");&#125;);setTimeout(() =&gt; &#123; console.log(\"setTimeout\");&#125;, 5);process.nextTick(() =&gt; &#123; console.log(\"nexTick\");&#125;);new Promise((resolve) =&gt; &#123; console.log(\"resolve\"); resolve();&#125;).then(() =&gt; &#123; console.log(\"then\");&#125;);let end = Date.now();while (end - start &lt; 5) &#123; end = Date.now();&#125;console.log(\"end\"); é¦–å…ˆå½“æˆ‘ä»¬å¼€å§‹è¿è¡Œç¨‹åºçš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šç«‹å³è¿›å…¥äº‹ä»¶å¾ªç¯ï¼Œè€Œæ˜¯é¦–å…ˆå°†åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥é¦–å…ˆä¼šä¾æ¬¡æ‰“å°å‡º startresolveend æ¥ç€åœ¨è¿›å…¥äº‹ä»¶å¾ªç¯ï¼Œå› ä¸ºåœ¨è¿›å…¥æ¯ä¸ªé˜¶æ®µä¹‹å‰éƒ½ä¼šå…ˆæ£€æŸ¥ nextTickQueue å’Œ microTaskQueue è¿™ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ä¸” nextTickQueue åœ¨ microTaskQueue ä¹‹å‰æ‰§è¡Œï¼Œæ‰€ä»¥æ¥ç€æ‰“å°å‡º nextTickthen æ¥ç€è¿›å…¥ timers é˜¶æ®µï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä¸»ç¨‹åºä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç  let end = Date.now();while (end - start &lt; 5) &#123; end = Date.now();&#125; ç›®çš„å°±æ˜¯ç¡®ä¿ setTimeout ä¸­çš„å›è°ƒå‡½æ•°å·²è¿›å…¥ timers é˜Ÿåˆ—ï¼Œæ‰€ä»¥æ­¤æ—¶ timers é˜Ÿåˆ—æ˜¯æœ‰å‡½æ•°çš„ï¼Œæ‰€ä»¥æ­¤æ—¶ä¼šæ‰“å°å‡º setTimeout æ¥ç€è¿›å…¥ pending é˜¶æ®µï¼Œè¯¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å‡½æ•°ï¼›è¿›å…¥ poll é˜¶æ®µ(å¿½ç•¥ idle, prepare é˜¶æ®µ)ï¼Œä¹Ÿæ²¡æœ‰å‡½æ•°ï¼Œæ­¤æ—¶å› ä¸º check é˜Ÿåˆ—ä¸­æœ‰å‡½æ•°ï¼Œæ‰€ä»¥ä¼šä» poll é˜¶æ®µè¿›å…¥åˆ° check é˜¶æ®µï¼Œæ‰€ä»¥æ¥ç€ä¼šæ‰“å° setImmediate ç„¶åè¿›å…¥ close é˜¶æ®µï¼Œæ²¡æœ‰å‡½æ•°ï¼Œå›åˆ° timers é˜¶æ®µï¼Œä»¥æ­¤å¾€å¤ã€‚ æ‰€ä»¥ä¸Šé¢ç¨‹åºæœ€ç»ˆçš„æ‰“å°ç»“æœä¸º startresolveendnexTickthensetTimeoutsetImmediate setTimeout vs setImmediatesetTimeout ä½äº timers é˜¶æ®µï¼Œè€Œ setImmediate æ”¾ç½®äº check é˜¶æ®µ setTimeout(() =&gt; &#123; console.log(\"setTimeout\");&#125;);setImmediate(() =&gt; &#123; console.log(\"setImmediate\");&#125;); æ‰€ä»¥ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœåº”è¯¥æ˜¯ setTimeoutsetImmediate ä½†æ˜¯æœ‰æ—¶ä¼šæ‰“å°å‡º setImmediatesetTimeout è¿™æ˜¯å› ä¸º setTimeout ä¸ä¼ å…¥æ—¶é—´æ—¶ï¼Œé»˜è®¤æ˜¯ 0ï¼Œè€Œ Node.js åšä¸åˆ° 0ms çš„å®šæ—¶ï¼Œæœ€å°‘ä¹Ÿæ˜¯ 1msã€‚å¦‚æœæ‰§è¡Œä¸»ç¨‹åºéœ€è¦èŠ±è´¹ 1msï¼Œé‚£ä¹ˆ timers é˜Ÿåˆ—ä¸­å°±ä¼šæœ‰å‡½æ•°ï¼Œå°±ä¼šå…ˆæ‰“å° setTimeoutï¼Œå¦‚æœæ‰§è¡Œä¸»ç¨‹åºä¸éœ€è¦ 1msï¼Œé‚£ä¹ˆæ¥åˆ° timers é˜¶æ®µæ—¶ï¼Œå…¶ä¸­è¿˜æ²¡æœ‰å‡½æ•°ï¼Œä½†æ˜¯ check é˜Ÿåˆ—ä¸­å·²ç»æœ‰å‡½æ•°äº†ï¼Œå°±ä¼šå…ˆæ‰“å° setImmediateã€‚ ä½†æ˜¯å¦‚æœåœ¨ I/O å›è°ƒå‡½æ•°ä¸­åŒæ—¶è°ƒç”¨ setImmediate å’Œ setTimeoutï¼Œé‚£ä¹ˆä¼šå…ˆæ‰§è¡Œ setImmediateï¼Œå› ä¸ºæ‰§è¡Œ I/O å›è°ƒå‡½æ•°æ—¶å·²ç»å¤„äº poll é˜¶æ®µï¼Œä¸‹ä¸€ä¸ªé˜¶æ®µå°±æ˜¯ check é˜¶æ®µï¼Œæ‰€ä»¥ä¼šå…ˆæ‰§è¡Œ setImmediate const fs = require(\"fs\");fs.readFile(\"./hello.txt\", (err, data) =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"setTimeout\"); &#125;); setImmediate(() =&gt; &#123; console.log(\"setImmediate\"); &#125;);&#125;); è¾“å‡ºå§‹ç»ˆä¸º setImmediatesetTimeout process.nextTickè¿™ä¸ªå‡½æ•°çš„åå­—å¾ˆæœ‰è¯¯å¯¼æ€§ï¼Œæˆ‘ä»¬çŸ¥é“ process.nextTick ä¸­çš„å‡½æ•°æ˜¯åœ¨è¿›å…¥æ¯ä¸ªé˜¶æ®µä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å®ƒåº”è¯¥æ˜¯ currentTick è€Œä¸æ˜¯ nextTickã€‚è€Œ setImmediate åªæœ‰åœ¨ check é˜¶æ®µæ‰ä¼šæ‰§è¡Œï¼Œå¹¶æ²¡æœ‰é‚£ä¹ˆçš„ Immediateã€‚ æ‰€ä»¥æœ‰äººæè®®å°†äºŒè€…çš„åç§°è°ƒæ¢ã€‚ä½†æ˜¯ç”±äºæœ‰å¤ªå¤šçš„åº“ä¾èµ–äºè¿™ä¸¤ä¸ª APIï¼Œå¦‚æœæ”¹åŠ¨ API çš„è¯ï¼Œä¼šå¼•èµ·å¾ˆå¤šçš„æ”¹åŠ¨ã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬é€’å½’è°ƒç”¨ process.nextTickï¼Œé‚£ä¹ˆ nextTickQueue å°±æ°¸è¿œä¸ä¼šç©ºï¼Œå³æ­¤æ—¶å°±ä¼šé˜»å¡äº‹ä»¶å¾ªç¯çš„è¿è¡Œ setTimeout(() =&gt; &#123; console.log(\"setTimeout\");&#125;);const recursive = () =&gt; &#123; process.nextTick(recursive);&#125;;process.nextTick(recursive); ä¸Šé¢ setTimeout ä¸­çš„å›è°ƒå‡½æ•°æ°¸è¿œéƒ½ä¸ä¼šå¾—åˆ°æ‰§è¡Œã€‚ å‚è€ƒæ–‡çŒ® The Node.js Event Loop, Timers, and process.nextTick() Node å®šæ—¶å™¨è¯¦è§£","tags":[{"name":"Event Loop","slug":"Event-Loop","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Event-Loop/"}]},{"title":"Node.jsä¹‹æ ¸å¿ƒæ¨¡å—","date":"2021-02-20T14:13:00.000Z","path":"/Node.jsä¹‹æ ¸å¿ƒæ¨¡å—/","text":"Node.js çš„æ¨¡å—åˆ†ä¸ºä¸‰ç§ï¼š æ ¸å¿ƒæ¨¡å— ç¬¬ä¸‰æ–¹æ¨¡å— æœ¬åœ°æ¨¡å— æœ¬ç¯‡é‡ç‚¹ä»‹ç» Node.js ä¸­çš„æ ¸å¿ƒæ¨¡å—ï¼ŒåŒ…æ‹¬ æ ¸å¿ƒæ¨¡å— ä½œç”¨ path è·¯å¾„ç›¸å…³ fs æ“ä½œæ–‡ä»¶ os æä¾›ç›¸å…³æ“ä½œç³»ç»Ÿä¿¡æ¯ http æ­å»º http æœåŠ¡å™¨ querystring è§£æè¯·æ±‚å‚æ•° pathpath æ˜¯æˆ‘ä»¬ä»‹ç»çš„ç¬¬ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæ‰€ä»¥æœ‰å¿…è¦ä»‹ç»å¦‚ä½•å¼•å…¥æ ¸å¿ƒæ¨¡å—ã€‚å¼•å…¥æ ¸å¿ƒæ¨¡å—å¾ˆç®€å•ï¼Œç›´æ¥ require(&#39;xxx&#39;) å³å¯ï¼Œä¾‹å¦‚æˆ‘ä»¬å¼•å…¥ path æ¨¡å— const path = require(\"path\"); path æ˜¯ä¸è·¯å¾„æœ‰å…³çš„æ¨¡å—ï¼Œå†ä»‹ç» path ä¹‹å‰ï¼Œä»‹ç»ä¸¤ä¸ªä¸è·¯å¾„æœ‰å…³çš„å˜é‡ï¼Œ __dirname ä¸ __filenameï¼š __dirnameï¼šè¡¨ç¤ºå½“å‰æ¨¡å—æ‰€åœ¨çš„ç›®å½•ï¼Œæ˜¯ä¸€ä¸ªè¡¨ç¤ºç»å¯¹è·¯å¾„çš„å­—ç¬¦ä¸² __filenameï¼šè¡¨ç¤ºå½“å‰æ¨¡å—(æ–‡ä»¶)æ‰€åœ¨çš„è·¯å¾„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè¡¨ç¤ºç»å¯¹è·¯å¾„çš„å­—ç¬¦ä¸² è¿™ä¸¤ä¸ªå˜é‡éƒ½æ˜¯å…¨å±€å˜é‡ global çš„å±æ€§ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åœ¨æ¨¡å—ä¸­è®¿é—® &#x2F;&#x2F; D:\\Desktop\\Node\\2 æ ¸å¿ƒæ¨¡å—\\1. path.jsconsole.log(__dirname); &#x2F;&#x2F; D:\\Desktop\\Node\\2 æ ¸å¿ƒæ¨¡å—console.log(__filename); &#x2F;&#x2F; D:\\Desktop\\Node\\2 æ ¸å¿ƒæ¨¡å—\\1. path.js å°†è®²è§£ path æ¨¡å—æä¾›çš„ API ä¹‹å‰ï¼Œé¦–å…ˆæˆ‘ä»¬æ˜ç¡®ä¸€ä¸‹è·¯å¾„çš„ç»„æˆ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ dir â”‚ base â”‚â”œâ”€â”€â”€â”€â”€â”€â”¬ â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¤â”‚ root â”‚ â”‚ name â”‚ ext â”‚&quot; C:\\ ç›®å½•1\\ç›®å½•2 \\ æ–‡ä»¶ .txt &quot;â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜ï¼ˆ&quot;&quot; è¡Œä¸­çš„æ‰€æœ‰ç©ºæ ¼å‡å¯å¿½ç•¥ã€‚å®ƒä»¬çº¯ç²¹æ˜¯ç”¨äºæ ¼å¼åŒ–ã€‚ï¼‰ å¯è§è·¯å¾„å¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š dirï¼šæ–‡ä»¶æ‰€åœ¨ç›®å½• baseï¼šæ–‡ä»¶åç§°(åŒ…å«æ‰©å±•å) è€Œ base ä¹Ÿå¯ä»¥è¢«åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š nameï¼šæ–‡ä»¶åç§° extï¼šæ‰©å±•å dirnamepath.dirname(path) è¿”å›çš„æ˜¯ç»™å®šè·¯å¾„çš„ç›®å½• const path = require(\"path\");let filepath = \"C:\\\\Users\\\\index.html\";console.log(path.dirname(filepath)); // C:\\Users basenamepath.basename(path, [ext]) è¿”å›è·¯å¾„çš„æœ€åä¸€ä¸ªéƒ¨åˆ†ï¼Œå®ƒä¼šå¿½ç•¥æœ€åçš„ç›®å½•åˆ†éš”ç¬¦(å¦‚æœæœ‰çš„è¯) const path = require(\"path\");let filepath = \"C:\\\\Users\\\\index.html\";console.log(path.basename(filepath)); // index.htmlfilepath = \"C:\\\\Users\\\\index.html\\\\\";console.log(path.basename(filepath)); // index.html basename() è¿˜æ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºæ–‡ä»¶çš„æ‰©å±•åï¼Œå¦‚æœä¼ å…¥çš„æ‰©å±•åä¸è·¯å¾„æœ€åä¸€éƒ¨åˆ†çš„æ‰©å±•åç›¸åŒï¼Œåˆ™è¿”å›æ²¡æœ‰æ‰©å±•åçš„æ–‡ä»¶åç§° const path = require(\"path\");let filepath = \"C:\\\\Users\\\\index.html\";console.log(path.basename(filepath, \".html\")); // index éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰©å±•åæ˜¯åŒºåˆ†å¤§å°å†™çš„ const path = require(\"path\");let filepath = \"C:\\\\Users\\\\index.HTML\";console.log(path.basename(filepath, \".html\")); // index.HTML å¦‚æœä¼ å…¥çš„ path ä¸ ext éƒ½ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šæŠ›å‡º TypeErrorã€‚ extnamepath.extname(path) è¿”å›è·¯å¾„çš„æ‰©å±•åï¼Œå³è·¯å¾„ä¸­æœ€åä¸€ä¸ª . ä¹‹åçš„å­—ç¬¦ä¸²(åŒ…æ‹¬ .)ï¼Œå¦‚æœè·¯å¾„ä¸­æ²¡æœ‰ .ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸² const path = require(\"path\");let filepath = \"C:\\\\Users\\\\index.html\";console.log(path.extname(filepath)); // \".html\"filepath = \"C:\\\\Users\\\\index.\";console.log(path.extname(filepath)); // \".\"filepath = \"C:\\\\Users\\\\index.html.md\";console.log(path.extname(filepath)); // \".md\"filepath = \"C:\\\\Users\\\\index\";console.log(path.extname(filepath)); // \"\" formatpath.format(pathOject) æ–¹æ³•æ ¹æ®ä¸€ä¸ª pathObject å¾—åˆ°ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼ŒpathObject å¯¹è±¡åŒ…å«ä¸‹é¢å‡ ä¸ªå±æ€§ï¼š dir root base name ext å¯è§è¿™äº›å±æ€§éƒ½æ˜¯ä¸Šé¢ä»‹ç»çš„è·¯å¾„ç»„æˆéƒ¨åˆ†ï¼Œå®ƒä¼šæ ¹æ®è¿™äº›å±æ€§æ„å»ºå‡ºä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚ å› ä¸º dir åŒ…æ‹¬ rootï¼Œbase åŒ…æ‹¬ name å’Œ extï¼Œæ‰€ä»¥å½“è§„å®šäº† dir å±æ€§æ—¶ï¼Œåˆ™å¿½ç•¥ root å±æ€§ï¼Œå½“è§„å®šäº† base å±æ€§æ—¶ï¼Œåˆ™å¿½ç•¥ name å’Œ ext å±æ€§ã€‚ const path = require(\"path\");const filepath = path.format(&#123; dir: \"C:\\\\Users\", // root è¢«å¿½ç•¥ root: \"D:\\\\\", base: \"index.html\", // ä¸‹é¢ä¸¤ä¸ªå±æ€§è¢«å¿½ç•¥ name: \"a\", ext: \".md\",&#125;);console.log(filepath); // C:\\Users\\index.html const path = require(\"path\");const filepath = path.format(&#123; root: \"D:\\\\\", name: \"a\", ext: \".md\",&#125;);console.log(filepath); // D:\\a.md parsepath.parse(path) æ¥æ”¶ä¸€ä¸ªè¡¨ç¤ºç»å¯¹è·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„ä½œç”¨ä¸ path.format æ­£å¥½ç›¸åï¼Œå°†ä¸€ä¸ªç»å¯¹è·¯å¾„æ‹†åˆ†ä¸ºå„ä¸ªç»„æˆéƒ¨åˆ† const path = require(\"path\");const filepath = \"C:\\\\Users\\\\index.html\";console.log(path.parse(filepath)); æ‰“å°ä¸€ä¸ªå¯¹è±¡å¦‚ä¸‹ &#123; root: 'C:\\\\', dir: 'C:\\\\Users', base: 'index.html', ext: '.html', name: 'index'&#125; normalizepath.normalize(path) æ˜¯ç”¨æ¥è§„èŒƒè·¯å¾„çš„ï¼Œä¸»è¦æœ‰ä¸‹é¢å‡ ä¸ªä½œç”¨ï¼š å°†ç›®å½•åˆ†éš”ç¬¦(/, \\\\) è½¬åŒ–ä¸ºç‰¹å®šå¹³å°ä¸Šçš„åˆ†éš”ç¬¦ è§£æ ..ï¼Œ. è·¯å¾„ å°†å¤šä¸ªè¿ç»­çš„ç›®å½•åˆ†éš”ç¬¦åˆå¹¶ä¸ºä¸€ä¸ªç›®å½•åˆ†éš”ç¬¦ const path = require(\"path\");// ä½¿ç”¨äº†ä¸¤ç§ç›®å½•åˆ†å‰²ç¬¦ï¼Œå¹¶ä¸”ä¸€å¤„è¿ç»­ä½¿ç”¨äº†ç›®å½•åˆ†å‰²ç¬¦const filepath = \"C:/Users\\\\\\\\\\\\index.html\";console.log(path.normalize(filepath)); // C:\\Users\\index.html const path = require(\"path\");// è·¯å¾„ä¸­åŒ…å« \"..\" å’Œ \".\" è¡¨ç¤ºçš„ç›¸å¯¹è·¯å¾„const filepath = \"C:/Users/a/b/../.././index.html\";console.log(path.normalize(filepath)); // C:\\Users\\index.html resolvepath.resove(...paths) æ¥æ”¶å¤šä¸ªè·¯å¾„ï¼Œä»å³å‘å·¦å¯¹è·¯å¾„è¿›è¡Œæ‹¼æ¥ï¼Œç›´è‡³æ‹¼æ¥å‡ºç»å¯¹è·¯å¾„ const path = require(\"path\");const filepath = path.resolve(\"D:\\\\\", \"C:\\\\Users\", \"index.html\");console.log(filepath); // C:\\Users\\index.html ä¸Šé¢æˆ‘ä»¬å¯¹ D:\\\\, C:\\\\Users, index.html ä»å³å‘å·¦è¿›è¡Œæ‹¼æ¥ï¼ŒC:\\\\Users ä¸ index.html æ‹¼æ¥å¾—åˆ° C:\\\\Users\\\\index.htmlï¼Œè¿™å·²ç»æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„äº†ï¼Œæ‰€ä»¥å°±ä¸åœ¨è¿›è¡Œæ‹¼æ¥äº†ã€‚ å¦‚æœä¼ å…¥çš„è·¯å¾„ä¸èƒ½æ‹¼æ¥å‡ºä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨å½“å‰æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„æ‹¼æ¥ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œå°±ç›¸å½“äº resolve ç¬¬ä¸€ä¸ªå‚æ•°é»˜è®¤ä¸º __dirname const path = require(\"path\");const filepath = path.resolve(\"index.html\");console.log(filepath); // D:\\Desktop\\Node\\2 æ ¸å¿ƒæ¨¡å—\\index.html resolve æ–¹æ³•è¿”å›çš„è·¯å¾„æ˜¯å·²ç»è§„èŒƒåŒ–(normalize)äº†çš„ï¼Œå¹¶ä¸”å°¾éƒ¨çš„åˆ†éš”ç¬¦ä¼šè¢«åˆ é™¤(é™¤éæ˜¯æ ¹è·¯å¾„)ã€‚å¦‚æœæ²¡æœ‰ä¸º resolve ä¼ å…¥å‚æ•°ï¼Œé‚£ä¹ˆä¼šè¿”å›å½“å‰æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ const path = require(\"path\");console.log(path.resolve()); // D:\\Desktop\\Node\\2 æ ¸å¿ƒæ¨¡å— joinpath.join(...paths) æ–¹æ³•æ¥æ”¶ä¸€äº›è·¯å¾„ï¼Œç„¶åä½¿ç”¨æ‰€åœ¨å¹³å°çš„åˆ†éš”ç¬¦(Windows å¹³å°å°±æ˜¯ \\ï¼Œ Linux/Unix å¹³å°å°±æ˜¯ /)è¿›è¡Œæ‹¼æ¥ï¼Œæœ€åè¿›è¡Œè§„èŒƒåŒ–ç„¶åè¿”å›ã€‚ ä¸ path.resolve æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œpath.resolve æ–¹æ³•ä¸€æ—¦æ‹¼æ¥å‡ºç»å¯¹è·¯å¾„åå°±ä¸åœ¨è¿›è¡Œæ‹¼æ¥ï¼Œpath.resolve æ–¹æ³•è¿”å›çš„æ˜¯ä¸€å®šæ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œä½†æ˜¯ path.join æ–¹æ³•åªæ˜¯å°†å¤šä¸ªè·¯å¾„ä½¿ç”¨åˆ†å‰²ç¬¦è¿›è¡Œæ‹¼æ¥è€Œå·² const path = require(\"path\");const resolvePath = path.resolve(\"/a\", \"/b\", \"c\");const joinPath = path.join(\"/a\", \"/b\", \"c\");console.log(resolvePath); // D:\\b\\cconsole.log(joinPath); // \\a\\b\\c å¦‚æœä¸ä¸º path.join ä¼ å…¥ä»»ä½•å‚æ•°çš„è¯ï¼Œé‚£ä¹ˆä¼šè¿”å› .ã€‚ sep ä¸ delimeterpath.sep ä¸ path.delimeter æ˜¯ path æ¨¡å—çš„ä¸¤ä¸ªå±æ€§ path.sepï¼šæ‰€åœ¨å¹³å°çš„ç›®å½•åˆ†éš”ç¬¦ Windowsï¼š\\ Linux/Unixï¼š/ path.delimeterï¼šæ‰€åœ¨å¹³å°çš„ç›®å½•ç•Œå®šç¬¦ Windowsï¼š; Linux/Unixï¼š: const path = require(\"path\");console.log(path.sep); // \\console.log(path.delimiter); // ; fsfs æ¨¡å—æ˜¯ä¸æ–‡ä»¶ç³»ç»Ÿæœ‰å…³çš„æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥è¿›è¡Œæ–‡ä»¶ç›¸å…³çš„æ“ä½œã€‚ readFileæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ fs.readFile(path, [options], callback) è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªè·¯å¾„(ç›¸å¯¹è·¯å¾„ä¸ç»å¯¹è·¯å¾„å‡å¯)ï¼Œå½“è¯»å–å®Œæ–‡ä»¶å†…å®¹ä¹‹åï¼Œä¼šå°†è¯»å–åˆ°çš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¼ å…¥çš„å›è°ƒå‡½æ•°(callback)ï¼Œè¯¥æ–¹æ³•è¿˜æ¥å—ä¸€ä¸ª options å‚æ•°ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«å¦‚ä¸‹å±æ€§çš„å¯¹è±¡ï¼š encodingï¼šæŒ‡å®šè¯»å–å†…å®¹çš„ç¼–ç ï¼Œé»˜è®¤ä¸º null flagï¼šæŒ‡å®šè¯»å†™æ¨¡å¼ï¼Œé»˜è®¤ä¸º rï¼Œè¡¨ç¤ºåªè¯» å½“æ²¡æœ‰æŒ‡å®š encoding æ—¶ï¼Œè¿”å›ä¸€ä¸ª Bufferã€‚options è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“ options ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œè¡¨ç¤ºç¼–ç  const fs = require(\"fs\");fs.readFile(\"./file/hello.txt\", \"utf-8\", (err, data) =&gt; &#123; if (err) &#123; throw new Error(err.toString()); &#125; console.log(data); // Hello World!&#125;); ä¸Šè¿°ä»£ç è¯»å–äº†å½“å‰ç›®å½•ä¸‹çš„ file æ–‡ä»¶å¤¹ä¸‹çš„ hello.txt æ–‡ä»¶ï¼Œè¯»å–å®Œæ–‡ä»¶åä¼šå°†å†…å®¹ä½¿ç”¨ utf-8 è¿›è¡Œè§£ç ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åå°†è¯¥å­—ç¬¦ä¸²ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚å‘å›è°ƒå‡½æ•°ä¼ é€’å‚æ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”™è¯¯å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ‰ä¸ºå®é™…çš„å†…å®¹ï¼Œä¹‹æ‰€ä»¥å°†ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸ºé”™è¯¯å¯¹è±¡ï¼Œæ˜¯ä¸ºäº†æé†’ç”¨æˆ·è®°å¾—å¤„ç†é”™è¯¯ã€‚ å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ Node.js çš„è¯ï¼Œå¯èƒ½ä¸é€‚åˆä¸Šé¢å›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œè¿™ç§å†™æ³•æ˜¯å¼‚æ­¥å†™æ³•ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆå†™æ˜¯å› ä¸º Node.js æ˜¯å•çº¿ç¨‹çš„ï¼Œä¸ºäº†æé«˜ç¨‹åºæ‰§è¡Œçš„æ•ˆç‡ï¼Œæ‰€ä»¥ä½¿ç”¨å¼‚æ­¥çš„å†™æ³•(å¦‚æœæ— æ³•é¢†ä¼šä¸Šé¢è¿™æ®µè¯ï¼Œå°±å…ˆæ”¾ä¸€æ”¾ï¼Œæˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦å›è°ƒå‡½æ•°çš„å†™æ³•ä¹Ÿæ˜¯æ²¡æœ‰ååº”è¿‡æ¥)ã€‚ readFile è¿˜æœ‰ä¸€ä¸ªå¯¹åº”çš„åŒæ­¥æ–¹æ³• readFileSync(path, [options])ï¼Œå‚æ•°çš„æ„ä¹‰åŒä¸Šï¼Œä¸è¿‡è¿™æ—¶ä¸éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°äº†ï¼Œå®ƒä¼šå°†è¯»å–åˆ°çš„å†…å®¹è¿”å› const fs = require(\"fs\");const data = fs.readFileSync(\"./file/hello.txt\", \"utf-8\");console.log(data); // Hello World! è¿™æ—¶ä½ å¯èƒ½ä¼šé—®æ€ä¹ˆå¤„ç†é”™è¯¯ï¼Œé‚£å°±æ˜¯å°†ä»£ç æ”¾åœ¨ try ... catch ä»£ç å—ä¸­ const fs = require(\"fs\");try &#123; const data = fs.readFileSync(\"./file/hello.txt\", \"utf-8\"); console.log(data); // Hello World!&#125; catch (e) &#123; console.log(e);&#125; åŒæ­¥çš„æ–¹å¼è™½ç„¶æ¯”è¾ƒå¥½ç†è§£ï¼Œä½†æ˜¯ä»¥åŒæ­¥çš„æ–¹å¼è¯»å–æ–‡ä»¶ï¼Œä¼šé˜»å¡ç¨‹åºçš„æ‰§è¡Œï¼Œé™ä½ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨ readFile è¯»å–æ–‡ä»¶ã€‚ è¿™ç§å›è°ƒå‡½æ•°å¼çš„å†™æ³•æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¼šäº§ç”Ÿå›è°ƒåœ°ç‹±ï¼Œä½¿å¾—ä»£ç éš¾ä»¥é˜…è¯»ã€‚æœ‰ä¸‹é¢ä¸‰ä¸ªæ–‡ä»¶åœ¨ file æ–‡ä»¶å¤¹ä¸‹ // a.json&#123; \"next\": \"b.json\", \"content\": \"this is a.json\"&#125;// b.json&#123; \"next\": \"c.json\", \"content\": \"this is b.json\"&#125;// c.json&#123; \"next\": null, \"content\": \"this is c.json\"&#125; ä¸‹é¢è¿™æ®µä»£ç æ˜¯ä¾æ¬¡è¯»å– a.json, b.json, c.json çš„å†…å®¹ï¼Œå¹¶æ‰“å°å‡ºæ¥ const fs = require(\"fs\");const path = require(\"path\");fs.readFile(\"./file/a.json\", \"utf-8\", (err, data) =&gt; &#123; const a = JSON.parse(data); console.log(a.content); fs.readFile(path.resolve(\"file\", a.next), \"utf-8\", (err, data) =&gt; &#123; const b = JSON.parse(data); console.log(b.content); fs.readFile(path.resolve(\"file\", b.next), \"utf-8\", (err, data) =&gt; &#123; const c = JSON.parse(data); console.log(c.content); &#125;); &#125;);&#125;); ä¸ºäº†ä»£ç çš„ç®€æ´ï¼Œå·²ç»çœç•¥äº†å¯¹é”™è¯¯çš„å¤„ç†ï¼Œå¯è§ä¸Šé¢åµŒå¥—çš„ä»£ç çœŸçš„å¾ˆéš¾é˜…è¯»ï¼Œéœ€è¦èŠ±è´¹ä¸€ç•ªåŠŸå¤«å»ç†è§£ä¸Šé¢çš„ä»£ç åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚å¹¶ä¸”å¦‚æœæœ‰æ›´å¤šçš„åµŒå¥—çš„è¯ï¼Œä»£ç çš„é€»è¾‘ æ­£æ˜¯ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œåœ¨ ES6 ä¸­æå‡ºäº† Promiseï¼Œå†™å‡ºåŒæ ·ç›®çš„çš„ä»£ç ï¼Œä½†æ˜¯åµŒå¥—æœ€å¤šåªæœ‰ä¸¤ä¸‰å±‚ï¼Œä»£ç ç®€å•æ˜“è¯»ã€‚åŒæ ·ï¼ŒNode.js ä¹Ÿæå‡ºäº† Promise çš„æ–‡ä»¶ç³»ç»Ÿ APIï¼Œåœ¨ fs/promises æ¨¡å—ä¸‹ const fs = require(\"fs\").promises;const path = require(\"path\");fs.readFile(path.resolve(\"file\", \"a.json\"), \"utf-8\") .then((data) =&gt; &#123; data = JSON.parse(data); console.log(data.content); return fs.readFile(path.resolve(\"file\", data.next), \"utf-8\"); &#125;) .then((data) =&gt; &#123; data = JSON.parse(data); console.log(data.content); return fs.readFile(path.resolve(\"file\", data.next), \"utf-8\"); &#125;) .then((data) =&gt; &#123; data = JSON.parse(data); console.log(data.content); &#125;); ä½¿ç”¨å›è°ƒå‡½æ•°çš„å†™æ³•æ— è®ºæœ‰å¤šå°‘å±‚åµŒå¥—ï¼Œæ”¹ä¸ºä½¿ç”¨ Promise çš„å†™æ³•ï¼Œä»£ç çš„åµŒå¥—å°±åªæœ‰ä¸¤å±‚ã€‚ writeFilefs.writeFile(path, data, [options], callback) çš„ä½œç”¨æ˜¯å‘æ–‡ä»¶å†™å…¥å†…å®¹ï¼Œpath è¡¨ç¤ºæ–‡ä»¶è·¯å¾„ï¼Œdata è¡¨ç¤ºå‘æ–‡ä»¶å†™å…¥çš„å†…å®¹ï¼Œoptions æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«å¦‚ä¸‹å±æ€§çš„å¯¹è±¡ï¼š encodingï¼šå°† data è¡¨ç¤ºçš„å­—ç¬¦ä¸²ä½¿ç”¨è¯¥ç¼–ç å†™å…¥æ–‡ä»¶ï¼Œé»˜è®¤ä¸º utf-8ï¼Œå½“ data ä¸º Buffer ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œå°†å¿½ç•¥è¯¥å±æ€§ flagï¼šé»˜è®¤ä¸º wï¼Œè¡¨ç¤ºåªå†™ modeï¼šé»˜è®¤ä¸º 0o666 å½“å†™å…¥æ–‡ä»¶å®Œæ¯•æ—¶ï¼Œä¼šæ‰§è¡Œ callback å‡½æ•°ï¼Œcallback å‡½æ•°æ¥æ”¶ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œæ ¹æ®é”™è¯¯å¯¹è±¡æˆ‘ä»¬å¯ä»¥åˆ¤æ–­æ˜¯å¦å†™å…¥æ–‡ä»¶æˆåŠŸ const fs = require(\"fs\");fs.writeFile(\"./file/world.txt\", \"World\", (err) =&gt; &#123; if (!err) &#123; console.log(\"å†™å…¥æˆåŠŸï¼\"); &#125;&#125;); ä¸Šé¢æˆ‘ä»¬å‘ ./file/world.txt å†™å…¥äº†ä¸€ä¸ª World å­—ç¬¦ä¸²ï¼Œå½“å†™å…¥æˆåŠŸåï¼Œæ‰“å°å‡ºå†™å…¥æˆåŠŸï¼ã€‚ appendFileä¸Šé¢ writeFile è¡¨ç¤ºçš„æ˜¯å‘æ–‡ä»¶å†™å…¥å†…å®¹ï¼Œä¹‹å‰æ–‡ä»¶çš„å†…å®¹å…¨éƒ¨æ¸…é™¤ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åªæ˜¯æƒ³æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹ï¼Œé‚£å°±è¦ä½¿ç”¨ appendFile(path, data, [options], callback)ï¼Œè¿™äº›å‚æ•°çš„æ„ä¹‰åŒ writeFile ç›¸åŒ const fs = require(\"fs\");// world.txt ä¸­æ²¡æœ‰ä»»ä½•å†…å®¹for (let i = 0; i &lt; 3; i++) &#123; fs.appendFile(\"./file/world.txt\", \"Hello World\\n\", (err) =&gt; &#123; if (err) &#123; throw new Error(err); &#125; &#125;);&#125; æ‰§è¡Œå®Œä¸Šè¿°ä»£ç åï¼Œworld.txt ä¸­çš„å†…å®¹ä¸º Hello WorldHello WorldHello World openæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ fs.open(path, [flags], [mode], callback) æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰“å¼€æ–‡ä»¶åä¾¿å¯å¯¹æ–‡ä»¶è¿›è¡Œå¤šé¡¹æ“ä½œï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶ï¼Œå‘æ–‡ä»¶å†™å…¥å†…å®¹ç­‰ç­‰ã€‚ æ“ä½œç³»ç»Ÿç»´æŠ¤ç€ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶å’Œèµ„æºçš„è¡¨æ ¼ï¼Œæ¯ä¸ªæ‰“å¼€çš„æ–‡ä»¶éƒ½åˆ†é…äº†ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œæ“ä½œç³»ç»Ÿæ ¹æ®æ–‡ä»¶æè¿°ç¬¦å»æè¿°å’Œè¿½è¸ªç‰¹å®šçš„æ–‡ä»¶ã€‚ ä½¿ç”¨ fs.open æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ä¹‹åï¼Œä¼šå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦(file descriptor)ï¼Œä¸€æ—¦åˆ†é…ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨è¯¥æ–‡ä»¶æè¿°ç¬¦å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™ã€‚ fs.open æ–¹æ³•æ¥æ”¶å››ä¸ªå‚æ•°ï¼š pathï¼šæ–‡ä»¶è·¯å¾„ flagsï¼šé»˜è®¤ä¸º rï¼Œè¡¨ç¤ºåªè¯» modeï¼Œé»˜è®¤ä¸º 0o666ï¼Œè¡¨ç¤ºæ‹¥æœ‰å¯è¯»å†™çš„æƒé™ callbackï¼šæ‰“å¼€æ–‡ä»¶æˆåŠŸåä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•° errï¼šé”™è¯¯å¯¹è±¡ fdï¼šæ–‡ä»¶æè¿°ç¬¦ flags å¯å–å¦‚ä¸‹å€¼ flag æ„ä¹‰ r åªè¯»ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸ r+ å¯è¯»å¯å†™ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸ rs+ å¯è¯»å¯å†™ï¼Œä»¥åŒæ­¥çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ w åªå†™ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶ wx åŒ wï¼Œä¸è¿‡æ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ™å¤±è´¥ w+ å¯è¯»å¯å†™ï¼Œæ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ›å»ºæ–‡ä»¶ wx+ åŒ w+ï¼Œä¸è¿‡æ–‡ä»¶ä¸å­˜åœ¨æ—¶å¤±è´¥ a å‘æ–‡ä»¶è¿½åŠ å†…å®¹ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ a+ å¯å‘æ–‡ä»¶è¿½åŠ å†…å®¹ï¼Œä¹Ÿå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œæ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ™åˆ›å»ºæ–‡ä»¶ ax å‘æ–‡ä»¶è¿½åŠ å†…å®¹ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™å¤±è´¥ ax+ åŒ a+ï¼Œä¸è¿‡æ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ™å¤±è´¥ fs.open(\"./file/hello.txt\", \"w\", (err, fd) =&gt; &#123; fs.writeFile(fd, \"Hello World!\", (err) =&gt; &#123; if (!err) &#123; console.log(\"å†™å…¥æˆåŠŸ\"); // æ–‡ä»¶èµ„æºæœ‰é™ï¼Œéœ€åŠæ—¶å…³é—­èµ„æº fs.close(fd, (err) =&gt; &#123; if (!err) &#123; console.log(\"å…³é—­æˆåŠŸ\"); &#125; &#125;); &#125; &#125;);&#125;); renamefs.rename(oldPath, newPath, callback) ä½œç”¨å°±æ˜¯é‡å‘½åï¼Œå°† oldPath é‡å‘½åä¸º newPathï¼Œé‡å‘½åå®Œæˆä»¥åä¼šè°ƒç”¨ callback å‡½æ•°ï¼Œä¼šä¸ºè¯¥å‡½æ•°ä¼ å…¥é”™è¯¯å¯¹è±¡ const fs = require(\"fs\");fs.rename(\"./file/hello.txt\", \"./file/world.txt\", (err) =&gt; &#123; if (!err) &#123; console.log(\"é‡å‘½åæˆåŠŸ\"); &#125;&#125;); readdirfs.readdir(dir, callback) æ–¹æ³•æ˜¯è¯»å–ä¸€ä¸ªç›®å½•ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶åå’Œç›®å½•å const fs = require(\"fs\");fs.readdir(\"./file/\", (err, files) =&gt; &#123; if (err) &#123; throw new Error(err); &#125; console.log(files);&#125;); è¾“å‡ºä¸º [\"a.json\", \"b.json\", \"c.json\", \"hello.html\", \"index.html\", \"world.txt\"]; å¦‚æœä¼ å…¥çš„è·¯å¾„ä¸æ˜¯ä¸€ä¸ªç›®å½•ï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºé”™è¯¯ã€‚ rmpath.rm(path, [options], callback)æ–¹æ³•æ˜¯ç”¨æ¥åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• pathï¼šè·¯å¾„ optionsï¼šå¯é€‰å‚æ•°ï¼ŒåŒ…å«å¦‚ä¸‹å±æ€§ï¼š forceï¼šå¦‚æœ force ä¸º true çš„è¯ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ä¸ä¼šæŠ›å‡ºé”™è¯¯ recursiveï¼šå¦‚æœä¼ å…¥çš„è·¯å¾„ä¸ºç›®å½•ï¼Œå¦‚æœ recursive ä¸º falseï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ï¼Œå¦‚æœä¸º trueï¼Œåˆ™ä¼šåˆ é™¤è¯¥ç›®å½• maxRetriesï¼šå½“è¯»å–æ–‡ä»¶å‡ºç°é”™è¯¯æ—¶ï¼Œä¼šè¿›è¡Œå°è¯•ï¼Œè¯¥å±æ€§è®¾ç½®æœ€å¤§å°è¯•æ¬¡æ•°ï¼Œå¦‚æœ recursive ä¸º false çš„è¯ï¼Œä¼šå¿½ç•¥è¯¥é€‰é¡¹ï¼Œé»˜è®¤ä¸º 0 retryDelayï¼šé‡è¯•ä¹‹é—´çš„é—´éš”ï¼Œå•ä½ä¸ºæ¯«ç§’ callbackï¼šå›è°ƒå‡½æ•°ï¼Œåˆ é™¤å®Œæ–‡ä»¶æˆ–ç›®å½•åä¼šè°ƒç”¨è¯¥å›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ¥æ”¶ä¸€ä¸ªé”™è¯¯å¯¹è±¡ const fs = require(\"fs\");// åˆ é™¤ demo æ–‡ä»¶å¤¹ä¸‹é¢çš„æ‰€æœ‰ä¸œè¥¿fs.rm( \"./demo/\", &#123; force: true, recursive: true, &#125;, (err) =&gt; &#123; if (!err) &#123; console.log(\"åˆ é™¤æˆåŠŸ\"); &#125; &#125;); è¯¥æ–¹æ³•ä¸ 14.14.0 ç‰ˆæœ¬æ–°å¢ï¼Œæ‰€ä»¥å¦‚æœè¦ä½¿ç”¨è¯¥æ–¹æ³•éœ€è¦å‡çº§ Node.js åˆ° 14.14.0 ç‰ˆæœ¬ä»¥ä¸Šã€‚ statfs.stat(path, callback) æ–¹æ³•å¯ä»¥è·çŸ¥æ–‡ä»¶æˆ–ç›®å½•çš„ç›¸å…³ä¿¡æ¯ï¼Œpath ä»£è¡¨æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ï¼Œcallback æ˜¯å›è°ƒå‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•° errï¼šé”™è¯¯å¯¹è±¡ statsï¼šfs.Stats å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«å¾ˆå¤šä¸æ–‡ä»¶ä¿¡æ¯ç›¸å…³çš„æ–¹æ³• isDirectory()ï¼šæ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½• isFile()ï¼šæ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶ sizeï¼šæ–‡ä»¶çš„å¤§å°(å•ä½ä¸º Byte) atimeï¼šæœ€åè®¿é—® (access) æ—¶é—´ mtimeï¼šæ–‡ä»¶æœ€åæ›´æ”¹ (modified) æ—¶é—´ï¼Œæ˜¯æŒ‡æ–‡ä»¶å†…å®¹çš„ä¿®æ”¹ ctimeï¼šæ–‡ä»¶æœ€åæ”¹å˜ (changed) æ—¶é—´ï¼Œæ˜¯æŒ‡æ–‡ä»¶å…ƒä¿¡æ¯çš„æ›´æ”¹ï¼Œä¾‹å¦‚æƒé™ birthtimeï¼šæ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ const fs = require(\"fs\");fs.stat(\"./file/world.txt\", (err, stats) =&gt; &#123; if (err) &#123; throw new Error(err.message); &#125; console.log(stats.isDirectory()); // false console.log(stats.isFile()); // true console.log(stats.size); // 12 console.log(stats.atime); // 2021-02-19T10:31:40.744Z console.log(stats.mtime); // 2021-02-19T10:15:58.439Z console.log(stats.ctime); // 2021-02-19T10:31:39.845Z console.log(stats.birthtime); // 2021-02-16T10:44:33.194Z&#125;); osos æ¨¡å—åŒ…å«æœ‰å…³æ“ä½œç³»ç»Ÿæœ‰å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ“ä½œç³»ç»Ÿæ¶æ„ï¼ŒCPU çš„ç›¸å…³ä¿¡æ¯ archos.arch() è¿”å›çš„æ˜¯æ“ä½œç³»ç»Ÿçš„æ¶æ„ï¼Œå¸¸è§çš„æ¶æ„åŒ…æ‹¬ arm arm64 x32 x64 mips â€¦ â€¦ const os = require(\"os\");console.log(os.arch()); // x64 cpusos.cpus() æ˜¯ä¸ CPU ä¿¡æ¯æœ‰å…³çš„æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ˜¯ä¸€ä¸ªä¸ªçš„å¯¹è±¡ï¼Œå¯¹è±¡çš„æ ¼å¼å¦‚ä¸‹ model: CPU çš„ model ä¿¡æ¯ speed: CPU çš„é€Ÿåº¦(MHz) times: åŒ…å«å¦‚ä¸‹å±æ€§çš„å¯¹è±¡ user: CPU åœ¨ç”¨æˆ· user çŠ¶æ€ä¸‹èŠ±è´¹çš„æ—¶é—´ nice: CPU åœ¨ç”¨æˆ· nice çŠ¶æ€ä¸‹èŠ±è´¹çš„æ—¶é—´ï¼Œåœ¨ Windows æ“ä½œç³»ç»Ÿä¸­è¯¥å±æ€§å§‹ç»ˆä¸º 0 sys: CPU åœ¨ç”¨æˆ· sys çŠ¶æ€ä¸‹èŠ±è´¹çš„æ—¶é—´ idle: CPU åœ¨ç”¨æˆ· idle çŠ¶æ€ä¸‹èŠ±è´¹çš„æ—¶é—´ irq: CPU åœ¨ç”¨æˆ· irq çŠ¶æ€ä¸‹èŠ±è´¹çš„æ—¶é—´ const os = require(\"os\");console.log(os.cpus()); è¾“å‡º [ &#123; model: 'Intel(R) Core(TM) i5-10210U CPU @ 1.60GHz', speed: 2112, times: &#123; user: 4533328, nice: 0, sys: 5867843, idle: 85751843, irq: 1135437 &#125; &#125;, ... ...] totalmemã€freememos.totlemen() è·å¾—ç³»ç»Ÿçš„æ€»å†…å­˜ï¼Œos.freemen è·å¾—ç³»ç»Ÿçš„ç›®å‰å¯ç”¨å†…å­˜ï¼ŒäºŒè€…å•ä½çš†ä¸º Byte const os = require(\"os\");console.log(os.totalmem()); // 17001648128console.log(os.freemem()); // 7865696256 hostnameos.hostname() è¿”å›ä¸»æœºå const os = require(\"os\");console.log(os.hostname()); platformos.platform() è¿”å›æ“ä½œç³»ç»Ÿå¹³å°ï¼Œå¸¸è§æœ‰ win32 linux freebsd darwin openbsd const os = require(\"os\");console.log(os.platform()); // win32 httpæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ http æ¨¡å—æ­å»º HTTP æœåŠ¡å™¨ï¼Œå¤„ç†å‰ç«¯é¡µé¢å‘èµ·çš„è¯·æ±‚ï¼Œé¦–å…ˆæˆ‘ä»¬æ­å»ºä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ const http = require(\"http\");// åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨const server = http.createServer();// ç›‘å¬è¯·æ±‚ï¼Œå½“æœ‰è¯·æ±‚åˆ°è¾¾æ—¶è§¦å‘å›è°ƒå‡½æ•°server.on(\"request\", (req, res) =&gt; &#123; res.setHeader(\"Content-Type\", \"text/plain\"); res.write(\"Hello World!\"); res.end();&#125;);// ç›‘å¬ 3000 ç«¯å£server.listen(3000, (err) =&gt; &#123; if (!err) &#123; console.log(\"æœåŠ¡å¯åŠ¨åœ¨3000ç«¯å£...\"); &#125;&#125;); ä¸Šè¿°æˆ‘ä»¬æ­å»ºäº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå®ƒç›‘å¬äº† 3000 ç«¯å£ï¼Œå½“æœ‰è¯·æ±‚åˆ°æ¥æ—¶ï¼Œæˆ‘ä»¬è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² Hello Worldï¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ Postman å‘é€ä¸€ä¸ªè¯·æ±‚æµ‹è¯• è¯·æ±‚å¯¹è±¡server.on(\"request\", (req, res) =&gt; &#123; // ... ...&#125;); ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å‘å›è°ƒå‡½æ•°ä¼ é€’äº†ä¸¤ä¸ªå‚æ•° reqï¼šè¯·æ±‚å¯¹è±¡ï¼ŒåŒ…å«äº†è¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¯·æ±‚å¤´ï¼Œè¯·æ±‚å‚æ•°ï¼Œè¯·æ±‚åœ°å€ resï¼šå“åº”å¯¹è±¡ï¼Œç”¨ä»¥è®¾ç½®å“åº”ä¿¡æ¯ï¼Œä¾‹å¦‚å“åº”å¤´ï¼Œå“åº”å†…å®¹ åœ¨æœ¬èŠ‚ä»‹ç»è¯·æ±‚å¯¹è±¡ã€‚ req.urlé€šè¿‡ req.url æˆ‘ä»¬å¯ä»¥è¿‡å¾—è¯·æ±‚åœ°å€ const http = require(\"http\");// åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨const server = http.createServer();// ç›‘å¬è¯·æ±‚ï¼Œå½“æœ‰è¯·æ±‚åˆ°è¾¾æ—¶è§¦å‘å›è°ƒå‡½æ•°server.on(\"request\", (req, res) =&gt; &#123; // è§£å†³ä¸­æ–‡ä¹±ç  res.setHeader(\"Content-Type\", \"text/plain;charset=utf-8\"); // æ ¹æ®ä¸åŒçš„ url è¿”å›ä¸åŒçš„å†…å®¹ if (req.url === \"/\") &#123; res.write(\"æ‚¨è®¿é—®çš„æ˜¯ä¸»é¡µ\"); &#125; else if (req.url === \"/add\") &#123; res.write(\"æ·»åŠ ä¸€æ¡è®°å½•\"); &#125; else &#123; res.write(\"æ‚¨è®¿é—®çš„èµ„æºä¸å­˜åœ¨\"); &#125; res.end();&#125;);// ç›‘å¬ 3000 ç«¯å£server.listen(3000, (err) =&gt; &#123; if (!err) &#123; console.log(\"æœåŠ¡åœ¨å¯åŠ¨3000ç«¯å£...\"); &#125;&#125;); æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ ¸å¿ƒæ¨¡å— querystring æ¥è§£æ urlï¼Œè·å¾—è¯·æ±‚å‚æ•° const http = require(\"http\");const querystring = require(\"querystring\");const server = http.createServer();server.on(\"request\", (req, res) =&gt; &#123; // è§£æè¯·æ±‚å‚æ•°ä¸ºé”®å€¼å¯¹çš„å½¢å¼ const url = req.url; const query = url.split(\"?\")[1]; const params = querystring.parse(query); res.setHeader(\"Content-Type\", \"application/json\"); // å°†è¯·æ±‚å‚æ•°è¿”å› res.write(JSON.stringify(params)); res.end();&#125;);server.listen(3000);console.log(\"æœåŠ¡å¯åŠ¨åœ¨3000ç«¯å£......\"); req.methodé€šè¿‡ req.method å±æ€§ï¼Œå¯ä»¥çŸ¥é“è¯·æ±‚æ–¹æ³•ï¼Œå¸¸è§è¯·æ±‚æ–¹æ³•åŒ…æ‹¬ GET POST PUT DELETE OPTIONS const http = require(\"http\");const server = http.createServer();server.on(\"request\", (req, res) =&gt; &#123; res.setHeader(\"Content-Type\", \"text/plain;charset=utf-8\"); if (req.method === \"GET\") &#123; res.write(\"GET è¯·æ±‚\"); &#125; if (req.method === \"POST\") &#123; res.write(\"POST è¯·æ±‚\"); &#125; res.end();&#125;);server.listen(3000, (err) =&gt; &#123; if (!err) &#123; console.log(\"æœåŠ¡åœ¨å¯åŠ¨3000ç«¯å£...\"); &#125;&#125;); req.headersreq.headers ä¿å­˜ç€æ‰€æœ‰çš„è¯·æ±‚å¤´çš„ä¿¡æ¯ const http = require(\"http\");const server = http.createServer();server.on(\"request\", (req, res) =&gt; &#123; res.setHeader(\"Content-Type\", \"application/json\"); // å°†è¯·æ±‚å¤´åŸæ ·è¿”å› res.write(JSON.stringify(req.headers)); res.end();&#125;);server.listen(3000, (err) =&gt; &#123; if (!err) &#123; console.log(\"æœåŠ¡åœ¨å¯åŠ¨3000ç«¯å£...\"); &#125;&#125;); å“åº”å¯¹è±¡å“åº”å¯¹è±¡å°±æ˜¯ç”¨æ¥å‘é€å“åº”ä¿¡æ¯ï¼ŒåŒ…æ‹¬ å“åº”å¤´ çŠ¶æ€ç  å“åº”å†…å®¹ setHeaderæˆ‘ä»¬å¯ä»¥é€šè¿‡ setHeader(name, value) æ¥è®¾ç½®å“åº”å¤´ï¼Œä¾‹å¦‚è®¾ç½® Content-Type å“åº”å¤´ const http = require(\"http\");const server = http.createServer();server.on(\"request\", (req, res) =&gt; &#123; // è®¾ç½®å“åº”å¤´ Content-Type res.setHeader(\"Content-Type\", \"text/plain\"); res.write(\"Hello World!\"); res.end();&#125;);server.listen(4000); writeHeadæˆ‘ä»¬å¯ä»¥é€šè¿‡ writeHead æ¥è®¾ç½®å“åº”çŠ¶æ€ç  const http = require(\"http\");const server = http.createServer();server.on(\"request\", (req, res) =&gt; &#123; res.setHeader(\"Content-Type\", \"text/plain\"); res.writeHead(404); res.write(\"Resource Not Found\"); res.end();&#125;);server.listen(4000); é™¤æ­¤ä¹‹å¤–ï¼ŒwriteHead è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªå¯é€‰çš„å¯¹è±¡æ¥è®¾ç½®è¯·æ±‚å¤´ï¼Œå®ƒçš„ä¼˜å…ˆçº§æ¯” setHeader æ–¹æ³•çš„ä¼˜å…ˆçº§é«˜ const http = require(\"http\");const server = http.createServer();server.on(\"request\", (req, res) =&gt; &#123; res.setHeader(\"Content-Type\", \"text/plain\"); // é‡æ–°è®¾ç½® Content-Type è¯·æ±‚å¤´ res.writeHead(404, &#123; \"Content-Type\": \"text/html\", &#125;); res.write(\"Resource Not Found\"); res.end();&#125;);server.listen(4000); writeã€endæˆ‘ä»¬ä½¿ç”¨ res.write æ–¹æ³•æ¥è¿”å›å“åº”å†…å®¹ï¼Œres.write æ–¹æ³•å¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œåœ¨è°ƒç”¨å¤šæ¬¡ write ä¹‹åï¼Œåº”è¯¥ä½¿ç”¨ res.end æ–¹æ³•è¡¨ç¤ºå“åº”çš„ç»“æŸã€‚ const http = require(\"http\");const fs = require(\"fs\").promises;const server = http.createServer();server.on(\"request\", (req, res) =&gt; &#123; res.setHeader(\"Content-Type\", \"text/html\"); (async () =&gt; &#123; const data = await fs.readFile(\"./page/index.html\", \"utf-8\"); res.write(data); res.end(); &#125;)();&#125;);server.listen(4000); end æ–¹æ³•ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ª data å‚æ•° res.end(data);// ç›¸å½“äºres.write(data);res.end(); å‚è€ƒæ–‡ç«  Node.js File System Module Node.js | fs.open() Method Linux File Timestamps Explained: atime, mtime, and ctime Node.js v15.9.0 Documentation nodejs ä¸­æœåŠ¡å™¨è¿”å›å“åº”ä¿¡æ¯ä¸­çš„ä¸­æ–‡ä¹±ç ","tags":[{"name":"fs","slug":"fs","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/fs/"},{"name":"path","slug":"path","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/path/"},{"name":"os","slug":"os","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/os/"},{"name":"http","slug":"http","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/http/"},{"name":"querystring","slug":"querystring","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/querystring/"}]},{"title":"ES6ï¼šSeté›†åˆä¸Mapé›†åˆ","date":"2021-02-15T10:49:00.000Z","path":"/ES6ï¼šSeté›†åˆä¸Mapé›†åˆ/","text":"åœ¨ ES6 ä»¥å‰ï¼ŒJavaScript åªæœ‰æ•°ç»„è¿™ä¸€ç§é›†åˆæ¥å­˜å‚¨æ•°æ®(å½“ç„¶æœ‰çš„äººä¼šä½¿ç”¨å¯¹è±¡æ¥å­˜å‚¨æ•°æ®)ï¼Œåœ¨ ES6 ä¸­å¼•å…¥äº†ä¸¤ç§æ–°çš„é›†åˆæ¥å­˜å‚¨æ•°æ®ï¼Œå®ƒä»¬æ˜¯ Set å’Œ Mapï¼š Setï¼šSet é›†åˆä¸­çš„æ•°æ®éƒ½ä¸ç›¸åŒ Mapï¼šæ•°æ®æ ¼å¼ä¸ºé”®å€¼å¯¹ï¼Œä¸å¯¹è±¡ç±»ä¼¼ ES5 ä¸­çš„ Set å’Œ Mapæ¨¡æ‹Ÿ Set å’Œ Mapåœ¨ ES5 ä¸­ï¼Œå¼€å‘è€…ä½¿ç”¨å¯¹è±¡æ¥æ¨¡æ‹Ÿ Set å’Œ Map let set = Object.create(null);set.foo = trueif (set.foo) &#123; // do something&#125; ä¸Šé¢åœ¨ Set é›†åˆä¸­å­˜å‚¨äº†ä¸€ä¸ªåä¸º foo çš„æ•°æ®ï¼Œé€šè¿‡å°†å®ƒçš„å€¼è®¾ç½®ä¸º true æ¥æŒ‡æ˜é›†åˆä¸­æœ‰è¿™ä¸ªæ•°æ®ã€‚ let map = Object.create(null);map.foo = \"bar\"console.log(map.foo); // bar ä¸Šè¿°ä»£ç åˆ›å»ºäº†ä¸€ä¸ª map é›†åˆï¼Œå¹¶ä¸”åœ¨å…¶ä¸­å­˜å‚¨ foo-bar è¿™ä¸ªé”®å€¼å¯¹ã€‚ å­˜åœ¨çš„é—®é¢˜é—®é¢˜æ˜¯ç”±äºå¯¹è±¡çš„ç‰¹ç‚¹å¼•èµ·çš„ï¼Œåœ¨ JavaScript ä¸­ï¼Œå¯¹è±¡çš„é”®å€¼éƒ½æ˜¯å­—ç¬¦ä¸² let map = Object.create(null);map[5] = \"hello\";console.log(map[\"5\"]); // hello è™½ç„¶ä¸Šé¢æ˜¯ä»¥æ•°å­— 5 ä¸ºé”®å€¼å­˜å‚¨çš„æ•°æ®ï¼Œä½†æ˜¯åœ¨å†…éƒ¨ä¼šè¢«è½¬åŒ–ä¸ºå­—ç¬¦ä¸² â€œ5â€ï¼Œæ‰€ä»¥æ•°å­— 5 å’Œå­—ç¬¦ä¸² â€œ5â€ ä¸ºé”®å€¼æ˜¯ä¸€æ ·çš„ã€‚å› ä¸ºå¯¹è±¡ä¼šå°†é”®å¼ºè½¬ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æ— æ³•ä»¥å¯¹è±¡ä½œä¸ºé”®å€¼ let map = Object.create(null);let key1 = &#123;&#125;, key2 = &#123;&#125;;map[key1] = \"hello\"console.log(map[key2]); // hello ä¸Šè¿°å½“æˆ‘ä»¬ä»¥ key1 å’Œ key2 ä¸ºé”®å€¼å­˜å‚¨å’Œè®¿é—®æ•°æ®æ—¶ï¼Œéƒ½ä¼šå…ˆå°†å¯¹è±¡è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åä»¥è¯¥å­—ç¬¦ä¸²ä¸ºé”®å€¼ä½œä¸ºå¯¹è±¡çš„é”®ã€‚key1 å’Œ key2 è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¾—åˆ°çš„éƒ½æ˜¯ [object Object]ï¼Œæ‰€ä»¥ä»¥å®ƒä»¬ä½œä¸ºé›†åˆçš„é”®æ˜¯åŒä¸€ä¸ªé”®ï¼Œæ— æ³•åŒºåˆ†ï¼Œå³ä»¥å¯¹è±¡æ¨¡æ‹Ÿ Set å’Œ Map æ— æ³•ä»¥å¯¹è±¡ä½œä¸ºé”®ã€‚ å¦å¤–å¯¹äº map é›†åˆï¼Œåˆ¤æ–­ä¸€ä¸ªé”®æ˜¯å¦å­˜åœ¨ä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œé€šå¸¸çš„åˆ¤æ–­æ–¹æ³•å¦‚ä¸‹ let map = Object.create(null);map.count = 1;if (map.count) &#123; // do something&#125; ä¸Šé¢é€šè¿‡ map.count æ¥åˆ¤æ–­ count é”®æ˜¯å¦å­˜åœ¨ï¼Œä½†æ˜¯å½“ count çš„å€¼ä¸º 0 æ—¶å¾—åˆ°çš„ç»“æœä¹Ÿæ˜¯ falseï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªåˆ¤æ–­é 0 çš„é€»è¾‘ï¼Œè¿˜æ˜¯åˆ¤æ–­é”®ä¸å­˜åœ¨çš„é€»è¾‘ï¼Œæ— ä»å¾—çŸ¥ã€‚ SetES6 æä¾›äº†åŸç”Ÿ Set é›†åˆï¼ŒSet é›†åˆæ˜¯ä¸€ä¸ªæœ‰åºçš„ã€æ²¡æœ‰é‡å¤å…ƒç´ çš„é›†åˆã€‚ ä½¿ç”¨ Seté€šè¿‡ new Set() å¾—åˆ°ä¸€ä¸ª Set å¯¹è±¡ï¼ŒSet é›†åˆæä¾›å¦‚ä¸‹ API add(item)ï¼šå‘é›†åˆä¸­æ·»åŠ å…ƒç´  item has(item)ï¼šåˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰ item å…ƒç´  delete(item)ï¼šåˆ é™¤é›†åˆä¸­çš„ item å…ƒç´  clear()ï¼šæ¸…ç©ºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´  let set = new Set();set.add(5);set.add(\"5\");console.log(set.size); // 2 Set é›†åˆæ˜¯é€šè¿‡ Object.is æ–¹æ³•æ¥åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸åŒçš„ï¼Œæ‰€ä»¥ 5 å’Œ â€œ5â€ æ˜¯ä¸¤ä¸ªä¸åŒçš„å…ƒç´ ã€‚å¦‚æœå‘ Set é›†åˆä¸­æ·»åŠ ç›¸åŒçš„å…ƒç´ ï¼Œé‚£ä¹ˆ Set é›†åˆä¼šå¿½ç•¥é‡å¤æ·»åŠ çš„è¯­å¥ set.add(6);set.add(6); // è¿™æ¡è¯­å¥ä¼šè¢«å¿½ç•¥console.log(set.size); // 3 æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åƒ Set é›†åˆä¸­æ·»åŠ å¯¹è±¡ let key1 = &#123;&#125;, key2 = &#123;&#125;;set.add(key1);set.add(key2);console.log(set.size); // 5 ä¸Šé¢ key1 å’Œ key2 æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œæ‰€ä»¥äºŒè€…éƒ½å¯ä»¥è¢«æ·»åŠ è¿›é›†åˆä¸­ã€‚ console.log(set.has(key1)); // trueconsole.log(set.delete(key1)); // trueconsole.log(set.has(key1)); // false has æ–¹æ³•æ˜¯åˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰è¯¥å…ƒç´ ï¼Œè€Œ delete æ–¹æ³•æ˜¯åˆ é™¤é›†åˆä¸­çš„å…ƒç´ ï¼Œå¦‚æœåˆ é™¤æˆåŠŸè¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ set.clear();console.log(set.size); // 0 clear æ–¹æ³•çš„ä½œç”¨æ˜¯æ¸…ç©º Set é›†åˆã€‚ éå† SetSet é›†åˆæä¾› forEach çš„ API è®©æˆ‘ä»¬æ¥éå† Set é›†åˆï¼ŒforEach æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•° é›†åˆä¸­çš„å…ƒç´  åŒç¬¬ä¸€ä¸ªå‚æ•° set é›†åˆæœ¬èº« è¿™é‡Œæ¯”è¾ƒå¥‡æ€ªçš„æ˜¯ç¬¬äºŒä¸ªå‚æ•°ä¸ç¬¬ä¸€ä¸ªå‚æ•°ç›¸åŒï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆåšæ˜¯ä¸ºäº†ä¸æ•°ç»„ä»¥åŠ map é›†åˆçš„ forEach API ä¿æŒä¸€è‡´ï¼Œæ–¹ä¾¿è®°å¿† let set = new Set();set.add(1);set.add(3);set.add(4);set.forEach((value, _, ownerSet) =&gt; &#123; console.log(value); // 1 // 3 // 4 console.assert(ownerSet === set);&#125;); å¦‚æœéœ€è¦åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨ this çš„è¯ï¼Œå¯ä»¥é€šè¿‡ forEach çš„ç¬¬äºŒä¸ªå‚æ•°å°† this ä¼ å…¥ let set = new Set([1, 2]);let processor = &#123; output(value) &#123; console.log(value); &#125;, process(dataSet) &#123; dataSet.forEach(value =&gt; &#123; this.output(value); &#125;, this); &#125;&#125;processor.process(set); Set ä¸æ•°ç»„Set çš„æ„é€ æ–¹æ³•å¯ä»¥æ¥æ”¶ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå®ƒä¼šå°†æ•°ç»„ä¸­çš„å…ƒç´ æ·»åŠ è¿› Set é›†åˆä¸­ï¼Œä½†æ˜¯ä¸ä¼šæ·»åŠ é‡å¤çš„å…ƒç´  let set = new Set([1, 3, 2, 3, 4]);set.forEach((value, _, ownerSet) =&gt; &#123; // 1 3 2 4 console.log(value);&#125;) å¯ä»¥é€šè¿‡ ... è¿ç®—ç¬¦å°† Set è½¬åŒ–ä¸ºæ•°ç»„ let set = new Set([1, 3, 2, 3, 4]);let arr = [...set];console.log(Array.isArray(arr)); // trueconsole.log(arr); // [ 1, 3, 2, 4 ] åˆ©ç”¨ Set é›†åˆçš„ç‰¹ç‚¹ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ•°ç»„è¿›è¡Œå»é‡ function elimateDuplicates(items) &#123; let set = new Set(items); return [...set];&#125;let arr = [1, 2, 1, 1, 3, 2];arr = elimateDuplicates(arr);console.log(arr); // [ 1, 2, 3 ] WeakSetä¸Šé¢çš„ä»‹ç»çš„ Set å¯ä»¥çœ‹åšæ˜¯ Strong Setï¼Œæ‰€è°“çš„ Strong æŒ‡çš„æ˜¯é›†åˆä¸­çš„å…ƒç´ ä¿æŒå¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œä¾‹å¦‚ let set = new Set();let key = &#123; name: 'Alice'&#125;set.add(key);key = null; ä¸Šé¢æˆ‘ä»¬ä¸º Set é›†åˆä¸­æ·»åŠ äº†ä¸€ä¸ªå¯¹è±¡ keyï¼Œéšåå°†å¯¹è±¡ key è®¾ç½®ä¸ºäº† nullï¼Œä½†æ˜¯é›†åˆä»ç„¶ä¿æŒç€å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™å°±æ„å‘³ç€æ— æ³•å›æ”¶æ­¤å¯¹è±¡(è¿™ä¸ªå¯¹è±¡ä»¥åŠæ— æ³•è®¿é—®ï¼ŒæŒ‰é“ç†åº”è¯¥è¢«å›æ”¶æ‰)ï¼Œå¯èƒ½ä¼šé€ æˆå†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚ æ‰€ä»¥ç›¸åº”çš„æå‡ºäº† WeakSetï¼Œæ‰€è°“çš„ WeakSet æŒ‡çš„æ˜¯å…¶ä¸­çš„å…ƒç´ æ²¡æœ‰ä¿æŒçš„å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚æœå¯¹è±¡è¢«è®¾ç½®ä¸º nullï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±å¯ä»¥è¢«å›æ”¶ let weakSet = new WeakSet();let key = &#123; name: \"Alice\"&#125;;weakSet.add(key);// è®¾ç½®ä¸º null äº†ï¼Œå¯¹è±¡å¯ä»¥è¢«ä½œä¸ºåƒåœ¾å›æ”¶äº†key = null; WeakSet æä¾›ä¸ Set ç›¸ä¼¼çš„ API add has delete ä¸‹é¢åˆ—ä¸¾ Set ä¸ WeakSet çš„ä¸åŒï¼š WeakSet é›†åˆåªèƒ½å­˜å‚¨å¯¹è±¡ WeakSet ä¸å¯éå†ï¼Œæ²¡æœ‰ forEach æ–¹æ³•ï¼Œæ²¡æœ‰ size å±æ€§ æ²¡æœ‰ clear æ–¹æ³• Mapä½¿ç”¨ MapMap æ˜¯ç”¨æ¥å­˜å‚¨é”®å€¼å¯¹ç»“æ„çš„æ•°æ®çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ new Map() åˆ›å»ºä¸€ä¸ª Map é›†åˆ let map= new Map();map.set(5, \"alice\");map.set(10, \"bob\");console.log(map); // Map &#123; 5 =&gt; 'alice', 10 =&gt; 'bob' &#125; Map æä¾›å¦‚ä¸‹ API set(key, value)ï¼šæ ¹æ® key è®¾ç½® valueï¼Œå¦‚é›†åˆä¸­æ²¡æœ‰è¯¥ keyï¼Œé‚£ä¹ˆæ·»åŠ è¿™ä¸€é”®å€¼å¯¹ get(key)ï¼šæ ¹æ® key æŸ¥æ‰¾ valueå¹¶è¿”å›ï¼Œå¦‚æœé›†åˆä¸­æ²¡æœ‰è¯¥ keyï¼Œè¿”å› undefined has(key)ï¼šåˆ¤æ–­é›†åˆä¸­æœ‰æ²¡æœ‰ keyï¼Œæœ‰è¿”å› trueï¼Œå¦åˆ™è¿”å› false delete(key)ï¼šæ ¹æ® key åˆ é™¤é›†åˆä¸­çš„é”®å€¼å¯¹ï¼Œåˆ é™¤æˆåŠŸè¿”å› trueï¼Œå¤±è´¥è¿”å› false clear()ï¼šæ¸…ç©ºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´  let map= new Map();map.set(\"name\", \"Alice\");map.set(\"age\", 20);console.log(map.has(\"name\")); // trueconsole.log(map.get(\"name\")); // Alicemap.delete(\"name\");console.log(map.size); // 1console.log(map.get(\"name\")); // undefinedmap.clear();console.log(map.size); // 0 Map é›†åˆè¿˜å¯ä»¥é€šè¿‡æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼Œå®ƒçš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå½¢å¼ä¸º [[key1, value1], [key2, value2]] çš„å½¢å¼ let map= new Map([[5, \"Alice\"], [10, \"Bob\"]]);console.log(map); // Map &#123; 5 =&gt; 'Alice', 10 =&gt; 'Bob' &#125; éå† MapMap é›†åˆä¹Ÿæä¾›äº†ä¸€ä¸ª forEach æ–¹æ³•ç”¨æ¥éå† Map é›†åˆï¼Œè¯¥æ–¹æ³•ä¹Ÿæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•° value key map é›†åˆæœ¬èº« let map = new Map([[\"name\", \"Alice\"], [\"age\", 18], [\"gender\", \"female\"]]);map.forEach((value, key, ownerMap) =&gt; &#123; // key: name, value: Alice // key: age, value: 18 // key: gender, value: female console.log(`key: $&#123;key&#125;, value: $&#123;value&#125;`); console.assert(map === ownerMap);&#125;) å¦‚æœå›è°ƒå‡½æ•°ä¸­éœ€è¦ç”¨åˆ° this çš„è¯ï¼Œå¯ä»¥é€šè¿‡ forEach çš„ç¬¬äºŒä¸ªå‚æ•°å°† this ä¼ å…¥ã€‚ WeakMapWeakMap çš„æå‡ºä¸ WeakSet ç›¸ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†è§£å†³åƒåœ¾å›æ”¶é—®é¢˜ let map = new WeakMap();let key1 = &#123;&#125;, key2 = &#123;&#125;;map.set(key1, \"Alice\");map.set(key2, \"Bob\");// key1 çš„å€¼ä¸º nullï¼Œè¡¨ç¤ºå¯ä»¥è¢«åƒåœ¾å›æ”¶äº†key1 = null; WeakMap æä¾›ä»¥ä¸‹ API set get has delete let map = new WeakMap();let key1 = &#123;&#125;, key2 = &#123;&#125;;map.set(key1, \"Alice\");map.set(key2, \"Bob\");console.log(map.get(key1)); // Aliceconsole.log(map.delete(key1)); // trueconsole.log(map.has(key1)); // false WeakMap å…·æœ‰å¦‚ä¸‹é™åˆ¶ï¼š é”®å¿…é¡»ä¸ºå¯¹è±¡ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯ æ²¡æœ‰ size å±æ€§ï¼Œæ—  clear æ–¹æ³• æ— æ³•ä½¿ç”¨ forEach å¾ªç¯ï¼Œä¸å¯è¿­ä»£","tags":[{"name":"Set","slug":"Set","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Set/"},{"name":"Map","slug":"Map","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Map/"}]},{"title":"Node.js ä¹‹æ¨¡å—ç³»ç»Ÿ","date":"2021-02-08T10:17:00.000Z","path":"/Node.js ä¹‹æ¨¡å—ç³»ç»Ÿ/","text":"Node.js æå‡ºçš„èƒŒæ™¯èƒŒæ™¯Node.js äº 2009 å¹´ç”± Ryan Dahl æå‡ºï¼Œå®ƒæå‡º Node.js æ˜¯ä¸ºäº†è§£å†³å½“æ—¶çš„å¹¶å‘è¿æ¥é—®é¢˜ã€‚ä»¥å¾€çš„ç¼–ç¨‹è¯­è¨€å¯¹äºè¯·æ±‚çš„å¤„ç†æ–¹å¼æ˜¯ï¼Œæ¥ä¸€ä¸ªè¯·æ±‚å°±æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå‡è®¾ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ¶ˆè€— 2MB çš„å†…å­˜èµ„æºï¼Œé‚£ä¹ˆå¯¹äºä¸€ä¸ª 8GB çš„å†…å­˜ç³»ç»Ÿï¼Œå®ƒæœ€å¤šåŒæ—¶å¤„ç† 4000 ä¸ªè¯·æ±‚ã€‚å¦‚æœéœ€è¦å¤„ç†æ›´å¤šçš„è¯·æ±‚çš„è¯ï¼Œå°±éœ€è¦å¢åŠ æ›´å¤šçš„æœåŠ¡å™¨ï¼Œå¦å¤–ç”±äºç”¨æˆ·çš„æ¯ä¸ªè¯·æ±‚å¯èƒ½è®¿é—®ä¸åŒçš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥æ‰€æœ‰çš„èµ„æºéƒ½éœ€è¦åœ¨æœåŠ¡å™¨ä¹‹é—´å…±äº«ã€‚è¿™ç§ Web æ¶æ„ä¸‹ç“¶é¢ˆå°±åœ¨äºæœåŠ¡å™¨èƒ½å¤Ÿå¤„ç†çš„å¹¶å‘è¿æ¥çš„æœ€å¤§æ•°é‡ã€‚ Node.js æå‡ºå¦ä¸€ç§æ–¹æ³•æ¥è§£å†³è¿™ç§é—®é¢˜ï¼Œé‚£å°±æ˜¯äº‹ä»¶ç»‘å®šã€‚æ¯æ¬¡æ¥åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ä¸æ˜¯ä¸ºè¯¥è¯·æ±‚æ–°å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œæ˜¯ä¸ºè¯¥è¯·æ±‚ç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼Œå¹¶ä¸”æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ï¼Œè€Œæœ€ç»ˆè¾¾åˆ°çš„æ•ˆæœæ˜¯ï¼Œä½¿ç”¨ Node.js çš„æœåŠ¡å™¨èƒ½å¤ŸåŒæ—¶å¤„ç†æ•°ä¸‡ä¸ªå¹¶å‘è¿æ¥ã€‚ å¦‚æœå°†æœåŠ¡å™¨æ¯”ä½œæ˜¯ä¸€ä¸ªé¥­åº—ï¼Œè€Œä¸€ä¸ªè¯·æ±‚å°±æ˜¯ä¸€ä¸ªå®¢äººã€‚å¯¹äºä½¿ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼çš„æœåŠ¡å™¨ï¼Œæ¥ä¸€ä¸ªå®¢äººå°±æ´¾ä¸€ä¸ªæœåŠ¡ç”Ÿå»æœåŠ¡å®¢äººï¼Œç›´è‡³å®¢äººç¦»å¼€ã€‚è€Œ Node.js åˆ™æ˜¯åªæœ‰ä¸€ä½æœåŠ¡å‘˜ï¼Œè¿™ä½æœåŠ¡å‘˜ä¸ä¼šä»å¤´åˆ°å°¾éƒ½æœåŠ¡å®¢äººï¼Œæ¯æ¥ä¸€ä¸ªå®¢äººï¼Œåœ¨äº†è§£å®Œå®¢äººçš„éœ€æ±‚åï¼Œå¹¶è®°å½•ä¸‹æ¥ï¼Œå°±è¯·å®¢äººå»åº§ä½ä¸Šç­‰å¾…ï¼Œä¼šæœ‰ä¸“é—¨çš„äººå‘˜å»å¤„ç†è®°å½•çš„éœ€æ±‚ã€‚ æ‰€ä»¥ Node.js ä¹Ÿæœ‰å…¶é€‚åº”çš„åœºæ™¯ï¼Œå®ƒé€‚åˆäº IO å¯†é›†å‹çš„ä»»åŠ¡ï¼Œè€Œä¸é€‚åˆ CPU å¯†é›†å‹çš„ä»»åŠ¡ã€‚æ‰€è°“çš„ IO å¯†é›†å‹ä»»åŠ¡æŒ‡çš„å°±æ˜¯åƒä¸Šé¢æ‰€æåŠçš„å¤§é‡çš„å¹¶å‘è¯·æ±‚ï¼Œè€Œ CPU å¯†é›†å‹ä»»åŠ¡æŒ‡çš„æ˜¯éœ€è¦åšå¤æ‚è€—æ—¶é•¿çš„è®¡ç®—çš„ä»»åŠ¡ã€‚ åº”ç”¨Node.js è‡ª 2009 å¹´æå‡ºå‘å±•è‡³ä»Šå·²æœ‰åä½™å¹´çš„æ—¶é—´ï¼Œè™½ç„¶ Node.js å½“åˆçš„æƒ³æ³•æ˜¯ä¸ºäº†è§£å†³å¤§å¹¶å‘çš„é—®é¢˜ï¼Œä½†æ˜¯éšç€åå‡ å¹´çš„å‘å±•ï¼ŒNode.js ä¹Ÿå‚¬ç”Ÿå‡ºäº†å…¶ä»–çš„åº”ç”¨ï¼š Web æœåŠ¡å™¨ï¼šè‡ª Node.js è¯ç”Ÿï¼Œæå‡ºäº†å¾ˆå¤šå¾— Web æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ–¹ä¾¿çš„å†™å‡º Web ç¨‹åº Express Koa2 Egg å‰ç«¯å·¥ç¨‹åŒ–ï¼šNode.js çš„æå‡ºï¼Œä½¿å¾—å‰ç«¯ä¹Ÿäº§ç”Ÿä¸€æ¬¡è´¨çš„é£è·ƒï¼Œä½¿ç”¨ Node.js ç¼–å†™çš„å‰ç«¯å·¥å…·ä½¿å¾—å¼€å‘å‰ç«¯é¡¹ç›®å˜å¾—ç®€å• Babel Webpack Eslint Jest æ¡Œé¢é¡¹ç›®ï¼šNode.js æä¾›äº†å…·æœ‰è®¿é—®æ“ä½œç³»ç»Ÿ API çš„èƒ½åŠ›ï¼Œä½¿å¾—ä½¿ç”¨ Node.js ä¹Ÿå¯ä»¥å¼€å‘å‡ºæ¡Œé¢é¡¹ç›® Electron è„šæ‰‹æ¶å·¥å…·ï¼šä½¿ç”¨ Node.js ç¼–å†™çš„è„šæ‰‹æ¶å·¥å…·ï¼Œè®©æˆ‘ä»¬å¯ä»¥å¾ˆå¿«çš„å¼€å§‹ä¸€ä¸ªå‰ç«¯é¡¹ç›® creat-react-app vue-cli æœåŠ¡ç«¯æ¸²æŸ“ï¼š next.js nuxt.js Serverless â€¦ æ¨¡å—æ¦‚å¿µç°åœ¨çš„ç¨‹åºè¶Šæ¥è¶Šå¤æ‚ï¼Œå·²ç»ä¸å¯èƒ½å°†æ‰€æœ‰çš„ç¨‹åºå†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢äº†ï¼Œä¸€ä¸ªæ˜¯éš¾ä»¥é˜…è¯»ï¼ŒäºŒä¸ªæ˜¯ä¸åˆ©äºå¤šäººåä½œï¼Œæ‰€ä»¥æœ‰å¿…è¦å°†ä»£ç åˆ†å‰²åœ¨ä¸åŒçš„éƒ¨åˆ†ï¼Œè¿™äº›éƒ¨åˆ†å°±å«åšæ¨¡å—ã€‚ å°†ä»£ç åˆ†å‰²ä¸ºä¸åŒçš„æ¨¡å—ä»¥åï¼Œå¯ä»¥æœ‰å¦‚ä¸‹å¥½å¤„ï¼š ä¸åŒçš„æ¨¡å—è´Ÿè´£ä¸åŒçš„åŠŸèƒ½ï¼Œä½¿å¾—ä»£ç é˜…è¯»èµ·æ¥æ›´åŠ æ¸…æ™°ï¼Œå¹¶ä¸”ç»´æŠ¤èµ·æ¥ä¹Ÿä¼šæ¯”è¾ƒç®€å• ä¸åŒçš„æ¨¡å—æœ‰å„è‡ªçš„ä½œç”¨åŸŸï¼Œå¯ä»¥é¿å…å…¨å±€å˜é‡å‘ç”Ÿå†²çª åˆ©äºå¤šäººåä½œï¼Œæ¯ä¸ªäººå¼€å‘å±äºè‡ªå·±çš„æ¨¡å—ï¼Œæœ€åç»„åˆä¸ºä¸€ä¸ªå¤§çš„ç¨‹åº ä»£ç å¤ç”¨ï¼Œå¯ä»¥å°†ä¸€äº›ä¸ä¸šåŠ¡æ— å…³çš„å·¥å…·å‡½æ•°æŠ½ç¦»å‡ºæ¥ï¼Œåœ¨åˆ«çš„é¡¹ç›®ä¸­è¿›è¡Œå¤ç”¨ å°†ä»£ç è¿›è¡Œåˆ†å‰²ä»¥åï¼Œè¿˜éœ€è¦å°†ä»£ç ç»„åˆèµ·æ¥ï¼Œè®©å®ƒä»¬åä½œå¾—ä»¥å·¥ä½œã€‚ è¦ä½¿å¾—æ¨¡å—èƒ½å¤Ÿäº’ç›¸åä½œï¼Œå°±éœ€è¦æ¨¡å—èƒ½å¤Ÿæš´éœ²ç»™å…¶ä»–æ¨¡å—è®¿é—®è¯¥æ¨¡å—å†…éƒ¨çš„ä¸€äº›å˜é‡ï¼Œå°†è¿™äº›å˜é‡æš´éœ²ç»™å…¶ä»–å‡½æ•°çš„è¡Œä¸ºå°±æ˜¯å¯¼å‡ºï¼›è€Œå¯¼å…¥ä¸å¯¼å‡ºç›¸å¯¹ï¼Œå°†å…¶ä»–æ¨¡å—æš´éœ²å‡ºçš„å˜é‡å¼•å…¥åˆ°æœ¬æ¨¡å—ï¼Œä½¿å¾—æœ¬æ¨¡å—èƒ½å¤Ÿè®¿é—®å…¶ä»–æ¨¡å—æš´éœ²å‡ºçš„å˜é‡ï¼Œè¿™ä¸ªè¡Œä¸ºå°±æ˜¯å¯¼å…¥ã€‚ å¯¼å‡ºåœ¨ Node.js ä¸­ï¼Œä¸€ä¸ª .js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œåœ¨æ¯ä¸ªæ¨¡å—ä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ª module å¯¹è±¡ï¼Œmodule å¯¹è±¡æœ‰ä¸€ä¸ª exports å±æ€§ï¼Œè¯¥å±æ€§ä¼šè¢«ä½œä¸ºè¯¥æ¨¡å—çš„å¯¼å‡ºå†…å®¹ // alice.jsmodule.exports = &#123; name: \"Alice\", age: 18, gender: \"female\"&#125; ä¾‹å¦‚åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬è®¾ç½® module.exports ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å¯¹å¤–æš´éœ²çš„å†…å®¹ï¼Œå¯ä»¥åœ¨å…¶ä»–æ¨¡å—ä¸­å¯¼å…¥è¿™ä¸ªå¯¹è±¡å¹¶ä½¿ç”¨ã€‚ åœ¨æ¯ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªåä¸º exports çš„å˜é‡ï¼Œå®ƒæ˜¯ module.exports çš„å¼•ç”¨ï¼Œä½ å¯ä»¥çœ‹åšåœ¨æ¯ä¸ªæ¨¡å—çš„å¼€å¤´éƒ½æœ‰è¿™ä¹ˆä¸€è¡Œä»£ç  let exports = module.exports; å®ƒçš„æå‡ºæ˜¯ä¸ºäº†ç®€å†™æ–¹ä¾¿ // bob.jsconst name = \"Bob\";const age = 20;const gender = \"male\";module.exports.name = name;module.exports.age = age;module.exports.gender = gender; ä¸Šé¢æˆ‘ä»¬é€šè¿‡ä¸º module.exports çš„å±æ€§èµ‹å€¼ï¼Œä»è€Œå°†æœ¬æ¨¡å—å†…çš„å‡ ä¸ªå˜é‡æš´éœ²å‡ºæ¥ç»™å…¶ä»–æ¨¡å—è®¿é—®ï¼Œä¸Šé¢çš„ module.exports é€šé€šå¯ä»¥æ›¿æ¢ä¸º exports // bob.jsconst name = \"Bob\";const age = 20;const gender = \"male\";exports.name = name;exports.age = age;exports.gender = gender; ä½†æ˜¯ç»å¸¸æœ‰æ–°æ‰‹æœ‰å¦‚ä¸‹é”™è¯¯çš„å†™æ³• // bob.jsconst name = \"Bob\";const age = 20;const gender = \"male\";exports = &#123; name: name, age: age, gender: gender&#125; ä¸Šé¢é€šè¿‡ç»™ exports å˜é‡èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¸Œæœ›å°†æœ¬æ¨¡å—çš„ä¸€äº›å˜é‡å¯¼å‡ºï¼Œä½†æ˜¯åœ¨å…¶ä»–æ¨¡å—ä¸­å¯¼å…¥è¯¥æ¨¡å—æ—¶ï¼Œå‘ç°å¯¼å…¥çš„åªæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè¿™å¾€å¾€è®©æ–°æ‰‹ç™¾æ€ä¸å¾—å…¶è§£ï¼Œå…¶å®ç¨åŠ åˆ†æå°±å¯ä»¥çŸ¥é“ä¸ºä»€ä¹ˆã€‚ è¦æ˜ç™½ä¸Šé¢çš„å†™æ³•ä¸ºä»€ä¹ˆæ˜¯é”™è¯¯çš„ï¼Œæˆ‘å…ˆå†æ¬¡å¼ºè°ƒï¼Œæ¨¡å—å¯¼å‡ºçš„æ˜¯ module.exports è¿™ä¸ªå˜é‡ï¼Œè€Œ exports åªæ˜¯ä¸€ä¸ªå¼•ç”¨ï¼ŒæŒ‡å‘ module.exportsã€‚æ‰€ä»¥å½“æˆ‘ä»¬é€šè¿‡ exports.xxx çš„æ–¹å¼æ·»åŠ å±æ€§æ—¶ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºä¸º module.exports è¿™ä¸ªå¯¹è±¡æ·»åŠ å±æ€§ï¼Œæ‰€ä»¥è¢«æ·»åŠ çš„å±æ€§å¯ä»¥è¢«å¯¼å‡ºï¼›ä½†æ˜¯å½“æˆ‘ä»¬ä¸º exports èµ‹äºˆä¸€ä¸ªæ–°çš„å€¼çš„æ—¶å€™ï¼Œexports ä¸åœ¨æ˜¯ module.exports çš„å¼•ç”¨ï¼Œå¹¶ä¸” module.exports å¹¶ä¸ä¼šå‘ç”Ÿä»»ä½•çš„æ”¹å˜ï¼Œå¯¼å‡ºçš„å†…å®¹ä¹Ÿä¸ä¼šå¦‚é¢„æœŸé‚£èˆ¬ã€‚ å¦‚æœæƒ³ç›´æ¥å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯·ç›´æ¥ä½¿ç”¨ module.exportsï¼Œæˆ–è€…é€šè¿‡ exports.xxx çš„æ–¹å¼ä¸€ä¸ªä¸ªçš„æ·»åŠ å±æ€§ã€‚ å¦‚æœå®åœ¨æä¸æ‡‚ exportsï¼Œé‚£ä¹ˆè¯·å¿˜äº†å®ƒï¼Œå½±å“ä¸å¤§ã€‚ å¯¼å…¥æˆ‘ä»¬ä½¿ç”¨ require è¿™ä¸ªå‡½æ•°æ¥å¯¼å…¥å…¶ä»–æ¨¡å—æš´éœ²å‡ºæ¥çš„å˜é‡ // index.jsconst alice = require('./alice.js');console.log(alice.name); // Alice ä¸Šé¢æˆ‘ä»¬é€šè¿‡ require å¯¼å…¥äº† alice.js è¿™ä¸ªæ¨¡å—ï¼Œå…¶å®å¯¼å…¥çš„å†…å®¹å°±æ˜¯ alice.js ä¸­çš„ module.exportsï¼Œæˆ‘ä»¬ä½¿ç”¨å˜é‡ alice è¿›è¡Œæ¥æ”¶ã€‚å¦‚æœæˆ‘ä»¬å¹¶ä¸éœ€è¦å¯¼å…¥æ¨¡å—çš„æ‰€æœ‰å†…å®¹ï¼Œåªæ˜¯éœ€è¦å…¶ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¾‹å¦‚ä¸Šé¢æˆ‘ä»¬åªæ˜¯éœ€è¦ name è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ä½¿ç”¨ ES6 çš„è§£æ„è¯­æ³•è·å¾—éœ€è¦çš„å±æ€§ // index.jsconst &#123; name &#125; = require('./alice.js');console.log(name); // Alice å½“æˆ‘ä»¬å¯¼å…¥ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå…ˆæ‰§è¡Œè¿™ä¸ªæ¨¡å— // a.jsconsole.log(\"a.js\");//b.jsrequire('./a');console.log(\"b.js\"); è¾“å‡ºä¸º a.jsb.js æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥åç¼€åï¼Œå½“æˆ‘ä»¬çœç•¥åç¼€åæ—¶ï¼Œå®ƒå°†æ ¹æ®ä¸‹é¢çš„é¡ºåºæŸ¥æ‰¾æ–‡ä»¶ æ˜¯å¦æœ‰ a.js æ–‡ä»¶ï¼Œæ˜¯å¦æœ‰ a.json æ–‡ä»¶ï¼Œæ˜¯å¦æœ‰ a.node æ–‡ä»¶ æ˜¯å¦æœ‰ä¸€ä¸ªåå­—ä¸º a çš„æ–‡ä»¶å¤¹ï¼Œä¸‹é¢æœ‰ä¸€ä¸ª package.json æ–‡ä»¶å¹¶ä¸”æœ‰ main å­—æ®µï¼Œå¦‚æœæœ‰åˆ™æ ¹æ® main å­—æ®µæŒ‡æ˜çš„è·¯å¾„å»åŠ è½½æ–‡ä»¶ æ˜¯å¦æœ‰ä¸€ä¸ªåå­—ä¸º a çš„æ–‡ä»¶å¤¹ï¼Œä¸‹é¢æœ‰ä¸€ä¸ª index.js å¦‚æœæŒ‰ç…§ä»¥ä¸Šé¡ºåºéƒ½æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ npmæˆ‘ä»¬åœ¨æ‰‹æœºä¸Šä¸‹è½½è½¯ä»¶æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯ä»åº”ç”¨å•†åº—ä¸‹è½½è½¯ä»¶ï¼Œä¸ä¼šå»æŸä¸ªè½¯ä»¶çš„å®˜ç½‘å»ä¸‹è½½ï¼Œå¤§å®¶éƒ½æŠŠè½¯ä»¶æ”¾åœ¨åº”ç”¨å•†åº—ä¸­ï¼Œå¤§å®¶åªè¦å»å•†åº—é‡Œé¢ä¸‹è½½å³å¯äº†ã€‚åŒæ ·ï¼Œå½“æˆ‘ä»¬éœ€è¦ç”¨åˆ°å…¶ä»–äººç¼–å†™çš„ç¬¬ä¸‰æ–¹æ¨¡å—æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›æœ‰ä¸€ä¸ªå•†åº—è®©æˆ‘ä»¬å»ä¸‹è½½ï¼Œæˆ‘ä»¬ä¸è¦å»æ¯ä¸ªå®˜ç½‘ä¸€ä¸ªä¸ªçš„ä¸‹è½½ã€‚ å¹¶ä¸”ç¨‹åºæ¯”è½¯ä»¶ä¸‹è½½æ›´åŠ çš„å¤æ‚ï¼Œä½“ç°åœ¨åŒ…çš„ä¾èµ–å…³ç³»ã€‚æœ¬ç€ä¸é€ è½®å­çš„åŸåˆ™ï¼Œå¾ˆå¤šçš„ç¨‹åºéƒ½æ˜¯ç›´æ¥ä½¿ç”¨åˆ«äººå·²ç»å†™å¥½çš„ä»£ç ï¼Œæ‰€ä»¥ä»£ç ä¹‹é—´å¯ä»¥è¯´æœ‰éå¸¸å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚æˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€ä¸ª a åŒ…å¸®æˆ‘ä»¬åšäº‹æƒ…ï¼Œä½†æ˜¯ a åŒ…åˆä¾èµ–äº b è¿™ä¸ªåŒ…ï¼Œb åŒ…åˆä¾èµ–äº c åŒ…ï¼Œç­‰ç­‰ã€‚æ‰€ä»¥ä¸ºäº†ä½¿å¾—æˆ‘ä»¬çš„ a åŒ…èƒ½å¤Ÿå·¥ä½œï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸‹è½½å¥½ b åŒ…ã€c åŒ…ç­‰ç­‰è¿™äº›è¢«ä¾èµ–çš„åŒ…ã€‚è¿™å°±ä¼šå¸¦æ¥é—®é¢˜ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸çŸ¥é“ a åŒ…ä¾èµ–äºä»€ä¹ˆåŒ…ï¼Œä»¥åŠå³ä½¿æˆ‘ä»¬çŸ¥é“ a åŒ…ä¾èµ–äºè¿™äº›åŒ…ï¼Œä¸€ä¸ªä¸ªçš„ä¸‹è½½è¿™äº›åŒ…æ˜¯å¦æ˜¯ä¸€ä»¶æå…¶æ— èŠçš„å·¥ä½œã€‚ åŸºäºä»¥ä¸Šå‡ ç‚¹ï¼Œæˆ‘ä»¬è¿«åˆ‡éœ€è¦ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·å¸®åŠ©æˆ‘ä»¬ã€‚åœ¨ Node ä¸­ï¼ŒNode Package Manager (npm) æ­£æ˜¯ç”¨æ¥åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥é€šè¿‡å®ƒä¸‹è½½éœ€è¦çš„åŒ…ï¼Œå¹¶ä¸”å®ƒè¿˜ä¼šæ ¹æ®åŒ…çš„ä¾èµ–å…³ç³»ï¼Œè‡ªåŠ¨çš„å¸®æˆ‘ä»¬ä¸‹è½½å¥½å…¶ä»–è¢«ä¾èµ–çš„åŒ…ã€‚ é‚£ä¹ˆåŒ…æ˜¯ä»€ä¹ˆ? æ¯”è¾ƒæ­£å¼çš„å®šä¹‰ï¼šåŒ…æ˜¯ä¸€ä¸ªç”± package.json å®šä¹‰çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚å‡è®¾æœ‰ä¸€å¤©ï¼Œä½ å†™äº†ä¸€ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œå¸Œæœ›åˆ†äº«ç»™å¤§å®¶ï¼Œè¿™ä¸ªç¨‹åºè‚¯å®šä¸åªæ˜¯ä¸€ä¸ªæ–‡ä»¶çš„ä»£ç ï¼Œæ˜¯å¤šä¸ªæ¨¡å—çš„ç»„åˆï¼Œå³ä½ åˆ†äº«çš„ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…æ‹¬äº†è¿™äº›æ¨¡å—ã€‚ é‚£ä¹ˆ package.json åˆæ˜¯ä»€ä¹ˆå‘¢? ä½ å¯ä»¥æŠŠå®ƒçœ‹åšæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­è®°å½•äº†è¯¥å·¥å…·çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç‰ˆæœ¬ï¼Œåç§°ï¼Œä½œè€…ç­‰ç­‰å†…å®¹ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œå®ƒè®°å½•äº†ä½ å†™çš„å·¥å…·ä¾èµ–äº†å“ªäº›å…¶ä»–çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œè¿™æ ·å½“åˆ«äººä¸‹è½½ä½ çš„åŒ…æ—¶ä¼šæ ¹æ® package.json æ ‡æ³¨çš„ä¾èµ–ä¸‹è½½æ‰€ä¾èµ–çš„åŒ…ã€‚ é‚£ä¹ˆåœ¨ Node.js ä¸­å¯ä»¥ç›´æ¥å¼•å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹å—? ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼ŒNode.js ä¸­çš„æ¨¡å—å¯ä»¥æ˜¯å¦‚ä¸‹ä¸‰ç§ï¼š ä¸€ä¸ªæ–‡ä»¶(.js, .json, .node) ä¸€ä¸ªåŒ…å« package.json æ–‡ä»¶å¹¶ä¸”å®šä¹‰äº† main å­—æ®µçš„æ–‡ä»¶å¤¹ ä¸€ä¸ªåŒ…å« index.js çš„æ–‡ä»¶å¤¹ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ require å¯¼å…¥ä¸€ä¸ªåŒ…ï¼Œå®ƒä¼šæ ¹æ® main å­—æ®µæŒ‡æ˜çš„åœ°å€å»åŠ è½½ .js æ–‡ä»¶ã€‚ npm initä¸‹è½½ä»‹ç» npm åœ¨å‘½ä»¤è¡Œä¸­çš„ä½¿ç”¨ï¼Œå½“æˆ‘ä»¬ä¸‹è½½å¥½äº† Node.jsï¼Œä¸€èˆ¬éƒ½æ˜¯ä¼šè‡ªåŠ¨å®‰è£…å¥½ npm çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œé€šè¿‡ npm --version æŸ¥çœ‹ npm çš„ç‰ˆæœ¬å· Î» npm --version6.14.8 æˆ‘ä»¬å†™ä¸€ä¸ªé¡¹ç›®ï¼Œå°±è‚¯å®šéœ€è¦å‡†å¤‡ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œä½ å¯ä»¥æ‰‹åŠ¨åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œæˆ–è€…é€šè¿‡ npm init å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨ npm init æ¥åˆ›å»ºä¸€ä¸ª package.json æ–‡ä»¶ åœ¨æˆ‘ä»¬è¾“å…¥ npm init åï¼Œå®ƒä¼šå¼•å¯¼æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª package.json æ–‡ä»¶ï¼Œå¡«å†™ä¸€äº›å¸¸è§çš„ä¿¡æ¯ï¼Œä¾‹å¦‚åŒ…åã€ç‰ˆæœ¬ã€ä½œè€…ç­‰ç­‰ï¼Œå½“è¿™äº›éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œåœ¨ç›®å½•ä¸‹å›å‡ºç°ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ &#123; \"name\": \"demo\", \"version\": \"1.0.0\", \"description\": \"Node Demo\", \"main\": \"index.js\", \"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\" &#125;, \"author\": \"XT\", \"license\": \"MIT\"&#125; è¿™äº›å†…å®¹éƒ½æ˜¯æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­å¡«å†™çš„å†…å®¹ã€‚å¦‚æœå¸Œæœ›å¿«é€Ÿåˆ›å»ºä¸€ä¸ª package.json æ–‡ä»¶ï¼Œæ‰€ä»¥é…ç½®é¡¹é‡‡ç”¨é»˜è®¤é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ npm init -yï¼Œä¼ å…¥ -y è¡¨ç¤ºæ‰€æœ‰çš„é…ç½®é¡¹é‡‡ç”¨é»˜è®¤é…ç½®ã€‚ npm installä½¿ç”¨ npm install å¯ä»¥ä¸‹è½½åŒ…ï¼Œä¸‹è½½çš„åŒ…åˆ†ä¸ºä¸‰ç§ï¼š å…¨å±€å®‰è£… æœ¬åœ°å®‰è£… æœ¬åœ°ä¾èµ– å¼€å‘ä¾èµ– ä¸åŒä¾èµ–çš„åŒ…åœ¨ä¸‹è½½æ—¶éœ€è¦ä¼ å…¥ä¸åŒçš„å‚æ•°ã€‚ å…¨å±€å®‰è£…å…¨å±€å®‰è£…çš„åŒ…å¯ä»¥åœ¨å‘½ä»¤è¡Œç›´æ¥æ‰§è¡Œï¼Œå¯¹äºéœ€è¦å…¨å±€ä¾èµ–çš„åŒ…ï¼Œæˆ‘ä»¬è¦ä¼ å…¥ --global å‚æ•°æˆ–è€… -g å‚æ•°ï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸‹è½½ä¸€ä¸ª nrm çš„åŒ…ï¼Œè¿™ä¸ªåŒ…æ˜¯ç”¨æ¥è®¾ç½®é•œåƒæºçš„ï¼Œå› ä¸º npm çš„æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½® npm ä¸‹è½½çš„é•œåƒæº npm install -g nrm å®ƒä¼šå°†è¿™ä¸ªåŒ…ä¸‹è½½åˆ° C:\\Users\\username\\AppData\\Roaming\\npm\\node_modules è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œå¹¶ä¸”ä¼šåœ¨ C:\\Users\\username\\AppData\\Roaming\\npm\\ ç”Ÿæˆå¯¹åº”çš„ .cmd æ–‡ä»¶ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬å…¨å±€å®‰è£… nrm ä¹‹åå°±ä¼šåœ¨ npm æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆ nrm.cmd æ–‡ä»¶ å› ä¸º C:\\Users\\username\\AppData\\Roaming\\npm\\ è¿™ä¸ªæ–‡ä»¶å¤¹åœ¨å®‰è£… npm çš„æ—¶å€™å°±ä¼šè¢«è‡ªåŠ¨çš„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå½“æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥ nrm çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šåœ¨è¿™ä¸ªè·¯å¾„æœç´¢ nrm å‘½ä»¤ï¼Œç„¶åæ‰§è¡Œï¼Œè¿™å°±æ˜¯å…¨å±€å®‰è£…çš„åŒ…èƒ½å¤Ÿåœ¨å‘½ä»¤è¡Œç›´æ¥æ‰§è¡Œçš„åŸå› ã€‚ æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥ nrm ls å®ƒä¼šæ˜¾ç¤ºå‡ºæœ‰å“ªäº›å¯ç”¨çš„é•œåƒæº æˆ‘ä»¬ä¸€èˆ¬é€‰æ‹© taobao æˆ–è€… cnpm é•œåƒæºï¼Œé€šè¿‡ nrm use é•œåƒæº çš„æ–¹å¼é€‰æ‹©é•œåƒæº nrm use taobao è¿™é‡Œè®²è¿°æˆ‘é‡åˆ°çš„ä¸€ä¸ªå‘ï¼Œæˆ‘ä¹‹å‰æ˜¯ä¸‹è½½å¥½ nrm çš„ï¼Œä¸ºäº†æ¼”ç¤ºæˆ‘æŠŠä¹‹å‰ä¸‹è½½å¥½çš„ nrm å¸è½½æ‰ï¼Œç„¶åé‡æ–°è£…äº†ä¸€éï¼Œè£…äº†ä¸€éä¹‹åå‘ç° nrm ä¸å¥½ä½¿äº†ï¼Œå¼€å§‹æŠ¥é”™ å’±ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ï¼Œé”™è¯¯æç¤ºä¹Ÿçœ‹ä¸æ‡‚ï¼Œå°±å»ä¸Šç½‘æœï¼Œè¯´è¦æ”¹å˜ cli.js(C:\\Users\\username\\AppData\\Roaming\\npm\\node_modules\\nrm\\cli.js) çš„ç¬¬ 17 è¡Œ ä¸Šé¢çš„ä¸€è¡Œæ˜¯åŸæ¥ç¬¬ 17 è¡Œçš„å†…å®¹ï¼Œåé¢ä¸€è¡Œæ˜¯ä¿®æ”¹åçš„å†…å®¹ï¼Œè´´åœ¨ä¸‹é¢ const NRMRC = path.join(process.env[(process.platform == 'win32') ? 'USERPROFILE' : 'HOME'], '.nrmrc'); å¦‚æœä½ ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•æ”¹å§ï¼Œäº²æµ‹æœ‰æ•ˆã€‚ æœ¬åœ°å®‰è£…é€šè¿‡ä¸Šé¢çš„åˆ†ç±»æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°å®‰è£…ä¹Ÿåˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç§æ˜¯å¼€å‘ä¾èµ–ï¼Œæ„æ€å°±æ˜¯ä»…ä»…åœ¨å¼€å‘çš„æ—¶å€™æ‰ä¾èµ–çš„åŒ…ï¼Œä¸Šçº¿ä¹‹åè¿™ä¸ªåŒ…å°±ä¸éœ€è¦äº†ã€‚ä¾‹å¦‚å‹ç¼©æ–‡ä»¶ï¼Œè¿™ä¸ªåŒ…åœ¨ç¼–è¯‘çš„æ—¶å€™éœ€è¦ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ªå‹ç¼©å¥½çš„æ–‡ä»¶ï¼Œå°±ä¸éœ€è¦å‹ç¼©æ–‡ä»¶äº†ï¼Œæ‰€ä»¥è¿™ä¸ªå‹ç¼©æ–‡ä»¶çš„åŒ…åªåœ¨å¼€å‘(ç¼–è¯‘)æ—¶éœ€è¦ã€‚å¦ä¸€ç§æœ¬åœ°ä¾èµ–çš„åŒ…æ˜¯åªåœ¨æœ¬åœ°å¼€å‘æ—¶ä»¥åŠä¸Šçº¿åéƒ½éœ€è¦ä¾èµ–çš„åŒ…ï¼Œæ¯”å¦‚åœ¨ç¨‹åºä¸­ä¾èµ–çš„ä¸€äº›åº“ã€‚ å½“æˆ‘ä»¬ä¸‹è½½å¼€å‘æ—¶ä¾èµ–çš„åŒ…æ—¶ï¼Œéœ€è¦ä¼ å…¥ --save-dev æˆ–è€… -D å‚æ•°ï¼Œå½“æˆ‘ä»¬ä¸‹è½½æœ¬åœ°ä¾èµ–çš„åŒ…æ—¶ï¼Œä¼ å…¥ --save æˆ–è€… -S å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ ï¼Œä¸ä¼ çš„æƒ…å†µä¸‹é»˜è®¤æ˜¯æœ¬åœ°ä¾èµ–ã€‚ æˆ‘ä»¬éšä¾¿ä¸‹è½½ä¸¤ä¸ªåŒ… æˆ‘ä»¬å†æŸ¥çœ‹ package.json æ–‡ä»¶ &#123; \"name\": \"demo\", \"version\": \"1.0.0\", \"description\": \"Node Demo\", \"main\": \"index.js\", \"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\" &#125;, \"author\": \"XT\", \"license\": \"MIT\", \"dependencies\": &#123; \"webpack\": \"^5.21.1\" &#125;, \"devDependencies\": &#123; \"ora\": \"^5.3.0\" &#125;&#125; å‘ç°å¤šäº† dependencies ä»¥åŠ devDependencies ä¸¤ä¸ªå±æ€§ï¼Œdependencies ä¸­çš„å±æ€§æ˜¯æœ¬åœ°ä¾èµ–çš„åŒ…ï¼Œä»¥åŠå¯¹äºçš„ç‰ˆæœ¬å·ï¼Œè€Œ devDependencies ä¸­çš„å±æ€§æ˜¯å¼€å‘æ—¶ä¾èµ–çš„åŒ…ï¼Œä»¥åŠå¯¹åº”çš„ç‰ˆæœ¬å·ã€‚ ç»†å¿ƒçš„è¯ï¼Œè¿˜ä¼šå‘ç°å¤šäº†ä¸€ä¸ª package-lock.json æ–‡ä»¶ï¼Œé‡Œé¢ä¸ä»…ç»™å®šäº†å½“å‰é¡¹ç›®çš„ä¾èµ–ï¼Œä¾‹å¦‚ä¸Šé¢å®‰è£…çš„ webpack ä»¥åŠ oraï¼Œè¿˜ç»™å®šäº†ä¾èµ–çš„ä¾èµ–ä»¥åŠå®ƒä»¬çš„ç‰ˆæœ¬å·ï¼Œå°±æ˜¯ webpack ä»¥åŠ ora å®ƒä»¬æ‰€ä¾èµ–çš„åŒ…ã€‚ æ‰€ä»¥ä¸ºä»€ä¹ˆéœ€è¦ package-lock.json æ–‡ä»¶? è¦æ˜ç™½ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ–‡ä»¶ï¼Œå°±éœ€è¦æ˜ç™½å®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸ºäº†é”å®šç‰ˆæœ¬å·çš„ï¼Œä¾‹å¦‚ä¸Šé¢æˆ‘ä»¬å®‰è£… webpack å¯¹äºçš„ç‰ˆæœ¬å·ä¸º ^5.21.1ï¼Œå…¶ä¸­ ^ è¡¨ç¤ºå‘åå…¼å®¹ï¼Œæ‰€ä»¥å¦‚æœæ²¡æœ‰ package-lock.jsonï¼Œå®é™…å®‰è£…çš„ç‰ˆæœ¬å·å¯èƒ½æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œæ¯” 5.21.1 çš„ç‰ˆæœ¬è¦é«˜ï¼Œè¿™å°±å¯èƒ½ä¼šå› ä¸ºç‰ˆæœ¬çš„ä¸ä¸€è‡´å¯¼è‡´å„ç§é—®é¢˜(æˆ‘é‡åˆ°è¿‡å¾ˆå¤šæ¬¡)ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ª package-lock.json æ¥è®°å½•å…·ä½“çš„ç‰ˆæœ¬å·ã€‚ è¿™æ—¶æˆ‘ä»¬ç”šè‡³å¯ä»¥å°† node_modules è¿™ä¸ªæ–‡ä»¶å¤¹ç»™åˆ æ‰ï¼Œç„¶åè¿è¡Œ npm install å³å¯å°†æ‰€ä¾èµ–çš„åŒ…ç»™å®‰è£…å›æ¥ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä» Github ä¸Šä¸‹è½½é¡¹ç›®æ—¶ï¼Œä¼šå‘ç°æ²¡æœ‰ node_modules æ–‡ä»¶å¤¹ï¼Œå®ƒè¦ä½ åœ¨æœ¬åœ°å…ˆè¿è¡Œ npm install å‘½ä»¤ï¼Œå°† package.json ä¸­æè¿°æ‰€ä¾èµ–çš„åŒ…ä¸‹è½½ä¸‹æ¥ï¼Œç„¶ååœ¨å¯åŠ¨é¡¹ç›®ã€‚ npm install æ˜¯æ ¹æ® package.json æ–‡ä»¶è¿˜æ˜¯ package-lock.json æ–‡ä»¶è¿›è¡Œå®‰è£…åŒ…çš„å‘¢? è¿™ä¸ªé—®é¢˜ä½ åœ¨ç½‘ä¸Šæœå¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„ç»“è®ºï¼Œè¿™æ˜¯å› ä¸ºå®‰è£…ç­–ç•¥æœ‰è¿‡ä¸‰æ¬¡è°ƒæ•´ï¼š npm 5.0.x ç‰ˆæœ¬ï¼Œnpm install æ ¹æ® package-lock.json æ–‡ä»¶ä¸‹è½½ ç„¶åè¢«æ§è¯‰ä¸ºä»€ä¹ˆæ”¹äº† package.json æ–‡ä»¶ï¼Œä¸ºå•¥ä¸ç»™æˆ‘å‡çº§åŒ… npm 5.1.0 ç‰ˆæœ¬åï¼Œå¿½ç•¥ package-lock.json æ–‡ä»¶ï¼Œåªæ ¹æ® package.json æ–‡ä»¶ä¸‹è½½ é‚£ package-lock.json æ–‡ä»¶æœ‰ä»€ä¹ˆç”¨ npm 5.4.2 ç‰ˆæœ¬å å¦‚æœ package-lock.json ä¸ package.json æè¿°çš„ç‰ˆæœ¬å·ä¸åŒ(ä¸ºä»€ä¹ˆä¼šä¸åŒï¼Œå› ä¸ºæ‰‹åŠ¨æ”¹äº† package.json æ–‡ä»¶)ï¼Œé‚£ä¹ˆæ ¹æ® package.json ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼Œå¹¶ä¸”æ›´æ–° package-lock.json æ–‡ä»¶ å¦‚æœç›¸åŒï¼Œé‚£ä¹ˆæ ¹æ® package-lock.json è¿›è¡Œä¸‹è½½ï¼Œä¸å¿…ç†ä¼š package.json ä¸­ä¾èµ–çš„åŒ…æ˜¯å¦æœ‰æ›´æ–° ä¸ npm install ç›¸å¯¹çš„æ˜¯ npm uninstall å‘½ä»¤ï¼Œæ˜¯ç”¨æ¥å¸è½½åŒ…çš„ï¼Œä¾‹å¦‚ npm uninstall webpack --save npm scriptsåœ¨ package.json ä¸­æœ‰ä¸€ä¸ª scripts å­—æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„æ¯ä¸€ä¸ªå±æ€§éƒ½å¯¹åº”ä¸€ä¸ªè„šæœ¬ &#123; // ... \"scripts\": &#123; \"build\": \"node build.js\" &#125;&#125; å½“æˆ‘ä»¬åœ¨å½“å‰é¡¹ç›®çš„ä¸‹è¾“å…¥ npm run build å°±ç›¸å½“äºè¿è¡Œäº† node build.js è¿™äº›å®šä¹‰åœ¨ package.json é‡Œé¢çš„è„šæœ¬ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º npm scriptsã€‚ ä½¿ç”¨ npm scripts æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š é¡¹ç›®ä¸­çš„è„šæœ¬é›†ä¸­æ”¾ç½®åœ¨ä¸€å¤„ ä¸åŒçš„é¡¹ç›®å¯èƒ½æœ‰ä¸åŒçš„æ„å»ºå‘½ä»¤ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ npm scripts å‘å¤–æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œå¦‚ npm run build æ·±å…¥æ¨¡å—å¯¼å…¥è·¯å¾„å½“æˆ‘ä»¬å¯¼å…¥å…¶ä»–æ¨¡å—æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ¨¡å—çš„å…·ä½“è·¯å¾„ï¼Œä¾‹å¦‚ ./a.jsï¼Œé€šè¿‡ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„å‡å¯ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šè·¯å¾„ï¼Œå¦‚ require(&#39;a&#39;)ï¼Œä¼šä»¥ä½•ç§æ–¹å¼å»æœå¯»è¯¥åŒ…ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ module.paths è¿™ä¸ªå±æ€§æŸ¥çœ‹æœç´¢çš„è·¯å¾„ // D:\\Desktop\\node-demo\\a.jsconsole.log(module.paths); è¾“å‡ºä¸º [ 'd:\\\\Desktop\\\\node-demo\\\\node_modules', 'd:\\\\Desktop\\\\node_modules', 'd:\\\\node_modules'] å¯è§å®ƒä¼šå…ˆæœç´¢æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹çš„ node_modules æ–‡ä»¶å¤¹ï¼Œå¦‚æœæœç´¢ä¸åˆ°åˆ™æœç´¢ä¸Šçº§ç›®å½•çš„ node_modules æ–‡ä»¶å¤¹ï¼Œç›´è‡³æ ¹ç›®å½•çš„ node_modules æ–‡ä»¶å¤¹ï¼Œå¦‚æœåœ¨è¿™äº›è·¯å¾„éƒ½æ²¡æœ‰æ‰¾åˆ°æŒ‡å®šçš„åŒ…ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ ç¼“å­˜åœ¨å¯¼å…¥éƒ¨åˆ†æˆ‘ä»¬è¯´è¿‡ï¼Œå½“æˆ‘ä»¬å¯¼å…¥ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œé¦–å…ˆä¼šæ‰§è¡Œè¿™ä¸ªæ¨¡å—ï¼Œåœ¨å®é™…çš„é¡¹ç›®ä¸­è‚¯å®šä¼šæœ‰å¤šä¸ªæ¨¡å—ä¾èµ–äºä¸€ä¸ªæ¨¡å—çš„æƒ…å½¢ï¼Œè¿™æ˜¯ä¸æ˜¯è¯´æ¯æ¬¡å¯¼å…¥è¿™ä¸ªæ¨¡å—æ—¶ï¼Œè¿™ä¸ªæ¨¡å—éƒ½ä¼šè¢«æ‰§è¡Œä¸€æ¬¡? æ˜æ˜¾è¿™æ ·ä¸å¯¹ï¼Œæ‰€ä»¥å…¶å®è¿™ä¸ªæ¨¡å—åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åå®ƒçš„ module.exports å±æ€§å°±ä¼šè¢«ç¼“å­˜ï¼Œå¦‚æœç¬¬äºŒæ¬¡ã€ç¬¬ä¸‰æ¬¡å¯¼å…¥è¿™ä¸ªæ¨¡å—æ—¶ï¼Œç›´æ¥å°†ç¼“å­˜çš„ module.exports å±æ€§è¿”å›å³å¯ï¼Œä¸å¿…å†æ¬¡æ‰§è¡Œä¸€æ¬¡è¿™ä¸ªæ¨¡å—ã€‚ é€šè¿‡ require.cache è¿™ä¸ªå±æ€§å¯ä»¥çŸ¥é“æœ‰å“ªäº› module å¯¹è±¡è¢«ç¼“å­˜èµ·æ¥äº†ï¼Œrequire.cache æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶é”®å€¼æ˜¯æ¨¡å—çš„ç»å¯¹åœ°å€ï¼Œå€¼ä¸º module å¯¹è±¡ï¼Œåœ¨æˆ‘ä»¬ require æ¨¡å—çš„æ—¶å€™ï¼Œå¦‚æœåœ¨ require.cache å¯¹è±¡å‘ç°è¿™ä¸ªæ¨¡å—å·²ç»è¢«åŠ è½½è¿‡ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›è¿™ä¸ªæ¨¡å—å³å¯ï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œè¿™ä¸ªæ¨¡å—ã€‚ ä¸»ç¨‹åºä¸€ä¸ªæ¨¡å—è¢«æ‰§è¡Œæœ‰ä¸¤ç§æƒ…å†µï¼š é€šè¿‡ node å‘½ä»¤ç›´æ¥æ‰§è¡Œè¯¥æ¨¡å— è¢«å…¶ä»–æ¨¡å—å¯¼å…¥ é€šè¿‡ node å‘½ä»¤æ‰§è¡Œçš„æ¨¡å—æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸»æ¨¡å—ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›æ ¹æ®æ¨¡å—æ˜¯å¦æ˜¯ä¸»æ¨¡å—æ¥è¡¨ç°ä¸åŒçš„è¡Œä¸ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥åˆ†è¾¨è¯¥æ¨¡å—æ˜¯ä¸æ˜¯ä¸»æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ require.main å±æ€§æ¥åˆ¤æ–­ä¸€ä¸ªæ¨¡å—æ˜¯ä¸æ˜¯ä¸»æ¨¡å—ï¼Œå¦‚æœ require.main çš„å€¼ä¸å½“å‰æ¨¡å—çš„ module å¯¹è±¡ç›¸åŒï¼Œå°±è¯´æ˜å½“å‰æ¨¡å—æ—¶ä¸»æ¨¡å— if (require.main === module) &#123; console.log(\"ä¸»æ¨¡å—\");&#125; else &#123; console.log(\"éä¸»æ¨¡å—\");&#125; å¾ªç¯å¼•ç”¨æœ€åæˆ‘ä»¬è¦æ¢è®¨ä¸€ä¸‹ï¼ŒNode.js å¯¹æ¨¡å—çš„å¾ªç¯å¼•ç”¨å¦‚ä½•è§£å†³ï¼Œæ‰€è°“çš„å¾ªç¯å¼•ç”¨å°±æ˜¯æŒ‡äºŒè€…äº’ç›¸å¼•ç”¨ // a.jsrequire('./b.js')//b.jsrequire(\"./a.js\") å¦‚ä¸Š a.js ä¸ b.js äº’ç›¸å¼•ç”¨ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¾ªç¯å¼•ç”¨ï¼Œé‚£è¿™æ ·ä¼šä¸ä¼šå½¢æˆæ­»å¾ªç¯ï¼Œç¨‹åºå¦‚ä½•èƒ½æ‰§è¡Œä¸‹å»ã€‚ è§£é‡Šè¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œåªéœ€è¦ç‰¢ç‰¢çš„æŠ“ä½ç¼“å­˜å³å¯ï¼Œå› ä¸ºæœ‰ç¼“å­˜çš„å­˜åœ¨ï¼Œå¹¶ä¸ä¼šæ— é™çš„å»æ‰§è¡Œæ–‡ä»¶å¯¼å…¥ï¼Œè€Œæ˜¯ç›´æ¥å»ç¼“å­˜ä¸­çš„å€¼ã€‚å‡è®¾æœ‰å¦‚ä¸‹çš„ç¨‹åº // a.jsexports.done = false;const b = require('./b.js');console.log(\"b.done: \", b.done); // trueexports.done = true;// b.jsexports.done = false;const a = require(\"./a.js\");console.log(\"a.done: \", a.done); // falseexports.done = true;// index.jsconst a = require(\"./a.js\");const b = require(\"./b.js\");console.log(\"a.done: \", a.done); // trueconsole.log(\"b.done: \", b.done); // true æˆ‘ä»¬æ‰§è¡Œ index.jsï¼Œæ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š æ‰§è¡Œ index.jsï¼Œå¯¼å…¥ a.js æ‰§è¡Œ a.jsï¼Œå¹¶ç¼“å­˜ a.js çš„ module.exports è®¾ç½® exports.done ä¸º false å¯¼å…¥ b.js æ‰§è¡Œ b.jsï¼Œå¹¶ç¼“å­˜ b.js æ¨¡å— åœ¨ b.js ä¸­å¯¼å…¥ a.jsï¼Œæ­¤æ—¶å› ä¸º a.js è¿™ä¸ªæ¨¡å—å·²ç»è¢«ç¼“å­˜ï¼Œæ‰€ä»¥å–ç¼“å­˜å³å¯ å› ä¸º a.js æ¨¡å—æ­¤æ—¶çš„ done å±æ€§ä¸º fasleï¼Œæ‰€ä»¥æ‰“å°çš„ç»“æœä¸º false å›åˆ° a.jsï¼Œå–åˆ° b.js æ¨¡å—å¯¼å‡ºçš„module.exportsï¼Œè¿™ä¸ªå¯¹è±¡çš„ done å±æ€§ä¸º trueï¼Œå› æ­¤æ‰“å°ç»“æœä¸º true å›åˆ° index.jsï¼Œå¯¼å…¥ b.js æ¨¡å—ï¼Œè¯¥æ¨¡å—å·²ç»è¢«ç¼“å­˜ï¼Œç›´æ¥å–ç¼“å­˜ç»“æœ æ­¤æ—¶ a.js ä¸ b.js ä¸­çš„ exports.done å±æ€§å‡ä¸º trueï¼Œæ‰“å°ç»“æœå‡ä¸ºtrue å‚è€ƒé“¾æ¥ Node.js ç©¶ç«Ÿæ˜¯ä»€ä¹ˆ Node.js çš„æ¨¡å—ç³»ç»Ÿ Node.js ä¸­çš„åŒ…å’Œæ¨¡å— npm install åˆ°åº•åšäº†ä»€ä¹ˆ é€šè¿‡ npm åˆ¶ä½œå‘½ä»¤è¡Œå·¥å…·çš„åŸç† nrm æŠ¥é”™ [ERR_INVALID_ARG_TYPE] è§£å†³æ–¹æ³• npm install ç”Ÿæˆçš„ package-lock.json æ˜¯ä»€ä¹ˆæ–‡ä»¶? æœ‰ä»€ä¹ˆç”¨? npm scripts ä½¿ç”¨æŒ‡å—","tags":[{"name":"æ¨¡å—","slug":"æ¨¡å—","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%A8%A1%E5%9D%97/"},{"name":"npm","slug":"npm","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/npm/"},{"name":"å¾ªç¯å¼•ç”¨","slug":"å¾ªç¯å¼•ç”¨","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8/"}]},{"title":"ES6ï¼šSymbol å’Œ Symbol å±æ€§","date":"2021-02-02T09:58:00.000Z","path":"/ES6ï¼šSymbol å’Œ Symbol å±æ€§/","text":"åœ¨ ES6 ä¸­å¼•å…¥ä¸€ç§æ–°çš„åŸå§‹ç±»å‹ï¼Œé‚£å°±æ˜¯ Symbol ã€‚Symbol ç±»å‹çš„å€¼å”¯ä¸€çš„ï¼Œæ¯ä¸ªè¢«åˆ›å»ºå‡ºæ¥çš„ Symbol å˜é‡éƒ½æ˜¯ä¸åŒçš„ï¼Œè¿™æ˜¯ Symbol è¿™ç§æ•°æ®ç±»å‹æœ€å¤§çš„ç‰¹ç‚¹ã€‚ åˆ›å»ºSymbol ä¸èƒ½é€šè¿‡å­—é¢é‡æ¥è¿›è¡Œåˆ›å»ºï¼Œåˆ›å»º Symbol å˜é‡éœ€è¦é€šè¿‡ Symbol() æ¥åˆ›å»º let x = Symbol();console.log(typeof x); // symbol let x = Symbol();let y = Symbol();console.log(x == y); // false Symbol ç±»å‹çš„å˜é‡å¯ä»¥ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œå› ä¸ºæ¯ä¸€ä¸ª Symbol å˜é‡æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°å±æ€§è¢«åˆ«äººè¦†ç›–çš„é—®é¢˜ï¼Œä»¥åŠå¯ä»¥è®¾ç½®ä¸ºç§æœ‰å±æ€§ï¼Œåˆ«äººæ— æ³•è®¿é—® let x = Symbol()let person=&#123; [x]: 'Alice'&#125;console.log(person[x]); // Alice Symbol è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºè¯¥ Symbol å˜é‡çš„æè¿°ï¼Œè¯¥å­—ç¬¦ä¸²çº¯ç²¹æ˜¯ä¸ºäº†è°ƒè¯•æ–¹ä¾¿è€Œè®¾ç½®çš„ï¼Œæ²¡æœ‰ç‰¹æ®Šçš„åŠŸèƒ½ï¼Œä¸¤ä¸ª Symbol ç±»å‹çš„å˜é‡çš„æè¿°ç¬¦ç›¸åŒä¸ä»£è¡¨å®ƒä»¬æ˜¯ç›¸åŒï¼Œæ¯ä¸€ä¸ªç”± Symbol() åˆ›å»ºçš„å˜é‡éƒ½æ˜¯ä¸åŒçš„ã€‚ let name = Symbol(\"Alice\");let alice = Symbol(\"Alice\");console.log(name == alice); // false ä½¿ç”¨Symbol ç±»å‹çš„å˜é‡å¯ä»¥ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œä¸ä»…å¯ä»¥åœ¨å¯¹è±¡çš„å­—é¢é‡ä¸­é€šè¿‡è®¡ç®—å±æ€§è¿›è¡Œè®¾ç½®å±æ€§ï¼Œè¿˜å¯ä»¥é€šè¿‡ Object.defineProperty å’Œ Object.defineProperties å¯¹å¯¹è±¡è¿›è¡Œå®šä¹‰ let first = Symbol(\"first\");let alice = &#123; [first]: 'Alice'&#125;Object.defineProperty(alice, first, &#123; writable: false&#125;)let last = Symbol(\"last\")Object.defineProperties(alice, &#123; [last]: &#123; value: 'Lee', writable: false &#125;&#125;)console.log(alice[first]);console.log(alice[last]); å…±äº«æœ‰çš„æ—¶å€™ä»£ç ä¸­éœ€è¦å…±äº«ä¸€ä¸ª Symbolï¼ŒES6 æä¾›äº†ä¸€ä¸ªå…¨å±€çš„ Symbol ç®¡ç†æœºæ„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è®¿é—®å®ƒã€‚æˆ‘ä»¬æ˜¯é€šè¿‡ Symbol.for æ–¹æ³•æ¥è®¿é—®è¿™ä¸ªå…¨å±€æœºæ„çš„ï¼ŒSymbol.for æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œæ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²å‚æ•°åœ¨å…¨å±€æœºæ„ä¸­æŸ¥æ‰¾å¯¹åº”çš„ Symbolï¼Œå¦‚æœæ‰¾åˆ°äº†å°±è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åœ¨å…¨å±€æœºæ„ä¸­æ–°å»ºä¸€ä¸ª Symbol å¹¶è¿”å›ã€‚ // æ­¤æ—¶æ ¹æ®å­—ç¬¦ä¸² \"id\" æŸ¥ä¸åˆ° Symbol// ä¼šæ–°å»ºä¸€ä¸ª Symbol å¹¶è¿”å›let id = Symbol.for(\"id\");console.log(typeof id); // symbol// æ­¤æ—¶å¯æ ¹æ® \"id\" æŸ¥æ‰¾åˆ° Symbolï¼Œè¿”å›// è¿”å›çš„ Symbol ä¸ä¸Šæ¬¡æ ¹æ® \"id\" åˆ›å»ºçš„ Symbol æ˜¯åŒä¸€ä¸ª Symbollet id2 = Symbol.for(\"id\");console.log(id2 == id); // true ä¸ Symbol.for æ–¹æ³•å‘å¯¹åº”çš„æ˜¯ Object.keyforï¼Œå®ƒæ˜¯æ ¹æ®æ¥æ”¶çš„ Symbol æ¥è·å¾—åœ¨å…¨å±€æœºæ„ä¸­å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœå…¨å±€æœºæ„ä¸­æ²¡æœ‰è¯¥ Symbolï¼Œåˆ™è¿”å› undefined let uid = Symbol.for(\"uid\");console.log(Symbol.keyFor(uid)); // \"uid\"let uid2 = Symbol.for(\"uid\");console.log(Symbol.keyFor(uid2)); // \"uid\"// ä¸æ˜¯é€šè¿‡ Symbol.for ä»å…¨å±€è·å¾—çš„ Symbollet uid3 = Symbol(\"uid\");console.log(Symbol.keyFor(uid3)); // undefined Symbol ç±»å‹ä¸èƒ½è½¬ä¸ºå…¶ä»–åŸå§‹ç±»å‹ï¼Œå…¶ä»–åŸå§‹ç±»å‹ä¹Ÿä¸èƒ½è½¬ä¸º Symbol ç±»å‹ï¼Œå¼ºè¡Œè½¬æ¢ä¼šæŠ›å‡ºé”™è¯¯ã€‚ è·å– Symbol å±æ€§Symbol å˜é‡å¯ä»¥ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œä½†æ˜¯å½“æˆ‘ä»¬é€šè¿‡ forâ€¦in ä»¥åŠ getOwnPropertyNames éƒ½ä¸èƒ½è·å¾— Symbol å±æ€§ let age = Symbol(\"age\");let person = &#123; name: \"Alice\", [age]: 28,&#125;for(let key in person) &#123; console.log(key); // name&#125;console.log(Object.getOwnPropertyNames(person)); // [ 'name' ] è¦è·å¾— Symbol ç±»çš„å±æ€§ï¼Œè¦é€šè¿‡ Object.getOwnPropertySymbols æ–¹æ³• console.log(Object.getOwnPropertySymbols(person)); // [ Symbol(age) ] é€šè¿‡ Symbol æš´éœ²å†…éƒ¨æ“ä½œåœ¨ä»¥å¾€ä¸€äº›å†…éƒ¨æ“ä½œæˆ‘ä»¬æ˜¯æ›´æ”¹ä¸äº†çš„ï¼Œä¾‹å¦‚å¯¹äº instanceof è¿ç®—ç¬¦ï¼Œæˆ‘ä»¬æ— æ³•æ”¹å˜å®ƒçš„è¡Œä¸º(è™½ç„¶å¤§å¤šæ•°çš„æ—¶å€™ä¸éœ€è¦æ›´æ”¹ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™æœ‰è¿™ä¸ªéœ€æ±‚)ï¼Œç°åœ¨ES6 å°†ä¼šæš´éœ²è¿™äº›å†…éƒ¨æ“ä½œç»™æˆ‘ä»¬ï¼Œä½¿å¾—æˆ‘ä»¬æœ‰æœºä¼šæ”¹å˜ä¸€äº›é»˜è®¤çš„å†…éƒ¨æ“ä½œã€‚ æˆ‘ä»¬æ”¹å˜å†…éƒ¨æ“ä½œæ˜¯é€šè¿‡æ”¹å˜å¯¹è±¡çš„ä¸€äº› Symbol å±æ€§æ¥å†³å®šçš„ï¼Œä¾‹å¦‚æ”¹å˜å¯¹è±¡ Symbol.hasInstance å±æ€§å¯ä»¥æ”¹å˜ instanceof è¡Œä¸ºï¼Œä¸€äº›å¸¸è§çš„Symbol å¦‚ä¸‹ï¼š Symbol.hasInstance Symbol.isConcatSpreadable Symbol.iterator Symbol.match Symbol.replace Symbol.search Symbol.species Symbol.split Symbol.toPrimitive Symbol.toStringTag Symbol.unscopables Symbol.hasInsatnceinstanceof æ˜¯ç”¨æ¥åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªå‡½æ•°çš„å®ä¾‹ï¼Œå¦‚æœè¯¥å‡½æ•°åœ¨è¿™ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯è¿™ä¸ªå‡½æ•°çš„å®ä¾‹ã€‚åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ Symbol.hasInstance æ¥æ”¹å˜è¿™ä¸€é»˜è®¤è¡Œä¸º obj instanceof Array// ç›¸å½“äºArray[Symbol.hasInstance](obj) é€šè¿‡æ”¹å˜æ„é€ å‡½æ•°çš„ Symbol.hasInstance å±æ€§ï¼Œå³å¯æ”¹å˜è¿™ä¸€è¡Œä¸ºã€‚ å¿…é¡»é€šè¿‡ Object.defineProperty æ¥é‡å†™ Symbol.hasInstance function Person(name) &#123; this.name = name;&#125;let alice = new Person(\"alice\");// é»˜è®¤è¡Œä¸ºconsole.log(alice instanceof Person); // true// æ›´æ”¹ instanceof è¡Œä¸ºObject.defineProperty(Person, Symbol.hasInstance, &#123; value: function(instance) &#123; return false; &#125;&#125;)console.log(alice instanceof Person); // false Symbol.hasInstance æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯ instanceof å‰é¢çš„é‚£ä¸ªå¯¹è±¡ Symbol.isConcatSpreadableè¦æ˜ç™½è¿™ä¸ªå±æ€§çš„ä½œç”¨ï¼Œå¾—è¦äº†è§£æ•°ç»„çš„ concat æ–¹æ³•ï¼Œconcat æ–¹æ³•çš„ä½œç”¨æ˜¯å°†ä¸¤ä¸ªæ•°ç»„æ‹¼æ¥èµ·æ¥ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ let colors1 = [\"red\", \"green\"];let colors2 = colors1.concat([\"white\", \"blue\"]);console.log(colors2); // [ 'red', 'green', 'white', 'blue' ] concat é™¤äº†å¯ä»¥æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œè¿˜å¯ä»¥æ¥å—éæ•°ç»„å‚æ•° let colors1 = [\"red\", \"green\"];let colors2 = colors1.concat([\"white\", \"blue\"], \"pink\");console.log(colors2); // [ 'red', 'green', 'white', 'blue', 'pink' ] â€œpinkâ€ ä½œä¸ºéæ•°ç»„å‚æ•°ä¼ å…¥ï¼Œæˆä¸ºäº† colors2 æ•°ç»„çš„ç¬¬äº”ä¸ªå…ƒç´ ã€‚ä¸ºä»€ä¹ˆæ•°ç»„å‚æ•°è¢«åŒºåˆ«å¯¹å¾…(æ•°ç»„å‚æ•°ä¸ºä»€ä¹ˆä¸æ˜¯æ•´ä½“æ‹¼æ¥åˆ°æ•°ç»„ä¸­)ï¼Œå› ä¸º JavaScript è§„å®šäº†æ•°ç»„ä¼šè¢«è‡ªåŠ¨çš„è¢«åˆ†å‰²ä¸ºç‹¬ç«‹çš„å…ƒç´ ï¼Œè€Œå…¶ä»–å…ƒç´ ä¸ä¼šã€‚ å½“æˆ‘ä»¬å‘ concat ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œæ ¹æ®çš„å¯¹è±¡çš„ Symbol.isConcatSpreadable æ¥å†³å®šæ˜¯ä½œä¸ºæ•´ä½“æ‹¼æ¥ï¼Œè¿˜æ˜¯å°†å¯¹è±¡åˆ†å‰²ç„¶åæ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚èƒ½è¢«è‡ªåŠ¨åˆ†å‰²çš„å¯¹è±¡æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š æœ‰ length å±æ€§(æ ¹æ® length å±æ€§å†³å®šåˆ†å‰²ä¸ºå¤šå°‘ä¸ªå…ƒç´ ) Symbol.isConcatSpreadable çš„å€¼ä¸º true é‚£ä¹ˆå°±ä¼šå°†å¯¹è±¡ä¸­çš„æ•°å­—å±æ€§åˆ†å‰²ä¸ºä¸€é¡¹é¡¹æ·»åŠ è¿›æ•°ç»„ let colors1 = [\"red\", \"green\"];let obj = &#123; 0: \"blue\", 1: \"white\", length: 2, name: \"obj\", **[Symbol.isConcatSpreadable]: true**&#125;let colors2 = colors1.concat(obj);console.log(colors2); // [ 'red', 'green', 'blue', 'white' ] Symbol.match, Symbol.replace, Symbol.search, Symbol.splitstring ç±»å‹æœ‰å‡ ä¸ªæ¥å—æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³•ï¼š match(regex) replace(regex, replacement) search(regex) split(regex) ç°åœ¨ ES6 å…è®¸ä½¿ç”¨å¯¹è±¡æ¥ä»£æ›¿ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼(regex)ï¼Œä»è€Œå¯ä»¥è‡ªå®šä¹‰åŒ¹é…è¡Œä¸ºï¼Œä»¥æ­¤è¾¾åˆ°è‡ªå·±ä¸å¯å‘Šäººçš„ç›®çš„ã€‚ä»¥ match ä¸ºä¾‹ï¼Œå½“å­—ç¬¦ä¸²è°ƒç”¨ match æ–¹æ³•ä¼ å…¥ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨å¯¹è±¡çš„ Symbol.match æ–¹æ³•ï¼Œå¹¶å°†è‡ªå·±ä½œä¸ºå‚æ•°ä¼ å…¥ï¼ŒSymbol.match çš„è¿”å›ç»“æœä½œä¸ºå­—ç¬¦ä¸² match æ–¹æ³•çš„è¿”å›ç»“æœ let obj = &#123; [Symbol.match]: function(str) &#123; return str.length === 10 ? [\"Hello Alice!\"] : null &#125;&#125;let str = \"HelloWorld\".match(obj);console.log(str); // [ 'Hello Alice!' ] å…¶ä»–çš„ä¸‰ä¸ªæ–¹æ³• replace, search, split åˆ†åˆ«å¯¹åº”äº Symbol.replace, Symbol.search, Symbol.splitï¼Œå…¶ä½¿ç”¨æ–¹æ³•ä¸ match ç±»ä¼¼ã€‚ Symbol.toPrimitiveåœ¨å®é™…ä¸­æˆ‘ä»¬ç»å¸¸éœ€è¦å°†å¯¹è±¡è½¬åŒ–ä¸ºåŸå§‹ç±»å‹ï¼Œä¾‹å¦‚å¯¹ä¸€ä¸ªå¯¹è±¡åšåŠ æ³•ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å°†å¯¹è±¡è½¬åŒ–ä¸ºåŸå§‹ç±»å‹çš„æ­¥éª¤ã€‚æ ¹æ®å¯¹è±¡éœ€è¦è½¬åŒ–ä¸ºæ•°å­—è¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œæœ‰ä¸¤ç§ä¸åŒçš„è¡Œä¸ºã€‚å¦‚æœéœ€è¦è½¬åŒ–ä¸ºæ•°å­—ï¼Œéµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š è°ƒç”¨å¯¹è±¡çš„ valueOf æ–¹æ³•ï¼Œå¦‚æœè¿”å›çš„æ˜¯åŸå§‹ç±»å‹ï¼Œåˆ™è¿”å› å¦åˆ™ï¼Œè°ƒç”¨å¯¹è±¡çš„ toString æ–¹æ³•ï¼Œå¦‚æœè¿”å›çš„æ˜¯åŸå§‹ç±»å‹ï¼Œåˆ™è¿”å› å¦åˆ™ï¼ŒæŠ›å‡ºé”™è¯¯ å¦‚æœéœ€è¦è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„è¯ï¼Œéµå¾ªä»¥ä¸‹æ­¥éª¤ è°ƒç”¨å¯¹è±¡çš„ toString æ–¹æ³•ï¼Œå¦‚æœè¿”å›çš„æ˜¯åŸå§‹ç±»å‹ï¼Œåˆ™è¿”å› å¦åˆ™ï¼Œè°ƒç”¨å¯¹è±¡çš„ valueOf æ–¹æ³•ï¼Œå¦‚æœè¿”å›çš„æ˜¯åŸå§‹ç±»å‹ï¼Œåˆ™è¿”å› å¦åˆ™ï¼ŒæŠ›å‡ºé”™è¯¯ å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯é»˜è®¤è½¬åŒ–ä¸ºæ•°å­—ï¼Œå°‘æ•°å¯¹è±¡å¦‚ Date å¯¹è±¡é»˜è®¤è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚ æˆ‘ä»¬å‘ç°è½¬åŒ–ä¸ºæ•°å­—å’Œå­—ç¬¦ä¸²æ—¶ valueOf å’Œ toString æ–¹æ³•çš„è°ƒç”¨é¡ºåºä¸åŒï¼Œä¸ºäº†ç»Ÿä¸€å°†å¯¹è±¡è½¬åŒ–ä¸ºå¯¹è±¡çš„è¡Œä¸ºï¼Œå¯ä»¥é€šè¿‡ Symbol.toPrimitive è¦†ç›–é»˜è®¤çš„è½¬åŒ–é¡ºåºï¼Œä»¥ç»Ÿä¸€è½¬åŒ–è¡Œä¸ºã€‚ Symbol.toPrimitive æ–¹æ³•æ¥æ”¶ä¸€ä¸ª hint ä½œä¸ºå‚æ•°ï¼Œhint æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒåªæœ‰ä¸‰ç§å–å€¼ string number default æ ¹æ®å¯¹è±¡éœ€è¦è¢«è½¬åŒ–ä¸ºä»€ä¹ˆç±»å‹çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œhint çš„å–å€¼ä¸åŒï¼Œä¾‹å¦‚å½“å¯¹è±¡å¤„åœ¨éœ€è¦è½¬åŒ–ä¸ºæ•°å­—çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œhint çš„å€¼å°±æ˜¯ numberï¼Œéœ€è¦è½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œhint å°±æ˜¯ stringï¼Œå½“ä¸ç¡®å®šéœ€è¦è½¬åŒ–ä¸ºä»€ä¹ˆæ—¶(ä¾‹å¦‚åŠ æ³•è¿ç®—ï¼Œæ—¢å¯ä»¥ç”¨äºå­—ç¬¦ä¸²è¿æ¥ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ•°å­—ç›¸åŠ )ï¼Œhint çš„å€¼å°±æ˜¯ default let obj = &#123; [Symbol.toPrimitive]: function(hint) &#123; switch(hint) &#123; case 'number': return 10; case 'string': return \"hello\"; case 'default': return 'default'; default: throw new Error(); &#125; &#125;&#125;const print = console.log;print(1 * obj); // 10print(`$&#123;obj&#125;`); // helloprint(obj + \"\"); // default Symbol.toStringTagå½“æˆ‘ä»¬è°ƒç”¨è‡ªå·±åˆ›å»ºçš„å¯¹è±¡çš„ toString æ–¹æ³•æ—¶ï¼Œå¾—åˆ°çš„æ˜¯ [object Object] let Person = &#123; name: 'Alice'&#125;console.log(Person.toString()); // [object Object] å¦‚æœæˆ‘ä»¬å¸Œæœ›æ‰“å°å‡º [object Person]ï¼Œé‚£ä¹ˆå¯ä»¥å€ŸåŠ©äº Symbol.toStringTag let Person = &#123; name: 'Alice'&#125;Person[Symbol.toStringTag] = \"Person\"console.log(Person.toString()); // [object Person]","tags":[{"name":"Symbol","slug":"Symbol","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Symbol/"}]},{"title":"å›¾","date":"2021-01-29T18:37:00.000Z","path":"/å›¾/","text":"å›¾çš„è¡¨ç¤ºé¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹å›¾çš„æ•°æ®ç»“æ„é•¿ä»€ä¹ˆæ ·å­ ä¸€ä¸ªå›¾å®ƒç”±é¡¶ç‚¹ Vertex å’Œè¾¹ Edge ç»„æˆï¼Œä¸Šå›¾è“è‰²çš„èŠ‚ç‚¹è¡¨ç¤ºé¡¶ç‚¹ï¼Œè€ŒèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´çš„æœ‰æ¡çº¿è¿ç€ï¼Œè¿™å°±æ˜¯é¡¶ç‚¹ä¹‹é—´çš„è¾¹ã€‚ä¸ºäº†åœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºå›¾ï¼Œæˆ‘ä»¬ç»™å›¾çš„é¡¶ç‚¹ç¼–äº†å·ï¼Œä» $0$ å¼€å§‹ã€‚åœ¨å®é™…çš„æ¨¡å‹ä¸­ï¼Œé¡¶ç‚¹å¯èƒ½è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªåœ°é“ç«™ç‚¹ï¼Œç¤¾äº¤ç½‘ç»œä¸­çš„ä¸€ä¸ªäººï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å“ˆå¸Œè¡¨å°†ç¼–å·ä¸é¡¶ç‚¹å®é™…çš„æ„ä¹‰æ˜ å°„èµ·æ¥ï¼Œè¿›è€ŒæŠŠé¡¶ç‚¹çš„å…·ä½“æ„ä¹‰æŠ½è±¡ä¸ºç¼–å·æˆ–è€…ä¸‹æ ‡ï¼Œå½“å›¾çš„é¡¶ç‚¹ä»¥ç¼–å·è¡¨ç¤ºæ—¶ï¼Œå®ƒå°±ä¸å…·æœ‰å…·ä½“çš„æ„ä¹‰ï¼Œä»è€Œæˆ‘ä»¬å¯ä»¥ç ”ç©¶å›¾çš„ä¸€èˆ¬ç†è®ºï¼Œè€Œå½“æˆ‘ä»¬éœ€è¦ç»“è®ºçš„å…·ä½“æ„ä¹‰æ—¶ï¼Œå¯ä»¥é€šè¿‡å“ˆå¸Œè¡¨å°†ç¼–å·æ˜ å°„ä¸ºå…·ä½“çš„æ„ä¹‰ã€‚ å›¾çš„åˆ†ç±»æ ¹æ®è¾¹æ˜¯å¦æœ‰æ–¹å‘å¯ä»¥åˆ†ä¸ºæœ‰å‘å›¾å’Œæ— å‘å›¾ï¼Œæ ¹æ®è¾¹ä¸Šæœ‰å¦æœ‰æƒå€¼å¯ä»¥åˆ†ä¸ºæœ‰æƒå›¾å’Œæ— æƒå›¾ æœ‰å‘ æ— å‘ æœ‰æƒ æœ‰å‘æœ‰æƒå›¾ æ— å‘æœ‰æƒå›¾ æ— æƒ æœ‰å‘æ— æƒå›¾ æ— å‘æ— æƒå›¾ å›¾çš„åŸºæœ¬æ¦‚å¿µåœ¨è¿›å…¥æ­£é¢˜ä¹‹å‰ï¼Œç®€å•çš„ä»‹ç»ä¸€ä¸‹åœ¨åé¢ä¼šé‡åˆ°çš„å…³äºå›¾çš„åŸºæœ¬æ¦‚å¿µã€‚ è‡ªç¯è¾¹ï¼šå›¾ä¸­æœ‰ä¸€ä¸ªé¡¶ç‚¹æœ‰æ¡è¾¹æŒ‡å‘è‡ªå·± å¹³è¡Œè¾¹ï¼šä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æœ‰ä¸¤æ¡è¾¹ å¦‚æœä¸€å¹…å›¾æ—¢æ²¡æœ‰è‡ªç¯è¾¹ï¼Œä¹Ÿæ²¡æœ‰å¹³è¡Œè¾¹ï¼Œæˆ‘ä»¬å°±ç§°è¯¥å›¾ä¸ºç®€å•å›¾ã€‚æˆ‘ä»¬åªå¤„ç†ç®€å•å›¾ï¼Œå¦‚æœå›¾ä¸­æœ‰è‡ªç¯è¾¹æˆ–è€…å¹³è¡Œè¾¹ï¼Œæˆ‘ä»¬ä¼šå¿½ç•¥è¿™ç§è¾¹ï¼Œæˆ–è€…æŠ›å‡ºå¼‚å¸¸ã€‚ åœ¨ä¸€ä¸ªå›¾ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é¡¶ç‚¹éƒ½æ˜¯è”é€šçš„ï¼Œå¦‚ä¸‹ ä¾‹å¦‚é¡¶ç‚¹ 6-7 å’Œé¡¶ç‚¹ 0-5 ä¹‹é—´æ˜¯ä¸è”é€šçš„ï¼Œåƒä¸Šé¢è¿™æ ·çš„å›¾ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæœ‰ä¸¤ä¸ªè”é€šåˆ†é‡ï¼Œé¡¶ç‚¹ 0-5 å’Œé¡¶ç‚¹ 6-7 åˆ†åˆ«ä»£è¡¨ä¸€ä¸ªè”é€šåˆ†é‡ã€‚ å¦å¤–ï¼Œæ ¹æ®å›¾ä¸­æ˜¯å¦æœ‰ç¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å›¾åˆ†ä¸ºæœ‰ç¯å›¾å’Œæ— ç¯å›¾ æœ€åä»‹ç»ä¸€ä¸ªæœ‰å…³å›¾çš„æ¦‚å¿µï¼Œé‚£å°±æ˜¯åº¦(degree)ï¼Œå¯¹äºæ— å‘å›¾å’Œæœ‰å‘å›¾ï¼Œåº¦çš„å®šä¹‰æ˜¯ä¸åŒçš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»æ— å‘å›¾å…³äºåº¦çš„å®šä¹‰ï¼Œåº¦æŒ‡çš„æ˜¯æŸä¸ªé¡¶ç‚¹æœ‰å¤šå°‘ä¸ªé‚»è¾¹ï¼Œåº¦æ˜¯é¡¶ç‚¹çš„å±æ€§ã€‚æ¯”å¦‚å¯¹äºä¸‹å›¾ é¡¶ç‚¹ $0$ çš„åº¦ä¸º $2$ï¼Œå› ä¸ºé¡¶ç‚¹ $0$ æœ‰ä¸¤ä¸ªé‚»è¾¹ï¼ŒåŒç†ï¼Œé¡¶ç‚¹ $2$ çš„åº¦ä¸º $3$ï¼Œå› ä¸ºå®ƒæœ‰ä¸‰ä¸ªé‚»è¾¹ã€‚ å›¾çš„è¡¨ç¤ºæ‰€è°“å›¾çš„è¡¨ç¤ºï¼Œå°±æ˜¯æŒ‡å¦‚ä½•åœ¨è®¡ç®—æœºä¸­ä¿å­˜ä¸€ä¸ªå›¾çš„æ•°æ®ç»“æ„ å¦‚ä¸Šå›¾ï¼Œæ€ä¹ˆå°†å®ƒä¿å­˜åœ¨è®¡ç®—æœºä¸­ã€‚å¦‚æœå­¦ä¹ è¿‡å…¶ä»–æ•°æ®ç»“æ„çš„è¯ï¼Œå¦‚æ ˆï¼Œé˜Ÿåˆ—ï¼Œæ ‘ï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆè¡¨ç¤ºçš„å‘¢? å¯¹äºæ ˆå’Œé˜Ÿåˆ—è¿™ç§çº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨æ•°ç»„æˆ–è€…é“¾è¡¨æ¥è¿›è¡Œå­˜å‚¨ï¼Œè€Œå¯¹äºæ ‘è¿™ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨é“¾è¡¨è¿›è¡Œè¡¨ç¤ºï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å®ƒçš„å·¦å­©å­å’Œå³å­©å­ï¼Œå½“ç„¶å¯¹äºæŸäº›æ ‘ç»“æ„ï¼Œå¦‚å †ã€çº¿æ®µæ ‘ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„æ¥è¿›è¡Œè¡¨ç¤ºï¼Œå› ä¸ºè¿™ä¸¤ç§æ•°æ®ç»“æ„éƒ½æ˜¯æ»¡äºŒå‰æ ‘ï¼Œå®ƒä»¬çš„å­©å­èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹ä¹‹é—´å«æœ‰æŸç§å…³ç³»ï¼Œå¯ä»¥ååˆ†æ–¹ä¾¿çš„ä½¿ç”¨æ•°ç»„è¿›è¡Œè¡¨ç¤ºã€‚ é‚»æ¥çŸ©é˜µé¦–å…ˆæˆ‘ä»¬ä»‹ç»ä½¿ç”¨ä¸€ä¸ªçŸ©é˜µæ¥å­˜å‚¨å›¾ï¼Œå¦‚æœæ•´ä¸ªå›¾æœ‰ $V$ ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨ $V \\times V$ å¤§å°çš„çŸ©é˜µæ¥å­˜å‚¨å›¾ï¼Œå‡è®¾è¿™ä¸ªçŸ©é˜µè®°åš $A$ï¼Œå¦‚æœ $A[i][j] = 1$ï¼Œåˆ™è¯´æ˜é¡¶ç‚¹ $i$ ä¸é¡¶ç‚¹ $j$ ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œåä¹‹å¦‚æœ $A[i][j] = 0$ï¼Œåˆ™è¯´æ˜é¡¶ç‚¹ $i$ ä¸é¡¶ç‚¹ $j$ ä¹‹é—´ä¸å­˜åœ¨ä¸€æ¡è¾¹ å› ä¸ºä¸å­˜åœ¨è‡ªç¯è¾¹ï¼Œæ‰€ä»¥ $A[i][i]$ çš„å€¼ä¸€å®šä¸º $0$ï¼Œå³çŸ©é˜µå¯¹è§’çº¿ä¸Šçš„å€¼ä¸€å®šæ˜¯ $0$ã€‚ åœ¨æ„å»ºä¸€å¼ å›¾æ—¶ï¼Œæˆ‘ä»¬ä¼šè¯»å–ä¸€ä¸ª txt çš„æ–‡ä»¶ï¼Œæ ¹æ®è¿™ä¸ªæ–‡ä»¶æˆ‘ä»¬ä½¿ç”¨çŸ©é˜µæ¥å­˜å‚¨ä¸€å¼ å›¾ï¼Œä¾‹å¦‚ä¸Šå›¾æ‰€å¯¹åº”çš„ txt å†…å®¹å¦‚ä¸‹ 6 70 10 21 32 32 43 54 5 è¿™ä¸ª txt è¡¨ç¤ºä»€ä¹ˆæ„æ€å‘¢? ç¬¬ä¸€è¡Œçš„ä¸¤ä¸ªæ•°å­—è¡¨ç¤ºå›¾ä¸­çš„é¡¶ç‚¹æ•°å’Œè¾¹æ•°ï¼Œå¦‚ä¸Šå›¾æœ‰ $6$ ä¸ªé¡¶ç‚¹å’Œ $7$ æ¡è¾¹ï¼Œåé¢æ¯è¡Œçš„ä¸¤ä¸ªæ•°å­—è¡¨ç¤ºä¸¤ä¸ªé¡¶ç‚¹ï¼Œè¡¨ç¤ºè¿™ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œå¦‚ç¬¬äºŒè¡Œå°±è¡¨ç¤ºé¡¶ç‚¹ $0$ å’Œé¡¶ç‚¹ $1$ ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œå› ä¸ºæ€»å…±æœ‰ $7$ æ¡è¾¹ï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œååº”è¯¥æœ‰ $7$ è¡Œè¡¨ç¤ºæœ‰ $7$ æ¡è¾¹ã€‚ ä»£ç å¦‚ä¸‹ï¼š import java.io.File;import java.io.FileNotFoundException;import java.util.Scanner;public class AdjMatrix &#123; // å›¾çš„è¾¹æ•° private int E; // å›¾çš„é¡¶ç‚¹ä¸ªæ•° private int V; // è¡¨ç¤ºå›¾çš„çŸ©é˜µ private int[][] matrix; public AdjMatrix(String filename) &#123; // ä»æ–‡ä»¶ä¸­è¯»å–å›¾çš„æ•°æ® File file = new File(filename); Scanner scanner = null; try &#123; // ç¬¬ä¸€è¡Œæ˜¯é¡¶ç‚¹æ•°å’Œè¾¹æ•° scanner = new Scanner(file); this.V = scanner.nextInt(); matrix = new int[this.V][this.V]; this.E = scanner.nextInt(); for (int i = 0; i &lt; this.E; i++) &#123; // è¯»å–ä¸¤ä¸ªç›¸é‚»çš„é¡¶ç‚¹ int a = scanner.nextInt(); int b = scanner.nextInt(); // è®¾ç½®ä¸º 1 è¡¨ç¤ºç›¸é‚» this.matrix[a][b] = 1; this.matrix[b][a] = 1; &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; // å½“æ‰“å°å¯¹è±¡æ—¶ï¼Œå°†çŸ©é˜µæ‰“å°å‡ºæ¥ @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int i = 0; i &lt; this.V; i++) &#123; for (int j = 0; j &lt; this.V; j++) &#123; stringBuilder.append(String.format(\"%d \", this.matrix[i][j])); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125; public static void main(String[] args) &#123; AdjMatrix adjMatrix = new AdjMatrix(\"g.txt\"); System.out.println(adjMatrix); &#125;&#125; æ‰“å°ç»“æœä¸º V: 6, E: 70 1 1 0 0 0 1 0 0 1 0 0 1 0 0 1 1 0 0 1 1 0 0 1 0 0 1 0 0 1 0 0 0 1 1 0 AdjMatrix ç±»æœ‰ä¸‰ä¸ªå±æ€§ å±æ€§ å«ä¹‰ V è¡¨ç¤ºé¡¶ç‚¹æ•° E è¡¨ç¤ºè¾¹æ•° matrix è¡¨ç¤ºå›¾çš„çŸ©é˜µ ä½†æ˜¯ä¸Šé¢çš„ç¨‹åºè¿˜ä¸å¤Ÿå¥å£®ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¯¹ g.txt ä¸­è¯»åˆ°çš„æ•°å­—è¿›è¡Œæ ¡éªŒï¼Œä¾‹å¦‚è¯»åˆ°çš„é¡¶ç‚¹ä¸ªæ•°ä¸ºè´Ÿæ•°ï¼Œè¯»åˆ°çš„é¡¶ç‚¹ç¼–å·ä¸åˆç†ï¼Œä¾‹å¦‚æœ‰ $5$ ä¸ªé¡¶ç‚¹ï¼Œä½†æ˜¯å®ƒçš„ç¼–å·ä¸º $10$ã€‚å¦å¤–ï¼Œæˆ‘ä»¬åªå¤„ç†ç®€å•å›¾ï¼Œå¯¹äºè‡ªç¯è¾¹ä»¥åŠå¹³è¡Œè¾¹ä¹Ÿæ²¡æœ‰è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œæ”¹è¿› import java.io.File;import java.io.FileNotFoundException;import java.util.ArrayList;import java.util.Scanner;public class AdjMatrix &#123; private int E; private int V; private int[][] matrix; public AdjMatrix(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; scanner = new Scanner(file); // å¦‚æœè¯»å–åˆ°çš„ V å’Œ E å°äº 0ï¼Œé‚£ä¹ˆæŠ›å‡ºå¼‚å¸¸ this.V = scanner.nextInt(); if (this.V &lt; 0) &#123; throw new IllegalArgumentException(\"V Must Be Positive\"); &#125; matrix = new int[this.V][this.V]; this.E = scanner.nextInt(); if (this.E &lt; 0) &#123; throw new IllegalArgumentException(\"E Must Be Positive\"); &#125; for (int i = 0; i &lt; this.E; i++) &#123; // å¯¹è¯»å–åˆ°çš„é¡¶ç‚¹ç¼–å·è¿›è¡ŒéªŒè¯ï¼Œæ˜¯å¦åœ¨ [0, V) çš„èŒƒå›´ä¸­ int a = scanner.nextInt(); validateVertex(a); int b = scanner.nextInt(); validateVertex(b); // å¦‚æœå­˜åœ¨è‡ªç¯è¾¹ï¼ŒæŠ›å‡ºå¼‚å¸¸ if (a == b) &#123; throw new IllegalArgumentException(\"Self loop exists\"); &#125; // å¦‚æœå­˜åœ¨å¹³è¡Œè¾¹ï¼ŒæŠ›å‡ºå¼‚å¸¸ if (this.matrix[a][b] == 1) &#123; throw new IllegalArgumentException(\"Parallel edge exists\"); &#125; this.matrix[a][b] = 1; this.matrix[b][a] = 1; &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; // å¯¹é¡¶ç‚¹ç¼–å·è¿›è¡ŒéªŒè¯ï¼Œæ˜¯å¦åˆæ³• private void validateVertex(int v) &#123; if (v &lt; 0 || v &gt;= this.V) &#123; throw new IllegalArgumentException(\"Vertex \" + v + \" is invalid\"); &#125; &#125; // è¿”å›é¡¶ç‚¹æ•° public int V() &#123; return this.V; &#125; // è¿”å›è¾¹æ•° public int E() &#123; return this.E; &#125; // è¿”å›ä¸é¡¶ç‚¹ v ç›¸é‚»çš„æ‰€æœ‰é¡¶ç‚¹ public ArrayList&lt;Integer&gt; adj(int v) &#123; validateVertex(v); ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; this.V; i++) &#123; if (this.matrix[v][i] == 1) &#123; res.add(i); &#125; &#125; return res; &#125; // åˆ¤æ–­é¡¶ç‚¹ v å’Œ w æ˜¯å¦ç›¸é‚» public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return this.matrix[v][w] == 1; &#125; // è¿”å›é¡¶ç‚¹ v çš„åº¦ï¼Œå³ä¸é¡¶ç‚¹ v ç›¸é‚»çš„é¡¶ç‚¹çš„ä¸ªæ•° public int degree(int v) &#123; return adj(v).size(); &#125; // toString ä¸å˜ï¼ŒèŠ‚çœç¯‡å¹…ï¼Œçœç•¥&#125; åœ¨ä¸Šé¢æˆ‘ä»¬å¯¹è¯»å–åˆ°çš„æ•°å­—éƒ½è¿›è¡Œäº†æ£€æŸ¥ï¼Œä¿è¯äº†ä»£ç çš„å¥å£®æ€§ã€‚é™¤äº†å¢å¼ºäº†ä»£ç çš„å¥å£®æ€§ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜åœ¨ç±»ä¸­æ·»åŠ äº†äº”ä¸ªæ–¹æ³•ï¼Œå…·ä½“ä½œç”¨è§ä¸‹è¡¨ æ–¹æ³• ä½œç”¨ int V() è¿”å›å›¾çš„é¡¶ç‚¹æ•° int E() è¿”å›å›¾çš„è¾¹æ•° ArrayList adj(int v) è¿”å›ä¸é¡¶ç‚¹ v ç›¸é‚»çš„é¡¶ç‚¹ boolean hasEdge(int v, int w) åˆ¤æ–­ä¸¤é¡¶ç‚¹æ˜¯å¦ç›¸é‚» int degree(int v) è¿”å›é¡¶ç‚¹ v çš„åº¦ åœ¨æœ€åæˆ‘ä»¬åˆ†æä¸€ä¸‹ä½¿ç”¨é‚»æ¥çŸ©é˜µè¡¨ç¤ºçš„ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦ ç©ºé—´å¤æ‚åº¦ï¼š$O(V^2)$ æ—¶é—´å¤æ‚åº¦ï¼š å»ºå›¾ï¼š$O(E)$ è·å¾—ä¸é¡¶ç‚¹ $v$ ç›¸é‚»çš„é¡¶ç‚¹ï¼š$O(V)$ æŸ¥çœ‹ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ï¼š$O(1)$ å¯¹äºå»ºå›¾æ¥è¯´ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»æ‰«ææ‰€æœ‰çš„è¾¹æ‰èƒ½è·å¾—å¿…è¦çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å»ºå›¾çš„æ—¶é—´å¤æ‚åº¦æœ€å°‘ä¹Ÿæ˜¯ $O(E)$ï¼Œæ— æ³•å†ä¼˜åŒ–ï¼›è€ŒæŸ¥çœ‹ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ï¼Œæ— éœ€ä¼˜åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹ç©ºé—´å¤æ‚åº¦å’Œè·å¾—ä¸é¡¶ç‚¹ $v$ ç›¸é‚»çš„é¡¶ç‚¹çš„æ—¶é—´å¤æ‚åº¦èƒ½å¦è¿›è¡Œä¼˜åŒ–ã€‚ å› ä¸ºæˆ‘ä»¬å¹³å¸¸é‡åˆ°çš„å›¾éƒ½æ˜¯ç¨€ç–å›¾ï¼Œæ‰€è°“ç¨€ç–å›¾å°±æ˜¯ä¸€å¹…å›¾å®ƒçš„åº¦å¹³å‡å€¼å¯¹äºå›¾çš„èŠ‚ç‚¹æ•°ç›®æ¥è¯´å¾ˆå°ï¼Œè¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„é‚»æ¥çŸ©é˜µæ˜¯ä¸€ä¸ªç¨€ç–çŸ©é˜µï¼Œå³å¤§éƒ¨åˆ†çš„å…ƒç´ æ˜¯ $0$ã€‚ä¾‹å¦‚å¯¹äºä¸€ä¸ªç¤¾äº¤ç½‘ç»œï¼Œæœ‰ä¸€äº¿ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯å¯¹äºæ¯ä¸ªäººæ¥è¯´ï¼Œä»–è®¤è¯†çš„äººæœ€å¤šå‡ ç™¾ä¸ªï¼Œä¹Ÿå°±æ˜¯è¿™å¹…å›¾å¹³å‡çš„åº¦ä¸ºå‡ ç™¾ï¼Œç›¸å¯¹äºä¸€äº¿æ¥è¯´ååˆ†çš„å°ï¼Œæ‰€ä»¥ç¤¾äº¤ç½‘ç»œæ˜¯ä¸€ä¸ªç¨€ç–å›¾ã€‚ å»ºç«‹ä¸€ä¸ªå›¾ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸€å¹…å›¾çš„é¡¶ç‚¹ä¿¡æ¯ä»¥åŠè¾¹çš„ä¿¡æ¯å³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªéœ€è¦ $O(V + E)$ çš„ç©ºé—´å¤æ‚åº¦å°±å¯ä»¥è¡¨ç¤ºä¸€å¹…å›¾ï¼Œå¯¹äºç¨€ç–å›¾æ¥è¯´ï¼Œç”±äºå›¾çš„æ¯ä¸ªé¡¶ç‚¹åº¦çš„å¹³å‡å€¼è¿œè¿œå°äºèŠ‚ç‚¹æ•°ï¼Œè€Œ $E$ çš„å¤§å°ç­‰äºå¹³å‡åº¦çš„å€¼ä¹˜ä»¥èŠ‚ç‚¹æ•°ï¼Œå³$$E = degree * V$$ä»è€Œæœ‰$$degree \\ll V \\Rightarrow E \\ll V^2$$å¾—åˆ°$$O(V + E) \\ll O(V^2)$$æ‰€ä»¥ä½¿ç”¨é‚»æ¥çŸ©é˜µè¡¨ç¤ºå›¾ï¼Œå¯¹äºç¨€ç–çŸ©é˜µæ¥è¯´ï¼Œå…¶å®æµªè´¹äº†å¾ˆå¤šçš„ç©ºé—´ï¼Œä¸‹é¢å°†ä»‹ç»ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•è¡¨ç¤ºå›¾ï¼Œæ— è®ºæ˜¯å¯¹äºç¨€ç–å›¾è¿˜æ˜¯ç¨ å¯†å›¾ï¼Œéƒ½å¯ä»¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ é‚»æ¥è¡¨åœ¨è¿™ä¸ªå°èŠ‚ä¸­å°†è®²è§£ä½¿ç”¨é‚»æ¥è¡¨æ¥è¡¨ç¤ºçŸ©é˜µï¼Œæ‰€è°“çš„é‚»æ¥è¡¨ï¼Œæ˜¯æŒ‡å¯¹äºæ¯ä¸ªé¡¶ç‚¹æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªé“¾è¡¨æ¥è®°å½•ä¸å®ƒç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾ å›¾ä¸­è¡¨æ ¼ç¬¬ä¸€åˆ—è¡¨ç¤ºé¡¶ç‚¹ç¼–å·ï¼Œé¡¶ç‚¹ç¼–å·åçš„ä¸€è¡Œè¡¨ç¤ºä¸è¯¥é¡¶ç‚¹ç›¸é‚»çš„é¡¶ç‚¹ï¼Œä¾‹å¦‚å¯¹äºç¬¬ä¸€è¡Œï¼Œè¡¨ç¤ºä¸é¡¶ç‚¹ $0$ ç›¸é‚»çš„é¡¶ç‚¹æœ‰é¡¶ç‚¹ $1$ å’Œ $2$ã€‚ ç°åœ¨æˆ‘ä»¬å°±è¦ç¼–ç å®ç°ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„é€»è¾‘ä¸é‚»æ¥çŸ©é˜µæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å¾ˆå¤šçš„ä»£ç ä¸é‚»æ¥çŸ©é˜µè¡¨ç¤ºçš„æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡å› ä¸ºåº•å±‚ä¿å­˜å›¾ä½¿ç”¨çš„æ˜¯é“¾è¡¨ï¼Œæœ‰ä¸€äº›å†™æ³•çš„ä¸åŒï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­æˆ‘ä¹Ÿä¼šæ ‡å‡º import java.io.File;import java.io.FileNotFoundException;import java.util.LinkedList;import java.util.Scanner;public class AdjList &#123; private int E; private int V; // å¯¹æ¯ä¸€ä¸ªé¡¶ç‚¹ï¼Œä½¿ç”¨ä¸€ä¸ªé“¾è¡¨æ¥å­˜å‚¨ä¸å®ƒç›¸é‚»çš„é¡¶ç‚¹ private LinkedList&lt;Integer&gt;[] lists; public AdjList(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (this.V &lt; 0) &#123; throw new IllegalArgumentException(\"V Must Be Positive\"); &#125; // åˆå§‹åŒ–é“¾è¡¨ this.lists = new LinkedList[this.V]; for (int i = 0; i &lt; this.V; i++) &#123; this.lists[i] = new LinkedList&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (this.E &lt; 0) &#123; throw new IllegalArgumentException(\"E Must Be Positive\"); &#125; for (int i = 0; i &lt; this.E; i++) &#123; int a = scanner.nextInt(); validateVertex(a); int b = scanner.nextInt(); validateVertex(b); if (a == b) &#123; throw new IllegalArgumentException(\"Self loop exists\"); &#125; // å¹³è¡Œè¾¹çš„åˆ¤æ–­ if (lists[a].contains(b)) &#123; throw new IllegalArgumentException(\"Parallel edge exists\"); &#125; // å°†ç›¸é‚»é¡¶ç‚¹æ·»åŠ åˆ°è‡ªå·±çš„é“¾è¡¨ä¸­ this.lists[a].add(b); this.lists[b].add(a); &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; private void validateVertex(int v) &#123; if (v &lt; 0 || v &gt;= this.V) &#123; throw new IllegalArgumentException(\"Vertex \" + v + \" is invalid\"); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public LinkedList&lt;Integer&gt; adj(int v) &#123; validateVertex(v); // ç›´æ¥è¿”å›é¡¶ç‚¹è‡ªå·±çš„é“¾è¡¨å³å¯ return lists[v]; &#125; public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return this.lists[v].contains(w); &#125; public int degree(int v) &#123; return adj(v).size(); &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (int w: adj(v)) &#123; stringBuilder.append(String.format(\"%d \", w)); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125; public static void main(String[] args) &#123; AdjList adjList = new AdjList(\"g.txt\"); System.out.println(adjList); &#125;&#125; è¾“å‡ºä¸º V: 6, E: 70 : 1 2 1 : 0 3 2 : 0 3 4 3 : 1 2 5 4 : 2 5 5 : 3 4 ä¸‹é¢åˆ†æä¸€ä¸‹ä½¿ç”¨é‚»æ¥è¡¨å®ç°å›¾çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼š ç©ºé—´å¤æ‚åº¦ï¼š$O(V + E)$ æ—¶é—´å¤æ‚åº¦ï¼š å»ºè¡¨ï¼š$O(VE)$ è·å¾—ä¸é¡¶ç‚¹ $V$ ç›¸é‚»çš„é¡¶ç‚¹ï¼š$O(degree)$ åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ï¼š$O(degree)$ å»ºè¡¨çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(VE)$ï¼Œæ˜¯å› ä¸ºæ¯æ¬¡æˆ‘ä»¬éƒ½è¦æ‰«æä¸€éè¡¨åˆ¤æ–­æ˜¯å¦æœ‰å¹³è¡Œè¾¹ï¼Œåˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(degree)$ï¼Œæ˜¯å› ä¸ºéœ€è¦éå†è¡¨æ¥åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ã€‚ä¸Šé¢ä¸¤ä¸ªæ“ä½œéƒ½æ¯”ä½¿ç”¨é‚»æ¥çŸ©é˜µå®ç°å›¾çš„æ“ä½œæ›´åŠ çš„è´¹æ—¶ï¼Œéƒ½æ˜¯å› ä¸ºæŸ¥æ‰¾çš„èƒ½åŠ›æ¯”è¾ƒæ…¢(åœ¨å»ºå›¾æ—¶éœ€è¦æŸ¥é‡åˆ¤æ–­æ˜¯å¦æœ‰å¹³è¡Œè¾¹ï¼Œåˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»æ—¶ä¹Ÿéœ€è¦åœ¨é“¾è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾)ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯å¦æœ‰åŠæ³•å¯ä»¥æé«˜æŸ¥æ‰¾è¡¨çš„é€Ÿåº¦ã€‚ è¯´åˆ°æŸ¥æ‰¾é€Ÿåº¦ï¼Œä¸å¾—ä¸è¯´å“ˆå¸Œè¡¨å’Œçº¢é»‘æ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ HashSet æˆ–è€… TreeSet æ¥æ›¿ä»£ä¸Šé¢çš„ LinkedListï¼Œä»¥æ­¤æ¥æé«˜æŸ¥æ‰¾é€Ÿåº¦ï¼ŒäºŒè€…æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦å¦‚ä¸‹ æ•°æ®ç»“æ„ æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ HashSet $O(1)$ TreeSet $O(\\log v)$ ä»æ—¶é—´å¤æ‚åº¦ä¸Šçœ‹ï¼Œä½¿ç”¨ HashSet æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯ TreeSet æœ‰ä¸€ä¸ªä¼˜ç‚¹é‚£å°±æ˜¯æœ‰åºæ€§ï¼Œè¿™ä¼šå¸¦æ¥ä¸¤ä¸ªä¼˜ç‚¹ å¤ç°æˆ‘çš„ä»£ç æ—¶å¯ä»¥å¾—åˆ°ä¸æˆ‘ä¸€è‡´çš„ç»“æœ(è¾“å‡ºçš„é¡ºåº) å½“æˆ‘ä½¿ç”¨å›¾ç‰‡è§£é‡Šç®—æ³•è¿‡ç¨‹æ—¶ï¼Œè¾“å‡ºçš„ç»“æœå¯ä»¥ä¸æˆ‘æ¼”ç¤ºçš„ç»“æœä¸€è‡´ï¼Œå¯ä»¥æ›´å¥½çš„ç†è§£ç®—æ³• æ‰€ä»¥è¿™é‡Œæˆ‘é€‰æ‹© TreeSetã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª AdjSet ç±»ï¼Œå¤åˆ¶ AdjList çš„ä»£ç ï¼Œå°†å…¶ä¸­æ‰€æœ‰çš„ LinkedList æ”¹ä¸º TreeSet å³å¯ï¼Œå¦‚ä¸‹ import java.io.File;import java.io.FileNotFoundException;import java.util.Scanner;import java.util.TreeSet;public class AdjSet &#123; private int E; private int V; private TreeSet&lt;Integer&gt;[] sets; public AdjSet(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (this.V &lt; 0) &#123; throw new IllegalArgumentException(\"V Must Be Positive\"); &#125; // åˆå§‹åŒ–é“¾è¡¨ this.sets = new TreeSet[this.V]; for (int i = 0; i &lt; this.V; i++) &#123; this.sets[i] = new TreeSet&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (this.E &lt; 0) &#123; throw new IllegalArgumentException(\"E Must Be Positive\"); &#125; for (int i = 0; i &lt; this.E; i++) &#123; int a = scanner.nextInt(); validateVertex(a); int b = scanner.nextInt(); validateVertex(b); if (a == b) &#123; throw new IllegalArgumentException(\"Self loop exists\"); &#125; // å¹³è¡Œè¾¹çš„åˆ¤æ–­ if (sets[a].contains(b)) &#123; throw new IllegalArgumentException(\"Parallel edge exists\"); &#125; // å°†ç›¸é‚»é¡¶ç‚¹æ·»åŠ åˆ°è‡ªå·±çš„é“¾è¡¨ä¸­ this.sets[a].add(b); this.sets[b].add(a); &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; private void validateVertex(int v) &#123; if (v &lt; 0 || v &gt;= this.V) &#123; throw new IllegalArgumentException(\"Vertex \" + v + \" is invalid\"); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public TreeSet&lt;Integer&gt; adj(int v) &#123; validateVertex(v); // ç›´æ¥è¿”å›è‡ªå·±çš„é“¾è¡¨å³å¯ return sets[v]; &#125; public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return this.sets[v].contains(w); &#125; public int degree(int v) &#123; return adj(v).size(); &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (int w: adj(v)) &#123; stringBuilder.append(String.format(\"%d \", w)); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125; public static void main(String[] args) &#123; AdjSet adjSet = new AdjSet(\"g.txt\"); System.out.println(adjSet); &#125;&#125; åœ¨æœ€åæˆ‘ä»¬åšä¸€ä¸ªæ”¹è¿›ï¼Œè§‚å¯Ÿä¸‰ä¸ªç±»çš„ adj æ–¹æ³• // AdjMatrixpublic ArrayList&lt;Integer&gt; adj(int v) &#123; validateVertex(v); ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; this.V; i++) &#123; if (this.matrix[v][i] == 1) &#123; res.add(i); &#125; &#125; return res;&#125;// AdjListpublic LinkedList&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return lists[v];&#125;// AdjSetpublic TreeSet&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return sets[v];&#125; è¿™ä¸‰ä¸ªæ–¹æ³•çš„è¿”å›å€¼éƒ½ä¸ç›¸åŒï¼Œè¿™å°±ä¼šç»™ä½¿ç”¨è€…å¸¦æ¥è´Ÿæ‹…ï¼Œå®ƒè¿˜éœ€è¦è®°ä½æ¯ä¸ªç±»çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Œè€ƒè™‘åˆ°ä½¿ç”¨è€…æ‹¿åˆ°ä¸é¡¶ç‚¹ $v$ ç›¸é‚»çš„æ‰€æœ‰é¡¶ç‚¹ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥éå†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å›ä¸€ä¸ªæ¥å£ Iterableï¼ŒArrayList LinkedList TreeSet ä¸‰ä¸ªç±»éƒ½å®ç°äº†è¯¥æ¥å£ï¼Œå¦‚ä¸‹ // AdjSet å…¶å®ƒä¸¤ä¸ªç±»åšç›¸åŒä¿®æ”¹public Iterable&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return sets[v];&#125; æ³¨æ„ï¼šè®°å¾—è¿˜æœ‰ä¿®æ”¹ degree æ–¹æ³•ï¼Œå› ä¸ºè¿™æ˜¯ adj æ–¹æ³•è¿”å›çš„æ˜¯ Iterable æ¥å£ï¼Œè¯¥æ¥å£æ²¡æœ‰ size æ–¹æ³•ï¼Œä¿®æ”¹å¦‚ä¸‹ public int degree(int v) &#123; validateVertex(v); return this.sets[v].size();&#125; å…¶å®ƒä¸¤ä¸ªç±»åšç±»ä¼¼çš„ä¿®æ”¹ã€‚ æ€»ç»“åœ¨æ–‡ç« çš„æœ€åï¼Œæˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹ä¸‰ç§æ–¹æ³•çš„ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦ ç©ºé—´ å»ºå›¾æ—¶é—´ ä¸¤é¡¶ç‚¹æ˜¯å¦ç›¸é‚» æŸ¥æ‰¾é¡¶ç‚¹çš„é‚»è¾¹ é‚»æ¥çŸ©é˜µ $O(V^2)$ $O(E)$ $O(1)$ $O(V)$ é‚»æ¥è¡¨(LinkedList) $O(V + E)$ $O(EV)$ $O(degree)$ $O(degree)$ é‚»æ¥è¡¨(TreeSet) $O(V + E)$ $O(E\\log V)$ $O(\\log degree)$ $O(degree)$ ç”±ä¸Šå¯è§ï¼Œåº•å±‚ä½¿ç”¨ TreeSet çš„é‚»æ¥è¡¨æ¥è¡¨ç¤ºå›¾ï¼Œä»ç©ºé—´å’Œæ—¶é—´ä¸Šéƒ½éå¸¸çš„ä¼˜ç§€ï¼Œåœ¨åé¢çš„æ–‡ç« ï¼Œéƒ½å°†ä½¿ç”¨ TreeSet ç‰ˆæœ¬çš„é‚»æ¥è¡¨æ¥è¡¨ç¤ºå›¾ã€‚ åé¢ä¸ºäº†å±è”½å·®å¼‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Graph çš„æ¥å£ï¼Œè¿™ä¸‰ä¸ªç±»éƒ½å®ç° Graph æ¥å£ï¼ŒGraph æ¥å£å¦‚ä¸‹ public interface Graph &#123; int V(); int E(); int degree(int v); boolean hasEdge(int v, int w); Iterable&lt;Integer&gt; adj(int v);&#125; å›¾çš„æ·±åº¦ä¼˜å…ˆéå†æ‰€è°“å›¾çš„éå†å°±æ˜¯æŒ‰ç…§æŸç§é¡ºåºè®¿é—®å›¾ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œæ ¹æ®è®¿é—®çš„é¡ºåºä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š æ·±åº¦ä¼˜å…ˆéå† å¹¿åº¦ä¼˜å…ˆéå† åœ¨æœ¬èŠ‚ä¸­è®²è§£æ·±åº¦ä¼˜å…ˆéå†ã€‚ æ‰€è°“æ·±åº¦ä¼˜å…ˆéå†(Depth First Searchï¼Œç®€ç§° DFS)ï¼Œæ˜¯æŒ‡åœ¨éå†æ—¶ï¼Œå°½å¯èƒ½æ·±çš„è®¿é—®å›¾çš„èŠ‚ç‚¹ã€‚ä¸ºäº†æ›´å¥½çš„ç†è§£å›¾çš„æ·±åº¦ä¼˜å…ˆéå†ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†ï¼Œä¸å›¾çš„æ·±åº¦ä¼˜å…ˆéå†ä¸€æ ·ï¼Œæ ‘çš„æ·±åº¦ä¼˜å…ˆéå†ä¹Ÿæ˜¯æŒ‡å°½å¯èƒ½æ·±çš„è®¿é—®æ ‘çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰å­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸‹ä¸€æ­¥å°±åº”è¯¥éå†å®ƒçš„å­©å­èŠ‚ç‚¹(æ·±åº¦)ï¼Œå¦‚ä¸‹ ä»ä¸Šé¢çš„åŠ¨å›¾å¯ä»¥çœ‹å‡ºï¼Œå½“æˆ‘ä»¬éå†å®Œå½“å‰èŠ‚ç‚¹ä»¥åï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æœ‰å­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å»éå†å­©å­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬çš„éå†ç­–ç•¥å°±æ˜¯å°½å¯èƒ½æ·±çš„éå†ã€‚ç±»æ¯”äºå›¾ï¼Œå¯¹äºå›¾æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå›¾çš„èŠ‚ç‚¹æœ‰é‚»æ¥èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨éå†å®Œè¯¥èŠ‚ç‚¹åï¼Œæˆ‘ä»¬ä¸‹ä¸€æ­¥å°±å»éå†å®ƒçš„é‚»æ¥èŠ‚ç‚¹ è¿™å°±æ˜¯å›¾çš„æ·±åº¦ä¼˜å…ˆéå†ï¼Œä¸Šå›¾æ·±åº¦ä¼˜å…ˆéå†è®¿é—®çš„é¡ºåºæ˜¯ $[0, 1, 3, 2, 4, 5]$ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢çš„ç¼–ç¨‹ä¸­éªŒè¯æ˜¯å¦æ­£ç¡®ã€‚ å›¾çš„éå†ä¸æ ‘çš„éå†æœ‰ä¸€å¤„ä¸åŒï¼Œé‚£å°±æ˜¯é‡å¤è®¿é—®é—®é¢˜ã€‚æ ‘ä¸ä¼šå‘ç”Ÿé‡å¤è®¿é—®çš„é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºæ ‘çš„èŠ‚ç‚¹åªèƒ½é€šè¿‡çˆ¶èŠ‚ç‚¹è®¿é—®åˆ°ï¼Œåªæœ‰ä¸€ç§è·¯å¾„åˆ°è¾¾è¯¥èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¿…æ‹…å¿ƒï¼›ä½†æ˜¯å¯¹äºå›¾æ¥è¯´ï¼Œä¸€ä¸ªå›¾ä¸­çš„èŠ‚ç‚¹å¯ä»¥ä¸å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œè¿æ¥ï¼Œè¿™å°±æ„å‘³ç€æœ‰å¤šç§è·¯å¾„åˆ°è¾¾è¯¥èŠ‚ç‚¹ï¼Œè¿™å°±ä¼šå¯¼è‡´æŸèŠ‚ç‚¹å·²ç»é€šè¿‡ä¸€ä¸ªç›¸é‚»çš„èŠ‚ç‚¹è¢«è®¿é—®ï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯æœ‰å¯èƒ½é€šè¿‡åˆ«çš„ç›¸é‚»èŠ‚ç‚¹å†æ¬¡è¢«è®¿é—®ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªæ ‡å¿—æ¥è¡¨ç¤ºæŸä¸ªå›¾çš„èŠ‚ç‚¹æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œå¦‚æœå·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸èƒ½å†æ¬¡è®¿é—®ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ª visited æ•°ç»„æ¥è¡¨ç¤ºå›¾ä¸­çš„æŸä¸ªèŠ‚ç‚¹æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œvisited æ•°ç»„æ˜¯ä¸€ä¸ª boolean ç±»å‹çš„æ•°ç»„ï¼Œå€¼ä¸º true æ—¶å°±è¡¨ç¤ºè¯¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œä¾‹å¦‚ visited[0] = true å°±è¡¨ç¤ºèŠ‚ç‚¹ 0 å·²ç»è¢«è®¿é—®è¿‡äº†ã€‚ ä¸‹é¢æˆ‘å°±å°†ç¼–ç¨‹å…·ä½“å®ç°ï¼š import java.util.ArrayList;import java.util.Arrays;public class DFSGraph &#123; // å›¾çš„è¡¨ç¤ºä¸­å®šä¹‰çš„ Graph æ¥å£ private Graph graph; // ä¿å­˜æ·±åº¦ä¼˜å…ˆéå†çš„é¡ºåº private ArrayList&lt;Integer&gt; order; // ä¿å­˜èŠ‚ç‚¹æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡ private boolean[] visited; public DFSGraph(Graph graph) &#123; this.graph = graph; order = new ArrayList&lt;&gt;(graph.V()); // åˆå§‹åŒ– visited ä¸­çš„å…ƒç´ å€¼ä¸º false visited = new boolean[graph.V()]; Arrays.fill(visited, false); &#125; // DFS çš„å®ç°ï¼Œé¦–å…ˆä»èŠ‚ç‚¹ 0 å¼€å§‹éå† public void dfs() &#123; dfs(0); &#125; private void dfs(int v) &#123; // æ ‡è®°å½“å‰èŠ‚ç‚¹ä¸ºè®¿é—®è¿‡çš„çŠ¶æ€ visited[v] = true; // å‘ order ä¸­æ·»åŠ å½“å‰èŠ‚ç‚¹ order.add(v); for (int w: graph.adj(v)) &#123; // å¦‚æœé‚»æ¥èŠ‚ç‚¹æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆéå†è¯¥é‚»æ¥èŠ‚ç‚¹ if (!visited[w]) &#123; dfs(w); &#125; &#125; &#125; public Iterable&lt;Integer&gt; order() &#123; return order; &#125; public static void main(String[] args) &#123; // ä½¿ç”¨é‚»æ¥è¡¨è¡¨ç¤ºå›¾ Graph graph = new AdjSet(\"g.txt\"); // å®ä¾‹åŒ–ä¸€ä¸ª DFSGraph DFSGraph dfsGraph = new DFSGraph(graph); // è°ƒç”¨ dfs æ–¹æ³•è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå† dfsGraph.dfs(); // æ‰“å°å‡ºæ·±åº¦ä¼˜å…ˆéå†çš„é¡ºåº System.out.println(dfsGraph.order()); &#125;&#125; å…¶ä¸­ g.txt çš„å†…å®¹å¦‚ä¸‹ 6 50 10 21 32 42 5 è¿™ä¸ªæ–‡ä»¶è¡¨ç¤ºçš„å›¾ä¸æˆ‘ä»¬åœ¨ä¸Šé¢çš„åŠ¨å›¾ä¸­çœ‹åˆ°çš„å›¾æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ‰“å°çš„ç»“æœ [0, 1, 3, 2, 4, 5] è¿™ä¸æˆ‘ä»¬åœ¨åŠ¨å›¾ä¸­çœ‹åˆ°çš„éå†é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚ ä½†æ˜¯ä¸Šé¢æˆ‘ä»¬å®ç°çš„æ·±åº¦ä¼˜å…ˆéå†æœ‰ä¸€ä¸ªå° bugï¼Œé‚£å°±æ˜¯ä¸Šé¢çš„æ·±åº¦ä¼˜å…ˆéå†åªé€‚åˆåªæœ‰ä¸€ä¸ªè”é€šåˆ†é‡çš„å›¾ï¼Œå¦‚æœæœ‰å¤šä¸ªè”é€šåˆ†é‡ï¼Œé‚£ä¹ˆå…¶ä»–è”é€šåˆ†é‡ä¸­çš„èŠ‚ç‚¹å°±æ°¸è¿œä¸å¯èƒ½è¢«è®¿é—®åˆ°ï¼Œå¦‚ æ—¢ç„¶å›¾ä¸­æœ‰èŠ‚ç‚¹æ°¸è¿œä¸ä¼šè¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆè¿˜èƒ½å«å›¾çš„éå†å—ï¼Œå›¾çš„éå†å¯æ˜¯è¦æ±‚èƒ½å¤Ÿè®¿é—®å›¾ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œæ”¹è¿› è¿™æ¬¡æˆ‘ä»¬ä¸åªæ˜¯ä»èŠ‚ç‚¹ $0$ å¼€å§‹éå†ï¼Œåœ¨éå†å®ŒèŠ‚ç‚¹ $0$ æ‰€åœ¨çš„è”é€šåˆ†é‡ä»¥åï¼Œæˆ‘ä»¬æ£€æŸ¥æ˜¯å¦è¿˜æœ‰èŠ‚ç‚¹æ²¡æœ‰éå†ï¼Œå³æ˜¯å¦å­˜åœ¨åˆ«çš„è”é€šåˆ†é‡ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æœ‰éå†è¯¥èŠ‚ç‚¹æ‰€åœ¨çš„è”é€šåˆ†é‡ã€‚ åœ¨æœ€åæˆ‘ä»¬è¿›è¡Œä¸€ä¸ªæ‰©å±•ï¼Œæˆ‘ä»¬çŸ¥é“æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†åˆ†ä¸ºä¸‰ç§ å‰åºéå† ä¸­åºéå† ååºéå† å›¾æ²¡æœ‰ä¸­åºéå†ï¼Œå®ƒåˆ†ä¸ºä¸¤ç§ æ·±åº¦ä¼˜å…ˆå‰åºéå† æ·±åº¦ä¼˜å…ˆååºéå† åˆšåˆšæˆ‘ä»¬æ‰€ç¼–ç¨‹çš„åªæ˜¯å›¾çš„æ·±åº¦ä¼˜å…ˆå‰åºéå†ï¼Œç°åœ¨æˆ‘ä»¬ä¸å¦¨å†™ä¸€ä¸‹ååºéå†çš„ä»£ç ã€‚åœ¨å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®ååºéå†çš„è¿™ä¸ªåæŒ‡çš„æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªååœ¨æ ‘çš„éå†ä¸­æŒ‡çš„æ˜¯å…ˆè®¿é—®å½“å‰èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è®¿é—®å½“å‰èŠ‚ç‚¹åœ¨è®¿é—®å½“å‰èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹ä¹‹åã€‚ç±»æ¯”äºå›¾ï¼Œè¿™ä¸ªåæŒ‡çš„å°±æ˜¯å…ˆè®¿é—®å½“å‰èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹ï¼Œç„¶åå†è®¿é—®å½“å‰èŠ‚ ä¸Šé¢ååºéå†çš„é¡ºåºä¸º $[3, 1, 4, 5, 2, 0]$ï¼Œæˆ‘ä»¬é‡æ„ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨ preorder æ¥ä¿å­˜å‰åºéå†çš„ç»“æœï¼Œä½¿ç”¨ postorder æ¥ä¿å­˜ååºéå†çš„ç»“æœï¼š import java.util.ArrayList;import java.util.Arrays;public class DFSGraph &#123; private Graph graph; private ArrayList&lt;Integer&gt; preorder; private ArrayList&lt;Integer&gt; postorder; private boolean[] visited; public DFSGraph(Graph graph) &#123; this.graph = graph; preorder = new ArrayList&lt;&gt;(graph.V()); postorder = new ArrayList&lt;&gt;(graph.V()); visited = new boolean[graph.V()]; Arrays.fill(visited, false); &#125; public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; dfs(i); &#125; &#125; &#125; private void dfs(int v) &#123; visited[v] = true; // å‰åºéå†ï¼šåœ¨éå†ç›¸é‚»èŠ‚ç‚¹å‰ï¼Œéå†å½“å‰èŠ‚ç‚¹ preorder.add(v); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w); &#125; &#125; // ååºéå†ï¼šéå†ç›¸é‚»èŠ‚ç‚¹åï¼Œå†éå†å½“å‰èŠ‚ç‚¹ postorder.add(v); &#125; public Iterable&lt;Integer&gt; preorder() &#123; return preorder; &#125; public Iterable&lt;Integer&gt; postorder() &#123; return postorder; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); DFSGraph dfsGraph = new DFSGraph(graph); dfsGraph.dfs(); System.out.println(dfsGraph.postorder()); &#125;&#125; æ‰“å°çš„ç»“æœä¸º [3, 1, 4, 5, 2, 0] æ·±åº¦ä¼˜å…ˆéå†çš„åº”ç”¨è”é€šåˆ†é‡ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•æ±‚è§£å›¾ä¸­æœ‰å¤šå°‘ä¸ªè”é€šåˆ†é‡ã€‚å…¶å®è¿™ä¸ªé—®é¢˜éå¸¸çš„ç®€å•ï¼Œåœ¨ä¸Šé¢çš„æˆ‘ä»¬ä¿®æ”¹ DFS çš„å° bug æ—¶å°±æåˆ°ï¼Œå› ä¸ºæœ‰å¤šä¸ªè”é€šåˆ†é‡ï¼Œæˆ‘ä»¬æ— æ³•éå†å®Œæ‰€æœ‰å›¾ä¸­çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹äº†ä»£ç  æ¯æ¬¡å½“æˆ‘ä»¬åœ¨ for å¾ªç¯ä¸­è°ƒç”¨ä¸€æ¬¡ dfs çš„æ—¶å€™ï¼Œå°±è¯´æ˜å­˜åœ¨ä¸€ä¸ªè”é€šåˆ†é‡(Connected Component)ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨è°ƒç”¨ dfs æ—¶ç»Ÿè®¡è”é€šåˆ†é‡çš„ä¸ªæ•°å°±å¯ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæˆå‘˜å˜é‡ ccount æ¥ä¿å­˜è”é€šåˆ†é‡çš„ä¸ªæ•° import java.util.Arrays;public class CCGraph &#123; private int cccount; private Graph graph; private boolean[] visited; public CCGraph(Graph graph) &#123; this.graph = graph; this.cccount = 0; visited = new boolean[graph.V()]; Arrays.fill(visited, false); &#125; public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; // è”é€šåˆ†é‡ä¸ªæ•°å¢åŠ  cccount++; dfs(i); &#125; &#125; &#125; private void dfs(int v) &#123; visited[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w); &#125; &#125; &#125; public int getCccount() &#123; return cccount; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); CCGraph ccGraph = new CCGraph(graph); ccGraph.dfs(); int cccount = ccGraph.getCccount(); System.out.println(cccount); // 2 &#125;&#125; ä¸Šé¢çš„ä»£ç ä¸ DFSGraph ç±»çš„ä»£ç å‡ ä¹æ˜¯ä¸€è‡´çš„ï¼Œåªä¸è¿‡ç»Ÿè®¡äº†è”é€šåˆ†é‡çš„ä¸ªæ•°ã€‚g.txt ä¸­çš„å†…å®¹ä¸ºï¼š 7 60 10 21 32 52 44 5 å¯¹äºçš„å›¾çš„å½¢çŠ¶å¦‚ä¸‹ï¼š å¯è§ä¸Šé¢çš„å›¾æœ‰ä¸¤ä¸ªè”é€šåˆ†é‡ã€‚ ç¬¬äºŒä¸ªä¸è”é€šåˆ†é‡æœ‰å…³çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›å¾—åˆ°æ¯ä¸ªè”é€šåˆ†é‡ä¸­æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œä»¥åŠåˆ†åˆ«åŒ…å«å“ªäº›èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª ArrayList æ•°ç»„ä¿å­˜æ¯ä¸ªè”é€šåˆ†é‡åŒ…å«çš„èŠ‚ç‚¹ï¼Œä¿®æ”¹ dfs å¦‚ä¸‹ import java.util.ArrayList;import java.util.Arrays;@SuppressWarnings(\"all\")public class CCGraph &#123; private int cccount; private Graph graph; private boolean[] visited; // ä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ•°ç»„? å› ä¸ºæ•°ç»„éœ€è¦äº‹å…ˆå¼€è¾Ÿç©ºé—´ï¼Œè€Œæˆ‘ä»¬äº‹å…ˆä¸çŸ¥é“æœ‰å¤šå°‘ä¸ªè”é€šåˆ†é‡ private ArrayList&lt;ArrayList&lt;Integer&gt;&gt; lists; // æ„é€ å‡½æ•°å¯¹æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ– public CCGraph(Graph graph) &#123; this.graph = graph; this.cccount = 0; visited = new boolean[graph.V()]; Arrays.fill(visited, false); lists = new ArrayList&lt;&gt;(); &#125; public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; cccount++; // æ¯å¢åŠ ä¸€ä¸ªè”é€šåˆ†é‡ï¼Œæ–°å»ºä¸€ä¸ª list æ¥ä¿å­˜è¯¥è”é€šåˆ†é‡ä¸­åŒ…å«çš„èŠ‚ç‚¹ ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); lists.add(list); dfs(i, list); &#125; &#125; &#125; private void dfs(int v, ArrayList&lt;Integer&gt; list) &#123; visited[v] = true; // å°†èŠ‚ç‚¹ä¿å­˜åœ¨æ‰€åœ¨è”é€šåˆ†é‡å¯¹åº”çš„ list ä¸­ list.add(v); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w, list); &#125; &#125; &#125; public int getCCcount() &#123; return cccount; &#125; public ArrayList&lt;ArrayList&lt;Integer&gt;&gt; getCCList() &#123; return lists; &#125; // åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨åŒä¸€ä¸ªè”é€šåˆ†é‡ä¸­(æ˜¯å¦è¿æ¥) public boolean isConnected(int v, int w) &#123; for (int i = 0; i &lt; cccount; i++) &#123; ArrayList list = lists.get(i); // æŸè”é€šåˆ†é‡ä¸­æ˜¯å¦åŒæ—¶åŒ…å«è¿™ä¸¤ä¸ªèŠ‚ç‚¹ if (list.contains(v) &amp;&amp; list.contains(w)) &#123; return true; &#125; &#125; // æ‰€æœ‰çš„è”é€šåˆ†é‡éƒ½ä¸åŒæ—¶åŒ…å«è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸åœ¨åŒä¸€ä¸ªè”é€šåˆ†é‡ä¸­ return false; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); CCGraph ccGraph = new CCGraph(graph); ccGraph.dfs(); int cccount = ccGraph.getCCcount(); System.out.println(cccount); // 2 // æ‰“å°å‡ºè”é€šåˆ†é‡ ArrayList&lt;ArrayList&lt;Integer&gt;&gt; lists = ccGraph.getCCList(); for (int i = 0; i &lt; cccount; i++) &#123; // è·å¾—æ¯ä¸ªè”é€šåˆ†é‡å¯¹åº”çš„ listï¼Œé‡Œé¢ä¿å­˜äº†è¯¥è”é€šåˆ†é‡åŒ…å«çš„èŠ‚ç‚¹ ArrayList&lt;Integer&gt; list = lists.get(i); // æ‰“å°å‡ºè”é€šåˆ†é‡ä¸­åŒ…å«çš„èŠ‚ç‚¹ System.out.print(i + \": \"); for (int v: list) &#123; System.out.print(v + \" \"); &#125; System.out.println(); &#125; System.out.println(ccGraph.isConnected(0, 5)); // true System.out.println(ccGraph.isConnected(0, 6)); // false &#125;&#125; ä¸Šè¿°çš„æ‰“å°ç»“æœä¸º 20: 0 1 3 2 4 5 1: 6 truefalse è·¯å¾„é—®é¢˜æ‰€è°“çš„è·¯å¾„é—®é¢˜å°±æ˜¯æ±‚ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è·¯å¾„ï¼Œè¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨æˆ‘ä»¬ä¸Šé¢çš„ isConnected æ–¹æ³•å°±å¯ä»¥çŸ¥é“ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è·¯å¾„äº†ã€‚ä¸è¿‡æˆ‘ä»¬æ›´æƒ³çŸ¥é“çš„æ˜¯ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„æ˜¯ä»€ä¹ˆï¼Œå³ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾å¦ä¸€ä¸ªèŠ‚ç‚¹ä¼šç»å†å“ªäº›èŠ‚ç‚¹ã€‚ å¯¹äºä¸‹é¢çš„ä¸€å¹…å›¾ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ä»èŠ‚ç‚¹ $0$ åˆ°èŠ‚ç‚¹ $5$ ä¹‹é—´çš„è·¯å¾„ æˆ‘ä»¬éœ€è¦è®°å½•éå†æ—¶å½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¾‹å¦‚éå†èŠ‚ç‚¹ $1$ åä¼šæ¥ç€éå†èŠ‚ç‚¹ $3$ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ $3$ çš„å‰ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ $1$ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯å°±å¯ä»¥çŸ¥é“ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å…·ä½“çš„è·¯å¾„ã€‚é¦–å…ˆä½¿ç”¨ DFS å›¾ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­è®°å½•ä¿¡æ¯ï¼Œå¦‚ä¸‹ åœ¨ä¸Šé¢æˆ‘ä»¬ä»èŠ‚ç‚¹ $0$ å¼€å§‹éå†ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬è®°å½•äº†å½“å‰èŠ‚ç‚¹ä¹‹å‰çš„èŠ‚ç‚¹ï¼Œæœ€åå¾—åˆ°è¿™ä¹ˆä¸€ä¸ªç»“æœ ç°åœ¨æˆ‘ä»¬æƒ³çŸ¥é“èŠ‚ç‚¹ $0$ æ˜¯å¦‚ä½•åˆ°è¾¾èŠ‚ç‚¹ $5$ çš„ï¼Œç›´æ¥é€†æ¨å°±å¯ä»¥çŸ¥é“è·¯å¾„ä¸º $5 \\leftarrow 4 \\leftarrow 2 \\leftarrow 0$ï¼Œå¦‚ä¸‹ è¿™ä¸ªç®—æ³•å¯ä»¥æ±‚å¾—èŠ‚ç‚¹ $0$ ä¸ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„ï¼Œä½†æ˜¯ä¸èƒ½æ±‚å¾—ä»»æ„ä¸¤ç‚¹ä¹‹é—´çš„è·¯å¾„ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä»èŠ‚ç‚¹ $0$ å¼€å§‹éå†çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ±‚å¾—èŠ‚ç‚¹ $4$ ä¸èŠ‚ç‚¹ $5$ ä¹‹é—´çš„è·¯å¾„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä»èŠ‚ç‚¹ $4$ å¼€å§‹éå†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ç§ç®—æ³•åªèƒ½æ±‚è§£å•æºè·¯å¾„(Single Source Path) é—®é¢˜ã€‚ åœ¨ç¼–ç¨‹å®ç°æ–¹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª pre æ•°ç»„æ¥ä¿å­˜å½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¾‹å¦‚ï¼Œpre[3] = 1 å°±è¡¨ç¤ºèŠ‚ç‚¹ $3$ çš„å‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯èŠ‚ç‚¹ $1$ import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;public class SingleSourcePath &#123; private Graph graph; private boolean[] visited; private int[] pre; // ä»èŠ‚ç‚¹ s å¼€å§‹éå† private int s; public SingleSourcePath(Graph graph, int s) &#123; this.graph = graph; this.s = s; visited = new boolean[graph.V()]; Arrays.fill(visited, false); pre = new int[graph.V()]; Arrays.fill(pre, -1); // é»˜è®¤è®¤ä¸ºæºçš„å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºè‡ªå·±ï¼Œè¿™ä¸ªå€¼è®¿é—®ä¸åˆ°ï¼Œå¯ä»¥æ˜¯ä»»ä½•å€¼ dfs(s, s); &#125; private void dfs(int v, int parent) &#123; visited[v] = true; pre[v] = parent; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w, v); &#125; &#125; &#125; public boolean isConnected(int t) &#123; // å¦‚æœ pre[t] != -1ï¼Œè¯´æ˜éå†åˆ°äº†è¯¥èŠ‚ç‚¹ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¸æºèŠ‚ç‚¹æ˜¯è”é€šçš„ return pre[t] != -1; &#125; public Iterable&lt;Integer&gt; path(int t) &#123; ArrayList&lt;Integer&gt; path = new ArrayList&lt;&gt;(); // å¦‚æœä¸æ˜¯è”é€šçš„ï¼Œç›´æ¥è¿”å› if (!isConnected(t)) return path; int cur = t; while (cur != s) &#123; path.add(cur); cur = pre[cur]; &#125; path.add(s); Collections.reverse(path); return path; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); SingleSourcePath singleSourcePath = new SingleSourcePath(graph, 0); System.out.println(singleSourcePath.path(5)); &#125;&#125; å…¶ä¸­ g.txt ä¸º 7 60 10 21 32 52 44 5 å¯¹åº”çš„å›¾å°±æ˜¯ä¸Šé¢çš„åŠ¨å›¾ï¼Œè¾“å‡ºä¸º [0, 2, 4, 5] å‡è®¾ç°åœ¨æˆ‘ä»¬åªæƒ³æ±‚æºç‚¹ $s$ åˆ°ç‚¹ $t$ ä¹‹é—´çš„è·¯å¾„ï¼Œè€Œä¸æ˜¯ $s$ åˆ°ä»»æ„ä¸€ä¸ªç‚¹çš„è·¯å¾„ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬çš„è¦æ±‚é™ä½äº†ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬è®°å½•çš„ä¿¡æ¯æ›´å°‘ï¼Œé‚£æˆ‘ä»¬ç®—æ³•å¯ä¸å¯ä»¥åŠ å¿«å‘¢? å½“ç„¶å¯ä»¥ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬æ±‚è§£æºç‚¹ $s$ åˆ°ä»»æ„ä¸€ç‚¹çš„è·¯å¾„ï¼Œæ‰€ä»¥éœ€è¦å¯¹æºç‚¹ $s$ æ‰€åœ¨çš„è”é€šåˆ†é‡åš $DFS$ï¼Œéœ€è¦éå†è”é€šåˆ†é‡ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬åªéœ€è¦æ±‚è§£åˆ°å›ºå®šç‚¹ $t$ çš„è·¯å¾„ï¼Œæˆ‘ä»¬ä¸éœ€è¦å®Œæ•´çš„åšä¸€é $DFS$ï¼Œå½“æˆ‘ä»¬éå†åˆ°èŠ‚ç‚¹ $t$ æ—¶ï¼Œå°±å·²ç»å¯ä»¥é€€å‡ºéå†äº†ï¼Œæå‰ç»ˆæ­¢éå†å¯ä»¥è·å¾—æ›´å¿«çš„æ€§èƒ½ã€‚ å‡è®¾æˆ‘ä»¬éœ€è¦æ±‚è§£æºç‚¹ $0$ åˆ°èŠ‚ç‚¹ $1$ çš„è·¯å¾„ åœ¨ç¼–ç ä¸Šï¼Œåœ¨æˆ‘ä»¬åœ¨è®¾è®¡ dfs å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä»£è¡¨æ˜¯å¦å·²ç»æ‰¾åˆ°èŠ‚ç‚¹ $t$ï¼Œå¦‚æœå·²ç»æ‰¾åˆ°ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åšåç»­çš„éå†äº†ï¼Œç›´æ¥ç»ˆæ­¢éå† import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;public class Path &#123; private Graph graph; private boolean[] visited; private int[] pre; private int s; private int t; public Path(Graph graph, int s, int t) &#123; this.graph = graph; this.s = s; this.t = t; visited = new boolean[graph.V()]; Arrays.fill(visited, false); pre = new int[graph.V()]; Arrays.fill(pre, -1); dfs(s, s); &#125; private boolean dfs(int v, int parent) &#123; visited[v] = true; pre[v] = parent; // å¦‚æœå·²ç»æ‰¾åˆ°ï¼Œç›´æ¥è¿”å›ï¼Œä¸å†ç»§ç»­éå† if (v == t) &#123; return true; &#125; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; // å¦‚æœåœ¨æŸç›¸é‚»èŠ‚ç‚¹çš„æ·±åº¦ä¼˜å…ˆéå†ä¸­æ‰¾åˆ°èŠ‚ç‚¹ tï¼Œä¸å†ç»§ç»­éå†å…¶ä»–ç›¸é‚»èŠ‚ç‚¹ï¼Œæå‰è¿”å› if (dfs(w, v)) &#123; return true; &#125; &#125; &#125; return false; &#125; public boolean isConnected() &#123; return visited[t]; &#125; public Iterable&lt;Integer&gt; path() &#123; ArrayList&lt;Integer&gt; path = new ArrayList&lt;&gt;(); if (!isConnected()) &#123; return path; &#125; int cur = t; while (cur != s) &#123; path.add(cur); cur = pre[cur]; &#125; path.add(s); Collections.reverse(path); return path; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); Path path = new Path(graph, 0, 3); System.out.println(Arrays.toString(path.visited)); System.out.println(path.path()); &#125;&#125; è¾“å‡ºä¸º [true, true, false, true, false, false, false][0, 1, 3] ä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰éå†æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œè¿™æ ·æå‰ç»ˆæ­¢éå†å¯ä»¥æé«˜æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚ æ— å‘å›¾çš„ç¯æ£€æµ‹æˆ‘ä»¬æ€ä¹ˆåˆ¤æ–­ä¸€å¹…å›¾æœ‰æ²¡æœ‰ç¯å‘¢? å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†ï¼Œå½“è®¿é—®åˆ°æŸèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹çš„æŸé‚»æ¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ï¼Œå¹¶ä¸”è¯¥é‚»æ¥èŠ‚ç‚¹ä¸æ˜¯å®ƒçš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¯¥å›¾ä¸­åŒ…å«ä¸€ä¸ªç¯ æ˜ç™½è¿™ä¸€ç‚¹ä»¥åæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™ä»£ç äº† import java.util.Arrays;public class CircleDetection &#123; private Graph graph; private boolean[] visited; private boolean hasCircle; public CircleDetection(Graph graph) &#123; this.graph = graph; visited = new boolean[graph.V()]; Arrays.fill(visited, false); hasCircle = false; &#125; public void dfs() &#123; // ä»»ä¸€è”é€šåˆ†é‡ä¸­æœ‰ç¯ï¼Œé‚£ä¹ˆå›¾ä¸­å°±æœ‰ç¯ for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; dfs(i, i); &#125; &#125; &#125; private void dfs(int v, int parent) &#123; visited[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w, v); // è¿›å…¥ä¸‹é¢çš„ if åˆ¤æ–­å°±è¯´æ˜ w å·²ç»è®¿é—®è¿‡äº† // å¦‚æœ w ä¸æ˜¯å®ƒçš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¯´æ˜æœ‰ç¯ &#125; else if (w != parent)&#123; hasCircle = true; &#125; &#125; &#125; public boolean hasCircle() &#123; return this.hasCircle; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); CircleDetection circleDetection = new CircleDetection(graph); circleDetection.dfs(); System.out.println(circleDetection.hasCircle()); // true &#125;&#125; å…¶ä¸­ g.txt çš„å†…å®¹å¦‚ä¸‹ 7 60 10 21 32 52 44 5 æ‰€å¯¹åº”çš„å›¾å¦‚ä¸‹ å¦‚æœæˆ‘ä»¬å°†èŠ‚ç‚¹ $2$ å’Œ $5$ ä¹‹é—´çš„è¾¹æ–­å¼€ï¼Œé‚£ä¹ˆå›¾ä¸­æ˜¯æ²¡æœ‰ç¯çš„ï¼Œæ–°å»º g2.txt å¦‚ä¸‹ 7 50 10 21 32 44 5 Graph graph2 = new AdjSet(\"g2.txt\");CircleDetection circleDetection2 = new CircleDetection(graph2);circleDetection2.dfs();System.out.println(circleDetection2.hasCircle()); // false å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æå‰è¿”å›è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†ç¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æå‰ç»ˆæ­¢ï¼Œåé¢å°±ä¸éœ€è¦ç»§ç»­æŸ¥æ‰¾äº†ï¼Œæˆ‘ä»¬ä¿®æ”¹ dfs çš„è¿”å›å€¼ä¸º boolean ç±»å‹ï¼Œè¿™æ—¶ dfs å‡½æ•°çš„å«ä¹‰å°±æ˜¯ä»é¡¶ç‚¹ $v$ å¼€å§‹ï¼Œåˆ¤æ–­å›¾ä¸­æ˜¯å¦æœ‰ç¯ public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; if (dfs(i, i)) &#123; hasCircle = true; // ä¸ç”¨æŸ¥æ‰¾å…¶ä»–è”é€šåˆ†é‡äº† break; &#125; &#125; &#125;&#125;private boolean dfs(int v, int parent) &#123; visited[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; if (dfs(w, v)) &#123; // å¦‚æœå·²ç»åœ¨æŸç›¸é‚»èŠ‚ç‚¹ä¸­æ‰¾åˆ°ç¯ï¼Œä¸ç”¨å†éå†å…¶ä»–çš„ç›¸é‚»èŠ‚ç‚¹ return true; &#125; &#125; else if (w != parent)&#123; // å¦‚æœå·²ç»æ‰¾åˆ°ç¯ï¼Œä¸ç”¨ç»§ç»­å‘åéå† return true; &#125; &#125; return false;&#125; äºŒåˆ†å›¾æ£€æµ‹åœ¨è¿™ä¸ªå°èŠ‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªäºŒåˆ†å›¾æ£€æµ‹çš„é—®é¢˜ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆå«äºŒåˆ†å›¾å‘¢? äºŒåˆ†å›¾éœ€è¦æ»¡è¶³ä¸€ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š å›¾ä¸­çš„èŠ‚ç‚¹è¢«åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ† å›¾ä¸­çš„è¾¹è¿æ¥çš„æ˜¯ä¸¤ä¸ªéƒ¨åˆ†çš„èŠ‚ç‚¹ åœ¨ä¸Šå›¾ä¸­ï¼ŒèŠ‚ç‚¹ $0, 3, 4, 5$ æ˜¯ä¸€éƒ¨åˆ†ï¼ŒèŠ‚ç‚¹ $1, 2, 6$ æ˜¯ä¸€éƒ¨åˆ†ï¼Œä¸¤éƒ¨åˆ†çš„èŠ‚ç‚¹æˆ‘ä½¿ç”¨ä¸åŒçš„é¢œè‰²è¿›è¡Œå¡«å……ï¼›ä¸”å›¾ä¸­æ‰€æœ‰çš„è¾¹éƒ½è¿æ¥çš„æ˜¯ä¸¤ä¸ªéƒ¨åˆ†çš„èŠ‚ç‚¹ã€‚å¾ˆæ˜æ˜¾ä¸Šé¢çš„å›¾æ»¡è¶³äºŒåˆ†å›¾çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼Œæ‰€ä»¥ä¸Šé¢çš„å›¾æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ï¼Œé‚£æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯å¦‚ä½•æ£€æµ‹ä¸€ä¸ªå›¾æ˜¯å¦æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾å‘¢? é¦–å…ˆæ˜ç™½ä¸‹é¢ä¸¤ä¸ªå›¾æ˜¯ç­‰ä»·çš„ ä½†æ˜¯æˆ‘ä»¬å¾ˆéš¾ä»å³è¾¹çš„å›¾ä¸­åˆ†è¾¨å‡ºä¸¤éƒ¨åˆ†çš„èŠ‚ç‚¹ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®æ˜¯å›¾ä¸­çš„æ‰€æœ‰è¾¹è¿æ¥çš„æ˜¯ä¸¤ä¸ªä¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬å°†å¯¹å›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†çš„è¿‡ç¨‹ä¸­å¯¹èŠ‚ç‚¹æŸ“è‰²ï¼Œç›¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹æŸ“ä¸ºä¸€ä¸ªé¢œè‰²ï¼Œå› ä¸ºæ‰€æœ‰çš„è¾¹éƒ½è¿æ¥çš„æ˜¯ä¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹ï¼Œè¿™æ„å‘³ç€ä»»æ„èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹çš„é¢œè‰²å’Œè‡ªå·±éƒ½æ˜¯ä¸åŒçš„ã€‚ æˆ‘ä»¬åœ¨éå†æ—¶å°†æ‰€æœ‰é‚»æ¥èŠ‚ç‚¹çš„é¢œè‰²æŸ“ä¸ºå’Œè‡ªå·±ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœé‚»æ¥èŠ‚ç‚¹å·²ç»æŸ“è‰²ï¼Œå¹¶ä¸”æŸ“çš„é¢œè‰²å’Œè‡ªå·±ç›¸åŒï¼Œä¸äºŒåˆ†å›¾çš„å®šä¹‰å†²çªï¼Œé‚£ä¹ˆè¯´æ˜ä¸æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ï¼Œåä¹‹é‚»æ¥èŠ‚ç‚¹æŸ“çš„é¢œè‰²å’Œè‡ªå·±ä¸åŒï¼Œåˆ™ç»§ç»­éå†ï¼Œå¦‚æœéå†å®Œæ•´ä¸ªå›¾æ—¶éƒ½æ²¡æœ‰å†²çªï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªå›¾å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ ä»£ç å¦‚ä¸‹ï¼š import java.util.Arrays;public class BinaryPartitionDetection &#123; private Graph graph; private boolean[] visited; // ä»¥ 0 1 è¡¨ç¤ºä¸åŒé¢œè‰² private int[] colors; // è¡¨ç¤ºè¯¥å›¾æ˜¯å¦ä¸ºäºŒåˆ†å›¾ private boolean isBipartite; public BinaryPartitionDetection(Graph graph) &#123; this.graph = graph; visited = new boolean[graph.V()]; Arrays.fill(visited, false); // åˆå§‹åŒ– colors ä¸º -1ï¼Œè¡¨ç¤ºæœªæŸ“è‰² colors = new int[graph.V()]; Arrays.fill(colors, -1); isBipartite = true; &#125; public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; // å¦‚æœåœ¨æŸè”é€šåˆ†é‡ä¸­æ£€æµ‹åˆ°ä¸æ˜¯äºŒåˆ†å›¾ï¼Œä¸éœ€è¦æ£€æµ‹å…¶ä»–è”é€šåˆ†é‡ if (!dfs(i, 0)) &#123; isBipartite = false; break; &#125; &#125; &#125; &#125; private boolean dfs(int v, int color) &#123; visited[v] = true; // æŸ“è‰² colors[v] = color; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; // 0 =&gt; 1 - color = 1 // 1 =&gt; 1 - color = 0 // å¦‚æœå·²ç»åœ¨éå†æŸé‚»æ¥èŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­æ£€æµ‹åˆ°ä¸æ˜¯äºŒåˆ†å›¾ï¼Œä¸éœ€è¦éå†å…¶ä»–é‚»æ¥èŠ‚ç‚¹ if (!dfs(w, 1 - color)) &#123; return false; &#125; // è¿›å…¥ else if è¡¨ç¤ºè¯¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ // å¦‚æœè¯¥èŠ‚ç‚¹çš„é¢œè‰²ä¸å®ƒçš„é‚»æ¥èŠ‚ç‚¹ç›¸åŒï¼Œè¯´æ˜ä¸æ˜¯äºŒåˆ†å›¾ï¼Œåé¢èŠ‚ç‚¹æ— éœ€éå† &#125; else if (colors[v] == colors[w]) &#123; return false; &#125; &#125; return true; &#125; public boolean isBipartite() &#123; return isBipartite; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g3.txt\"); BinaryPartitionDetection binaryPartitionDetection = new BinaryPartitionDetection(graph); binaryPartitionDetection.dfs(); System.out.println(binaryPartitionDetection.isBipartite()); // true &#125;&#125; å…¶ä¸­ g3.txt çš„å†…å®¹å¦‚ä¸‹ 7 60 10 21 32 42 54 6 æ‰€è¡¨ç¤ºçš„å›¾å¦‚ä¸‹ï¼Œä¸åŠ¨å›¾ä¸­çš„å›¾ç›¸åŒ åœ¨ä¸Šé¢çš„å®ç°ä¸­ä¹Ÿä½¿ç”¨äº†æå‰ç»ˆæ­¢çš„æŠ€æœ¯ï¼Œä½¿ç”¨è¯¥æŠ€æœ¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„æå‰ç»ˆæ­¢éå†ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚ å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†æ ‘çš„å±‚åºéå†æ ‘çš„å±‚åºéå†æ˜¯æŒ‡ä¸€å±‚ä¸€å±‚çš„éå†æ ‘çš„èŠ‚ç‚¹ï¼Œå®ƒçš„å®ç°æ˜¯å€ŸåŠ©äºé˜Ÿåˆ—è¿›è¡Œå®ç°çš„ï¼š æ¯ä¸€æ¬¡ä»é˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºå…ƒç´ è¿›è¡Œéå†ï¼Œç„¶åå°†è¯¥å…ƒç´ çš„å·¦å³å­©å­æ·»åŠ è¿›é˜Ÿåˆ—ï¼Œä»¥æ­¤å¾€å¤ï¼Œç›´è‡³é˜Ÿåˆ—ä¸ºç©ºï¼Œéå†ç»“æŸã€‚ import java.util.LinkedList;import java.util.Queue;public class BinaryTree &#123; private class Node &#123; private Node left; private Node right; private int value; public Node(int value) &#123; this.value = value; &#125; &#125; private Node root; public BinaryTree(int value) &#123; root = new Node(value); &#125; public void levelOrder() &#123; if (root == null) &#123; return; &#125; Queue&lt;Node&gt; queue = new LinkedList&lt;&gt;(); queue.add(root); while (!queue.isEmpty()) &#123; Node node = queue.remove(); if (node.left != null) &#123; queue.add(node.left); &#125; if (node.right != null) &#123; queue.add(node.right); &#125; System.out.println(node.value); &#125; &#125;&#125; å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†ä¸æ ‘çš„å±‚åºéå†ç›¸ä¼¼ï¼Œæ‰€è°“çš„å¹¿åº¦æ˜¯æŒ‡å°½å¯èƒ½çš„éå†æ‰€æœ‰çš„ç›¸é‚»å…ƒç´  å¹¿åº¦ä¼˜å…ˆéå†çš„å®ç°åŒæ ‘çš„å±‚åºéå†ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å€ŸåŠ©äºé˜Ÿåˆ—è¿™ç§æ•°æ®ç»“æ„ï¼Œæ¯æ¬¡ä»é˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºèŠ‚ç‚¹è¿›è¡Œéå†ï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹æ·»åŠ è¿›é˜Ÿåˆ—ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºå›¾æœ‰å¯èƒ½å‘ç”Ÿé‡å¤éå†ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨visited æ ‡è®°å·²éå†çš„èŠ‚ç‚¹ï¼›å¦å¤–è¿˜éœ€è¦è€ƒè™‘åˆ°æœ‰å¤šä¸ªè”é€šåˆ†é‡çš„æƒ…å†µï¼Œä¸æ·±åº¦ä¼˜å…ˆéå†çš„å†™æ³•ç±»ä¼¼ import java.util.ArrayList;import java.util.LinkedList;import java.util.Queue;public class BFSGraph &#123; private Graph graph; private boolean[] visited; private ArrayList&lt;Integer&gt; order; public BFSGraph(Graph graph) &#123; this.graph = graph; visited = new boolean[graph.V()]; order = new ArrayList&lt;&gt;(graph.V()); for (int i = 0; i &lt; graph.V(); i++) &#123; if (!visited[i]) &#123; bfs(i); &#125; &#125; &#125; private void bfs(int s) &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(s); visited[s] = true; while (!queue.isEmpty()) &#123; int v = queue.remove(); order.add(v); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; queue.add(w); visited[w] = true; &#125; &#125; &#125; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g4.txt\"); BFSGraph bfsGraph = new BFSGraph(graph); System.out.println(bfsGraph.order); &#125;&#125; å•æºè·¯å¾„é—®é¢˜å¯¹äºè·¯å¾„é—®é¢˜çš„æ€è·¯åŒDFSï¼Œä½¿ç”¨ä¸€ä¸ª pre æ•°ç»„ï¼Œä¿å­˜å½“å‰èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå½“æŸ¥è¯¢æºèŠ‚ç‚¹åˆ°æŸä¸ªç›®çš„èŠ‚ç‚¹çš„è·¯å¾„æ—¶ï¼Œåªè¦ä»ç›®çš„èŠ‚ç‚¹æ ¹æ® pre æ•°ç»„ä¸€ç›´æŸ¥æ‰¾å®ƒçš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´åˆ°å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºæºèŠ‚ç‚¹å°±æ‰¾åˆ°äº†è·¯å¾„ import java.util.*;public class SingleSourcePath &#123; private Graph graph; private int s; private boolean[] visited; private int[] pre; public SingleSourcePath(Graph graph, int s) &#123; this.graph = graph; this.s = s; visited = new boolean[graph.V()]; pre = new int[graph.V()]; Arrays.fill(visited, false); Arrays.fill(pre, -1); bfs(s); &#125; private void bfs(int s) &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(s); visited[s] = true; pre[s] = s; while (!queue.isEmpty()) &#123; int v = queue.remove(); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; queue.add(w); visited[w] = true; pre[w] = v; &#125; &#125; &#125; &#125; private void validate(int v) &#123; if (v &lt; 0 || v &gt;= graph.V()) &#123; throw new IllegalArgumentException(\"v is out of index\"); &#125; &#125; public boolean isConnected(int t) &#123; validate(t); return visited[t]; &#125; public ArrayList&lt;Integer&gt; path(int t) &#123; ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;(); if (!isConnected(t)) &#123; return res; &#125; int cur = t; while (cur != s) &#123; res.add(cur); cur = pre[cur]; &#125; res.add(s); Collections.reverse(res); return res; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g4.txt\"); SingleSourcePath singleSourcePath = new SingleSourcePath(graph, 0); // 0 -&gt; 6: [0, 2, 6] System.out.println(\"0 -&gt; 6: \" + singleSourcePath.path(6)); &#125;&#125; å¯¹äºåŒæ ·çš„å›¾ï¼Œä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†ï¼Œç»“æœæ˜¯ 0 -&gt; 6: [0, 1, 3, 2, 6] BFS æ‰¾åˆ°çš„è·¯å¾„æ¯” DFS æ‰¾åˆ°çš„è·¯å¾„è¦çŸ­ï¼Œè¿™ä¸æ˜¯å·§åˆï¼Œå› ä¸ºåœ¨æ— å‘æ— ç¯å›¾ä¸­ï¼ŒBFS æœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨å°±æ˜¯å®ƒå¯»æ‰¾åˆ°çš„è·¯å¾„æ˜¯æœ€çŸ­è·¯å¾„ï¼Œæˆ–è€…è¯´ç»å†çš„èŠ‚ç‚¹æœ€å°‘ã€‚ä¸ºä»€ä¹ˆ? æ¢ç§è§’åº¦çœ‹ï¼Œå¹¿åº¦ä¼˜å…ˆéå†æ˜¯æŒ‰ç…§è·ç¦»æºçš„æœ€å°è·ç¦»éå†çš„ã€‚ ä¸‹é¢ä¸€ä¸ªé—®é¢˜æ˜¯å¯»æ‰¾æºåˆ°å„ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œè¿™ä¸ªæœ€ç®€å•çš„å®ç°å°±æ˜¯è·å¾—æºåˆ°å„ç‚¹ä¹‹é—´çš„è·¯å¾„ï¼Œç„¶åè·å¾—è·¯å¾„çš„é•¿åº¦å³å¯æ¨ç®—å‡ºè·ç¦»ã€‚ä¸‹é¢æä¾›ä¸€ç§æ›´å¿«çš„æ–¹æ³•ï¼Œæ— é¡»å…ˆè·å¾—è·¯å¾„ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å£°æ˜ä¸€ä¸ª dis æ•°ç»„æ¥ä¿å­˜æºåˆ°å„ç‚¹çš„è·ç¦»ï¼Œå‡è®¾ w æ˜¯ v çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œä¸” v å…ˆè¢«éå†ï¼Œé‚£ä¹ˆ s -&gt; w çš„è·ç¦»ä¸º s -&gt; v + 1ï¼Œå³ dis[w] = dis[v] + 1 import java.util.*;public class SingleSourcePath &#123; private Graph graph; private int s; private boolean[] visited; private int[] pre; // dis æ•°ç»„ä¿å­˜æºåˆ°å„èŠ‚ç‚¹çš„è·ç¦» private int[] dis; public SingleSourcePath(Graph graph, int s) &#123; this.graph = graph; this.s = s; visited = new boolean[graph.V()]; pre = new int[graph.V()]; // åˆå§‹åŒ– dis = new int[graph.V()]; Arrays.fill(visited, false); Arrays.fill(pre, -1); // åˆå§‹åŒ– Arrays.fill(dis, -1); bfs(s); &#125; private void bfs(int s) &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(s); visited[s] = true; pre[s] = s; // æºåˆ°æºçš„è·ç¦»ä¸º 0 dis[s] = 0; while (!queue.isEmpty()) &#123; int v = queue.remove(); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; queue.add(w); visited[w] = true; pre[w] = v; // æ›´æ–° dis dis[w] = dis[v] + 1; &#125; &#125; &#125; &#125; // ä¸ path ç›¸å…³ä»£ç çœç•¥ public int dis(int t) &#123; validate(t); return dis[t]; &#125;&#125; ç°å®ä¸­æœ‰å¾ˆå¤šçš„é—®é¢˜å¯ä»¥å»ºæ¨¡ä¸ºå›¾è®ºé—®é¢˜ï¼Œç„¶åä½¿ç”¨ DFS ä¸ BFS ç®—æ³•è½»æ¾çš„è§£å†³ï¼Œç°åœ¨æˆ‘ä»¬æ‰“ç®—ä» LeetCode é€‰æ‹©å‡ é“é¢˜ï¼Œæ¥äº†è§£å¦‚ä½•å°†ç°å®é—®é¢˜å»ºæ¨¡ä¸ºå›¾è®ºé—®é¢˜ã€‚ å›¾è®ºå»ºæ¨¡äºŒåˆ†å›¾æ£€æµ‹é¢˜ç›®ä»‹ç»ç»™å®šä¸€ä¸ªæ— å‘å›¾graphï¼Œå½“è¿™ä¸ªå›¾ä¸ºäºŒåˆ†å›¾æ—¶è¿”å›trueã€‚å¦‚æœæˆ‘ä»¬èƒ½å°†ä¸€ä¸ªå›¾çš„èŠ‚ç‚¹é›†åˆåˆ†å‰²æˆä¸¤ä¸ªç‹¬ç«‹çš„å­é›† A å’Œ Bï¼Œå¹¶ä½¿å›¾ä¸­çš„æ¯ä¸€æ¡è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸€ä¸ªæ¥è‡ª A é›†åˆï¼Œä¸€ä¸ªæ¥è‡ª B é›†åˆï¼Œæˆ‘ä»¬å°±å°†è¿™ä¸ªå›¾ç§°ä¸ºäºŒåˆ†å›¾ã€‚ graph å°†ä¼šä»¥é‚»æ¥è¡¨æ–¹å¼ç»™å‡ºï¼Œgraph[i] è¡¨ç¤ºå›¾ä¸­ä¸èŠ‚ç‚¹ i ç›¸è¿çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªåœ¨ 0 åˆ°graph.length-1 ä¹‹é—´çš„æ•´æ•°ã€‚è¿™å›¾ä¸­æ²¡æœ‰è‡ªç¯å’Œå¹³è¡Œè¾¹ï¼š graph[i] ä¸­ä¸å­˜åœ¨ iï¼Œå¹¶ä¸” graph[i] ä¸­æ²¡æœ‰é‡å¤çš„å€¼ã€‚ æ³¨æ„: graph çš„é•¿åº¦èŒƒå›´ä¸º [1, 100]ã€‚ graph[i] ä¸­çš„å…ƒç´ çš„èŒƒå›´ä¸º [0, graph.length - 1]ã€‚ graph[i] ä¸ä¼šåŒ…å« i æˆ–è€…æœ‰é‡å¤çš„å€¼ã€‚ å›¾æ˜¯æ— å‘çš„: å¦‚æœ j åœ¨ graph[i] é‡Œè¾¹, é‚£ä¹ˆ i ä¹Ÿä¼šåœ¨ graph[j] é‡Œè¾¹ã€‚ è§£é¢˜æ€è·¯è¿™é“é¢˜çš„è§£æ³•æ˜¯å¯¹å›¾ä¸­çš„èŠ‚ç‚¹æŸ“è‰²ï¼Œæˆ‘ä»¬ä½¿ç”¨ DFS éå†è¯¥å›¾ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œé‚£ä¹ˆå°±å°†å®ƒæœªè®¿é—®è¿‡çš„ç›¸é‚»çš„èŠ‚ç‚¹æŸ“ä¸ºç»¿è‰²ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹é¢œè‰²ä¸ºç»¿è‰²ï¼Œå°±å°†æœªè®¿é—®è¿‡çš„ç›¸é‚»èŠ‚ç‚¹æŸ“ä¸ºçº¢è‰²ï¼Œæ ¹æ®é¢œè‰²æ¥åŒºåˆ†ä¸¤ä¸ªé›†åˆã€‚ å› ä¸ºä¸€æ¡è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹å±äºä¸¤ä¸ªä¸åŒçš„å‡ ä¸ªé›†åˆï¼Œæ‰€ä»¥ä¸€æ¡è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹çš„é¢œè‰²æ˜¯ä¸åŒçš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨éå†çš„è¿‡ç¨‹ä¸­å‘ç°å·²è¢«è®¿é—®è¿‡çš„ç›¸é‚»çš„èŠ‚ç‚¹çš„é¢œè‰²ä¸å½“å‰èŠ‚ç‚¹çš„é¢œè‰²ç›¸åŒï¼Œè¯´æ˜å®ƒä¸ç¬¦åˆäºŒåˆ†å›¾çš„å®šä¹‰ï¼Œä¸æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ï¼›å¦‚æœéå†å›¾ä¸­æ‰€æœ‰çš„è”é€šåˆ†é‡ï¼Œéƒ½æ²¡æœ‰äº§ç”ŸçŸ›ç›¾ï¼Œè¯´æ˜è¿™ä¸ªå›¾å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ã€‚ class Solution &#123; private boolean[] visited; // true è¡¨ç¤ºçº¢è‰²ï¼Œfalse è¡¨ç¤ºç»¿è‰²ï¼Œé»˜è®¤ä¸ºç»¿è‰² private boolean[] colors; public boolean isBipartite(int[][] graph) &#123; visited = new boolean[graph.length]; colors = new boolean[graph.length]; // éå†æ‰€æœ‰çš„è”é€šåˆ†é‡ for (int i = 0; i &lt; graph.length; i++) &#123; if (!visited[i]) &#123; if (!dfs(i, graph)) &#123; return false; &#125; &#125; &#125; return true; &#125; // dfs è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨ä»¥å½“ä¸ä¸ºäºŒåˆ†å›¾æ—¶æå‰ç»ˆæ­¢éå† private boolean dfs(int v, int[][] graph) &#123; visited[v] = true; for (int w: graph[v]) &#123; // å¦‚æœæœªè®¿é—®è¿‡ï¼ŒæŸ“ä¸ºç›¸åçš„é¢œè‰² if (!visited[w]) &#123; colors[w] = !colors[v]; // ç»§ç»­éå† if (!dfs(w, graph)) return false; // å¦‚æœå·²æ”¾è®¿é—®è¿‡ï¼Œä¸”ç›¸é‚»èŠ‚ç‚¹é¢œè‰²ç›¸åŒï¼Œä¸æ˜¯äºŒåˆ†å›¾ &#125; else if (visited[w] &amp;&amp; colors[w] == colors[v]) &#123; return false; &#125; &#125; // æœªå‘ç°çŸ›ç›¾ï¼Œä¸ºäºŒåˆ†å›¾ return true; &#125;&#125; å²›å±¿çš„æœ€å¤§é¢ç§¯é¢˜ç›®ä»‹ç»ç»™å®šä¸€ä¸ªåŒ…å«äº†ä¸€äº› 0 å’Œ 1 çš„éç©ºäºŒç»´æ•°ç»„ grid ã€‚ä¸€ä¸ªå²›å±¿æ˜¯ç”±ä¸€äº›ç›¸é‚»çš„ 1 (ä»£è¡¨åœŸåœ°) æ„æˆçš„ç»„åˆï¼Œè¿™é‡Œçš„ã€Œç›¸é‚»ã€è¦æ±‚ä¸¤ä¸ª 1 å¿…é¡»åœ¨æ°´å¹³æˆ–è€…ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»ã€‚ä½ å¯ä»¥å‡è®¾ grid çš„å››ä¸ªè¾¹ç¼˜éƒ½è¢« 0 (ä»£è¡¨æ°´) åŒ…å›´ç€ã€‚ æ‰¾åˆ°ç»™å®šçš„äºŒç»´æ•°ç»„ä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯(å¦‚æœæ²¡æœ‰å²›å±¿ï¼Œåˆ™è¿”å›é¢ç§¯ä¸º 0 )ã€‚ æ³¨æ„: ç»™å®šçš„çŸ©é˜µgrid çš„é•¿åº¦å’Œå®½åº¦éƒ½ä¸è¶…è¿‡ 50ã€‚ è§£é¢˜æ€è·¯æˆ‘ä»¬å°†è¿™ä¸ªçŸ©é˜µçœ‹åšæ˜¯ä¸€ä¸ªå›¾ï¼ŒçŸ©é˜µä¸­æ‰€æœ‰çš„ 1 å°±æ˜¯ä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹ï¼Œå¦‚æœä¸¤ä¸ª 1 æ˜¯å‚ç›´æˆ–è€…æ°´å¹³ç›¸é‚»çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºå®ƒä»¬è¢«ä¸€æ¡è¾¹è¿ç€ï¼Œå³åœ¨ä¸€ä¸ªè”é€šåˆ†é‡ä¸­ï¼Œè€Œæˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯æ‰¾å‡ºåŒ…å«èŠ‚ç‚¹æœ€å¤šçš„è”é€šåˆ†é‡ï¼Œå¹¶è¿”å›èŠ‚ç‚¹æ•°ç›®ã€‚ import java.util.Arrays;import java.util.stream.Collectors;public class Solution &#123; private int rows; private int columns; private boolean[][] visited; private int[][] grid; public int maxAreaOfIsland(int[][] grid) &#123; // å› ä¸ºé¢˜ç›®æ²¡è¯´ grid ä¸ä¸ºç©ºï¼Œæ‰€ä»¥ä¸‹é¢æ˜¯å¯¹ grid çš„ä¸€äº›æ ¡éªŒ if (grid == null) &#123; return 0; &#125; this.rows = grid.length; if (rows == 0) &#123; return 0; &#125; this.columns = grid[0].length; if (columns == 0) &#123; return 0; &#125; this.grid = grid; this.visited = new boolean[rows][columns]; // æœ€å¤§å²›å±¿æ•°ç›® int max = 0; for (int row = 0; row &lt; rows; row++) &#123; for (int column = 0; column &lt; columns; column++) &#123; if (!visited[row][column] &amp;&amp; grid[row][column] == 1) &#123; // dfs è¿”å›çš„æ‰€åœ¨è”é€šåˆ†é‡çš„èŠ‚ç‚¹æ•°ç›® max = Math.max(max, dfs(row, column)); &#125; &#125; &#125; return max; &#125; // è¡¨ç¤ºä»¥ [row, column] ä¸ºèµ·ç‚¹è¿›è¡Œ DFS éå†æ‰€åœ¨è”é€šåˆ†é‡åŒ…å«çš„èŠ‚ç‚¹æ•°ç›® private int dfs(int row,int column) &#123; int count = 1; visited[row][column] = true; for (int[] w: adj(row, column)) &#123; int nextRow = w[0]; int nextColumn = w[1]; if (grid[nextRow][nextColumn] == 0) &#123; continue; &#125; if (!visited[nextRow][nextColumn]) &#123; count += dfs(nextRow, nextColumn); &#125; &#125; return count; &#125; // è·å¾—å½“å‰èŠ‚ç‚¹å››ä¸ªæ–¹å‘ä¸Šçš„ç›¸é‚»èŠ‚ç‚¹ private Iterable&lt;int[]&gt; adj(int row, int column) &#123; int[][] dirs = &#123;&#123;-1, 0&#125;, &#123;0, -1&#125;, &#123;0, 1&#125;, &#123;1, 0&#125;&#125;; return Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .collect(Collectors.toList()); &#125;&#125; äºŒè¿›åˆ¶çŸ©é˜µä¸­çš„æœ€çŸ­è·¯å¾„é¢˜ç›®ä»‹ç»åœ¨ä¸€ä¸ª $N \\times N$ çš„æ–¹å½¢ç½‘æ ¼ä¸­ï¼Œæ¯ä¸ªå•å…ƒæ ¼æœ‰ä¸¤ç§çŠ¶æ€ï¼šç©ºï¼ˆ0ï¼‰æˆ–è€…é˜»å¡ï¼ˆ1ï¼‰ã€‚ç°åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä» $(0, 0)$ åˆ°è¾¾ $(N-1, N-1)$ï¼Œå³ä»å·¦ä¸Šè§’åˆ°è¾¾å³ä¸‹è§’ï¼Œè€Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯»æ‰¾ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼Œå¹¶ä¸”è¿”å›è¿™æ¡è·¯å¾„çš„é•¿åº¦ã€‚å¦‚æœæ— æ³•ä»å·¦ä¸Šè§’è¾¾åˆ°å³ä¸‹è§’ï¼Œåˆ™è¿”å› -1ã€‚ æ¯ä¸ªå•å…ƒæ ¼æœ‰ 8 ç§å¯èƒ½çš„æ–¹å‘ ä¸‹é¢ç»™å‡ºä¸€ä¸ªç¤ºä¾‹ è§£é¢˜æ€è·¯æˆ‘ä»¬å°†æ–¹æ ¼çœ‹åšæ˜¯ä¸€ä¸ªå›¾ï¼Œæ–¹æ ¼ä¸­æ‰€æœ‰çš„ 0 çœ‹åšæ˜¯å›¾ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¸¤ä¸ª 0 åœ¨å„è‡ªçš„ 8 ä¸ªæ–¹å‘ä¹‹ä¸­ï¼Œå°±è¯´æ˜è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ã€‚ä¸ºäº†æ±‚å¾—æœ€çŸ­è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦ä»å·¦ä¸Šè§’è¿™ä¸ªèŠ‚ç‚¹è¿›è¡Œ BFSï¼Œä½¿ç”¨ dis[i][j] è®°å½• $(i, j)$ è·ç¦» $(0, 0)$ çš„è·ç¦»ï¼Œæ‰€ä»¥ $dis[N-1][N-1]$ ä¹Ÿå°±è¡¨ç¤ºä»å·¦ä¸Šè§’åˆ°è¾¾å³ä¸‹è§’çš„æœ€çŸ­è·¯å¾„ã€‚ import java.util.Arrays;import java.util.LinkedList;import java.util.Queue;import java.util.stream.Collectors;class Solution &#123; private boolean[][] visited; private int[][] dis; private int rows; private int columns; public int shortestPathBinaryMatrix(int[][] grid) &#123; this.rows = grid.length; this.columns = grid[0].length; if (grid[0][0] == 1 || grid[rows - 1][columns - 1] == 1) &#123; return -1; &#125; if (rows == 1 &amp;&amp; grid[rows][columns] == 0) &#123; return 1; &#125; dis = new int[rows][columns]; visited = new boolean[rows][columns]; Queue&lt;int[]&gt; queue = new LinkedList&lt;&gt;(); queue.add(new int[]&#123;0, 0&#125;); visited[0][0] = true; dis[0][0] = 1; while (!queue.isEmpty()) &#123; int[] location = queue.remove(); int row = location[0]; int column = location[1]; for (int[] nextLocation: adj(row, column)) &#123; int nextRow = nextLocation[0]; int nextColumn = nextLocation[1]; if (!visited[nextRow][nextColumn] &amp;&amp; grid[nextRow][nextColumn] == 0) &#123; queue.add(new int[]&#123;nextRow, nextColumn&#125;); visited[nextRow][nextColumn] = true; dis[nextRow][nextColumn] = dis[row][column] + 1; if (nextRow == rows - 1 &amp;&amp; nextColumn == columns - 1) &#123; return dis[nextRow][nextColumn]; &#125; &#125; &#125; &#125; return -1; &#125; private Iterable&lt;int[]&gt; adj(int row, int column) &#123; int[][] dirs = &#123;&#123;-1, 0&#125;, &#123;0, -1&#125;, &#123;0, 1&#125;, &#123;1, 0&#125;, &#123;1, 1&#125;, &#123;-1, 1&#125;, &#123;1, -1&#125;, &#123;-1, -1&#125;&#125;; return Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .collect(Collectors.toList()); &#125;&#125; æ‰“å¼€è½¬ç›˜é”é¢˜ç›®ä»‹ç»ä½ æœ‰ä¸€ä¸ªå¸¦æœ‰å››ä¸ªåœ†å½¢æ‹¨è½®çš„è½¬ç›˜é”ã€‚æ¯ä¸ªæ‹¨è½®éƒ½æœ‰10ä¸ªæ•°å­—ï¼š â€˜0â€™, â€˜1â€™, â€˜2â€™, â€˜3â€™, â€˜4â€™, â€˜5â€™, â€˜6â€™, â€˜7â€™, â€˜8â€™, â€˜9â€™ ã€‚æ¯ä¸ªæ‹¨è½®å¯ä»¥è‡ªç”±æ—‹è½¬ï¼šä¾‹å¦‚æŠŠ â€˜9â€™ å˜ä¸º â€˜0â€™ï¼Œâ€™0â€™ å˜ä¸º â€˜9â€™ ã€‚æ¯æ¬¡æ—‹è½¬éƒ½åªèƒ½æ—‹è½¬ä¸€ä¸ªæ‹¨è½®çš„ä¸€ä½æ•°å­—ã€‚ é”çš„åˆå§‹æ•°å­—ä¸º â€˜0000â€™ ï¼Œä¸€ä¸ªä»£è¡¨å››ä¸ªæ‹¨è½®çš„æ•°å­—çš„å­—ç¬¦ä¸²ã€‚åˆ—è¡¨ deadends åŒ…å«äº†ä¸€ç»„æ­»äº¡æ•°å­—ï¼Œä¸€æ—¦æ‹¨è½®çš„æ•°å­—å’Œåˆ—è¡¨é‡Œçš„ä»»ä½•ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œè¿™ä¸ªé”å°†ä¼šè¢«æ°¸ä¹…é”å®šï¼Œæ— æ³•å†è¢«æ—‹è½¬ã€‚å­—ç¬¦ä¸² target ä»£è¡¨å¯ä»¥è§£é”çš„æ•°å­—ï¼Œä½ éœ€è¦ç»™å‡ºæœ€å°çš„æ—‹è½¬æ¬¡æ•°ï¼Œå¦‚æœæ— è®ºå¦‚ä½•ä¸èƒ½è§£é”ï¼Œè¿”å› -1ã€‚ è§£é¢˜æ€è·¯æˆ‘ä»¬æŠŠå¯†ç é”çš„ä¸€ç§ç»„åˆç§°ä¹‹ä¸ºä¸€ç§çŠ¶æ€ï¼Œä¾‹å¦‚ 0000 è¿™ä¸ªç»„åˆè¡¨ç¤ºçš„å°±æ˜¯ä¸€ç§çŠ¶æ€ï¼Œç°åœ¨æˆ‘ä»¬çš„æ¨¡æ¿æ˜¯å°† 0000 è¿™ç§çŠ¶æ€è½¬å˜åˆ° target è¡¨ç¤ºçš„çŠ¶æ€ï¼Œå¹¶ä¸”è¦æ±‚æ­¥éª¤æœ€å°‘ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠä¸€ç§çŠ¶æ€å»ºæ¨¡ä¸ºå›¾ä¸­çš„é¡¶ç‚¹ï¼Œå¦‚æœä¸€ä¸ªçŠ¶æ€èƒ½å¤Ÿè½¬å˜ä¸ºå¦ä¸€ç§çŠ¶æ€ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªçŠ¶æ€è¡¨ç¤ºçš„èŠ‚ç‚¹ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ã€‚å¯¹äºå¯†ç é”æ¥è¯´ï¼Œæ¯ä¸€ä¸ªæ‹¨è½®å¯ä»¥å‰åæ»šåŠ¨ï¼Œå…±æœ‰å››ä¸ªæ‹¨è½®ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªçŠ¶æ€æœ€å¤šä¸ 8 ä¸ªçŠ¶æ€ç›¸é‚»(è€ƒè™‘åˆ° deadendsï¼Œå°‘äº 8 ä¸ª)ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ä» 0000 è¿™ä¸ªçŠ¶æ€å¼€å§‹ BFS éå†ï¼Œå³å¯æ‰¾åˆ°æœ€å°‘åˆ° target çš„æ‹¨åŠ¨æ¬¡æ•°ã€‚ import java.util.*;import java.util.stream.Collectors;class Solution &#123; public int openLock(String[] deadends, String target) &#123; if (\"0000\".equals(target)) &#123; return 0; &#125; HashSet&lt;String&gt; deadSet = new HashSet&lt;&gt;(); for (int i = 0; i &lt; deadends.length; i++) &#123; deadSet.add(deadends[i]); &#125; if (deadSet.contains(\"0000\"))&#123; return -1; &#125; HashSet&lt;String&gt; visited = new HashSet&lt;&gt;(); HashMap&lt;String, Integer&gt; dis = new HashMap&lt;&gt;(); Queue&lt;String&gt; queue = new LinkedList(); queue.add(\"0000\"); visited.add(\"0000\"); dis.put(\"0000\", 0); while (!queue.isEmpty()) &#123; String state = queue.remove(); for (String nextState: adj(state, deadSet)) &#123; if (!visited.contains(nextState)) &#123; queue.add(nextState); visited.add(nextState); dis.put(nextState, dis.get(state) + 1); if (target.equals(nextState)) &#123; return dis.get(nextState); &#125; &#125; &#125; &#125; return -1; &#125; private Iterable&lt;String&gt; adj(String state, HashSet&lt;String&gt; deadSet) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 4; i++) &#123; char[] chars = state.toCharArray(); char s = chars[i]; chars[i] = Character.forDigit((chars[i] - '0' + 1) % 10, 10); list.add(new String(chars)); chars[i] = s; chars[i] = Character.forDigit((chars[i] - '0' - 1 + 10) % 10, 10); list.add(new String(chars)); &#125; return list.stream().filter(s -&gt; !deadSet.contains(s)).collect(Collectors.toList()); &#125;&#125; å€’æ°´æ™ºåŠ›é¢˜æœ‰ä¸¤ä¸ªæ¡¶ï¼Œä¸€ä¸ªèƒ½è£… 5 å‡æ°´ï¼Œä¸€ä¸ªèƒ½è£… 3 å‡æ°´ï¼Œå¦‚ä½•å¾—åˆ° 4 å‡æ°´? è¿™é“é¢˜è¿˜æ˜¯å°†çŠ¶æ€çœ‹åšæ˜¯ä¸€ä¸ªå›¾çš„èŠ‚ç‚¹ï¼Œå¦‚æœçŠ¶æ€ä¹‹é—´èƒ½å¤Ÿäº’ç›¸è½¬å˜ï¼Œå°±è¯´çŠ¶æ€ä¹‹å‰æœ‰ä¸€æ¡è¾¹ã€‚æˆ‘ä»¬å®šä¹‰çŠ¶æ€ &lt;x,y&gt; è¡¨ç¤ºç¬¬ä¸€ä¸ªæ¡¶æœ‰ x å‡æ°´ï¼Œç¬¬äºŒä¸ªæ¡¶æœ‰ y å‡æ°´ã€‚é‚£ä¹ˆ &lt;x, y&gt; ä¸å“ªäº›çŠ¶æ€æ˜¯ç›¸è¿çš„å‘¢ï¼Œåˆ†ä¸ºå…­ç§æƒ…å†µï¼š å€’ç©ºç¬¬ä¸€æ¡¶æ°´ï¼š&lt;x, y&gt; =&gt; &lt;0, y&gt; å€’ç©ºç¬¬äºŒæ¡¶æ°´ï¼š&lt;x, y&gt; =&gt; &lt;x, 0&gt; åŠ æ»¡ç¬¬ä¸€æ¡¶æ°´ï¼š&lt;x, y&gt; =&gt; &lt;5, y&gt; åŠ æ»¡ç¬¬äºŒæ¡¶æ°´ï¼š&lt;x, y&gt; =&gt; &lt;x, 3&gt; ç¬¬äºŒæ¡¶æ°´å€’å…¥ç¬¬ä¸€æ¡¶æ°´ï¼š $x + y \\geq 5$ï¼š&lt;x, y&gt; =&gt; &lt;5, x + y - 5&gt; $x + y &lt; 5$ï¼š&lt;x, y&gt; =&gt; &lt;x + y, 0&gt; ç¬¬ä¸€æ¡¶æ°´å€’å…¥ç¬¬äºŒæ¡¶æ°´ï¼š $x + y \\geq 3$ï¼š&lt;x, y&gt; =&gt; &lt;x + y - 3, 3&gt; $x + y &lt; 3$ï¼š&lt;x, y&gt; =&gt; &lt;0, x + y&gt; æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¸¤ä½æ•°è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€ï¼Œåä½æ•°è¡¨ç¤ºç¬¬ä¸€ä¸ªæ¡¶ä¸­æœ‰å¤šå°‘å‡æ°´ï¼Œä¸ªä½æ•°è¡¨ç¤ºç¬¬äºŒä¸ªæ¡¶ä¸­æœ‰å¤šå°‘å‡æ°´ï¼Œä¾‹å¦‚ 23 è¡¨ç¤ºç¬¬ä¸€ä¸ªæ¡¶ä¸­æœ‰ 2 å‡æ°´ï¼Œç¬¬äºŒä¸ªæ¡¶ä¸­æœ‰ 3 å‡æ°´ã€‚ import java.util.*;public class WaterPuzzle &#123; public Iterable&lt;Integer&gt; waterPuzzle() &#123; HashSet&lt;Integer&gt; visited = new HashSet&lt;&gt;(); HashMap&lt;Integer, Integer&gt; pre = new HashMap&lt;&gt;(); Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(0); visited.add(0); pre.put(0, 0); // ä¿å­˜æœ€åæ‰¾åˆ°çš„ç»“æœ int endState = 0; // ç”¨ä»¥è·³å‡º while å¾ªç¯ boolean flag = false; while (!queue.isEmpty()) &#123; int state = queue.remove(); for (int nextState: adj(state)) &#123; if (!visited.contains(nextState)) &#123; visited.add(nextState); queue.add(nextState); pre.put(nextState, state); if (nextState / 10 == 4 || nextState % 10 == 4) &#123; endState = nextState; flag = true; break; &#125; &#125; &#125; if (flag) &#123; break; &#125; &#125; ArrayList&lt;Integer&gt; result = new ArrayList(); int cur = endState; result.add(cur); while (pre.get(cur) != 0) &#123; cur = pre.get(cur); result.add(cur); &#125; Collections.reverse(result); return result; &#125; private Iterable&lt;Integer&gt; adj(int state) &#123; int first = state / 10; int second = state % 10; Set&lt;Integer&gt; set = new HashSet&lt;&gt;(); set.add(second); set.add(first*10); set.add(5*10 + second); set.add(first * 10 + 3); if (first + second &gt;= 5) &#123; set.add(5 * 10 + (first + second) - 5); &#125; else &#123; set.add((first + second) * 10); &#125; if (first + second &gt;= 3) &#123; set.add((first + second - 3) * 10 + 3); &#125; else &#123; set.add(first + second); &#125; return new ArrayList&lt;&gt;(set); &#125; public static void main(String[] args) &#123; WaterPuzzle waterPuzzle = new WaterPuzzle(); for (int r: waterPuzzle.waterPuzzle()) &#123; // åœ¨ä¸ªä½æ•°å‰åŠ ä¸Š0 System.out.print((r &gt;= 10 ? r : \"0\" + r) + \" \"); &#125; &#125;&#125; è¾“å‡ºä¸º 50 23 20 02 52 43 æ»‘åŠ¨è°œé¢˜é¢˜ç›®ä»‹ç»åœ¨ä¸€ä¸ª 2 x 3 çš„æ¿ä¸Šï¼ˆboardï¼‰æœ‰ 5 å—ç –ç“¦ï¼Œç”¨æ•°å­— 1~5 æ¥è¡¨ç¤º, ä»¥åŠä¸€å—ç©ºç¼ºç”¨ 0 æ¥è¡¨ç¤ºã€‚ä¸€æ¬¡ç§»åŠ¨å®šä¹‰ä¸ºé€‰æ‹© 0 ä¸ä¸€ä¸ªç›¸é‚»çš„æ•°å­—ï¼ˆä¸Šä¸‹å·¦å³ï¼‰è¿›è¡Œäº¤æ¢ã€‚æœ€ç»ˆå½“æ¿ board çš„ç»“æœæ˜¯ [[1,2,3],[4,5,0]] è°œæ¿è¢«è§£å¼€ã€‚ ç»™å‡ºä¸€ä¸ªè°œæ¿çš„åˆå§‹çŠ¶æ€ï¼Œè¿”å›æœ€å°‘å¯ä»¥é€šè¿‡å¤šå°‘æ¬¡ç§»åŠ¨è§£å¼€è°œæ¿ï¼Œå¦‚æœä¸èƒ½è§£å¼€è°œæ¿ï¼Œåˆ™è¿”å› -1 ã€‚ è§£é¢˜æ€è·¯æˆ‘ä»¬å°†è°œæ¿ä¸Šçš„ä¸€ä¸ªç»„åˆçœ‹åšæ˜¯ä¸€ä¸ªçŠ¶æ€ï¼Œä¸€ä¸ªçŠ¶æ€å°±æ˜¯å›¾ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¸€ä¸ªçŠ¶æ€èƒ½å¤Ÿè½¬å˜åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªçŠ¶æ€èŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹è¿æ¥ã€‚æˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²æ¥è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€ï¼Œä¾‹å¦‚ [[1, 4, 5], [0, 2, 3]] è¿™ä¸ªçŠ¶æ€è¡¨ç¤ºä¸º &quot;145023&quot;ï¼Œç°åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯»æ‰¾ä¸€æ¡ä»åˆå§‹çŠ¶æ€åˆ° &quot;123450&quot; è¿™ä¸ªçŠ¶æ€çš„æœ€çŸ­è·¯å¾„ï¼Œä½¿ç”¨ BFS ç®—æ³•å³å¯ import java.util.*;import java.util.stream.Collectors;public class Solution &#123; private HashMap&lt;String, Integer&gt; visited = new HashMap&lt;&gt;(); private int rows; private int columns; public int slidingPuzzle(int[][] board) &#123; this.rows = board.length; this.columns = board[0].length; String initState = boardToString(board); if (initState.equals(\"123450\")) &#123; return 0; &#125; Queue&lt;String&gt; queue = new LinkedList(); queue.add(initState); visited.put(initState, 0); while (!queue.isEmpty()) &#123; String state = queue.remove(); for (String nextState: adj(state)) &#123; if (!visited.containsKey(nextState)) &#123; queue.add(nextState); visited.put(nextState, visited.get(state) + 1); if (\"123450\".equals(nextState)) &#123; return visited.get(nextState); &#125; &#125; &#125; &#125; return -1; &#125; private String boardToString(int[][] board) &#123; StringBuilder stringBuilder = new StringBuilder(); for (int i = 0; i &lt; rows; i++) &#123; for (int j = 0; j &lt; columns; j++) &#123; stringBuilder.append(board[i][j]); &#125; &#125; return stringBuilder.toString(); &#125; private Iterable&lt;String&gt; adj(String state) &#123; ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;(); char[] chars = state.toCharArray(); int index = state.indexOf(\"0\"); int row = index / columns; int column = index % columns; int[][] dirs = &#123;&#123;0, 1&#125;, &#123;0, -1&#125;, &#123;1, 0&#125;, &#123;-1, 0&#125;&#125;; List&lt;Integer&gt; locations = Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .map(item -&gt; item[0] * columns + item[1]) .collect(Collectors.toList()); for (int i: locations) &#123; String res = swap(chars, index, i); result.add(res); swap(chars, i, index); &#125; return result; &#125; private String swap(char[] chars, int i, int j) &#123; char temp = chars[i]; chars[i] = chars[j]; chars[j] = temp; return new String(chars); &#125;&#125; æ¡¥å’Œå‰²ç‚¹æ¡¥å®šä¹‰æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹æ¡¥çš„æ¦‚å¿µ ä¸Šé¢è¿™å¹…å›¾ä¸­ï¼Œæˆ‘ä»¬ç§°èŠ‚ç‚¹ 3-5 ä¹‹é—´çš„è¿™æ¡è¾¹ä¸ºæ¡¥ï¼Œå®ƒå…·æœ‰ä»€ä¹ˆç‰¹ç‚¹å‘¢? ä¸€æ—¦å°†è¿™æ¡è¾¹å»æ‰ï¼Œå›¾çš„è”é€šåˆ†é‡å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æœ‰å¦‚ä¸‹å®šä¹‰ï¼š å¦‚æœå»æ‰æŸæ¡è¾¹ï¼Œä½¿å¾—å›¾çš„è”é€šåˆ†é‡å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç§°è¿™æ¡è¾¹ä¸ºæ¡¥ã€‚ æ¡¥å¯ä»¥çœ‹åšæ˜¯å›¾ä¸­æœ€è„†å¼±çš„é‚£æ¡è¾¹ï¼Œå¦‚æœå°†äº¤é€šç³»ç»Ÿå»ºæ¨¡ä¸ºä¸€ä¸ªå›¾çš„è¯ï¼Œæ¡¥å°±æ˜¯äº¤é€šç³»ç»Ÿä¸­æœ€è„†å¼±çš„éƒ¨åˆ†ï¼Œåœ¨å†›äº‹ä¸­å¦‚æœæˆ‘ä»¬çŸ¥é“å¯¹æ–¹äº¤é€šç³»ç»Ÿä¸­çš„æ¡¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å†›äº‹æ‰“å‡»è¿™ä¸ªæ¡¥ï¼Œä½¿å¾—å¯¹æ–¹çš„äº¤é€šç³»ç»Ÿç˜«ç—ªã€‚ å¯»æ‰¾æ¡¥å¦‚ä½•åˆ¤æ–­æŸæ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥ï¼Œå¯¹äºä¸‹å›¾æ¥è¯´ï¼Œ 0-1 è¿™æ¡è¾¹æ˜¯æ¡¥å—? ç­”æ¡ˆä¸æ˜¯ï¼Œå› ä¸ºå»æ‰ 0-1 è¿™æ¡è¾¹è”é€šåˆ†é‡çš„ä¸ªæ•°æ²¡æœ‰å¢åŠ ï¼ŒåŸå› æ˜¯èŠ‚ç‚¹ 1 å¯ä»¥é€šè¿‡å¦ä¸€æ¡è·¯å¾„ 1-&gt;3-&gt;2-&gt;0 åˆ°è¾¾ 0ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ¤æ–­æŸæ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥ï¼Œå°±æ˜¯åˆ¤æ–­è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æœ‰å¦å¤–ä¸€æ¡è·¯å¾„ã€‚è€ƒè™‘è¾¹ v-wï¼Œå¦‚æœå­˜åœ¨å¦å¤–ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—èŠ‚ç‚¹ v å¯ä»¥åˆ°è¾¾èŠ‚ç‚¹ w æˆ–è€…æ˜¯èŠ‚ç‚¹ w ä¹‹å‰çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±è®¤ä¸º v-w ä¸æ˜¯æ¡¥ï¼Œå¦åˆ™æ²¡æœ‰å¦å¤–çš„è·¯å¾„ä½¿å¾—èŠ‚ç‚¹ v åˆ°è¾¾èŠ‚ç‚¹ wï¼Œæˆ‘ä»¬å°±è®¤ä¸º v-w æ˜¯æ¡¥ã€‚ ä¸ºäº†å®Œæˆè¿™ä¸ªåˆ¤æ–­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªå˜é‡æ¥å¸®åŠ©æˆ‘ä»¬ä¿å­˜ä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯ order[] æ•°ç»„ï¼Œå®ƒä¿å­˜çš„æ˜¯ä»¥ DFS éå†å›¾çš„é¡ºåºï¼Œä¾‹å¦‚ order[0] = 0ï¼Œè¡¨ç¤ºèŠ‚ç‚¹ 0 æ˜¯ç¬¬ 0 ä¸ªéå†çš„ï¼Œorder[3] = 2 è¡¨ç¤ºèŠ‚ç‚¹ 3 æ˜¯ç¬¬ 2 ä¸ªéå†çš„ å¦ä¸€ä¸ªéœ€è¦è®°å½•çš„ä¿¡æ¯æ˜¯å½“å‰èŠ‚ç‚¹é€šè¿‡å¦å¤–ä¸€æ¡è·¯å¾„(å³ä¸æ˜¯çˆ¶èŠ‚ç‚¹é‚£æ¡è·¯å¾„)èƒ½å¤Ÿè¾¾åˆ°çš„é¡ºåºæœ€å‰çš„èŠ‚ç‚¹ï¼Œä½¿ç”¨æ•°ç»„ low è¡¨ç¤ºï¼Œå‡è®¾èŠ‚ç‚¹ 2 èƒ½å¤Ÿè¾¾åˆ°æœ€å‰çš„èŠ‚ç‚¹ 0ï¼Œè€Œ order[0] = 0ï¼Œæ‰€ä»¥ low[2] = order[0] = 0ï¼Œåˆå§‹ low[i] = order[i]ï¼Œæ›´æ–° low æ•°ç»„æœ‰ä¸¤ä¸ªæ—¶æœº èŠ‚ç‚¹ v è®¿é—®å·²è¢«éå†è¿‡çš„é‚»æ¥èŠ‚ç‚¹ w æ—¶(è¯¥é‚»æ¥èŠ‚ç‚¹ä¸ä¸ºçˆ¶èŠ‚ç‚¹)ï¼Œå¦‚æœ low[w] &lt; low[v]ï¼Œåˆ™æ›´æ–° low[v] = low[w] å½“æˆ‘ä»¬è®¿é—®åˆ°èŠ‚ç‚¹ 2 æ—¶ï¼Œæ¥ç€è®¿é—®èŠ‚ç‚¹ 2 çš„é‚»æ¥èŠ‚ç‚¹ï¼Œè®¿é—®åˆ°èŠ‚ç‚¹ 0ï¼ŒèŠ‚ç‚¹ 0 ä¸æ˜¯å®ƒçš„çˆ¶äº²èŠ‚ç‚¹(ä¸Šä¸€ä¸ªèŠ‚ç‚¹)ï¼Œè€Œä¸”èŠ‚ç‚¹ 0 å·²ç»è¢«è®¿é—®è¿‡ï¼Œå¹¶ä¸” low[0] &lt; low[2]ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æ›´æ–° low[2] = low[0]ï¼Œè¡¨ç¤ºèŠ‚ç‚¹ 2 èƒ½é€šè¿‡å¦ä¸€æ¡è·¯å¾„è®¿é—®ç¬¬ low[0] ä¸ªéå†çš„èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹ 2 èƒ½å¤Ÿè®¿é—®åˆ°ç¬¬ 0 ä¸ªè¢«éå†çš„èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹ 0 è®¿é—®å®Œé‚»æ¥èŠ‚ç‚¹ wï¼Œå›åˆ°å½“å‰èŠ‚ç‚¹ v æ—¶ï¼Œå¦‚æœé‚»æ¥èŠ‚ç‚¹çš„ low[w] &lt; low[v]ï¼Œåˆ™æ›´æ–° low[v] = low[w] å½“èŠ‚ç‚¹è®¿é—®å®ŒèŠ‚ç‚¹ 2 å›åˆ°èŠ‚ç‚¹ 3 æ—¶ï¼Œæ­¤æ—¶ low[2] &lt; low[3]ï¼Œæ›´æ–° low[3] = low[2] = 0ï¼Œè¡¨ç¤º low[3] å¯ä»¥ä»å¦å¤–ä¸€æ¡è·¯å¾„åˆ°è¾¾ç¬¬ low[2] = 0 ä¸ªè¢«éå†çš„èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹ 0 å¼•å…¥äº† order ä¸ low æ•°ç»„ï¼Œæ¥ç€æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸¤ä¸ªæ•°ç»„åˆ¤æ–­æŸæ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥äº†ï¼Œå½“æˆ‘ä»¬éå†å®Œç›¸é‚»èŠ‚ç‚¹ wï¼Œæ¥åˆ°å½“å‰èŠ‚ç‚¹ v æ—¶ï¼Œé™¤äº†è¦æ›´æ–° low[v]ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è¿™æ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥è¿›è¡Œåˆ¤æ–­ã€‚ æˆ‘ä»¬éœ€è¦åˆ¤æ–­ low[w] ä¸ order[v] çš„å¤§å°ï¼Œä»¥æ­¤åˆ¤æ–­æ˜¯å¦æ˜¯æ¡¥ã€‚é¦–å…ˆæ˜ç¡®ä¸€ä¸‹äºŒè€…è¡¨ç¤ºçš„æ„ä¹‰ï¼š low[w] è¡¨ç¤ºèŠ‚ç‚¹ w èƒ½å¤Ÿé€šè¿‡å¦ä¸€æ¡è·¯å¾„èƒ½å¤Ÿåˆ°è¾¾çš„æœ€å‰é¡ºåºï¼Œä¾‹å¦‚ low[w] = 3 å°±è¡¨ç¤º w èŠ‚ç‚¹èƒ½é€šè¿‡å¦ä¸€æ¡è·¯å¾„åˆ°è¾¾ç¬¬ 3 ä¸ªè¢«éå†çš„èŠ‚ç‚¹ï¼Œ order [v] è¡¨ç¤ºèŠ‚ç‚¹ v æ˜¯ç¬¬å‡ ä¸ªè¢«éå†çš„ å¦‚æœ low[w] $\\leq$ order[v]ï¼Œè¯´æ˜ w èƒ½é€šè¿‡å¦ä¸€æ¡è·¯å¾„åˆ°è¾¾èŠ‚ç‚¹ v æˆ– v ä¹‹å‰è¢«éå†çš„èŠ‚ç‚¹ï¼Œè¯´æ˜å°±ä¸æ˜¯æ¡¥ï¼Œå¦åˆ™å°±æ˜¯æ¡¥ã€‚ import java.util.ArrayList;import java.util.HashSet;public class FindEdge &#123; private int[] order; private int[] low; private Graph graph; private boolean[] visited; private int count = 0; // å­˜å‚¨æ¡¥ private ArrayList&lt;int[]&gt; result; public FindEdge(Graph graph) &#123; this.graph = graph; order = new int[graph.V()]; low = new int[graph.V()]; result = new ArrayList&lt;&gt;(); visited = new boolean[graph.V()]; for (int i = 0; i &lt; graph.V(); i++) &#123; if (!visited[i]) &#123; dfs(i, i); &#125; &#125; &#125; private void dfs(int v, int parent) &#123; visited[v] = true; low[v] = count; order[v] = count; count++; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w, v); // æ›´æ–° low[v] æ—¶æœº 1 low[v] = Math.min(low[v], low[w]); // åˆ¤æ–­æ˜¯å¦æ˜¯æ¡¥ if (low[w] &gt; order[v]) &#123; result.add(new int[]&#123;v, w&#125;); &#125; &#125; else if (w != parent)&#123; // æ›´ç»† low[v] æ—¶æœº 2 low[v] = Math.min(low[w], low[v]); &#125; &#125; &#125; public ArrayList&lt;int[]&gt; getResult() &#123; return result; &#125;&#125; å‰²ç‚¹å®šä¹‰å‰²ç‚¹çš„å®šä¹‰ä¸æ¡¥çš„å®šä¹‰ç±»ä¼¼ï¼Œå‰²ç‚¹æŒ‡çš„æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¸€æ—¦ç§»é™¤è¿™ä¸ªèŠ‚ç‚¹ï¼Œä¼šå¯¼è‡´å›¾ä¸­çš„è”é€šåˆ†é‡å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸ªèŠ‚ç‚¹ä¸ºå‰²ç‚¹ã€‚ ä¸Šå›¾ä¸­èŠ‚ç‚¹ 3 ä¸èŠ‚ç‚¹ 5 ä¸ºå‰²ç‚¹ï¼Œä¸€æ—¦å»æ‰è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹ä¸€ï¼Œå›¾çš„è”é€šåˆ†é‡çš„ä¸ªæ•°å°±ä¼šå‘ç”Ÿå˜åŒ–ã€‚ å¯»æ‰¾å‰²ç‚¹å¯»æ‰¾å‰²ç‚¹çš„è¿‡ç¨‹åŒå¯»æ‰¾æ¡¥æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿéœ€è¦ç»´æŠ¤ order ä¸ low ä¸¤ä¸ªæ•°ç»„ï¼Œè¿™ä¸¤æ•°ç»„çš„å«ä¹‰ä¹Ÿæ˜¯åŒä¸Šä¸€è‡´çš„ã€‚low æ•°ç»„çš„æ›´æ–°æ—¶æœºä»¥åŠæ›´æ–°è¿‡ç¨‹ä¹Ÿæ˜¯åŒä¸Šä¸€è‡´çš„ã€‚ ç°åœ¨çš„é—®é¢˜æ˜¯æˆ‘ä»¬åœ¨ä»€ä¹ˆæ—¶å€™åˆ¤æ–­æŸèŠ‚ç‚¹æ˜¯ä¸æ˜¯å‰²ç‚¹ï¼Œä»¥åŠæ¡ä»¶æ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬åœ¨éå†å®Œç›¸é‚»èŠ‚ç‚¹ wï¼Œè¿”å›åˆ°å½“å‰èŠ‚ç‚¹ v æ—¶ï¼Œå¦‚æœ low[w] $\\geq$ order[v] æ—¶ï¼Œå°±è¯´æ˜å®ƒæ˜¯ä¸€ä¸ªå‰²ç‚¹ã€‚è¿™é‡Œçš„åˆ¤æ–­æ¡ä»¶ä¸æ¡¥çš„åˆ¤æ–­ä¸åŒï¼Œæ¡¥çš„åˆ¤æ–­æ¡ä»¶æ˜¯å¦‚æœ low[w] &gt; order[v] æ—¶ï¼Œå°±è¯´æ˜ v-w è¿™æ¡è¾¹æ˜¯æ¡¥ï¼Œæ³¨æ„å¤šäº†ä¸€ä¸ªç­‰äºå·ã€‚ low[w] $\\geq$ order[v] è¡¨ç¤ºèŠ‚ç‚¹ w ä¸ èŠ‚ç‚¹ v ä¹‹å‰è¢«éå†çš„èŠ‚ç‚¹äº§ç”Ÿè¿æ¥åªèƒ½é€šè¿‡èŠ‚ç‚¹ v ä¾‹å¦‚èŠ‚ç‚¹ 4 é€šè¿‡å¦å¤–ä¸€æ¡è·¯å¾„å®ƒæœ€å¤šåˆ°è¾¾èŠ‚ç‚¹ 5ï¼Œæ— æ³•ä¸èŠ‚ç‚¹ 5 ä¹‹å‰è¢«éå†çš„èŠ‚ç‚¹äº§ç”Ÿè¿æ¥ã€‚ä¸€æ—¦èŠ‚ç‚¹ 5 è¢«åˆ é™¤ï¼Œ4 å°±æ— æ³•è®¿é—®åˆ°èŠ‚ç‚¹ 0, 1, 2, 3ï¼Œæ‰€ä»¥ 5 å°±æ˜¯å‰²ç‚¹ã€‚ ä½†æ˜¯æ·»åŠ äº†ç­‰äºå·ä¹‹åï¼Œè¿™ä¸ªæ—¶å€™å› ä¸ºä»»ä½•èŠ‚ç‚¹ low[v] $\\geq$ order[0]ï¼Œæ‰€ä»¥æ ¹èŠ‚ç‚¹ 0 ä¼šè¢«è®¤ä¸ºæ˜¯å‰²ç‚¹ï¼Œä½†æ ¹èŠ‚ç‚¹ä¸ä¸€å®šæ˜¯å‰²ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¯¹æ ¹èŠ‚ç‚¹åˆ†åˆ«è®¨è®ºï¼Œåˆ¤æ–­æ ¹èŠ‚ç‚¹æ˜¯ä¸æ˜¯å‰²ç‚¹å¾ˆç®€å•ï¼Œå¦‚æœé€šè¿‡ DFS éå†ï¼Œæ ¹èŠ‚ç‚¹æœ‰ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹å°±è¯´æ˜å®ƒæ˜¯å‰²ç‚¹ import java.util.ArrayList;import java.util.HashSet;public class FindCutPoints &#123; private Graph graph; private boolean[] visited; private int[] order; private int[] low; private int count = 0; private HashSet&lt;Integer&gt; result = new HashSet&lt;&gt;(); public FindCutPoints(Graph graph) &#123; this.graph = graph; visited = new boolean[graph.V()]; order = new int[graph.V()]; low = new int[graph.V()]; for (int i = 0; i &lt; graph.V(); i++) &#123; if (!visited[i]) &#123; dfs(i, i); &#125; &#125; &#125; private void dfs(int v, int parent) &#123; visited[v] = true; order[v] = count; low[v] = count; count++; int child = 0; for (int w: graph.adj(v)) &#123; child++; if (!visited[w]) &#123; dfs(w, v); low[v] = Math.min(low[v], low[w]); if (v != parent &amp;&amp; low[w] &gt;= order[v]) &#123; result.add(v); &#125; if (v == parent &amp;&amp; child &gt; 1) &#123; result.add(v); &#125; &#125; else if (w != parent) &#123; low[v] = Math.min(low[v], low[w]); &#125; &#125; &#125; public HashSet&lt;Integer&gt; getResult() &#123; return result; &#125;&#125; å“ˆå¯†å°”é¡¿å›è·¯ä¸å“ˆå¯†å°”é¡¿è·¯å¾„å“ˆå¯†å°”é¡¿å›è·¯1859å¹´ï¼Œçˆ±å°”å…°æ•°å­¦å®¶å“ˆå¯†å°”é¡¿ï¼ˆHamiltonï¼‰æå‡ºä¸‹åˆ—å‘¨æ¸¸ä¸–ç•Œçš„æ¸¸æˆï¼šåœ¨æ­£åäºŒé¢ä½“çš„äºŒåä¸ªé¡¶ç‚¹ä¸Šä¾æ¬¡æ ‡è®°ä¼¦æ•¦ã€å·´é»ã€è«æ–¯ç§‘ç­‰ä¸–ç•Œè‘—åå¤§åŸå¸‚ï¼Œæ­£åäºŒé¢ä½“çš„æ£±è¡¨ç¤ºè¿æ¥è¿™äº›åŸå¸‚çš„è·¯çº¿ã€‚è¯•é—®èƒ½å¦åœ¨å›¾ä¸­åšä¸€æ¬¡æ—…è¡Œï¼Œä»é¡¶ç‚¹åˆ°é¡¶ç‚¹ï¼Œæ²¿ç€è¾¹è¡Œèµ°ï¼Œç»è¿‡æ¯ä¸ªåŸå¸‚æ°å¥½ä¸€æ¬¡ä¹‹åå†å›åˆ°å‡ºå‘ç‚¹ã€‚ å°†ä¸Šé¢çš„é—®é¢˜æŠ½è±¡ä¸ºä¸€ä¸ªå›¾è®ºé—®é¢˜ï¼šå¦‚æœæˆ‘ä»¬èƒ½ä»å›¾çš„æŸç‚¹å‡ºå‘ï¼Œç»è¿‡æ‰€æœ‰çš„èŠ‚ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡ï¼Œå¹¶ä¸”å›åˆ°åŸç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¯´å›¾ä¸­å­˜åœ¨å“ˆå¯†å°”é¡¿å›è·¯ã€‚ å“ˆå¯†å°”é¡¿å›è·¯åœ¨æ•°å­¦ä¸Šå¹¶æ²¡æœ‰æ‰¾åˆ°å……åˆ†å¿…è¦æ¡ä»¶ï¼Œæ‰€è°“å……åˆ†å¿…è¦æ¡ä»¶æŒ‡çš„æ˜¯ï¼Œå¦‚æœå›¾æ»¡è¶³ä»€ä¹ˆæ€§è´¨å®ƒå°±æœ‰å“ˆå¯†å°”é¡¿å›è·¯ä»¥åŠä¸€æ—¦å›¾æœ‰å“ˆå¯†å°”é¡¿å›è·¯è¿™ä¸ªå›¾å°±æ»¡è¶³ä»€ä¹ˆæ€§è´¨ã€‚æ‰€ä»¥æˆ‘ä»¬åˆ¤æ–­åˆ¤æ–­æŸä¸ªå›¾æ˜¯å¦æ˜¯å“ˆå¯†å°”é¡¿å›¾ï¼ŒåŠæ³•å°±æ˜¯æš´åŠ›æœç´¢ï¼Œä½¿ç”¨å›æº¯æ³•å»æœç´¢å›¾ã€‚ import java.util.ArrayList;import java.util.Collections;public class HamiltonCycle &#123; private Graph graph; private boolean[] visited; // è¿˜æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹æœªè®¿é—®ï¼Œå½“ left == 0 æ—¶è¡¨ç¤ºæ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«è®¿é—®è¿‡ private int left; // å½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå·²è·å¾—è·¯å¾„ private int[] pre; // æœ€åä¸€ä¸ªè¢«è®¿é—®çš„èŠ‚ç‚¹ private int end; public HamiltonCycle(Graph graph) &#123; this.graph = graph; this.visited = new boolean[graph.V()]; this.left = graph.V(); this.pre = new int[graph.V()]; this.end = -1; pre[0] = 0; dfs(0); &#125; // dfs è®¾æœ‰è¿”å›å€¼ï¼Œå½“æ‰¾åˆ°å“ˆå¯†å°”é¡¿å›è·¯æ—¶ï¼Œæå‰ç»ˆæ­¢ private boolean dfs(int v) &#123; visited[v] = true; left--; if (left == 0 &amp;&amp; graph.hasEdge(v, 0)) &#123; end = v; return true; &#125; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; pre[w] = v; if (dfs(w)) return true; &#125; &#125; visited[v] = false; left++; return false; &#125; public Iterable&lt;Integer&gt; result() &#123; ArrayList result = new ArrayList(); if (end == -1) &#123; return result; &#125; int cur = end; while (cur != 0) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(0); Collections.reverse(result); return result; &#125;&#125; çŠ¶æ€å‹ç¼©å¯¹å›¾è¿›è¡Œæš´åŠ›æœç´¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n!)$ï¼Œæ‰€ä»¥æš´åŠ›æœç´¢å›¾åªé€‚åˆå›¾çš„è§„æ¨¡ä¸å¤§çš„æƒ…å†µï¼Œå½“å›¾çš„è§„æ¨¡ä¸å¤§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ visited æ•°ç»„è¿›è¡Œå‹ç¼©ï¼Œä½¿ç”¨ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºå›¾ä¸­ä¸ªèŠ‚ç‚¹çš„è®¿é—®çŠ¶æ€ï¼Œå…·ä½“å°±æ˜¯æ ¹æ®è¿™ä¸ªæ•°å­—çš„äºŒè¿›åˆ¶ä½ä¸º 0 è¿˜æ˜¯ä¸º 1 æ¥è¡¨ç¤ºæ˜¯å¦è¢«è®¿é—®è¿‡ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨ int ç±»å‹æ¥ä¿å­˜ visited å˜é‡ï¼Œint ç±»å‹å æ® 4 ä¸ªå­—èŠ‚ï¼Œå³ 32 ä½ï¼Œç¬¬ä¸€ä½æ˜¯ç¬¦å·ä½ï¼Œæ•…å¯ä»¥è®¤ä¸ºå¯ä»¥è¡¨ç¤º 31 ä¸ªèŠ‚ç‚¹è®¿é—®çŠ¶æ€ï¼Œå¦‚æœ visited = 1ï¼ŒäºŒè¿›åˆ¶å°±æ˜¯ 00000000 00000000 00000000 00000001ï¼Œä»å³å¾€å·¦æ•°ç¬¬ 0 ä¸ªæ•°æ˜¯ 1ï¼Œå°±è¡¨ç¤ºèŠ‚ç‚¹ 0 è¢«è®¿é—®è¿‡äº†ï¼Œå…¶ä»–æ•°å­—éƒ½æ˜¯ 0ï¼Œè¡¨ç¤ºå…¶ä»–èŠ‚ç‚¹æ²¡æœ‰è¢«è®¿é—®è¿‡ã€‚ è§‚å¯Ÿä¸Šé¢çš„ç¨‹åºï¼Œæˆ‘ä»¬å¯¹ visited æœ‰ä¸‰ç§æ“ä½œï¼š åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æœ‰æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œä¾‹å¦‚åˆ¤æ–­èŠ‚ç‚¹ i æœ‰æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œåªè¦ $2^i$ å’Œ visited ç›¸ä¸å³å¯çŸ¥é“ï¼Œå¦‚æœç»“æœä¸º 1ï¼Œè¯´æ˜ç¬¬ i ä½ä¸º 1ï¼Œå³èŠ‚ç‚¹ i è¢«è®¿é—®è¿‡ï¼Œå¦åˆ™å°±æ˜¯æœªè¢«è®¿é—®è¿‡ å°†èŠ‚ç‚¹ i è®¾ç½®ä¸ºè¢«è®¿é—®è¿‡(visited[i] = true)ï¼Œä¹Ÿå°±æ˜¯å°†ç¬¬ i ä¸ªä½ç½®ç”± 0 å˜ä¸º 1ï¼Œå°±æ˜¯å°† $2^i$ ä¸ visited å¼‚æˆ–å³å¯ å°†èŠ‚ç‚¹ i è®¾ç½®ä¸ºæœªè¢«è®¿é—®è¿‡(visited[i] = false)ï¼Œä¹Ÿå°±æ˜¯å°†ç¬¬ i ä¸ªä½ç½®ç”± 1 å˜ä¸º 0ï¼Œè¿˜æ˜¯å°† $2^i$ ä¸ visited å¼‚æˆ–å³å¯ æ³¨æ„ $2^i$ å¯ä»¥è¡¨ç¤ºä¸º i &lt;&lt; 1 æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„ç¨‹åºï¼Œå°† visited æ•°ç»„å˜ä¸ºä¸€ä¸ªæ•°å­— public class HamiltonCircleCompress &#123; private Graph graph; private int visited; private int left; private int[] pre; private int end; // ä¸å˜ public HamiltonCircleCompress(Graph graph) &#123; this.graph = graph; this.visited = 0; this.left = graph.V(); this.pre = new int[graph.V()]; this.end = -1; pre[0] = 0; dfs(0); &#125; private boolean dfs(int v) &#123; // è®¾ç½® visited[v] ä¸º true visited = visited ^ (1 &lt;&lt; v); left--; if (left == 0 &amp;&amp; graph.hasEdge(v, 0)) &#123; end = v; return true; &#125; for (int w: graph.adj(v)) &#123; // åˆ¤æ–­ visited[w] æ˜¯å¦è®¿é—®è¿‡ if ((visited &amp; (1 &lt;&lt; w)) == 0) &#123; pre[w] = v; if (dfs(w)) return true; &#125; &#125; // è®¾ç½® visited[v] ä¸º false visited = visited ^ (1 &lt;&lt; v); left++; return false; &#125; // ä¸å˜ public Iterable&lt;Integer&gt; result() &#123; ArrayList result = new ArrayList(); if (end == -1) &#123; return result; &#125; int cur = end; while (cur != 0) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(0); Collections.reverse(result); return result; &#125;&#125; å“ˆå¯†å°”é¡¿è·¯å¾„å“ˆå¯†å°”é¡¿è·¯å¾„çš„å®šä¹‰åŒå“ˆå¯†å°”é¡¿å›è·¯ç›¸ä¼¼ï¼Œå¦‚æœä»å›¾ä¸­çš„æŸä¸€ç‚¹å‡ºå‘ï¼Œèƒ½å¤Ÿç»è¿‡å›¾ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡ï¼Œé‚£ä¹ˆè¿™æ¡è·¯å¾„å°±æ˜¯å“ˆå¯†å°”é¡¿è·¯å¾„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå›¾ä¸­æ˜¯å¦å­˜åœ¨å“ˆå¯†å°”é¡¿å›è·¯ä¸èµ·å§‹ç‚¹æ— å…³ï¼Œä½†æ˜¯å“ˆå¯†å°”é¡¿è·¯å¾„ä¸èµ·å§‹ç‚¹æœ‰å…³ï¼Œå¯èƒ½ä»æŸç‚¹å‡ºå‘ï¼Œå¹¶ä¸èƒ½èµ°è¿‡æ¯ä¸€èŠ‚ç‚¹ï¼Œä½†æ˜¯ä»å¦ä¸€ä¸ªèŠ‚ç‚¹å‡ºå‘ï¼Œå´èƒ½å¤Ÿèµ°è¿‡æ‰€æœ‰èŠ‚ç‚¹ï¼Œä¸”åªç»è¿‡ä¸€æ¬¡ã€‚ å“ˆå¯†å°”é¡¿è·¯å¾„çš„ä»£ç åŒå“ˆå¯†å°”é¡¿å›è·¯çš„ä»£ç ç›¸ä¼¼ï¼Œåªæœ‰ä¸¤å¤„ä¸åŒï¼š éœ€è¦ä¼ å…¥èµ·å§‹ç‚¹ å½“ left ä¸º 0 æ—¶ï¼Œä¸ç”¨åˆ¤æ–­æœ€åèŠ‚ç‚¹æ˜¯å¦ä¸èµ·å§‹ç‚¹ç›¸é‚»ï¼Œå› ä¸ºå“ˆå¯†å°”é¡¿è·¯å¾„ä¸è¦æ±‚å›åˆ°èµ·å§‹ç‚¹ ä»£ç å¦‚ä¸‹ import java.util.ArrayList;import java.util.Collections;public class HamiltonPath &#123; private Graph graph; private boolean[] visited; private int left; private int[] pre; private int end; // èµ·å§‹ç‚¹ private int s; public HamiltonPath(Graph graph, int s) &#123; this.graph = graph; this.s = s; this.visited = new boolean[graph.V()]; this.left = graph.V(); this.pre = new int[graph.V()]; this.end = -1; pre[0] = 0; dfs(s); &#125; private boolean dfs(int v) &#123; visited[v] = true; left--; // ä¸ç”¨åˆ¤æ–­ v æ˜¯å¦ä¸èµ·å§‹ç‚¹ç›¸é‚» if (left == 0) &#123; end = v; return true; &#125; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; pre[w] = v; if (dfs(w)) return true; &#125; &#125; visited[v] = false; left++; return false; &#125; public Iterable&lt;Integer&gt; result() &#123; ArrayList result = new ArrayList(); if (end == -1) &#123; return result; &#125; int cur = end; while (cur != 0) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(0); Collections.reverse(result); return result; &#125;&#125; ä¸åŒè·¯å¾„ IIIè¿™æ˜¯ä¸€é“ LeetCode ä¸Šçš„é¢˜ç›®ï¼Œå®ƒçš„æœ¬è´¨å°±æ˜¯åœ¨æ±‚å“ˆå¯†å°”é¡¿è·¯å¾„ã€‚ é¢˜ç›®ç®€ä»‹åœ¨äºŒç»´ç½‘æ ¼ grid ä¸Šï¼Œæœ‰ 4 ç§ç±»å‹çš„æ–¹æ ¼ï¼š 1 è¡¨ç¤ºèµ·å§‹æ–¹æ ¼ã€‚ä¸”åªæœ‰ä¸€ä¸ªèµ·å§‹æ–¹æ ¼ 2 è¡¨ç¤ºç»“æŸæ–¹æ ¼ï¼Œä¸”åªæœ‰ä¸€ä¸ªç»“æŸæ–¹æ ¼ 0 è¡¨ç¤ºæˆ‘ä»¬å¯ä»¥èµ°è¿‡çš„ç©ºæ–¹æ ¼ -1 è¡¨ç¤ºæˆ‘ä»¬æ— æ³•è·¨è¶Šçš„éšœç¢ è¿”å›åœ¨å››ä¸ªæ–¹å‘ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰ä¸Šè¡Œèµ°æ—¶ï¼Œä»èµ·å§‹æ–¹æ ¼åˆ°ç»“æŸæ–¹æ ¼çš„ä¸åŒè·¯å¾„çš„æ•°ç›®ã€‚æ¯ä¸€ä¸ªæ— éšœç¢æ–¹æ ¼éƒ½è¦é€šè¿‡ä¸€æ¬¡ï¼Œä½†æ˜¯ä¸€æ¡è·¯å¾„ä¸­ä¸èƒ½é‡å¤é€šè¿‡åŒä¸€ä¸ªæ–¹æ ¼ã€‚ **æç¤ºï¼š1 &lt;= grid.length * grid[0].length &lt;= 20**ã€‚ è§£é¢˜æ€è·¯æˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªäºŒç»´ç½‘æ ¼å»ºæ¨¡ä¸ºä¸€å¹…å›¾ï¼Œ0 è¡¨ç¤ºä¸€ä¸ªèŠ‚ç‚¹(èµ·å§‹ç‚¹ 1 å’Œç»ˆæ­¢ç‚¹ 2 ä¹Ÿæ˜¯èŠ‚ç‚¹)ï¼Œå¦‚æœä¸¤ä¸ª 0 ä¸Šä¸‹å·¦å³ç›¸é‚»ï¼Œå°±è¡¨ç¤ºå®ƒä»¬ä¹‹é—´æœ‰ä¸€æ¡è¾¹ã€‚ç°åœ¨é¢˜ç›®è¦æ±‚ä»èµ·å§‹ç‚¹åˆ°è¾¾ç»ˆæ­¢ç‚¹ï¼Œå¿…é¡»ç»è¿‡æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”æœ‰ä¸”åªèƒ½ç»è¿‡ä¸€æ¬¡ï¼Œè¿™ä¸å°±æ˜¯å“ˆå¯†å°”é¡¿è·¯å¾„å—? é‚£ä¹ˆé¢˜ç›®å°±æ˜¯åœ¨è¦æ±‚è¿™ä¸ªå›¾æœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„ã€‚ import java.util.Arrays;import java.util.stream.Collectors;public class Solution &#123; // çŠ¶æ€å‹ç¼©ï¼Œé¢˜ç›®ç»™å‡ºèŠ‚ç‚¹æ•°ç›®å°äºç­‰äº 20 private int visited; // èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹ä¸‹æ ‡ private int[] start; private int[] end; // ç½‘æ ¼çš„è¡Œæ•°å’Œåˆ—æ•° private int rows; private int columns; // å‰©ä½™æœªè®¿é—®èŠ‚ç‚¹ private int left; // ç½‘æ ¼ private int[][] grid; public int uniquePathsIII(int[][] grid) &#123; this.grid = grid; this.rows = grid.length; this.columns = grid[0].length; this.visited = 0; this.start = new int[2]; this.end = new int[2]; this.left = rows * columns; // ä¸‹é¢è¿™ä¸ªå¾ªç¯æ˜¯ä¸ºäº†æ‰¾åˆ°èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹ï¼Œå¹¶ä¸”æ›´æ–° left for (int row = 0; row &lt; rows; row++) &#123; for (int column = 0; column &lt; columns; column++) &#123; if (grid[row][column] == 1) &#123; start[0] = row; start[1] = column; grid[row][column] = 0; &#125; else if (grid[row][column] == 2) &#123; end[0] = row; end[1] = column; grid[row][column] = 0; &#125; else if (grid[row][column] == -1) &#123; // -1 ä¸æ˜¯èŠ‚ç‚¹ï¼Œéœ€è¦å‡æ‰ left--; &#125; &#125; &#125; return dfs(start); &#125; private int dfs(int[] v) &#123; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); left--; if (left == 0 &amp;&amp; (v[0] == end[0] &amp;&amp; v[1] == end[1])) &#123; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); left++; return 1; &#125; int res = 0; for (int[] w: adj(v[0], v[1])) &#123; if ((visited &amp; (1 &lt;&lt; (w[0] * columns + w[1]))) == 0 &amp;&amp; grid[w[0]][w[1]] != -1) &#123; res += dfs(w); &#125; &#125; // å›æº¯ left++; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); return res; &#125; private Iterable&lt;int[]&gt; adj(int row, int column) &#123; int[][] dirs = &#123;&#123;-1, 0&#125;, &#123;0, -1&#125;, &#123;0, 1&#125;, &#123;1, 0&#125;&#125;; return Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .collect(Collectors.toList()); &#125; public static void main(String[] args) &#123; int[][] grid = &#123;&#123;1,0,0,0&#125;,&#123;0,0,0,0&#125;,&#123;0,0,2,-1&#125;&#125;; Solution solution = new Solution(); int res = solution.uniquePathsIII(grid); System.out.println(res); &#125;&#125; è®°å¿†åŒ–æœç´¢è€ƒè™‘è¿™ä¹ˆä¸€å¹…å›¾ æˆ‘ä»¬å°†å®ƒåˆ†ä¸ºä¸¤éƒ¨åˆ† æˆ‘ä»¬ç§°å·¦è¾¹ä¸ºç¬¬ä¸€éƒ¨åˆ†ï¼Œå³è¾¹ä¸ºç¬¬äºŒéƒ¨åˆ†ã€‚ç°åœ¨ä»èŠ‚ç‚¹ 0 å¼€å§‹éå†ï¼Œå¯»æ‰¾æœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿å›è·¯ï¼Œæˆ‘ä»¬å‘ç°ä¸è®ºæ˜¯ä»¥ä½•ç§æ–¹å¼éå†å®Œç¬¬ä¸€éƒ¨åˆ†æ¥åˆ°ç¬¬äºŒéƒ¨åˆ†ï¼Œæœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„åªä¸ç¬¬äºŒéƒ¨åˆ†æœ‰å…³ï¼Œå³è¿™å‡ ç§è·¯å¾„æœç´¢å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œæ— éœ€é‡å¤éå†ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä»¥ $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$ çš„æ–¹å¼éå†å®Œç¬¬ä¸€éƒ¨åˆ†æ¥åˆ°ç¬¬äºŒéƒ¨åˆ† å®ƒæœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„åªä¸ç¬¬äºŒéƒ¨åˆ†æœ‰å…³ï¼Œå¦‚æœæˆ‘ä»¬ä»¥ $0 \\rightarrow 2 \\rightarrow 1 \\rightarrow 3$ çš„æ–¹å¼éå†å®Œç¬¬ä¸€éƒ¨åˆ†æ¥åˆ°ç¬¬äºŒéƒ¨åˆ† å®ƒæœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„çš„ç»“æœåº”è¯¥ä¸ä»¥ $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$ é¡ºåºéå†çš„ç»“æœç›¸åŒï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥ç¼“å­˜è¿™ä¸ªç»“æœï¼Œå°±å¯ä»¥é¿å…ä¸å¿…è¦çš„éå†ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ å½“éå†åˆ°èŠ‚ç‚¹ v æ—¶ï¼Œå¦‚æœæ­¤æ—¶å®ƒä»¬çš„ visited æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå®ƒä»¬ä¼šæœ‰ä¸€æ ·çš„ç»“æœï¼Œä¾‹å¦‚å¯¹äºä¸Šå›¾ï¼Œå½“éå†åˆ°èŠ‚ç‚¹ 3 æ—¶ï¼Œä¸¤æ¡è·¯å¾„çš„éå† visited çŠ¶æ€æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒä»¬çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ è¿™ç§æœç´¢ç­–ç•¥å«åšè®°å¿†åŒ–æœç´¢ï¼ŒåŸºäºè®°å¿†åŒ–æœç´¢çš„æƒ³æ³•ï¼Œæˆ‘ä»¬æ”¹é€ ä¸Šé¢çš„ç¨‹åº import java.util.Arrays;import java.util.HashMap;import java.util.stream.Collectors;public class Solution &#123; private int visited; private int[] start; private int[] end; private int rows; private int columns; private int left; private int[][] grid; private HashMap&lt;String, Integer&gt; memo= new HashMap&lt;&gt;(); public int uniquePathsIII(int[][] grid) &#123; this.grid = grid; this.rows = grid.length; this.columns = grid[0].length; this.visited = 0; this.start = new int[2]; this.end = new int[2]; this.left = rows * columns; for (int row = 0; row &lt; rows; row++) &#123; for (int column = 0; column &lt; columns; column++) &#123; if (grid[row][column] == 1) &#123; start[0] = row; start[1] = column; grid[row][column] = 0; &#125; else if (grid[row][column] == 2) &#123; end[0] = row; end[1] = column; grid[row][column] = 0; &#125; else if (grid[row][column] == -1) &#123; left--; &#125; &#125; &#125; return dfs(start); &#125; private int dfs(int[] v) &#123; String strV = format(v); if (memo.containsKey(visited + strV)) &#123; return memo.get(visited + strV); &#125; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); left--; if (left == 0 &amp;&amp; (v[0] == end[0] &amp;&amp; v[1] == end[1])) &#123; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); left++; memo.put(visited + strV, 1); return 1; &#125; int res = 0; for (int[] w: adj(v[0], v[1])) &#123; if ((visited &amp; (1 &lt;&lt; (w[0] * columns + w[1]))) == 0 &amp;&amp; grid[w[0]][w[1]] != -1) &#123; res += dfs(w); &#125; &#125; left++; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); memo.put(visited+strV, res); return res; &#125; private Iterable&lt;int[]&gt; adj(int row, int column) &#123; int[][] dirs = &#123;&#123;-1, 0&#125;, &#123;0, -1&#125;, &#123;0, 1&#125;, &#123;1, 0&#125;&#125;; return Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .collect(Collectors.toList()); &#125; private String format(int[] v) &#123; int location = v[0] * columns + v[1]; int first = location / 10; int second = location % 10; return \"\" + first + second; &#125;&#125; æ¬§æ‹‰å›è·¯ä¸æ¬§æ‹‰è·¯å¾„æ¬§æ‹‰å›è·¯ä¸ƒæ¡¥é—®é¢˜18ä¸–çºªåˆæ™®é²å£«çš„å“¥å°¼æ–¯å ¡ï¼Œæœ‰ä¸€æ¡æ²³ç©¿è¿‡ï¼Œæ²³ä¸Šæœ‰ä¸¤ä¸ªå°å²›ï¼Œæœ‰ä¸ƒåº§æ¡¥æŠŠä¸¤ä¸ªå²›ä¸æ²³å²¸è”ç³»èµ·æ¥ï¼Œå¦‚ä¸‹å›¾(é»„è‰²çº¿æ¡ä»£è¡¨æ¡¥ï¼Œç»¿è‰²åŒºåŸŸä»£è¡¨å°å²›å’Œæ²³å²¸) æœ‰ä¸ªäººæå‡ºä¸€ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ­¥è¡Œè€…æ€æ ·æ‰èƒ½ä¸é‡å¤ã€ä¸é—æ¼åœ°ä¸€æ¬¡èµ°å®Œä¸ƒåº§æ¡¥ï¼Œæœ€åå›åˆ°å‡ºå‘ç‚¹ã€‚ æ•°å­¦å®¶æ¬§æ‹‰å°†æ²³å²¸ä¸å°å²›å»ºæ¨¡ä¸ºèŠ‚ç‚¹ï¼Œè€Œä¸ƒåº§æ¡¥å»ºæ¨¡ä¸ºè¾¹ï¼Œæ‰€ä»¥ä¸ƒæ¡¥é—®é¢˜å»ºæ¨¡ä¸ºä¸Šå›¾æœ€å³è¾¹çš„å›¾è®ºé—®é¢˜ï¼Œæ‰¾åˆ°å›¾ä¸­ç»è¿‡æ‰€æœ‰è¾¹ä¸€æ¬¡ä¸”å›åˆ°åŸç‚¹çš„å›è·¯ï¼Œè¿™ç§å›è·¯æˆ‘ä»¬åæ¥ç§°ä¸ºæ¬§æ‹‰å›è·¯ã€‚ æ¬§æ‹‰å›è·¯çš„æ•°å­¦æ€§è´¨ä¸Šè¿°çš„ä¸ƒæ¡¥é—®é¢˜å¾ˆé•¿æ—¶é—´éƒ½æ²¡æœ‰è§£å†³ï¼Œå³äººä»¬æ²¡æœ‰æ‰¾åˆ°ä¸€æ¡å›è·¯ï¼Œèƒ½å¤Ÿåªç»è¿‡æ¯åº§æ¡¥ä¸€æ¬¡ï¼Œç„¶åå›åˆ°åŸç‚¹ã€‚æ‰€ä»¥æ¬§æ‹‰å°±çŒœæƒ³æ˜¯ä¸æ˜¯æ ¹æœ¬ä¸å­˜åœ¨è¿™ç§å›è·¯ï¼Œç»è¿‡ä»–çš„è¯æ˜ï¼Œä¸Šè¿°ä¸ƒæ¡¥é—®é¢˜çš„ç¡®ä¸å­˜åœ¨æ¬§æ‹‰å›è·¯ã€‚ æ¬§æ‹‰è¯æ˜ååˆ†çš„ç®€å•ï¼Œå› ä¸ºè¦ä»èµ·ç‚¹å‡ºå‘å›åˆ°åŸç‚¹ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦ä¸€è¿›ä¸€å‡ºï¼Œè€Œæ¯æ¬¡è¿›å‡ºéœ€è¦æ¶ˆè€—ä¸¤æ¡è¾¹ï¼Œæ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»å…·æœ‰å¶æ•°æ¡è¾¹ï¼Œå®ƒæ‰èƒ½ä¿è¯æœ‰è¿›æœ‰å‡ºï¼Œæ‰æœ‰å¯èƒ½å›åˆ°åŸç‚¹ã€‚æ‰€ä»¥å°±å¾—åˆ°äº†æ¬§æ‹‰å›è·¯ä¸€ä¸ªå……åˆ†å¿…è¦æ¡ä»¶ï¼š æ¯ä¸ªèŠ‚ç‚¹çš„åº¦éƒ½æ˜¯å¶æ•° $\\Leftrightarrow$ å›¾ä¸­å­˜åœ¨æ¬§æ‹‰å›è·¯ æ¯ä¸ªèŠ‚ç‚¹çš„åº¦éƒ½æ˜¯å¶æ•°æ˜¯å›¾ä¸­å­˜åœ¨æ¬§æ‹‰å›è·¯æ˜¯å……åˆ†å¿…è¦æ¡ä»¶ï¼ŒäºŒè€…å¯ä»¥äº’æ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åˆ¤æ–­å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„åº¦æ˜¯ä¸æ˜¯å¶æ•°å³å¯å¾—åˆ°å›¾ä¸­æ˜¯å¦æœ‰æ¬§æ‹‰å›è·¯è¿™ä¸ªç»“è®ºã€‚ å›åˆ°ä¸ƒæ¡¥é—®é¢˜ï¼Œè§‚å¯Ÿå›¾ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå‘ç°å®ƒä»¬çš„åº¦éƒ½ä¸æ˜¯å¶æ•°ï¼Œæ‰€ä»¥ç»å¯¹ä¸å¯èƒ½ä»æŸç‚¹å‡ºå‘ï¼Œç»è¿‡æ‰€ä»¥çš„è¾¹ä¸€æ¬¡ç„¶åå›åˆ°åŸç‚¹ï¼Œè‡³æ­¤æ¬§æ‹‰å®Œç¾çš„è§£å†³äº†ä¸ƒæ¡¥é—®é¢˜ï¼Œå›¾è®ºé¢†åŸŸä¹Ÿæ˜¯ä»æ­¤å¼€å§‹å‘å±•ã€‚ ä¸‹é¢æ˜¯åˆ¤æ–­æ¬§æ‹‰å›è·¯æ˜¯å¦å­˜åœ¨çš„ä»£ç ï¼š public class EulerCycle &#123; private Graph graph; public EulerCycle(Graph graph) &#123; this.graph = graph; &#125; public boolean hasEulerCycle() &#123; // å¦‚æœå›¾ä¸­ä¸åªä¸€ä¸ªè”é€šåˆ†é‡çš„è¯ï¼Œè¯´æ˜è‚¯å®šæ²¡æœ‰æ¬§æ‹‰å›è·¯ CCGraph ccGraph = new CCGraph(graph); if (ccGraph.getCCcount() != 1) &#123; return false; &#125; for (int i = 0; i &lt; graph.V(); i++) &#123; if (graph.degree(i) % 2 != 0) &#123; return false; &#125; &#125; return true; &#125;&#125; æ±‚è§£æ¬§æ‹‰å›è·¯ä¸Šé¢æˆ‘ä»¬åªæ˜¯åˆ¤æ–­å›¾ä¸­æ¬§æ‹‰å›è·¯æ˜¯å¦å­˜åœ¨ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰å¾—åˆ°ä¸€ä¸ªå…·ä½“çš„æ¬§æ‹‰å›è·¯ï¼Œæ‰€ä»¥åœ¨æœ¬èŠ‚ä¸­ä»‹ç»ä¸‰ç§æ–¹æ³•å¾—åˆ°æ¬§æ‹‰å›è·¯ã€‚ å›æº¯æ³•å›æº¯æ³•å°±æ˜¯æš´åŠ›æœç´¢æ³•ï¼Œæœç´¢ä»èµ·ç‚¹å‡ºå‘çš„æ‰€æœ‰è·¯å¾„ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€æ¡æ¬§æ‹‰å›è·¯ Fleury ç®—æ³•è€ƒè™‘ä¸‹å›¾ï¼Œå½“æˆ‘ä»¬ä»èŠ‚ç‚¹ 0 æ¥åˆ°èŠ‚ç‚¹ 2 æ—¶ å¯¹äºå›æº¯æ³•ï¼Œå¯ä»¥é€‰æ‹©éå†èŠ‚ç‚¹ 1ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©éå†èŠ‚ç‚¹ 3ï¼Œè€Œ Fleury ç®—æ³•å´ä¼šé€‰æ‹©æ¥ä¸‹æ¥éå†èŠ‚ç‚¹ 3 è€Œä¸æ˜¯èŠ‚ç‚¹ 1ï¼Œå› ä¸ºè¾¹ 2-1 å®ƒæ˜¯ä¸€ä¸ªæ¡¥ï¼Œå¦‚æœé€‰æ‹©éå†èŠ‚ç‚¹ 1ï¼Œå°±ä¸å¯èƒ½å†æ¬¡å›åˆ°èŠ‚ç‚¹ 2ï¼Œå³èŠ‚ç‚¹ 2 å³è¾¹çš„è¾¹ 2-3 2-4 ä¸å¯èƒ½è¢«è®¿é—®åˆ°ï¼Œæ‰€ä»¥ Fleury ç®—æ³•çš„ç­–ç•¥å°±æ˜¯åœ¨éå†è¾¹å‰åˆ¤æ–­è¿™æ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥ï¼Œå¦‚æœæ˜¯æ¡¥çš„è¯ï¼Œå°±ä¸éå†è¿™æ¡è¾¹ï¼Œé€‰æ‹©å…¶ä»–çš„è¾¹ã€‚ Hierholzer ç®—æ³• ä¸Šå›¾æ¯ä¸ªèŠ‚ç‚¹çš„åº¦éƒ½æ˜¯å¶æ•°ï¼Œæ‰€ä»¥è¯¥å›¾ä¸€å®šæœ‰æ¬§æ‹‰å›è·¯ã€‚Hierholzer ç®—æ³•é¦–å…ˆåœ¨å›¾ä¸­éšä¾¿æ‰¾åˆ°ä¸€ä¸ªç¯ è¿™ä¸ªç¯å¦‚æœæ˜¯æ¬§æ‹‰å›è·¯ï¼Œé‚£å°±æ‰¾åˆ°äº†ï¼›å¦‚æœä¸æ˜¯æ¬§æ‹‰å›è·¯ï¼Œä¾‹å¦‚ä¸Šé¢æ‰¾åˆ°ç¯ $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 0$ï¼Œå®ƒä¸æ˜¯æ¬§æ‹‰å›è·¯ï¼Œä¸­é—´ç¼ºå¤±äº†ä¸€ç¯ï¼Œå› ä¸ºèŠ‚ç‚¹ 2 è¿˜ä¸åˆ«çš„èŠ‚ç‚¹ç›¸è¿ï¼Œä¸Šè¿°é“¾ä¸­çš„ $2$ åº”è¯¥å˜ä¸º $2 \\rightarrow â€¦ \\rightarrow 2 $ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å›é€€åˆ°èŠ‚ç‚¹ 2 å¼€å§‹å¯»æ‰¾è¿™ä¸ªç¯ã€‚ æ¯”å¦‚æˆ‘ä»¬ç»§ç»­æ‰¾åˆ°äº† $2 \\rightarrow 4 \\rightarrow 5 \\rightarrow 2$ è¿™ä¸ªç¯ ä½†æ˜¯å› ä¸º $5$ è¿˜ä¸åˆ«çš„èŠ‚ç‚¹ç›¸è¿ï¼Œæ‰€ä»¥ $5$ åº”è¯¥è¢«æ‰©å±•ä¸º $5 \\rightarrow â€¦ \\rightarrow 5$ï¼Œæ‰€ä»¥åˆéœ€è¦å›é€€åˆ°èŠ‚ç‚¹ 5 å¼€å§‹å¯»æ‰¾æ–°çš„ç¯ æœ€ç»ˆæˆ‘ä»¬æ‰¾åˆ°äº†ç¯ $5 \\rightarrow 6 \\rightarrow 7 \\rightarrow 8 \\rightarrow 5$ï¼Œå°†è¿™ä¸ªç»“æœæ›¿æ¢ $2 \\rightarrow 4 \\rightarrow 5 \\rightarrow 2$ å…¶ä¸­çš„ $5$ï¼Œå¾—åˆ° $2 \\rightarrow 4 \\rightarrow 5 \\rightarrow 6 \\rightarrow 7 \\rightarrow 8 \\rightarrow 5 \\rightarrow 2$ï¼Œæœ€åå°†è¿™ä¸ªç»“æœç¯æ›¿æ¢ $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 0$ å…¶ä¸­çš„ $2$ï¼Œç»“æœå˜ä¸º $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 4 \\rightarrow 5 \\rightarrow 6 \\rightarrow 7 \\rightarrow 8 \\rightarrow 5 \\rightarrow 2 \\rightarrow 3 \\rightarrow 0$ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ˆæ¥æ¨¡æ‹Ÿä¸Šé¢çš„å›é€€åŠ¨ä½œï¼Œå½“æˆ‘ä»¬éå†ç¯æ—¶ï¼Œå°†èŠ‚ç‚¹æ·»åŠ è¿›æ ˆ resultä¸­ï¼Œå½“æˆ‘ä»¬å‘ç°æ¥åˆ°æŸä¸ªèŠ‚ç‚¹ä¸èƒ½ç»§ç»­éå†å¹¶ä¸”è¿˜æœ‰è¾¹æœªè¢«éå†æ—¶ï¼Œæˆ‘ä»¬ä¾¿è¿›è¡Œå›é€€ï¼Œä»æ ˆä¸­å¼¹å‡ºå…ƒç´ ï¼Œç›´åˆ°æ ˆé¡¶èŠ‚ç‚¹è¿˜ä¸å…¶ä»–èŠ‚ç‚¹ç›¸è¿ï¼Œä»è¯¥èŠ‚ç‚¹å¼€å§‹å¯»æ‰¾æ–°çš„ç¯ã€‚æˆ‘ä»¬ä¼šå°†ä»æ ˆä¸­å¼¹å‡ºçš„èŠ‚ç‚¹æ·»åŠ åˆ°å¦ä¸€ä¸ªæ ˆ back ä¸­ï¼Œå½“æˆ‘ä»¬éå†å®Œæ‰€æœ‰çš„è¾¹æ—¶åœ¨å°† back è¿™ä¸ªæ ˆä¸­çš„èŠ‚ç‚¹ä¾æ¬¡å¼¹å…¥åˆ° result è¿™ä¸ªæ ˆä¸­ å› ä¸ºä¸Šé¢æœ‰åˆ è¾¹çš„åŠ¨ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ Graph æ¥å£æ·»åŠ äº†ä¸€ä¸ª removeEdge(int v, int w)ï¼Œä½œç”¨å°±æ˜¯å°† v-w è¿™æ¡è¾¹åˆ é™¤ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ @Overridepublic void removeEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); sets[v].remove(w); sets[w].remove(v);&#125; Hierholzer ç®—æ³•çš„å®ç°å¦‚ä¸‹ import java.util.ArrayList;import java.util.Collections;import java.util.Stack;public class EulerCycle &#123; private Graph graph; public EulerCycle(Graph graph) &#123; this.graph = graph; &#125; public boolean hasEulerCycle() &#123; CCGraph ccGraph = new CCGraph(graph); if (ccGraph.getCCcount() != 1) &#123; return false; &#125; for (int i = 0; i &lt; graph.V(); i++) &#123; if (graph.degree(i) % 2 != 0) &#123; return false; &#125; &#125; return true; &#125; public Iterable&lt;Integer&gt; result() &#123; ArrayList res = new ArrayList(); if (!hasEulerCycle()) return res; // å‰©ä½™æœªè¢«éå†çš„è¾¹æ•° int left = graph.E(); Stack&lt;Integer&gt; result = new Stack&lt;&gt;(); Stack&lt;Integer&gt; back = new Stack&lt;&gt;(); int curV = 0; result.push(curV); // è¿˜æœ‰è¾¹æœªè¢«éå†å°±ç»§ç»­éå† while (left != 0) &#123; // æ¯æ¬¡æ›´æ–° curV ä¸ºæ ˆé¡¶èŠ‚ç‚¹ curV = result.peek(); // å¦‚æœæ ˆé¡¶å…ƒç´ æœ‰ç›¸é‚»èŠ‚ç‚¹ï¼Œä»æ­¤å¯»æ‰¾æ–°çš„ç¯ if (graph.degree(curV) != 0) &#123; // è·å¾—ä¸€ä¸ªç›¸é‚»èŠ‚ç‚¹ int w = graph.adj(curV).iterator().next(); result.push(w); graph.removeEdge(curV, w); left--; &#125; else &#123; // æ²¡æœ‰ç›¸é‚»èŠ‚ç‚¹ï¼Œè¿›è¡Œå›æº¯ back.push(result.pop()); &#125; &#125; // å°† back æ ˆä¸­çš„æ•°æ®ä¾æ¬¡å¼¹å‡ºåˆ° result while (!back.isEmpty()) &#123; result.push(back.pop()); &#125; // å°†æ ˆä¸­å…ƒç´ å¼¹å‡ºåˆ° list ä¸­ while (!result.isEmpty()) &#123; res.add(result.pop()); &#125; Collections.reverse(res); return res; &#125;&#125; éªŒè¯ç®—æ³•æ˜¯å¦æ­£ç¡®ï¼Œæ–°å»º g11.txtï¼Œå†…å®¹å¦‚ä¸‹ 9 110 10 31 22 32 42 54 55 65 86 77 8 æ‰€è¡¨ç¤ºçš„å›¾å°±æ˜¯ç¤ºä¾‹ä¸­çš„å›¾ æµ‹è¯•å¦‚ä¸‹ public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g11.txt\"); EulerCycle eulerCycle = new EulerCycle(graph); for (int w: eulerCycle.result()) &#123; System.out.print(w + \" \"); &#125;&#125; è¾“å‡ºä¸º 0 1 2 4 5 6 7 8 5 2 3 0 ä¸æˆ‘ä»¬è®¨è®ºçš„ç»“æœä¸€è‡´ã€‚ æœ€å°ç”Ÿæˆæ ‘å¸¦æƒå›¾åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œä»‹ç»çš„éƒ½æ˜¯æ— å‘æ— æƒå›¾ï¼Œé‚£æœ¬ç¯‡å¼€å§‹ä»‹ç»æ— å‘å¸¦æƒå›¾ å¦‚æœå°†ä¸Šè¿°çš„å›¾çœ‹åšæ˜¯ä¸€ä¸ªäº¤é€šç³»ç»Ÿçš„è¯ï¼Œé‚£ä¹ˆè¾¹çš„æƒé‡å°±å¯ä»¥ä»£è¡¨ä¸ºè·ç¦»ã€‚ä¸ºäº†è¡¨ç¤ºå¸¦æœ‰æƒé‡çš„å›¾ï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ª WeightedGraph ç±»æ¥è¡¨ç¤ºå¸¦æƒå›¾ã€‚ åŒæ— æƒå›¾ AdjSet ä¸€æ ·ï¼Œæˆ‘ä»¬ä»å¦‚ä¸‹æ ¼å¼çš„æ–‡ä»¶è¯»å–å†…å®¹ç”Ÿæˆå›¾ 7 120 1 20 3 70 5 21 2 11 3 41 4 31 5 52 4 42 5 43 4 13 6 54 6 7 ç¬¬ä¸€è¡Œ 7 è¡¨ç¤ºæ€»å…±æœ‰ 7 ä¸ªèŠ‚ç‚¹ï¼Œ12 è¡¨ç¤ºæœ‰ 12 æ¡ä»¶ï¼Œä¸‹é¢è¡¨ç¤ºä¸¤ä¸¤ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œä»¥åŠä¹‹é—´çš„æƒé‡ï¼Œä¾‹å¦‚ 0 1 2 è¡¨ç¤ºèŠ‚ç‚¹ 0 ä¸èŠ‚ç‚¹ 1 ç›¸é‚»ï¼Œä¹‹é—´çš„æƒé‡ä¸º 2ã€‚ WeightedGraph ç±»å¦‚ä¸‹ï¼Œä»£ç å¤§éƒ¨åˆ†åŒ AdjSet ç±»ï¼š import java.io.File;import java.util.HashMap;import java.util.Map;import java.util.Scanner;public class WeightedGraph&#123; private int V; private int E; // adj[i] æ˜¯ä¸€ä¸ª HashMapï¼Œé”®ä¸ºç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå€¼ä¸ºè¾¹ä¸Šçš„æƒé‡ private HashMap&lt;Integer, Integer&gt;[] adj; public WeightedGraph(String path) &#123; File file = new File(path); Scanner scanner = null; // ä» txt æ–‡ä»¶è¯»å–å»ºç«‹å›¾ï¼Œå¤§éƒ¨åˆ†åŒ AdjSet ç±» try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (V &lt; 0) &#123; throw new IllegalArgumentException(\"V can't be negative\"); &#125; adj = new HashMap[V]; for (int i = 0; i &lt; V; i++) &#123; adj[i] = new HashMap&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (E &lt; 0) &#123; throw new IllegalArgumentException(\"E can't be negative\"); &#125; for (int i = 0; i &lt; E; i++) &#123; int v = scanner.nextInt(); int w = scanner.nextInt(); int weight = scanner.nextInt(); if (v == w) &#123; throw new IllegalArgumentException(\"å­˜åœ¨è‡ªç¯è¾¹\"); &#125; if (adj[v].containsKey(w)) &#123; throw new IllegalArgumentException(\"å­˜åœ¨å¹³è¡Œè¾¹\"); &#125; adj[v].put(w, weight); adj[w].put(v, weight); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;finally &#123; scanner.close(); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public int getWeight(int v, int w) &#123; validateVertex(v); validateVertex(w); return adj[v].get(w); &#125; public int degree(int v) &#123; validateVertex(v); return adj[v].size(); &#125; public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return adj[v].containsKey(w); &#125; public Iterable&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return adj[v].keySet(); &#125; public void validateVertex(int v) &#123; if (v &lt; 0 &amp;&amp; v &gt;= V) &#123; throw new IllegalArgumentException(\"èŠ‚ç‚¹è¶…è¿‡ [0, V) çš„èŒƒå›´\"); &#125; &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (Map.Entry w: adj[v].entrySet()) &#123; stringBuilder.append(String.format(\"(%d: %d) \", w.getKey(), w.getValue())); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125;&#125; æœ€å°ç”Ÿæˆæ ‘é¦–å…ˆä»‹ç»ç”Ÿæˆæ ‘çš„æ¦‚å¿µï¼Œå‡è®¾å›¾ä¸­æœ‰ $V$ ä¸ªé¡¶ç‚¹ï¼Œå¦‚æœèƒ½æ‰¾åˆ°å›¾ä¸­ $V - 1$ æ¡è¾¹è¿™ $V$ ä¸ªèŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œé‚£ä¹ˆå°±è¯´è¿™ V ä¸ªèŠ‚ç‚¹ä¸ V - 1 æ¡è¾¹å½¢æˆçš„å›¾å«åšè¿™ä¸ªå›¾çš„ç”Ÿæˆæ ‘ã€‚ ä¾‹å¦‚å›¾çš„ DFS éå†ä»¥åŠ BFS éå†å°±ä¼šå½¢æˆä¸€ä¸ªç”Ÿæˆæ ‘ åªè¦å›¾ä¸­çš„ $V - 1$ æ¡è¾¹å°†å›¾ä¸­çš„ $V$ ä¸ªé¡¶ç‚¹è”é€šèµ·æ¥ï¼Œé‚£ä¹ˆå°±æ˜¯å›¾çš„ä¸€ä¸ªç”Ÿæˆæ ‘ï¼Œæ‰€ä»¥ä¸€ä¸ªå›¾æœ‰å¾ˆå¤šçš„ç”Ÿæˆæ ‘ï¼Œæ‰€è°“çš„æœ€å°ç”Ÿæˆæ ‘ï¼Œå°±æ˜¯ç”Ÿæˆæ ‘è¾¹ä¸Šçš„æƒå€¼åŠ èµ·æ¥æœ€å° é‚£ä¹ˆæœ€å°ç”Ÿæˆæ ‘æœ‰ä»€ä¹ˆåº”ç”¨å‘¢? å¦‚æœå°†è¿™ä¸ªå›¾çœ‹åšæ˜¯äº¤é€šç³»ç»Ÿï¼Œæ‰¾å‡ºæœ€å°ç”Ÿæˆæ ‘å°±æ˜¯æ‰¾åˆ°ä¸€ç§è€—è´¹æœ€ä½çš„æ–¹å¼å°†æ‰€æœ‰ç«™ç‚¹è¿é€šèµ·æ¥çš„å¸ƒå±€æ–¹æ¡ˆã€‚ åˆ‡åˆ†å®šç†ä¸‹é¢ä»‹ç»åˆ‡åˆ†å®šç†ï¼Œè¿™ä¸ªå®šç†è¢«ç”¨æ¥å¯»æ‰¾æœ€å°ç”Ÿæˆæ ‘ã€‚é¦–å…ˆä»€ä¹ˆå«åˆ‡åˆ†ï¼Œæ‰€è°“åˆ‡åˆ†å°±æ˜¯æŠŠèŠ‚ç‚¹åˆ†ä¸ºä¸¤éƒ¨åˆ† ä¸Šå›¾ä¸­èŠ‚ç‚¹ $0, 5, 4$ è¢«åˆ’åˆ†ä¸€éƒ¨åˆ†ï¼Œå…¶ä½™èŠ‚ç‚¹ä¸ºå¦ä¸€éƒ¨åˆ†ã€‚åˆ‡åˆ†çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œéšæ„ä½ è¿›è¡Œåˆ‡åˆ†ï¼Œåªè¦å°†å›¾ä¸­çš„èŠ‚ç‚¹åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†å³å¯ã€‚ å¼•å…¥äº†åˆ‡åˆ†çš„æ¦‚å¿µï¼Œä¸‹é¢ç»§ç»­å¼•å…¥æ¨ªåˆ‡è¾¹çš„æ¦‚å¿µã€‚æ‰€è°“çš„æ¨ªåˆ‡è¾¹æŒ‡çš„æ˜¯å°†ä¸¤ä¸ªä¸åŒéƒ¨åˆ†èŠ‚ç‚¹è¿æ¥èµ·æ¥çš„è¾¹ï¼Œä¾‹å¦‚å¯¹äºä¸Šé¢çš„åˆ’åˆ†ï¼Œæœ‰å¦‚ä¸‹æ¨ªåˆ‡è¾¹ ä¸Šé¢è¢«æ ‡è®°ä¸ºç»¿è‰²çš„è¾¹å°±æ˜¯æ¨ªåˆ‡è¾¹ï¼Œå¯ä»¥çœ‹åˆ°æ¨ªåˆ‡è¾¹çš„ä¸¤ç«¯æ˜¯ä¸¤ä¸ªä¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹ã€‚ ä»‹ç»å®Œå¿…é¡»çš„æ¦‚å¿µä¹‹åï¼Œå¼•å…¥åˆ‡åˆ†å®šç†ï¼š åˆ‡åˆ†å®šç†ï¼šå¯¹äºä»»æ„ä¸€ä¸ªåˆ‡åˆ†ï¼Œè¿™ç§åˆ‡åˆ†å½¢æˆçš„æ¨ªåˆ‡è¾¹ä¸­ï¼Œæƒå€¼æœ€å°çš„æ¨ªåˆ‡è¾¹ä¸€å®šåœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­ è¿™ä¸ªå®šç†å¾ˆå¥½è¯æ˜ï¼Œæˆ‘ä»¬æ ¹æ®åˆ‡åˆ†å°†å›¾åˆ†ä¸ºä¸¤éƒ¨åˆ† è¿™ä¸¤éƒ¨åˆ†ä¹‹é—´çš„è¾¹å°±æ˜¯æ¨ªåˆ‡è¾¹ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æ¨ªåˆ‡è¾¹å°†è¿™ä¸¤ä¸ªéƒ¨åˆ†è¿æ¥åœ¨äº†ä¸€èµ·ï¼Œä¸ºäº†ä½¿å¾—ç”Ÿæˆæ ‘è¿é€šï¼Œä¸€å®šè¦åœ¨æ¨ªåˆ‡è¾¹ä¸­é€‰æ‹©ä¸€æ¡è¾¹ï¼Œè€Œä¸ºäº†å¾—åˆ°æœ€å°ç”Ÿæˆæ ‘ï¼Œé‚£å½“ç„¶é€‰æ‹©çš„æ˜¯æƒå€¼æœ€å°çš„æ¨ªåˆ‡è¾¹ï¼Œæ‰€ä»¥è¯´æƒå€¼æœ€å°çš„æ¨ªåˆ‡è¾¹ä¸€å®šåœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚ Kruskal ç®—æ³•Kruskal ç®—æ³•æ˜¯æ±‚çš„æœ€å°ç”Ÿæˆæ ‘çš„ä¸€ç§ç®—æ³•ï¼Œä»–çš„æ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯æ¯æ¬¡å–å›¾ä¸­æœ€å°çš„è¾¹ï¼Œåªè¦è¿™æ¡è¾¹æ²¡æœ‰å·²ç»é€‰å–çš„è¾¹å½¢æˆç¯ã€‚ä¾‹å¦‚å¯¹äºä¸‹å›¾ é¦–å…ˆé€‰æ‹©å›¾ä¸­æœ€çŸ­çš„ä¸¤æ¡è¾¹ï¼Œå³æƒå€¼ä¸º 1 çš„ä¸¤æ¡è¾¹ 1-2 ä¸ 3-4 ä¸‹é¢ç»§ç»­é€‰æ‹©æƒå€¼æœ€å°çš„è¾¹ï¼Œé€‰æ‹© 0-5ã€0-1ï¼Œè¿™ä¸¤æ¡è¾¹çš„æƒå€¼ä¸º 2 ç»§ç»­é€‰æ‹©æƒå€¼æœ€å°çš„è¾¹ï¼Œæ­¤æ—¶é€‰æ‹© 1-4ï¼Œæƒå€¼ä¸º 3 ç»§ç»­é€‰æ‹©ï¼Œæ­¤æ—¶åº”è¯¥é€‰æ‹© 5-2 ä¸ 1-3 ä¸¤æ¡è¾¹ï¼Œå®ƒä»¬çš„æƒå€¼ä¸º 4ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°é€‰æ‹© 5-2 å°±ä¼šå½¢æˆä¸€ä¸ªç¯ï¼Œé€‰æ‹© 1-3 ä¹Ÿä¼šå½¢æˆç¯ï¼Œæ‰€ä»¥è¿™ä¸¤æ¡è¾¹ä¸èƒ½é€‰ï¼Œç”Ÿæˆæ ‘ä¸­å¯ä¸èƒ½æœ‰ç¯çš„ã€‚é™¤å¼€è¿™ä¸¤æ¡è¾¹ç»§ç»­é€‰æ‹©ï¼Œå‘ç° 5-1ã€3-6 è¿™ä¸¤æ¡è¾¹çš„æƒå€¼ä¸º 5ï¼Œæƒå€¼æœ€å°ï¼Œä½†æ˜¯é€‰æ‹© 5-1 å°±ä¼šå½¢æˆç¯ï¼Œæ‰€ä»¥ä¸é€‰ 5-1ï¼Œåªé€‰æ‹© 3-6 è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº† 6 æ¡è¾¹å°†è¿™ 7 ä¸ªé¡¶ç‚¹è¿æ¥èµ·æ¥ï¼Œå³æ‰¾åˆ°äº†ä¸€ä¸ªæœ€å°ç”Ÿæˆæ ‘ Kruskal çš„ç®—æ³•æ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯è´ªå¿ƒï¼Œæ¯æ¬¡é€‰æ‹©æƒé‡æœ€å°çš„è¾¹ï¼Œä½†æ˜¯æ€ä¹ˆè¯æ˜è¿™ç§è´ªå¿ƒç­–ç•¥æ˜¯å¯¹çš„ã€‚è¿™å°±éœ€è¦ç”¨åˆ°åˆ‡åˆ†å®šç†ã€‚ æ¯æ¬¡æˆ‘ä»¬é€‰æ‹©æœ€å°çš„è¾¹ï¼Œæˆ‘ä»¬åªéœ€è¦è®©è¿™æ¡è¾¹æ˜¯ä¸€ä¸ªåˆ‡åˆ†çš„æ¨ªåˆ‡è¾¹å°±è¡Œï¼Œè¿™ç§åˆ‡åˆ†å¾ˆå¥½åšï¼Œè®©è¿™æ¡è¾¹ä¸¤ä¸ªèŠ‚ç‚¹å±äºä¸åŒçš„éƒ¨åˆ†å³å¯ï¼Œæ ¹æ®åˆ‡åˆ†å®šç†è¿™æ¡æ¨ªåˆ‡è¾¹ä¸€å®šæ˜¯æœ€å°ç”Ÿæˆæ ‘ä¸­çš„ä¸€æ¡è¾¹ã€‚å¦‚æœè¿™æ¡è¾¹ä¸é€‰æ‹©çš„è¾¹å½¢æˆäº†ä¸€ä¸ªç¯ï¼Œè¿™è¯´æ˜æ‰¾ä¸åˆ°ä¸€ä¸ªåˆ‡åˆ†ï¼Œä½¿å¾—è¿™æ¡è¾¹çš„æ‰€æœ‰æ¨ªåˆ‡è¾¹ä¸­æœ€çŸ­çš„è¾¹ï¼Œæ‰€ä»¥ä¸èƒ½é€‰æ‹©å®ƒã€‚ åœ¨ä»£ç çš„å®ç°æ–¹å‘ï¼Œæ¯æ¬¡æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªæœ€çŸ­çš„è¾¹æ—¶ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦æ„æˆä¸€ä¸ªç¯ï¼Œä¾‹å¦‚æˆ‘ä»¬æ‰¾åˆ°è¾¹ 5-1ï¼Œéœ€è¦åˆ¤æ–­æ·»åŠ è¿™æ¡è¾¹æ˜¯å¦æ„æˆä¸€ä¸ªç¯ï¼Œå…¶å®å°±æ˜¯åœ¨æ£€æµ‹åœ¨æ·»åŠ è¿™æ¡è¾¹ä¹‹å‰èŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 æ˜¯å¦è¿é€šï¼Œå¦‚æœæ˜¯è¿é€šï¼Œæ·»åŠ è¿™æ¡è¾¹åå°±ä¼šå½¢æˆç¯ã€‚ æ¯æ¬¡éƒ½éœ€è¦åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹éœ€è¦è¿é€šï¼Œå¯ä»¥ä½¿ç”¨ DFS æ¥åšï¼Œä½†æ˜¯è¿™æ ·åšå¤æ‚åº¦å¤ªé«˜ï¼Œå€ŸåŠ©å¹¶æŸ¥é›†è¿™ç§æ•°æ®ç»“æ„å¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦è¿é€šï¼Œåªéœ€è¦åˆ¤æ–­å®ƒä»¬æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­å³å¯ï¼Œå¦‚æœå¯¹äºå¹¶æŸ¥é›†ä¸ç†Ÿï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ å¹¶æŸ¥é›†çš„å®ç°å¦‚ä¸‹ï¼š public class UnionFind &#123; private int[] parent; private int[] rank; public UnionFind(int size) &#123; parent = new int[size]; rank = new int[size]; for (int i = 0; i &lt; parent.length; i++) &#123; parent[i] = i; rank[i] = 1; &#125; &#125; public int getSize() &#123; return parent.length; &#125; private int find(int index) &#123; if (index &lt; 0 || index &gt;= parent.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; while (index != parent[index]) &#123; index = parent[index]; &#125; return index; &#125; public boolean isConnected(int p, int q) &#123; return find(p) == find(q); &#125; public void unionElements(int p, int q) &#123; int pRoot = find(p); int qRoot = find(q); if (pRoot == qRoot) &#123; return; &#125; if (rank[pRoot] &lt;= rank[qRoot])&#123; parent[pRoot] = parent[qRoot]; if (rank[pRoot] == rank[qRoot]) &#123; rank[qRoot]++; &#125; &#125; else &#123; parent[qRoot] = parent[pRoot]; &#125; &#125;&#125; æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»æ¥ä¿å­˜è¾¹çš„ä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª WeightedEdge ç±»ï¼š public class WeightedEdge &#123; private int v; private int w; private int weight; public WeightedEdge(int v, int w, int weight) &#123; this.v = v; this.w = w; this.weight = weight; &#125; public int getV() &#123; return v; &#125; public int getW() &#123; return w; &#125; public int getWeight() &#123; return weight; &#125; @Override public String toString() &#123; return String.format(\"(%d-%d: %d)\", v, w, weight); &#125;&#125; Kruskal ç®—æ³•å®ç°å¦‚ä¸‹ï¼š import java.util.ArrayList;import java.util.Collections;public class Kruskal &#123; private WeightedGraph graph; public ArrayList&lt;WeightedEdge&gt; result = new ArrayList&lt;&gt;(); public Kruskal(WeightedGraph graph) &#123; this.graph = graph; int V = graph.V(); // å°†æ‰€æœ‰çš„è¾¹æ·»åŠ è¿›é›†åˆä¸­ ArrayList&lt;WeightedEdge&gt; edges = new ArrayList&lt;&gt;(); for (int v = 0; v &lt; V; v++) &#123; for (int w: graph.adj(v)) &#123; if (v &lt; w) &#123; edges.add(new WeightedEdge(v, w, graph.getWeight(v, w))); &#125; &#125; &#125; // æ ¹æ®è¾¹çš„æƒå€¼å¤§å°ï¼Œä»å°åˆ°å¤§æ’åº Collections.sort(edges, (w1, w2) -&gt; w1.getWeight() - w2.getWeight()); UnionFind unionFind = new UnionFind(V); for (WeightedEdge edge: edges) &#123; int v = edge.getV(); int w = edge.getW(); // å¦‚æœä¹‹å‰ä¸è¿é€š if (!unionFind.isConnected(v, w)) &#123; result.add(edge); unionFind.unionElements(v, w); &#125; &#125; &#125; public Iterable&lt;WeightedEdge&gt; result() &#123; return result; &#125;&#125; Prim ç®—æ³•Prim ç®—æ³•ä¹Ÿæ˜¯æœ‰å…³æœ€å°ç”Ÿæˆæ ‘çš„ç®—æ³•ï¼Œå®ƒçš„æ€æƒ³åŒåˆ‡åˆ†å®šç†å¯†åˆ‡ç›¸å…³ã€‚å› ä¸ºå¯¹äºæ¯ä¸€ä¸ªåˆ‡åˆ†ï¼Œæƒå€¼æœ€å°çš„æ¨ªåˆ‡è¾¹ä¸€å®šåœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚Prim ç®—æ³•å°±åœ¨éå†èŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­ï¼Œå°†éå†åˆ°çš„èŠ‚ç‚¹ä¸æœªéå†çš„èŠ‚ç‚¹ä½œä¸ºä¸¤éƒ¨åˆ†å½¢æˆä¸€ä¸ªåˆ‡åˆ†ï¼Œç„¶åéå†æ­¤æ—¶æ‰€æœ‰çš„æ¨ªåˆ‡è¾¹ï¼Œåœ¨æ­¤è¾¹ä½œä¸ºæœ€å°ç”Ÿæˆæ ‘çš„ä¸€æ¡è¾¹ã€‚ æ¯æ¬¡éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹å³å¯æ‰¾åˆ°ä¸€æ¡æ¨ªåˆ‡è¾¹ï¼Œå½“éå†åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå°±èƒ½æ‰¾åˆ° $V-1$ æ¡è¾¹ï¼Œå³å¯å½¢æˆä¸€ä¸ªç”Ÿæˆæ ‘ï¼Œå¹¶ä¸”æ ¹æ®åˆ‡åˆ†å®šç†ï¼Œè¿™ä¸ªç”Ÿæˆæ ‘ä¸€å®šæ˜¯æœ€å°ç”Ÿæˆæ ‘ã€‚ Prim ç®—æ³•æœ€åçš„ç»“æœæ˜¯åŒ Kruskal ç®—æ³•ç›¸åŒçš„ã€‚ åœ¨ä»£ç çš„å®ç°æ–¹é¢ï¼Œå› ä¸ºæ¯æ¬¡äº§ç”Ÿä¸€æ¬¡æ–°çš„åˆ‡åˆ†ï¼Œéƒ½è¦æ‰¾åˆ°æ‰€æœ‰çš„æ¨ªåˆ‡è¾¹è¿›è¡Œéå†ç„¶åæ‰¾åˆ°æœ€å°çš„æ¨ªåˆ‡è¾¹ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—è¿›è¡Œå®ç°ã€‚ å½“éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ–°çš„æ¨ªåˆ‡è¾¹çš„äº§ç”Ÿéƒ½ä¸è¿™ä¸ªéå†åˆ°çš„èŠ‚ç‚¹ç›¸è¿ï¼Œæˆ‘ä»¬åªè¦å°†æ–°çš„æ¨ªåˆ‡è¾¹æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­å³å¯ï¼Œä¸ç”¨éå†èŠ‚ç‚¹å¯»æ‰¾æ‰€ä»¥çš„æ¨ªåˆ‡è¾¹ï¼Œå¦å¤–è¿™æ˜¯ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œå³é˜Ÿé¦–å…ƒç´ å®ƒçš„æƒé‡æ˜¯æœ€å°çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨æŸ¥æ‰¾æœ€å°è¾¹çš„ç‚’ä½œï¼Œç›´æ¥å–å‡ºé˜Ÿé¦–å…ƒç´ å³å¯ã€‚ å¦å¤–ï¼Œå¯èƒ½ä½ ä¼šæ³¨æ„åˆ°ï¼Œå½“éå†åˆ°ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ‡åˆ†æ—¶ï¼Œä¹‹å‰çš„æ¨ªåˆ‡è¾¹å¯èƒ½ä¸æ˜¯æ¨ªåˆ‡è¾¹äº†ï¼Œå³ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„è¾¹ä¸æ˜¯æ‰€æœ‰çš„è¾¹éƒ½æ˜¯æ¨ªåˆ‡è¾¹ã€‚ä»”ç»†æƒ³æƒ³ï¼Œè¿™ä¸ªå¹¶æ²¡æœ‰å½±å“ï¼Œå› ä¸ºè™½ç„¶ä¸æ˜¯æ‰€æœ‰çš„è¾¹éƒ½æ˜¯æ¨ªåˆ‡è¾¹ï¼Œä½†æ˜¯æ‰€æœ‰çš„æ¨ªåˆ‡è¾¹éƒ½åœ¨é˜Ÿåˆ—é‡Œï¼Œæˆ‘ä»¬ä»é˜Ÿåˆ—ä¸­å–å‡ºè¾¹æ—¶è¿›è¡Œåˆ¤æ–­ï¼Œä¸æ˜¯æ¨ªåˆ‡è¾¹ç›´æ¥å¿½ç•¥å³å¯ï¼Œå®Œå…¨ä¸å½±å“æˆ‘å¯»æ‰¾æœ€å°çš„æ¨ªåˆ‡è¾¹ã€‚ import java.util.ArrayList;import java.util.PriorityQueue;public class Prim &#123; private WeightedGraph graph; private boolean[] visited; private ArrayList&lt;WeightedEdge&gt; result = new ArrayList&lt;&gt;(); public Prim(WeightedGraph graph) &#123; this.graph = graph; PriorityQueue&lt;WeightedEdge&gt; priorityQueue = new PriorityQueue&lt;&gt;((w1, w2) -&gt; w1.getWeight() - w2.getWeight()); this.visited = new boolean[graph.V()]; visited[0] = true; for (int w: graph.adj(0)) &#123; priorityQueue.add(new WeightedEdge(0, w, graph.getWeight(0, w))); &#125; while (!priorityQueue.isEmpty()) &#123; WeightedEdge edge = priorityQueue.remove(); int v = edge.getV(); int w = edge.getW(); // ä¸æ˜¯æ¨ªåˆ‡è¾¹ç›´æ¥å¿½ç•¥ if (visited[v] &amp;&amp; visited[w]) &#123; continue; &#125; result.add(edge); visited[w] = true; // æ·»åŠ æ–°çš„æ¨ªåˆ‡è¾¹ for (int next: graph.adj(w)) &#123; priorityQueue.add(new WeightedEdge(w, next, graph.getWeight(w, next))); &#125; &#125; &#125; public Iterable&lt;WeightedEdge&gt; result() &#123; return result; &#125;&#125; å¦‚æœåœ¨å®é™…ä¸­éœ€è¦æ‰‹å†™æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ï¼Œæ¨èä½¿ç”¨ Prim ç®—æ³•ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°çš„è¯­è¨€æ ‡å‡†åº“ä¸­éƒ½æœ‰ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°ï¼Œä½†æ˜¯éƒ½æ²¡æœ‰å¹¶æŸ¥é›†çš„å®ç°ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨ Kruskal ç®—æ³•éœ€è¦æ‰‹å†™å¹¶æŸ¥é›†ã€‚ æœ€çŸ­è·¯å¾„ç®—æ³•æœ¬æ–‡è®²è§£å›¾ä¸­ç‚¹ä¸ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œä¸»è¦è®²è§£ä¸‰ä¸ªç®—æ³•ï¼š Dijkstra ç®—æ³• Bellman-Ford ç®—æ³• Floyed ç®—æ³• å…¶ä¸­ Dijkstra ä¸ Bellman-Ford æ˜¯è§£å†³å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œå³å®ƒåªèƒ½æ±‚è§£æŸèŠ‚ç‚¹åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œè€Œ Floyed ç®—æ³•èƒ½å¤Ÿæ±‚è§£æ‰€æœ‰èŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚ Dijkstra ç®—æ³•Dijkstra ç®—æ³•å®ƒèƒ½å¤Ÿæ±‚è§£å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥ç®—æ³•æœ‰ä¸€ä¸ªå‰æï¼Œå›¾ä¸­ä¸èƒ½å­˜åœ¨è´Ÿæƒè¾¹ï¼Œå³å›¾ä¸­çš„æ¯æ¡è¾¹çš„æƒå€¼éƒ½å¿…é¡»æ˜¯å¤§äºç­‰äº 0 çš„ã€‚ Dijkstra ç®—æ³•ä½¿ç”¨ä¸€ä¸ª dis æ•°ç»„æ¥è¡¨ç¤ºä»æº s åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œä¾‹å¦‚ dis[v] è¡¨ç¤ºçš„å°±æ˜¯æº s åˆ°è¾¾èŠ‚ç‚¹ v çš„æœ€çŸ­è·ç¦»ï¼Œåœ¨åˆå§‹æ—¶ï¼Œé™¤äº† dis[s] ä¸º 0ï¼Œå…¶ä½™çš„ dis[v] å‡ä¸ºæ— ç©·å¤§ã€‚ Dijkstra ç®—æ³•çš„æ€æƒ³æ˜¯ï¼Œæ¯æ¬¡ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œç„¶åæ ¹æ®è¿™ä¸ªèŠ‚ç‚¹æ›´æ–°å…¶æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹åœ¨ dis æ•°ç»„ä¸­çš„å€¼ã€‚ä¾‹å¦‚éå†åˆ°èŠ‚ç‚¹ vï¼Œå…¶ç›¸é‚»èŠ‚ç‚¹ä¸º wï¼Œå¹¶ä¸”èŠ‚ç‚¹ w æœªè¢«éå†è¿‡ï¼Œå¦‚æœ dis[v] + weight(v,w) &lt; dis[w]â€‹ï¼Œé‚£ä¹ˆå°±æ›´æ–° dis[w]ï¼Œå…¶ä¸­ weight(v, w) æ˜¯è¾¹ v-w çš„æƒå€¼ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æºä¸ºèŠ‚ç‚¹ 0ï¼Œæˆ‘ä»¬æ±‚è§£èŠ‚ç‚¹ 0 åˆ°å„ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ åˆå§‹èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 0 çš„è·ç¦»ä¸º 0ï¼Œå…¶ä½™èŠ‚ç‚¹è·ç¦»èŠ‚ç‚¹ 0 çš„è·ç¦»ä¸º $\\infin$ã€‚æ ¹æ® Dijkstra ç®—æ³•ï¼Œæ¯æ¬¡ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬æ‰¾åˆ°äº†èŠ‚ç‚¹ 0ï¼Œdis[0] ä¸º 0ï¼Œæ¯”å…¶ä»–å…ƒç´ å°ã€‚æˆ‘ä»¬æ¥åˆ°èŠ‚ç‚¹ 0ï¼Œæ ¹æ®å…¬å¼ dis[0] + weight(0, w) &lt; dis[w]æ›´æ–°ä¸ 0 ç›¸é‚»çš„èŠ‚ç‚¹ w ç»§ç»­ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œæ˜¯èŠ‚ç‚¹ 2ï¼Œå®ƒçš„å€¼ä¸º 1ï¼Œå¹¶ä¸”æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ–­å®šèŠ‚ç‚¹ 0 ç¦»èŠ‚ç‚¹ 2 çš„æœ€çŸ­è·ç¦»å°±æ˜¯ 1ã€‚ ä¸ºä»€ä¹ˆå‘¢? å‡è®¾å­˜åœ¨ä¸€æ¡æ›´çŸ­çš„è·¯å¾„ä» 0 åˆ° 2ï¼Œä¾‹å¦‚æ˜¯ 0-1-2ï¼Œä½†æ˜¯å› ä¸ºæ­¤æ—¶ 0-2 æ˜¯æœ€å°çš„ï¼Œè€Œå›¾ä¸­åˆä¸å­˜åœ¨è´Ÿæƒè¾¹ï¼Œæ‰€ä»¥ 0-1-2 æ¯” 0-1 è¿˜å¤§ï¼Œä¹Ÿå°±æ˜¯æ¯” 0-2 å¤§ï¼Œæ‰€ä»¥ 0-2 å°±æ˜¯ä» 0 åˆ° 2 çš„æœ€çŸ­è·¯å¾„ã€‚æ¥åˆ°èŠ‚ç‚¹ 2 ä¹‹åï¼Œæ ¹æ®æ¡ä»¶ dis[2] + weight(2, w) &lt; dis[w] æ˜¯å¦æˆç«‹æ›´æ–°å…¶ç›¸é‚»èŠ‚ç‚¹ã€‚ ç»§ç»­ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œæ­¤æ—¶ dis[1] ä¸ dis[6] çš„å€¼éƒ½æ˜¯ 2ï¼Œéšä¾¿é€‰ä¸€ä¸ªå°±å¯ä»¥ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©èŠ‚ç‚¹ 1ï¼Œå¹¶ä¸”æ­¤æ—¶å¯ä»¥åˆ¤å®šèŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 1 çš„æœ€çŸ­è·¯å¾„å°±æ˜¯ dis[1] ä¸º 2ã€‚ä¸ºä»€ä¹ˆ? å‡è®¾å­˜åœ¨ä¸€æ¡è·¯å¾„ç»è¿‡æœªéå†çš„èŠ‚ç‚¹ä» 0 åˆ°è¾¾èŠ‚ç‚¹ 1ï¼Œæ¯”å¦‚æ˜¯èŠ‚ç‚¹ 4 å¥½äº†ï¼Œå› ä¸º dis[1] æ­¤æ—¶æ˜¯æœªéå†çš„èŠ‚ç‚¹ä¸­æœ€å°çš„ï¼Œæ‰€ä»¥ dis[1] &lt; dis[4]ï¼Œæ›´åˆ«è¯´è¿˜è¦åŠ ä¸ŠèŠ‚ç‚¹ 4 åˆ°èŠ‚ç‚¹ 1 çš„è·ç¦»ï¼ŒçŸ›ç›¾ï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°ä¸€æ¡ç»è¿‡æœªéå†èŠ‚ç‚¹æ¥åˆ°èŠ‚ç‚¹ 1ã€‚ é‚£ä¹ˆæ˜¯å¦å­˜åœ¨ä¸€æ¡è·¯å¾„åªç»è¿‡å·²ç»éå†è¿‡çš„èŠ‚ç‚¹åˆ°è¾¾èŠ‚ç‚¹ 1ï¼Œå¹¶ä¸”è·¯å¾„æ¯” dis[1] å°ï¼Œä¸å¦¨å‡è®¾å­˜åœ¨è¿™ä¹ˆä¸€æ¡è·¯å¾„ 0 -&gt; ... -&gt; s -&gt; 1ï¼Œå®ƒçš„å€¼æ¯” dis[1] å°ï¼Œå³ dis[s] + weight(s, 1) &lt; dis[1]ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ä¹‹å‰éå†åˆ°èŠ‚ç‚¹ s å¯¹ç›¸é‚»èŠ‚ç‚¹æ›´æ–°çš„æ—¶å€™å°±ä¼šæ›´æ–° dis[1] ä¸ºæ›´å°çš„å€¼ï¼Œä¹Ÿäº§ç”Ÿäº†çŸ›ç›¾ï¼Œå› æ­¤ä¹Ÿä¸å­˜åœ¨ä¸€æ¡è·¯å¾„åªç»è¿‡å·²ç»éå†è¿‡çš„èŠ‚ç‚¹åˆ°è¾¾èŠ‚ç‚¹ 1ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´æ­¤æ—¶çš„ dis[1] å°±æ˜¯ä» 0 åˆ° 1 çš„æœ€çŸ­è·¯å¾„ã€‚ æ¥åˆ°èŠ‚ç‚¹ 1 ä¹‹åï¼Œæ›´æ–°å…¶æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹çš„å€¼ï¼Œå½“ç„¶å›¾ä¸­èŠ‚ç‚¹ 1 æ­¤æ—¶ä¸å­˜åœ¨æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸è¿›è¡Œä»»ä½•çš„æ›´æ–° ç»§ç»­ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œæ‰¾åˆ°èŠ‚ç‚¹ 6ï¼Œæ­¤æ—¶ dis[6] çš„å€¼ä¸º 2ï¼Œå¹¶ä¸”æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åˆ¤å®šä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 6 çš„æœ€çŸ­è·ç¦»å°±æ˜¯ 2ã€‚ åˆ†ææ–¹æ³•åŒä¸Šï¼Œå…ˆå‡è®¾å­˜åœ¨ä¸€æ¡ä»æœªè¢«éå†è¿‡çš„èŠ‚ç‚¹åˆ°è¾¾èŠ‚ç‚¹ 6 å¾—åˆ°çš„æ›´çŸ­è·¯å¾„ï¼Œä½†æ˜¯å› ä¸º dis[6] å·²ç»æ˜¯ä» 0 åˆ°æœªè¢«éå†çš„èŠ‚ç‚¹æœ€å°çš„ï¼Œå›¾ä¸­åˆä¸å­˜åœ¨è´Ÿæƒè¾¹ï¼Œæ‰€ä»¥çŸ›ç›¾ï¼Œå†åšå‡è®¾å­˜åœ¨åªç»è¿‡å·²è¢«éå†è¿‡çš„èŠ‚ç‚¹åˆ°è¾¾èŠ‚ç‚¹ 6ï¼Œé‚£ä¹ˆåœ¨ä¹‹å‰ dis[6] çš„å€¼å°±ä¼šè¢«æ›´æ–°ä¸ºæ›´å°çš„å€¼ï¼Œä¹Ÿä¼šäº§ç”ŸçŸ›ç›¾ï¼Œä»è€Œå¾—åˆ°ç»“è®ºï¼Œä¸å­˜åœ¨å¦å¤–ä¸€æ¡è·¯å¾„ä» 0 åˆ° 6 æ›´çŸ­ï¼Œæ­¤æ—¶ dis[6] å°±æ˜¯ä» 0 åˆ° 6 çš„æœ€çŸ­è·ç¦»ã€‚ æ¥åˆ°èŠ‚ç‚¹ 6 ä¹‹åæ ¹æ®æ¡ä»¶æ›´æ–°å…¶æœªè¢«éå†çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œå›¾ä¸­èŠ‚ç‚¹ 6 ä¸å­˜åœ¨æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œå› æ­¤ä¸ä½œæ›´æ–° ç»§ç»­ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œå‘ç° dis[3] å’Œ dis[4] éƒ½æ˜¯ 3ï¼Œæˆ‘ä»¬å°±éšä¾¿é€‰æ‹©ä¸€ä¸ªï¼Œè¿™é‡Œé€‰æ‹©èŠ‚ç‚¹ 3ï¼Œå¹¶ä¸”æ­¤æ—¶å¯ä»¥åˆ¤å®š dis[3] æ˜¯ä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 3 çš„æœ€çŸ­è·ç¦»ï¼Œå·²ç»åˆ†æè¿‡å¤šæ¬¡ï¼Œä¸å†åˆ†æã€‚ æ¥åˆ°èŠ‚ç‚¹ 3 ä¹‹åï¼Œæ ¹æ®æ¡ä»¶æ›´æ–°å…¶æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œä¸èŠ‚ç‚¹ 3 ç›¸é‚»æœªè¢«éå†è¿‡çš„èŠ‚ç‚¹å°±æ˜¯èŠ‚ç‚¹ 4ï¼Œä½†æ˜¯å¹¶ä¸æ»¡è¶³ dis[3] + 3 &lt; dis[4] çš„æ¡ä»¶ï¼Œæ‰€ä»¥ä¸æ›´æ–° dis[4] é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹é¢è¿™å¼ è¡¨ 0 1 2 3 4 5 6 dis 0 2 1 3 3 4 2 ç¬¬äºŒè¡Œçš„å€¼è¡¨ç¤ºåŸç‚¹åˆ°å„ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ æ‰€ä»¥ Dijkstra ç®—æ³•å°±å§‹ç»ˆåœ¨é‡å¤ä¸¤æ­¥ï¼š å¯»æ‰¾æœªè¢«éå†èŠ‚ç‚¹ä¸­åœ¨ dis æ•°ç»„ä¸­æœ€å°çš„é‚£ä¸ªèŠ‚ç‚¹ æ ¹æ®æ¡ä»¶æ›´æ–°æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹ å¯»æ‰¾æœ€å°èŠ‚ç‚¹çš„æ“ä½œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—æ¥å®Œæˆï¼Œç›´æ¥ä»é˜Ÿé¦–å–å‡ºçš„å€¼å°±æ˜¯æœ€å°çš„ï¼Œæ— éœ€å¯»æ‰¾ import java.util.*;public class Dijkstra &#123; private WeightedGraph graph; private int s; private int[] dis; private boolean[] visited; // æ±‚å…·ä½“çš„è·¯å¾„ç”¨ private int[] pre; public Dijkstra(WeightedGraph graph, int s) &#123; this.graph = graph; graph.validateVertex(s); this.s = s; this.dis = new int[graph.V()]; this.visited = new boolean[graph.V()]; this.pre = new int[graph.V()]; // åˆå§‹åŒ–æ“ä½œ Arrays.fill(pre, -1); Arrays.fill(dis, Integer.MAX_VALUE); pre[s] = s; dis[s] = 0; // å»ºç«‹ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ŒNode ä¿å­˜çš„æ˜¯èŠ‚ç‚¹ dis[v] çš„å€¼ PriorityQueue&lt;Node&gt; queue = new PriorityQueue&lt;&gt;((node1, node2) -&gt; node1.getDis() - node2.getDis()); queue.add(new Node(s, 0)); while (!queue.isEmpty()) &#123; // é€‰å‡ºæœ€å°èŠ‚ç‚¹ int v = queue.remove().getV(); // å¯èƒ½å­˜åœ¨é‡å¤æ·»åŠ çš„æƒ…å†µï¼Œå¿½ç•¥ if (visited[v]) &#123; continue; &#125; visited[v] = true; // æ›´æ–°æœªè¢«éå†çš„ç›¸é‚»èŠ‚ç‚¹ for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dis[w] = Math.min(dis[w], dis[v] + graph.getWeight(v, w)); // å°† dis[w] æ·»åŠ è¿›é˜Ÿåˆ—ï¼Œå¯èƒ½ä¼šé‡å¤æ·»åŠ  // ä¸è¿‡æˆ‘ä»¬åªå¯¹æœ€å°çš„é‚£ä¸ªæ„Ÿå…´è¶£ï¼Œé‡å¤æ·»åŠ å–å‡ºåä¼šè¢«å¿½ç•¥ queue.add(new Node(w, dis[w])); pre[w] = v; &#125; &#125; &#125; &#125; public int[] result() &#123; return dis; &#125; // è·å¾—æºåˆ°èŠ‚ç‚¹ t çš„å…·ä½“è·¯å¾„ public Iterable&lt;Integer&gt; path(int t) &#123; ArrayList&lt;Integer&gt; path = new ArrayList&lt;&gt;(); if (!visited[t]) &#123; return path; &#125; int cur = t; while (cur != s) &#123; path.add(cur); cur = pre[cur]; &#125; path.add(s); Collections.reverse(path); return path; &#125;&#125; Bellman-Ford ç®—æ³•Bellman-Ford ç®—æ³•ä¹Ÿæ˜¯æ±‚è§£å•æºæœ€çŸ­è·¯å¾„çš„ç®—æ³•ï¼Œä¸ Dijkstra ç®—æ³•ä¸åŒçš„æ˜¯ï¼Œå®ƒèƒ½å¤Ÿå¤„ç†è´Ÿæƒè¾¹ï¼Œå³ä½¿å…è®¸å›¾ä¸­å­˜åœ¨æƒå€¼ä¸ºè´Ÿæ•°çš„è¾¹ã€‚ åœ¨è®²è§£ Bellman-Ford ç®—æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ç»„æ“ä½œ dis[w] = Math.min(dis[w], dis[v] + graph.getWeight(v, w)); è¿™ä¸ªæ“ä½œå«åšæ¾å¼›æ“ä½œã€‚ ä¸ºä»€ä¹ˆå«æ¾å¼›ï¼Œå› ä¸ºæœ¬æ¥å¯ä»¥ç›´æ¥åˆ°è¾¾ç‚¹ wï¼Œç°åœ¨ç»è¿‡ä¸Šé¢çš„æ“ä½œä¹‹åï¼Œåè¦ç»è¿‡ç‚¹ v ç„¶ååˆ°è¾¾ w (ä¸ä¸€å®šä¼šç»è¿‡ï¼Œåªæœ‰å½“ dis[v] + graph.getWeight(v, w) &lt; dis[w] æ‰ä¼šç»è¿‡ç‚¹ v)ï¼Œå¦‚æœæŠŠè¾¹çœ‹åšæ©¡çš®ç­‹çš„è¯ï¼Œä¸å°±ç›¸å½“äºæ¾å¼›äº†å—? è€Œ Bellman-Ford ç®—æ³•å°±æ˜¯ï¼Œå¯¹æ‰€æœ‰çš„è¾¹è¿›è¡Œ $V - 1$ è½®æ¾å¼›æ“ä½œï¼Œè¿™ä¸ª $V$ æŒ‡çš„æ˜¯å›¾ä¸­çš„èŠ‚ç‚¹æ•°ç›®ï¼Œç»è¿‡ $V - 1$ è½®æ¾å¼›æ“ä½œåï¼Œæ­¤æ—¶ dis æ•°ç»„ä¸­ä¿å­˜çš„å°±æ˜¯æºç‚¹åˆ°å„ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ ä¸ºäº†ç†è§£ Bellman-Ford ç®—æ³•ä¸ºä»€ä¹ˆè¿™ä¹ˆç¥å¥‡ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç»è¿‡ $V-1$ è½®æ¾å¼›æ“ä½œä¹‹åå°±å¯ä»¥å¾—åˆ°æœ€çŸ­è·¯å¾„ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦ç ”ç©¶ä¸€ä¸‹æ¾å¼›æ“ä½œ dis[w] = Math.min(dis[w], dis[v] + graph.getWeight(v, w)); å¦‚æœè¿›è¡Œäº†æ¾å¼›æ“ä½œï¼Œæ„å‘³æºå¤šç»è¿‡äº†ä¸€æ¡è¾¹åˆ° wï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è®¾å®š dis[w] ä¸ºæºç‚¹æœ€å¤šç»è¿‡ $k$ æ¡è¾¹åˆ°è¾¾ç‚¹ w çš„æœ€çŸ­è·¯å¾„ï¼Œé‚£ä¹ˆç»è¿‡ä¸€æ¬¡æ¾å¼›æ“ä½œä¹‹å dis[w] è¯­ä¹‰å˜ä¸ºæºç‚¹æœ€å¤šç»è¿‡ $k + 1$ æ¡è¾¹åˆ°è¾¾ç‚¹ w çš„æœ€çŸ­è·¯å¾„ï¼Œå› ä¸ºä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾å¦ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šç»è¿‡ $V-1$ æ¡è¾¹ï¼Œå› æ­¤ç»è¿‡ $V - 1$ è½®çš„æ¾å¼›æ“ä½œä¹‹åï¼Œdis[w] è¯­ä¹‰å˜ä¸ºäº†æºç‚¹æœ€å¤šç»è¿‡ $V - 1$ æ¡è¾¹åˆ°è¾¾ç‚¹ w çš„æœ€çŸ­è·¯å¾„ï¼Œè€ƒè™‘åˆ°äº†æºç‚¹åˆ°è¾¾èŠ‚ç‚¹ w èƒ½ç»è¿‡çš„è¾¹æ•°çš„æ‰€æœ‰æƒ…å†µï¼Œæ‰€ä»¥æœ€ç»ˆçš„ dis[w] å°±æ˜¯æºç‚¹åˆ°ç‚¹ w çš„æœ€çŸ­è·¯å¾„ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æºç‚¹ä¸º 0 å›¾ä¸­æœ‰ 4 ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤è¦è¿›è¡Œ 3 è½®æ¾å¼›æ“ä½œã€‚ç¬¬ä¸€æ¬¡å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ¾å¼›æ“ä½œ ç¬¬äºŒæ¬¡å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ¾å¼›æ“ä½œ ç¬¬ä¸‰æ¬¡å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ¾å¼›æ“ä½œ æœ€åå¾—åˆ°çš„ç»“æœä¸º 0 1 2 3 dis 0 4 1 2 Bellman-Ford è™½ç„¶èƒ½å¤Ÿå¤„ç†è´Ÿæƒè¾¹ï¼Œä½†æ˜¯å¦‚æœå›¾ä¸­æœ‰è´Ÿæƒç¯çš„è¯ï¼Œé‚£ä¹ˆå°±æ— æ³•æ±‚è§£äº†ï¼Œæ‰€è°“çš„è´Ÿæƒç¯æ˜¯æŒ‡ç¯ä¸­æ‰€ä»¥è¾¹çš„è·¯å¾„å’Œä¸ºè´Ÿå€¼ï¼Œè¿™æ ·çš„åªè¦æˆ‘æ¯æ¬¡ç»è¿‡ä¸€æ¬¡ç¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„ dis å€¼éƒ½åœ¨å‡å°‘ï¼Œå¦‚æœå›¾ä¸­å­˜åœ¨è´Ÿæƒç¯çš„è¯ï¼Œé‚£ä¹ˆæ ¹æœ¬å°±ä¸å­˜åœ¨æœ€å°è·¯å¾„ã€‚ å¤§å®¶åœ¨è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äºæ— å‘å›¾æ¥è¯´ï¼Œå¦‚æœå›¾ä¸­å‡ºç°äº†è´Ÿæƒè¾¹æ„å‘³ç€ä»€ä¹ˆ? å‡è®¾ 0-1 æ˜¯ä¸€ä¸ªè´Ÿæƒè¾¹ï¼Œå› ä¸ºæ˜¯æ— å‘å›¾ï¼Œå¯ä»¥ä» 0 åˆ° 1ï¼Œä¹Ÿå¯ä»¥ä» 1-0ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä» 0 æ¥åˆ° 1ï¼Œç„¶åä» 1 æ¥åˆ° 0ï¼Œè¿™å°±å½¢æˆä¸€ä¸ªè´Ÿæƒç¯ã€‚æ‰€ä»¥ Bellman-Ford ç®—æ³•å…¶å®æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ç®—æ³•ã€‚ å¦å¤–æˆ‘ä»¬å¯ä»¥é€š Bellman-Ford ç®—æ³•æ£€æµ‹å›¾ä¸­æ˜¯å¦å­˜åœ¨è´Ÿæƒç¯ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœå¦‚æœä¸å­˜åœ¨è´Ÿæƒç¯çš„è¯ï¼Œç»è¿‡ $V-1$ æ¬¡æ¾å¼›æ“ä½œåï¼Œdis æ•°ç»„ä¸­çš„å…ƒç´ çš„å€¼æ˜¯ä¸ä¼šå†æ”¹å˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»è¿‡ $V-1$ æ¬¡æ¾å¼›æ“ä½œåå†æ¬¡è¿›è¡Œä¸€æ¬¡æ¾å¼›æ“ä½œï¼Œå¦‚æœåœ¨è¿™æ¬¡çš„æ¾å¼›æ“ä½œä¸­ï¼Œdis ä¸­æœ‰å…ƒç´ çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆå°±è¯´æ˜å­˜åœ¨è´Ÿæƒç¯ã€‚ import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;public class BellmanFord &#123; private int[] dis; private WeightedGraph graph; private int s; private boolean hasNegativeCycle = false; private int[] pre; public BellmanFord(WeightedGraph graph, int s) &#123; this.graph = graph; graph.validateVertex(s); this.s = s; this.dis = new int[graph.V()]; this.pre = new int[graph.V()]; Arrays.fill(dis, Integer.MAX_VALUE); Arrays.fill(pre, -1); dis[s] = 0; pre[s] = s; // k ä»£è¡¨è½®æ•° for (int k = 1; k &lt; graph.V(); k++) &#123; // å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ¾å¼›æ“ä½œï¼Œv-w ä¸ w-v æ˜¯ä¸¤æ¡è¾¹ for (int v = 0; v &lt; graph.V(); v++) &#123; for (int w: graph.adj(v)) &#123; if (dis[v] != Integer.MAX_VALUE &amp;&amp; dis[v] + graph.getWeight(v, w) &lt; dis[w]) &#123; dis[w] = dis[v] + graph.getWeight(v, w); pre[w] = v; &#125; &#125; &#125; &#125; // å†æ¬¡è¿›è¡Œä¸€æ¬¡æ¾å¼›æ“ä½œï¼Œæ£€æµ‹è´Ÿæƒç¯ for (int v = 0; v &lt; graph.V(); v++) &#123; for (int w: graph.adj(v)) &#123; if (dis[v] != Integer.MAX_VALUE &amp;&amp; (dis[v] + graph.getWeight(v, w) &lt; dis[w])) &#123; hasNegativeCycle = true; &#125; &#125; &#125; &#125; public int[] result() &#123; return dis; &#125; public Iterable&lt;Integer&gt; path(int t) &#123; ArrayList&lt;Integer&gt; path = new ArrayList&lt;&gt;(); int cur = t; while (cur != s) &#123; path.add(cur); cur = pre[cur]; &#125; path.add(s); Collections.reverse(path); return path; &#125; public boolean isHasNegativeCycle() &#123; return hasNegativeCycle; &#125;&#125; Floyed ç®—æ³•ä¸Šé¢çš„ä¸¤ä¸ªç®—æ³•è§£å†³çš„éƒ½æ˜¯å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œè€Œ Floyed ç®—æ³•è§£å†³çš„æ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­é—®é¢˜ã€‚æˆ‘ä»¬å…¶å®å¯ä»¥é€šè¿‡ä½¿ç”¨ $V$ æ¬¡ Dijkstra ç®—æ³•å°±å¯ä»¥æ±‚è§£æ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼Œä¸è¿‡ Dijkstra ç®—æ³•ä¸èƒ½å¤„ç†è´Ÿæƒè¾¹çš„é—®é¢˜ï¼Œè€Œ Floyed ç®—æ³•å¯ä»¥å¤„ç†è´Ÿæƒè¾¹çš„é—®é¢˜ã€‚ ä½†æ˜¯åŒ Bellman-Ford ç®—æ³•ä¸€æ ·ï¼Œå¦‚æœå›¾ä¸­å­˜åœ¨è´Ÿæƒç¯çš„è¯ï¼Œå°±æ ¹æœ¬ä¸å­˜åœ¨æœ€çŸ­è·¯å¾„ï¼Œè€Œæˆ‘ä»¬çŸ¥é“å¦‚æœæ— å‘å›¾ä¸­æœ‰è´Ÿæƒè¾¹çš„è¯ï¼Œå°±ç›¸å½“äºå­˜åœ¨è´Ÿæƒç¯ï¼Œæ‰€ä»¥ Floyed ç®—æ³•å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰å‘å›¾ç®—æ³•ã€‚ Floyed ç®—æ³•çš„æ€æƒ³ä¹Ÿå¾ˆç®€å•ï¼Œå¯¹äº v-wï¼Œå‡è®¾å®ƒä»¬ä¹‹é—´çš„æœ€çŸ­è·¯å¾„è¡¨ç¤ºä¸º dis[v][w]ï¼Œæ¯ä¸€æ¬¡éƒ½è¦å°è¯•ä¸€ä¸‹ç»•é“ç‚¹ t ä¼šä¸ä¼šå¾—åˆ°æ›´çŸ­çš„è·¯å¾„(t ä»èŠ‚ç‚¹ $0$ å–å€¼åˆ°èŠ‚ç‚¹ $V-1$)ï¼Œç›¸å½“äº for(int t = 0; t &lt; V; t++) &#123; dis[v][w] = Math.min(dis[v][t] + dis[t][w], dis[v][w])&#125; å½“ç»å†è¿‡ $V$ æ¬¡çš„ç»•é“å°è¯•åï¼Œæœ€ç»ˆ dis[v][w] å°±è¡¨ç¤ºèŠ‚ç‚¹ v ä¸èŠ‚ç‚¹ w ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚ å¦å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ Floyed ç®—æ³•å¯¹è´Ÿæƒç¯è¿›è¡Œæ£€æµ‹ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœæ²¡æœ‰è´Ÿæƒç¯çš„è¯ dis[v][v] çš„å€¼å§‹ç»ˆæ˜¯ 0ï¼Œå¦‚æœå­˜åœ¨è´Ÿæƒç¯çš„è¯ï¼Œé‚£ä¹ˆ dis[v][v] çš„å€¼å°±ä¼šæ›´æ–°ä¸ºå°äº 0 çš„å€¼ï¼Œåœ¨ç»è¿‡ $V$ æ¬¡ç»•é“ä¹‹åæ£€æŸ¥æ‰€æœ‰çš„ dis[v][v] æ˜¯å¦ç­‰äº 0 å³å¯çŸ¥é“å›¾ä¸­æ˜¯å¦æœ‰è´Ÿæƒç¯ã€‚ import java.util.Arrays;public class Floyed &#123; private WeightedGraph graph; private int[][] dis; private boolean hasNegativeCycle = false; public Floyed(WeightedGraph graph) &#123; this.graph = graph; this.dis = new int[graph.V()][graph.V()]; for (int i = 0; i &lt; dis.length; i++) &#123; Arrays.fill(dis[i], Integer.MAX_VALUE); &#125; // åˆå§‹åŒ– dis[][] for (int v = 0; v &lt; graph.V(); v++) &#123; dis[v][v] = 0; for (int w: graph.adj(v)) &#123; dis[v][w] = graph.getWeight(v, w); &#125; &#125; // ç»•é“å°è¯• for (int t = 0; t &lt; graph.V(); t++) &#123; for(int v = 0; v &lt; graph.V(); v++) &#123; for (int w = 0; w &lt; graph.V(); w++) &#123; if (!(dis[v][t] == Integer.MAX_VALUE || dis[t][w] == Integer.MAX_VALUE)) &#123; dis[v][w] = Math.min(dis[v][w], dis[v][t] + dis[t][w]); &#125; &#125; &#125; &#125; // æ£€æµ‹è´Ÿæƒç¯ for (int v = 0; v &lt; graph.V(); v++) &#123; if (dis[v][v] &lt; 0) &#123; hasNegativeCycle = true; &#125; &#125; &#125; public int dis(int v, int w) &#123; return dis[v][w]; &#125; public boolean isHasNegativeCycle() &#123; return hasNegativeCycle; &#125;&#125; Floyed ç®—æ³•ä¹Ÿæœ‰æ—¶ç§°ä¸º 3-for ç®—æ³•ï¼Œå› ä¸ºå®ƒçš„ç®—æ³•æ ¸å¿ƒå°±æ˜¯ä¸‰ä¸ªåµŒå¥—çš„ for å¾ªç¯ï¼ŒFloyed ç®—æ³•çš„å®ç°æ˜¯è¿™ä¸‰ä¸ªç®—æ³•ä¸­æœ€ç®€å•çš„ã€‚ ä¹‹å‰æ¥è§¦è¿‡çš„å›¾éƒ½æ˜¯æ— å‘å›¾ï¼Œåœ¨è¿™ä¸ªå°èŠ‚ä¸­è®²è§£æœ‰å‘å›¾ å®é™…ç”Ÿæ´»ä¸­çš„å¾ˆå¤šé—®é¢˜éƒ½å¯ä»¥å»ºæ¨¡ä¸ºä¸€ä¸ªæœ‰å‘å›¾çš„æ¨¡å‹ï¼š ç¤¾äº¤ç½‘ç»œï¼šå›¾ä¸­çš„èŠ‚ç‚¹çœ‹åšæ˜¯ä¸€ä¸ªä¸ªçš„äººï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¡¨ç¤ºè¿™ä¸ªäººå…³æ³¨äº†è¿™ä¸ªäººï¼Œè¿™ç§å…³æ³¨å…³ç³»æ˜¯æœ‰æ–¹å‘çš„ å­¦ä¹ è¯¾ç¨‹ï¼šå°†å›¾ä¸­çš„èŠ‚ç‚¹çœ‹åšæ˜¯ä¸€é—¨é—¨çš„è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹è¢«å…¶ä»–è¯¾ç¨‹æ‰€æŒ‡å‘ï¼Œè¡¨ç¤ºå­¦ä¹ è¿™é—¨è¯¾ç¨‹ä¹‹å‰éœ€è¦å­¦ä¹ å…¶ä»–çš„è¯¾ç¨‹ï¼Œè¿™ç§å­¦ä¹ é¡ºåºä¹Ÿæ˜¯æœ‰æŒ‡å‘å…³ç³»çš„ æ¨¡å—å¼•ç”¨ï¼šå°†å›¾ä¸­çš„èŠ‚ç‚¹çœ‹åšæ˜¯ä¸€ä¸ªä¸ªçš„ç¨‹åºæ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—è¢«å…¶ä»–æ¨¡å—æŒ‡å‘ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—ä¾èµ–äºå…¶ä»–æ¨¡å—ï¼Œè¿™ç§æ¨¡å—ä¹‹é—´çš„ä¾èµ–ä¹Ÿæ˜¯æœ‰æ–¹å‘çš„ æœ‰å‘å›¾ç®—æ³•æœ‰å‘å›¾çš„è¡¨ç¤ºæˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„æ— å‘å›¾å¯ä»¥çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„æœ‰å‘å›¾ï¼Œæ‰€è°“çš„ç‰¹æ®Šåœ¨äºæ¯ä¸ªèŠ‚ç‚¹éƒ½äº’ç›¸æŒ‡å‘ã€‚æˆ‘ä»¬ä¹‹å‰åœ¨ g.txt å€¼è§„å®šè§„å®šäº†èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬å½“æˆ‘ä»¬è¯»å–åˆ°ä¸‹é¢çš„å½¢å¼çš„æ—¶å€™ 0 1 è¡¨ç¤ºçš„æ˜¯èŠ‚ç‚¹ 0 æŒ‡å‘èŠ‚ç‚¹ 1 ä»¥åŠèŠ‚ç‚¹ 1 æŒ‡å‘èŠ‚ç‚¹ 0ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ— å‘å›¾ä¸­å®ç°å¦‚ä¸‹ adj[0].add(1);adj[1].add(0); å¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³è¡¨ç¤ºèŠ‚ç‚¹ 0 æŒ‡å‘èŠ‚ç‚¹ 1ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦æ·»åŠ ä¸‹é¢é‚£ä¸€è¡Œè¯­å¥å°±å¥½äº†ã€‚æ‰€ä»¥æœ‰å‘å›¾å¯¹æ¯”äºæ— å‘å›¾çš„å®ç°åªéœ€è¦æ›´æ”¹è¿™ä¸€ä¸ªéƒ¨åˆ† &#123;48&#125;import java.io.File;import java.io.FileNotFoundException;import java.util.Scanner;import java.util.TreeSet;public class DirectedGraph &#123; private int E; private int V; private TreeSet&lt;Integer&gt;[] adj; public DirectedGraph(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (this.V &lt; 0) &#123; throw new IllegalArgumentException(\"V Must Be Positive\"); &#125; this.adj = new TreeSet[this.V]; for (int i = 0; i &lt; this.V; i++) &#123; this.adj[i] = new TreeSet&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (this.E &lt; 0) &#123; throw new IllegalArgumentException(\"E Must Be Positive\"); &#125; this.inDegree = new int[V]; this.outDegree = new int[V]; for (int i = 0; i &lt; this.E; i++) &#123; int a = scanner.nextInt(); validateVertex(a); int b = scanner.nextInt(); validateVertex(b); if (a == b) &#123; throw new IllegalArgumentException(\"Self loop exists\"); &#125; if (adj[a].contains(b)) &#123; throw new IllegalArgumentException(\"Parallel edge exists\"); &#125; // åªæ˜¯åˆ æ‰äº† adj[b].add(a) adj[a].add(b); &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; private void validateVertex(int v) &#123; if (v &lt; 0 || v &gt;= this.V) &#123; throw new IllegalArgumentException(\"Vertex \" + v + \" is invalid\"); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public Iterable&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return adj[v]; &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (int w: adj(v)) &#123; stringBuilder.append(String.format(\"%d \", w)); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125;&#125; éœ€è¦æ³¨æ„çš„æ˜¯æœ‰ä¸€ä¸ªæ¦‚å¿µåŒæ— å‘å›¾æœ‰æ‰€ä¸åŒï¼Œé‚£å°±æ˜¯åº¦çš„æ¦‚å¿µï¼Œåœ¨æœ‰å‘å›¾ä¸­åº¦åˆ†ä¸ºä¸¤ç±»ï¼š å…¥åº¦ï¼šæœ‰å¤šå°‘æ¡è¾¹æŒ‡å‘è¯¥èŠ‚ç‚¹ å‡ºåº¦ï¼šæœ‰å¤šå°‘æ¡ä»¶ä»è¯¥èŠ‚ç‚¹æŒ‡å‘åˆ«çš„èŠ‚ç‚¹ ä¾‹å¦‚å¯¹äºä¸‹å›¾ï¼ŒèŠ‚ç‚¹ 2 çš„å…¥åº¦ä¸º 2ï¼Œå› ä¸ºæœ‰ä¸¤æ¡è¾¹æŒ‡å‘èŠ‚ç‚¹ 2ï¼Œå‡ºåº¦ä¸º 1ï¼Œå› ä¸ºæœ‰ä¸€æ¡è¾¹ä»å®ƒæŒ‡å‘èŠ‚ç‚¹ 4ã€‚ æ‰€ä»¥æˆ‘ä»¬å†æ¬¡ä¿®æ”¹ä¸€ä¸‹ç±» DirectedGraph å¦‚ä¸‹ import java.io.File;import java.io.FileNotFoundException;import java.util.Scanner;import java.util.TreeSet;public class DirectedGraph &#123; private int E; private int V; private TreeSet&lt;Integer&gt;[] adj; // å¢åŠ å…¥åº¦å’Œå‡ºåº¦çš„æˆå‘˜å˜é‡ private int[] inDegree; private int[] outDegree; public DirectedGraph(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; // å…¶ä»–ä»£ç ç›¸åŒ this.inDegree = new int[V]; this.outDegree = new int[V]; for (int i = 0; i &lt; this.E; i++) &#123; // å…¶ä»–ä»£ç ç›¸åŒ adj[a].add(b); // åœ¨è¿™é‡Œåˆå§‹åŒ–å…¥åº¦å’Œå‡ºåº¦ï¼Œa â†’ bï¼Œaçš„å‡ºåº¦å¢åŠ ï¼Œbçš„å…¥åº¦å¢åŠ  inDegree[b]++; outDegree[a]++; &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; public int inDegree(int v) &#123; validateVertex(v); return inDegree[v]; &#125; public int outDegree(int v) &#123; validateVertex(v); return outDegree[v]; &#125; // å…¶ä»–æ–¹æ³•&#125; DFSå¯¹äºæœ‰å‘å›¾æ¥è¯´ï¼Œå®ƒçš„ DFS ä»£ç å’Œ BFS ä»£ç åŒæ— å‘å›¾çš„å†™æ³•å®Œå…¨æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºåœ¨åæ–‡ä¸­éœ€è¦ç”¨åˆ° DFS éå†ï¼Œæ‰€ä»¥è¿™é‡Œè´´å‡ºæœ‰å‘å›¾çš„ DFS éå†ä»£ç  import java.util.ArrayList;public class DFSDirectedGraph &#123; private DirectedGraph graph; // æ·±åº¦ä¼˜å…ˆå‰åºéå†ç»“æœ private ArrayList&lt;Integer&gt; pre; // æ·±åº¦ä¼˜å…ˆååºéå†ç»“æœ private ArrayList&lt;Integer&gt; post; private boolean[] visited; public DFSDirectedGraph(DirectedGraph graph) &#123; this.graph = graph; this.pre = new ArrayList&lt;&gt;(); this.post = new ArrayList&lt;&gt;(); this.visited = new boolean[graph.V()]; for (int v = 0; v &lt; graph.V(); v++) &#123; if (!visited[v]) &#123; dfs(v); &#125; &#125; &#125; private void dfs(int v) &#123; visited[v] = true; pre.add(v); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w); &#125; &#125; post.add(v); &#125; public ArrayList&lt;Integer&gt; pre() &#123; return pre; &#125; public ArrayList&lt;Integer&gt; post() &#123; return post; &#125;&#125; å¯è§ä¸Šé¢çš„ä»£ç ä¸æ— å‘å›¾çš„ DFS å¹¶æ— ä¸åŒã€‚ æœ‰å‘å›¾çš„ç¯æ£€æµ‹æ£€æµ‹æœ‰å‘å›¾ä¸­æ˜¯å¦å­˜åœ¨ç¯æ˜¯ä¸€ä»¶å¾ˆæœ‰å¿…è¦çš„äº‹æƒ… å¦‚æœå°†ä¸Šé¢çš„å›¾çœ‹åšæ˜¯ä¸€ä¸ªè¯¾ç¨‹ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¦‚æœå›¾ä¸­å­˜åœ¨ç¯ï¼Œè¯´æ˜è¯¾ç¨‹ä¹‹é—´ç›¸äº’ä¾èµ–ï¼Œå­¦ä¹ è¯¾ç¨‹ A ä¹‹å‰éœ€è¦å…ˆå­¦ä¹ è¯¾ç¨‹ Bï¼Œè€Œå­¦ä¹ è¯¾ç¨‹ B ä¹‹å‰åˆéœ€è¦å…ˆå­¦ä¹ è¯¾ç¨‹ Aï¼Œè¿™æ ·çš„å­¦ä¹ é¡ºåºè‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ã€‚ æˆ‘ä»¬æƒ³ä¸€æƒ³æˆ‘ä»¬åœ¨æ— å‘å›¾ä¸­æ˜¯æ€ä¹ˆåšç¯æ£€æµ‹çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ DFS éå†ï¼Œå½“éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœæŸä¸ªé‚»æ¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®äº†ï¼Œå¹¶ä¸”ä¸æ˜¯å®ƒçš„çˆ¶äº²èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå›¾ä¸­å­˜åœ¨ä¸€ä¸ªç¯ã€‚ä½†æ˜¯å¯¹äºæœ‰å‘å›¾å°±ä¸ä¸€æ ·äº† ä¸Šé¢çš„åŠ¨å›¾æ˜¯ä¼˜å…ˆéå†çš„é¡ºåºï¼Œæœ€åæˆ‘ä»¬æ¥åˆ°äº†èŠ‚ç‚¹ 3 æ­¤æ—¶æˆ‘ä»¬å‘ç°èŠ‚ç‚¹ 3 çš„ç›¸é‚»èŠ‚ç‚¹ 2 å·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œå¹¶ä¸”èŠ‚ç‚¹ 2 ä¸æ˜¯ 3 çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬èƒ½è¯´å›¾ä¸­å­˜åœ¨ä¸€ä¸ªç¯å—? ä¸èƒ½ï¼Œå› ä¸ºèŠ‚ç‚¹ 2 æ— æ³•åˆ°è¾¾èŠ‚ç‚¹ 3ï¼Œæ‰€ä»¥å½¢æˆä¸äº†ä¸€ä¸ªç¯ã€‚ æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¦å¤–ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºèŠ‚ç‚¹æ˜¯å¦åœ¨è·¯å¾„ä¸Šï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹è®¿é—®é‚»æ¥èŠ‚ç‚¹æ—¶å‘ç°è¯¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ä¸”åœ¨è·¯å¾„ä¸Šï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´æ„æˆäº†ä¸€ä¸ªç¯ã€‚ ä»€ä¹ˆå«åœ¨è·¯å¾„ä¸Šï¼Œå¦‚æœè¿™ä¸ªèŠ‚ç‚¹è¿˜æ²¡æœ‰å›æº¯åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸ªèŠ‚ç‚¹åœ¨è·¯å¾„ä¸Šã€‚ å¦‚æœæˆ‘ä»¬åœ¨è®¿é—®åˆ°èŠ‚ç‚¹ w æ—¶ï¼ŒèŠ‚ç‚¹ v è¿˜åœ¨è·¯å¾„ä¸Šï¼Œè¯´æ˜èŠ‚ç‚¹ v å¯ä»¥åˆ°è¾¾èŠ‚ç‚¹ wï¼Œå¦‚æœæ­¤æ—¶èŠ‚ç‚¹ w å¯ä»¥åˆ°è¾¾èŠ‚ç‚¹ v ä¸å°±è¯´æ˜å­˜åœ¨ä¸€ä¸ªç¯å—ã€‚ public class DirectedCycleDetect &#123; private DirectedGraph graph; private boolean[] visited; // onPath[w] è¡¨ç¤ºèŠ‚ç‚¹ w æ˜¯å¦åœ¨è·¯å¾„ä¸Š private boolean[] onPath; private boolean hasCycle; public DirectedCycleDetect(DirectedGraph graph) &#123; this.graph = graph; this.visited = new boolean[graph.V()]; this.onPath = new boolean[graph.V()]; this.hasCycle = false; for (int v = 0; v &lt; graph.V(); v++) &#123; if (!visited[v]) &#123; if (dfs(v)) &#123; hasCycle = true; break; &#125; &#125; &#125; &#125; private boolean dfs(int v) &#123; visited[v] = true; onPath[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; if (dfs(w)) &#123; return true; &#125; // é€šæ— å‘å›¾ä¸åŒï¼Œ2 -&gt; 1 -&gt; 2 ä¹Ÿæ˜¯ä¸€ä¸ªç¯ &#125; else if (onPath[w]) &#123; return true; &#125; &#125; // å›æº¯åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹æ—¶å°±ä¸åœ¨è·¯å¾„ä¸Šäº† onPath[v] = false; return false; &#125; public boolean isHasCycle() &#123; return hasCycle; &#125;&#125; æ‹“æ‰‘æ’åºè¿˜æ˜¯å¯¹äºä¸‹é¢çš„è¿™ä¹ˆä¸€å‰¯å›¾ å‡è®¾ä¸Šé¢çš„èŠ‚ç‚¹ä»£è¡¨ä¸€é—¨è¯¾ç¨‹çš„è¯ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“åº”è¯¥ä»¥ä»€ä¹ˆæ ·çš„é¡ºåºå­¦ä¹ æ‰€æœ‰çš„è¯¾ç¨‹ï¼Œè¿™å…¶å®å°±æ˜¯åœ¨å¯»æ‰¾å›¾çš„æ‹“æ‰‘æ’åºã€‚ é‚£ä¹ˆæˆ‘ä»¬å¯»æ‰¾å›¾çš„æ‹“æ‰‘æ’åºå‘¢? è¿˜æ˜¯ä»¥å­¦ä¹ è¯¾ç¨‹ä¸¾ä¾‹ï¼Œè¦å­¦ä¹ ä¸€é—¨è¯¾ï¼Œé‚£ä¹ˆè¿™é—¨å°±ä¸èƒ½ä¾èµ–äºä»»ä½•ä¸€é—¨å…¶ä»–çš„è¯¾ï¼Œæˆ–è€…è¿™é—¨è¯¾å·²ç»è¢«å­¦è¿‡äº†ï¼Œå°±æ¯”å¦‚ä¸Šé¢æˆ‘ä»¬åº”è¯¥å…ˆå­¦ä¹ è¯¾ç¨‹ 0ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•è¯¾ç¨‹æŒ‡å‘å®ƒï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•è¯¾ç¨‹ï¼Œä»¥å›¾è®ºçš„è¯­è¨€æ¥è¯´ï¼Œå› ä¸ºèŠ‚ç‚¹ 0 çš„å…¥åº¦ä¸º 0ï¼Œæ‰€ä»¥å…ˆå­¦ä¹ è¯¾ç¨‹ 0ã€‚ å­¦ä¹ å®Œè¯¾ç¨‹ 0 ä¹‹åï¼Œä¸ºäº†è¡¨ç¤ºè¿™é—¨è¯¾ç¨‹å·²ç»å­¦è¿‡ï¼Œæˆ‘ä»¬å°†ä¾èµ–äºèŠ‚ç‚¹ 0 çš„èŠ‚ç‚¹çš„å…¥åº¦å‡ä¸€ æ¥ä¸‹æ¥æˆ‘ä»¬åº”è¯¥å­¦ä¹ å“ªé—¨è¯¾å‘¢? å½“ç„¶æ˜¯å…¥åº¦ä¸º 0 çš„è¯¾ï¼Œè¡¨ç¤ºä¸éœ€è¦å‰ç½®è¯¾ç¨‹æˆ–è€…å‰ç½®è¯¾ç¨‹å·²ç»å­¦è¿‡äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å­¦ä¹ è¯¾ç¨‹ 1ï¼Œå¹¶ä¸”å°†ä¾èµ–è¯¾ç¨‹ 1 çš„å…¶ä»–è¯¾ç¨‹çš„å…¥åº¦å‡ä¸€ æ¥ä¸‹æ¥è¿˜æ˜¯å­¦ä¹ å…¥åº¦ä¸º 0 çš„è¯¾ç¨‹ï¼Œå³è¯¾ç¨‹ 3ï¼Œå¹¶ä¸”æ›´æ–°ä¾èµ–è¯¾ç¨‹ 3 çš„å…¶ä»–è¯¾ç¨‹çš„å…¥åº¦ æ¥ç€å­¦ä¹ è¯¾ç¨‹ 2ï¼Œå› ä¸ºå®ƒçš„å…¥åº¦ä¸º 0ï¼Œç„¶åæ›´æ–°ä¾èµ–è¯¾ç¨‹ 2 çš„å…¶ä»–è¯¾ç¨‹çš„å…¥åº¦ æœ€åå­¦ä¹ è¯¾ç¨‹ 4 æ‰€ä»¥æœ€ç»ˆè¯¾ç¨‹çš„å­¦ä¹ é¡ºåºä¸º 0 â†’ 1 â†’ 3 â†’ 2 â†’ 4ï¼Œä¹Ÿå°±æ˜¯æ‹“æ‰‘æ’åºçš„ç»“æœã€‚ æ‰€ä»¥æˆ‘ä»¬å¯¹å›¾åšæ‹“æ‰‘æ’åºï¼Œå°±é‡å¤åšä¸¤æ­¥ï¼š é€‰æ‹©å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ æ›´æ–°ç›¸é‚»èŠ‚ç‚¹çš„å…¥åº¦ å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜å°±æ˜¯ï¼Œæ‹“æ‰‘æ’åºåªå¯¹æœ‰å‘æ— ç¯å›¾(DAG) æœ‰æ•ˆï¼Œå¦‚æœå›¾ä¸­æœ‰ç¯ï¼ŒäºŒè€…ç›¸äº’ä¾èµ–ï¼Œå°±ä¸çŸ¥é“å…ˆå­¦ä¹ å“ªä¸€é—¨è¯¾ç¨‹äº†ã€‚ åœ¨ä»£ç çš„å®ç°æ–¹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨é˜Ÿåˆ—æ¥å­˜å‚¨å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œåœ¨æ›´æ–°ç›¸é‚»èŠ‚ç‚¹å…¥åº¦çš„æ—¶å€™ï¼Œå¦‚æœå…¥åº¦ä¸º 0 åˆ™æ·»åŠ è¿›é˜Ÿåˆ—ä¸­ï¼Œæ¯æ¬¡ä»é˜Ÿåˆ—å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œæˆ‘ä»¬æ·»åŠ åˆ°ä¸€ä¸ª List ä¸­ï¼Œè¡¨ç¤ºæ‹“æ‰‘æ’åºçš„é¡ºåºã€‚å¦å¤–å¦‚æœå›¾ä¸­å­˜åœ¨ç¯çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ª List ä¸­ä¿å­˜çš„èŠ‚ç‚¹æ•°ç›®è‚¯å®šå°äºæ•´ä¸ªå›¾çš„èŠ‚ç‚¹æ•°ç›®ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨æ‹“æ‰‘æ’åºæ¥åšç¯æ£€æµ‹ã€‚ import java.util.ArrayList;import java.util.LinkedList;import java.util.Queue;public class TopoSort &#123; private DirectedGraph graph; private int[] inDegree; private ArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;(); private boolean hasCycle = false; public TopoSort(DirectedGraph graph) &#123; this.graph = graph; this.inDegree = new int[graph.V()]; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); for (int v = 0; v &lt; graph.V(); v++) &#123; inDegree[v] = graph.inDegree(v); if (inDegree[v] == 0) &#123; queue.add(v); &#125; &#125; while (!queue.isEmpty()) &#123; int v = queue.remove(); result.add(v); for (int w: graph.adj(v)) &#123; inDegree[w]--; if (inDegree[w] == 0) &#123; queue.add(w); &#125; &#125; &#125; if (result.size() != graph.V()) &#123; hasCycle = true; result.clear(); &#125; &#125; public boolean isHasCycle() &#123; return hasCycle; &#125; public ArrayList&lt;Integer&gt; result() &#123; return result; &#125;&#125; æ­¤æ—¶æˆ‘ä»¬åœ¨ä»‹ç»ä¸€ç§æ‹“æ‰‘æ’åºçš„ç®—æ³•ï¼Œå®ƒéœ€è¦å€ŸåŠ©äºæ·±åº¦ä¼˜å…ˆååºéå†ã€‚å›é¡¾ä¸€ä¸ªååºéå†çš„æ¦‚å¿µï¼Œååºéå†æŒ‡çš„æ˜¯å…ˆè®¿é—®å®Œç›¸é‚»èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®è‡ªå·±ã€‚ å¯¹äºæœ‰å‘å›¾æ„å‘³ç€ä»€ä¹ˆï¼Œæ„å‘³ç€å…ˆè®¿é—®ä¾èµ–è‡ªå·±çš„èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®è‡ªå·±ï¼Œè¯´æ˜è‡ªå·±æ˜¯åœ¨ä¾èµ–äºè‡ªå·±çš„èŠ‚ç‚¹ä¹‹åè®¿é—®çš„ï¼Œå¦‚æœæˆ‘ä»¬å¯¹æ·±åº¦ä¼˜å…ˆååºéå†åšä¸€ä¸ªé€†åºï¼Œè¿™ä¸ªé¡ºåºå°±è¡¨ç¤ºè‡ªå·±åœ¨ä¾èµ–äºè‡ªå·±çš„èŠ‚ç‚¹ä¹‹å‰è¢«è®¿é—®çš„ï¼Œè¿™ä¸å°±æ˜¯æ‹“æ‰‘æ’åºçš„ç»“æœå—ã€‚ ä½¿ç”¨æ·±åº¦ä¼˜å…ˆååºéå†æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯å®ƒä¸èƒ½åšç¯æ£€æµ‹ï¼Œè™½ç„¶å›¾ä¸­æœ‰ç¯ï¼Œä½†æ˜¯è¿˜æ˜¯èƒ½å¤Ÿæ·±åº¦ä¼˜å…ˆååºéå†ï¼Œåªä¸è¿‡æ­¤æ—¶ç»“æœä¾¿æ²¡æœ‰æ„ä¹‰äº†ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åšæ‹“æ‰‘æ’åºä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è®²è§£çš„æœ‰å‘å›¾çš„ç¯æ£€æµ‹ç®—æ³•è¿›è¡Œç¯æ£€æµ‹ import java.util.ArrayList;import java.util.Collections;public class TopoSort2 &#123; private DirectedGraph graph; private boolean hasCycle; private ArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;(); public TopoSort2(DirectedGraph graph) &#123; this.graph = graph; // ä½¿ç”¨ä¹‹å‰çš„è®²è§£çš„ç¯æ£€æµ‹ç±»è¿›è¡Œç¯æ£€æµ‹ DirectedCycleDetect directedCycleDetect = new DirectedCycleDetect(graph); this.hasCycle = directedCycleDetect.isHasCycle(); if (hasCycle) &#123; return; &#125; // å¯¹å›¾åšæ·±åº¦ä¼˜å…ˆååºéå† DFSDirectedGraph dfsDirectedGraph = new DFSDirectedGraph(graph); for (int v: dfsDirectedGraph.post()) &#123; result.add(v); &#125; // å¯¹ååºéå†å–é€†åº Collections.reverse(result); &#125; public boolean isHasCycle() &#123; return hasCycle; &#125; public ArrayList&lt;Integer&gt; result() &#123; return result; &#125;&#125; å¼ºè¿é€šåˆ†é‡ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬æ€ä¹ˆæ£€æµ‹å›¾ä¸­æœ‰å¤šå°‘ä¸ªå¼ºè”é€šåˆ†é‡ï¼Œä»¥åŠæ¯ä¸€ä¸ªå¼ºè”é€šåˆ†é‡ä¸­åŒ…å«å“ªäº›èŠ‚ç‚¹ã€‚æ‰€è°“çš„å¼ºè”é€šåˆ†é‡æŒ‡å¦‚æœæŸäº›èŠ‚ç‚¹äº’ç›¸å¯è¾¾ï¼Œé‚£ä¹ˆè¿™äº›èŠ‚ç‚¹å°±ç»„æˆäº†ä¸€ä¸ªå¼ºè”é€šåˆ†é‡ã€‚ å¦‚ä¸Šå›¾å°±ä¸‰ä¸ªå¼ºè”é€šåˆ†é‡ï¼Œæ¯ä¸ªè”é€šåˆ†é‡å†…éƒ¨çš„èŠ‚ç‚¹éƒ½æ˜¯äº’ç›¸å¯è¾¾çš„ã€‚ åœ¨æ±‚è§£æœ‰å‘å›¾çš„è”é€šåˆ†é‡ä¹‹å‰ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ— å‘å›¾çš„è”é€šåˆ†é‡æ˜¯å¦‚ä½•æ±‚è§£çš„ï¼Œæˆ‘ä»¬ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹åš DFSï¼Œæ¯æ¬¡åšä¸€æ¬¡ DFS å°±è¡¨ç¤ºæœ‰ä¸€ä¸ªè”é€šåˆ†é‡ for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; cccount++; // è”é€šåˆ†é‡ä¸ªæ•°å¢åŠ  dfs(i); &#125;&#125; ä½†æ˜¯å¯¹äºæœ‰å‘å›¾æˆ‘ä»¬èƒ½ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å—? ç­”æ¡ˆæ˜¯ä¸è¡Œï¼Œè€Œæ˜¯è¦ä»¥ç‰¹å®šçš„é¡ºåºéå†ã€‚å¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªä¸ªçš„è”é€šåˆ†é‡çœ‹åšæ˜¯ä¸€ä¸ªå›¾ä¸­çš„èŠ‚ç‚¹ å¦‚æœæˆ‘ä»¬åˆ†åˆ«éå†è”é€šåˆ†é‡ $E \\rightarrow C \\rightarrow A \\rightarrow D \\rightarrow B$ ä¸­çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ¯åšä¸€æ¬¡ DFS å°±å°±å¯ä»¥ç»Ÿè®¡è”é€šåˆ†é‡æ•°ç›®ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæ˜¯ä¸Šé¢çš„é¡ºåºå‘¢? ä¸ºä»€ä¹ˆä» $E$ å¼€å§‹éå†ï¼Œå› ä¸º $E$ åªä¾èµ–å…¶ä»–è”é€šåˆ†é‡çš„èŠ‚ç‚¹ï¼Œæ²¡æœ‰å…¶ä»–è”é€šåˆ†é‡ä¾èµ–äºå®ƒï¼Œæ‰€ä»¥ä» $E$ ä¸­çš„æŸä¸ªèŠ‚ç‚¹åš DFSï¼Œåªèƒ½éå†åˆ°è”é€šåˆ†é‡ $E$ ä¸­çš„èŠ‚ç‚¹ã€‚åŒç†éå†å®Œäº† $E$ï¼Œæ­¤æ—¶ $C$ ä¹Ÿåªä¾èµ–äºå…¶ä»–è”é€šåˆ†é‡ï¼Œè™½ç„¶ $E$ ä¾èµ–äº $C$ï¼Œä½†æ˜¯ $E$ å·²ç»éå†å®Œæ¯•äº†ï¼Œæ‰€ä»¥æ­¤æ—¶ä» $C$ ä¸­çš„èŠ‚ç‚¹å¼€å§‹åš DFS åªèƒ½éå†åˆ° $C$ ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œå‰©ä½™çš„ä¹Ÿæ˜¯åŒç†ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¾èµ–äºè‡ªå·±çš„è”é€šåˆ†é‡è¦è¢«å…ˆéå†åˆ°ï¼Œä¹Ÿå°±æ˜¯ç›¸é‚»èŠ‚ç‚¹è¦åœ¨è‡ªå·±ä¹‹å‰è¢«è®¿é—®åˆ°ï¼Œå…¶å®å°±æ˜¯æ·±åº¦ä¼˜å…ˆååºéå†çš„é¡ºåºï¼Œæ‰€ä»¥ $E \\rightarrow C \\rightarrow A \\rightarrow D \\rightarrow B$ è¿™ä¸ªé¡ºåºå…¶å®æ˜¯æ·±åº¦ä¼˜å…ˆååºéå†çš„é¡ºåºã€‚ ä½†æ˜¯è¿™ä¸ªæ·±åº¦ä¼˜å…ˆååºéå†æŒ‡çš„æ˜¯ä»¥è”é€šåˆ†é‡ä½œä¸ºèŠ‚ç‚¹è¿›è¡Œçš„éå†ï¼Œå¦‚æœæˆ‘ä»¬ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åšæ·±åº¦ä¼˜å…ˆååºéå†æ˜¯å¾—ä¸åˆ°è¿™ä¸ªé¡ºåºçš„ã€‚ä¾‹å¦‚æˆ‘ä»¬ä»è”é€šåˆ†é‡ä¸­çš„èŠ‚ç‚¹ $D$ å¼€å§‹éå†ï¼Œæ¥ç€æ¥åˆ°äº†è”é€šåˆ†é‡ $C$ï¼Œè™½ç„¶éå†å®Œè”é€šåˆ†é‡ $C$ ä¸­æ‰€æœ‰èŠ‚ç‚¹ä¹‹å‰è‚¯å®šéœ€è¦éå†å®Œè”é€šåˆ†é‡ $E$ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ‰€æœ‰ $E$ ä¸­çš„èŠ‚ç‚¹éƒ½åœ¨ $C$ ä¹‹å‰è¢«éå†ï¼Œå³å¯èƒ½æœ‰è¿™æ ·çš„é¡ºåº $C_1 \\rightarrow E \\rightarrow C_2 \\rightarrow \\cdots$ï¼Œè¿™æ ·çš„é¡ºåºæ˜¯æˆ‘ä»¬ä¸æƒ³è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»ä»è”é€šåˆ†é‡ $E$ ä¸­çš„èŠ‚ç‚¹å¼€å§‹éå†ã€‚ è™½ç„¶ä¸Šé¢çš„æ·±åº¦ä¼˜å…ˆéå†ä¸èƒ½ä¸¥æ ¼æŒ‰ç…§ $E \\rightarrow C \\rightarrow A \\rightarrow D \\rightarrow B$ çš„é¡ºåºéå†ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ä¸€å®šæœ‰åˆ†é‡ $C$ ä¸­çš„èŠ‚ç‚¹åœ¨åˆ†é‡ $E$ éå†å®Œä¹‹åéå†çš„ $C_1 \\rightarrow E \\rightarrow C_2 \\rightarrow \\cdots$ï¼Œä¾‹å¦‚ $C_2$ åœ¨éå†å®Œ $E$ ä¹‹åè¢«éå†äº†ï¼Œè¿™ç»™äº†æˆ‘ä»¬çµæ„Ÿï¼Œå¦‚æœæˆ‘ä»¬å–ä¸ªé€†ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€å®šæœ‰ $C$ ä¸­çš„èŠ‚ç‚¹åœ¨ $E$ åˆ†é‡èŠ‚ç‚¹è¢«éå†ä¹‹å‰éå†ã€‚ è€Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯ä¸€å®šè¦ $E$ ä¸­çš„èŠ‚ç‚¹åœ¨ $C$ ä¸­çš„èŠ‚ç‚¹è¢«éå†ä¹‹å‰éå†ï¼Œæ€ä¹ˆåŠï¼Œæˆ‘ä»¬å°†æ•´ä¸ªå›¾çš„æ–¹å‘æ”¹å˜ä¸€ä¸‹ï¼ŒåŸæ¥æ˜¯ $a \\rightarrow b$ï¼Œç°åœ¨å˜ä¸º $b \\rightarrow a$ ç„¶åè¿›è¡Œæ·±åº¦ä¼˜å…ˆååºéå†ï¼Œç„¶åå–ä¸ªé€†å°±å¯ä»¥ä¿è¯ä¸€å®šæœ‰åœ¨ $E$ ä¸­çš„èŠ‚ç‚¹åœ¨ $C$ ä¸­çš„èŠ‚ç‚¹éå†ä¹‹å‰è¢«éå†åˆ°ï¼ŒåŒç†å¯ä»¥å¾—åˆ°ä¸€å®šæœ‰ $C$ ä¸­çš„èŠ‚ç‚¹åœ¨ $D$ ä¸­çš„èŠ‚ç‚¹è¢«éå†ä¹‹å‰è¢«éå†åˆ°ï¼Œè¿™å°±è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘ä»¬å†æ ¹æ®è¿™ä¸ªé¡ºåºåš DFS å°±å¯ä»¥ç»Ÿè®¡å‡ºè”é€šåˆ†é‡çš„ä¸ªæ•°äº†ã€‚ ä¸Šé¢è¿™ä¸ªç®—æ³•å°±æ˜¯ Kosaraju ç®—æ³•ï¼Œæ€»ç»“ä¸Šé¢çš„æ­¥éª¤å¦‚ä¸‹ï¼š å›¾ç¿»è½¬å¾—åˆ°åå›¾ å¯¹åå›¾åšæ·±åº¦ä¼˜å…ˆååºéå†ï¼Œç„¶åå¯¹éå†ç»“æœå–é€† æ ¹æ®å–é€†åçš„ç»“æœä¾æ¬¡åš DFSï¼Œç»Ÿè®¡è”é€šåˆ†é‡ä¸ªæ•° import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;import java.util.TreeSet;public class StrongCC &#123; private DirectedGraph graph; private int[] visited; private int scccount; public StrongCC(DirectedGraph graph) &#123; this.graph = graph; this.visited = new int[graph.V()]; Arrays.fill(visited, -1); this.scccount = 0; // ç¿»è½¬å›¾ TreeSet&lt;Integer&gt;[] reverse = new TreeSet[graph.V()]; for (int i = 0; i &lt; graph.V(); i++) &#123; reverse[i] = new TreeSet&lt;&gt;(); &#125; for (int v = 0; v &lt; graph.V(); v++) &#123; for (int w: graph.adj(v)) &#123; reverse[w].add(v); &#125; &#125; // å¯¹ç¿»è½¬å›¾åš DFS DFSDirectedGraph dfsDirectedGraph = new DFSDirectedGraph(new DirectedGraph(reverse)); // å¯¹æ·±åº¦ä¼˜å…ˆååºéå†å–é€† ArrayList&lt;Integer&gt; res = dfsDirectedGraph.post(); Collections.reverse(res); // ä¾æ¬¡åš DFSï¼Œæ¯åšä¸€æ¬¡ DFSï¼Œè”é€šåˆ†é‡ä¸ªæ•°å¢åŠ  for(int v: res) &#123; if (visited[v] == -1) &#123; dfs(v, scccount); scccount++; &#125; &#125; &#125; private void dfs(int v, int id) &#123; visited[v] = id; for (int w: graph.adj(v)) &#123; if (visited[w] == -1) &#123; dfs(w, id); &#125; &#125; &#125; public ArrayList&lt;Integer&gt;[] components() &#123; ArrayList&lt;Integer&gt;[] results = new ArrayList[scccount]; for (int i = 0; i&lt; scccount; i++) &#123; results[i] = new ArrayList&lt;&gt;(); &#125; for (int v = 0; v &lt; graph.V(); v++) &#123; results[visited[v]].add(v); &#125; return results; &#125;&#125; ç½‘ç»œæµç½‘ç»œæµä¸æœ€å¤§æµè€ƒè™‘ä¸€å¹…æœ‰å‘å¸¦æƒå›¾ å¦‚æœå›¾ä¸­æœ‰ä¸€ä¸ªæºç‚¹ï¼Œå³å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œä¸Šå›¾çš„èŠ‚ç‚¹ 0ï¼Œæœ‰ä¸€ä¸ªæ±‡ç‚¹ï¼Œå®ƒçš„å‡ºåº¦ä¸º 0ï¼Œä¸Šå›¾çš„èŠ‚ç‚¹ 3ï¼Œå¹¶ä¸”å›¾ä¸­æ‰€æœ‰è¾¹çš„æƒå€¼éƒ½æ˜¯éè´Ÿçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯´è¿™æ˜¯ä¸€ä¸ªç½‘ç»œæµã€‚ åŒä¸€èˆ¬çš„å¸¦æƒå›¾ä¸åŒï¼Œç½‘ç»œæµä¸­è¾¹çš„æƒå€¼ä¸æ˜¯æŒ‡ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾ä¸€ä¸ªèŠ‚ç‚¹çš„è·ç¦»æ˜¯å¤šå°‘ï¼Œè€—è´¹æ˜¯å¤šå°‘ï¼Œå®ƒæŒ‡çš„æ˜¯ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾å¦ä¸€ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿå®¹å¿çš„æœ€å¤§æµé‡ï¼Œä¾‹å¦‚ä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 1 å®ƒæœ€å¤šèƒ½å¤Ÿå®¹å¿ 3 çš„æµé‡ã€‚é™¤äº†æµé‡é™åˆ¶ä»¥å¤–ï¼Œè¿˜éœ€è¦æ»¡è¶³å¹³è¡¡é™åˆ¶ï¼Œå³æµå…¥æŸä¸ªèŠ‚ç‚¹çš„æµé‡å¿…é¡»ç­‰äºæµå‡ºè¯¥èŠ‚ç‚¹çš„æµé‡ï¼Œå³èŠ‚ç‚¹ä¸å…è®¸å­˜å‚¨æµé‡ï¼Œä¹Ÿä¸èƒ½äº§ç”Ÿæµé‡(é™¤äº†æºç‚¹å’Œæ±‡ç‚¹)ã€‚ çœŸå®ä¸–ç•Œä¸­å¾ˆå¤šçš„é—®é¢˜å¯ä»¥å»ºæ¨¡ä¸ºç½‘ç»œæµçš„æ¨¡å‹ï¼Œä¾‹å¦‚ä¾›æ°´ç³»ç»Ÿï¼Œå›¾ä¸­çš„è¾¹å¯ä»¥çœ‹åšæ˜¯æ°´ç®¡ï¼Œå…¶ä¸­çš„æƒå€¼è¡¨ç¤ºçš„æ˜¯æ°´ç®¡èƒ½å¤Ÿé€šè¿‡çš„æœ€å¤§æµé‡ï¼›åˆæ¯”å¦‚é€šä¿¡ç³»ç»Ÿï¼Œæ¯æ¡è¾¹çœ‹åšæ˜¯ä¸€ä¸ªä¿¡é“ï¼Œè€Œæƒå€¼å¯ä»¥çœ‹åšæ˜¯ä¿¡é“å®¹é‡ã€‚ æºç‚¹ä¸æ–­çš„å‘å‡ºæµé‡ï¼Œæ±‡ç‚¹ä¸æ–­æ¥æ”¶æµé‡ï¼Œå› ä¸ºå‰©ä½™çš„èŠ‚ç‚¹æ—¢ä¸ç”Ÿäº§æµé‡ï¼Œä¹Ÿä¸å­˜å‚¨æµé‡ï¼Œæ‰€ä»¥ä»æºç‚¹å‘å‡ºçš„æµé‡ä¼šå…¨éƒ¨è¿›å…¥åˆ°æ±‡ç‚¹ã€‚ç°åœ¨æˆ‘ä»¬æ¯”è¾ƒå…³å¿ƒçš„æ˜¯ï¼Œä»æºç‚¹æœ€å¤šèƒ½å‘å‡ºå¤šå°‘æµé‡ï¼Œæœ€ç»ˆåˆ°è¾¾æ±‡ç‚¹ï¼Œè¿™å°±æ˜¯æœ€å¤§æµé—®é¢˜ã€‚ æœ‰å‘å¸¦æƒå›¾åœ¨è®²è§£å¦‚ä½•è·å¾—ç½‘ç»œçš„æœ€å¤§æµä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æ€ä¹ˆè¡¨ç¤ºç½‘ç»œæµæ¨¡å‹ã€‚å…¶å®ç½‘ç»œæµå°±æ˜¯ä¸€ä¸ªæœ‰å‘çš„å¸¦æƒå›¾ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ä¹‹å‰çš„æ— å‘å¸¦æƒå›¾è¿›è¡Œæ”¹é€ å°±å¯ä»¥å¾—åˆ°æœ‰å‘å¸¦æƒå›¾ï¼Œæ”¹é€ çš„è¿‡ç¨‹å¯ä»¥å‚è€ƒä¹‹å‰çš„æ— å‘æ— æƒå›¾åˆ°æœ‰å‘æ— æƒå›¾çš„æ”¹é€ ï¼Œå…¶å®å°±æ˜¯å°† adj[v].put(w, weight);adj[w].put(v, weight); ä¿®æ”¹ä¸ºäº† adj[v].put(w, weight); ä»¥æ­¤è¡¨æ˜æ˜¯ä¸€ä¸ªæœ‰æ–¹å‘çš„å›¾ã€‚å¦å¤–ä¸ºäº†å®ç°åç»­çš„ç®—æ³•ï¼Œæˆ‘ä»¬ä¸ºå¸¦æƒå›¾å¢åŠ äº† 2 ä¸ª API setWeight(v, w, weight) addEdge(v, w, weight) å¦å¤–æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªæ–°çš„æ„é€ æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³å›¾ä¸­æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œå¾—åˆ°ä¸€ä¸ªæ²¡æœ‰è¾¹çš„å›¾ï¼Œåœ¨åç»­é€šè¿‡ addEdge æ–¹æ³•æ¥å›¾æ·»åŠ è¾¹ã€‚ DirectedWeightedGraph ç±»å¦‚ä¸‹ import java.io.File;import java.util.HashMap;import java.util.Map;import java.util.Scanner;public class DirectedWeightedGraph&#123; private int V; private int E; private HashMap&lt;Integer, Integer&gt;[] adj; public DirectedWeightedGraph(String path) &#123; File file = new File(path); Scanner scanner = null; try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (V &lt; 0) &#123; throw new IllegalArgumentException(\"V can't be negative\"); &#125; adj = new HashMap[V]; for (int i = 0; i &lt; V; i++) &#123; adj[i] = new HashMap&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (E &lt; 0) &#123; throw new IllegalArgumentException(\"E can't be negative\"); &#125; for (int i = 0; i &lt; E; i++) &#123; int v = scanner.nextInt(); int w = scanner.nextInt(); int weight = scanner.nextInt(); if (v == w) &#123; throw new IllegalArgumentException(\"å­˜åœ¨è‡ªç¯è¾¹\"); &#125; if (adj[v].containsKey(w)) &#123; throw new IllegalArgumentException(\"å­˜åœ¨å¹³è¡Œè¾¹\"); &#125; // è¡¨ç¤ºæœ‰å‘ adj[v].put(w, weight); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;finally &#123; scanner.close(); &#125; &#125; // å¦ä¸€æ„é€ æ–¹æ³• public DirectedWeightedGraph(int V) &#123; this.V = V; this.E = 0; this.adj = new HashMap[V]; for (int v = 0; v &lt; V; v++) &#123; adj[v] = new HashMap&lt;&gt;(); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public int getWeight(int v, int w) &#123; validateVertex(v); validateVertex(w); if (!hasEdge(v, w)) &#123; throw new IllegalArgumentException(String.format(\"%d-%d ä¸å­˜åœ¨\", v, w)); &#125; return adj[v].get(w); &#125; public void setWeight(int v, int w, int weight) &#123; validateVertex(v); validateVertex(w); if (!hasEdge(v, w)) &#123; throw new IllegalArgumentException(String.format(\"%d-%d ä¸å­˜åœ¨\", v, w)); &#125; adj[v].put(w, weight); &#125; public void addEdge(int v, int w, int weight) &#123; validateVertex(v); validateVertex(w); if (v == w) &#123; throw new IllegalArgumentException(\"å­˜åœ¨è‡ªç¯è¾¹\"); &#125; if (adj[v].containsKey(w)) &#123; throw new IllegalArgumentException(\"å­˜åœ¨å¹³è¡Œè¾¹\"); &#125; adj[v].put(w, weight); E++; &#125; public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return adj[v].containsKey(w); &#125; public Iterable&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return adj[v].keySet(); &#125; public void validateVertex(int v) &#123; if (v &lt; 0 &amp;&amp; v &gt;= V) &#123; throw new IllegalArgumentException(\"èŠ‚ç‚¹è¶…è¿‡ [0, V) çš„èŒƒå›´\"); &#125; &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (Map.Entry w: adj[v].entrySet()) &#123; stringBuilder.append(String.format(\"(%d: %d) \", w.getKey(), w.getValue())); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125;&#125; è¯¥ç±»çš„å¤§éƒ¨åˆ†å®ç°ç»†èŠ‚ä¸æ— å‘çš„ç‰ˆæœ¬ç›¸ä¼¼ï¼Œå¦‚æœä¸ç†Ÿæ‚‰å¯ä»¥æŸ¥çœ‹æ— å‘å›¾çš„ç›¸å…³ç« èŠ‚ã€‚ Ford-Fulkerson æ€æƒ³ç°åœ¨æˆ‘ä»¬å¼€å§‹çœ‹ä¸€çœ‹å¦‚ä½•æ‰¾åˆ°å›¾ä¸­çš„æœ€å¤§æµï¼Œè¿˜æ˜¯ä»¥ä¸‹å›¾ä¸ºä¾‹ æˆ‘ä»¬å…ˆä»æºç‚¹éšä¾¿é€‰æ‹©ä¸€æ¡è·¯å¾„åˆ°è¾¾æ±‡ç‚¹ å¦‚ä¸Šå›¾æˆ‘ä»¬å°±é€‰æ‹© $0 â†’ 1 â†’ 3$ è¿™æ¡è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„èƒ½å¤Ÿå…è®¸çš„æœ€å¤§å®¹é‡ä¸º 2ï¼Œæ‰€ä»¥è¿™æ¡è·¯å¾„çš„æµé‡ä¸º 2ï¼Œä¸ºäº†è¡¨ç¤ºå·²ç»é€šè¿‡äº†å¤šå°‘æµé‡ï¼Œæˆ‘ä»¬ä»¥ä¸‹é¢å½¢å¼è¡¨ç¤ºå›¾ å·¦è¾¹çš„æ•°å­—è¡¨ç¤ºå·²ç»é€šè¿‡äº†å¤šå°‘æµé‡ï¼Œå³è¾¹çš„æ•°å­—è¡¨ç¤ºå…è®¸é€šè¿‡æœ€å¤§å®¹é‡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨é€‰æ‹©ä¸€æ¡è·¯å¾„ ä¸Šé¢æˆ‘ä»¬é€‰æ‹©äº† $0 â†’ 1 â†’ 2 â†’ 3$ è¿™æ¡è·¯å¾„ï¼Œå› ä¸º $0 â†’ 1$ åªå…è®¸ 1 ä¸ªæµé‡é€šè¿‡äº†ï¼Œæ‰€ä»¥è¿™æ¡è·¯å¾„çš„æµé‡ä¸º 1ï¼Œæˆ‘ä»¬æ›´æ–°ä¸€ä¸‹å›¾ ç„¶ååœ¨é€‰æ‹©ä¸€æ¡è·¯å¾„ è¿™æ¬¡æˆ‘ä»¬é€‰æ‹©äº† $0 â†’ 2 â†’ 3$ï¼Œè¿™æ¡è·¯å¾„çš„æµé‡ä¸º $2$ï¼Œæ›´æ–°å›¾å¦‚ä¸‹ æ¥ä¸‹æ¥æˆ‘ä»¬æˆ‘ä»¬æ‰¾ä¸åˆ°ä¸€æ¡è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹äº†ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¯´è¯¥ç½‘ç»œæµçš„æœ€å¤§æµä¸º $2 + 1 + 2 = 5$ã€‚ æ‰€ä»¥ä¸Šé¢çš„ç®—æ³•å°±æ˜¯é‡å¤ä¸‹é¢ä¸¤æ­¥ï¼š éšä¾¿æ‰¾ä¸€æ¡è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹ï¼Œæ‰¾åˆ°è·¯å¾„çš„æœ€å°å€¼ï¼Œå°±æ˜¯è¿™æ¡è·¯å¾„çš„æµé‡ æ›´æ–°æ¯æ¡è¾¹å…è®¸é€šè¿‡çš„æµé‡ ä½†æ˜¯çœŸçš„éšä¾¿æ‰¾ä¸€æ¡è·¯å¾„å°±å¯ä»¥å—? æ˜¾ç„¶ä¸è¡Œï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸€å¼€å§‹å°±æ‰¾åˆ°äº†è¿™ä¹ˆä¸€ä¸ªè·¯å¾„ è¿™æ¡è·¯å¾„çš„æµé‡ä¸º 3ï¼Œæˆ‘ä»¬æ›´æ–°å›¾ ä½†æ˜¯æ¥ä¸‹æ¥æˆ‘ä»¬å‘ç°æ‰¾ä¸åˆ°è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—å‡ºè¿™ä¸ªç½‘ç»œæµçš„æœ€å¤§è·¯å¾„ä¸º $3$ï¼Œæ˜æ˜¾è¿™ä¸ªç­”æ¡ˆæ˜¯ä¸å¯¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½éšä¾¿é€‰æ‹©è·¯å¾„èµ°ï¼Œå› ä¸ºå¯èƒ½å¾—ä¸åˆ°æ­£ç¡®çš„ç­”æ¡ˆã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å…è®¸åå‘æµåŠ¨å‘¢? ä¾‹å¦‚è¿˜æ˜¯ä»¥ä¸Šå›¾ä¸ºä¾‹ è¿™æ¬¡æˆ‘ä»¬é€‰æ‹©è·¯å¾„å¦‚ä¸‹ æ›´æ–°åçš„å›¾ä¸º æœ¬æ¥ä» $2 â†’ 1$ æ˜¯ä¸å¯è¾¾çš„ï¼Œä½†æ˜¯æˆ‘ä»¬èµ‹äºˆå®ƒä¸€ä¸ªè¯­ä¹‰ï¼Œè¡¨ç¤ºå°†åŸæ¥é€šè¿‡ $1 â†’ 2$ çš„æµé‡å¼•å¯¼åˆ°åˆ«çš„è·¯å¾„å»äº†ï¼Œä¾‹å¦‚æœ¬æ¥ $1 â†’ 2$ æœ‰æµé‡ä¸º 3ï¼Œç°åœ¨æˆ‘ä»¬åå‘æµåŠ¨ 2 ä¸ªæµé‡ï¼Œè¡¨ç¤ºå°†åŸæ¥è¿™ 3 ä¸ªæµé‡ä¸­çš„ 2 ä¸ªæµé‡å¼•å¯¼åˆ°åˆ«çš„è·¯å¾„ä¸­å»äº†ã€‚ èµ‹äºˆè¿™ä¹ˆä¸€ä¸ªè¯­ä¹‰çš„è¯ï¼Œé‚£ä¹ˆä¸Šé¢å›¾çš„æ‰€æœ‰ç®­å¤´éƒ½å¯ä»¥å˜ä¸ºåŒå‘çš„ï¼Œåå‘çš„ç®­å¤´è¡¨ç¤ºå…è®¸è¢«å¼•å¯¼åˆ°åˆ«çš„è·¯å¾„ä¸Šï¼Œæˆ‘ä»¬ç»™å®ƒä¸€ä¸ªæƒå€¼ï¼Œè¡¨ç¤ºèƒ½å¤Ÿè¢«å…è®¸å¼•å¯¼åˆ°åˆ«çš„è·¯å¾„ä¸Šå»çš„æµé‡çš„æœ€å¤§å€¼ï¼Œè¿™ä¸ªå€¼åº”è¯¥æ˜¯å·²ç»é€šè¿‡è¯¥è·¯å¾„çš„æµé‡ï¼Œä¾‹å¦‚å¦‚æœ $1 â†’ 2$ æ˜¯ç”¨ $3/5$ è¡¨ç¤ºçš„è¯ï¼Œè¡¨ç¤ºå·²ç»æœ‰ $3$ ä¸ªæµé‡é€šè¿‡ $1 â†’ 2$ï¼Œé‚£ä¹ˆ$2 â†’ 1$ æœ€å¤šå…è®¸ $3$ ä¸ªæµé‡è¢«å¼•å¯¼ã€‚ ä¸ºäº†è¡¨ç¤ºæ–¹ä¾¿ï¼Œä¸ç”¨ $3/5$ è¿™æ ·çš„å½¢å¼æ¥æ ‡è®°è¾¹äº†ï¼Œè€Œæ˜¯ä»¥å‰©ä½™å…è®¸é€šè¿‡çš„æµé‡è¡¨ç¤ºè¾¹ï¼Œä¾‹å¦‚ $3/5$ è¡¨ç¤ºæœ€å¤§å®¹é‡ä¸º $5$ï¼Œå·²ç»é€šè¿‡æµé‡ä¸º $3$ï¼Œæ‰€ä»¥å‰©ä½™èƒ½å¤Ÿé€šè¿‡çš„æµé‡ä¸º $2$ï¼Œæˆ‘ä»¬ä»¥ $2$ æ¥æ ‡è®°è¿™æ¡è¾¹ï¼ŒåŒç†æˆ‘ä»¬ä¹Ÿä»¥è¿™æ ·çš„æ–¹å¼æ ‡è®°åå‘çš„è¾¹ï¼Œå¾—åˆ°ä¸‹é¢çš„è¿™ä¹ˆä¸€ä¸ªå›¾ é»‘è‰²è¡¨ç¤ºæ­£å‘è¾¹ï¼Œçº¢è‰²è¡¨ç¤ºåå‘è¾¹ï¼Œä¸Šé¢çš„æ•°å€¼è¡¨ç¤ºèƒ½å¤Ÿå…è®¸é€šè¿‡çš„æœ€å¤§æµé‡ï¼Œå¯è§åœ¨æœ€å¼€å§‹åå‘è¾¹æ˜¯ä¸èƒ½å…è®¸é€šè¿‡æµé‡çš„ï¼Œå®ƒä»¬çš„æƒå€¼éƒ½æ˜¯ 0ï¼Œè¿™ä¸ªå›¾æˆ‘ä»¬ç§°ä¹‹ä¸ºæ®‹å·®å›¾ã€‚ æ¥ä¸‹ä¸‹æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„ä¸¤æ­¥äº†ï¼š éšä¾¿æ‰¾ä¸€æ¡è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹ï¼Œæ‰¾åˆ°è·¯å¾„çš„æœ€å°å€¼ï¼Œå°±æ˜¯è¿™æ¡è·¯å¾„çš„æµé‡ æ›´æ–°æ¯æ¡è¾¹å…è®¸é€šè¿‡çš„æµé‡ è¿™ä¸ªæ–¹æ³•å°±æ˜¯ Ford-Fulkerson æ€æƒ³ã€‚ Edmonds-Karp ç®—æ³•ä¸Šé¢çš„ Ford-Fulkerson åªæ˜¯æä¾›äº†ä¸€ç§æ€æƒ³ï¼Œå¾—åˆ°ä¸€ä¸ªç½‘ç»œæµçš„æ®‹å·®å›¾ï¼Œç„¶åéšä¾¿æ‰¾ä¸€æ¡è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹ï¼Œä½†æ˜¯æ²¡æœ‰è¯´æ€ä¹ˆæ‰¾è¿™æ¡è·¯å¾„ï¼Œæ‰€ä»¥å®ƒåªæ˜¯ä¸€ç§æ€æƒ³ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»‹ç» Edmonds-Karp ç®—æ³•ï¼Œå®ƒå°±æ˜¯ä¸º Ford-Fulkerson æä¾›äº†ä¸€ç§å…·ä½“çš„å®ç°ï¼Œæ€ä¹ˆæ‰¾ä¸€æ¡è·¯å¾„ï¼Œå¾ˆç®€å•ï¼Œé‚£å°±æ˜¯ä»æºç‚¹è¿›è¡Œ BFS æ¥æ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼Œå½“æˆ‘ä»¬é€šè¿‡ BFS æ— æ³•è¾¾åˆ°æ±‡ç‚¹æ—¶ï¼Œè¯´æ˜ç½‘ç»œä¸èƒ½å¤Ÿæ‰¿å—æ›´å¤§çš„æµé‡äº†ã€‚ æ‰€ä»¥ä¸Šé¢çš„æ–¹æ³•æ˜¯ä¸æ˜¯éå¸¸çš„ç®€å•ï¼Œä¸‹é¢å°±ç»™å‡ºå…·ä½“çš„å®ç° import java.util.*;public class MaxFlow &#123; private DirectedWeightedGraph graph; private int s; private int t; private DirectedWeightedGraph rcGraph; private int maxFlow = 0; public MaxFlow(DirectedWeightedGraph graph, int s, int t) &#123; this.graph = graph; // ä¸€äº›æ ¡éªŒå·¥ä½œ if (graph.V() &lt; 2) &#123; throw new IllegalArgumentException(\"ç½‘ç»œæµä¸­èŠ‚ç‚¹ä¸ªæ•°å¿…é¡»å¤§äº1\"); &#125; graph.validateVertex(s); graph.validateVertex(t); this.s = s; this.t = t; // æ ¹æ®ä¼ å…¥çš„ç½‘ç»œæµï¼Œæ„é€ æ®‹å·®å›¾ DirectedWeightedGraph rcGraph = new DirectedWeightedGraph(graph.V()); for (int v = 0; v &lt; graph.V(); v++) &#123; for (int w: graph.adj(v)) &#123; rcGraph.addEdge(v, w, graph.getWeight(v, w)); // ä¸€å¼€å§‹åå‘è¾¹èƒ½å¤Ÿå…è®¸é€šè¿‡çš„æœ€å¤§æµé‡ä¸º 0 rcGraph.addEdge(w, v, 0); &#125; &#125; this.rcGraph = rcGraph; while (true) &#123; // å¼€å§‹ä»æºç‚¹åš BFS ArrayList&lt;Integer&gt; path = getAugmentPath(); // å¦‚æœä» BFS å¾—åˆ°çš„è·¯å¾„ä¸ºç©ºï¼Œè¯´æ˜ä¸èƒ½åˆ°è¾¾æ±‡ç‚¹äº†ï¼Œæ­¤æ—¶é€€å‡ºå¾ªç¯ if (path.size() == 0) &#123; break; &#125; // è·å¾—è·¯å¾„çš„æœ€å°å€¼ï¼Œå³è¿™æ¡è·¯å¾„å…è®¸é€šè¿‡çš„æœ€å¤§æµé‡ int min = Integer.MAX_VALUE; for (int i = 1; i &lt; path.size(); i++) &#123; int v = path.get(i - 1); int w = path.get(i); min = Math.min(min, rcGraph.getWeight(v, w)); &#125; maxFlow += min; // æ›´æ–°æ®‹å·®å›¾ for (int i = 1; i &lt; path.size(); i++) &#123; int v = path.get(i - 1); int w = path.get(i); rcGraph.setWeight(v, w, rcGraph.getWeight(v, w) - min); rcGraph.setWeight(w, v, rcGraph.getWeight(w, v) + min); &#125; &#125; &#125; // åš BFS private ArrayList&lt;Integer&gt; getAugmentPath() &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); int[] pre = new int[graph.V()]; queue.add(s); Arrays.fill(pre, -1); pre[s] = s; while (!queue.isEmpty()) &#123; int v = queue.remove(); for (int w: rcGraph.adj(v)) &#123; if (pre[w] == -1 &amp;&amp; rcGraph.getWeight(v, w) &gt; 0) &#123; pre[w] = v; queue.add(w); &#125; &#125; &#125; ArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;(); if (pre[t] == -1) &#123; return result; &#125; int cur = t; while (cur != s) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(s); Collections.reverse(result); return result; &#125; // è¿”å›ç½‘ç»œçš„æœ€å¤§æµ public int result() &#123; return maxFlow; &#125; // è¿”å›æœ€ç»ˆ v-w å…è®¸é€šè¿‡çš„æµé‡ public int flow(int v, int w) &#123; if (!graph.hasEdge(v, w)) &#123; throw new IllegalArgumentException(\"å­˜åœ¨è¿™æ¡è¾¹\"); &#125; graph.validateVertex(v); graph.validateVertex(w); return rcGraph.getWeight(w, v); &#125;&#125; æ£’çƒæ¯”èµ›æœ€åæˆ‘ä»¬çœ‹ä¸€ä¸ªä½¿ç”¨æœ€å¤§æµè§£å†³å®é™…é—®é¢˜çš„ä¾‹å­ï¼Œé‚£å°±æ˜¯æ£’çƒæ¯”èµ›ã€‚ å…¨ç¾æ¯å¹´éƒ½ä¼šä¸¾è¡Œä¸€æ¬¡æ£’çƒæ¯”èµ›ï¼Œæ¯ä¸ªé˜Ÿéƒ½è¦è¿›è¡Œ 162 åœºæ¯”èµ›ï¼Œæœ€ç»ˆæ‰€èƒœçš„åœºæ¬¡æœ€å¤šçš„é˜Ÿä¼è·èƒœï¼Œå¦‚æœå¹³å±€å°±è¿›è¡ŒåŠ èµ›ã€‚ ä½†æ˜¯å¦‚æœåœ¨æ¯”èµ›çš„è¿‡ç¨‹ä¸­ï¼ŒæŸä¸€é˜Ÿå·²ç»æ²¡æœ‰è·å¾—å† å†›çš„å¸Œæœ›äº†ï¼Œé‚£ä¹ˆè¯¥é˜Ÿå°±ä¼šè¢«ç›´æ¥æ·˜æ±°ã€‚ä¾‹å¦‚ $A$ é˜Ÿå·²ç»èµ¢äº† $10$ åœºäº†ï¼Œè€Œ $B$ é˜Ÿåªèµ¢äº† $1$ åœºï¼Œå¹¶ä¸”è¿˜æœ‰ $8$ åœºæ¯”èµ›æ²¡æœ‰æ‰“ï¼Œæ­¤æ—¶ $B$ é˜Ÿå¦‚ä½•ä¹Ÿä¸èƒ½èµ¢çš„åœºæ¬¡æ¯” $A$ é˜Ÿå¤šï¼Œæ‰€ä»¥ $B$ é˜Ÿåº”è¯¥è¢«æ·˜æ±°ã€‚ ç°åœ¨æˆ‘ä»¬æ‹¿åˆ°äº† 1996 å¹´ 8 æœˆ 30 æ—¥çœŸå®çš„æ¯”èµ›æ•°æ®ï¼Œæ­¤æ—¶åªå‰©ä¸‹ 5 ä¸ªé˜Ÿ Teams Wins Loss Left Against NY Bal Bos Tor Det New York 75 59 28 0 3 8 7 3 Baltimore 71 63 28 3 0 2 7 4 Boston 69 66 27 8 2 0 0 0 Toronto 63 72 27 7 7 0 0 0 Detroit 49 86 27 3 4 0 0 0 Wins ä»£è¡¨èµ¢äº†å¤šå°‘åœºï¼ŒLoss è¡¨ç¤ºè¾“äº†å¤šå°‘åœºï¼ŒLeft è¡¨ç¤ºå‰©ä½™å¤šå°‘åœºæ²¡æœ‰æ‰“ï¼ŒAgainst åé¢çš„ 5 åˆ—è¡¨ç¤ºä¸å…¶ä»–é˜Ÿè¦æ‰“å¤šå°‘åœºã€‚ å½“æ—¶åª’ä½“äº‰è®®çš„æ˜¯æœ€åä¸€ä¸ªé˜Ÿï¼Œå³ Detroit é˜Ÿè¿˜æœ‰æ²¡æœ‰è·èƒœçš„å¸Œæœ›ã€‚ä»æ•°æ®ä¸Šçœ‹ï¼Œå¦‚æœ Detroit å‰©ä¸‹çš„ 27 åœºå…¨èµ¢ï¼Œé‚£ä¹ˆå®ƒçš„èµ¢çš„æ€»åœºæ¬¡æ˜¯ $49 + 27 = 76$ï¼Œæ¯”æœ€å¼ºçš„ New York è¿˜å¤šä¸€åœºï¼Œæ‰€ä»¥å®ƒè¿˜æœ‰èµ¢çš„æœºä¼šï¼Œä½†æ˜¯è¿™æ ·æƒ³çš„è¯å°±å¿½ç•¥äº†ä¸€ä¸ªäº‹å®ï¼Œå³ä½¿ Detroit ä¸å…¶ä»–å››é˜Ÿçš„æ¯”èµ›éƒ½æ‰“èµ¢äº†ï¼Œä½†æ˜¯è¿™å››ä¸ªé˜Ÿä¹‹é—´è¿˜æœ‰æ¯”èµ›ï¼Œä¹Ÿå°±è¯´è¯´è¿™å››ä¸ªé˜Ÿå®ƒä»¬çš„æ€»èƒœåœºæ˜¯ä¼šå¢åŠ çš„ã€‚ æ‰€ä»¥ç°åœ¨åˆå˜ä¸ºäº†è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå‰å››ä¸ªé˜Ÿä¹‹é—´æ¯”èµ›ï¼Œå¦‚æœæœ€ç»ˆå®ƒä»¬çš„èƒœåœºæœ€å¤šæ˜¯ 76 çš„è¯ï¼Œè¯´æ˜ Detroit é˜Ÿè¿˜æœ‰èµ¢çš„å¸Œæœ›ï¼Œå¦åˆ™ Detroit é˜Ÿæ²¡æœ‰èµ¢çš„å¯èƒ½ã€‚ç°åœ¨æˆ‘ä»¬å¦‚ä¸‹å»ºæ¨¡ è¿™ä¸ªå›¾åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ† å…¶ä¸­æƒå€¼è¡¨ç¤ºæ¯”èµ›åœºæ¬¡ï¼Œæ¯”å¦‚ s â†’ NY-Bal è¿™æ¡è¾¹çš„æƒå€¼ä¸º $5$ï¼Œè¡¨ç¤º NY ä¸ Bal ä¹‹é—´æœ‰äº”åœºæ¯”èµ›è¦æ‰“ï¼Œå¯è§è¿™å››ä¸ªé˜Ÿä¼æ€»å…±è¦æ‰“ $5 + 8 + 7 + 2 + 7 = 27$ åœºæ¯”èµ›ã€‚ç¬¬äºŒéƒ¨åˆ† è¿™æ¬¡çš„æƒå€¼è¡¨ç¤ºçš„æ˜¯èƒœåœºçš„åˆ†é…ã€‚ç¬¬ä¸‰éƒ¨åˆ† è¿™æ—¶å…¶ä¸­çš„æƒå€¼è¡¨ç¤ºæ¯ä¸ªé˜Ÿæœ€å¤šèµ¢å¤šå°‘æ¬¡ï¼Œä¾‹å¦‚ NY é˜Ÿç›®å‰ $75$ åˆ†ï¼Œå®ƒæœ€å¤šåªèƒ½èµ¢ä¸€åœºã€‚å¦‚æœä¸Šè¿°ç½‘ç»œæµçš„æœ€å¤§æµå¤§äºç­‰äºæ¯”èµ›çš„æ€»åœºæ¬¡ï¼Œæ‰€ä»¥å­˜åœ¨ä¸€ç§æ–¹æ¡ˆèƒ½å¤Ÿåˆ†é…æ‰€æœ‰èƒœåœºä½¿å¾—æ‰€æœ‰é˜Ÿçš„å¾—åˆ†æœ€å¤šåªæœ‰ $76$ åˆ†ã€‚ ä¸Šé¢ç½‘ç»œæµæˆ‘ä»¬å»ºæ¨¡ä¸ºå¦‚ä¸‹å›¾ 11 190 1 30 2 80 3 70 4 20 5 71 6 31 7 32 6 82 8 83 6 73 9 74 7 24 8 25 7 77 9 76 10 17 10 58 10 79 10 13 ç°åœ¨æˆ‘ä»¬ç”¨ä¹‹å‰å†™çš„ MaxFlow ç±»æ¥æŸ¥çœ‹æœ€å¤§æµæ˜¯å¤šå°‘ public class BaseBallSolution &#123; public static void main(String[] args) &#123; DirectedWeightedGraph baseball = new DirectedWeightedGraph(\"g17.txt\"); MaxFlow maxflow = new MaxFlow(baseball, 0, 10); System.out.println(maxflow.result()); &#125;&#125; ç»“æœæ˜¯ 26 è¯´æ˜æœ€å¤§æµä¸º 26ï¼Œå°äº 27ï¼Œè¯´æ˜æ— æ³•åˆ†é… 27 åœºæ¯”èµ›ä½¿å¾—æ‰€æœ‰é˜Ÿæœ€å¤šåªèƒ½èµ¢ 76 åœºï¼Œè¿™å°±æ„å‘³ç€ Detroit æ²¡æœ‰èµ¢çš„å¯èƒ½äº†ã€‚ åŒ¹é…é—®é¢˜æœ€å¤§åŒ¹é…ä¸å®Œå…¨åŒ¹é…ä¸‹é¢æˆ‘ä»¬è®²è§£çš„ç®—æ³•éƒ½æ˜¯æœ‰å…³äºäºŒåˆ†å›¾çš„ç®—æ³• ä¾‹å¦‚å¯¹äºä¸Šå›¾å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ï¼Œæ¯æ¡è¾¹éƒ½è¿æ¥äº†ä¸¤ä¸ªä¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹ï¼Œç”Ÿæ´»ä¸­å¾ˆå¤šé—®é¢˜éƒ½å¯ä»¥å»ºæ¨¡ä¸ºäºŒåˆ†å›¾çš„é—®é¢˜ï¼Œä¾‹å¦‚ç›¸äº²ã€‚å·¦è¾¹è¡¨ç¤ºç”·ç”Ÿç¾¤ä½“ï¼Œå³è¾¹è¡¨ç¤ºå¥³ç”Ÿç¾¤ä½“ï¼Œå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼Œè¯´æ˜è¿™ä¸€å¯¹ç”·å¥³å¯ä»¥åŒ¹é…ä¸ºä¸€å¯¹ï¼›å¦å¤–åˆæ¯”å¦‚æ±‚èŒï¼Œå·¦è¾¹çš„èŠ‚ç‚¹è¡¨ç¤ºæ±‚èŒè€…ï¼Œå³è¾¹çš„èŠ‚ç‚¹è¡¨ç¤ºå…¬å¸ï¼Œå¦‚æœèŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼Œè¡¨æ˜æ±‚èŒè€…ä¸å…¬å¸äº’ç›¸éƒ½æ¯”è¾ƒæ»¡æ„ï¼Œå¯ä»¥åŒ¹é…ã€‚ ç°åœ¨æˆ‘ä»¬å…³å¿ƒçš„é—®é¢˜æ˜¯ï¼Œå‘è¿™æ ·çš„äºŒåˆ†å›¾æœ€å¤šæœ‰å¤šå°‘ä¸ªåŒ¹é…ï¼Œè¿™æ ·çš„é—®é¢˜ç§°ä¸ºæœ€å¤§åŒ¹é…é—®é¢˜ï¼Œå¦‚æœæœ€å¤§åŒ¹é…çš„ä¸ªæ•°ä¸å·¦å³ä¸¤è¾¹çš„èŠ‚ç‚¹æ•°ç›®éƒ½ç›¸åŒï¼Œé‚£ä¹ˆå°±ç§°ä¸ºæ˜¯å®Œå…¨åŒ¹é…ï¼Œå¯¹äºç›¸äº²æ¥è¯´ï¼Œæ„å‘³ç€æ¯ä¸€ä¸ªäººéƒ½å¯ä»¥æ‰¾åˆ°å¦ä¸€åŠï¼Œå¯¹äºæ±‚èŒæ¥è¯´ï¼Œæ¯ä¸ªæ±‚èŒè€…éƒ½å¯ä»¥æ‰¾åˆ°ä¸€å®¶å…¬å¸ã€‚ æœ€å¤§æµè§£å†³åŒ¹é…é—®é¢˜è§£å†³æœ€å¤§åŒ¹é…é—®é¢˜çš„ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯å°†ä¸Šé¢çš„å›¾å»ºæ¨¡ä¸ºä¸€ä¸ªç½‘ç»œæµ å›¾ä¸­çš„æ¯ä¸€æ¡è¾¹çš„æƒå€¼éƒ½ä¸º 1ï¼Œå³æ¯æ¡è¾¹çš„å…è®¸é€šè¿‡çš„æœ€å¤§æµé‡ä¸º 1ï¼Œè¡¨ç¤ºæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½åªèƒ½è¢«åŒ¹é…ä¸€æ¬¡ï¼Œæ­¤æ—¶è¿™ä¸ªç½‘ç»œæµçš„æœ€å¤§æµå°±ç­‰äºæœ€å¤§åŒ¹é…æ•°ï¼Œæˆ‘ä»¬å°†æ±‚äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…é—®é¢˜è½¬åŒ–ä¸ºäº†æ±‚ç½‘ç»œæµçš„æœ€å¤§æµé—®é¢˜ï¼Œè€Œæ±‚æœ€å¤§æµçš„é—®é¢˜æˆ‘ä»¬åœ¨ä»¥å‰å·²ç»æ¥è§¦è¿‡ã€‚ æˆ‘ä»¬å”¯ä¸€éœ€è¦çš„å·¥ä½œé‡å°±æ˜¯æ ¹æ®ä¸Šé¢çš„äºŒåˆ†å›¾å¾—åˆ°ä¸€ä¸ªç½‘ç»œæµçš„æ¨¡å‹ï¼Œå…·ä½“è§ä»£ç  public class BipartiteMatching &#123; private Graph graph; private int maxMatching; public BipartiteMatching(Graph graph) &#123; this.graph = graph; // é¦–å…ˆå¯¹æ˜¯å¦æ˜¯äºŒåˆ†å›¾è¿›è¡Œæ£€æµ‹ BinaryPartitionDetection bpd = new BinaryPartitionDetection(graph); if (!bpd.isBipartite()) &#123; throw new IllegalArgumentException(\"è¯¥å›¾ä¸ä¸ºä¸€ä¸ªäºŒåˆ†å›¾\"); &#125; int[] colors = bpd.colors(); // æ ¹æ®äºŒåˆ†å›¾å»ºæ¨¡ä¸ºç½‘ç»œæµï¼Œå¤šæ·»åŠ çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸ºæºç‚¹å’Œæ±‡ç‚¹ï¼Œæºç‚¹ç¼–å·ä¸º Vï¼Œæ±‡ç‚¹ä¸º V + 1 DirectedWeightedGraph directedWeightedGraph = new DirectedWeightedGraph(graph.V() + 2); for (int v = 0; v &lt; graph.V(); v++) &#123; // colors[v] == 0 è¡¨æ˜æ˜¯å·¦è¾¹çš„èŠ‚ç‚¹ï¼Œè¢«æºç‚¹æŒ‡å‘ if (colors[v] == 0) &#123; directedWeightedGraph.addEdge(graph.V(), v, 1); &#125; else &#123; // colors[v] == 1 è¡¨ç¤ºæ˜¯å³è¾¹çš„èŠ‚ç‚¹ï¼Œæ‰§è¡Œæ±‡ç‚¹ directedWeightedGraph.addEdge(v, graph.V() + 1, 1); &#125; for (int w: graph.adj(v)) &#123; if (v &lt; w) &#123; // å·¦è¾¹çš„èŠ‚ç‚¹æŒ‡å‘å³è¾¹çš„èŠ‚ç‚¹ if (colors[v] == 0) &#123; directedWeightedGraph.addEdge(v, w, 1); &#125; else &#123; directedWeightedGraph.addEdge(w, v, 1); &#125; &#125; &#125; &#125; // å»ºç«‹ç½‘ç»œæµï¼Œè·å¾—æœ€å¤§æµ MaxFlow maxFlow = new MaxFlow(directedWeightedGraph, graph.V(), graph.V() +1); maxMatching = maxFlow.result(); &#125; public int result() &#123; return maxMatching; &#125; // å¦‚æœæœ€å¤§åŒ¹é…çš„ä¸¤å€ç­‰äºå›¾ä¸­çš„èŠ‚ç‚¹æ•°ï¼Œè¯´æ˜æ˜¯å®Œå…¨åŒ¹é… public boolean isPerfectMatching() &#123; return maxMatching * 2 == graph.V(); &#125;&#125; ä¸Šé¢å¯¹äºŒåˆ†å›¾æ£€æµ‹ä»¥åŠæœ€å¤§æµçš„ç±»åœ¨ä¹‹å‰æ–‡ç« è®²è§£è¿‡ï¼Œä¸å¤šåŠ ä»‹ç»ã€‚ LCP04 è¦†ç›–LCP04 è¦†ç›–æ˜¯ä¸€é“ LeetCode ä¸Šçš„é¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™é“é¢˜å»ºæ¨¡ä¸ºäºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…é—®é¢˜ã€‚ é¢˜ç›®ä»‹ç»ä½ æœ‰ä¸€å—æ£‹ç›˜ï¼Œæ£‹ç›˜ä¸Šæœ‰ä¸€äº›æ ¼å­å·²ç»åæ‰äº†ã€‚ä½ è¿˜æœ‰æ— ç©·å—å¤§å°ä¸º $1 * 2$ çš„å¤šç±³è¯ºéª¨ç‰Œï¼Œä½ æƒ³æŠŠè¿™äº›éª¨ç‰Œä¸é‡å åœ°è¦†ç›–åœ¨å®Œå¥½çš„æ ¼å­ä¸Šï¼Œè¯·æ‰¾å‡ºä½ æœ€å¤šèƒ½åœ¨æ£‹ç›˜ä¸Šæ”¾å¤šå°‘å—éª¨ç‰Œ? è¿™äº›éª¨ç‰Œå¯ä»¥æ¨ªç€æˆ–è€…ç«–ç€æ”¾ã€‚ è¾“å…¥ï¼šn, mä»£è¡¨æ£‹ç›˜çš„å¤§å°ï¼›brokenæ˜¯ä¸€ä¸ª $b * 2$ çš„äºŒç»´æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ ä»£è¡¨æ£‹ç›˜ä¸Šæ¯ä¸€ä¸ªåæ‰çš„æ ¼å­çš„ä½ç½®ã€‚ è¾“å‡ºï¼šä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æœ€å¤šèƒ½åœ¨æ£‹ç›˜ä¸Šæ”¾çš„éª¨ç‰Œæ•°ã€‚ è§£é¢˜æ€è·¯å¯¹äºæ£‹ç›˜é—®é¢˜ï¼Œå¦‚æœç©è¿‡å›½é™…è±¡æ£‹çš„è¯ï¼Œå°±çŸ¥é“æ£‹ç›˜æ˜¯è¢«æŸ“ä¸ºé»‘ç™½ä¸¤è‰²çš„ï¼Œå¦‚ åŒç†æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸Šé¢çš„æ£‹ç›˜æ ¹æ®ä¸Šé¢çš„æŸ“è‰²åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œå¦‚æœå°†ç½‘æ ¼ä¸Šçš„ä¸€ä¸ªä¸ªç½‘æ ¼çœ‹åšæ˜¯å›¾ä¸­çš„èŠ‚ç‚¹çš„è¯ï¼Œè¿™ä¸å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾å—? è€Œå¯¹ä¸€ä¸ª $1 * 2$ çš„å¤šç±³è¯ºéª¨ç‰Œï¼Œå®ƒæ€»æ˜¯ä¸€è¾¹åœ¨é»‘è‰²åŒºåŸŸï¼Œä¸€è¾¹åœ¨ç™½è‰²åŒºåŸŸï¼Œé¢˜ç›®é—®èƒ½å¤Ÿæ”¾ç½®å¤šå°‘å—å¤šç±³è¯ºéª¨ç‰Œä¸å°±æ˜¯åœ¨é—®è¯¥äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…å›¾å—? å› ä¸ºæˆ‘ä»¬æˆåŠŸçš„å°†ä¸Šé¢çš„é—®é¢˜å»ºæ¨¡ä¸ºäº†äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…ï¼Œå¯ä»¥åˆ©ç”¨æˆ‘ä»¬ä¸Šé¢çš„ç®—æ³•è¿›è¡Œè§£å†³ï¼Œç°åœ¨å”¯ä¸€çš„éš¾ç‚¹å¯èƒ½å°±æ˜¯å°†ä¸Šé¢çš„ç½‘æ ¼å»ºæ¨¡ä¸ºä¸€ä¸ªå›¾äº†ï¼Œä»£ç å¦‚ä¸‹ import java.util.*;public class Solution &#123; public int domino(int n, int m, int[][] broken) &#123; int[][] board = new int[n][m]; // 1 è¡¨ç¤ºæ ¼å­åæ‰äº†ï¼Œ0 è¡¨ç¤ºæ ¼å­æ˜¯å¥½çš„ for (int[] p: broken) &#123; board[p[0]][p[1]] = 1; &#125; // å°†ç½‘æ ¼å»ºæ¨¡ä¸ºä¸€ä¸ªå›¾ AdjSet graph = new AdjSet(n * m); for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; m; j++) &#123; // æˆ‘ä»¬åªæ·»åŠ å³è¾¹å’Œä¸‹é¢çš„èŠ‚ç‚¹ï¼Œå› ä¸ºå·¦è¾¹çš„èŠ‚ç‚¹çš„å³è¾¹å°±æ˜¯è‡ªå·±ï¼Œä¸ç”¨é‡å¤æ·»åŠ ï¼ŒåŒç†å¯¹äºä¸Šé¢ä¹Ÿæ˜¯ if (j + 1 &lt; m &amp;&amp; board[i][j] == 0 &amp;&amp; board[i][j + 1] == 0) &#123; graph.addEdge(i * m + j, i * m + j + 1); &#125; if (i + 1 &lt; n &amp;&amp; board[i][j] == 0 &amp;&amp; board[i + 1][j] == 0) &#123; graph.addEdge(i * m + j, (i + 1) * m + j); &#125; &#125; &#125; BipartiteMatching bm = new BipartiteMatching(graph); return bm.result(); &#125;&#125; åŒˆç‰™åˆ©ç®—æ³•è§£å†³åŒ¹é…é—®é¢˜çš„å¦ä¸€ä¸ªç®—æ³•å°±æ˜¯åŒˆç‰™åˆ©ç®—æ³•ï¼Œè¿˜æ˜¯ä»¥ä¸‹å›¾ä¸ºä¾‹ åŒˆç‰™åˆ©ç®—æ³•çš„æ€æƒ³å°±æ˜¯æ¯æ¬¡ä»å·¦è¾¹æœªåŒ¹é…çš„ç‚¹å‡ºå‘è¿›è¡Œéå†ï¼Œå¦‚æœå³è¾¹çš„ç‚¹æ²¡æœ‰åŒ¹é…ï¼Œåˆ™å°†å®ƒä»¬åŒ¹é…ä¸ºä¸€å¯¹ ä¸Šé¢æˆ‘ä»¬ä»èŠ‚ç‚¹ 0 å‡ºå‘ï¼Œæ¥åˆ°èŠ‚ç‚¹ 4ï¼Œå‘ç°èŠ‚ç‚¹ 4 æ²¡æœ‰è¢«åŒ¹é…ï¼Œå› æ­¤å°†å®ƒä»¬è®¾ç½®ä¸ºåŒ¹é…ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥è¿›è¡Œè®°å½• matching[0] = 4;matching[4] = 0; å¦‚æœå³è¾¹çš„èŠ‚ç‚¹å·²ç»è¢«éå†äº†ï¼Œåˆ™ä»å³è¾¹èŠ‚ç‚¹åŒ¹é…çš„èŠ‚ç‚¹ç»§ç»­éå†ï¼Œä¾‹å¦‚å¯¹äºä¸‹å›¾ï¼Œæˆ‘ä»¬ä» 1 å‡ºå‘ï¼Œæ¥åˆ°èŠ‚ç‚¹ 4ï¼Œå‘ç°èŠ‚ç‚¹ 4 å·²ç»è¢«éå†äº†ï¼Œäºæ˜¯æ¥ä¸èŠ‚ç‚¹ 4 åŒ¹é…çš„èŠ‚ç‚¹ 0ï¼Œç„¶åä» 0 å¼€å§‹å‘å³éå†ï¼Œç›´åˆ°å‘å³æ‰¾åˆ°ä¸€ä¸ªæœªåŒ¹é…çš„èŠ‚ç‚¹ ä¸Šé¢æˆ‘ä»¬éå†çš„è·¯å¾„æ˜¯ $1 â†’ 4 â†’ 0 â†’ 6$ï¼Œæœ¬æ¥ 0-4 æ˜¯åŒ¹é…çš„ï¼Œç°åœ¨æˆ‘ä»¬è®©å®ƒæ–­å¼€ï¼Œè®© 1-4ã€0-6 åŒ¹é…ã€‚ é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæ¯æ¬¡å¦‚æœåœ¨å³è¾¹æ‰¾åˆ°ä¸€ä¸ªæœªåŒ¹é…çš„èŠ‚ç‚¹ï¼ŒåŒ¹é…æ•°åŠ ä¸€ï¼Œå½“æˆ‘ä»¬éå†å®Œå·¦è¾¹æ‰€æœ‰çš„æœªåŒ¹é…çš„èŠ‚ç‚¹æ—¶ï¼Œæœ€ç»ˆçš„åŒ¹é…æ•°å°±æ˜¯æœ€å¤§åŒ¹é…æ•°ï¼Œè¿™å°±æ˜¯åŒˆç‰™åˆ©ç®—æ³•ã€‚ è¿™é‡Œæ€»ç»“ä¸€ä¸‹åŒˆç‰™åˆ©ç®—æ³•çš„æµç¨‹ï¼š ä»å·¦è¾¹æœªåŒ¹é…çš„èŠ‚ç‚¹éå†ï¼Œå¦‚æœå³è¾¹çš„èŠ‚ç‚¹æœªåŒ¹é…ï¼Œé‚£ä¹ˆè®©äºŒè€…åŒ¹é…ï¼ŒåŒ¹é…æ•°åŠ ä¸€ å¦åˆ™å³è¾¹çš„èŠ‚ç‚¹å·²åŒ¹é…ï¼Œé‚£ä¹ˆä»å³è¾¹èŠ‚ç‚¹åŒ¹é…çš„èŠ‚ç‚¹ç»§ç»­éå† é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå³è¾¹æœªåŒ¹é…çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåŒ¹é…æ•°åŠ ä¸€ï¼Œå¹¶ä¸”æ›´æ–°åŒ¹é…å…³ç³» æ ¹æ®éå†çš„é¡ºåºä¸åŒï¼ŒåŒˆç‰™åˆ©ç®—æ³•æœ‰ä¸¤ç§å®ç°ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ BFS è¿›è¡Œéå†ï¼Œè¯¥ç§æ–¹æ³•é€Ÿåº¦è¾ƒå¿«ï¼Œä½†æ˜¯ä»£ç å¤æ‚ import java.util.*;public class HungarianBFS &#123; private Graph graph; private int[] matching; private int maxMatching; public HungarianBFS(Graph graph) &#123; this.graph = graph; // å…ˆæ£€æµ‹æ˜¯å¦æ˜¯äºŒåˆ†å›¾ BinaryPartitionDetection bpm = new BinaryPartitionDetection(graph); if (!bpm.isBipartite()) &#123; throw new IllegalArgumentException(\"è¯¥å›¾ä¸æ˜¯äºŒåˆ†å›¾\"); &#125; this.matching = new int[graph.V()]; Arrays.fill(matching, -1); int[] colors = bpm.colors(); for (int v = 0; v &lt; graph.V(); v++) &#123; // colors[v] == 0 è¯´æ˜æ˜¯å·¦è¾¹èŠ‚ç‚¹ // matching[v] == -1 è¯´æ˜æœªåŒ¹é…ï¼Œä»è¿™ç§èŠ‚ç‚¹å¼€å§‹éå† if (colors[v] == 0 &amp;&amp; matching[v] == -1) &#123; // bfs çš„è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°ä¸€ä¸ªå³è¾¹æœªåŒ¹é…çš„èŠ‚ç‚¹ if (bfs(v)) &#123; // æ‰¾åˆ°åŒ¹é…æ•°å°±åŠ ä¸€ maxMatching++; &#125; &#125; &#125; &#125; // è¿›è¡Œ bfs éå† private boolean bfs(int v) &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(v); int[] pre = new int[graph.V()]; Arrays.fill(pre, -1); pre[v] = v; while (!queue.isEmpty()) &#123; int cur = queue.remove(); for (int next: graph.adj(cur)) &#123; if (pre[next] == -1) &#123; // å¦‚æœå³è¾¹çš„èŠ‚ç‚¹å·²ç»åŒ¹é…äº† if (matching[next] != -1) &#123; // ä»å³è¾¹èŠ‚ç‚¹çš„åŒ¹é…èŠ‚ç‚¹å¼€å§‹ç»§ç»­éå† queue.add(matching[next]); pre[next] = cur; pre[matching[next]] = next; &#125; else &#123; // å³è¾¹çš„èŠ‚ç‚¹æœªåŒ¹é…ï¼Œæ‰¾åˆ°äº†ï¼Œæ›´æ–°åŒ¹é…å…³ç³» pre[next] = cur; ArrayList&lt;Integer&gt; path = getPath(pre, v, next); for (int i = 0; i &lt; path.size(); i += 2) &#123; matching[path.get(i)] = path.get(i + 1); matching[path.get(i + 1)] = path.get(i); &#125; return true; &#125; &#125; &#125; &#125; return false; &#125; private ArrayList&lt;Integer&gt; getPath(int[] pre, int start, int end) &#123; int cur = end; ArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;(); while (cur != start) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(start); Collections.reverse(result); return result; &#125; public int result() &#123; return maxMatching; &#125;&#125; è¿˜æœ‰ä¸€ç§å®ç°æ˜¯ä½¿ç”¨ DFS è¿›è¡Œéå†ï¼Œè™½ç„¶æ¯” BFS æ…¢ä¸€ä¸¢ä¸¢ï¼Œä½†è¿˜æ˜¯å®ç°ç®€å• import java.util.Arrays;public class HungarianDFS &#123; private Graph graph; private int maxMatching; private boolean[] visited; private int[] matching; public HungarianDFS(Graph graph) &#123; // ä¸‹é¢çš„åˆå§‹åŒ–é€»è¾‘åŒ BFS this.graph = graph; BinaryPartitionDetection bmp = new BinaryPartitionDetection(graph); if (!bmp.isBipartite()) &#123; throw new IllegalArgumentException(\"è¯¥å›¾ä¸æ˜¯äºŒåˆ†å›¾\"); &#125; int[] colors = bmp.colors(); this.maxMatching = 0; this.visited = new boolean[graph.V()]; this.matching = new int[graph.V()]; Arrays.fill(matching, -1); for (int v = 0; v &lt; graph.V(); v++) &#123; // å·¦è¾¹æœªåŒ¹é…èŠ‚ç‚¹å¼€å§‹éå† if (colors[v] == 0 &amp;&amp; matching[v] == -1) &#123; Arrays.fill(visited, false); // dfs è¿”å›å€¼çš„å«ä¹‰åŒ bfs if (dfs(v)) &#123; maxMatching++; &#125; &#125; &#125; &#125; private boolean dfs(int v) &#123; visited[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; visited[w] = true; // å¦‚æœå³è¾¹æœªåŒ¹é…ï¼Œæ›´æ–°åŒ¹é…å…³ç³» // æˆ–è€…å³è¾¹å·²åŒ¹é…ï¼Œå¹¶ä¸”ä»å³è¾¹å·²åŒ¹é…çš„èŠ‚ç‚¹éå†èƒ½æ‰¾åˆ°ä¸€ä¸ªå³è¾¹æœªåŒ¹é…çš„èŠ‚ç‚¹ï¼Œä¹Ÿæ›´æ–°åŒ¹é…å…³ç³» if (matching[w] == -1 || dfs(matching[w])) &#123; matching[v] = w; matching[w] = v; return true; &#125; &#125; &#125; return false; &#125; public int result() &#123; return maxMatching; &#125;&#125; åŒç†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒˆç‰™åˆ©ç®—æ³•æ¥å®Œæˆä¸Šé¢çš„ LeetCode é—®é¢˜ import java.util.*;public class Solution &#123; public int domino(int n, int m, int[][] broken) &#123; int[][] board = new int[n][m]; for (int[] p: broken) &#123; board[p[0]][p[1]] = 1; &#125; AdjSet graph = new AdjSet(n * m); for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; m; j++) &#123; if (j + 1 &lt; m &amp;&amp; board[i][j] == 0 &amp;&amp; board[i][j + 1] == 0) &#123; graph.addEdge(i * m + j, i * m + j + 1); &#125; if (i + 1 &lt; n &amp;&amp; board[i][j] == 0 &amp;&amp; board[i + 1][j] == 0) &#123; graph.addEdge(i * m + j, (i + 1) * m + j); &#125; &#125; &#125; HungarianBFS hungarianBFS = new HungarianBFS(graph); return hungarianBFS.result(); &#125;&#125; é€Ÿåº¦æ¯”ä½¿ç”¨ç½‘ç»œæµè¦å¿«","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"åŒ¹é…é—®é¢˜","date":"2021-01-29T18:33:00.000Z","path":"/åŒ¹é…é—®é¢˜/","text":"æœ€å¤§åŒ¹é…ä¸å®Œå…¨åŒ¹é…ä¸‹é¢æˆ‘ä»¬è®²è§£çš„ç®—æ³•éƒ½æ˜¯æœ‰å…³äºäºŒåˆ†å›¾çš„ç®—æ³• ä¾‹å¦‚å¯¹äºä¸Šå›¾å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ï¼Œæ¯æ¡è¾¹éƒ½è¿æ¥äº†ä¸¤ä¸ªä¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹ï¼Œç”Ÿæ´»ä¸­å¾ˆå¤šé—®é¢˜éƒ½å¯ä»¥å»ºæ¨¡ä¸ºäºŒåˆ†å›¾çš„é—®é¢˜ï¼Œä¾‹å¦‚ç›¸äº²ã€‚å·¦è¾¹è¡¨ç¤ºç”·ç”Ÿç¾¤ä½“ï¼Œå³è¾¹è¡¨ç¤ºå¥³ç”Ÿç¾¤ä½“ï¼Œå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼Œè¯´æ˜è¿™ä¸€å¯¹ç”·å¥³å¯ä»¥åŒ¹é…ä¸ºä¸€å¯¹ï¼›å¦å¤–åˆæ¯”å¦‚æ±‚èŒï¼Œå·¦è¾¹çš„èŠ‚ç‚¹è¡¨ç¤ºæ±‚èŒè€…ï¼Œå³è¾¹çš„èŠ‚ç‚¹è¡¨ç¤ºå…¬å¸ï¼Œå¦‚æœèŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼Œè¡¨æ˜æ±‚èŒè€…ä¸å…¬å¸äº’ç›¸éƒ½æ¯”è¾ƒæ»¡æ„ï¼Œå¯ä»¥åŒ¹é…ã€‚ ç°åœ¨æˆ‘ä»¬å…³å¿ƒçš„é—®é¢˜æ˜¯ï¼Œå‘è¿™æ ·çš„äºŒåˆ†å›¾æœ€å¤šæœ‰å¤šå°‘ä¸ªåŒ¹é…ï¼Œè¿™æ ·çš„é—®é¢˜ç§°ä¸ºæœ€å¤§åŒ¹é…é—®é¢˜ï¼Œå¦‚æœæœ€å¤§åŒ¹é…çš„ä¸ªæ•°ä¸å·¦å³ä¸¤è¾¹çš„èŠ‚ç‚¹æ•°ç›®éƒ½ç›¸åŒï¼Œé‚£ä¹ˆå°±ç§°ä¸ºæ˜¯å®Œå…¨åŒ¹é…ï¼Œå¯¹äºç›¸äº²æ¥è¯´ï¼Œæ„å‘³ç€æ¯ä¸€ä¸ªäººéƒ½å¯ä»¥æ‰¾åˆ°å¦ä¸€åŠï¼Œå¯¹äºæ±‚èŒæ¥è¯´ï¼Œæ¯ä¸ªæ±‚èŒè€…éƒ½å¯ä»¥æ‰¾åˆ°ä¸€å®¶å…¬å¸ã€‚ æœ€å¤§æµè§£å†³åŒ¹é…é—®é¢˜è§£å†³æœ€å¤§åŒ¹é…é—®é¢˜çš„ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯å°†ä¸Šé¢çš„å›¾å»ºæ¨¡ä¸ºä¸€ä¸ªç½‘ç»œæµ å›¾ä¸­çš„æ¯ä¸€æ¡è¾¹çš„æƒå€¼éƒ½ä¸º 1ï¼Œå³æ¯æ¡è¾¹çš„å…è®¸é€šè¿‡çš„æœ€å¤§æµé‡ä¸º 1ï¼Œè¡¨ç¤ºæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½åªèƒ½è¢«åŒ¹é…ä¸€æ¬¡ï¼Œæ­¤æ—¶è¿™ä¸ªç½‘ç»œæµçš„æœ€å¤§æµå°±ç­‰äºæœ€å¤§åŒ¹é…æ•°ï¼Œæˆ‘ä»¬å°†æ±‚äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…é—®é¢˜è½¬åŒ–ä¸ºäº†æ±‚ç½‘ç»œæµçš„æœ€å¤§æµé—®é¢˜ï¼Œè€Œæ±‚æœ€å¤§æµçš„é—®é¢˜æˆ‘ä»¬åœ¨ä»¥å‰å·²ç»æ¥è§¦è¿‡ã€‚ æˆ‘ä»¬å”¯ä¸€éœ€è¦çš„å·¥ä½œé‡å°±æ˜¯æ ¹æ®ä¸Šé¢çš„äºŒåˆ†å›¾å¾—åˆ°ä¸€ä¸ªç½‘ç»œæµçš„æ¨¡å‹ï¼Œå…·ä½“è§ä»£ç  public class BipartiteMatching &#123; private Graph graph; private int maxMatching; public BipartiteMatching(Graph graph) &#123; this.graph = graph; // é¦–å…ˆå¯¹æ˜¯å¦æ˜¯äºŒåˆ†å›¾è¿›è¡Œæ£€æµ‹ BinaryPartitionDetection bpd = new BinaryPartitionDetection(graph); if (!bpd.isBipartite()) &#123; throw new IllegalArgumentException(\"è¯¥å›¾ä¸ä¸ºä¸€ä¸ªäºŒåˆ†å›¾\"); &#125; int[] colors = bpd.colors(); // æ ¹æ®äºŒåˆ†å›¾å»ºæ¨¡ä¸ºç½‘ç»œæµï¼Œå¤šæ·»åŠ çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸ºæºç‚¹å’Œæ±‡ç‚¹ï¼Œæºç‚¹ç¼–å·ä¸º Vï¼Œæ±‡ç‚¹ä¸º V + 1 DirectedWeightedGraph directedWeightedGraph = new DirectedWeightedGraph(graph.V() + 2); for (int v = 0; v &lt; graph.V(); v++) &#123; // colors[v] == 0 è¡¨æ˜æ˜¯å·¦è¾¹çš„èŠ‚ç‚¹ï¼Œè¢«æºç‚¹æŒ‡å‘ if (colors[v] == 0) &#123; directedWeightedGraph.addEdge(graph.V(), v, 1); &#125; else &#123; // colors[v] == 1 è¡¨ç¤ºæ˜¯å³è¾¹çš„èŠ‚ç‚¹ï¼Œæ‰§è¡Œæ±‡ç‚¹ directedWeightedGraph.addEdge(v, graph.V() + 1, 1); &#125; for (int w: graph.adj(v)) &#123; if (v &lt; w) &#123; // å·¦è¾¹çš„èŠ‚ç‚¹æŒ‡å‘å³è¾¹çš„èŠ‚ç‚¹ if (colors[v] == 0) &#123; directedWeightedGraph.addEdge(v, w, 1); &#125; else &#123; directedWeightedGraph.addEdge(w, v, 1); &#125; &#125; &#125; &#125; // å»ºç«‹ç½‘ç»œæµï¼Œè·å¾—æœ€å¤§æµ MaxFlow maxFlow = new MaxFlow(directedWeightedGraph, graph.V(), graph.V() +1); maxMatching = maxFlow.result(); &#125; public int result() &#123; return maxMatching; &#125; // å¦‚æœæœ€å¤§åŒ¹é…çš„ä¸¤å€ç­‰äºå›¾ä¸­çš„èŠ‚ç‚¹æ•°ï¼Œè¯´æ˜æ˜¯å®Œå…¨åŒ¹é… public boolean isPerfectMatching() &#123; return maxMatching * 2 == graph.V(); &#125;&#125; ä¸Šé¢å¯¹äºŒåˆ†å›¾æ£€æµ‹ä»¥åŠæœ€å¤§æµçš„ç±»åœ¨ä¹‹å‰æ–‡ç« è®²è§£è¿‡ï¼Œä¸å¤šåŠ ä»‹ç»ã€‚ LCP04 è¦†ç›–LCP04 è¦†ç›–æ˜¯ä¸€é“ LeetCode ä¸Šçš„é¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™é“é¢˜å»ºæ¨¡ä¸ºäºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…é—®é¢˜ã€‚ é¢˜ç›®ä»‹ç»ä½ æœ‰ä¸€å—æ£‹ç›˜ï¼Œæ£‹ç›˜ä¸Šæœ‰ä¸€äº›æ ¼å­å·²ç»åæ‰äº†ã€‚ä½ è¿˜æœ‰æ— ç©·å—å¤§å°ä¸º $1 * 2$ çš„å¤šç±³è¯ºéª¨ç‰Œï¼Œä½ æƒ³æŠŠè¿™äº›éª¨ç‰Œä¸é‡å åœ°è¦†ç›–åœ¨å®Œå¥½çš„æ ¼å­ä¸Šï¼Œè¯·æ‰¾å‡ºä½ æœ€å¤šèƒ½åœ¨æ£‹ç›˜ä¸Šæ”¾å¤šå°‘å—éª¨ç‰Œ? è¿™äº›éª¨ç‰Œå¯ä»¥æ¨ªç€æˆ–è€…ç«–ç€æ”¾ã€‚ è¾“å…¥ï¼šn, mä»£è¡¨æ£‹ç›˜çš„å¤§å°ï¼›brokenæ˜¯ä¸€ä¸ª $b * 2$ çš„äºŒç»´æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ ä»£è¡¨æ£‹ç›˜ä¸Šæ¯ä¸€ä¸ªåæ‰çš„æ ¼å­çš„ä½ç½®ã€‚ è¾“å‡ºï¼šä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æœ€å¤šèƒ½åœ¨æ£‹ç›˜ä¸Šæ”¾çš„éª¨ç‰Œæ•°ã€‚ è§£é¢˜æ€è·¯å¯¹äºæ£‹ç›˜é—®é¢˜ï¼Œå¦‚æœç©è¿‡å›½é™…è±¡æ£‹çš„è¯ï¼Œå°±çŸ¥é“æ£‹ç›˜æ˜¯è¢«æŸ“ä¸ºé»‘ç™½ä¸¤è‰²çš„ï¼Œå¦‚ åŒç†æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸Šé¢çš„æ£‹ç›˜æ ¹æ®ä¸Šé¢çš„æŸ“è‰²åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œå¦‚æœå°†ç½‘æ ¼ä¸Šçš„ä¸€ä¸ªä¸ªç½‘æ ¼çœ‹åšæ˜¯å›¾ä¸­çš„èŠ‚ç‚¹çš„è¯ï¼Œè¿™ä¸å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾å—? è€Œå¯¹ä¸€ä¸ª $1 * 2$ çš„å¤šç±³è¯ºéª¨ç‰Œï¼Œå®ƒæ€»æ˜¯ä¸€è¾¹åœ¨é»‘è‰²åŒºåŸŸï¼Œä¸€è¾¹åœ¨ç™½è‰²åŒºåŸŸï¼Œé¢˜ç›®é—®èƒ½å¤Ÿæ”¾ç½®å¤šå°‘å—å¤šç±³è¯ºéª¨ç‰Œä¸å°±æ˜¯åœ¨é—®è¯¥äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…å›¾å—? å› ä¸ºæˆ‘ä»¬æˆåŠŸçš„å°†ä¸Šé¢çš„é—®é¢˜å»ºæ¨¡ä¸ºäº†äºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…ï¼Œå¯ä»¥åˆ©ç”¨æˆ‘ä»¬ä¸Šé¢çš„ç®—æ³•è¿›è¡Œè§£å†³ï¼Œç°åœ¨å”¯ä¸€çš„éš¾ç‚¹å¯èƒ½å°±æ˜¯å°†ä¸Šé¢çš„ç½‘æ ¼å»ºæ¨¡ä¸ºä¸€ä¸ªå›¾äº†ï¼Œä»£ç å¦‚ä¸‹ import java.util.*;public class Solution &#123; public int domino(int n, int m, int[][] broken) &#123; int[][] board = new int[n][m]; // 1 è¡¨ç¤ºæ ¼å­åæ‰äº†ï¼Œ0 è¡¨ç¤ºæ ¼å­æ˜¯å¥½çš„ for (int[] p: broken) &#123; board[p[0]][p[1]] = 1; &#125; // å°†ç½‘æ ¼å»ºæ¨¡ä¸ºä¸€ä¸ªå›¾ AdjSet graph = new AdjSet(n * m); for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; m; j++) &#123; // æˆ‘ä»¬åªæ·»åŠ å³è¾¹å’Œä¸‹é¢çš„èŠ‚ç‚¹ï¼Œå› ä¸ºå·¦è¾¹çš„èŠ‚ç‚¹çš„å³è¾¹å°±æ˜¯è‡ªå·±ï¼Œä¸ç”¨é‡å¤æ·»åŠ ï¼ŒåŒç†å¯¹äºä¸Šé¢ä¹Ÿæ˜¯ if (j + 1 &lt; m &amp;&amp; board[i][j] == 0 &amp;&amp; board[i][j + 1] == 0) &#123; graph.addEdge(i * m + j, i * m + j + 1); &#125; if (i + 1 &lt; n &amp;&amp; board[i][j] == 0 &amp;&amp; board[i + 1][j] == 0) &#123; graph.addEdge(i * m + j, (i + 1) * m + j); &#125; &#125; &#125; BipartiteMatching bm = new BipartiteMatching(graph); return bm.result(); &#125;&#125; åŒˆç‰™åˆ©ç®—æ³•è§£å†³åŒ¹é…é—®é¢˜çš„å¦ä¸€ä¸ªç®—æ³•å°±æ˜¯åŒˆç‰™åˆ©ç®—æ³•ï¼Œè¿˜æ˜¯ä»¥ä¸‹å›¾ä¸ºä¾‹ åŒˆç‰™åˆ©ç®—æ³•çš„æ€æƒ³å°±æ˜¯æ¯æ¬¡ä»å·¦è¾¹æœªåŒ¹é…çš„ç‚¹å‡ºå‘è¿›è¡Œéå†ï¼Œå¦‚æœå³è¾¹çš„ç‚¹æ²¡æœ‰åŒ¹é…ï¼Œåˆ™å°†å®ƒä»¬åŒ¹é…ä¸ºä¸€å¯¹ ä¸Šé¢æˆ‘ä»¬ä»èŠ‚ç‚¹ 0 å‡ºå‘ï¼Œæ¥åˆ°èŠ‚ç‚¹ 4ï¼Œå‘ç°èŠ‚ç‚¹ 4 æ²¡æœ‰è¢«åŒ¹é…ï¼Œå› æ­¤å°†å®ƒä»¬è®¾ç½®ä¸ºåŒ¹é…ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥è¿›è¡Œè®°å½• matching[0] = 4;matching[4] = 0; å¦‚æœå³è¾¹çš„èŠ‚ç‚¹å·²ç»è¢«éå†äº†ï¼Œåˆ™ä»å³è¾¹èŠ‚ç‚¹åŒ¹é…çš„èŠ‚ç‚¹ç»§ç»­éå†ï¼Œä¾‹å¦‚å¯¹äºä¸‹å›¾ï¼Œæˆ‘ä»¬ä» 1 å‡ºå‘ï¼Œæ¥åˆ°èŠ‚ç‚¹ 4ï¼Œå‘ç°èŠ‚ç‚¹ 4 å·²ç»è¢«éå†äº†ï¼Œäºæ˜¯æ¥ä¸èŠ‚ç‚¹ 4 åŒ¹é…çš„èŠ‚ç‚¹ 0ï¼Œç„¶åä» 0 å¼€å§‹å‘å³éå†ï¼Œç›´åˆ°å‘å³æ‰¾åˆ°ä¸€ä¸ªæœªåŒ¹é…çš„èŠ‚ç‚¹ ä¸Šé¢æˆ‘ä»¬éå†çš„è·¯å¾„æ˜¯ $1 â†’ 4 â†’ 0 â†’ 6$ï¼Œæœ¬æ¥ 0-4 æ˜¯åŒ¹é…çš„ï¼Œç°åœ¨æˆ‘ä»¬è®©å®ƒæ–­å¼€ï¼Œè®© 1-4ã€0-6 åŒ¹é…ã€‚ é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæ¯æ¬¡å¦‚æœåœ¨å³è¾¹æ‰¾åˆ°ä¸€ä¸ªæœªåŒ¹é…çš„èŠ‚ç‚¹ï¼ŒåŒ¹é…æ•°åŠ ä¸€ï¼Œå½“æˆ‘ä»¬éå†å®Œå·¦è¾¹æ‰€æœ‰çš„æœªåŒ¹é…çš„èŠ‚ç‚¹æ—¶ï¼Œæœ€ç»ˆçš„åŒ¹é…æ•°å°±æ˜¯æœ€å¤§åŒ¹é…æ•°ï¼Œè¿™å°±æ˜¯åŒˆç‰™åˆ©ç®—æ³•ã€‚ è¿™é‡Œæ€»ç»“ä¸€ä¸‹åŒˆç‰™åˆ©ç®—æ³•çš„æµç¨‹ï¼š ä»å·¦è¾¹æœªåŒ¹é…çš„èŠ‚ç‚¹éå†ï¼Œå¦‚æœå³è¾¹çš„èŠ‚ç‚¹æœªåŒ¹é…ï¼Œé‚£ä¹ˆè®©äºŒè€…åŒ¹é…ï¼ŒåŒ¹é…æ•°åŠ ä¸€ å¦åˆ™å³è¾¹çš„èŠ‚ç‚¹å·²åŒ¹é…ï¼Œé‚£ä¹ˆä»å³è¾¹èŠ‚ç‚¹åŒ¹é…çš„èŠ‚ç‚¹ç»§ç»­éå† é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå³è¾¹æœªåŒ¹é…çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåŒ¹é…æ•°åŠ ä¸€ï¼Œå¹¶ä¸”æ›´æ–°åŒ¹é…å…³ç³» æ ¹æ®éå†çš„é¡ºåºä¸åŒï¼ŒåŒˆç‰™åˆ©ç®—æ³•æœ‰ä¸¤ç§å®ç°ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ BFS è¿›è¡Œéå†ï¼Œè¯¥ç§æ–¹æ³•é€Ÿåº¦è¾ƒå¿«ï¼Œä½†æ˜¯ä»£ç å¤æ‚ import java.util.*;public class HungarianBFS &#123; private Graph graph; private int[] matching; private int maxMatching; public HungarianBFS(Graph graph) &#123; this.graph = graph; // å…ˆæ£€æµ‹æ˜¯å¦æ˜¯äºŒåˆ†å›¾ BinaryPartitionDetection bpm = new BinaryPartitionDetection(graph); if (!bpm.isBipartite()) &#123; throw new IllegalArgumentException(\"è¯¥å›¾ä¸æ˜¯äºŒåˆ†å›¾\"); &#125; this.matching = new int[graph.V()]; Arrays.fill(matching, -1); int[] colors = bpm.colors(); for (int v = 0; v &lt; graph.V(); v++) &#123; // colors[v] == 0 è¯´æ˜æ˜¯å·¦è¾¹èŠ‚ç‚¹ // matching[v] == -1 è¯´æ˜æœªåŒ¹é…ï¼Œä»è¿™ç§èŠ‚ç‚¹å¼€å§‹éå† if (colors[v] == 0 &amp;&amp; matching[v] == -1) &#123; // bfs çš„è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°ä¸€ä¸ªå³è¾¹æœªåŒ¹é…çš„èŠ‚ç‚¹ if (bfs(v)) &#123; // æ‰¾åˆ°åŒ¹é…æ•°å°±åŠ ä¸€ maxMatching++; &#125; &#125; &#125; &#125; // è¿›è¡Œ bfs éå† private boolean bfs(int v) &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(v); int[] pre = new int[graph.V()]; Arrays.fill(pre, -1); pre[v] = v; while (!queue.isEmpty()) &#123; int cur = queue.remove(); for (int next: graph.adj(cur)) &#123; if (pre[next] == -1) &#123; // å¦‚æœå³è¾¹çš„èŠ‚ç‚¹å·²ç»åŒ¹é…äº† if (matching[next] != -1) &#123; // ä»å³è¾¹èŠ‚ç‚¹çš„åŒ¹é…èŠ‚ç‚¹å¼€å§‹ç»§ç»­éå† queue.add(matching[next]); pre[next] = cur; pre[matching[next]] = next; &#125; else &#123; // å³è¾¹çš„èŠ‚ç‚¹æœªåŒ¹é…ï¼Œæ‰¾åˆ°äº†ï¼Œæ›´æ–°åŒ¹é…å…³ç³» pre[next] = cur; ArrayList&lt;Integer&gt; path = getPath(pre, v, next); for (int i = 0; i &lt; path.size(); i += 2) &#123; matching[path.get(i)] = path.get(i + 1); matching[path.get(i + 1)] = path.get(i); &#125; return true; &#125; &#125; &#125; &#125; return false; &#125; private ArrayList&lt;Integer&gt; getPath(int[] pre, int start, int end) &#123; int cur = end; ArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;(); while (cur != start) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(start); Collections.reverse(result); return result; &#125; public int result() &#123; return maxMatching; &#125;&#125; è¿˜æœ‰ä¸€ç§å®ç°æ˜¯ä½¿ç”¨ DFS è¿›è¡Œéå†ï¼Œè™½ç„¶æ¯” BFS æ…¢ä¸€ä¸¢ä¸¢ï¼Œä½†è¿˜æ˜¯å®ç°ç®€å• import java.util.Arrays;public class HungarianDFS &#123; private Graph graph; private int maxMatching; private boolean[] visited; private int[] matching; public HungarianDFS(Graph graph) &#123; // ä¸‹é¢çš„åˆå§‹åŒ–é€»è¾‘åŒ BFS this.graph = graph; BinaryPartitionDetection bmp = new BinaryPartitionDetection(graph); if (!bmp.isBipartite()) &#123; throw new IllegalArgumentException(\"è¯¥å›¾ä¸æ˜¯äºŒåˆ†å›¾\"); &#125; int[] colors = bmp.colors(); this.maxMatching = 0; this.visited = new boolean[graph.V()]; this.matching = new int[graph.V()]; Arrays.fill(matching, -1); for (int v = 0; v &lt; graph.V(); v++) &#123; // å·¦è¾¹æœªåŒ¹é…èŠ‚ç‚¹å¼€å§‹éå† if (colors[v] == 0 &amp;&amp; matching[v] == -1) &#123; Arrays.fill(visited, false); // dfs è¿”å›å€¼çš„å«ä¹‰åŒ bfs if (dfs(v)) &#123; maxMatching++; &#125; &#125; &#125; &#125; private boolean dfs(int v) &#123; visited[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; visited[w] = true; // å¦‚æœå³è¾¹æœªåŒ¹é…ï¼Œæ›´æ–°åŒ¹é…å…³ç³» // æˆ–è€…å³è¾¹å·²åŒ¹é…ï¼Œå¹¶ä¸”ä»å³è¾¹å·²åŒ¹é…çš„èŠ‚ç‚¹éå†èƒ½æ‰¾åˆ°ä¸€ä¸ªå³è¾¹æœªåŒ¹é…çš„èŠ‚ç‚¹ï¼Œä¹Ÿæ›´æ–°åŒ¹é…å…³ç³» if (matching[w] == -1 || dfs(matching[w])) &#123; matching[v] = w; matching[w] = v; return true; &#125; &#125; &#125; return false; &#125; public int result() &#123; return maxMatching; &#125;&#125; åŒç†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒˆç‰™åˆ©ç®—æ³•æ¥å®Œæˆä¸Šé¢çš„ LeetCode é—®é¢˜ import java.util.*;public class Solution &#123; public int domino(int n, int m, int[][] broken) &#123; int[][] board = new int[n][m]; for (int[] p: broken) &#123; board[p[0]][p[1]] = 1; &#125; AdjSet graph = new AdjSet(n * m); for (int i = 0; i &lt; n; i++) &#123; for (int j = 0; j &lt; m; j++) &#123; if (j + 1 &lt; m &amp;&amp; board[i][j] == 0 &amp;&amp; board[i][j + 1] == 0) &#123; graph.addEdge(i * m + j, i * m + j + 1); &#125; if (i + 1 &lt; n &amp;&amp; board[i][j] == 0 &amp;&amp; board[i + 1][j] == 0) &#123; graph.addEdge(i * m + j, (i + 1) * m + j); &#125; &#125; &#125; HungarianBFS hungarianBFS = new HungarianBFS(graph); return hungarianBFS.result(); &#125;&#125; é€Ÿåº¦æ¯”ä½¿ç”¨ç½‘ç»œæµè¦å¿«","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"ç½‘ç»œæµä¸æœ€å¤§æµ","date":"2021-01-29T11:31:00.000Z","path":"/ç½‘ç»œæµä¸æœ€å¤§æµ/","text":"ç½‘ç»œæµä¸æœ€å¤§æµè€ƒè™‘ä¸€å¹…æœ‰å‘å¸¦æƒå›¾ å¦‚æœå›¾ä¸­æœ‰ä¸€ä¸ªæºç‚¹ï¼Œå³å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œä¸Šå›¾çš„èŠ‚ç‚¹ 0ï¼Œæœ‰ä¸€ä¸ªæ±‡ç‚¹ï¼Œå®ƒçš„å‡ºåº¦ä¸º 0ï¼Œä¸Šå›¾çš„èŠ‚ç‚¹ 3ï¼Œå¹¶ä¸”å›¾ä¸­æ‰€æœ‰è¾¹çš„æƒå€¼éƒ½æ˜¯éè´Ÿçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¯´è¿™æ˜¯ä¸€ä¸ªç½‘ç»œæµã€‚ åŒä¸€èˆ¬çš„å¸¦æƒå›¾ä¸åŒï¼Œç½‘ç»œæµä¸­è¾¹çš„æƒå€¼ä¸æ˜¯æŒ‡ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾ä¸€ä¸ªèŠ‚ç‚¹çš„è·ç¦»æ˜¯å¤šå°‘ï¼Œè€—è´¹æ˜¯å¤šå°‘ï¼Œå®ƒæŒ‡çš„æ˜¯ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾å¦ä¸€ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿå®¹å¿çš„æœ€å¤§æµé‡ï¼Œä¾‹å¦‚ä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 1 å®ƒæœ€å¤šèƒ½å¤Ÿå®¹å¿ 3 çš„æµé‡ã€‚é™¤äº†æµé‡é™åˆ¶ä»¥å¤–ï¼Œè¿˜éœ€è¦æ»¡è¶³å¹³è¡¡é™åˆ¶ï¼Œå³æµå…¥æŸä¸ªèŠ‚ç‚¹çš„æµé‡å¿…é¡»ç­‰äºæµå‡ºè¯¥èŠ‚ç‚¹çš„æµé‡ï¼Œå³èŠ‚ç‚¹ä¸å…è®¸å­˜å‚¨æµé‡ï¼Œä¹Ÿä¸èƒ½äº§ç”Ÿæµé‡(é™¤äº†æºç‚¹å’Œæ±‡ç‚¹)ã€‚ çœŸå®ä¸–ç•Œä¸­å¾ˆå¤šçš„é—®é¢˜å¯ä»¥å»ºæ¨¡ä¸ºç½‘ç»œæµçš„æ¨¡å‹ï¼Œä¾‹å¦‚ä¾›æ°´ç³»ç»Ÿï¼Œå›¾ä¸­çš„è¾¹å¯ä»¥çœ‹åšæ˜¯æ°´ç®¡ï¼Œå…¶ä¸­çš„æƒå€¼è¡¨ç¤ºçš„æ˜¯æ°´ç®¡èƒ½å¤Ÿé€šè¿‡çš„æœ€å¤§æµé‡ï¼›åˆæ¯”å¦‚é€šä¿¡ç³»ç»Ÿï¼Œæ¯æ¡è¾¹çœ‹åšæ˜¯ä¸€ä¸ªä¿¡é“ï¼Œè€Œæƒå€¼å¯ä»¥çœ‹åšæ˜¯ä¿¡é“å®¹é‡ã€‚ æºç‚¹ä¸æ–­çš„å‘å‡ºæµé‡ï¼Œæ±‡ç‚¹ä¸æ–­æ¥æ”¶æµé‡ï¼Œå› ä¸ºå‰©ä½™çš„èŠ‚ç‚¹æ—¢ä¸ç”Ÿäº§æµé‡ï¼Œä¹Ÿä¸å­˜å‚¨æµé‡ï¼Œæ‰€ä»¥ä»æºç‚¹å‘å‡ºçš„æµé‡ä¼šå…¨éƒ¨è¿›å…¥åˆ°æ±‡ç‚¹ã€‚ç°åœ¨æˆ‘ä»¬æ¯”è¾ƒå…³å¿ƒçš„æ˜¯ï¼Œä»æºç‚¹æœ€å¤šèƒ½å‘å‡ºå¤šå°‘æµé‡ï¼Œæœ€ç»ˆåˆ°è¾¾æ±‡ç‚¹ï¼Œè¿™å°±æ˜¯æœ€å¤§æµé—®é¢˜ã€‚ æœ‰å‘å¸¦æƒå›¾åœ¨è®²è§£å¦‚ä½•è·å¾—ç½‘ç»œçš„æœ€å¤§æµä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æ€ä¹ˆè¡¨ç¤ºç½‘ç»œæµæ¨¡å‹ã€‚å…¶å®ç½‘ç»œæµå°±æ˜¯ä¸€ä¸ªæœ‰å‘çš„å¸¦æƒå›¾ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ä¹‹å‰çš„æ— å‘å¸¦æƒå›¾è¿›è¡Œæ”¹é€ å°±å¯ä»¥å¾—åˆ°æœ‰å‘å¸¦æƒå›¾ï¼Œæ”¹é€ çš„è¿‡ç¨‹å¯ä»¥å‚è€ƒä¹‹å‰çš„æ— å‘æ— æƒå›¾åˆ°æœ‰å‘æ— æƒå›¾çš„æ”¹é€ ï¼Œå…¶å®å°±æ˜¯å°† adj[v].put(w, weight);adj[w].put(v, weight); ä¿®æ”¹ä¸ºäº† adj[v].put(w, weight); ä»¥æ­¤è¡¨æ˜æ˜¯ä¸€ä¸ªæœ‰æ–¹å‘çš„å›¾ã€‚å¦å¤–ä¸ºäº†å®ç°åç»­çš„ç®—æ³•ï¼Œæˆ‘ä»¬ä¸ºå¸¦æƒå›¾å¢åŠ äº† 2 ä¸ª API setWeight(v, w, weight) addEdge(v, w, weight) å¦å¤–æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªæ–°çš„æ„é€ æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³å›¾ä¸­æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œå¾—åˆ°ä¸€ä¸ªæ²¡æœ‰è¾¹çš„å›¾ï¼Œåœ¨åç»­é€šè¿‡ addEdge æ–¹æ³•æ¥å›¾æ·»åŠ è¾¹ã€‚ DirectedWeightedGraph ç±»å¦‚ä¸‹ import java.io.File;import java.util.HashMap;import java.util.Map;import java.util.Scanner;public class DirectedWeightedGraph&#123; private int V; private int E; private HashMap&lt;Integer, Integer&gt;[] adj; public DirectedWeightedGraph(String path) &#123; File file = new File(path); Scanner scanner = null; try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (V &lt; 0) &#123; throw new IllegalArgumentException(\"V can't be negative\"); &#125; adj = new HashMap[V]; for (int i = 0; i &lt; V; i++) &#123; adj[i] = new HashMap&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (E &lt; 0) &#123; throw new IllegalArgumentException(\"E can't be negative\"); &#125; for (int i = 0; i &lt; E; i++) &#123; int v = scanner.nextInt(); int w = scanner.nextInt(); int weight = scanner.nextInt(); if (v == w) &#123; throw new IllegalArgumentException(\"å­˜åœ¨è‡ªç¯è¾¹\"); &#125; if (adj[v].containsKey(w)) &#123; throw new IllegalArgumentException(\"å­˜åœ¨å¹³è¡Œè¾¹\"); &#125; // è¡¨ç¤ºæœ‰å‘ adj[v].put(w, weight); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;finally &#123; scanner.close(); &#125; &#125; // å¦ä¸€æ„é€ æ–¹æ³• public DirectedWeightedGraph(int V) &#123; this.V = V; this.E = 0; this.adj = new HashMap[V]; for (int v = 0; v &lt; V; v++) &#123; adj[v] = new HashMap&lt;&gt;(); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public int getWeight(int v, int w) &#123; validateVertex(v); validateVertex(w); if (!hasEdge(v, w)) &#123; throw new IllegalArgumentException(String.format(\"%d-%d ä¸å­˜åœ¨\", v, w)); &#125; return adj[v].get(w); &#125; public void setWeight(int v, int w, int weight) &#123; validateVertex(v); validateVertex(w); if (!hasEdge(v, w)) &#123; throw new IllegalArgumentException(String.format(\"%d-%d ä¸å­˜åœ¨\", v, w)); &#125; adj[v].put(w, weight); &#125; public void addEdge(int v, int w, int weight) &#123; validateVertex(v); validateVertex(w); if (v == w) &#123; throw new IllegalArgumentException(\"å­˜åœ¨è‡ªç¯è¾¹\"); &#125; if (adj[v].containsKey(w)) &#123; throw new IllegalArgumentException(\"å­˜åœ¨å¹³è¡Œè¾¹\"); &#125; adj[v].put(w, weight); E++; &#125; public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return adj[v].containsKey(w); &#125; public Iterable&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return adj[v].keySet(); &#125; public void validateVertex(int v) &#123; if (v &lt; 0 &amp;&amp; v &gt;= V) &#123; throw new IllegalArgumentException(\"èŠ‚ç‚¹è¶…è¿‡ [0, V) çš„èŒƒå›´\"); &#125; &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (Map.Entry w: adj[v].entrySet()) &#123; stringBuilder.append(String.format(\"(%d: %d) \", w.getKey(), w.getValue())); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125;&#125; è¯¥ç±»çš„å¤§éƒ¨åˆ†å®ç°ç»†èŠ‚ä¸æ— å‘çš„ç‰ˆæœ¬ç›¸ä¼¼ï¼Œå¦‚æœä¸ç†Ÿæ‚‰å¯ä»¥æŸ¥çœ‹æ— å‘å›¾çš„ç›¸å…³ç« èŠ‚ã€‚ Ford-Fulkerson æ€æƒ³ç°åœ¨æˆ‘ä»¬å¼€å§‹çœ‹ä¸€çœ‹å¦‚ä½•æ‰¾åˆ°å›¾ä¸­çš„æœ€å¤§æµï¼Œè¿˜æ˜¯ä»¥ä¸‹å›¾ä¸ºä¾‹ æˆ‘ä»¬å…ˆä»æºç‚¹éšä¾¿é€‰æ‹©ä¸€æ¡è·¯å¾„åˆ°è¾¾æ±‡ç‚¹ å¦‚ä¸Šå›¾æˆ‘ä»¬å°±é€‰æ‹© $0 â†’ 1 â†’ 3$ è¿™æ¡è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„èƒ½å¤Ÿå…è®¸çš„æœ€å¤§å®¹é‡ä¸º 2ï¼Œæ‰€ä»¥è¿™æ¡è·¯å¾„çš„æµé‡ä¸º 2ï¼Œä¸ºäº†è¡¨ç¤ºå·²ç»é€šè¿‡äº†å¤šå°‘æµé‡ï¼Œæˆ‘ä»¬ä»¥ä¸‹é¢å½¢å¼è¡¨ç¤ºå›¾ å·¦è¾¹çš„æ•°å­—è¡¨ç¤ºå·²ç»é€šè¿‡äº†å¤šå°‘æµé‡ï¼Œå³è¾¹çš„æ•°å­—è¡¨ç¤ºå…è®¸é€šè¿‡æœ€å¤§å®¹é‡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨é€‰æ‹©ä¸€æ¡è·¯å¾„ ä¸Šé¢æˆ‘ä»¬é€‰æ‹©äº† $0 â†’ 1 â†’ 2 â†’ 3$ è¿™æ¡è·¯å¾„ï¼Œå› ä¸º $0 â†’ 1$ åªå…è®¸ 1 ä¸ªæµé‡é€šè¿‡äº†ï¼Œæ‰€ä»¥è¿™æ¡è·¯å¾„çš„æµé‡ä¸º 1ï¼Œæˆ‘ä»¬æ›´æ–°ä¸€ä¸‹å›¾ ç„¶ååœ¨é€‰æ‹©ä¸€æ¡è·¯å¾„ è¿™æ¬¡æˆ‘ä»¬é€‰æ‹©äº† $0 â†’ 2 â†’ 3$ï¼Œè¿™æ¡è·¯å¾„çš„æµé‡ä¸º $2$ï¼Œæ›´æ–°å›¾å¦‚ä¸‹ æ¥ä¸‹æ¥æˆ‘ä»¬æˆ‘ä»¬æ‰¾ä¸åˆ°ä¸€æ¡è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹äº†ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¯´è¯¥ç½‘ç»œæµçš„æœ€å¤§æµä¸º $2 + 1 + 2 = 5$ã€‚ æ‰€ä»¥ä¸Šé¢çš„ç®—æ³•å°±æ˜¯é‡å¤ä¸‹é¢ä¸¤æ­¥ï¼š éšä¾¿æ‰¾ä¸€æ¡è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹ï¼Œæ‰¾åˆ°è·¯å¾„çš„æœ€å°å€¼ï¼Œå°±æ˜¯è¿™æ¡è·¯å¾„çš„æµé‡ æ›´æ–°æ¯æ¡è¾¹å…è®¸é€šè¿‡çš„æµé‡ ä½†æ˜¯çœŸçš„éšä¾¿æ‰¾ä¸€æ¡è·¯å¾„å°±å¯ä»¥å—? æ˜¾ç„¶ä¸è¡Œï¼Œä¾‹å¦‚æˆ‘ä»¬ä¸€å¼€å§‹å°±æ‰¾åˆ°äº†è¿™ä¹ˆä¸€ä¸ªè·¯å¾„ è¿™æ¡è·¯å¾„çš„æµé‡ä¸º 3ï¼Œæˆ‘ä»¬æ›´æ–°å›¾ ä½†æ˜¯æ¥ä¸‹æ¥æˆ‘ä»¬å‘ç°æ‰¾ä¸åˆ°è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—å‡ºè¿™ä¸ªç½‘ç»œæµçš„æœ€å¤§è·¯å¾„ä¸º $3$ï¼Œæ˜æ˜¾è¿™ä¸ªç­”æ¡ˆæ˜¯ä¸å¯¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½éšä¾¿é€‰æ‹©è·¯å¾„èµ°ï¼Œå› ä¸ºå¯èƒ½å¾—ä¸åˆ°æ­£ç¡®çš„ç­”æ¡ˆã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å…è®¸åå‘æµåŠ¨å‘¢? ä¾‹å¦‚è¿˜æ˜¯ä»¥ä¸Šå›¾ä¸ºä¾‹ è¿™æ¬¡æˆ‘ä»¬é€‰æ‹©è·¯å¾„å¦‚ä¸‹ æ›´æ–°åçš„å›¾ä¸º æœ¬æ¥ä» $2 â†’ 1$ æ˜¯ä¸å¯è¾¾çš„ï¼Œä½†æ˜¯æˆ‘ä»¬èµ‹äºˆå®ƒä¸€ä¸ªè¯­ä¹‰ï¼Œè¡¨ç¤ºå°†åŸæ¥é€šè¿‡ $1 â†’ 2$ çš„æµé‡å¼•å¯¼åˆ°åˆ«çš„è·¯å¾„å»äº†ï¼Œä¾‹å¦‚æœ¬æ¥ $1 â†’ 2$ æœ‰æµé‡ä¸º 3ï¼Œç°åœ¨æˆ‘ä»¬åå‘æµåŠ¨ 2 ä¸ªæµé‡ï¼Œè¡¨ç¤ºå°†åŸæ¥è¿™ 3 ä¸ªæµé‡ä¸­çš„ 2 ä¸ªæµé‡å¼•å¯¼åˆ°åˆ«çš„è·¯å¾„ä¸­å»äº†ã€‚ èµ‹äºˆè¿™ä¹ˆä¸€ä¸ªè¯­ä¹‰çš„è¯ï¼Œé‚£ä¹ˆä¸Šé¢å›¾çš„æ‰€æœ‰ç®­å¤´éƒ½å¯ä»¥å˜ä¸ºåŒå‘çš„ï¼Œåå‘çš„ç®­å¤´è¡¨ç¤ºå…è®¸è¢«å¼•å¯¼åˆ°åˆ«çš„è·¯å¾„ä¸Šï¼Œæˆ‘ä»¬ç»™å®ƒä¸€ä¸ªæƒå€¼ï¼Œè¡¨ç¤ºèƒ½å¤Ÿè¢«å…è®¸å¼•å¯¼åˆ°åˆ«çš„è·¯å¾„ä¸Šå»çš„æµé‡çš„æœ€å¤§å€¼ï¼Œè¿™ä¸ªå€¼åº”è¯¥æ˜¯å·²ç»é€šè¿‡è¯¥è·¯å¾„çš„æµé‡ï¼Œä¾‹å¦‚å¦‚æœ $1 â†’ 2$ æ˜¯ç”¨ $3/5$ è¡¨ç¤ºçš„è¯ï¼Œè¡¨ç¤ºå·²ç»æœ‰ $3$ ä¸ªæµé‡é€šè¿‡ $1 â†’ 2$ï¼Œé‚£ä¹ˆ$2 â†’ 1$ æœ€å¤šå…è®¸ $3$ ä¸ªæµé‡è¢«å¼•å¯¼ã€‚ ä¸ºäº†è¡¨ç¤ºæ–¹ä¾¿ï¼Œä¸ç”¨ $3/5$ è¿™æ ·çš„å½¢å¼æ¥æ ‡è®°è¾¹äº†ï¼Œè€Œæ˜¯ä»¥å‰©ä½™å…è®¸é€šè¿‡çš„æµé‡è¡¨ç¤ºè¾¹ï¼Œä¾‹å¦‚ $3/5$ è¡¨ç¤ºæœ€å¤§å®¹é‡ä¸º $5$ï¼Œå·²ç»é€šè¿‡æµé‡ä¸º $3$ï¼Œæ‰€ä»¥å‰©ä½™èƒ½å¤Ÿé€šè¿‡çš„æµé‡ä¸º $2$ï¼Œæˆ‘ä»¬ä»¥ $2$ æ¥æ ‡è®°è¿™æ¡è¾¹ï¼ŒåŒç†æˆ‘ä»¬ä¹Ÿä»¥è¿™æ ·çš„æ–¹å¼æ ‡è®°åå‘çš„è¾¹ï¼Œå¾—åˆ°ä¸‹é¢çš„è¿™ä¹ˆä¸€ä¸ªå›¾ é»‘è‰²è¡¨ç¤ºæ­£å‘è¾¹ï¼Œçº¢è‰²è¡¨ç¤ºåå‘è¾¹ï¼Œä¸Šé¢çš„æ•°å€¼è¡¨ç¤ºèƒ½å¤Ÿå…è®¸é€šè¿‡çš„æœ€å¤§æµé‡ï¼Œå¯è§åœ¨æœ€å¼€å§‹åå‘è¾¹æ˜¯ä¸èƒ½å…è®¸é€šè¿‡æµé‡çš„ï¼Œå®ƒä»¬çš„æƒå€¼éƒ½æ˜¯ 0ï¼Œè¿™ä¸ªå›¾æˆ‘ä»¬ç§°ä¹‹ä¸ºæ®‹å·®å›¾ã€‚ æ¥ä¸‹ä¸‹æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„ä¸¤æ­¥äº†ï¼š éšä¾¿æ‰¾ä¸€æ¡è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹ï¼Œæ‰¾åˆ°è·¯å¾„çš„æœ€å°å€¼ï¼Œå°±æ˜¯è¿™æ¡è·¯å¾„çš„æµé‡ æ›´æ–°æ¯æ¡è¾¹å…è®¸é€šè¿‡çš„æµé‡ è¿™ä¸ªæ–¹æ³•å°±æ˜¯ Ford-Fulkerson æ€æƒ³ã€‚ Edmonds-Karp ç®—æ³•ä¸Šé¢çš„ Ford-Fulkerson åªæ˜¯æä¾›äº†ä¸€ç§æ€æƒ³ï¼Œå¾—åˆ°ä¸€ä¸ªç½‘ç»œæµçš„æ®‹å·®å›¾ï¼Œç„¶åéšä¾¿æ‰¾ä¸€æ¡è·¯å¾„ä»æºç‚¹åˆ°æ±‡ç‚¹ï¼Œä½†æ˜¯æ²¡æœ‰è¯´æ€ä¹ˆæ‰¾è¿™æ¡è·¯å¾„ï¼Œæ‰€ä»¥å®ƒåªæ˜¯ä¸€ç§æ€æƒ³ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»‹ç» Edmonds-Karp ç®—æ³•ï¼Œå®ƒå°±æ˜¯ä¸º Ford-Fulkerson æä¾›äº†ä¸€ç§å…·ä½“çš„å®ç°ï¼Œæ€ä¹ˆæ‰¾ä¸€æ¡è·¯å¾„ï¼Œå¾ˆç®€å•ï¼Œé‚£å°±æ˜¯ä»æºç‚¹è¿›è¡Œ BFS æ¥æ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼Œå½“æˆ‘ä»¬é€šè¿‡ BFS æ— æ³•è¾¾åˆ°æ±‡ç‚¹æ—¶ï¼Œè¯´æ˜ç½‘ç»œä¸èƒ½å¤Ÿæ‰¿å—æ›´å¤§çš„æµé‡äº†ã€‚ æ‰€ä»¥ä¸Šé¢çš„æ–¹æ³•æ˜¯ä¸æ˜¯éå¸¸çš„ç®€å•ï¼Œä¸‹é¢å°±ç»™å‡ºå…·ä½“çš„å®ç° import java.util.*;public class MaxFlow &#123; private DirectedWeightedGraph graph; private int s; private int t; private DirectedWeightedGraph rcGraph; private int maxFlow = 0; public MaxFlow(DirectedWeightedGraph graph, int s, int t) &#123; this.graph = graph; // ä¸€äº›æ ¡éªŒå·¥ä½œ if (graph.V() &lt; 2) &#123; throw new IllegalArgumentException(\"ç½‘ç»œæµä¸­èŠ‚ç‚¹ä¸ªæ•°å¿…é¡»å¤§äº1\"); &#125; graph.validateVertex(s); graph.validateVertex(t); this.s = s; this.t = t; // æ ¹æ®ä¼ å…¥çš„ç½‘ç»œæµï¼Œæ„é€ æ®‹å·®å›¾ DirectedWeightedGraph rcGraph = new DirectedWeightedGraph(graph.V()); for (int v = 0; v &lt; graph.V(); v++) &#123; for (int w: graph.adj(v)) &#123; rcGraph.addEdge(v, w, graph.getWeight(v, w)); // ä¸€å¼€å§‹åå‘è¾¹èƒ½å¤Ÿå…è®¸é€šè¿‡çš„æœ€å¤§æµé‡ä¸º 0 rcGraph.addEdge(w, v, 0); &#125; &#125; this.rcGraph = rcGraph; while (true) &#123; // å¼€å§‹ä»æºç‚¹åš BFS ArrayList&lt;Integer&gt; path = getAugmentPath(); // å¦‚æœä» BFS å¾—åˆ°çš„è·¯å¾„ä¸ºç©ºï¼Œè¯´æ˜ä¸èƒ½åˆ°è¾¾æ±‡ç‚¹äº†ï¼Œæ­¤æ—¶é€€å‡ºå¾ªç¯ if (path.size() == 0) &#123; break; &#125; // è·å¾—è·¯å¾„çš„æœ€å°å€¼ï¼Œå³è¿™æ¡è·¯å¾„å…è®¸é€šè¿‡çš„æœ€å¤§æµé‡ int min = Integer.MAX_VALUE; for (int i = 1; i &lt; path.size(); i++) &#123; int v = path.get(i - 1); int w = path.get(i); min = Math.min(min, rcGraph.getWeight(v, w)); &#125; maxFlow += min; // æ›´æ–°æ®‹å·®å›¾ for (int i = 1; i &lt; path.size(); i++) &#123; int v = path.get(i - 1); int w = path.get(i); rcGraph.setWeight(v, w, rcGraph.getWeight(v, w) - min); rcGraph.setWeight(w, v, rcGraph.getWeight(w, v) + min); &#125; &#125; &#125; // åš BFS private ArrayList&lt;Integer&gt; getAugmentPath() &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); int[] pre = new int[graph.V()]; queue.add(s); Arrays.fill(pre, -1); pre[s] = s; while (!queue.isEmpty()) &#123; int v = queue.remove(); for (int w: rcGraph.adj(v)) &#123; if (pre[w] == -1 &amp;&amp; rcGraph.getWeight(v, w) &gt; 0) &#123; pre[w] = v; queue.add(w); &#125; &#125; &#125; ArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;(); if (pre[t] == -1) &#123; return result; &#125; int cur = t; while (cur != s) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(s); Collections.reverse(result); return result; &#125; // è¿”å›ç½‘ç»œçš„æœ€å¤§æµ public int result() &#123; return maxFlow; &#125; // è¿”å›æœ€ç»ˆ v-w å…è®¸é€šè¿‡çš„æµé‡ public int flow(int v, int w) &#123; if (!graph.hasEdge(v, w)) &#123; throw new IllegalArgumentException(\"å­˜åœ¨è¿™æ¡è¾¹\"); &#125; graph.validateVertex(v); graph.validateVertex(w); return rcGraph.getWeight(w, v); &#125;&#125; æ£’çƒæ¯”èµ›æœ€åæˆ‘ä»¬çœ‹ä¸€ä¸ªä½¿ç”¨æœ€å¤§æµè§£å†³å®é™…é—®é¢˜çš„ä¾‹å­ï¼Œé‚£å°±æ˜¯æ£’çƒæ¯”èµ›ã€‚ å…¨ç¾æ¯å¹´éƒ½ä¼šä¸¾è¡Œä¸€æ¬¡æ£’çƒæ¯”èµ›ï¼Œæ¯ä¸ªé˜Ÿéƒ½è¦è¿›è¡Œ 162 åœºæ¯”èµ›ï¼Œæœ€ç»ˆæ‰€èƒœçš„åœºæ¬¡æœ€å¤šçš„é˜Ÿä¼è·èƒœï¼Œå¦‚æœå¹³å±€å°±è¿›è¡ŒåŠ èµ›ã€‚ ä½†æ˜¯å¦‚æœåœ¨æ¯”èµ›çš„è¿‡ç¨‹ä¸­ï¼ŒæŸä¸€é˜Ÿå·²ç»æ²¡æœ‰è·å¾—å† å†›çš„å¸Œæœ›äº†ï¼Œé‚£ä¹ˆè¯¥é˜Ÿå°±ä¼šè¢«ç›´æ¥æ·˜æ±°ã€‚ä¾‹å¦‚ $A$ é˜Ÿå·²ç»èµ¢äº† $10$ åœºäº†ï¼Œè€Œ $B$ é˜Ÿåªèµ¢äº† $1$ åœºï¼Œå¹¶ä¸”è¿˜æœ‰ $8$ åœºæ¯”èµ›æ²¡æœ‰æ‰“ï¼Œæ­¤æ—¶ $B$ é˜Ÿå¦‚ä½•ä¹Ÿä¸èƒ½èµ¢çš„åœºæ¬¡æ¯” $A$ é˜Ÿå¤šï¼Œæ‰€ä»¥ $B$ é˜Ÿåº”è¯¥è¢«æ·˜æ±°ã€‚ ç°åœ¨æˆ‘ä»¬æ‹¿åˆ°äº† 1996 å¹´ 8 æœˆ 30 æ—¥çœŸå®çš„æ¯”èµ›æ•°æ®ï¼Œæ­¤æ—¶åªå‰©ä¸‹ 5 ä¸ªé˜Ÿ Teams Wins Loss Left Against NY Bal Bos Tor Det New York 75 59 28 0 3 8 7 3 Baltimore 71 63 28 3 0 2 7 4 Boston 69 66 27 8 2 0 0 0 Toronto 63 72 27 7 7 0 0 0 Detroit 49 86 27 3 4 0 0 0 Wins ä»£è¡¨èµ¢äº†å¤šå°‘åœºï¼ŒLoss è¡¨ç¤ºè¾“äº†å¤šå°‘åœºï¼ŒLeft è¡¨ç¤ºå‰©ä½™å¤šå°‘åœºæ²¡æœ‰æ‰“ï¼ŒAgainst åé¢çš„ 5 åˆ—è¡¨ç¤ºä¸å…¶ä»–é˜Ÿè¦æ‰“å¤šå°‘åœºã€‚ å½“æ—¶åª’ä½“äº‰è®®çš„æ˜¯æœ€åä¸€ä¸ªé˜Ÿï¼Œå³ Detroit é˜Ÿè¿˜æœ‰æ²¡æœ‰è·èƒœçš„å¸Œæœ›ã€‚ä»æ•°æ®ä¸Šçœ‹ï¼Œå¦‚æœ Detroit å‰©ä¸‹çš„ 27 åœºå…¨èµ¢ï¼Œé‚£ä¹ˆå®ƒçš„èµ¢çš„æ€»åœºæ¬¡æ˜¯ $49 + 27 = 76$ï¼Œæ¯”æœ€å¼ºçš„ New York è¿˜å¤šä¸€åœºï¼Œæ‰€ä»¥å®ƒè¿˜æœ‰èµ¢çš„æœºä¼šï¼Œä½†æ˜¯è¿™æ ·æƒ³çš„è¯å°±å¿½ç•¥äº†ä¸€ä¸ªäº‹å®ï¼Œå³ä½¿ Detroit ä¸å…¶ä»–å››é˜Ÿçš„æ¯”èµ›éƒ½æ‰“èµ¢äº†ï¼Œä½†æ˜¯è¿™å››ä¸ªé˜Ÿä¹‹é—´è¿˜æœ‰æ¯”èµ›ï¼Œä¹Ÿå°±è¯´è¯´è¿™å››ä¸ªé˜Ÿå®ƒä»¬çš„æ€»èƒœåœºæ˜¯ä¼šå¢åŠ çš„ã€‚ æ‰€ä»¥ç°åœ¨åˆå˜ä¸ºäº†è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå‰å››ä¸ªé˜Ÿä¹‹é—´æ¯”èµ›ï¼Œå¦‚æœæœ€ç»ˆå®ƒä»¬çš„èƒœåœºæœ€å¤šæ˜¯ 76 çš„è¯ï¼Œè¯´æ˜ Detroit é˜Ÿè¿˜æœ‰èµ¢çš„å¸Œæœ›ï¼Œå¦åˆ™ Detroit é˜Ÿæ²¡æœ‰èµ¢çš„å¯èƒ½ã€‚ç°åœ¨æˆ‘ä»¬å¦‚ä¸‹å»ºæ¨¡ è¿™ä¸ªå›¾åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ† å…¶ä¸­æƒå€¼è¡¨ç¤ºæ¯”èµ›åœºæ¬¡ï¼Œæ¯”å¦‚ s â†’ NY-Bal è¿™æ¡è¾¹çš„æƒå€¼ä¸º $5$ï¼Œè¡¨ç¤º NY ä¸ Bal ä¹‹é—´æœ‰äº”åœºæ¯”èµ›è¦æ‰“ï¼Œå¯è§è¿™å››ä¸ªé˜Ÿä¼æ€»å…±è¦æ‰“ $5 + 8 + 7 + 2 + 7 = 27$ åœºæ¯”èµ›ã€‚ç¬¬äºŒéƒ¨åˆ† è¿™æ¬¡çš„æƒå€¼è¡¨ç¤ºçš„æ˜¯èƒœåœºçš„åˆ†é…ã€‚ç¬¬ä¸‰éƒ¨åˆ† è¿™æ—¶å…¶ä¸­çš„æƒå€¼è¡¨ç¤ºæ¯ä¸ªé˜Ÿæœ€å¤šèµ¢å¤šå°‘æ¬¡ï¼Œä¾‹å¦‚ NY é˜Ÿç›®å‰ $75$ åˆ†ï¼Œå®ƒæœ€å¤šåªèƒ½èµ¢ä¸€åœºã€‚å¦‚æœä¸Šè¿°ç½‘ç»œæµçš„æœ€å¤§æµå¤§äºç­‰äºæ¯”èµ›çš„æ€»åœºæ¬¡ï¼Œæ‰€ä»¥å­˜åœ¨ä¸€ç§æ–¹æ¡ˆèƒ½å¤Ÿåˆ†é…æ‰€æœ‰èƒœåœºä½¿å¾—æ‰€æœ‰é˜Ÿçš„å¾—åˆ†æœ€å¤šåªæœ‰ $76$ åˆ†ã€‚ ä¸Šé¢ç½‘ç»œæµæˆ‘ä»¬å»ºæ¨¡ä¸ºå¦‚ä¸‹å›¾ 11 190 1 30 2 80 3 70 4 20 5 71 6 31 7 32 6 82 8 83 6 73 9 74 7 24 8 25 7 77 9 76 10 17 10 58 10 79 10 13 ç°åœ¨æˆ‘ä»¬ç”¨ä¹‹å‰å†™çš„ MaxFlow ç±»æ¥æŸ¥çœ‹æœ€å¤§æµæ˜¯å¤šå°‘ public class BaseBallSolution &#123; public static void main(String[] args) &#123; DirectedWeightedGraph baseball = new DirectedWeightedGraph(\"g17.txt\"); MaxFlow maxflow = new MaxFlow(baseball, 0, 10); System.out.println(maxflow.result()); &#125;&#125; ç»“æœæ˜¯ 26 è¯´æ˜æœ€å¤§æµä¸º 26ï¼Œå°äº 27ï¼Œè¯´æ˜æ— æ³•åˆ†é… 27 åœºæ¯”èµ›ä½¿å¾—æ‰€æœ‰é˜Ÿæœ€å¤šåªèƒ½èµ¢ 76 åœºï¼Œè¿™å°±æ„å‘³ç€ Detroit æ²¡æœ‰èµ¢çš„å¯èƒ½äº†ã€‚","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"æœ‰å‘å›¾ç®—æ³•","date":"2021-01-28T13:07:00.000Z","path":"/æœ‰å‘å›¾ç®—æ³•/","text":"ä¹‹å‰æ¥è§¦è¿‡çš„å›¾éƒ½æ˜¯æ— å‘å›¾ï¼Œåœ¨è¿™ä¸ªå°èŠ‚ä¸­è®²è§£æœ‰å‘å›¾ å®é™…ç”Ÿæ´»ä¸­çš„å¾ˆå¤šé—®é¢˜éƒ½å¯ä»¥å»ºæ¨¡ä¸ºä¸€ä¸ªæœ‰å‘å›¾çš„æ¨¡å‹ï¼š ç¤¾äº¤ç½‘ç»œï¼šå›¾ä¸­çš„èŠ‚ç‚¹çœ‹åšæ˜¯ä¸€ä¸ªä¸ªçš„äººï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¡¨ç¤ºè¿™ä¸ªäººå…³æ³¨äº†è¿™ä¸ªäººï¼Œè¿™ç§å…³æ³¨å…³ç³»æ˜¯æœ‰æ–¹å‘çš„ å­¦ä¹ è¯¾ç¨‹ï¼šå°†å›¾ä¸­çš„èŠ‚ç‚¹çœ‹åšæ˜¯ä¸€é—¨é—¨çš„è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹è¢«å…¶ä»–è¯¾ç¨‹æ‰€æŒ‡å‘ï¼Œè¡¨ç¤ºå­¦ä¹ è¿™é—¨è¯¾ç¨‹ä¹‹å‰éœ€è¦å­¦ä¹ å…¶ä»–çš„è¯¾ç¨‹ï¼Œè¿™ç§å­¦ä¹ é¡ºåºä¹Ÿæ˜¯æœ‰æŒ‡å‘å…³ç³»çš„ æ¨¡å—å¼•ç”¨ï¼šå°†å›¾ä¸­çš„èŠ‚ç‚¹çœ‹åšæ˜¯ä¸€ä¸ªä¸ªçš„ç¨‹åºæ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—è¢«å…¶ä»–æ¨¡å—æŒ‡å‘ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—ä¾èµ–äºå…¶ä»–æ¨¡å—ï¼Œè¿™ç§æ¨¡å—ä¹‹é—´çš„ä¾èµ–ä¹Ÿæ˜¯æœ‰æ–¹å‘çš„ æœ‰å‘å›¾çš„è¡¨ç¤ºæˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„æ— å‘å›¾å¯ä»¥çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šçš„æœ‰å‘å›¾ï¼Œæ‰€è°“çš„ç‰¹æ®Šåœ¨äºæ¯ä¸ªèŠ‚ç‚¹éƒ½äº’ç›¸æŒ‡å‘ã€‚æˆ‘ä»¬ä¹‹å‰åœ¨ g.txt å€¼è§„å®šè§„å®šäº†èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬å½“æˆ‘ä»¬è¯»å–åˆ°ä¸‹é¢çš„å½¢å¼çš„æ—¶å€™ 0 1 è¡¨ç¤ºçš„æ˜¯èŠ‚ç‚¹ 0 æŒ‡å‘èŠ‚ç‚¹ 1 ä»¥åŠèŠ‚ç‚¹ 1 æŒ‡å‘èŠ‚ç‚¹ 0ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ— å‘å›¾ä¸­å®ç°å¦‚ä¸‹ adj[0].add(1);adj[1].add(0); å¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³è¡¨ç¤ºèŠ‚ç‚¹ 0 æŒ‡å‘èŠ‚ç‚¹ 1ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦æ·»åŠ ä¸‹é¢é‚£ä¸€è¡Œè¯­å¥å°±å¥½äº†ã€‚æ‰€ä»¥æœ‰å‘å›¾å¯¹æ¯”äºæ— å‘å›¾çš„å®ç°åªéœ€è¦æ›´æ”¹è¿™ä¸€ä¸ªéƒ¨åˆ† &#123;48&#125;import java.io.File;import java.io.FileNotFoundException;import java.util.Scanner;import java.util.TreeSet;public class DirectedGraph &#123; private int E; private int V; private TreeSet&lt;Integer&gt;[] adj; public DirectedGraph(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (this.V &lt; 0) &#123; throw new IllegalArgumentException(\"V Must Be Positive\"); &#125; this.adj = new TreeSet[this.V]; for (int i = 0; i &lt; this.V; i++) &#123; this.adj[i] = new TreeSet&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (this.E &lt; 0) &#123; throw new IllegalArgumentException(\"E Must Be Positive\"); &#125; this.inDegree = new int[V]; this.outDegree = new int[V]; for (int i = 0; i &lt; this.E; i++) &#123; int a = scanner.nextInt(); validateVertex(a); int b = scanner.nextInt(); validateVertex(b); if (a == b) &#123; throw new IllegalArgumentException(\"Self loop exists\"); &#125; if (adj[a].contains(b)) &#123; throw new IllegalArgumentException(\"Parallel edge exists\"); &#125; // åªæ˜¯åˆ æ‰äº† adj[b].add(a) adj[a].add(b); &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; private void validateVertex(int v) &#123; if (v &lt; 0 || v &gt;= this.V) &#123; throw new IllegalArgumentException(\"Vertex \" + v + \" is invalid\"); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public Iterable&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return adj[v]; &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (int w: adj(v)) &#123; stringBuilder.append(String.format(\"%d \", w)); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125;&#125; éœ€è¦æ³¨æ„çš„æ˜¯æœ‰ä¸€ä¸ªæ¦‚å¿µåŒæ— å‘å›¾æœ‰æ‰€ä¸åŒï¼Œé‚£å°±æ˜¯åº¦çš„æ¦‚å¿µï¼Œåœ¨æœ‰å‘å›¾ä¸­åº¦åˆ†ä¸ºä¸¤ç±»ï¼š å…¥åº¦ï¼šæœ‰å¤šå°‘æ¡è¾¹æŒ‡å‘è¯¥èŠ‚ç‚¹ å‡ºåº¦ï¼šæœ‰å¤šå°‘æ¡ä»¶ä»è¯¥èŠ‚ç‚¹æŒ‡å‘åˆ«çš„èŠ‚ç‚¹ ä¾‹å¦‚å¯¹äºä¸‹å›¾ï¼ŒèŠ‚ç‚¹ 2 çš„å…¥åº¦ä¸º 2ï¼Œå› ä¸ºæœ‰ä¸¤æ¡è¾¹æŒ‡å‘èŠ‚ç‚¹ 2ï¼Œå‡ºåº¦ä¸º 1ï¼Œå› ä¸ºæœ‰ä¸€æ¡è¾¹ä»å®ƒæŒ‡å‘èŠ‚ç‚¹ 4ã€‚ æ‰€ä»¥æˆ‘ä»¬å†æ¬¡ä¿®æ”¹ä¸€ä¸‹ç±» DirectedGraph å¦‚ä¸‹ import java.io.File;import java.io.FileNotFoundException;import java.util.Scanner;import java.util.TreeSet;public class DirectedGraph &#123; private int E; private int V; private TreeSet&lt;Integer&gt;[] adj; // å¢åŠ å…¥åº¦å’Œå‡ºåº¦çš„æˆå‘˜å˜é‡ private int[] inDegree; private int[] outDegree; public DirectedGraph(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; // å…¶ä»–ä»£ç ç›¸åŒ this.inDegree = new int[V]; this.outDegree = new int[V]; for (int i = 0; i &lt; this.E; i++) &#123; // å…¶ä»–ä»£ç ç›¸åŒ adj[a].add(b); // åœ¨è¿™é‡Œåˆå§‹åŒ–å…¥åº¦å’Œå‡ºåº¦ï¼Œa â†’ bï¼Œaçš„å‡ºåº¦å¢åŠ ï¼Œbçš„å…¥åº¦å¢åŠ  inDegree[b]++; outDegree[a]++; &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; public int inDegree(int v) &#123; validateVertex(v); return inDegree[v]; &#125; public int outDegree(int v) &#123; validateVertex(v); return outDegree[v]; &#125; // å…¶ä»–æ–¹æ³•&#125; DFSå¯¹äºæœ‰å‘å›¾æ¥è¯´ï¼Œå®ƒçš„ DFS ä»£ç å’Œ BFS ä»£ç åŒæ— å‘å›¾çš„å†™æ³•å®Œå…¨æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºåœ¨åæ–‡ä¸­éœ€è¦ç”¨åˆ° DFS éå†ï¼Œæ‰€ä»¥è¿™é‡Œè´´å‡ºæœ‰å‘å›¾çš„ DFS éå†ä»£ç  import java.util.ArrayList;public class DFSDirectedGraph &#123; private DirectedGraph graph; // æ·±åº¦ä¼˜å…ˆå‰åºéå†ç»“æœ private ArrayList&lt;Integer&gt; pre; // æ·±åº¦ä¼˜å…ˆååºéå†ç»“æœ private ArrayList&lt;Integer&gt; post; private boolean[] visited; public DFSDirectedGraph(DirectedGraph graph) &#123; this.graph = graph; this.pre = new ArrayList&lt;&gt;(); this.post = new ArrayList&lt;&gt;(); this.visited = new boolean[graph.V()]; for (int v = 0; v &lt; graph.V(); v++) &#123; if (!visited[v]) &#123; dfs(v); &#125; &#125; &#125; private void dfs(int v) &#123; visited[v] = true; pre.add(v); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w); &#125; &#125; post.add(v); &#125; public ArrayList&lt;Integer&gt; pre() &#123; return pre; &#125; public ArrayList&lt;Integer&gt; post() &#123; return post; &#125;&#125; å¯è§ä¸Šé¢çš„ä»£ç ä¸æ— å‘å›¾çš„ DFS å¹¶æ— ä¸åŒã€‚ æœ‰å‘å›¾çš„ç¯æ£€æµ‹æ£€æµ‹æœ‰å‘å›¾ä¸­æ˜¯å¦å­˜åœ¨ç¯æ˜¯ä¸€ä»¶å¾ˆæœ‰å¿…è¦çš„äº‹æƒ… å¦‚æœå°†ä¸Šé¢çš„å›¾çœ‹åšæ˜¯ä¸€ä¸ªè¯¾ç¨‹ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¦‚æœå›¾ä¸­å­˜åœ¨ç¯ï¼Œè¯´æ˜è¯¾ç¨‹ä¹‹é—´ç›¸äº’ä¾èµ–ï¼Œå­¦ä¹ è¯¾ç¨‹ A ä¹‹å‰éœ€è¦å…ˆå­¦ä¹ è¯¾ç¨‹ Bï¼Œè€Œå­¦ä¹ è¯¾ç¨‹ B ä¹‹å‰åˆéœ€è¦å…ˆå­¦ä¹ è¯¾ç¨‹ Aï¼Œè¿™æ ·çš„å­¦ä¹ é¡ºåºè‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ã€‚ æˆ‘ä»¬æƒ³ä¸€æƒ³æˆ‘ä»¬åœ¨æ— å‘å›¾ä¸­æ˜¯æ€ä¹ˆåšç¯æ£€æµ‹çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ DFS éå†ï¼Œå½“éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœæŸä¸ªé‚»æ¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®äº†ï¼Œå¹¶ä¸”ä¸æ˜¯å®ƒçš„çˆ¶äº²èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå›¾ä¸­å­˜åœ¨ä¸€ä¸ªç¯ã€‚ä½†æ˜¯å¯¹äºæœ‰å‘å›¾å°±ä¸ä¸€æ ·äº† ä¸Šé¢çš„åŠ¨å›¾æ˜¯ä¼˜å…ˆéå†çš„é¡ºåºï¼Œæœ€åæˆ‘ä»¬æ¥åˆ°äº†èŠ‚ç‚¹ 3 æ­¤æ—¶æˆ‘ä»¬å‘ç°èŠ‚ç‚¹ 3 çš„ç›¸é‚»èŠ‚ç‚¹ 2 å·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œå¹¶ä¸”èŠ‚ç‚¹ 2 ä¸æ˜¯ 3 çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬èƒ½è¯´å›¾ä¸­å­˜åœ¨ä¸€ä¸ªç¯å—? ä¸èƒ½ï¼Œå› ä¸ºèŠ‚ç‚¹ 2 æ— æ³•åˆ°è¾¾èŠ‚ç‚¹ 3ï¼Œæ‰€ä»¥å½¢æˆä¸äº†ä¸€ä¸ªç¯ã€‚ æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¦å¤–ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºèŠ‚ç‚¹æ˜¯å¦åœ¨è·¯å¾„ä¸Šï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹è®¿é—®é‚»æ¥èŠ‚ç‚¹æ—¶å‘ç°è¯¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ä¸”åœ¨è·¯å¾„ä¸Šï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´æ„æˆäº†ä¸€ä¸ªç¯ã€‚ ä»€ä¹ˆå«åœ¨è·¯å¾„ä¸Šï¼Œå¦‚æœè¿™ä¸ªèŠ‚ç‚¹è¿˜æ²¡æœ‰å›æº¯åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸ªèŠ‚ç‚¹åœ¨è·¯å¾„ä¸Šã€‚ å¦‚æœæˆ‘ä»¬åœ¨è®¿é—®åˆ°èŠ‚ç‚¹ w æ—¶ï¼ŒèŠ‚ç‚¹ v è¿˜åœ¨è·¯å¾„ä¸Šï¼Œè¯´æ˜èŠ‚ç‚¹ v å¯ä»¥åˆ°è¾¾èŠ‚ç‚¹ wï¼Œå¦‚æœæ­¤æ—¶èŠ‚ç‚¹ w å¯ä»¥åˆ°è¾¾èŠ‚ç‚¹ v ä¸å°±è¯´æ˜å­˜åœ¨ä¸€ä¸ªç¯å—ã€‚ public class DirectedCycleDetect &#123; private DirectedGraph graph; private boolean[] visited; // onPath[w] è¡¨ç¤ºèŠ‚ç‚¹ w æ˜¯å¦åœ¨è·¯å¾„ä¸Š private boolean[] onPath; private boolean hasCycle; public DirectedCycleDetect(DirectedGraph graph) &#123; this.graph = graph; this.visited = new boolean[graph.V()]; this.onPath = new boolean[graph.V()]; this.hasCycle = false; for (int v = 0; v &lt; graph.V(); v++) &#123; if (!visited[v]) &#123; if (dfs(v)) &#123; hasCycle = true; break; &#125; &#125; &#125; &#125; private boolean dfs(int v) &#123; visited[v] = true; onPath[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; if (dfs(w)) &#123; return true; &#125; // é€šæ— å‘å›¾ä¸åŒï¼Œ2 -&gt; 1 -&gt; 2 ä¹Ÿæ˜¯ä¸€ä¸ªç¯ &#125; else if (onPath[w]) &#123; return true; &#125; &#125; // å›æº¯åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹æ—¶å°±ä¸åœ¨è·¯å¾„ä¸Šäº† onPath[v] = false; return false; &#125; public boolean isHasCycle() &#123; return hasCycle; &#125;&#125; æ‹“æ‰‘æ’åºè¿˜æ˜¯å¯¹äºä¸‹é¢çš„è¿™ä¹ˆä¸€å‰¯å›¾ å‡è®¾ä¸Šé¢çš„èŠ‚ç‚¹ä»£è¡¨ä¸€é—¨è¯¾ç¨‹çš„è¯ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“åº”è¯¥ä»¥ä»€ä¹ˆæ ·çš„é¡ºåºå­¦ä¹ æ‰€æœ‰çš„è¯¾ç¨‹ï¼Œè¿™å…¶å®å°±æ˜¯åœ¨å¯»æ‰¾å›¾çš„æ‹“æ‰‘æ’åºã€‚ é‚£ä¹ˆæˆ‘ä»¬å¯»æ‰¾å›¾çš„æ‹“æ‰‘æ’åºå‘¢? è¿˜æ˜¯ä»¥å­¦ä¹ è¯¾ç¨‹ä¸¾ä¾‹ï¼Œè¦å­¦ä¹ ä¸€é—¨è¯¾ï¼Œé‚£ä¹ˆè¿™é—¨å°±ä¸èƒ½ä¾èµ–äºä»»ä½•ä¸€é—¨å…¶ä»–çš„è¯¾ï¼Œæˆ–è€…è¿™é—¨è¯¾å·²ç»è¢«å­¦è¿‡äº†ï¼Œå°±æ¯”å¦‚ä¸Šé¢æˆ‘ä»¬åº”è¯¥å…ˆå­¦ä¹ è¯¾ç¨‹ 0ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•è¯¾ç¨‹æŒ‡å‘å®ƒï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•è¯¾ç¨‹ï¼Œä»¥å›¾è®ºçš„è¯­è¨€æ¥è¯´ï¼Œå› ä¸ºèŠ‚ç‚¹ 0 çš„å…¥åº¦ä¸º 0ï¼Œæ‰€ä»¥å…ˆå­¦ä¹ è¯¾ç¨‹ 0ã€‚ å­¦ä¹ å®Œè¯¾ç¨‹ 0 ä¹‹åï¼Œä¸ºäº†è¡¨ç¤ºè¿™é—¨è¯¾ç¨‹å·²ç»å­¦è¿‡ï¼Œæˆ‘ä»¬å°†ä¾èµ–äºèŠ‚ç‚¹ 0 çš„èŠ‚ç‚¹çš„å…¥åº¦å‡ä¸€ æ¥ä¸‹æ¥æˆ‘ä»¬åº”è¯¥å­¦ä¹ å“ªé—¨è¯¾å‘¢? å½“ç„¶æ˜¯å…¥åº¦ä¸º 0 çš„è¯¾ï¼Œè¡¨ç¤ºä¸éœ€è¦å‰ç½®è¯¾ç¨‹æˆ–è€…å‰ç½®è¯¾ç¨‹å·²ç»å­¦è¿‡äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å­¦ä¹ è¯¾ç¨‹ 1ï¼Œå¹¶ä¸”å°†ä¾èµ–è¯¾ç¨‹ 1 çš„å…¶ä»–è¯¾ç¨‹çš„å…¥åº¦å‡ä¸€ æ¥ä¸‹æ¥è¿˜æ˜¯å­¦ä¹ å…¥åº¦ä¸º 0 çš„è¯¾ç¨‹ï¼Œå³è¯¾ç¨‹ 3ï¼Œå¹¶ä¸”æ›´æ–°ä¾èµ–è¯¾ç¨‹ 3 çš„å…¶ä»–è¯¾ç¨‹çš„å…¥åº¦ æ¥ç€å­¦ä¹ è¯¾ç¨‹ 2ï¼Œå› ä¸ºå®ƒçš„å…¥åº¦ä¸º 0ï¼Œç„¶åæ›´æ–°ä¾èµ–è¯¾ç¨‹ 2 çš„å…¶ä»–è¯¾ç¨‹çš„å…¥åº¦ æœ€åå­¦ä¹ è¯¾ç¨‹ 4 æ‰€ä»¥æœ€ç»ˆè¯¾ç¨‹çš„å­¦ä¹ é¡ºåºä¸º 0 â†’ 1 â†’ 3 â†’ 2 â†’ 4ï¼Œä¹Ÿå°±æ˜¯æ‹“æ‰‘æ’åºçš„ç»“æœã€‚ æ‰€ä»¥æˆ‘ä»¬å¯¹å›¾åšæ‹“æ‰‘æ’åºï¼Œå°±é‡å¤åšä¸¤æ­¥ï¼š é€‰æ‹©å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ æ›´æ–°ç›¸é‚»èŠ‚ç‚¹çš„å…¥åº¦ å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜å°±æ˜¯ï¼Œæ‹“æ‰‘æ’åºåªå¯¹æœ‰å‘æ— ç¯å›¾(DAG) æœ‰æ•ˆï¼Œå¦‚æœå›¾ä¸­æœ‰ç¯ï¼ŒäºŒè€…ç›¸äº’ä¾èµ–ï¼Œå°±ä¸çŸ¥é“å…ˆå­¦ä¹ å“ªä¸€é—¨è¯¾ç¨‹äº†ã€‚ åœ¨ä»£ç çš„å®ç°æ–¹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨é˜Ÿåˆ—æ¥å­˜å‚¨å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œåœ¨æ›´æ–°ç›¸é‚»èŠ‚ç‚¹å…¥åº¦çš„æ—¶å€™ï¼Œå¦‚æœå…¥åº¦ä¸º 0 åˆ™æ·»åŠ è¿›é˜Ÿåˆ—ä¸­ï¼Œæ¯æ¬¡ä»é˜Ÿåˆ—å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œæˆ‘ä»¬æ·»åŠ åˆ°ä¸€ä¸ª List ä¸­ï¼Œè¡¨ç¤ºæ‹“æ‰‘æ’åºçš„é¡ºåºã€‚å¦å¤–å¦‚æœå›¾ä¸­å­˜åœ¨ç¯çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ª List ä¸­ä¿å­˜çš„èŠ‚ç‚¹æ•°ç›®è‚¯å®šå°äºæ•´ä¸ªå›¾çš„èŠ‚ç‚¹æ•°ç›®ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨æ‹“æ‰‘æ’åºæ¥åšç¯æ£€æµ‹ã€‚ import java.util.ArrayList;import java.util.LinkedList;import java.util.Queue;public class TopoSort &#123; private DirectedGraph graph; private int[] inDegree; private ArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;(); private boolean hasCycle = false; public TopoSort(DirectedGraph graph) &#123; this.graph = graph; this.inDegree = new int[graph.V()]; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); for (int v = 0; v &lt; graph.V(); v++) &#123; inDegree[v] = graph.inDegree(v); if (inDegree[v] == 0) &#123; queue.add(v); &#125; &#125; while (!queue.isEmpty()) &#123; int v = queue.remove(); result.add(v); for (int w: graph.adj(v)) &#123; inDegree[w]--; if (inDegree[w] == 0) &#123; queue.add(w); &#125; &#125; &#125; if (result.size() != graph.V()) &#123; hasCycle = true; result.clear(); &#125; &#125; public boolean isHasCycle() &#123; return hasCycle; &#125; public ArrayList&lt;Integer&gt; result() &#123; return result; &#125;&#125; æ­¤æ—¶æˆ‘ä»¬åœ¨ä»‹ç»ä¸€ç§æ‹“æ‰‘æ’åºçš„ç®—æ³•ï¼Œå®ƒéœ€è¦å€ŸåŠ©äºæ·±åº¦ä¼˜å…ˆååºéå†ã€‚å›é¡¾ä¸€ä¸ªååºéå†çš„æ¦‚å¿µï¼Œååºéå†æŒ‡çš„æ˜¯å…ˆè®¿é—®å®Œç›¸é‚»èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®è‡ªå·±ã€‚ å¯¹äºæœ‰å‘å›¾æ„å‘³ç€ä»€ä¹ˆï¼Œæ„å‘³ç€å…ˆè®¿é—®ä¾èµ–è‡ªå·±çš„èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®è‡ªå·±ï¼Œè¯´æ˜è‡ªå·±æ˜¯åœ¨ä¾èµ–äºè‡ªå·±çš„èŠ‚ç‚¹ä¹‹åè®¿é—®çš„ï¼Œå¦‚æœæˆ‘ä»¬å¯¹æ·±åº¦ä¼˜å…ˆååºéå†åšä¸€ä¸ªé€†åºï¼Œè¿™ä¸ªé¡ºåºå°±è¡¨ç¤ºè‡ªå·±åœ¨ä¾èµ–äºè‡ªå·±çš„èŠ‚ç‚¹ä¹‹å‰è¢«è®¿é—®çš„ï¼Œè¿™ä¸å°±æ˜¯æ‹“æ‰‘æ’åºçš„ç»“æœå—ã€‚ ä½¿ç”¨æ·±åº¦ä¼˜å…ˆååºéå†æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯å®ƒä¸èƒ½åšç¯æ£€æµ‹ï¼Œè™½ç„¶å›¾ä¸­æœ‰ç¯ï¼Œä½†æ˜¯è¿˜æ˜¯èƒ½å¤Ÿæ·±åº¦ä¼˜å…ˆååºéå†ï¼Œåªä¸è¿‡æ­¤æ—¶ç»“æœä¾¿æ²¡æœ‰æ„ä¹‰äº†ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åšæ‹“æ‰‘æ’åºä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è®²è§£çš„æœ‰å‘å›¾çš„ç¯æ£€æµ‹ç®—æ³•è¿›è¡Œç¯æ£€æµ‹ import java.util.ArrayList;import java.util.Collections;public class TopoSort2 &#123; private DirectedGraph graph; private boolean hasCycle; private ArrayList&lt;Integer&gt; result = new ArrayList&lt;&gt;(); public TopoSort2(DirectedGraph graph) &#123; this.graph = graph; // ä½¿ç”¨ä¹‹å‰çš„è®²è§£çš„ç¯æ£€æµ‹ç±»è¿›è¡Œç¯æ£€æµ‹ DirectedCycleDetect directedCycleDetect = new DirectedCycleDetect(graph); this.hasCycle = directedCycleDetect.isHasCycle(); if (hasCycle) &#123; return; &#125; // å¯¹å›¾åšæ·±åº¦ä¼˜å…ˆååºéå† DFSDirectedGraph dfsDirectedGraph = new DFSDirectedGraph(graph); for (int v: dfsDirectedGraph.post()) &#123; result.add(v); &#125; // å¯¹ååºéå†å–é€†åº Collections.reverse(result); &#125; public boolean isHasCycle() &#123; return hasCycle; &#125; public ArrayList&lt;Integer&gt; result() &#123; return result; &#125;&#125; å¼ºè¿é€šåˆ†é‡ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬æ€ä¹ˆæ£€æµ‹å›¾ä¸­æœ‰å¤šå°‘ä¸ªå¼ºè”é€šåˆ†é‡ï¼Œä»¥åŠæ¯ä¸€ä¸ªå¼ºè”é€šåˆ†é‡ä¸­åŒ…å«å“ªäº›èŠ‚ç‚¹ã€‚æ‰€è°“çš„å¼ºè”é€šåˆ†é‡æŒ‡å¦‚æœæŸäº›èŠ‚ç‚¹äº’ç›¸å¯è¾¾ï¼Œé‚£ä¹ˆè¿™äº›èŠ‚ç‚¹å°±ç»„æˆäº†ä¸€ä¸ªå¼ºè”é€šåˆ†é‡ã€‚ å¦‚ä¸Šå›¾å°±ä¸‰ä¸ªå¼ºè”é€šåˆ†é‡ï¼Œæ¯ä¸ªè”é€šåˆ†é‡å†…éƒ¨çš„èŠ‚ç‚¹éƒ½æ˜¯äº’ç›¸å¯è¾¾çš„ã€‚ åœ¨æ±‚è§£æœ‰å‘å›¾çš„è”é€šåˆ†é‡ä¹‹å‰ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ— å‘å›¾çš„è”é€šåˆ†é‡æ˜¯å¦‚ä½•æ±‚è§£çš„ï¼Œæˆ‘ä»¬ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹åš DFSï¼Œæ¯æ¬¡åšä¸€æ¬¡ DFS å°±è¡¨ç¤ºæœ‰ä¸€ä¸ªè”é€šåˆ†é‡ for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; cccount++; // è”é€šåˆ†é‡ä¸ªæ•°å¢åŠ  dfs(i); &#125;&#125; ä½†æ˜¯å¯¹äºæœ‰å‘å›¾æˆ‘ä»¬èƒ½ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å—? ç­”æ¡ˆæ˜¯ä¸è¡Œï¼Œè€Œæ˜¯è¦ä»¥ç‰¹å®šçš„é¡ºåºéå†ã€‚å¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªä¸ªçš„è”é€šåˆ†é‡çœ‹åšæ˜¯ä¸€ä¸ªå›¾ä¸­çš„èŠ‚ç‚¹ å¦‚æœæˆ‘ä»¬åˆ†åˆ«éå†è”é€šåˆ†é‡ $E \\rightarrow C \\rightarrow A \\rightarrow D \\rightarrow B$ ä¸­çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ¯åšä¸€æ¬¡ DFS å°±å°±å¯ä»¥ç»Ÿè®¡è”é€šåˆ†é‡æ•°ç›®ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæ˜¯ä¸Šé¢çš„é¡ºåºå‘¢? ä¸ºä»€ä¹ˆä» $E$ å¼€å§‹éå†ï¼Œå› ä¸º $E$ åªä¾èµ–å…¶ä»–è”é€šåˆ†é‡çš„èŠ‚ç‚¹ï¼Œæ²¡æœ‰å…¶ä»–è”é€šåˆ†é‡ä¾èµ–äºå®ƒï¼Œæ‰€ä»¥ä» $E$ ä¸­çš„æŸä¸ªèŠ‚ç‚¹åš DFSï¼Œåªèƒ½éå†åˆ°è”é€šåˆ†é‡ $E$ ä¸­çš„èŠ‚ç‚¹ã€‚åŒç†éå†å®Œäº† $E$ï¼Œæ­¤æ—¶ $C$ ä¹Ÿåªä¾èµ–äºå…¶ä»–è”é€šåˆ†é‡ï¼Œè™½ç„¶ $E$ ä¾èµ–äº $C$ï¼Œä½†æ˜¯ $E$ å·²ç»éå†å®Œæ¯•äº†ï¼Œæ‰€ä»¥æ­¤æ—¶ä» $C$ ä¸­çš„èŠ‚ç‚¹å¼€å§‹åš DFS åªèƒ½éå†åˆ° $C$ ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œå‰©ä½™çš„ä¹Ÿæ˜¯åŒç†ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¾èµ–äºè‡ªå·±çš„è”é€šåˆ†é‡è¦è¢«å…ˆéå†åˆ°ï¼Œä¹Ÿå°±æ˜¯ç›¸é‚»èŠ‚ç‚¹è¦åœ¨è‡ªå·±ä¹‹å‰è¢«è®¿é—®åˆ°ï¼Œå…¶å®å°±æ˜¯æ·±åº¦ä¼˜å…ˆååºéå†çš„é¡ºåºï¼Œæ‰€ä»¥ $E \\rightarrow C \\rightarrow A \\rightarrow D \\rightarrow B$ è¿™ä¸ªé¡ºåºå…¶å®æ˜¯æ·±åº¦ä¼˜å…ˆååºéå†çš„é¡ºåºã€‚ ä½†æ˜¯è¿™ä¸ªæ·±åº¦ä¼˜å…ˆååºéå†æŒ‡çš„æ˜¯ä»¥è”é€šåˆ†é‡ä½œä¸ºèŠ‚ç‚¹è¿›è¡Œçš„éå†ï¼Œå¦‚æœæˆ‘ä»¬ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åšæ·±åº¦ä¼˜å…ˆååºéå†æ˜¯å¾—ä¸åˆ°è¿™ä¸ªé¡ºåºçš„ã€‚ä¾‹å¦‚æˆ‘ä»¬ä»è”é€šåˆ†é‡ä¸­çš„èŠ‚ç‚¹ $D$ å¼€å§‹éå†ï¼Œæ¥ç€æ¥åˆ°äº†è”é€šåˆ†é‡ $C$ï¼Œè™½ç„¶éå†å®Œè”é€šåˆ†é‡ $C$ ä¸­æ‰€æœ‰èŠ‚ç‚¹ä¹‹å‰è‚¯å®šéœ€è¦éå†å®Œè”é€šåˆ†é‡ $E$ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ‰€æœ‰ $E$ ä¸­çš„èŠ‚ç‚¹éƒ½åœ¨ $C$ ä¹‹å‰è¢«éå†ï¼Œå³å¯èƒ½æœ‰è¿™æ ·çš„é¡ºåº $C_1 \\rightarrow E \\rightarrow C_2 \\rightarrow \\cdots$ï¼Œè¿™æ ·çš„é¡ºåºæ˜¯æˆ‘ä»¬ä¸æƒ³è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»ä»è”é€šåˆ†é‡ $E$ ä¸­çš„èŠ‚ç‚¹å¼€å§‹éå†ã€‚ è™½ç„¶ä¸Šé¢çš„æ·±åº¦ä¼˜å…ˆéå†ä¸èƒ½ä¸¥æ ¼æŒ‰ç…§ $E \\rightarrow C \\rightarrow A \\rightarrow D \\rightarrow B$ çš„é¡ºåºéå†ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ä¸€å®šæœ‰åˆ†é‡ $C$ ä¸­çš„èŠ‚ç‚¹åœ¨åˆ†é‡ $E$ éå†å®Œä¹‹åéå†çš„ $C_1 \\rightarrow E \\rightarrow C_2 \\rightarrow \\cdots$ï¼Œä¾‹å¦‚ $C_2$ åœ¨éå†å®Œ $E$ ä¹‹åè¢«éå†äº†ï¼Œè¿™ç»™äº†æˆ‘ä»¬çµæ„Ÿï¼Œå¦‚æœæˆ‘ä»¬å–ä¸ªé€†ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€å®šæœ‰ $C$ ä¸­çš„èŠ‚ç‚¹åœ¨ $E$ åˆ†é‡èŠ‚ç‚¹è¢«éå†ä¹‹å‰éå†ã€‚ è€Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯ä¸€å®šè¦ $E$ ä¸­çš„èŠ‚ç‚¹åœ¨ $C$ ä¸­çš„èŠ‚ç‚¹è¢«éå†ä¹‹å‰éå†ï¼Œæ€ä¹ˆåŠï¼Œæˆ‘ä»¬å°†æ•´ä¸ªå›¾çš„æ–¹å‘æ”¹å˜ä¸€ä¸‹ï¼ŒåŸæ¥æ˜¯ $a \\rightarrow b$ï¼Œç°åœ¨å˜ä¸º $b \\rightarrow a$ ç„¶åè¿›è¡Œæ·±åº¦ä¼˜å…ˆååºéå†ï¼Œç„¶åå–ä¸ªé€†å°±å¯ä»¥ä¿è¯ä¸€å®šæœ‰åœ¨ $E$ ä¸­çš„èŠ‚ç‚¹åœ¨ $C$ ä¸­çš„èŠ‚ç‚¹éå†ä¹‹å‰è¢«éå†åˆ°ï¼ŒåŒç†å¯ä»¥å¾—åˆ°ä¸€å®šæœ‰ $C$ ä¸­çš„èŠ‚ç‚¹åœ¨ $D$ ä¸­çš„èŠ‚ç‚¹è¢«éå†ä¹‹å‰è¢«éå†åˆ°ï¼Œè¿™å°±è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘ä»¬å†æ ¹æ®è¿™ä¸ªé¡ºåºåš DFS å°±å¯ä»¥ç»Ÿè®¡å‡ºè”é€šåˆ†é‡çš„ä¸ªæ•°äº†ã€‚ ä¸Šé¢è¿™ä¸ªç®—æ³•å°±æ˜¯ Kosaraju ç®—æ³•ï¼Œæ€»ç»“ä¸Šé¢çš„æ­¥éª¤å¦‚ä¸‹ï¼š å›¾ç¿»è½¬å¾—åˆ°åå›¾ å¯¹åå›¾åšæ·±åº¦ä¼˜å…ˆååºéå†ï¼Œç„¶åå¯¹éå†ç»“æœå–é€† æ ¹æ®å–é€†åçš„ç»“æœä¾æ¬¡åš DFSï¼Œç»Ÿè®¡è”é€šåˆ†é‡ä¸ªæ•° import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;import java.util.TreeSet;public class StrongCC &#123; private DirectedGraph graph; private int[] visited; private int scccount; public StrongCC(DirectedGraph graph) &#123; this.graph = graph; this.visited = new int[graph.V()]; Arrays.fill(visited, -1); this.scccount = 0; // ç¿»è½¬å›¾ TreeSet&lt;Integer&gt;[] reverse = new TreeSet[graph.V()]; for (int i = 0; i &lt; graph.V(); i++) &#123; reverse[i] = new TreeSet&lt;&gt;(); &#125; for (int v = 0; v &lt; graph.V(); v++) &#123; for (int w: graph.adj(v)) &#123; reverse[w].add(v); &#125; &#125; // å¯¹ç¿»è½¬å›¾åš DFS DFSDirectedGraph dfsDirectedGraph = new DFSDirectedGraph(new DirectedGraph(reverse)); // å¯¹æ·±åº¦ä¼˜å…ˆååºéå†å–é€† ArrayList&lt;Integer&gt; res = dfsDirectedGraph.post(); Collections.reverse(res); // ä¾æ¬¡åš DFSï¼Œæ¯åšä¸€æ¬¡ DFSï¼Œè”é€šåˆ†é‡ä¸ªæ•°å¢åŠ  for(int v: res) &#123; if (visited[v] == -1) &#123; dfs(v, scccount); scccount++; &#125; &#125; &#125; private void dfs(int v, int id) &#123; visited[v] = id; for (int w: graph.adj(v)) &#123; if (visited[w] == -1) &#123; dfs(w, id); &#125; &#125; &#125; public ArrayList&lt;Integer&gt;[] components() &#123; ArrayList&lt;Integer&gt;[] results = new ArrayList[scccount]; for (int i = 0; i&lt; scccount; i++) &#123; results[i] = new ArrayList&lt;&gt;(); &#125; for (int v = 0; v &lt; graph.V(); v++) &#123; results[visited[v]].add(v); &#125; return results; &#125;&#125;","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"æœ€çŸ­è·¯å¾„ç®—æ³•","date":"2021-01-27T15:16:00.000Z","path":"/æœ€çŸ­è·¯å¾„ç®—æ³•/","text":"æœ¬æ–‡è®²è§£å›¾ä¸­ç‚¹ä¸ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œä¸»è¦è®²è§£ä¸‰ä¸ªç®—æ³•ï¼š Dijkstra ç®—æ³• Bellman-Ford ç®—æ³• Floyed ç®—æ³• å…¶ä¸­ Dijkstra ä¸ Bellman-Ford æ˜¯è§£å†³å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œå³å®ƒåªèƒ½æ±‚è§£æŸèŠ‚ç‚¹åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œè€Œ Floyed ç®—æ³•èƒ½å¤Ÿæ±‚è§£æ‰€æœ‰èŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚ Dijkstra ç®—æ³•Dijkstra ç®—æ³•å®ƒèƒ½å¤Ÿæ±‚è§£å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œå¹¶ä¸”ä½¿ç”¨è¯¥ç®—æ³•æœ‰ä¸€ä¸ªå‰æï¼Œå›¾ä¸­ä¸èƒ½å­˜åœ¨è´Ÿæƒè¾¹ï¼Œå³å›¾ä¸­çš„æ¯æ¡è¾¹çš„æƒå€¼éƒ½å¿…é¡»æ˜¯å¤§äºç­‰äº 0 çš„ã€‚ Dijkstra ç®—æ³•ä½¿ç”¨ä¸€ä¸ª dis æ•°ç»„æ¥è¡¨ç¤ºä»æº s åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œä¾‹å¦‚ dis[v] è¡¨ç¤ºçš„å°±æ˜¯æº s åˆ°è¾¾èŠ‚ç‚¹ v çš„æœ€çŸ­è·ç¦»ï¼Œåœ¨åˆå§‹æ—¶ï¼Œé™¤äº† dis[s] ä¸º 0ï¼Œå…¶ä½™çš„ dis[v] å‡ä¸ºæ— ç©·å¤§ã€‚ Dijkstra ç®—æ³•çš„æ€æƒ³æ˜¯ï¼Œæ¯æ¬¡ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œç„¶åæ ¹æ®è¿™ä¸ªèŠ‚ç‚¹æ›´æ–°å…¶æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹åœ¨ dis æ•°ç»„ä¸­çš„å€¼ã€‚ä¾‹å¦‚éå†åˆ°èŠ‚ç‚¹ vï¼Œå…¶ç›¸é‚»èŠ‚ç‚¹ä¸º wï¼Œå¹¶ä¸”èŠ‚ç‚¹ w æœªè¢«éå†è¿‡ï¼Œå¦‚æœ dis[v] + weight(v,w) &lt; dis[w]â€‹ï¼Œé‚£ä¹ˆå°±æ›´æ–° dis[w]ï¼Œå…¶ä¸­ weight(v, w) æ˜¯è¾¹ v-w çš„æƒå€¼ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æºä¸ºèŠ‚ç‚¹ 0ï¼Œæˆ‘ä»¬æ±‚è§£èŠ‚ç‚¹ 0 åˆ°å„ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ åˆå§‹èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 0 çš„è·ç¦»ä¸º 0ï¼Œå…¶ä½™èŠ‚ç‚¹è·ç¦»èŠ‚ç‚¹ 0 çš„è·ç¦»ä¸º $\\infin$ã€‚æ ¹æ® Dijkstra ç®—æ³•ï¼Œæ¯æ¬¡ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬æ‰¾åˆ°äº†èŠ‚ç‚¹ 0ï¼Œdis[0] ä¸º 0ï¼Œæ¯”å…¶ä»–å…ƒç´ å°ã€‚æˆ‘ä»¬æ¥åˆ°èŠ‚ç‚¹ 0ï¼Œæ ¹æ®å…¬å¼ dis[0] + weight(0, w) &lt; dis[w]æ›´æ–°ä¸ 0 ç›¸é‚»çš„èŠ‚ç‚¹ w ç»§ç»­ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œæ˜¯èŠ‚ç‚¹ 2ï¼Œå®ƒçš„å€¼ä¸º 1ï¼Œå¹¶ä¸”æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ–­å®šèŠ‚ç‚¹ 0 ç¦»èŠ‚ç‚¹ 2 çš„æœ€çŸ­è·ç¦»å°±æ˜¯ 1ã€‚ ä¸ºä»€ä¹ˆå‘¢? å‡è®¾å­˜åœ¨ä¸€æ¡æ›´çŸ­çš„è·¯å¾„ä» 0 åˆ° 2ï¼Œä¾‹å¦‚æ˜¯ 0-1-2ï¼Œä½†æ˜¯å› ä¸ºæ­¤æ—¶ 0-2 æ˜¯æœ€å°çš„ï¼Œè€Œå›¾ä¸­åˆä¸å­˜åœ¨è´Ÿæƒè¾¹ï¼Œæ‰€ä»¥ 0-1-2 æ¯” 0-1 è¿˜å¤§ï¼Œä¹Ÿå°±æ˜¯æ¯” 0-2 å¤§ï¼Œæ‰€ä»¥ 0-2 å°±æ˜¯ä» 0 åˆ° 2 çš„æœ€çŸ­è·¯å¾„ã€‚æ¥åˆ°èŠ‚ç‚¹ 2 ä¹‹åï¼Œæ ¹æ®æ¡ä»¶ dis[2] + weight(2, w) &lt; dis[w] æ˜¯å¦æˆç«‹æ›´æ–°å…¶ç›¸é‚»èŠ‚ç‚¹ã€‚ ç»§ç»­ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œæ­¤æ—¶ dis[1] ä¸ dis[6] çš„å€¼éƒ½æ˜¯ 2ï¼Œéšä¾¿é€‰ä¸€ä¸ªå°±å¯ä»¥ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©èŠ‚ç‚¹ 1ï¼Œå¹¶ä¸”æ­¤æ—¶å¯ä»¥åˆ¤å®šèŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 1 çš„æœ€çŸ­è·¯å¾„å°±æ˜¯ dis[1] ä¸º 2ã€‚ä¸ºä»€ä¹ˆ? å‡è®¾å­˜åœ¨ä¸€æ¡è·¯å¾„ç»è¿‡æœªéå†çš„èŠ‚ç‚¹ä» 0 åˆ°è¾¾èŠ‚ç‚¹ 1ï¼Œæ¯”å¦‚æ˜¯èŠ‚ç‚¹ 4 å¥½äº†ï¼Œå› ä¸º dis[1] æ­¤æ—¶æ˜¯æœªéå†çš„èŠ‚ç‚¹ä¸­æœ€å°çš„ï¼Œæ‰€ä»¥ dis[1] &lt; dis[4]ï¼Œæ›´åˆ«è¯´è¿˜è¦åŠ ä¸ŠèŠ‚ç‚¹ 4 åˆ°èŠ‚ç‚¹ 1 çš„è·ç¦»ï¼ŒçŸ›ç›¾ï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°ä¸€æ¡ç»è¿‡æœªéå†èŠ‚ç‚¹æ¥åˆ°èŠ‚ç‚¹ 1ã€‚ é‚£ä¹ˆæ˜¯å¦å­˜åœ¨ä¸€æ¡è·¯å¾„åªç»è¿‡å·²ç»éå†è¿‡çš„èŠ‚ç‚¹åˆ°è¾¾èŠ‚ç‚¹ 1ï¼Œå¹¶ä¸”è·¯å¾„æ¯” dis[1] å°ï¼Œä¸å¦¨å‡è®¾å­˜åœ¨è¿™ä¹ˆä¸€æ¡è·¯å¾„ 0 -&gt; ... -&gt; s -&gt; 1ï¼Œå®ƒçš„å€¼æ¯” dis[1] å°ï¼Œå³ dis[s] + weight(s, 1) &lt; dis[1]ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ä¹‹å‰éå†åˆ°èŠ‚ç‚¹ s å¯¹ç›¸é‚»èŠ‚ç‚¹æ›´æ–°çš„æ—¶å€™å°±ä¼šæ›´æ–° dis[1] ä¸ºæ›´å°çš„å€¼ï¼Œä¹Ÿäº§ç”Ÿäº†çŸ›ç›¾ï¼Œå› æ­¤ä¹Ÿä¸å­˜åœ¨ä¸€æ¡è·¯å¾„åªç»è¿‡å·²ç»éå†è¿‡çš„èŠ‚ç‚¹åˆ°è¾¾èŠ‚ç‚¹ 1ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´æ­¤æ—¶çš„ dis[1] å°±æ˜¯ä» 0 åˆ° 1 çš„æœ€çŸ­è·¯å¾„ã€‚ æ¥åˆ°èŠ‚ç‚¹ 1 ä¹‹åï¼Œæ›´æ–°å…¶æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹çš„å€¼ï¼Œå½“ç„¶å›¾ä¸­èŠ‚ç‚¹ 1 æ­¤æ—¶ä¸å­˜åœ¨æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸è¿›è¡Œä»»ä½•çš„æ›´æ–° ç»§ç»­ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œæ‰¾åˆ°èŠ‚ç‚¹ 6ï¼Œæ­¤æ—¶ dis[6] çš„å€¼ä¸º 2ï¼Œå¹¶ä¸”æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åˆ¤å®šä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 6 çš„æœ€çŸ­è·ç¦»å°±æ˜¯ 2ã€‚ åˆ†ææ–¹æ³•åŒä¸Šï¼Œå…ˆå‡è®¾å­˜åœ¨ä¸€æ¡ä»æœªè¢«éå†è¿‡çš„èŠ‚ç‚¹åˆ°è¾¾èŠ‚ç‚¹ 6 å¾—åˆ°çš„æ›´çŸ­è·¯å¾„ï¼Œä½†æ˜¯å› ä¸º dis[6] å·²ç»æ˜¯ä» 0 åˆ°æœªè¢«éå†çš„èŠ‚ç‚¹æœ€å°çš„ï¼Œå›¾ä¸­åˆä¸å­˜åœ¨è´Ÿæƒè¾¹ï¼Œæ‰€ä»¥çŸ›ç›¾ï¼Œå†åšå‡è®¾å­˜åœ¨åªç»è¿‡å·²è¢«éå†è¿‡çš„èŠ‚ç‚¹åˆ°è¾¾èŠ‚ç‚¹ 6ï¼Œé‚£ä¹ˆåœ¨ä¹‹å‰ dis[6] çš„å€¼å°±ä¼šè¢«æ›´æ–°ä¸ºæ›´å°çš„å€¼ï¼Œä¹Ÿä¼šäº§ç”ŸçŸ›ç›¾ï¼Œä»è€Œå¾—åˆ°ç»“è®ºï¼Œä¸å­˜åœ¨å¦å¤–ä¸€æ¡è·¯å¾„ä» 0 åˆ° 6 æ›´çŸ­ï¼Œæ­¤æ—¶ dis[6] å°±æ˜¯ä» 0 åˆ° 6 çš„æœ€çŸ­è·ç¦»ã€‚ æ¥åˆ°èŠ‚ç‚¹ 6 ä¹‹åæ ¹æ®æ¡ä»¶æ›´æ–°å…¶æœªè¢«éå†çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œå›¾ä¸­èŠ‚ç‚¹ 6 ä¸å­˜åœ¨æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œå› æ­¤ä¸ä½œæ›´æ–° ç»§ç»­ä»æœªéå†çš„èŠ‚ç‚¹ï¼Œå¯»æ‰¾åœ¨ dis æ•°ç»„ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œå‘ç° dis[3] å’Œ dis[4] éƒ½æ˜¯ 3ï¼Œæˆ‘ä»¬å°±éšä¾¿é€‰æ‹©ä¸€ä¸ªï¼Œè¿™é‡Œé€‰æ‹©èŠ‚ç‚¹ 3ï¼Œå¹¶ä¸”æ­¤æ—¶å¯ä»¥åˆ¤å®š dis[3] æ˜¯ä»èŠ‚ç‚¹ 0 åˆ°èŠ‚ç‚¹ 3 çš„æœ€çŸ­è·ç¦»ï¼Œå·²ç»åˆ†æè¿‡å¤šæ¬¡ï¼Œä¸å†åˆ†æã€‚ æ¥åˆ°èŠ‚ç‚¹ 3 ä¹‹åï¼Œæ ¹æ®æ¡ä»¶æ›´æ–°å…¶æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œä¸èŠ‚ç‚¹ 3 ç›¸é‚»æœªè¢«éå†è¿‡çš„èŠ‚ç‚¹å°±æ˜¯èŠ‚ç‚¹ 4ï¼Œä½†æ˜¯å¹¶ä¸æ»¡è¶³ dis[3] + 3 &lt; dis[4] çš„æ¡ä»¶ï¼Œæ‰€ä»¥ä¸æ›´æ–° dis[4] é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹é¢è¿™å¼ è¡¨ 0 1 2 3 4 5 6 dis 0 2 1 3 3 4 2 ç¬¬äºŒè¡Œçš„å€¼è¡¨ç¤ºåŸç‚¹åˆ°å„ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ æ‰€ä»¥ Dijkstra ç®—æ³•å°±å§‹ç»ˆåœ¨é‡å¤ä¸¤æ­¥ï¼š å¯»æ‰¾æœªè¢«éå†èŠ‚ç‚¹ä¸­åœ¨ dis æ•°ç»„ä¸­æœ€å°çš„é‚£ä¸ªèŠ‚ç‚¹ æ ¹æ®æ¡ä»¶æ›´æ–°æœªè¢«éå†è¿‡çš„ç›¸é‚»èŠ‚ç‚¹ å¯»æ‰¾æœ€å°èŠ‚ç‚¹çš„æ“ä½œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—æ¥å®Œæˆï¼Œç›´æ¥ä»é˜Ÿé¦–å–å‡ºçš„å€¼å°±æ˜¯æœ€å°çš„ï¼Œæ— éœ€å¯»æ‰¾ import java.util.*;public class Dijkstra &#123; private WeightedGraph graph; private int s; private int[] dis; private boolean[] visited; // æ±‚å…·ä½“çš„è·¯å¾„ç”¨ private int[] pre; public Dijkstra(WeightedGraph graph, int s) &#123; this.graph = graph; graph.validateVertex(s); this.s = s; this.dis = new int[graph.V()]; this.visited = new boolean[graph.V()]; this.pre = new int[graph.V()]; // åˆå§‹åŒ–æ“ä½œ Arrays.fill(pre, -1); Arrays.fill(dis, Integer.MAX_VALUE); pre[s] = s; dis[s] = 0; // å»ºç«‹ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ŒNode ä¿å­˜çš„æ˜¯èŠ‚ç‚¹ dis[v] çš„å€¼ PriorityQueue&lt;Node&gt; queue = new PriorityQueue&lt;&gt;((node1, node2) -&gt; node1.getDis() - node2.getDis()); queue.add(new Node(s, 0)); while (!queue.isEmpty()) &#123; // é€‰å‡ºæœ€å°èŠ‚ç‚¹ int v = queue.remove().getV(); // å¯èƒ½å­˜åœ¨é‡å¤æ·»åŠ çš„æƒ…å†µï¼Œå¿½ç•¥ if (visited[v]) &#123; continue; &#125; visited[v] = true; // æ›´æ–°æœªè¢«éå†çš„ç›¸é‚»èŠ‚ç‚¹ for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dis[w] = Math.min(dis[w], dis[v] + graph.getWeight(v, w)); // å°† dis[w] æ·»åŠ è¿›é˜Ÿåˆ—ï¼Œå¯èƒ½ä¼šé‡å¤æ·»åŠ  // ä¸è¿‡æˆ‘ä»¬åªå¯¹æœ€å°çš„é‚£ä¸ªæ„Ÿå…´è¶£ï¼Œé‡å¤æ·»åŠ å–å‡ºåä¼šè¢«å¿½ç•¥ queue.add(new Node(w, dis[w])); pre[w] = v; &#125; &#125; &#125; &#125; public int[] result() &#123; return dis; &#125; // è·å¾—æºåˆ°èŠ‚ç‚¹ t çš„å…·ä½“è·¯å¾„ public Iterable&lt;Integer&gt; path(int t) &#123; ArrayList&lt;Integer&gt; path = new ArrayList&lt;&gt;(); if (!visited[t]) &#123; return path; &#125; int cur = t; while (cur != s) &#123; path.add(cur); cur = pre[cur]; &#125; path.add(s); Collections.reverse(path); return path; &#125;&#125; Bellman-Ford ç®—æ³•Bellman-Ford ç®—æ³•ä¹Ÿæ˜¯æ±‚è§£å•æºæœ€çŸ­è·¯å¾„çš„ç®—æ³•ï¼Œä¸ Dijkstra ç®—æ³•ä¸åŒçš„æ˜¯ï¼Œå®ƒèƒ½å¤Ÿå¤„ç†è´Ÿæƒè¾¹ï¼Œå³ä½¿å…è®¸å›¾ä¸­å­˜åœ¨æƒå€¼ä¸ºè´Ÿæ•°çš„è¾¹ã€‚ åœ¨è®²è§£ Bellman-Ford ç®—æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ç»„æ“ä½œ dis[w] = Math.min(dis[w], dis[v] + graph.getWeight(v, w)); è¿™ä¸ªæ“ä½œå«åšæ¾å¼›æ“ä½œã€‚ ä¸ºä»€ä¹ˆå«æ¾å¼›ï¼Œå› ä¸ºæœ¬æ¥å¯ä»¥ç›´æ¥åˆ°è¾¾ç‚¹ wï¼Œç°åœ¨ç»è¿‡ä¸Šé¢çš„æ“ä½œä¹‹åï¼Œåè¦ç»è¿‡ç‚¹ v ç„¶ååˆ°è¾¾ w (ä¸ä¸€å®šä¼šç»è¿‡ï¼Œåªæœ‰å½“ dis[v] + graph.getWeight(v, w) &lt; dis[w] æ‰ä¼šç»è¿‡ç‚¹ v)ï¼Œå¦‚æœæŠŠè¾¹çœ‹åšæ©¡çš®ç­‹çš„è¯ï¼Œä¸å°±ç›¸å½“äºæ¾å¼›äº†å—? è€Œ Bellman-Ford ç®—æ³•å°±æ˜¯ï¼Œå¯¹æ‰€æœ‰çš„è¾¹è¿›è¡Œ $V - 1$ è½®æ¾å¼›æ“ä½œï¼Œè¿™ä¸ª $V$ æŒ‡çš„æ˜¯å›¾ä¸­çš„èŠ‚ç‚¹æ•°ç›®ï¼Œç»è¿‡ $V - 1$ è½®æ¾å¼›æ“ä½œåï¼Œæ­¤æ—¶ dis æ•°ç»„ä¸­ä¿å­˜çš„å°±æ˜¯æºç‚¹åˆ°å„ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ ä¸ºäº†ç†è§£ Bellman-Ford ç®—æ³•ä¸ºä»€ä¹ˆè¿™ä¹ˆç¥å¥‡ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç»è¿‡ $V-1$ è½®æ¾å¼›æ“ä½œä¹‹åå°±å¯ä»¥å¾—åˆ°æœ€çŸ­è·¯å¾„ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦ç ”ç©¶ä¸€ä¸‹æ¾å¼›æ“ä½œ dis[w] = Math.min(dis[w], dis[v] + graph.getWeight(v, w)); å¦‚æœè¿›è¡Œäº†æ¾å¼›æ“ä½œï¼Œæ„å‘³æºå¤šç»è¿‡äº†ä¸€æ¡è¾¹åˆ° wï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è®¾å®š dis[w] ä¸ºæºç‚¹æœ€å¤šç»è¿‡ $k$ æ¡è¾¹åˆ°è¾¾ç‚¹ w çš„æœ€çŸ­è·¯å¾„ï¼Œé‚£ä¹ˆç»è¿‡ä¸€æ¬¡æ¾å¼›æ“ä½œä¹‹å dis[w] è¯­ä¹‰å˜ä¸ºæºç‚¹æœ€å¤šç»è¿‡ $k + 1$ æ¡è¾¹åˆ°è¾¾ç‚¹ w çš„æœ€çŸ­è·¯å¾„ï¼Œå› ä¸ºä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾å¦ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šç»è¿‡ $V-1$ æ¡è¾¹ï¼Œå› æ­¤ç»è¿‡ $V - 1$ è½®çš„æ¾å¼›æ“ä½œä¹‹åï¼Œdis[w] è¯­ä¹‰å˜ä¸ºäº†æºç‚¹æœ€å¤šç»è¿‡ $V - 1$ æ¡è¾¹åˆ°è¾¾ç‚¹ w çš„æœ€çŸ­è·¯å¾„ï¼Œè€ƒè™‘åˆ°äº†æºç‚¹åˆ°è¾¾èŠ‚ç‚¹ w èƒ½ç»è¿‡çš„è¾¹æ•°çš„æ‰€æœ‰æƒ…å†µï¼Œæ‰€ä»¥æœ€ç»ˆçš„ dis[w] å°±æ˜¯æºç‚¹åˆ°ç‚¹ w çš„æœ€çŸ­è·¯å¾„ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æºç‚¹ä¸º 0 å›¾ä¸­æœ‰ 4 ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤è¦è¿›è¡Œ 3 è½®æ¾å¼›æ“ä½œã€‚ç¬¬ä¸€æ¬¡å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ¾å¼›æ“ä½œ ç¬¬äºŒæ¬¡å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ¾å¼›æ“ä½œ ç¬¬ä¸‰æ¬¡å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ¾å¼›æ“ä½œ æœ€åå¾—åˆ°çš„ç»“æœä¸º 0 1 2 3 dis 0 4 1 2 Bellman-Ford è™½ç„¶èƒ½å¤Ÿå¤„ç†è´Ÿæƒè¾¹ï¼Œä½†æ˜¯å¦‚æœå›¾ä¸­æœ‰è´Ÿæƒç¯çš„è¯ï¼Œé‚£ä¹ˆå°±æ— æ³•æ±‚è§£äº†ï¼Œæ‰€è°“çš„è´Ÿæƒç¯æ˜¯æŒ‡ç¯ä¸­æ‰€ä»¥è¾¹çš„è·¯å¾„å’Œä¸ºè´Ÿå€¼ï¼Œè¿™æ ·çš„åªè¦æˆ‘æ¯æ¬¡ç»è¿‡ä¸€æ¬¡ç¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„ dis å€¼éƒ½åœ¨å‡å°‘ï¼Œå¦‚æœå›¾ä¸­å­˜åœ¨è´Ÿæƒç¯çš„è¯ï¼Œé‚£ä¹ˆæ ¹æœ¬å°±ä¸å­˜åœ¨æœ€å°è·¯å¾„ã€‚ å¤§å®¶åœ¨è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äºæ— å‘å›¾æ¥è¯´ï¼Œå¦‚æœå›¾ä¸­å‡ºç°äº†è´Ÿæƒè¾¹æ„å‘³ç€ä»€ä¹ˆ? å‡è®¾ 0-1 æ˜¯ä¸€ä¸ªè´Ÿæƒè¾¹ï¼Œå› ä¸ºæ˜¯æ— å‘å›¾ï¼Œå¯ä»¥ä» 0 åˆ° 1ï¼Œä¹Ÿå¯ä»¥ä» 1-0ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä» 0 æ¥åˆ° 1ï¼Œç„¶åä» 1 æ¥åˆ° 0ï¼Œè¿™å°±å½¢æˆä¸€ä¸ªè´Ÿæƒç¯ã€‚æ‰€ä»¥ Bellman-Ford ç®—æ³•å…¶å®æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ç®—æ³•ã€‚ å¦å¤–æˆ‘ä»¬å¯ä»¥é€š Bellman-Ford ç®—æ³•æ£€æµ‹å›¾ä¸­æ˜¯å¦å­˜åœ¨è´Ÿæƒç¯ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœå¦‚æœä¸å­˜åœ¨è´Ÿæƒç¯çš„è¯ï¼Œç»è¿‡ $V-1$ æ¬¡æ¾å¼›æ“ä½œåï¼Œdis æ•°ç»„ä¸­çš„å…ƒç´ çš„å€¼æ˜¯ä¸ä¼šå†æ”¹å˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»è¿‡ $V-1$ æ¬¡æ¾å¼›æ“ä½œåå†æ¬¡è¿›è¡Œä¸€æ¬¡æ¾å¼›æ“ä½œï¼Œå¦‚æœåœ¨è¿™æ¬¡çš„æ¾å¼›æ“ä½œä¸­ï¼Œdis ä¸­æœ‰å…ƒç´ çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆå°±è¯´æ˜å­˜åœ¨è´Ÿæƒç¯ã€‚ import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;public class BellmanFord &#123; private int[] dis; private WeightedGraph graph; private int s; private boolean hasNegativeCycle = false; private int[] pre; public BellmanFord(WeightedGraph graph, int s) &#123; this.graph = graph; graph.validateVertex(s); this.s = s; this.dis = new int[graph.V()]; this.pre = new int[graph.V()]; Arrays.fill(dis, Integer.MAX_VALUE); Arrays.fill(pre, -1); dis[s] = 0; pre[s] = s; // k ä»£è¡¨è½®æ•° for (int k = 1; k &lt; graph.V(); k++) &#123; // å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ¾å¼›æ“ä½œï¼Œv-w ä¸ w-v æ˜¯ä¸¤æ¡è¾¹ for (int v = 0; v &lt; graph.V(); v++) &#123; for (int w: graph.adj(v)) &#123; if (dis[v] != Integer.MAX_VALUE &amp;&amp; dis[v] + graph.getWeight(v, w) &lt; dis[w]) &#123; dis[w] = dis[v] + graph.getWeight(v, w); pre[w] = v; &#125; &#125; &#125; &#125; // å†æ¬¡è¿›è¡Œä¸€æ¬¡æ¾å¼›æ“ä½œï¼Œæ£€æµ‹è´Ÿæƒç¯ for (int v = 0; v &lt; graph.V(); v++) &#123; for (int w: graph.adj(v)) &#123; if (dis[v] != Integer.MAX_VALUE &amp;&amp; (dis[v] + graph.getWeight(v, w) &lt; dis[w])) &#123; hasNegativeCycle = true; &#125; &#125; &#125; &#125; public int[] result() &#123; return dis; &#125; public Iterable&lt;Integer&gt; path(int t) &#123; ArrayList&lt;Integer&gt; path = new ArrayList&lt;&gt;(); int cur = t; while (cur != s) &#123; path.add(cur); cur = pre[cur]; &#125; path.add(s); Collections.reverse(path); return path; &#125; public boolean isHasNegativeCycle() &#123; return hasNegativeCycle; &#125;&#125; Floyed ç®—æ³•ä¸Šé¢çš„ä¸¤ä¸ªç®—æ³•è§£å†³çš„éƒ½æ˜¯å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œè€Œ Floyed ç®—æ³•è§£å†³çš„æ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­é—®é¢˜ã€‚æˆ‘ä»¬å…¶å®å¯ä»¥é€šè¿‡ä½¿ç”¨ $V$ æ¬¡ Dijkstra ç®—æ³•å°±å¯ä»¥æ±‚è§£æ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼Œä¸è¿‡ Dijkstra ç®—æ³•ä¸èƒ½å¤„ç†è´Ÿæƒè¾¹çš„é—®é¢˜ï¼Œè€Œ Floyed ç®—æ³•å¯ä»¥å¤„ç†è´Ÿæƒè¾¹çš„é—®é¢˜ã€‚ ä½†æ˜¯åŒ Bellman-Ford ç®—æ³•ä¸€æ ·ï¼Œå¦‚æœå›¾ä¸­å­˜åœ¨è´Ÿæƒç¯çš„è¯ï¼Œå°±æ ¹æœ¬ä¸å­˜åœ¨æœ€çŸ­è·¯å¾„ï¼Œè€Œæˆ‘ä»¬çŸ¥é“å¦‚æœæ— å‘å›¾ä¸­æœ‰è´Ÿæƒè¾¹çš„è¯ï¼Œå°±ç›¸å½“äºå­˜åœ¨è´Ÿæƒç¯ï¼Œæ‰€ä»¥ Floyed ç®—æ³•å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰å‘å›¾ç®—æ³•ã€‚ Floyed ç®—æ³•çš„æ€æƒ³ä¹Ÿå¾ˆç®€å•ï¼Œå¯¹äº v-wï¼Œå‡è®¾å®ƒä»¬ä¹‹é—´çš„æœ€çŸ­è·¯å¾„è¡¨ç¤ºä¸º dis[v][w]ï¼Œæ¯ä¸€æ¬¡éƒ½è¦å°è¯•ä¸€ä¸‹ç»•é“ç‚¹ t ä¼šä¸ä¼šå¾—åˆ°æ›´çŸ­çš„è·¯å¾„(t ä»èŠ‚ç‚¹ $0$ å–å€¼åˆ°èŠ‚ç‚¹ $V-1$)ï¼Œç›¸å½“äº for(int t = 0; t &lt; V; t++) &#123; dis[v][w] = Math.min(dis[v][t] + dis[t][w], dis[v][w])&#125; å½“ç»å†è¿‡ $V$ æ¬¡çš„ç»•é“å°è¯•åï¼Œæœ€ç»ˆ dis[v][w] å°±è¡¨ç¤ºèŠ‚ç‚¹ v ä¸èŠ‚ç‚¹ w ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚ å¦å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ Floyed ç®—æ³•å¯¹è´Ÿæƒç¯è¿›è¡Œæ£€æµ‹ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœæ²¡æœ‰è´Ÿæƒç¯çš„è¯ dis[v][v] çš„å€¼å§‹ç»ˆæ˜¯ 0ï¼Œå¦‚æœå­˜åœ¨è´Ÿæƒç¯çš„è¯ï¼Œé‚£ä¹ˆ dis[v][v] çš„å€¼å°±ä¼šæ›´æ–°ä¸ºå°äº 0 çš„å€¼ï¼Œåœ¨ç»è¿‡ $V$ æ¬¡ç»•é“ä¹‹åæ£€æŸ¥æ‰€æœ‰çš„ dis[v][v] æ˜¯å¦ç­‰äº 0 å³å¯çŸ¥é“å›¾ä¸­æ˜¯å¦æœ‰è´Ÿæƒç¯ã€‚ import java.util.Arrays;public class Floyed &#123; private WeightedGraph graph; private int[][] dis; private boolean hasNegativeCycle = false; public Floyed(WeightedGraph graph) &#123; this.graph = graph; this.dis = new int[graph.V()][graph.V()]; for (int i = 0; i &lt; dis.length; i++) &#123; Arrays.fill(dis[i], Integer.MAX_VALUE); &#125; // åˆå§‹åŒ– dis[][] for (int v = 0; v &lt; graph.V(); v++) &#123; dis[v][v] = 0; for (int w: graph.adj(v)) &#123; dis[v][w] = graph.getWeight(v, w); &#125; &#125; // ç»•é“å°è¯• for (int t = 0; t &lt; graph.V(); t++) &#123; for(int v = 0; v &lt; graph.V(); v++) &#123; for (int w = 0; w &lt; graph.V(); w++) &#123; if (!(dis[v][t] == Integer.MAX_VALUE || dis[t][w] == Integer.MAX_VALUE)) &#123; dis[v][w] = Math.min(dis[v][w], dis[v][t] + dis[t][w]); &#125; &#125; &#125; &#125; // æ£€æµ‹è´Ÿæƒç¯ for (int v = 0; v &lt; graph.V(); v++) &#123; if (dis[v][v] &lt; 0) &#123; hasNegativeCycle = true; &#125; &#125; &#125; public int dis(int v, int w) &#123; return dis[v][w]; &#125; public boolean isHasNegativeCycle() &#123; return hasNegativeCycle; &#125;&#125; Floyed ç®—æ³•ä¹Ÿæœ‰æ—¶ç§°ä¸º 3-for ç®—æ³•ï¼Œå› ä¸ºå®ƒçš„ç®—æ³•æ ¸å¿ƒå°±æ˜¯ä¸‰ä¸ªåµŒå¥—çš„ for å¾ªç¯ï¼ŒFloyed ç®—æ³•çš„å®ç°æ˜¯è¿™ä¸‰ä¸ªç®—æ³•ä¸­æœ€ç®€å•çš„ã€‚","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"æœ€å°ç”Ÿæˆæ ‘","date":"2021-01-26T08:32:00.000Z","path":"/æœ€å°ç”Ÿæˆæ ‘/","text":"å¸¦æƒå›¾åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œä»‹ç»çš„éƒ½æ˜¯æ— å‘æ— æƒå›¾ï¼Œé‚£æœ¬ç¯‡å¼€å§‹ä»‹ç»æ— å‘å¸¦æƒå›¾ å¦‚æœå°†ä¸Šè¿°çš„å›¾çœ‹åšæ˜¯ä¸€ä¸ªäº¤é€šç³»ç»Ÿçš„è¯ï¼Œé‚£ä¹ˆè¾¹çš„æƒé‡å°±å¯ä»¥ä»£è¡¨ä¸ºè·ç¦»ã€‚ä¸ºäº†è¡¨ç¤ºå¸¦æœ‰æƒé‡çš„å›¾ï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ª WeightedGraph ç±»æ¥è¡¨ç¤ºå¸¦æƒå›¾ã€‚ åŒæ— æƒå›¾ AdjSet ä¸€æ ·ï¼Œæˆ‘ä»¬ä»å¦‚ä¸‹æ ¼å¼çš„æ–‡ä»¶è¯»å–å†…å®¹ç”Ÿæˆå›¾ 7 120 1 20 3 70 5 21 2 11 3 41 4 31 5 52 4 42 5 43 4 13 6 54 6 7 ç¬¬ä¸€è¡Œ 7 è¡¨ç¤ºæ€»å…±æœ‰ 7 ä¸ªèŠ‚ç‚¹ï¼Œ12 è¡¨ç¤ºæœ‰ 12 æ¡ä»¶ï¼Œä¸‹é¢è¡¨ç¤ºä¸¤ä¸¤ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œä»¥åŠä¹‹é—´çš„æƒé‡ï¼Œä¾‹å¦‚ 0 1 2 è¡¨ç¤ºèŠ‚ç‚¹ 0 ä¸èŠ‚ç‚¹ 1 ç›¸é‚»ï¼Œä¹‹é—´çš„æƒé‡ä¸º 2ã€‚ WeightedGraph ç±»å¦‚ä¸‹ï¼Œä»£ç å¤§éƒ¨åˆ†åŒ AdjSet ç±»ï¼š import java.io.File;import java.util.HashMap;import java.util.Map;import java.util.Scanner;public class WeightedGraph&#123; private int V; private int E; // adj[i] æ˜¯ä¸€ä¸ª HashMapï¼Œé”®ä¸ºç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå€¼ä¸ºè¾¹ä¸Šçš„æƒé‡ private HashMap&lt;Integer, Integer&gt;[] adj; public WeightedGraph(String path) &#123; File file = new File(path); Scanner scanner = null; // ä» txt æ–‡ä»¶è¯»å–å»ºç«‹å›¾ï¼Œå¤§éƒ¨åˆ†åŒ AdjSet ç±» try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (V &lt; 0) &#123; throw new IllegalArgumentException(\"V can't be negative\"); &#125; adj = new HashMap[V]; for (int i = 0; i &lt; V; i++) &#123; adj[i] = new HashMap&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (E &lt; 0) &#123; throw new IllegalArgumentException(\"E can't be negative\"); &#125; for (int i = 0; i &lt; E; i++) &#123; int v = scanner.nextInt(); int w = scanner.nextInt(); int weight = scanner.nextInt(); if (v == w) &#123; throw new IllegalArgumentException(\"å­˜åœ¨è‡ªç¯è¾¹\"); &#125; if (adj[v].containsKey(w)) &#123; throw new IllegalArgumentException(\"å­˜åœ¨å¹³è¡Œè¾¹\"); &#125; adj[v].put(w, weight); adj[w].put(v, weight); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;finally &#123; scanner.close(); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public int getWeight(int v, int w) &#123; validateVertex(v); validateVertex(w); return adj[v].get(w); &#125; public int degree(int v) &#123; validateVertex(v); return adj[v].size(); &#125; public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return adj[v].containsKey(w); &#125; public Iterable&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return adj[v].keySet(); &#125; public void validateVertex(int v) &#123; if (v &lt; 0 &amp;&amp; v &gt;= V) &#123; throw new IllegalArgumentException(\"èŠ‚ç‚¹è¶…è¿‡ [0, V) çš„èŒƒå›´\"); &#125; &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (Map.Entry w: adj[v].entrySet()) &#123; stringBuilder.append(String.format(\"(%d: %d) \", w.getKey(), w.getValue())); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125;&#125; æœ€å°ç”Ÿæˆæ ‘é¦–å…ˆä»‹ç»ç”Ÿæˆæ ‘çš„æ¦‚å¿µï¼Œå‡è®¾å›¾ä¸­æœ‰ $V$ ä¸ªé¡¶ç‚¹ï¼Œå¦‚æœèƒ½æ‰¾åˆ°å›¾ä¸­ $V - 1$ æ¡è¾¹è¿™ $V$ ä¸ªèŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œé‚£ä¹ˆå°±è¯´è¿™ V ä¸ªèŠ‚ç‚¹ä¸ V - 1 æ¡è¾¹å½¢æˆçš„å›¾å«åšè¿™ä¸ªå›¾çš„ç”Ÿæˆæ ‘ã€‚ ä¾‹å¦‚å›¾çš„ DFS éå†ä»¥åŠ BFS éå†å°±ä¼šå½¢æˆä¸€ä¸ªç”Ÿæˆæ ‘ åªè¦å›¾ä¸­çš„ $V - 1$ æ¡è¾¹å°†å›¾ä¸­çš„ $V$ ä¸ªé¡¶ç‚¹è”é€šèµ·æ¥ï¼Œé‚£ä¹ˆå°±æ˜¯å›¾çš„ä¸€ä¸ªç”Ÿæˆæ ‘ï¼Œæ‰€ä»¥ä¸€ä¸ªå›¾æœ‰å¾ˆå¤šçš„ç”Ÿæˆæ ‘ï¼Œæ‰€è°“çš„æœ€å°ç”Ÿæˆæ ‘ï¼Œå°±æ˜¯ç”Ÿæˆæ ‘è¾¹ä¸Šçš„æƒå€¼åŠ èµ·æ¥æœ€å° é‚£ä¹ˆæœ€å°ç”Ÿæˆæ ‘æœ‰ä»€ä¹ˆåº”ç”¨å‘¢? å¦‚æœå°†è¿™ä¸ªå›¾çœ‹åšæ˜¯äº¤é€šç³»ç»Ÿï¼Œæ‰¾å‡ºæœ€å°ç”Ÿæˆæ ‘å°±æ˜¯æ‰¾åˆ°ä¸€ç§è€—è´¹æœ€ä½çš„æ–¹å¼å°†æ‰€æœ‰ç«™ç‚¹è¿é€šèµ·æ¥çš„å¸ƒå±€æ–¹æ¡ˆã€‚ åˆ‡åˆ†å®šç†ä¸‹é¢ä»‹ç»åˆ‡åˆ†å®šç†ï¼Œè¿™ä¸ªå®šç†è¢«ç”¨æ¥å¯»æ‰¾æœ€å°ç”Ÿæˆæ ‘ã€‚é¦–å…ˆä»€ä¹ˆå«åˆ‡åˆ†ï¼Œæ‰€è°“åˆ‡åˆ†å°±æ˜¯æŠŠèŠ‚ç‚¹åˆ†ä¸ºä¸¤éƒ¨åˆ† ä¸Šå›¾ä¸­èŠ‚ç‚¹ $0, 5, 4$ è¢«åˆ’åˆ†ä¸€éƒ¨åˆ†ï¼Œå…¶ä½™èŠ‚ç‚¹ä¸ºå¦ä¸€éƒ¨åˆ†ã€‚åˆ‡åˆ†çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œéšæ„ä½ è¿›è¡Œåˆ‡åˆ†ï¼Œåªè¦å°†å›¾ä¸­çš„èŠ‚ç‚¹åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†å³å¯ã€‚ å¼•å…¥äº†åˆ‡åˆ†çš„æ¦‚å¿µï¼Œä¸‹é¢ç»§ç»­å¼•å…¥æ¨ªåˆ‡è¾¹çš„æ¦‚å¿µã€‚æ‰€è°“çš„æ¨ªåˆ‡è¾¹æŒ‡çš„æ˜¯å°†ä¸¤ä¸ªä¸åŒéƒ¨åˆ†èŠ‚ç‚¹è¿æ¥èµ·æ¥çš„è¾¹ï¼Œä¾‹å¦‚å¯¹äºä¸Šé¢çš„åˆ’åˆ†ï¼Œæœ‰å¦‚ä¸‹æ¨ªåˆ‡è¾¹ ä¸Šé¢è¢«æ ‡è®°ä¸ºç»¿è‰²çš„è¾¹å°±æ˜¯æ¨ªåˆ‡è¾¹ï¼Œå¯ä»¥çœ‹åˆ°æ¨ªåˆ‡è¾¹çš„ä¸¤ç«¯æ˜¯ä¸¤ä¸ªä¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹ã€‚ ä»‹ç»å®Œå¿…é¡»çš„æ¦‚å¿µä¹‹åï¼Œå¼•å…¥åˆ‡åˆ†å®šç†ï¼š åˆ‡åˆ†å®šç†ï¼šå¯¹äºä»»æ„ä¸€ä¸ªåˆ‡åˆ†ï¼Œè¿™ç§åˆ‡åˆ†å½¢æˆçš„æ¨ªåˆ‡è¾¹ä¸­ï¼Œæƒå€¼æœ€å°çš„æ¨ªåˆ‡è¾¹ä¸€å®šåœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­ è¿™ä¸ªå®šç†å¾ˆå¥½è¯æ˜ï¼Œæˆ‘ä»¬æ ¹æ®åˆ‡åˆ†å°†å›¾åˆ†ä¸ºä¸¤éƒ¨åˆ† è¿™ä¸¤éƒ¨åˆ†ä¹‹é—´çš„è¾¹å°±æ˜¯æ¨ªåˆ‡è¾¹ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æ¨ªåˆ‡è¾¹å°†è¿™ä¸¤ä¸ªéƒ¨åˆ†è¿æ¥åœ¨äº†ä¸€èµ·ï¼Œä¸ºäº†ä½¿å¾—ç”Ÿæˆæ ‘è¿é€šï¼Œä¸€å®šè¦åœ¨æ¨ªåˆ‡è¾¹ä¸­é€‰æ‹©ä¸€æ¡è¾¹ï¼Œè€Œä¸ºäº†å¾—åˆ°æœ€å°ç”Ÿæˆæ ‘ï¼Œé‚£å½“ç„¶é€‰æ‹©çš„æ˜¯æƒå€¼æœ€å°çš„æ¨ªåˆ‡è¾¹ï¼Œæ‰€ä»¥è¯´æƒå€¼æœ€å°çš„æ¨ªåˆ‡è¾¹ä¸€å®šåœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚ Kruskal ç®—æ³•Kruskal ç®—æ³•æ˜¯æ±‚çš„æœ€å°ç”Ÿæˆæ ‘çš„ä¸€ç§ç®—æ³•ï¼Œä»–çš„æ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯æ¯æ¬¡å–å›¾ä¸­æœ€å°çš„è¾¹ï¼Œåªè¦è¿™æ¡è¾¹æ²¡æœ‰å·²ç»é€‰å–çš„è¾¹å½¢æˆç¯ã€‚ä¾‹å¦‚å¯¹äºä¸‹å›¾ é¦–å…ˆé€‰æ‹©å›¾ä¸­æœ€çŸ­çš„ä¸¤æ¡è¾¹ï¼Œå³æƒå€¼ä¸º 1 çš„ä¸¤æ¡è¾¹ 1-2 ä¸ 3-4 ä¸‹é¢ç»§ç»­é€‰æ‹©æƒå€¼æœ€å°çš„è¾¹ï¼Œé€‰æ‹© 0-5ã€0-1ï¼Œè¿™ä¸¤æ¡è¾¹çš„æƒå€¼ä¸º 2 ç»§ç»­é€‰æ‹©æƒå€¼æœ€å°çš„è¾¹ï¼Œæ­¤æ—¶é€‰æ‹© 1-4ï¼Œæƒå€¼ä¸º 3 ç»§ç»­é€‰æ‹©ï¼Œæ­¤æ—¶åº”è¯¥é€‰æ‹© 5-2 ä¸ 1-3 ä¸¤æ¡è¾¹ï¼Œå®ƒä»¬çš„æƒå€¼ä¸º 4ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°é€‰æ‹© 5-2 å°±ä¼šå½¢æˆä¸€ä¸ªç¯ï¼Œé€‰æ‹© 1-3 ä¹Ÿä¼šå½¢æˆç¯ï¼Œæ‰€ä»¥è¿™ä¸¤æ¡è¾¹ä¸èƒ½é€‰ï¼Œç”Ÿæˆæ ‘ä¸­å¯ä¸èƒ½æœ‰ç¯çš„ã€‚é™¤å¼€è¿™ä¸¤æ¡è¾¹ç»§ç»­é€‰æ‹©ï¼Œå‘ç° 5-1ã€3-6 è¿™ä¸¤æ¡è¾¹çš„æƒå€¼ä¸º 5ï¼Œæƒå€¼æœ€å°ï¼Œä½†æ˜¯é€‰æ‹© 5-1 å°±ä¼šå½¢æˆç¯ï¼Œæ‰€ä»¥ä¸é€‰ 5-1ï¼Œåªé€‰æ‹© 3-6 è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº† 6 æ¡è¾¹å°†è¿™ 7 ä¸ªé¡¶ç‚¹è¿æ¥èµ·æ¥ï¼Œå³æ‰¾åˆ°äº†ä¸€ä¸ªæœ€å°ç”Ÿæˆæ ‘ Kruskal çš„ç®—æ³•æ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯è´ªå¿ƒï¼Œæ¯æ¬¡é€‰æ‹©æƒé‡æœ€å°çš„è¾¹ï¼Œä½†æ˜¯æ€ä¹ˆè¯æ˜è¿™ç§è´ªå¿ƒç­–ç•¥æ˜¯å¯¹çš„ã€‚è¿™å°±éœ€è¦ç”¨åˆ°åˆ‡åˆ†å®šç†ã€‚ æ¯æ¬¡æˆ‘ä»¬é€‰æ‹©æœ€å°çš„è¾¹ï¼Œæˆ‘ä»¬åªéœ€è¦è®©è¿™æ¡è¾¹æ˜¯ä¸€ä¸ªåˆ‡åˆ†çš„æ¨ªåˆ‡è¾¹å°±è¡Œï¼Œè¿™ç§åˆ‡åˆ†å¾ˆå¥½åšï¼Œè®©è¿™æ¡è¾¹ä¸¤ä¸ªèŠ‚ç‚¹å±äºä¸åŒçš„éƒ¨åˆ†å³å¯ï¼Œæ ¹æ®åˆ‡åˆ†å®šç†è¿™æ¡æ¨ªåˆ‡è¾¹ä¸€å®šæ˜¯æœ€å°ç”Ÿæˆæ ‘ä¸­çš„ä¸€æ¡è¾¹ã€‚å¦‚æœè¿™æ¡è¾¹ä¸é€‰æ‹©çš„è¾¹å½¢æˆäº†ä¸€ä¸ªç¯ï¼Œè¿™è¯´æ˜æ‰¾ä¸åˆ°ä¸€ä¸ªåˆ‡åˆ†ï¼Œä½¿å¾—è¿™æ¡è¾¹çš„æ‰€æœ‰æ¨ªåˆ‡è¾¹ä¸­æœ€çŸ­çš„è¾¹ï¼Œæ‰€ä»¥ä¸èƒ½é€‰æ‹©å®ƒã€‚ åœ¨ä»£ç çš„å®ç°æ–¹å‘ï¼Œæ¯æ¬¡æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªæœ€çŸ­çš„è¾¹æ—¶ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦æ„æˆä¸€ä¸ªç¯ï¼Œä¾‹å¦‚æˆ‘ä»¬æ‰¾åˆ°è¾¹ 5-1ï¼Œéœ€è¦åˆ¤æ–­æ·»åŠ è¿™æ¡è¾¹æ˜¯å¦æ„æˆä¸€ä¸ªç¯ï¼Œå…¶å®å°±æ˜¯åœ¨æ£€æµ‹åœ¨æ·»åŠ è¿™æ¡è¾¹ä¹‹å‰èŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 æ˜¯å¦è¿é€šï¼Œå¦‚æœæ˜¯è¿é€šï¼Œæ·»åŠ è¿™æ¡è¾¹åå°±ä¼šå½¢æˆç¯ã€‚ æ¯æ¬¡éƒ½éœ€è¦åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹éœ€è¦è¿é€šï¼Œå¯ä»¥ä½¿ç”¨ DFS æ¥åšï¼Œä½†æ˜¯è¿™æ ·åšå¤æ‚åº¦å¤ªé«˜ï¼Œå€ŸåŠ©å¹¶æŸ¥é›†è¿™ç§æ•°æ®ç»“æ„å¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦è¿é€šï¼Œåªéœ€è¦åˆ¤æ–­å®ƒä»¬æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­å³å¯ï¼Œå¦‚æœå¯¹äºå¹¶æŸ¥é›†ä¸ç†Ÿï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ å¹¶æŸ¥é›†çš„å®ç°å¦‚ä¸‹ï¼š public class UnionFind &#123; private int[] parent; private int[] rank; public UnionFind(int size) &#123; parent = new int[size]; rank = new int[size]; for (int i = 0; i &lt; parent.length; i++) &#123; parent[i] = i; rank[i] = 1; &#125; &#125; public int getSize() &#123; return parent.length; &#125; private int find(int index) &#123; if (index &lt; 0 || index &gt;= parent.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; while (index != parent[index]) &#123; index = parent[index]; &#125; return index; &#125; public boolean isConnected(int p, int q) &#123; return find(p) == find(q); &#125; public void unionElements(int p, int q) &#123; int pRoot = find(p); int qRoot = find(q); if (pRoot == qRoot) &#123; return; &#125; if (rank[pRoot] &lt;= rank[qRoot])&#123; parent[pRoot] = parent[qRoot]; if (rank[pRoot] == rank[qRoot]) &#123; rank[qRoot]++; &#125; &#125; else &#123; parent[qRoot] = parent[pRoot]; &#125; &#125;&#125; æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»æ¥ä¿å­˜è¾¹çš„ä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª WeightedEdge ç±»ï¼š public class WeightedEdge &#123; private int v; private int w; private int weight; public WeightedEdge(int v, int w, int weight) &#123; this.v = v; this.w = w; this.weight = weight; &#125; public int getV() &#123; return v; &#125; public int getW() &#123; return w; &#125; public int getWeight() &#123; return weight; &#125; @Override public String toString() &#123; return String.format(\"(%d-%d: %d)\", v, w, weight); &#125;&#125; Kruskal ç®—æ³•å®ç°å¦‚ä¸‹ï¼š import java.util.ArrayList;import java.util.Collections;public class Kruskal &#123; private WeightedGraph graph; public ArrayList&lt;WeightedEdge&gt; result = new ArrayList&lt;&gt;(); public Kruskal(WeightedGraph graph) &#123; this.graph = graph; int V = graph.V(); // å°†æ‰€æœ‰çš„è¾¹æ·»åŠ è¿›é›†åˆä¸­ ArrayList&lt;WeightedEdge&gt; edges = new ArrayList&lt;&gt;(); for (int v = 0; v &lt; V; v++) &#123; for (int w: graph.adj(v)) &#123; if (v &lt; w) &#123; edges.add(new WeightedEdge(v, w, graph.getWeight(v, w))); &#125; &#125; &#125; // æ ¹æ®è¾¹çš„æƒå€¼å¤§å°ï¼Œä»å°åˆ°å¤§æ’åº Collections.sort(edges, (w1, w2) -&gt; w1.getWeight() - w2.getWeight()); UnionFind unionFind = new UnionFind(V); for (WeightedEdge edge: edges) &#123; int v = edge.getV(); int w = edge.getW(); // å¦‚æœä¹‹å‰ä¸è¿é€š if (!unionFind.isConnected(v, w)) &#123; result.add(edge); unionFind.unionElements(v, w); &#125; &#125; &#125; public Iterable&lt;WeightedEdge&gt; result() &#123; return result; &#125;&#125; Prim ç®—æ³•Prim ç®—æ³•ä¹Ÿæ˜¯æœ‰å…³æœ€å°ç”Ÿæˆæ ‘çš„ç®—æ³•ï¼Œå®ƒçš„æ€æƒ³åŒåˆ‡åˆ†å®šç†å¯†åˆ‡ç›¸å…³ã€‚å› ä¸ºå¯¹äºæ¯ä¸€ä¸ªåˆ‡åˆ†ï¼Œæƒå€¼æœ€å°çš„æ¨ªåˆ‡è¾¹ä¸€å®šåœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚Prim ç®—æ³•å°±åœ¨éå†èŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­ï¼Œå°†éå†åˆ°çš„èŠ‚ç‚¹ä¸æœªéå†çš„èŠ‚ç‚¹ä½œä¸ºä¸¤éƒ¨åˆ†å½¢æˆä¸€ä¸ªåˆ‡åˆ†ï¼Œç„¶åéå†æ­¤æ—¶æ‰€æœ‰çš„æ¨ªåˆ‡è¾¹ï¼Œåœ¨æ­¤è¾¹ä½œä¸ºæœ€å°ç”Ÿæˆæ ‘çš„ä¸€æ¡è¾¹ã€‚ æ¯æ¬¡éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹å³å¯æ‰¾åˆ°ä¸€æ¡æ¨ªåˆ‡è¾¹ï¼Œå½“éå†åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå°±èƒ½æ‰¾åˆ° $V-1$ æ¡è¾¹ï¼Œå³å¯å½¢æˆä¸€ä¸ªç”Ÿæˆæ ‘ï¼Œå¹¶ä¸”æ ¹æ®åˆ‡åˆ†å®šç†ï¼Œè¿™ä¸ªç”Ÿæˆæ ‘ä¸€å®šæ˜¯æœ€å°ç”Ÿæˆæ ‘ã€‚ Prim ç®—æ³•æœ€åçš„ç»“æœæ˜¯åŒ Kruskal ç®—æ³•ç›¸åŒçš„ã€‚ åœ¨ä»£ç çš„å®ç°æ–¹é¢ï¼Œå› ä¸ºæ¯æ¬¡äº§ç”Ÿä¸€æ¬¡æ–°çš„åˆ‡åˆ†ï¼Œéƒ½è¦æ‰¾åˆ°æ‰€æœ‰çš„æ¨ªåˆ‡è¾¹è¿›è¡Œéå†ç„¶åæ‰¾åˆ°æœ€å°çš„æ¨ªåˆ‡è¾¹ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—è¿›è¡Œå®ç°ã€‚ å½“éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ–°çš„æ¨ªåˆ‡è¾¹çš„äº§ç”Ÿéƒ½ä¸è¿™ä¸ªéå†åˆ°çš„èŠ‚ç‚¹ç›¸è¿ï¼Œæˆ‘ä»¬åªè¦å°†æ–°çš„æ¨ªåˆ‡è¾¹æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­å³å¯ï¼Œä¸ç”¨éå†èŠ‚ç‚¹å¯»æ‰¾æ‰€ä»¥çš„æ¨ªåˆ‡è¾¹ï¼Œå¦å¤–è¿™æ˜¯ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œå³é˜Ÿé¦–å…ƒç´ å®ƒçš„æƒé‡æ˜¯æœ€å°çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨æŸ¥æ‰¾æœ€å°è¾¹çš„ç‚’ä½œï¼Œç›´æ¥å–å‡ºé˜Ÿé¦–å…ƒç´ å³å¯ã€‚ å¦å¤–ï¼Œå¯èƒ½ä½ ä¼šæ³¨æ„åˆ°ï¼Œå½“éå†åˆ°ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ‡åˆ†æ—¶ï¼Œä¹‹å‰çš„æ¨ªåˆ‡è¾¹å¯èƒ½ä¸æ˜¯æ¨ªåˆ‡è¾¹äº†ï¼Œå³ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„è¾¹ä¸æ˜¯æ‰€æœ‰çš„è¾¹éƒ½æ˜¯æ¨ªåˆ‡è¾¹ã€‚ä»”ç»†æƒ³æƒ³ï¼Œè¿™ä¸ªå¹¶æ²¡æœ‰å½±å“ï¼Œå› ä¸ºè™½ç„¶ä¸æ˜¯æ‰€æœ‰çš„è¾¹éƒ½æ˜¯æ¨ªåˆ‡è¾¹ï¼Œä½†æ˜¯æ‰€æœ‰çš„æ¨ªåˆ‡è¾¹éƒ½åœ¨é˜Ÿåˆ—é‡Œï¼Œæˆ‘ä»¬ä»é˜Ÿåˆ—ä¸­å–å‡ºè¾¹æ—¶è¿›è¡Œåˆ¤æ–­ï¼Œä¸æ˜¯æ¨ªåˆ‡è¾¹ç›´æ¥å¿½ç•¥å³å¯ï¼Œå®Œå…¨ä¸å½±å“æˆ‘å¯»æ‰¾æœ€å°çš„æ¨ªåˆ‡è¾¹ã€‚ import java.util.ArrayList;import java.util.PriorityQueue;public class Prim &#123; private WeightedGraph graph; private boolean[] visited; private ArrayList&lt;WeightedEdge&gt; result = new ArrayList&lt;&gt;(); public Prim(WeightedGraph graph) &#123; this.graph = graph; PriorityQueue&lt;WeightedEdge&gt; priorityQueue = new PriorityQueue&lt;&gt;((w1, w2) -&gt; w1.getWeight() - w2.getWeight()); this.visited = new boolean[graph.V()]; visited[0] = true; for (int w: graph.adj(0)) &#123; priorityQueue.add(new WeightedEdge(0, w, graph.getWeight(0, w))); &#125; while (!priorityQueue.isEmpty()) &#123; WeightedEdge edge = priorityQueue.remove(); int v = edge.getV(); int w = edge.getW(); // ä¸æ˜¯æ¨ªåˆ‡è¾¹ç›´æ¥å¿½ç•¥ if (visited[v] &amp;&amp; visited[w]) &#123; continue; &#125; result.add(edge); visited[w] = true; // æ·»åŠ æ–°çš„æ¨ªåˆ‡è¾¹ for (int next: graph.adj(w)) &#123; priorityQueue.add(new WeightedEdge(w, next, graph.getWeight(w, next))); &#125; &#125; &#125; public Iterable&lt;WeightedEdge&gt; result() &#123; return result; &#125;&#125; å¦‚æœåœ¨å®é™…ä¸­éœ€è¦æ‰‹å†™æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ï¼Œæ¨èä½¿ç”¨ Prim ç®—æ³•ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°çš„è¯­è¨€æ ‡å‡†åº“ä¸­éƒ½æœ‰ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°ï¼Œä½†æ˜¯éƒ½æ²¡æœ‰å¹¶æŸ¥é›†çš„å®ç°ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨ Kruskal ç®—æ³•éœ€è¦æ‰‹å†™å¹¶æŸ¥é›†ã€‚","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"ES6ï¼šè§£æ„","date":"2021-01-26T07:11:00.000Z","path":"/ES6ï¼šè§£æ„/","text":"å½“æˆ‘ä»¬ä½¿ç”¨ Ajax å‘æœåŠ¡å™¨ç«¯è·å–æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨ä¸€èˆ¬ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ä»å¯¹è±¡ä¸­æå–å‡ºéœ€è¦çš„æ•°æ® const print = console.log;const data = &#123; type: 'male', name: 'Alice'&#125;// ä»å¯¹è±¡ä¸­æå–å‡ºæ•°æ®let type = data.type;let name = data.name;print(type); // maleprint(name); // Alice ä¸‹é¢çš„å†…å®¹è®²çš„æ˜¯ ES6 æä¾›æ–°çš„è¯­æ³•æ¥æ–¹ä¾¿çš„åšåˆ°è¿™ä»¶äº‹æƒ…ã€‚ å¯¹è±¡è§£æ„ä¸‹é¢çš„ä»£ç å¯ä»¥åšåˆ°å’Œä¸Šé¢ä¸€æ ·çš„äº‹æƒ… const print = console.log;const data = &#123; type: 'male', name: 'Alice'&#125;let &#123;type, name&#125;= data;print(type); // maleprint(name); // Alice ä¸Šé¢ä½¿ç”¨äº† let {name, type} = data æ¥è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¡Œä»£ç çš„æ„æ€å°±æ˜¯ä» data å¯¹è±¡ä¸­æå–å‡º name å’Œ type å±æ€§ï¼Œå¹¶ä¸”èµ‹å€¼åˆ°åä¸º name å’Œ type çš„æœ¬åœ°å˜é‡ä¸­ã€‚ é»˜è®¤å€¼è€ƒè™‘ä¸‹é¢çš„ä¾‹å­ let &#123;type, name, value&#125; = data;print(type); // maleprint(name); // Aliceprint(value); // undefined ä¸Šé¢å¢åŠ äº†ä¸€ä¸ª value å˜é‡ï¼Œæˆ‘ä»¬æƒ³ä» data é‡Œé¢æå–å‡º value å±æ€§ç»™å˜é‡ valueï¼Œä½†æ˜¯ data å¯¹è±¡å¹¶æ²¡æœ‰ value å±æ€§ï¼Œæ‰€ä»¥ value å˜é‡çš„å€¼æ˜¯ undefinedï¼Œç°åœ¨æˆ‘ä»¬å¸Œæœ›å¦‚æœ data é‡Œé¢æ²¡æœ‰ value å±æ€§çš„è¯ï¼Œç»™å˜é‡ value ä¸€ä¸ªé»˜è®¤å€¼ï¼Œé‚£ä¹ˆå¯ä»¥è¿™ä¹ˆå†™ let &#123;type, name, value = 0&#125; = data;print(type); // maleprint(name); // Aliceprint(value); // 0 å½“ data å¯¹è±¡æ²¡æœ‰ value å±æ€§ï¼Œæˆ–è€… value å±æ€§çš„å€¼ä¸º undefined æ—¶ï¼Œvalue å˜é‡å°±ä¼šä½¿ç”¨é»˜è®¤å€¼ 0ã€‚ èµ‹å€¼ç»™éåŒåå˜é‡let &#123;type, name&#125;= data; å‡ºäºæŸç§åŸå› ï¼Œæˆ‘ä»¬å¸Œæœ›å°† data.type å±æ€§çš„å€¼èµ‹å€¼ç»™ localType çš„å˜é‡è€Œä¸æ˜¯ type å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ let &#123;type: localType, name&#125; = data;print(localType); // maleprint(type); // ReferenceError: type is not defined ä¸Šé¢ä»£ç ä½œç”¨å°±æ˜¯æå– data å¯¹è±¡çš„ type å±æ€§ç»™å˜é‡ localTypeï¼Œæ¥ç€æˆ‘ä»¬åˆ†åˆ«æ‰“å°äº† localType å’Œ type å˜é‡çš„å€¼ï¼Œå‘ç°æœ¬åœ°æ ¹æœ¬æ²¡æœ‰ type å˜é‡ã€‚ åµŒå¥—å¯¹è±¡è§£æ„è€ƒè™‘ä¸€ä¸ªå¤æ‚ç»“æ„çš„å¯¹è±¡ const data = &#123; first: &#123; name: \"Alice\", age: 18 &#125;, second: &#123; name: \"Bob\", age: 3 &#125;&#125; æˆ‘ä»¬å¸Œæœ›å°† data.first.name èµ‹å€¼ä¸ºä¸€ä¸ªæœ¬åœ°å˜é‡ nameï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™ let &#123;first: &#123;name&#125;&#125; = data;print(name); // Alice å¦‚æœå¸Œæœ›å°† data.first.name èµ‹å€¼ä¸ºåˆ«çš„å˜é‡ï¼Œå¦‚ firstNameï¼Œé‚£ä¹ˆå¯ä»¥è¿™ä¹ˆå†™ let &#123;first: &#123;name: firstName&#125;&#125; = data;print(firstName) // Aliceprint(name); // ReferenceError: name is not defined æ•°ç»„è§£æ„æ•°ç»„è§£æ„çš„è¯­æ³•åŒå¯¹è±¡è§£æ„çš„è¯­æ³•ç›¸ä¼¼ï¼Œä¸è¿‡å¯¹è±¡è§£æ„æ˜¯æ ¹æ®åç§°è¿›è¡Œè§£æ„ï¼Œè€Œæ•°ç»„åˆ™æ˜¯æ ¹æ®ä¸‹æ ‡è§£æ„ const data = [\"red\", \"green\", \"blue\"];let [first, second] = data;print(first); // redprint(second); // green [first, second] = data æŒ‡çš„å°±æ˜¯å°† data æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼èµ‹å€¼ç»™å˜é‡ firstï¼Œç¬¬äºŒä¸ªå…ƒç´ çš„å€¼èµ‹å€¼ç»™å˜é‡ secondã€‚å¦‚æœå¸Œæœ›åªè·å¾—ç¬¬äºŒä¸ªå…ƒç´ çš„å€¼ï¼Œå¯ä»¥è¿™ä¹ˆå†™ let [, second] = data;print(second); // green é»˜è®¤å€¼const data = [\"red\"];let [first, second] = data;print(first); // redprint(second); // undefine å› ä¸ºæ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥ second å˜é‡çš„å€¼ä¸º undefinedï¼Œæˆ‘ä»¬å¸Œæœ›å¦‚æœæ•°ç»„ä¸ªæ•°ä¸è¶³æ—¶ï¼Œèƒ½ä¸º second èµ‹å€¼ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¯ä»¥é‡‡å–ä¸‹é¢çš„åŠæ³• const data = [\"red\"];let [first, second = \"white\"] = data;print(first); // redprint(second); // white å½“æ•°ç»„å€¼çš„ä¸ªæ•°ä¸è¶³æ—¶ï¼Œæˆ–è€…æ•°ç»„å…ƒç´ çš„å€¼ä¸º undefined æ—¶ï¼Œå°±ä½¿ç”¨é»˜è®¤å€¼ã€‚ åµŒå¥—æ•°ç»„è§£æ„å‡è®¾æœ‰å¦‚ä¸‹åµŒå¥—æ•°ç»„ const data = [\"red\", [\"white\", \"black\"], \"yellow\"]; ç°åœ¨å¸Œæœ›ä»é‡Œé¢è§£æ„å‡º whiteï¼Œå¯ä»¥è¿™ä¹ˆå†™ let [, [white]] = data;print(white); // white å…¶ä¸­ç¬¬ä¸€ä¸ª , è¡¨ç¤ºæˆ‘ä»¬ä¸éœ€è¦ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè€Œç¬¬äºŒä¸ª [white] è¡¨ç¤ºæˆ‘ä»¬è¦ç¬¬äºŒä¸ªå…ƒç´ é‡Œé¢çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ white å˜é‡ã€‚ å‰©ä½™é¡¹ä½¿ç”¨ ... è¯­æ³•å¯ä»¥è·å¾—æ•°ç»„ä¸­çš„å‰©ä½™é¡¹ï¼Œä¾‹å¦‚ let data = [\"red\", \"green\", \"blue\"];let [first, ...rest] = data;print(first); // redprint(rest); // [ 'green', 'blue' ] ä¸Šé¢çš„ [first, ...rest] = data è¡¨ç¤ºå°†ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼ç»™ first å˜é‡ï¼Œè€Œå‰©ä¸‹çš„å…ƒç´ èµ‹å€¼ç»™ rest å˜é‡ã€‚ä½¿ç”¨ ... çš„è¯­æ³•å¯ä»¥æ–¹ä¾¿çš„åšåˆ°æ•°ç»„çš„å¤åˆ¶ï¼Œå¦‚ const data = [\"red\", \"green\", \"blue\"];let [...copyData] = data;print(copyData); // [ 'red', 'green', 'blue' ] è§£æ„å‚æ•°ä¸‹é¢æ˜¯ä¸€ä¸ªå‘æœåŠ¡ç«¯å‘é€è¯·æ±‚çš„å‡½æ•° function getData(type, url, options) &#123; options = options || &#123;&#125;; let timeout = options.timeout, success = options.success; error = options.error; // dosomething&#125; é™¤äº†æ¥æ”¶ typeï¼Œurl ä¸¤ä¸ªå¿…é¡»çš„å‚æ•°ï¼Œè¿˜å¯ä»¥æ¥æ”¶ä¸€äº›é…ç½®é¡¹ç”± options å‚æ•°ç»™å‡ºï¼Œåœ¨å‡½æ•°ä¸­æˆ‘ä»¬å°† options çš„å±æ€§æå–å‡ºæ¥ç»™äº†ç‰¹å®šçš„å˜é‡ï¼Œå…¶å®ä¸Šé¢çš„æ“ä½œå¯ä»¥ç”±ä¸‹å†™æ³•åšåˆ° function getData(type, url, &#123;timeout, success, error&#125; = &#123;&#125;) &#123; print(timeout); // 5000 print(success); // [Function: success] print(error); // [Function: error] // dosomething&#125;getData(\"get\", \"http://localhost:4000\", &#123; timeout: 5000, success: function(data) &#123;&#125;, error: function(error) &#123;&#125;&#125;) æˆ‘ä»¬ä¼ å…¥çš„å¯¹è±¡ä¼šè¢«è§£æ„å…·ä½“çš„å‚æ•°ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨æ²¡æœ‰ç»™å‡ºé…ç½®é¡¹æ—¶ï¼Œå‚æ•°æœ‰é»˜è®¤å€¼ï¼Œä¾‹å¦‚ timeout å¦‚æœæ²¡æœ‰è¢«ç»™å‡ºçš„è¯ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒçš„å€¼æ˜¯ 3000ï¼Œæ ¹æ®è§£æ„çš„é»˜è®¤å€¼è¯­æ³•ï¼Œä¸éš¾å†™å‡ºå¦‚ä¸‹ function getData(type, url, &#123;timeout = 2000, success, error&#125; = &#123;&#125;) &#123; print(timeout); // 2000 print(success); // [Function: success] print(error); // [Function: error] // dosomething&#125;// æ²¡æœ‰ä¼ å…¥ timeout å‚æ•°getData(\"get\", \"http://localhost:4000\", &#123; success: function(data) &#123;&#125;, error: function(error) &#123;&#125;&#125;)","tags":[{"name":"è§£æ„","slug":"è§£æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E8%A7%A3%E6%9E%84/"}]},{"title":"æ¬§æ‹‰å›è·¯","date":"2021-01-25T07:43:00.000Z","path":"/æ¬§æ‹‰å›è·¯/","text":"æ¬§æ‹‰å›è·¯ä¸ƒæ¡¥é—®é¢˜18ä¸–çºªåˆæ™®é²å£«çš„å“¥å°¼æ–¯å ¡ï¼Œæœ‰ä¸€æ¡æ²³ç©¿è¿‡ï¼Œæ²³ä¸Šæœ‰ä¸¤ä¸ªå°å²›ï¼Œæœ‰ä¸ƒåº§æ¡¥æŠŠä¸¤ä¸ªå²›ä¸æ²³å²¸è”ç³»èµ·æ¥ï¼Œå¦‚ä¸‹å›¾(é»„è‰²çº¿æ¡ä»£è¡¨æ¡¥ï¼Œç»¿è‰²åŒºåŸŸä»£è¡¨å°å²›å’Œæ²³å²¸) æœ‰ä¸ªäººæå‡ºä¸€ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ­¥è¡Œè€…æ€æ ·æ‰èƒ½ä¸é‡å¤ã€ä¸é—æ¼åœ°ä¸€æ¬¡èµ°å®Œä¸ƒåº§æ¡¥ï¼Œæœ€åå›åˆ°å‡ºå‘ç‚¹ã€‚ æ•°å­¦å®¶æ¬§æ‹‰å°†æ²³å²¸ä¸å°å²›å»ºæ¨¡ä¸ºèŠ‚ç‚¹ï¼Œè€Œä¸ƒåº§æ¡¥å»ºæ¨¡ä¸ºè¾¹ï¼Œæ‰€ä»¥ä¸ƒæ¡¥é—®é¢˜å»ºæ¨¡ä¸ºä¸Šå›¾æœ€å³è¾¹çš„å›¾è®ºé—®é¢˜ï¼Œæ‰¾åˆ°å›¾ä¸­ç»è¿‡æ‰€æœ‰è¾¹ä¸€æ¬¡ä¸”å›åˆ°åŸç‚¹çš„å›è·¯ï¼Œè¿™ç§å›è·¯æˆ‘ä»¬åæ¥ç§°ä¸ºæ¬§æ‹‰å›è·¯ã€‚ æ¬§æ‹‰å›è·¯çš„æ•°å­¦æ€§è´¨ä¸Šè¿°çš„ä¸ƒæ¡¥é—®é¢˜å¾ˆé•¿æ—¶é—´éƒ½æ²¡æœ‰è§£å†³ï¼Œå³äººä»¬æ²¡æœ‰æ‰¾åˆ°ä¸€æ¡å›è·¯ï¼Œèƒ½å¤Ÿåªç»è¿‡æ¯åº§æ¡¥ä¸€æ¬¡ï¼Œç„¶åå›åˆ°åŸç‚¹ã€‚æ‰€ä»¥æ¬§æ‹‰å°±çŒœæƒ³æ˜¯ä¸æ˜¯æ ¹æœ¬ä¸å­˜åœ¨è¿™ç§å›è·¯ï¼Œç»è¿‡ä»–çš„è¯æ˜ï¼Œä¸Šè¿°ä¸ƒæ¡¥é—®é¢˜çš„ç¡®ä¸å­˜åœ¨æ¬§æ‹‰å›è·¯ã€‚ æ¬§æ‹‰è¯æ˜ååˆ†çš„ç®€å•ï¼Œå› ä¸ºè¦ä»èµ·ç‚¹å‡ºå‘å›åˆ°åŸç‚¹ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦ä¸€è¿›ä¸€å‡ºï¼Œè€Œæ¯æ¬¡è¿›å‡ºéœ€è¦æ¶ˆè€—ä¸¤æ¡è¾¹ï¼Œæ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»å…·æœ‰å¶æ•°æ¡è¾¹ï¼Œå®ƒæ‰èƒ½ä¿è¯æœ‰è¿›æœ‰å‡ºï¼Œæ‰æœ‰å¯èƒ½å›åˆ°åŸç‚¹ã€‚æ‰€ä»¥å°±å¾—åˆ°äº†æ¬§æ‹‰å›è·¯ä¸€ä¸ªå……åˆ†å¿…è¦æ¡ä»¶ï¼š æ¯ä¸ªèŠ‚ç‚¹çš„åº¦éƒ½æ˜¯å¶æ•° $\\Leftrightarrow$ å›¾ä¸­å­˜åœ¨æ¬§æ‹‰å›è·¯ æ¯ä¸ªèŠ‚ç‚¹çš„åº¦éƒ½æ˜¯å¶æ•°æ˜¯å›¾ä¸­å­˜åœ¨æ¬§æ‹‰å›è·¯æ˜¯å……åˆ†å¿…è¦æ¡ä»¶ï¼ŒäºŒè€…å¯ä»¥äº’æ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åˆ¤æ–­å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„åº¦æ˜¯ä¸æ˜¯å¶æ•°å³å¯å¾—åˆ°å›¾ä¸­æ˜¯å¦æœ‰æ¬§æ‹‰å›è·¯è¿™ä¸ªç»“è®ºã€‚ å›åˆ°ä¸ƒæ¡¥é—®é¢˜ï¼Œè§‚å¯Ÿå›¾ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå‘ç°å®ƒä»¬çš„åº¦éƒ½ä¸æ˜¯å¶æ•°ï¼Œæ‰€ä»¥ç»å¯¹ä¸å¯èƒ½ä»æŸç‚¹å‡ºå‘ï¼Œç»è¿‡æ‰€ä»¥çš„è¾¹ä¸€æ¬¡ç„¶åå›åˆ°åŸç‚¹ï¼Œè‡³æ­¤æ¬§æ‹‰å®Œç¾çš„è§£å†³äº†ä¸ƒæ¡¥é—®é¢˜ï¼Œå›¾è®ºé¢†åŸŸä¹Ÿæ˜¯ä»æ­¤å¼€å§‹å‘å±•ã€‚ ä¸‹é¢æ˜¯åˆ¤æ–­æ¬§æ‹‰å›è·¯æ˜¯å¦å­˜åœ¨çš„ä»£ç ï¼š public class EulerCycle &#123; private Graph graph; public EulerCycle(Graph graph) &#123; this.graph = graph; &#125; public boolean hasEulerCycle() &#123; // å¦‚æœå›¾ä¸­ä¸åªä¸€ä¸ªè”é€šåˆ†é‡çš„è¯ï¼Œè¯´æ˜è‚¯å®šæ²¡æœ‰æ¬§æ‹‰å›è·¯ CCGraph ccGraph = new CCGraph(graph); if (ccGraph.getCCcount() != 1) &#123; return false; &#125; for (int i = 0; i &lt; graph.V(); i++) &#123; if (graph.degree(i) % 2 != 0) &#123; return false; &#125; &#125; return true; &#125;&#125; æ±‚è§£æ¬§æ‹‰å›è·¯ä¸Šé¢æˆ‘ä»¬åªæ˜¯åˆ¤æ–­å›¾ä¸­æ¬§æ‹‰å›è·¯æ˜¯å¦å­˜åœ¨ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰å¾—åˆ°ä¸€ä¸ªå…·ä½“çš„æ¬§æ‹‰å›è·¯ï¼Œæ‰€ä»¥åœ¨æœ¬èŠ‚ä¸­ä»‹ç»ä¸‰ç§æ–¹æ³•å¾—åˆ°æ¬§æ‹‰å›è·¯ã€‚ å›æº¯æ³•å›æº¯æ³•å°±æ˜¯æš´åŠ›æœç´¢æ³•ï¼Œæœç´¢ä»èµ·ç‚¹å‡ºå‘çš„æ‰€æœ‰è·¯å¾„ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€æ¡æ¬§æ‹‰å›è·¯ Fleury ç®—æ³•è€ƒè™‘ä¸‹å›¾ï¼Œå½“æˆ‘ä»¬ä»èŠ‚ç‚¹ 0 æ¥åˆ°èŠ‚ç‚¹ 2 æ—¶ å¯¹äºå›æº¯æ³•ï¼Œå¯ä»¥é€‰æ‹©éå†èŠ‚ç‚¹ 1ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©éå†èŠ‚ç‚¹ 3ï¼Œè€Œ Fleury ç®—æ³•å´ä¼šé€‰æ‹©æ¥ä¸‹æ¥éå†èŠ‚ç‚¹ 3 è€Œä¸æ˜¯èŠ‚ç‚¹ 1ï¼Œå› ä¸ºè¾¹ 2-1 å®ƒæ˜¯ä¸€ä¸ªæ¡¥ï¼Œå¦‚æœé€‰æ‹©éå†èŠ‚ç‚¹ 1ï¼Œå°±ä¸å¯èƒ½å†æ¬¡å›åˆ°èŠ‚ç‚¹ 2ï¼Œå³èŠ‚ç‚¹ 2 å³è¾¹çš„è¾¹ 2-3 2-4 ä¸å¯èƒ½è¢«è®¿é—®åˆ°ï¼Œæ‰€ä»¥ Fleury ç®—æ³•çš„ç­–ç•¥å°±æ˜¯åœ¨éå†è¾¹å‰åˆ¤æ–­è¿™æ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥ï¼Œå¦‚æœæ˜¯æ¡¥çš„è¯ï¼Œå°±ä¸éå†è¿™æ¡è¾¹ï¼Œé€‰æ‹©å…¶ä»–çš„è¾¹ã€‚ Hierholzer ç®—æ³• ä¸Šå›¾æ¯ä¸ªèŠ‚ç‚¹çš„åº¦éƒ½æ˜¯å¶æ•°ï¼Œæ‰€ä»¥è¯¥å›¾ä¸€å®šæœ‰æ¬§æ‹‰å›è·¯ã€‚Hierholzer ç®—æ³•é¦–å…ˆåœ¨å›¾ä¸­éšä¾¿æ‰¾åˆ°ä¸€ä¸ªç¯ è¿™ä¸ªç¯å¦‚æœæ˜¯æ¬§æ‹‰å›è·¯ï¼Œé‚£å°±æ‰¾åˆ°äº†ï¼›å¦‚æœä¸æ˜¯æ¬§æ‹‰å›è·¯ï¼Œä¾‹å¦‚ä¸Šé¢æ‰¾åˆ°ç¯ $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 0$ï¼Œå®ƒä¸æ˜¯æ¬§æ‹‰å›è·¯ï¼Œä¸­é—´ç¼ºå¤±äº†ä¸€ç¯ï¼Œå› ä¸ºèŠ‚ç‚¹ 2 è¿˜ä¸åˆ«çš„èŠ‚ç‚¹ç›¸è¿ï¼Œä¸Šè¿°é“¾ä¸­çš„ $2$ åº”è¯¥å˜ä¸º $2 \\rightarrow â€¦ \\rightarrow 2 $ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å›é€€åˆ°èŠ‚ç‚¹ 2 å¼€å§‹å¯»æ‰¾è¿™ä¸ªç¯ã€‚ æ¯”å¦‚æˆ‘ä»¬ç»§ç»­æ‰¾åˆ°äº† $2 \\rightarrow 4 \\rightarrow 5 \\rightarrow 2$ è¿™ä¸ªç¯ ä½†æ˜¯å› ä¸º $5$ è¿˜ä¸åˆ«çš„èŠ‚ç‚¹ç›¸è¿ï¼Œæ‰€ä»¥ $5$ åº”è¯¥è¢«æ‰©å±•ä¸º $5 \\rightarrow â€¦ \\rightarrow 5$ï¼Œæ‰€ä»¥åˆéœ€è¦å›é€€åˆ°èŠ‚ç‚¹ 5 å¼€å§‹å¯»æ‰¾æ–°çš„ç¯ æœ€ç»ˆæˆ‘ä»¬æ‰¾åˆ°äº†ç¯ $5 \\rightarrow 6 \\rightarrow 7 \\rightarrow 8 \\rightarrow 5$ï¼Œå°†è¿™ä¸ªç»“æœæ›¿æ¢ $2 \\rightarrow 4 \\rightarrow 5 \\rightarrow 2$ å…¶ä¸­çš„ $5$ï¼Œå¾—åˆ° $2 \\rightarrow 4 \\rightarrow 5 \\rightarrow 6 \\rightarrow 7 \\rightarrow 8 \\rightarrow 5 \\rightarrow 2$ï¼Œæœ€åå°†è¿™ä¸ªç»“æœç¯æ›¿æ¢ $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3 \\rightarrow 0$ å…¶ä¸­çš„ $2$ï¼Œç»“æœå˜ä¸º $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 4 \\rightarrow 5 \\rightarrow 6 \\rightarrow 7 \\rightarrow 8 \\rightarrow 5 \\rightarrow 2 \\rightarrow 3 \\rightarrow 0$ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ˆæ¥æ¨¡æ‹Ÿä¸Šé¢çš„å›é€€åŠ¨ä½œï¼Œå½“æˆ‘ä»¬éå†ç¯æ—¶ï¼Œå°†èŠ‚ç‚¹æ·»åŠ è¿›æ ˆ resultä¸­ï¼Œå½“æˆ‘ä»¬å‘ç°æ¥åˆ°æŸä¸ªèŠ‚ç‚¹ä¸èƒ½ç»§ç»­éå†å¹¶ä¸”è¿˜æœ‰è¾¹æœªè¢«éå†æ—¶ï¼Œæˆ‘ä»¬ä¾¿è¿›è¡Œå›é€€ï¼Œä»æ ˆä¸­å¼¹å‡ºå…ƒç´ ï¼Œç›´åˆ°æ ˆé¡¶èŠ‚ç‚¹è¿˜ä¸å…¶ä»–èŠ‚ç‚¹ç›¸è¿ï¼Œä»è¯¥èŠ‚ç‚¹å¼€å§‹å¯»æ‰¾æ–°çš„ç¯ã€‚æˆ‘ä»¬ä¼šå°†ä»æ ˆä¸­å¼¹å‡ºçš„èŠ‚ç‚¹æ·»åŠ åˆ°å¦ä¸€ä¸ªæ ˆ back ä¸­ï¼Œå½“æˆ‘ä»¬éå†å®Œæ‰€æœ‰çš„è¾¹æ—¶åœ¨å°† back è¿™ä¸ªæ ˆä¸­çš„èŠ‚ç‚¹ä¾æ¬¡å¼¹å…¥åˆ° result è¿™ä¸ªæ ˆä¸­ å› ä¸ºä¸Šé¢æœ‰åˆ è¾¹çš„åŠ¨ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ Graph æ¥å£æ·»åŠ äº†ä¸€ä¸ª removeEdge(int v, int w)ï¼Œä½œç”¨å°±æ˜¯å°† v-w è¿™æ¡è¾¹åˆ é™¤ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ @Overridepublic void removeEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); sets[v].remove(w); sets[w].remove(v);&#125; Hierholzer ç®—æ³•çš„å®ç°å¦‚ä¸‹ import java.util.ArrayList;import java.util.Collections;import java.util.Stack;public class EulerCycle &#123; private Graph graph; public EulerCycle(Graph graph) &#123; this.graph = graph; &#125; public boolean hasEulerCycle() &#123; CCGraph ccGraph = new CCGraph(graph); if (ccGraph.getCCcount() != 1) &#123; return false; &#125; for (int i = 0; i &lt; graph.V(); i++) &#123; if (graph.degree(i) % 2 != 0) &#123; return false; &#125; &#125; return true; &#125; public Iterable&lt;Integer&gt; result() &#123; ArrayList res = new ArrayList(); if (!hasEulerCycle()) return res; // å‰©ä½™æœªè¢«éå†çš„è¾¹æ•° int left = graph.E(); Stack&lt;Integer&gt; result = new Stack&lt;&gt;(); Stack&lt;Integer&gt; back = new Stack&lt;&gt;(); int curV = 0; result.push(curV); // è¿˜æœ‰è¾¹æœªè¢«éå†å°±ç»§ç»­éå† while (left != 0) &#123; // æ¯æ¬¡æ›´æ–° curV ä¸ºæ ˆé¡¶èŠ‚ç‚¹ curV = result.peek(); // å¦‚æœæ ˆé¡¶å…ƒç´ æœ‰ç›¸é‚»èŠ‚ç‚¹ï¼Œä»æ­¤å¯»æ‰¾æ–°çš„ç¯ if (graph.degree(curV) != 0) &#123; // è·å¾—ä¸€ä¸ªç›¸é‚»èŠ‚ç‚¹ int w = graph.adj(curV).iterator().next(); result.push(w); graph.removeEdge(curV, w); left--; &#125; else &#123; // æ²¡æœ‰ç›¸é‚»èŠ‚ç‚¹ï¼Œè¿›è¡Œå›æº¯ back.push(result.pop()); &#125; &#125; // å°† back æ ˆä¸­çš„æ•°æ®ä¾æ¬¡å¼¹å‡ºåˆ° result while (!back.isEmpty()) &#123; result.push(back.pop()); &#125; // å°†æ ˆä¸­å…ƒç´ å¼¹å‡ºåˆ° list ä¸­ while (!result.isEmpty()) &#123; res.add(result.pop()); &#125; Collections.reverse(res); return res; &#125;&#125; éªŒè¯ç®—æ³•æ˜¯å¦æ­£ç¡®ï¼Œæ–°å»º g11.txtï¼Œå†…å®¹å¦‚ä¸‹ 9 110 10 31 22 32 42 54 55 65 86 77 8 æ‰€è¡¨ç¤ºçš„å›¾å°±æ˜¯ç¤ºä¾‹ä¸­çš„å›¾ æµ‹è¯•å¦‚ä¸‹ public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g11.txt\"); EulerCycle eulerCycle = new EulerCycle(graph); for (int w: eulerCycle.result()) &#123; System.out.print(w + \" \"); &#125;&#125; è¾“å‡ºä¸º 0 1 2 4 5 6 7 8 5 2 3 0 ä¸æˆ‘ä»¬è®¨è®ºçš„ç»“æœä¸€è‡´ã€‚","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"å“ˆå¯†å°”é¡¿å›è·¯ä¸å“ˆå¯†å°”é¡¿è·¯å¾„","date":"2021-01-24T18:16:00.000Z","path":"/å“ˆå¯†å°”é¡¿å›è·¯/","text":"å“ˆå¯†å°”é¡¿å›è·¯1859å¹´ï¼Œçˆ±å°”å…°æ•°å­¦å®¶å“ˆå¯†å°”é¡¿ï¼ˆHamiltonï¼‰æå‡ºä¸‹åˆ—å‘¨æ¸¸ä¸–ç•Œçš„æ¸¸æˆï¼šåœ¨æ­£åäºŒé¢ä½“çš„äºŒåä¸ªé¡¶ç‚¹ä¸Šä¾æ¬¡æ ‡è®°ä¼¦æ•¦ã€å·´é»ã€è«æ–¯ç§‘ç­‰ä¸–ç•Œè‘—åå¤§åŸå¸‚ï¼Œæ­£åäºŒé¢ä½“çš„æ£±è¡¨ç¤ºè¿æ¥è¿™äº›åŸå¸‚çš„è·¯çº¿ã€‚è¯•é—®èƒ½å¦åœ¨å›¾ä¸­åšä¸€æ¬¡æ—…è¡Œï¼Œä»é¡¶ç‚¹åˆ°é¡¶ç‚¹ï¼Œæ²¿ç€è¾¹è¡Œèµ°ï¼Œç»è¿‡æ¯ä¸ªåŸå¸‚æ°å¥½ä¸€æ¬¡ä¹‹åå†å›åˆ°å‡ºå‘ç‚¹ã€‚ å°†ä¸Šé¢çš„é—®é¢˜æŠ½è±¡ä¸ºä¸€ä¸ªå›¾è®ºé—®é¢˜ï¼šå¦‚æœæˆ‘ä»¬èƒ½ä»å›¾çš„æŸç‚¹å‡ºå‘ï¼Œç»è¿‡æ‰€æœ‰çš„èŠ‚ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡ï¼Œå¹¶ä¸”å›åˆ°åŸç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¯´å›¾ä¸­å­˜åœ¨å“ˆå¯†å°”é¡¿å›è·¯ã€‚ å“ˆå¯†å°”é¡¿å›è·¯åœ¨æ•°å­¦ä¸Šå¹¶æ²¡æœ‰æ‰¾åˆ°å……åˆ†å¿…è¦æ¡ä»¶ï¼Œæ‰€è°“å……åˆ†å¿…è¦æ¡ä»¶æŒ‡çš„æ˜¯ï¼Œå¦‚æœå›¾æ»¡è¶³ä»€ä¹ˆæ€§è´¨å®ƒå°±æœ‰å“ˆå¯†å°”é¡¿å›è·¯ä»¥åŠä¸€æ—¦å›¾æœ‰å“ˆå¯†å°”é¡¿å›è·¯è¿™ä¸ªå›¾å°±æ»¡è¶³ä»€ä¹ˆæ€§è´¨ã€‚æ‰€ä»¥æˆ‘ä»¬åˆ¤æ–­åˆ¤æ–­æŸä¸ªå›¾æ˜¯å¦æ˜¯å“ˆå¯†å°”é¡¿å›¾ï¼ŒåŠæ³•å°±æ˜¯æš´åŠ›æœç´¢ï¼Œä½¿ç”¨å›æº¯æ³•å»æœç´¢å›¾ã€‚ import java.util.ArrayList;import java.util.Collections;public class HamiltonCycle &#123; private Graph graph; private boolean[] visited; // è¿˜æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹æœªè®¿é—®ï¼Œå½“ left == 0 æ—¶è¡¨ç¤ºæ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«è®¿é—®è¿‡ private int left; // å½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå·²è·å¾—è·¯å¾„ private int[] pre; // æœ€åä¸€ä¸ªè¢«è®¿é—®çš„èŠ‚ç‚¹ private int end; public HamiltonCycle(Graph graph) &#123; this.graph = graph; this.visited = new boolean[graph.V()]; this.left = graph.V(); this.pre = new int[graph.V()]; this.end = -1; pre[0] = 0; dfs(0); &#125; // dfs è®¾æœ‰è¿”å›å€¼ï¼Œå½“æ‰¾åˆ°å“ˆå¯†å°”é¡¿å›è·¯æ—¶ï¼Œæå‰ç»ˆæ­¢ private boolean dfs(int v) &#123; visited[v] = true; left--; if (left == 0 &amp;&amp; graph.hasEdge(v, 0)) &#123; end = v; return true; &#125; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; pre[w] = v; if (dfs(w)) return true; &#125; &#125; visited[v] = false; left++; return false; &#125; public Iterable&lt;Integer&gt; result() &#123; ArrayList result = new ArrayList(); if (end == -1) &#123; return result; &#125; int cur = end; while (cur != 0) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(0); Collections.reverse(result); return result; &#125;&#125; çŠ¶æ€å‹ç¼©å¯¹å›¾è¿›è¡Œæš´åŠ›æœç´¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n!)$ï¼Œæ‰€ä»¥æš´åŠ›æœç´¢å›¾åªé€‚åˆå›¾çš„è§„æ¨¡ä¸å¤§çš„æƒ…å†µï¼Œå½“å›¾çš„è§„æ¨¡ä¸å¤§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ visited æ•°ç»„è¿›è¡Œå‹ç¼©ï¼Œä½¿ç”¨ä¸€ä¸ªæ•´æ•°æ¥è¡¨ç¤ºå›¾ä¸­ä¸ªèŠ‚ç‚¹çš„è®¿é—®çŠ¶æ€ï¼Œå…·ä½“å°±æ˜¯æ ¹æ®è¿™ä¸ªæ•°å­—çš„äºŒè¿›åˆ¶ä½ä¸º 0 è¿˜æ˜¯ä¸º 1 æ¥è¡¨ç¤ºæ˜¯å¦è¢«è®¿é—®è¿‡ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨ int ç±»å‹æ¥ä¿å­˜ visited å˜é‡ï¼Œint ç±»å‹å æ® 4 ä¸ªå­—èŠ‚ï¼Œå³ 32 ä½ï¼Œç¬¬ä¸€ä½æ˜¯ç¬¦å·ä½ï¼Œæ•…å¯ä»¥è®¤ä¸ºå¯ä»¥è¡¨ç¤º 31 ä¸ªèŠ‚ç‚¹è®¿é—®çŠ¶æ€ï¼Œå¦‚æœ visited = 1ï¼ŒäºŒè¿›åˆ¶å°±æ˜¯ 00000000 00000000 00000000 00000001ï¼Œä»å³å¾€å·¦æ•°ç¬¬ 0 ä¸ªæ•°æ˜¯ 1ï¼Œå°±è¡¨ç¤ºèŠ‚ç‚¹ 0 è¢«è®¿é—®è¿‡äº†ï¼Œå…¶ä»–æ•°å­—éƒ½æ˜¯ 0ï¼Œè¡¨ç¤ºå…¶ä»–èŠ‚ç‚¹æ²¡æœ‰è¢«è®¿é—®è¿‡ã€‚ è§‚å¯Ÿä¸Šé¢çš„ç¨‹åºï¼Œæˆ‘ä»¬å¯¹ visited æœ‰ä¸‰ç§æ“ä½œï¼š åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æœ‰æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œä¾‹å¦‚åˆ¤æ–­èŠ‚ç‚¹ i æœ‰æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œåªè¦ $2^i$ å’Œ visited ç›¸ä¸å³å¯çŸ¥é“ï¼Œå¦‚æœç»“æœä¸º 1ï¼Œè¯´æ˜ç¬¬ i ä½ä¸º 1ï¼Œå³èŠ‚ç‚¹ i è¢«è®¿é—®è¿‡ï¼Œå¦åˆ™å°±æ˜¯æœªè¢«è®¿é—®è¿‡ å°†èŠ‚ç‚¹ i è®¾ç½®ä¸ºè¢«è®¿é—®è¿‡(visited[i] = true)ï¼Œä¹Ÿå°±æ˜¯å°†ç¬¬ i ä¸ªä½ç½®ç”± 0 å˜ä¸º 1ï¼Œå°±æ˜¯å°† $2^i$ ä¸ visited å¼‚æˆ–å³å¯ å°†èŠ‚ç‚¹ i è®¾ç½®ä¸ºæœªè¢«è®¿é—®è¿‡(visited[i] = false)ï¼Œä¹Ÿå°±æ˜¯å°†ç¬¬ i ä¸ªä½ç½®ç”± 1 å˜ä¸º 0ï¼Œè¿˜æ˜¯å°† $2^i$ ä¸ visited å¼‚æˆ–å³å¯ æ³¨æ„ $2^i$ å¯ä»¥è¡¨ç¤ºä¸º 1 &lt;&lt; i æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„ç¨‹åºï¼Œå°† visited æ•°ç»„å˜ä¸ºä¸€ä¸ªæ•°å­— public class HamiltonCircleCompress &#123; private Graph graph; private int visited; private int left; private int[] pre; private int end; // ä¸å˜ public HamiltonCircleCompress(Graph graph) &#123; this.graph = graph; this.visited = 0; this.left = graph.V(); this.pre = new int[graph.V()]; this.end = -1; pre[0] = 0; dfs(0); &#125; private boolean dfs(int v) &#123; // è®¾ç½® visited[v] ä¸º true visited = visited ^ (1 &lt;&lt; v); left--; if (left == 0 &amp;&amp; graph.hasEdge(v, 0)) &#123; end = v; return true; &#125; for (int w: graph.adj(v)) &#123; // åˆ¤æ–­ visited[w] æ˜¯å¦è®¿é—®è¿‡ if ((visited &amp; (1 &lt;&lt; w)) == 0) &#123; pre[w] = v; if (dfs(w)) return true; &#125; &#125; // è®¾ç½® visited[v] ä¸º false visited = visited ^ (1 &lt;&lt; v); left++; return false; &#125; // ä¸å˜ public Iterable&lt;Integer&gt; result() &#123; ArrayList result = new ArrayList(); if (end == -1) &#123; return result; &#125; int cur = end; while (cur != 0) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(0); Collections.reverse(result); return result; &#125;&#125; å“ˆå¯†å°”é¡¿è·¯å¾„å“ˆå¯†å°”é¡¿è·¯å¾„çš„å®šä¹‰åŒå“ˆå¯†å°”é¡¿å›è·¯ç›¸ä¼¼ï¼Œå¦‚æœä»å›¾ä¸­çš„æŸä¸€ç‚¹å‡ºå‘ï¼Œèƒ½å¤Ÿç»è¿‡å›¾ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡ï¼Œé‚£ä¹ˆè¿™æ¡è·¯å¾„å°±æ˜¯å“ˆå¯†å°”é¡¿è·¯å¾„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå›¾ä¸­æ˜¯å¦å­˜åœ¨å“ˆå¯†å°”é¡¿å›è·¯ä¸èµ·å§‹ç‚¹æ— å…³ï¼Œä½†æ˜¯å“ˆå¯†å°”é¡¿è·¯å¾„ä¸èµ·å§‹ç‚¹æœ‰å…³ï¼Œå¯èƒ½ä»æŸç‚¹å‡ºå‘ï¼Œå¹¶ä¸èƒ½èµ°è¿‡æ¯ä¸€èŠ‚ç‚¹ï¼Œä½†æ˜¯ä»å¦ä¸€ä¸ªèŠ‚ç‚¹å‡ºå‘ï¼Œå´èƒ½å¤Ÿèµ°è¿‡æ‰€æœ‰èŠ‚ç‚¹ï¼Œä¸”åªç»è¿‡ä¸€æ¬¡ã€‚ å“ˆå¯†å°”é¡¿è·¯å¾„çš„ä»£ç åŒå“ˆå¯†å°”é¡¿å›è·¯çš„ä»£ç ç›¸ä¼¼ï¼Œåªæœ‰ä¸¤å¤„ä¸åŒï¼š éœ€è¦ä¼ å…¥èµ·å§‹ç‚¹ å½“ left ä¸º 0 æ—¶ï¼Œä¸ç”¨åˆ¤æ–­æœ€åèŠ‚ç‚¹æ˜¯å¦ä¸èµ·å§‹ç‚¹ç›¸é‚»ï¼Œå› ä¸ºå“ˆå¯†å°”é¡¿è·¯å¾„ä¸è¦æ±‚å›åˆ°èµ·å§‹ç‚¹ ä»£ç å¦‚ä¸‹ import java.util.ArrayList;import java.util.Collections;public class HamiltonPath &#123; private Graph graph; private boolean[] visited; private int left; private int[] pre; private int end; // èµ·å§‹ç‚¹ private int s; public HamiltonPath(Graph graph, int s) &#123; this.graph = graph; this.s = s; this.visited = new boolean[graph.V()]; this.left = graph.V(); this.pre = new int[graph.V()]; this.end = -1; pre[0] = 0; dfs(s); &#125; private boolean dfs(int v) &#123; visited[v] = true; left--; // ä¸ç”¨åˆ¤æ–­ v æ˜¯å¦ä¸èµ·å§‹ç‚¹ç›¸é‚» if (left == 0) &#123; end = v; return true; &#125; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; pre[w] = v; if (dfs(w)) return true; &#125; &#125; visited[v] = false; left++; return false; &#125; public Iterable&lt;Integer&gt; result() &#123; ArrayList result = new ArrayList(); if (end == -1) &#123; return result; &#125; int cur = end; while (cur != 0) &#123; result.add(cur); cur = pre[cur]; &#125; result.add(0); Collections.reverse(result); return result; &#125;&#125; ä¸åŒè·¯å¾„ IIIè¿™æ˜¯ä¸€é“ LeetCode ä¸Šçš„é¢˜ç›®ï¼Œå®ƒçš„æœ¬è´¨å°±æ˜¯åœ¨æ±‚å“ˆå¯†å°”é¡¿è·¯å¾„ã€‚ é¢˜ç›®ç®€ä»‹åœ¨äºŒç»´ç½‘æ ¼ grid ä¸Šï¼Œæœ‰ 4 ç§ç±»å‹çš„æ–¹æ ¼ï¼š 1 è¡¨ç¤ºèµ·å§‹æ–¹æ ¼ã€‚ä¸”åªæœ‰ä¸€ä¸ªèµ·å§‹æ–¹æ ¼ 2 è¡¨ç¤ºç»“æŸæ–¹æ ¼ï¼Œä¸”åªæœ‰ä¸€ä¸ªç»“æŸæ–¹æ ¼ 0 è¡¨ç¤ºæˆ‘ä»¬å¯ä»¥èµ°è¿‡çš„ç©ºæ–¹æ ¼ -1 è¡¨ç¤ºæˆ‘ä»¬æ— æ³•è·¨è¶Šçš„éšœç¢ è¿”å›åœ¨å››ä¸ªæ–¹å‘ï¼ˆä¸Šã€ä¸‹ã€å·¦ã€å³ï¼‰ä¸Šè¡Œèµ°æ—¶ï¼Œä»èµ·å§‹æ–¹æ ¼åˆ°ç»“æŸæ–¹æ ¼çš„ä¸åŒè·¯å¾„çš„æ•°ç›®ã€‚æ¯ä¸€ä¸ªæ— éšœç¢æ–¹æ ¼éƒ½è¦é€šè¿‡ä¸€æ¬¡ï¼Œä½†æ˜¯ä¸€æ¡è·¯å¾„ä¸­ä¸èƒ½é‡å¤é€šè¿‡åŒä¸€ä¸ªæ–¹æ ¼ã€‚ **æç¤ºï¼š1 &lt;= grid.length * grid[0].length &lt;= 20**ã€‚ è§£é¢˜æ€è·¯æˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªäºŒç»´ç½‘æ ¼å»ºæ¨¡ä¸ºä¸€å¹…å›¾ï¼Œ0 è¡¨ç¤ºä¸€ä¸ªèŠ‚ç‚¹(èµ·å§‹ç‚¹ 1 å’Œç»ˆæ­¢ç‚¹ 2 ä¹Ÿæ˜¯èŠ‚ç‚¹)ï¼Œå¦‚æœä¸¤ä¸ª 0 ä¸Šä¸‹å·¦å³ç›¸é‚»ï¼Œå°±è¡¨ç¤ºå®ƒä»¬ä¹‹é—´æœ‰ä¸€æ¡è¾¹ã€‚ç°åœ¨é¢˜ç›®è¦æ±‚ä»èµ·å§‹ç‚¹åˆ°è¾¾ç»ˆæ­¢ç‚¹ï¼Œå¿…é¡»ç»è¿‡æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”æœ‰ä¸”åªèƒ½ç»è¿‡ä¸€æ¬¡ï¼Œè¿™ä¸å°±æ˜¯å“ˆå¯†å°”é¡¿è·¯å¾„å—? é‚£ä¹ˆé¢˜ç›®å°±æ˜¯åœ¨è¦æ±‚è¿™ä¸ªå›¾æœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„ã€‚ import java.util.Arrays;import java.util.stream.Collectors;public class Solution &#123; // çŠ¶æ€å‹ç¼©ï¼Œé¢˜ç›®ç»™å‡ºèŠ‚ç‚¹æ•°ç›®å°äºç­‰äº 20 private int visited; // èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹ä¸‹æ ‡ private int[] start; private int[] end; // ç½‘æ ¼çš„è¡Œæ•°å’Œåˆ—æ•° private int rows; private int columns; // å‰©ä½™æœªè®¿é—®èŠ‚ç‚¹ private int left; // ç½‘æ ¼ private int[][] grid; public int uniquePathsIII(int[][] grid) &#123; this.grid = grid; this.rows = grid.length; this.columns = grid[0].length; this.visited = 0; this.start = new int[2]; this.end = new int[2]; this.left = rows * columns; // ä¸‹é¢è¿™ä¸ªå¾ªç¯æ˜¯ä¸ºäº†æ‰¾åˆ°èµ·å§‹ç‚¹å’Œç»ˆæ­¢ç‚¹ï¼Œå¹¶ä¸”æ›´æ–° left for (int row = 0; row &lt; rows; row++) &#123; for (int column = 0; column &lt; columns; column++) &#123; if (grid[row][column] == 1) &#123; start[0] = row; start[1] = column; grid[row][column] = 0; &#125; else if (grid[row][column] == 2) &#123; end[0] = row; end[1] = column; grid[row][column] = 0; &#125; else if (grid[row][column] == -1) &#123; // -1 ä¸æ˜¯èŠ‚ç‚¹ï¼Œéœ€è¦å‡æ‰ left--; &#125; &#125; &#125; return dfs(start); &#125; private int dfs(int[] v) &#123; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); left--; if (left == 0 &amp;&amp; (v[0] == end[0] &amp;&amp; v[1] == end[1])) &#123; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); left++; return 1; &#125; int res = 0; for (int[] w: adj(v[0], v[1])) &#123; if ((visited &amp; (1 &lt;&lt; (w[0] * columns + w[1]))) == 0 &amp;&amp; grid[w[0]][w[1]] != -1) &#123; res += dfs(w); &#125; &#125; // å›æº¯ left++; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); return res; &#125; private Iterable&lt;int[]&gt; adj(int row, int column) &#123; int[][] dirs = &#123;&#123;-1, 0&#125;, &#123;0, -1&#125;, &#123;0, 1&#125;, &#123;1, 0&#125;&#125;; return Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .collect(Collectors.toList()); &#125; public static void main(String[] args) &#123; int[][] grid = &#123;&#123;1,0,0,0&#125;,&#123;0,0,0,0&#125;,&#123;0,0,2,-1&#125;&#125;; Solution solution = new Solution(); int res = solution.uniquePathsIII(grid); System.out.println(res); &#125;&#125; è®°å¿†åŒ–æœç´¢è€ƒè™‘è¿™ä¹ˆä¸€å¹…å›¾ æˆ‘ä»¬å°†å®ƒåˆ†ä¸ºä¸¤éƒ¨åˆ† æˆ‘ä»¬ç§°å·¦è¾¹ä¸ºç¬¬ä¸€éƒ¨åˆ†ï¼Œå³è¾¹ä¸ºç¬¬äºŒéƒ¨åˆ†ã€‚ç°åœ¨ä»èŠ‚ç‚¹ 0 å¼€å§‹éå†ï¼Œå¯»æ‰¾æœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿å›è·¯ï¼Œæˆ‘ä»¬å‘ç°ä¸è®ºæ˜¯ä»¥ä½•ç§æ–¹å¼éå†å®Œç¬¬ä¸€éƒ¨åˆ†æ¥åˆ°ç¬¬äºŒéƒ¨åˆ†ï¼Œæœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„åªä¸ç¬¬äºŒéƒ¨åˆ†æœ‰å…³ï¼Œå³è¿™å‡ ç§è·¯å¾„æœç´¢å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œæ— éœ€é‡å¤éå†ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä»¥ $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$ çš„æ–¹å¼éå†å®Œç¬¬ä¸€éƒ¨åˆ†æ¥åˆ°ç¬¬äºŒéƒ¨åˆ† å®ƒæœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„åªä¸ç¬¬äºŒéƒ¨åˆ†æœ‰å…³ï¼Œå¦‚æœæˆ‘ä»¬ä»¥ $0 \\rightarrow 2 \\rightarrow 1 \\rightarrow 3$ çš„æ–¹å¼éå†å®Œç¬¬ä¸€éƒ¨åˆ†æ¥åˆ°ç¬¬äºŒéƒ¨åˆ† å®ƒæœ‰å¤šå°‘æ¡å“ˆå¯†å°”é¡¿è·¯å¾„çš„ç»“æœåº”è¯¥ä¸ä»¥ $0 \\rightarrow 1 \\rightarrow 2 \\rightarrow 3$ é¡ºåºéå†çš„ç»“æœç›¸åŒï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥ç¼“å­˜è¿™ä¸ªç»“æœï¼Œå°±å¯ä»¥é¿å…ä¸å¿…è¦çš„éå†ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ å½“éå†åˆ°èŠ‚ç‚¹ v æ—¶ï¼Œå¦‚æœæ­¤æ—¶å®ƒä»¬çš„ visited æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå®ƒä»¬ä¼šæœ‰ä¸€æ ·çš„ç»“æœï¼Œä¾‹å¦‚å¯¹äºä¸Šå›¾ï¼Œå½“éå†åˆ°èŠ‚ç‚¹ 3 æ—¶ï¼Œä¸¤æ¡è·¯å¾„çš„éå† visited çŠ¶æ€æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒä»¬çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ è¿™ç§æœç´¢ç­–ç•¥å«åšè®°å¿†åŒ–æœç´¢ï¼ŒåŸºäºè®°å¿†åŒ–æœç´¢çš„æƒ³æ³•ï¼Œæˆ‘ä»¬æ”¹é€ ä¸Šé¢çš„ç¨‹åº import java.util.Arrays;import java.util.HashMap;import java.util.stream.Collectors;public class Solution &#123; private int visited; private int[] start; private int[] end; private int rows; private int columns; private int left; private int[][] grid; private HashMap&lt;String, Integer&gt; memo= new HashMap&lt;&gt;(); public int uniquePathsIII(int[][] grid) &#123; this.grid = grid; this.rows = grid.length; this.columns = grid[0].length; this.visited = 0; this.start = new int[2]; this.end = new int[2]; this.left = rows * columns; for (int row = 0; row &lt; rows; row++) &#123; for (int column = 0; column &lt; columns; column++) &#123; if (grid[row][column] == 1) &#123; start[0] = row; start[1] = column; grid[row][column] = 0; &#125; else if (grid[row][column] == 2) &#123; end[0] = row; end[1] = column; grid[row][column] = 0; &#125; else if (grid[row][column] == -1) &#123; left--; &#125; &#125; &#125; return dfs(start); &#125; private int dfs(int[] v) &#123; String strV = format(v); if (memo.containsKey(visited + strV)) &#123; return memo.get(visited + strV); &#125; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); left--; if (left == 0 &amp;&amp; (v[0] == end[0] &amp;&amp; v[1] == end[1])) &#123; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); left++; memo.put(visited + strV, 1); return 1; &#125; int res = 0; for (int[] w: adj(v[0], v[1])) &#123; if ((visited &amp; (1 &lt;&lt; (w[0] * columns + w[1]))) == 0 &amp;&amp; grid[w[0]][w[1]] != -1) &#123; res += dfs(w); &#125; &#125; left++; visited = visited ^ (1 &lt;&lt; (v[0] * columns + v[1])); memo.put(visited+strV, res); return res; &#125; private Iterable&lt;int[]&gt; adj(int row, int column) &#123; int[][] dirs = &#123;&#123;-1, 0&#125;, &#123;0, -1&#125;, &#123;0, 1&#125;, &#123;1, 0&#125;&#125;; return Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .collect(Collectors.toList()); &#125; private String format(int[] v) &#123; int location = v[0] * columns + v[1]; int first = location / 10; int second = location % 10; return \"\" + first + second; &#125;&#125;","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"ES6ï¼šæ‰©å±•å¯¹è±¡çš„åŠŸèƒ½æ€§","date":"2021-01-24T03:28:00.000Z","path":"/ES6ï¼šæ‰©å±•å¯¹è±¡çš„åŠŸèƒ½æ€§/","text":"Object è¯­æ³•æ‰©å±•å±æ€§ç®€å†™å½“æˆ‘ä»¬ä½¿ç”¨å­—é¢é‡å£°æ˜ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œç»å¸¸ä¼šæœ‰ä¸‹é¢çš„å†™æ³• let person = &#123; name: name, // ç¬¬ä¸€ä¸ª name æ˜¯é”®åï¼Œç¬¬äºŒä¸ª name æ˜¯ä¸€ä¸ªå˜é‡ age: age&#125; å…¶ä¸­é”®çš„åå­—å’Œå€¼çš„åå­—éƒ½æ˜¯ç›¸åŒçš„ï¼Œnameï¼Œage å†™äº†ä¸¤éï¼Œåœ¨ ES6 ä¸­æä¾›äº†ç®€å†™è¯­æ³•ï¼Œå½“é”®çš„åç§°ä¸å€¼å¯¹åº”å˜é‡åç›¸åŒæ—¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç®€å†™ï¼Œå¦‚ä¸Šå¯ä»¥ç®€å†™ä¸º let person = &#123; name, age&#125; æ–¹æ³•ç®€å†™åœ¨ ES5 ä¸­å¦‚ä¸‹å®šä¹‰æ–¹æ³• let person = &#123; name: \"Alice\", sayHello: function() &#123; return \"Hello\"; &#125;&#125; åœ¨ ES6 ä¸­æä¾›äº†æ›´åŠ ç®€æ´çš„å†™æ³• let person = &#123; name: \"Alice\", sayHello() &#123; return \"Hello\"; &#125;&#125; ç®€å†™çš„æ–¹æ³•ä¸ä¸€èˆ¬æ–¹æ³•çš„ä¸åŒåœ¨äºï¼Œåœ¨ç®€å†™æ–¹æ³•ä¸­å¯ä»¥ä½¿ç”¨ superï¼Œè€Œéç®€å†™æ–¹æ³•ä¸è¡Œã€‚ç®€å†™æ–¹æ³•çš„ name å±æ€§å°±æ˜¯æ‹¬å·å‰çš„åç§°ï¼Œä¾‹å¦‚ä¸Šé¢ person.sayHello çš„ name å±æ€§æ˜¯ sayHelloã€‚ è®¡ç®—å±æ€§ååœ¨ ES5 ä¸­æ˜¯æ— æ³•ä½¿ç”¨ä¸€ä¸ªå˜é‡çš„å€¼ä½œä¸ºé”®åçš„ï¼Œä¾‹å¦‚ let lastName = \"last name\"let person = &#123; \"first name\": \"Xiong\", lastName: \"Tao\"&#125;console.log(person[\"first name\"]); // Xiongconsole.log(person[\"last name\"]); // undefiendconsole.log(person[\"lastName\"]); // Tao æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ person å¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ first name last name ä½†æ˜¯å®é™…ä¸Šçš„ä¸¤ä¸ªå±æ€§ä¸º first name lastName åœ¨ ES6 ä¸­å¯ä»¥é€šè¿‡æ–¹æ‹¬å· [] å°†å˜é‡æ‹¬èµ·æ¥ï¼Œä½¿å¾—å˜é‡çš„å€¼æˆä¸ºå¯¹è±¡çš„é”® let lastName = \"last name\"let person = &#123; \"first name\": \"Xiong\", [lastName]: \"Tao\"&#125;console.log(person[\"first name\"]); // Xiongconsole.log(person[\"last name\"]); // Taoconsole.log(person[\"lastName\"]); // undefiend æ–°æ–¹æ³•Object.isåœ¨æ¯”è¾ƒä¸¤ä¸ªå€¼æ—¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ == æˆ–è€…æ›´åŠ ä¸¥æ ¼çš„ === ï¼Œæ›´å¤šçš„äººä¹æ„ä½¿ç”¨ ===ï¼Œä½†æ˜¯å³ä½¿æ˜¯ === ä¹Ÿä¼šä¸å‡†ç¡®ï¼Œä¾‹å¦‚ +0 === -0 ï¼štrue NaN === Nan ï¼šfalse Object.is æ–¹æ³•æ­£æ˜¯ç”¨æ¥ä¿®è¡¥è¿™ä¸€å°çš„ç‘•ç–µçš„ï¼Œå®ƒçš„ä½œç”¨ä¸ == å’Œ === ä¸€æ ·ä¹Ÿæ˜¯ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸åŒçš„ const print = console.log;print(5 == \"5\"); // trueprint(5 === \"5\"); // falseprint(Object.is(5, \"5\")); // false print(+0 == -0); // trueprint(+0 === -0); // trueprint(Object.is(+0, -0)); // falseprint(NaN === NaN); // falseprint(Object.is(NaN, NaN)); // true Object.is ä¸ === çš„ä¸åŒä»…åœ¨äº +0ï¼Œ-0 ä»¥åŠ NaN çš„æ¯”è¾ƒã€‚ Object.assignåœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œéœ€è¦å°†å…¶ä»–å¯¹è±¡çš„å±æ€§å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™ä¸ªæ“ä½œå¸¸ç§°ä¹‹ä¸ºmixin function mixin(receiver, supplier) &#123; Object.keys(supplier).forEach(function(key) &#123; receiver[key] = supplier[key]; &#125;); return receiver; &#125; åœ¨å…¶ä»–çš„åº“æœ‰ç›¸ä¼¼çš„æ–¹æ³•å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œå¦‚ mixï¼Œextend ç­‰ç­‰ã€‚ES6 å¼•å…¥äº† Object.assign æ–¹æ³•ï¼Œå®ç°çš„åŠŸèƒ½ä¸ä¸Šè¿°çš„ç›¸åŒï¼ŒObject.assign ä¸èƒ½å¤åˆ¶åŸå‹é“¾ä¸Šçš„å±æ€§ä»¥åŠä¸å¯æšä¸¾çš„å±æ€§ã€‚Object.assign çš„è¯­æ³•å¦‚ä¸‹ Object.assign(target, ...sources) æ¥æ”¶ä¸€ä¸ª target å¯¹è±¡ï¼Œä»¥åŠä»»æ„å¤šä¸ª sourceï¼Œå°†å¤šä¸ª source ä¸­çš„å±æ€§å¤åˆ¶åˆ° target å½“ä¸­ï¼Œå¦‚æœ target ä¸­çš„å±æ€§ä¸ sources ä¸­æŸå¯¹è±¡çš„å±æ€§ç›¸åŒï¼Œé‚£ä¹ˆ target ä¸­çš„å±æ€§çš„å€¼å°†ä¼šè¢«è¦†ç›–ï¼Œå¦‚æœå¤šä¸ª source æœ‰ç›¸åŒçš„å±æ€§åï¼Œé‚£ä¹ˆåé¢çš„ source å±æ€§å€¼ä¼šè¦†ç›–ç­¾åçš„å±æ€§å€¼ã€‚ let target = &#123;&#125;let source1 = &#123; name: 'Alice', age: 2&#125;let source2 = &#123; name: 'Bob'&#125;Object.assign(target, source1, source2)print(target) // &#123; name: 'Bob', age: 2 &#125; Object.assign è¿›è¡Œçš„æ˜¯æµ…æ‹·è´ï¼Œå¦‚æœéœ€è¦è¿›è¡Œæ·±æ‹·è´ï¼Œéœ€è¦å¦æ±‚ä»–æ³•ã€‚åœ¨ä½¿ç”¨ Object.assign è¿›è¡Œå¤åˆ¶çš„è¿‡ç¨‹ä¸­ï¼Œä¼šè§¦å‘ getter å’Œ setter æ–¹æ³•ã€‚ Object.assign çš„æ›´å¤šç»†èŠ‚ï¼Œå‚è€ƒ MDN Object.assign() é‡å¤å­—é¢å±æ€§åœ¨ ES6 ä¹‹å‰ï¼Œå¦‚æœåœ¨å®šä¹‰å¯¹è±¡æ—¶ï¼Œæœ‰é‡å¤çš„å±æ€§åï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ let person = &#123; // åœ¨ ES5 ä¸­ä¼šæŠ¥é”™ name: 'Alice', name: 'Bob'&#125; ä½†æ˜¯åœ¨ ES6 ä¸­ä¸ä¼šï¼Œåé¢å®šä¹‰çš„å±æ€§å€¼ä¼šè¦†ç›–ä¹‹å‰å®šä¹‰çš„å±æ€§å€¼ let person = &#123; name: 'Alice', name: 'Bob'&#125;print(person) // &#123; name: 'Bob' &#125; è‡ªæœ‰å±æ€§éå†é¡ºåºåœ¨ ES5 ä¸­æ²¡æœ‰è§„å®šå½“éå†ä¸€ä¸ªå¯¹è±¡æ—¶åº”è¯¥ä»¥ä½•ç§é¡ºåºæ¥è®¿é—®å¯¹è±¡çš„å±æ€§ï¼Œä½†æ˜¯åœ¨ ES6 ä¸­è§„å®šäº†è®¿é—®çš„é¡ºåºï¼Œè¿™ä¸ªå½±å“äº† Object.getOwnPropertyNames() å’Œ Reflect.ownKeys()ï¼ŒåŒæ ·ä¹Ÿå½±å“äº†è°ƒç”¨ Object.assign è¿›è¡Œå¤åˆ¶æ—¶èµ‹å€¼çš„é¡ºåºã€‚é”®çš„é¡ºåºå¦‚ä¸‹ï¼š æŒ‰ç…§å‡åºæ’åºçš„æ•°å­— æŒ‰ç…§æ·»åŠ é¡ºåºæ’åºçš„å­—ç¬¦ä¸² æŒ‰ç…§æ·»åŠ é¡ºåºæ’åºçš„ Symbol let obj = &#123; a: 1, 0: 1, 2: 1, c: 3, 1: 2, b: 4&#125;;obj.d = 1;console.log(Object.getOwnPropertyNames(obj).join(\" \")); // 0 1 2 a c b d for-in å¾ªç¯æ²¡æœ‰å…·ä½“çš„éå†é¡ºåºï¼Œå› ä¸ºä¸åŒçš„ JavaScript å¼•æ“æœ‰ä¸åŒçš„å®ç°ã€‚Object.keys() å’Œ JSON.stringfy() è§„å®šä½¿ç”¨å’Œ for-in å¾ªç¯ä¸€æ ·çš„éå†é¡ºåºã€‚ Prototypes çš„å¢å¼ºæ”¹å˜å¯¹è±¡çš„åŸå‹åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Object.create ä¸ºå¯¹è±¡æŒ‡å®šä¸€ä¸ªåŸå‹ let person = &#123; sayHello() &#123; console.log(\"Hello\"); &#125;&#125;let friend = Object.create(person);friend.sayHello(); // Hello å¯ä»¥é€šè¿‡ Object.getPrototypeOf() è·å¾—å¯¹è±¡çš„åŸå‹ console.log(Object.getPrototypeOf(friend) === person); // true åœ¨ ES6 ä¸­æ–°å¢äº† Object.setPrototypeOf() æ–¹æ³•ï¼Œå¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ let dog = &#123; sayHello() &#123; console.log(\"Woff\"); &#125;&#125;Object.setPrototypeOf(friend, dog);friend.sayHello(); // Woffconsole.log(Object.getPrototypeOf(friend) === dog); // true superå¦‚æœå¯¹è±¡é‡å†™äº†åŸå‹çš„æ–¹æ³•ï¼Œå¦‚ä½•åœ¨å¯¹è±¡ä¸­è°ƒç”¨åŸå‹çš„åŒåæ–¹æ³•ï¼Œä¸€èˆ¬é€šè¿‡å¦‚ä¸‹æ–¹å¼è°ƒç”¨ let person = &#123; sayHello() &#123; return \"Hello\"; &#125;&#125;let dog = &#123; sayHello() &#123; return \"Woff\"; &#125;&#125;let friend = &#123; sayHello() &#123; return Object.getPrototypeOf(this).sayHello.call(this) + \", Man!\"; &#125;&#125;Object.setPrototypeOf(friend, person);console.log(friend.sayHello()); // Hello, Man!Object.setPrototypeOf(friend, dog);console.log(friend.sayHello()); // Woff, Man! æˆ‘ä»¬é€šè¿‡ Object.getPrototypeOf(this).sayHello.call(this) æ¥è°ƒç”¨çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•ï¼Œåœ¨ ES6 ä¸­å¼•å…¥äº† superï¼Œsuper æŒ‡å®šåŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥ friend å¯¹è±¡ä¸­çš„ä»£ç å¯ä»¥ç®€åŒ–å¦‚ä¸‹ let friend = &#123; sayHello() &#123; return super.sayHello.call(this) + \", Man!\"; &#125;&#125; super åªèƒ½åœ¨ç®€å†™æ–¹æ³•ä¸­ä½¿ç”¨ï¼Œå¦‚ä¸‹ä¼šå‘ç”Ÿè¯­æ³•é”™è¯¯ let friend = &#123; sayHello: function() &#123; // SyntaxError: 'super' keyword unexpected here return super.sayHello.call(this) + \", Man!\"; &#125;&#125;","tags":[{"name":"Object","slug":"Object","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Object/"},{"name":"å¯¹è±¡","slug":"å¯¹è±¡","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%AF%B9%E8%B1%A1/"}]},{"title":"æ¡¥å’Œå‰²ç‚¹","date":"2021-01-23T16:00:00.000Z","path":"/æ¡¥å’Œå‰²ç‚¹/","text":"æ¡¥å®šä¹‰æˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹æ¡¥çš„æ¦‚å¿µ ä¸Šé¢è¿™å¹…å›¾ä¸­ï¼Œæˆ‘ä»¬ç§°èŠ‚ç‚¹ 3-5 ä¹‹é—´çš„è¿™æ¡è¾¹ä¸ºæ¡¥ï¼Œå®ƒå…·æœ‰ä»€ä¹ˆç‰¹ç‚¹å‘¢? ä¸€æ—¦å°†è¿™æ¡è¾¹å»æ‰ï¼Œå›¾çš„è”é€šåˆ†é‡å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æœ‰å¦‚ä¸‹å®šä¹‰ï¼š å¦‚æœå»æ‰æŸæ¡è¾¹ï¼Œä½¿å¾—å›¾çš„è”é€šåˆ†é‡å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç§°è¿™æ¡è¾¹ä¸ºæ¡¥ã€‚ æ¡¥å¯ä»¥çœ‹åšæ˜¯å›¾ä¸­æœ€è„†å¼±çš„é‚£æ¡è¾¹ï¼Œå¦‚æœå°†äº¤é€šç³»ç»Ÿå»ºæ¨¡ä¸ºä¸€ä¸ªå›¾çš„è¯ï¼Œæ¡¥å°±æ˜¯äº¤é€šç³»ç»Ÿä¸­æœ€è„†å¼±çš„éƒ¨åˆ†ï¼Œåœ¨å†›äº‹ä¸­å¦‚æœæˆ‘ä»¬çŸ¥é“å¯¹æ–¹äº¤é€šç³»ç»Ÿä¸­çš„æ¡¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å†›äº‹æ‰“å‡»è¿™ä¸ªæ¡¥ï¼Œä½¿å¾—å¯¹æ–¹çš„äº¤é€šç³»ç»Ÿç˜«ç—ªã€‚ å¯»æ‰¾æ¡¥å¦‚ä½•åˆ¤æ–­æŸæ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥ï¼Œå¯¹äºä¸‹å›¾æ¥è¯´ï¼Œ 0-1 è¿™æ¡è¾¹æ˜¯æ¡¥å—? ç­”æ¡ˆä¸æ˜¯ï¼Œå› ä¸ºå»æ‰ 0-1 è¿™æ¡è¾¹è”é€šåˆ†é‡çš„ä¸ªæ•°æ²¡æœ‰å¢åŠ ï¼ŒåŸå› æ˜¯èŠ‚ç‚¹ 1 å¯ä»¥é€šè¿‡å¦ä¸€æ¡è·¯å¾„ 1-&gt;3-&gt;2-&gt;0 åˆ°è¾¾ 0ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ¤æ–­æŸæ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥ï¼Œå°±æ˜¯åˆ¤æ–­è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æœ‰å¦å¤–ä¸€æ¡è·¯å¾„ã€‚è€ƒè™‘è¾¹ v-wï¼Œå¦‚æœå­˜åœ¨å¦å¤–ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—èŠ‚ç‚¹ v å¯ä»¥åˆ°è¾¾èŠ‚ç‚¹ w æˆ–è€…æ˜¯èŠ‚ç‚¹ w ä¹‹å‰çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°±è®¤ä¸º v-w ä¸æ˜¯æ¡¥ï¼Œå¦åˆ™æ²¡æœ‰å¦å¤–çš„è·¯å¾„ä½¿å¾—èŠ‚ç‚¹ v åˆ°è¾¾èŠ‚ç‚¹ wï¼Œæˆ‘ä»¬å°±è®¤ä¸º v-w æ˜¯æ¡¥ã€‚ ä¸ºäº†å®Œæˆè¿™ä¸ªåˆ¤æ–­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªå˜é‡æ¥å¸®åŠ©æˆ‘ä»¬ä¿å­˜ä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯ order[] æ•°ç»„ï¼Œå®ƒä¿å­˜çš„æ˜¯ä»¥ DFS éå†å›¾çš„é¡ºåºï¼Œä¾‹å¦‚ order[0] = 0ï¼Œè¡¨ç¤ºèŠ‚ç‚¹ 0 æ˜¯ç¬¬ 0 ä¸ªéå†çš„ï¼Œorder[3] = 2 è¡¨ç¤ºèŠ‚ç‚¹ 3 æ˜¯ç¬¬ 2 ä¸ªéå†çš„ å¦ä¸€ä¸ªéœ€è¦è®°å½•çš„ä¿¡æ¯æ˜¯å½“å‰èŠ‚ç‚¹é€šè¿‡å¦å¤–ä¸€æ¡è·¯å¾„(å³ä¸æ˜¯çˆ¶èŠ‚ç‚¹é‚£æ¡è·¯å¾„)èƒ½å¤Ÿè¾¾åˆ°çš„é¡ºåºæœ€å‰çš„èŠ‚ç‚¹ï¼Œä½¿ç”¨æ•°ç»„ low è¡¨ç¤ºï¼Œå‡è®¾èŠ‚ç‚¹ 2 èƒ½å¤Ÿè¾¾åˆ°æœ€å‰çš„èŠ‚ç‚¹ 0ï¼Œè€Œ order[0] = 0ï¼Œæ‰€ä»¥ low[2] = order[0] = 0ï¼Œåˆå§‹ low[i] = order[i]ï¼Œæ›´æ–° low æ•°ç»„æœ‰ä¸¤ä¸ªæ—¶æœº èŠ‚ç‚¹ v è®¿é—®å·²è¢«éå†è¿‡çš„é‚»æ¥èŠ‚ç‚¹ w æ—¶(è¯¥é‚»æ¥èŠ‚ç‚¹ä¸ä¸ºçˆ¶èŠ‚ç‚¹)ï¼Œå¦‚æœ low[w] &lt; low[v]ï¼Œåˆ™æ›´æ–° low[v] = low[w] å½“æˆ‘ä»¬è®¿é—®åˆ°èŠ‚ç‚¹ 2 æ—¶ï¼Œæ¥ç€è®¿é—®èŠ‚ç‚¹ 2 çš„é‚»æ¥èŠ‚ç‚¹ï¼Œè®¿é—®åˆ°èŠ‚ç‚¹ 0ï¼ŒèŠ‚ç‚¹ 0 ä¸æ˜¯å®ƒçš„çˆ¶äº²èŠ‚ç‚¹(ä¸Šä¸€ä¸ªèŠ‚ç‚¹)ï¼Œè€Œä¸”èŠ‚ç‚¹ 0 å·²ç»è¢«è®¿é—®è¿‡ï¼Œå¹¶ä¸” low[0] &lt; low[2]ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æ›´æ–° low[2] = low[0]ï¼Œè¡¨ç¤ºèŠ‚ç‚¹ 2 èƒ½é€šè¿‡å¦ä¸€æ¡è·¯å¾„è®¿é—®ç¬¬ low[0] ä¸ªéå†çš„èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹ 2 èƒ½å¤Ÿè®¿é—®åˆ°ç¬¬ 0 ä¸ªè¢«éå†çš„èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹ 0 è®¿é—®å®Œé‚»æ¥èŠ‚ç‚¹ wï¼Œå›åˆ°å½“å‰èŠ‚ç‚¹ v æ—¶ï¼Œå¦‚æœé‚»æ¥èŠ‚ç‚¹çš„ low[w] &lt; low[v]ï¼Œåˆ™æ›´æ–° low[v] = low[w] å½“èŠ‚ç‚¹è®¿é—®å®ŒèŠ‚ç‚¹ 2 å›åˆ°èŠ‚ç‚¹ 3 æ—¶ï¼Œæ­¤æ—¶ low[2] &lt; low[3]ï¼Œæ›´æ–° low[3] = low[2] = 0ï¼Œè¡¨ç¤º low[3] å¯ä»¥ä»å¦å¤–ä¸€æ¡è·¯å¾„åˆ°è¾¾ç¬¬ low[2] = 0 ä¸ªè¢«éå†çš„èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹ 0 å¼•å…¥äº† order ä¸ low æ•°ç»„ï¼Œæ¥ç€æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸¤ä¸ªæ•°ç»„åˆ¤æ–­æŸæ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥äº†ï¼Œå½“æˆ‘ä»¬éå†å®Œç›¸é‚»èŠ‚ç‚¹ wï¼Œæ¥åˆ°å½“å‰èŠ‚ç‚¹ v æ—¶ï¼Œé™¤äº†è¦æ›´æ–° low[v]ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è¿™æ¡è¾¹æ˜¯ä¸æ˜¯æ¡¥è¿›è¡Œåˆ¤æ–­ã€‚ æˆ‘ä»¬éœ€è¦åˆ¤æ–­ low[w] ä¸ order[v] çš„å¤§å°ï¼Œä»¥æ­¤åˆ¤æ–­æ˜¯å¦æ˜¯æ¡¥ã€‚é¦–å…ˆæ˜ç¡®ä¸€ä¸‹äºŒè€…è¡¨ç¤ºçš„æ„ä¹‰ï¼š low[w] è¡¨ç¤ºèŠ‚ç‚¹ w èƒ½å¤Ÿé€šè¿‡å¦ä¸€æ¡è·¯å¾„èƒ½å¤Ÿåˆ°è¾¾çš„æœ€å‰é¡ºåºï¼Œä¾‹å¦‚ low[w] = 3 å°±è¡¨ç¤º w èŠ‚ç‚¹èƒ½é€šè¿‡å¦ä¸€æ¡è·¯å¾„åˆ°è¾¾ç¬¬ 3 ä¸ªè¢«éå†çš„èŠ‚ç‚¹ï¼Œ order [v] è¡¨ç¤ºèŠ‚ç‚¹ v æ˜¯ç¬¬å‡ ä¸ªè¢«éå†çš„ å¦‚æœ low[w] $\\leq$ order[v]ï¼Œè¯´æ˜ w èƒ½é€šè¿‡å¦ä¸€æ¡è·¯å¾„åˆ°è¾¾èŠ‚ç‚¹ v æˆ– v ä¹‹å‰è¢«éå†çš„èŠ‚ç‚¹ï¼Œè¯´æ˜å°±ä¸æ˜¯æ¡¥ï¼Œå¦åˆ™å°±æ˜¯æ¡¥ã€‚ import java.util.ArrayList;import java.util.HashSet;public class FindEdge &#123; private int[] order; private int[] low; private Graph graph; private boolean[] visited; private int count = 0; // å­˜å‚¨æ¡¥ private ArrayList&lt;int[]&gt; result; public FindEdge(Graph graph) &#123; this.graph = graph; order = new int[graph.V()]; low = new int[graph.V()]; result = new ArrayList&lt;&gt;(); visited = new boolean[graph.V()]; for (int i = 0; i &lt; graph.V(); i++) &#123; if (!visited[i]) &#123; dfs(i, i); &#125; &#125; &#125; private void dfs(int v, int parent) &#123; visited[v] = true; low[v] = count; order[v] = count; count++; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w, v); // æ›´æ–° low[v] æ—¶æœº 1 low[v] = Math.min(low[v], low[w]); // åˆ¤æ–­æ˜¯å¦æ˜¯æ¡¥ if (low[w] &gt; order[v]) &#123; result.add(new int[]&#123;v, w&#125;); &#125; &#125; else if (w != parent)&#123; // æ›´ç»† low[v] æ—¶æœº 2 low[v] = Math.min(low[w], low[v]); &#125; &#125; &#125; public ArrayList&lt;int[]&gt; getResult() &#123; return result; &#125;&#125; å‰²ç‚¹å®šä¹‰å‰²ç‚¹çš„å®šä¹‰ä¸æ¡¥çš„å®šä¹‰ç±»ä¼¼ï¼Œå‰²ç‚¹æŒ‡çš„æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¸€æ—¦ç§»é™¤è¿™ä¸ªèŠ‚ç‚¹ï¼Œä¼šå¯¼è‡´å›¾ä¸­çš„è”é€šåˆ†é‡å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸ªèŠ‚ç‚¹ä¸ºå‰²ç‚¹ã€‚ ä¸Šå›¾ä¸­èŠ‚ç‚¹ 3 ä¸èŠ‚ç‚¹ 5 ä¸ºå‰²ç‚¹ï¼Œä¸€æ—¦å»æ‰è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹ä¸€ï¼Œå›¾çš„è”é€šåˆ†é‡çš„ä¸ªæ•°å°±ä¼šå‘ç”Ÿå˜åŒ–ã€‚ å¯»æ‰¾å‰²ç‚¹å¯»æ‰¾å‰²ç‚¹çš„è¿‡ç¨‹åŒå¯»æ‰¾æ¡¥æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿéœ€è¦ç»´æŠ¤ order ä¸ low ä¸¤ä¸ªæ•°ç»„ï¼Œè¿™ä¸¤æ•°ç»„çš„å«ä¹‰ä¹Ÿæ˜¯åŒä¸Šä¸€è‡´çš„ã€‚low æ•°ç»„çš„æ›´æ–°æ—¶æœºä»¥åŠæ›´æ–°è¿‡ç¨‹ä¹Ÿæ˜¯åŒä¸Šä¸€è‡´çš„ã€‚ ç°åœ¨çš„é—®é¢˜æ˜¯æˆ‘ä»¬åœ¨ä»€ä¹ˆæ—¶å€™åˆ¤æ–­æŸèŠ‚ç‚¹æ˜¯ä¸æ˜¯å‰²ç‚¹ï¼Œä»¥åŠæ¡ä»¶æ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬åœ¨éå†å®Œç›¸é‚»èŠ‚ç‚¹ wï¼Œè¿”å›åˆ°å½“å‰èŠ‚ç‚¹ v æ—¶ï¼Œå¦‚æœ low[w] $\\geq$ order[v] æ—¶ï¼Œå°±è¯´æ˜å®ƒæ˜¯ä¸€ä¸ªå‰²ç‚¹ã€‚è¿™é‡Œçš„åˆ¤æ–­æ¡ä»¶ä¸æ¡¥çš„åˆ¤æ–­ä¸åŒï¼Œæ¡¥çš„åˆ¤æ–­æ¡ä»¶æ˜¯å¦‚æœ low[w] &gt; order[v] æ—¶ï¼Œå°±è¯´æ˜ v-w è¿™æ¡è¾¹æ˜¯æ¡¥ï¼Œæ³¨æ„å¤šäº†ä¸€ä¸ªç­‰äºå·ã€‚ low[w] $\\geq$ order[v] è¡¨ç¤ºèŠ‚ç‚¹ w ä¸ èŠ‚ç‚¹ v ä¹‹å‰è¢«éå†çš„èŠ‚ç‚¹äº§ç”Ÿè¿æ¥åªèƒ½é€šè¿‡èŠ‚ç‚¹ v ä¾‹å¦‚èŠ‚ç‚¹ 4 é€šè¿‡å¦å¤–ä¸€æ¡è·¯å¾„å®ƒæœ€å¤šåˆ°è¾¾èŠ‚ç‚¹ 5ï¼Œæ— æ³•ä¸èŠ‚ç‚¹ 5 ä¹‹å‰è¢«éå†çš„èŠ‚ç‚¹äº§ç”Ÿè¿æ¥ã€‚ä¸€æ—¦èŠ‚ç‚¹ 5 è¢«åˆ é™¤ï¼Œ4 å°±æ— æ³•è®¿é—®åˆ°èŠ‚ç‚¹ 0, 1, 2, 3ï¼Œæ‰€ä»¥ 5 å°±æ˜¯å‰²ç‚¹ã€‚ ä½†æ˜¯æ·»åŠ äº†ç­‰äºå·ä¹‹åï¼Œè¿™ä¸ªæ—¶å€™å› ä¸ºä»»ä½•èŠ‚ç‚¹ low[v] $\\geq$ order[0]ï¼Œæ‰€ä»¥æ ¹èŠ‚ç‚¹ 0 ä¼šè¢«è®¤ä¸ºæ˜¯å‰²ç‚¹ï¼Œä½†æ ¹èŠ‚ç‚¹ä¸ä¸€å®šæ˜¯å‰²ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¯¹æ ¹èŠ‚ç‚¹åˆ†åˆ«è®¨è®ºï¼Œåˆ¤æ–­æ ¹èŠ‚ç‚¹æ˜¯ä¸æ˜¯å‰²ç‚¹å¾ˆç®€å•ï¼Œå¦‚æœé€šè¿‡ DFS éå†ï¼Œæ ¹èŠ‚ç‚¹æœ‰ä¸¤ä¸ªç›¸é‚»èŠ‚ç‚¹å°±è¯´æ˜å®ƒæ˜¯å‰²ç‚¹ import java.util.ArrayList;import java.util.HashSet;public class FindCutPoints &#123; private Graph graph; private boolean[] visited; private int[] order; private int[] low; private int count = 0; private HashSet&lt;Integer&gt; result = new HashSet&lt;&gt;(); public FindCutPoints(Graph graph) &#123; this.graph = graph; visited = new boolean[graph.V()]; order = new int[graph.V()]; low = new int[graph.V()]; for (int i = 0; i &lt; graph.V(); i++) &#123; if (!visited[i]) &#123; dfs(i, i); &#125; &#125; &#125; private void dfs(int v, int parent) &#123; visited[v] = true; order[v] = count; low[v] = count; count++; int child = 0; for (int w: graph.adj(v)) &#123; child++; if (!visited[w]) &#123; dfs(w, v); low[v] = Math.min(low[v], low[w]); if (v != parent &amp;&amp; low[w] &gt;= order[v]) &#123; result.add(v); &#125; if (v == parent &amp;&amp; child &gt; 1) &#123; result.add(v); &#125; &#125; else if (w != parent) &#123; low[v] = Math.min(low[v], low[w]); &#125; &#125; &#125; public HashSet&lt;Integer&gt; getResult() &#123; return result; &#125;&#125;","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"å›¾è®ºå»ºæ¨¡","date":"2021-01-22T16:00:00.000Z","path":"/å›¾è®ºå»ºæ¨¡/","text":"ç°å®ä¸­æœ‰å¾ˆå¤šçš„é—®é¢˜å¯ä»¥å»ºæ¨¡ä¸ºå›¾è®ºé—®é¢˜ï¼Œç„¶åä½¿ç”¨ DFS ä¸ BFS ç®—æ³•è½»æ¾çš„è§£å†³ï¼Œç°åœ¨æˆ‘ä»¬æ‰“ç®—ä» LeetCode é€‰æ‹©å‡ é“é¢˜ï¼Œæ¥äº†è§£å¦‚ä½•å°†ç°å®é—®é¢˜å»ºæ¨¡ä¸ºå›¾è®ºé—®é¢˜ã€‚ äºŒåˆ†å›¾æ£€æµ‹é¢˜ç›®ä»‹ç»ç»™å®šä¸€ä¸ªæ— å‘å›¾graphï¼Œå½“è¿™ä¸ªå›¾ä¸ºäºŒåˆ†å›¾æ—¶è¿”å›trueã€‚å¦‚æœæˆ‘ä»¬èƒ½å°†ä¸€ä¸ªå›¾çš„èŠ‚ç‚¹é›†åˆåˆ†å‰²æˆä¸¤ä¸ªç‹¬ç«‹çš„å­é›† A å’Œ Bï¼Œå¹¶ä½¿å›¾ä¸­çš„æ¯ä¸€æ¡è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸€ä¸ªæ¥è‡ª A é›†åˆï¼Œä¸€ä¸ªæ¥è‡ª B é›†åˆï¼Œæˆ‘ä»¬å°±å°†è¿™ä¸ªå›¾ç§°ä¸ºäºŒåˆ†å›¾ã€‚ graph å°†ä¼šä»¥é‚»æ¥è¡¨æ–¹å¼ç»™å‡ºï¼Œgraph[i] è¡¨ç¤ºå›¾ä¸­ä¸èŠ‚ç‚¹ i ç›¸è¿çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªåœ¨ 0 åˆ°graph.length-1 ä¹‹é—´çš„æ•´æ•°ã€‚è¿™å›¾ä¸­æ²¡æœ‰è‡ªç¯å’Œå¹³è¡Œè¾¹ï¼š graph[i] ä¸­ä¸å­˜åœ¨ iï¼Œå¹¶ä¸” graph[i] ä¸­æ²¡æœ‰é‡å¤çš„å€¼ã€‚ æ³¨æ„: graph çš„é•¿åº¦èŒƒå›´ä¸º [1, 100]ã€‚ graph[i] ä¸­çš„å…ƒç´ çš„èŒƒå›´ä¸º [0, graph.length - 1]ã€‚ graph[i] ä¸ä¼šåŒ…å« i æˆ–è€…æœ‰é‡å¤çš„å€¼ã€‚ å›¾æ˜¯æ— å‘çš„: å¦‚æœ j åœ¨ graph[i] é‡Œè¾¹, é‚£ä¹ˆ i ä¹Ÿä¼šåœ¨ graph[j] é‡Œè¾¹ã€‚ è§£é¢˜æ€è·¯è¿™é“é¢˜çš„è§£æ³•æ˜¯å¯¹å›¾ä¸­çš„èŠ‚ç‚¹æŸ“è‰²ï¼Œæˆ‘ä»¬ä½¿ç”¨ DFS éå†è¯¥å›¾ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œé‚£ä¹ˆå°±å°†å®ƒæœªè®¿é—®è¿‡çš„ç›¸é‚»çš„èŠ‚ç‚¹æŸ“ä¸ºç»¿è‰²ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹é¢œè‰²ä¸ºç»¿è‰²ï¼Œå°±å°†æœªè®¿é—®è¿‡çš„ç›¸é‚»èŠ‚ç‚¹æŸ“ä¸ºçº¢è‰²ï¼Œæ ¹æ®é¢œè‰²æ¥åŒºåˆ†ä¸¤ä¸ªé›†åˆã€‚ å› ä¸ºä¸€æ¡è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹å±äºä¸¤ä¸ªä¸åŒçš„å‡ ä¸ªé›†åˆï¼Œæ‰€ä»¥ä¸€æ¡è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹çš„é¢œè‰²æ˜¯ä¸åŒçš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨éå†çš„è¿‡ç¨‹ä¸­å‘ç°å·²è¢«è®¿é—®è¿‡çš„ç›¸é‚»çš„èŠ‚ç‚¹çš„é¢œè‰²ä¸å½“å‰èŠ‚ç‚¹çš„é¢œè‰²ç›¸åŒï¼Œè¯´æ˜å®ƒä¸ç¬¦åˆäºŒåˆ†å›¾çš„å®šä¹‰ï¼Œä¸æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ï¼›å¦‚æœéå†å›¾ä¸­æ‰€æœ‰çš„è”é€šåˆ†é‡ï¼Œéƒ½æ²¡æœ‰äº§ç”ŸçŸ›ç›¾ï¼Œè¯´æ˜è¿™ä¸ªå›¾å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ã€‚ class Solution &#123; private boolean[] visited; // true è¡¨ç¤ºçº¢è‰²ï¼Œfalse è¡¨ç¤ºç»¿è‰²ï¼Œé»˜è®¤ä¸ºç»¿è‰² private boolean[] colors; public boolean isBipartite(int[][] graph) &#123; visited = new boolean[graph.length]; colors = new boolean[graph.length]; // éå†æ‰€æœ‰çš„è”é€šåˆ†é‡ for (int i = 0; i &lt; graph.length; i++) &#123; if (!visited[i]) &#123; if (!dfs(i, graph)) &#123; return false; &#125; &#125; &#125; return true; &#125; // dfs è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨ä»¥å½“ä¸ä¸ºäºŒåˆ†å›¾æ—¶æå‰ç»ˆæ­¢éå† private boolean dfs(int v, int[][] graph) &#123; visited[v] = true; for (int w: graph[v]) &#123; // å¦‚æœæœªè®¿é—®è¿‡ï¼ŒæŸ“ä¸ºç›¸åçš„é¢œè‰² if (!visited[w]) &#123; colors[w] = !colors[v]; // ç»§ç»­éå† if (!dfs(w, graph)) return false; // å¦‚æœå·²æ”¾è®¿é—®è¿‡ï¼Œä¸”ç›¸é‚»èŠ‚ç‚¹é¢œè‰²ç›¸åŒï¼Œä¸æ˜¯äºŒåˆ†å›¾ &#125; else if (visited[w] &amp;&amp; colors[w] == colors[v]) &#123; return false; &#125; &#125; // æœªå‘ç°çŸ›ç›¾ï¼Œä¸ºäºŒåˆ†å›¾ return true; &#125;&#125; å²›å±¿çš„æœ€å¤§é¢ç§¯é¢˜ç›®ä»‹ç»ç»™å®šä¸€ä¸ªåŒ…å«äº†ä¸€äº› 0 å’Œ 1 çš„éç©ºäºŒç»´æ•°ç»„ grid ã€‚ä¸€ä¸ªå²›å±¿æ˜¯ç”±ä¸€äº›ç›¸é‚»çš„ 1 (ä»£è¡¨åœŸåœ°) æ„æˆçš„ç»„åˆï¼Œè¿™é‡Œçš„ã€Œç›¸é‚»ã€è¦æ±‚ä¸¤ä¸ª 1 å¿…é¡»åœ¨æ°´å¹³æˆ–è€…ç«–ç›´æ–¹å‘ä¸Šç›¸é‚»ã€‚ä½ å¯ä»¥å‡è®¾ grid çš„å››ä¸ªè¾¹ç¼˜éƒ½è¢« 0 (ä»£è¡¨æ°´) åŒ…å›´ç€ã€‚ æ‰¾åˆ°ç»™å®šçš„äºŒç»´æ•°ç»„ä¸­æœ€å¤§çš„å²›å±¿é¢ç§¯(å¦‚æœæ²¡æœ‰å²›å±¿ï¼Œåˆ™è¿”å›é¢ç§¯ä¸º 0 )ã€‚ æ³¨æ„: ç»™å®šçš„çŸ©é˜µgrid çš„é•¿åº¦å’Œå®½åº¦éƒ½ä¸è¶…è¿‡ 50ã€‚ è§£é¢˜æ€è·¯æˆ‘ä»¬å°†è¿™ä¸ªçŸ©é˜µçœ‹åšæ˜¯ä¸€ä¸ªå›¾ï¼ŒçŸ©é˜µä¸­æ‰€æœ‰çš„ 1 å°±æ˜¯ä¸€ä¸ªä¸ªçš„èŠ‚ç‚¹ï¼Œå¦‚æœä¸¤ä¸ª 1 æ˜¯å‚ç›´æˆ–è€…æ°´å¹³ç›¸é‚»çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºå®ƒä»¬è¢«ä¸€æ¡è¾¹è¿ç€ï¼Œå³åœ¨ä¸€ä¸ªè”é€šåˆ†é‡ä¸­ï¼Œè€Œæˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯æ‰¾å‡ºåŒ…å«èŠ‚ç‚¹æœ€å¤šçš„è”é€šåˆ†é‡ï¼Œå¹¶è¿”å›èŠ‚ç‚¹æ•°ç›®ã€‚ import java.util.Arrays;import java.util.stream.Collectors;public class Solution &#123; private int rows; private int columns; private boolean[][] visited; private int[][] grid; public int maxAreaOfIsland(int[][] grid) &#123; // å› ä¸ºé¢˜ç›®æ²¡è¯´ grid ä¸ä¸ºç©ºï¼Œæ‰€ä»¥ä¸‹é¢æ˜¯å¯¹ grid çš„ä¸€äº›æ ¡éªŒ if (grid == null) &#123; return 0; &#125; this.rows = grid.length; if (rows == 0) &#123; return 0; &#125; this.columns = grid[0].length; if (columns == 0) &#123; return 0; &#125; this.grid = grid; this.visited = new boolean[rows][columns]; // æœ€å¤§å²›å±¿æ•°ç›® int max = 0; for (int row = 0; row &lt; rows; row++) &#123; for (int column = 0; column &lt; columns; column++) &#123; if (!visited[row][column] &amp;&amp; grid[row][column] == 1) &#123; // dfs è¿”å›çš„æ‰€åœ¨è”é€šåˆ†é‡çš„èŠ‚ç‚¹æ•°ç›® max = Math.max(max, dfs(row, column)); &#125; &#125; &#125; return max; &#125; // è¡¨ç¤ºä»¥ [row, column] ä¸ºèµ·ç‚¹è¿›è¡Œ DFS éå†æ‰€åœ¨è”é€šåˆ†é‡åŒ…å«çš„èŠ‚ç‚¹æ•°ç›® private int dfs(int row,int column) &#123; int count = 1; visited[row][column] = true; for (int[] w: adj(row, column)) &#123; int nextRow = w[0]; int nextColumn = w[1]; if (grid[nextRow][nextColumn] == 0) &#123; continue; &#125; if (!visited[nextRow][nextColumn]) &#123; count += dfs(nextRow, nextColumn); &#125; &#125; return count; &#125; // è·å¾—å½“å‰èŠ‚ç‚¹å››ä¸ªæ–¹å‘ä¸Šçš„ç›¸é‚»èŠ‚ç‚¹ private Iterable&lt;int[]&gt; adj(int row, int column) &#123; int[][] dirs = &#123;&#123;-1, 0&#125;, &#123;0, -1&#125;, &#123;0, 1&#125;, &#123;1, 0&#125;&#125;; return Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .collect(Collectors.toList()); &#125;&#125; äºŒè¿›åˆ¶çŸ©é˜µä¸­çš„æœ€çŸ­è·¯å¾„é¢˜ç›®ä»‹ç»åœ¨ä¸€ä¸ª $N \\times N$ çš„æ–¹å½¢ç½‘æ ¼ä¸­ï¼Œæ¯ä¸ªå•å…ƒæ ¼æœ‰ä¸¤ç§çŠ¶æ€ï¼šç©ºï¼ˆ0ï¼‰æˆ–è€…é˜»å¡ï¼ˆ1ï¼‰ã€‚ç°åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä» $(0, 0)$ åˆ°è¾¾ $(N-1, N-1)$ï¼Œå³ä»å·¦ä¸Šè§’åˆ°è¾¾å³ä¸‹è§’ï¼Œè€Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯»æ‰¾ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼Œå¹¶ä¸”è¿”å›è¿™æ¡è·¯å¾„çš„é•¿åº¦ã€‚å¦‚æœæ— æ³•ä»å·¦ä¸Šè§’è¾¾åˆ°å³ä¸‹è§’ï¼Œåˆ™è¿”å› -1ã€‚ æ¯ä¸ªå•å…ƒæ ¼æœ‰ 8 ç§å¯èƒ½çš„æ–¹å‘ ä¸‹é¢ç»™å‡ºä¸€ä¸ªç¤ºä¾‹ è§£é¢˜æ€è·¯æˆ‘ä»¬å°†æ–¹æ ¼çœ‹åšæ˜¯ä¸€ä¸ªå›¾ï¼Œæ–¹æ ¼ä¸­æ‰€æœ‰çš„ 0 çœ‹åšæ˜¯å›¾ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¸¤ä¸ª 0 åœ¨å„è‡ªçš„ 8 ä¸ªæ–¹å‘ä¹‹ä¸­ï¼Œå°±è¯´æ˜è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ã€‚ä¸ºäº†æ±‚å¾—æœ€çŸ­è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦ä»å·¦ä¸Šè§’è¿™ä¸ªèŠ‚ç‚¹è¿›è¡Œ BFSï¼Œä½¿ç”¨ dis[i][j] è®°å½• $(i, j)$ è·ç¦» $(0, 0)$ çš„è·ç¦»ï¼Œæ‰€ä»¥ $dis[N-1][N-1]$ ä¹Ÿå°±è¡¨ç¤ºä»å·¦ä¸Šè§’åˆ°è¾¾å³ä¸‹è§’çš„æœ€çŸ­è·¯å¾„ã€‚ import java.util.Arrays;import java.util.LinkedList;import java.util.Queue;import java.util.stream.Collectors;class Solution &#123; private boolean[][] visited; private int[][] dis; private int rows; private int columns; public int shortestPathBinaryMatrix(int[][] grid) &#123; this.rows = grid.length; this.columns = grid[0].length; if (grid[0][0] == 1 || grid[rows - 1][columns - 1] == 1) &#123; return -1; &#125; if (rows == 1 &amp;&amp; grid[rows][columns] == 0) &#123; return 1; &#125; dis = new int[rows][columns]; visited = new boolean[rows][columns]; Queue&lt;int[]&gt; queue = new LinkedList&lt;&gt;(); queue.add(new int[]&#123;0, 0&#125;); visited[0][0] = true; dis[0][0] = 1; while (!queue.isEmpty()) &#123; int[] location = queue.remove(); int row = location[0]; int column = location[1]; for (int[] nextLocation: adj(row, column)) &#123; int nextRow = nextLocation[0]; int nextColumn = nextLocation[1]; if (!visited[nextRow][nextColumn] &amp;&amp; grid[nextRow][nextColumn] == 0) &#123; queue.add(new int[]&#123;nextRow, nextColumn&#125;); visited[nextRow][nextColumn] = true; dis[nextRow][nextColumn] = dis[row][column] + 1; if (nextRow == rows - 1 &amp;&amp; nextColumn == columns - 1) &#123; return dis[nextRow][nextColumn]; &#125; &#125; &#125; &#125; return -1; &#125; private Iterable&lt;int[]&gt; adj(int row, int column) &#123; int[][] dirs = &#123;&#123;-1, 0&#125;, &#123;0, -1&#125;, &#123;0, 1&#125;, &#123;1, 0&#125;, &#123;1, 1&#125;, &#123;-1, 1&#125;, &#123;1, -1&#125;, &#123;-1, -1&#125;&#125;; return Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .collect(Collectors.toList()); &#125;&#125; æ‰“å¼€è½¬ç›˜é”é¢˜ç›®ä»‹ç»ä½ æœ‰ä¸€ä¸ªå¸¦æœ‰å››ä¸ªåœ†å½¢æ‹¨è½®çš„è½¬ç›˜é”ã€‚æ¯ä¸ªæ‹¨è½®éƒ½æœ‰10ä¸ªæ•°å­—ï¼š â€˜0â€™, â€˜1â€™, â€˜2â€™, â€˜3â€™, â€˜4â€™, â€˜5â€™, â€˜6â€™, â€˜7â€™, â€˜8â€™, â€˜9â€™ ã€‚æ¯ä¸ªæ‹¨è½®å¯ä»¥è‡ªç”±æ—‹è½¬ï¼šä¾‹å¦‚æŠŠ â€˜9â€™ å˜ä¸º â€˜0â€™ï¼Œâ€™0â€™ å˜ä¸º â€˜9â€™ ã€‚æ¯æ¬¡æ—‹è½¬éƒ½åªèƒ½æ—‹è½¬ä¸€ä¸ªæ‹¨è½®çš„ä¸€ä½æ•°å­—ã€‚ é”çš„åˆå§‹æ•°å­—ä¸º â€˜0000â€™ ï¼Œä¸€ä¸ªä»£è¡¨å››ä¸ªæ‹¨è½®çš„æ•°å­—çš„å­—ç¬¦ä¸²ã€‚åˆ—è¡¨ deadends åŒ…å«äº†ä¸€ç»„æ­»äº¡æ•°å­—ï¼Œä¸€æ—¦æ‹¨è½®çš„æ•°å­—å’Œåˆ—è¡¨é‡Œçš„ä»»ä½•ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œè¿™ä¸ªé”å°†ä¼šè¢«æ°¸ä¹…é”å®šï¼Œæ— æ³•å†è¢«æ—‹è½¬ã€‚å­—ç¬¦ä¸² target ä»£è¡¨å¯ä»¥è§£é”çš„æ•°å­—ï¼Œä½ éœ€è¦ç»™å‡ºæœ€å°çš„æ—‹è½¬æ¬¡æ•°ï¼Œå¦‚æœæ— è®ºå¦‚ä½•ä¸èƒ½è§£é”ï¼Œè¿”å› -1ã€‚ è§£é¢˜æ€è·¯æˆ‘ä»¬æŠŠå¯†ç é”çš„ä¸€ç§ç»„åˆç§°ä¹‹ä¸ºä¸€ç§çŠ¶æ€ï¼Œä¾‹å¦‚ 0000 è¿™ä¸ªç»„åˆè¡¨ç¤ºçš„å°±æ˜¯ä¸€ç§çŠ¶æ€ï¼Œç°åœ¨æˆ‘ä»¬çš„æ¨¡æ¿æ˜¯å°† 0000 è¿™ç§çŠ¶æ€è½¬å˜åˆ° target è¡¨ç¤ºçš„çŠ¶æ€ï¼Œå¹¶ä¸”è¦æ±‚æ­¥éª¤æœ€å°‘ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠä¸€ç§çŠ¶æ€å»ºæ¨¡ä¸ºå›¾ä¸­çš„é¡¶ç‚¹ï¼Œå¦‚æœä¸€ä¸ªçŠ¶æ€èƒ½å¤Ÿè½¬å˜ä¸ºå¦ä¸€ç§çŠ¶æ€ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªçŠ¶æ€è¡¨ç¤ºçš„èŠ‚ç‚¹ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ã€‚å¯¹äºå¯†ç é”æ¥è¯´ï¼Œæ¯ä¸€ä¸ªæ‹¨è½®å¯ä»¥å‰åæ»šåŠ¨ï¼Œå…±æœ‰å››ä¸ªæ‹¨è½®ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªçŠ¶æ€æœ€å¤šä¸ 8 ä¸ªçŠ¶æ€ç›¸é‚»(è€ƒè™‘åˆ° deadendsï¼Œå°‘äº 8 ä¸ª)ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦ä» 0000 è¿™ä¸ªçŠ¶æ€å¼€å§‹ BFS éå†ï¼Œå³å¯æ‰¾åˆ°æœ€å°‘åˆ° target çš„æ‹¨åŠ¨æ¬¡æ•°ã€‚ import java.util.*;import java.util.stream.Collectors;class Solution &#123; public int openLock(String[] deadends, String target) &#123; if (\"0000\".equals(target)) &#123; return 0; &#125; HashSet&lt;String&gt; deadSet = new HashSet&lt;&gt;(); for (int i = 0; i &lt; deadends.length; i++) &#123; deadSet.add(deadends[i]); &#125; if (deadSet.contains(\"0000\"))&#123; return -1; &#125; HashSet&lt;String&gt; visited = new HashSet&lt;&gt;(); HashMap&lt;String, Integer&gt; dis = new HashMap&lt;&gt;(); Queue&lt;String&gt; queue = new LinkedList(); queue.add(\"0000\"); visited.add(\"0000\"); dis.put(\"0000\", 0); while (!queue.isEmpty()) &#123; String state = queue.remove(); for (String nextState: adj(state, deadSet)) &#123; if (!visited.contains(nextState)) &#123; queue.add(nextState); visited.add(nextState); dis.put(nextState, dis.get(state) + 1); if (target.equals(nextState)) &#123; return dis.get(nextState); &#125; &#125; &#125; &#125; return -1; &#125; private Iterable&lt;String&gt; adj(String state, HashSet&lt;String&gt; deadSet) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 4; i++) &#123; char[] chars = state.toCharArray(); char s = chars[i]; chars[i] = Character.forDigit((chars[i] - '0' + 1) % 10, 10); list.add(new String(chars)); chars[i] = s; chars[i] = Character.forDigit((chars[i] - '0' - 1 + 10) % 10, 10); list.add(new String(chars)); &#125; return list.stream().filter(s -&gt; !deadSet.contains(s)).collect(Collectors.toList()); &#125;&#125; å€’æ°´æ™ºåŠ›é¢˜æœ‰ä¸¤ä¸ªæ¡¶ï¼Œä¸€ä¸ªèƒ½è£… 5 å‡æ°´ï¼Œä¸€ä¸ªèƒ½è£… 3 å‡æ°´ï¼Œå¦‚ä½•å¾—åˆ° 4 å‡æ°´? è¿™é“é¢˜è¿˜æ˜¯å°†çŠ¶æ€çœ‹åšæ˜¯ä¸€ä¸ªå›¾çš„èŠ‚ç‚¹ï¼Œå¦‚æœçŠ¶æ€ä¹‹é—´èƒ½å¤Ÿäº’ç›¸è½¬å˜ï¼Œå°±è¯´çŠ¶æ€ä¹‹å‰æœ‰ä¸€æ¡è¾¹ã€‚æˆ‘ä»¬å®šä¹‰çŠ¶æ€ &lt;x,y&gt; è¡¨ç¤ºç¬¬ä¸€ä¸ªæ¡¶æœ‰ x å‡æ°´ï¼Œç¬¬äºŒä¸ªæ¡¶æœ‰ y å‡æ°´ã€‚é‚£ä¹ˆ &lt;x, y&gt; ä¸å“ªäº›çŠ¶æ€æ˜¯ç›¸è¿çš„å‘¢ï¼Œåˆ†ä¸ºå…­ç§æƒ…å†µï¼š å€’ç©ºç¬¬ä¸€æ¡¶æ°´ï¼š&lt;x, y&gt; =&gt; &lt;0, y&gt; å€’ç©ºç¬¬äºŒæ¡¶æ°´ï¼š&lt;x, y&gt; =&gt; &lt;x, 0&gt; åŠ æ»¡ç¬¬ä¸€æ¡¶æ°´ï¼š&lt;x, y&gt; =&gt; &lt;5, y&gt; åŠ æ»¡ç¬¬äºŒæ¡¶æ°´ï¼š&lt;x, y&gt; =&gt; &lt;x, 3&gt; ç¬¬äºŒæ¡¶æ°´å€’å…¥ç¬¬ä¸€æ¡¶æ°´ï¼š $x + y \\geq 5$ï¼š&lt;x, y&gt; =&gt; &lt;5, x + y - 5&gt; $x + y &lt; 5$ï¼š&lt;x, y&gt; =&gt; &lt;x + y, 0&gt; ç¬¬ä¸€æ¡¶æ°´å€’å…¥ç¬¬äºŒæ¡¶æ°´ï¼š $x + y \\geq 3$ï¼š&lt;x, y&gt; =&gt; &lt;x + y - 3, 3&gt; $x + y &lt; 3$ï¼š&lt;x, y&gt; =&gt; &lt;0, x + y&gt; æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¸¤ä½æ•°è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€ï¼Œåä½æ•°è¡¨ç¤ºç¬¬ä¸€ä¸ªæ¡¶ä¸­æœ‰å¤šå°‘å‡æ°´ï¼Œä¸ªä½æ•°è¡¨ç¤ºç¬¬äºŒä¸ªæ¡¶ä¸­æœ‰å¤šå°‘å‡æ°´ï¼Œä¾‹å¦‚ 23 è¡¨ç¤ºç¬¬ä¸€ä¸ªæ¡¶ä¸­æœ‰ 2 å‡æ°´ï¼Œç¬¬äºŒä¸ªæ¡¶ä¸­æœ‰ 3 å‡æ°´ã€‚ import java.util.*;public class WaterPuzzle &#123; public Iterable&lt;Integer&gt; waterPuzzle() &#123; HashSet&lt;Integer&gt; visited = new HashSet&lt;&gt;(); HashMap&lt;Integer, Integer&gt; pre = new HashMap&lt;&gt;(); Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(0); visited.add(0); pre.put(0, 0); // ä¿å­˜æœ€åæ‰¾åˆ°çš„ç»“æœ int endState = 0; // ç”¨ä»¥è·³å‡º while å¾ªç¯ boolean flag = false; while (!queue.isEmpty()) &#123; int state = queue.remove(); for (int nextState: adj(state)) &#123; if (!visited.contains(nextState)) &#123; visited.add(nextState); queue.add(nextState); pre.put(nextState, state); if (nextState / 10 == 4 || nextState % 10 == 4) &#123; endState = nextState; flag = true; break; &#125; &#125; &#125; if (flag) &#123; break; &#125; &#125; ArrayList&lt;Integer&gt; result = new ArrayList(); int cur = endState; result.add(cur); while (pre.get(cur) != 0) &#123; cur = pre.get(cur); result.add(cur); &#125; Collections.reverse(result); return result; &#125; private Iterable&lt;Integer&gt; adj(int state) &#123; int first = state / 10; int second = state % 10; Set&lt;Integer&gt; set = new HashSet&lt;&gt;(); set.add(second); set.add(first*10); set.add(5*10 + second); set.add(first * 10 + 3); if (first + second &gt;= 5) &#123; set.add(5 * 10 + (first + second) - 5); &#125; else &#123; set.add((first + second) * 10); &#125; if (first + second &gt;= 3) &#123; set.add((first + second - 3) * 10 + 3); &#125; else &#123; set.add(first + second); &#125; return new ArrayList&lt;&gt;(set); &#125; public static void main(String[] args) &#123; WaterPuzzle waterPuzzle = new WaterPuzzle(); for (int r: waterPuzzle.waterPuzzle()) &#123; // åœ¨ä¸ªä½æ•°å‰åŠ ä¸Š0 System.out.print((r &gt;= 10 ? r : \"0\" + r) + \" \"); &#125; &#125;&#125; è¾“å‡ºä¸º 50 23 20 02 52 43 æ»‘åŠ¨è°œé¢˜é¢˜ç›®ä»‹ç»åœ¨ä¸€ä¸ª 2 x 3 çš„æ¿ä¸Šï¼ˆboardï¼‰æœ‰ 5 å—ç –ç“¦ï¼Œç”¨æ•°å­— 1~5 æ¥è¡¨ç¤º, ä»¥åŠä¸€å—ç©ºç¼ºç”¨ 0 æ¥è¡¨ç¤ºã€‚ä¸€æ¬¡ç§»åŠ¨å®šä¹‰ä¸ºé€‰æ‹© 0 ä¸ä¸€ä¸ªç›¸é‚»çš„æ•°å­—ï¼ˆä¸Šä¸‹å·¦å³ï¼‰è¿›è¡Œäº¤æ¢ã€‚æœ€ç»ˆå½“æ¿ board çš„ç»“æœæ˜¯ [[1,2,3],[4,5,0]] è°œæ¿è¢«è§£å¼€ã€‚ ç»™å‡ºä¸€ä¸ªè°œæ¿çš„åˆå§‹çŠ¶æ€ï¼Œè¿”å›æœ€å°‘å¯ä»¥é€šè¿‡å¤šå°‘æ¬¡ç§»åŠ¨è§£å¼€è°œæ¿ï¼Œå¦‚æœä¸èƒ½è§£å¼€è°œæ¿ï¼Œåˆ™è¿”å› -1 ã€‚ è§£é¢˜æ€è·¯æˆ‘ä»¬å°†è°œæ¿ä¸Šçš„ä¸€ä¸ªç»„åˆçœ‹åšæ˜¯ä¸€ä¸ªçŠ¶æ€ï¼Œä¸€ä¸ªçŠ¶æ€å°±æ˜¯å›¾ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¸€ä¸ªçŠ¶æ€èƒ½å¤Ÿè½¬å˜åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªçŠ¶æ€èŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹è¿æ¥ã€‚æˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²æ¥è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€ï¼Œä¾‹å¦‚ [[1, 4, 5], [0, 2, 3]] è¿™ä¸ªçŠ¶æ€è¡¨ç¤ºä¸º &quot;145023&quot;ï¼Œç°åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯»æ‰¾ä¸€æ¡ä»åˆå§‹çŠ¶æ€åˆ° &quot;123450&quot; è¿™ä¸ªçŠ¶æ€çš„æœ€çŸ­è·¯å¾„ï¼Œä½¿ç”¨ BFS ç®—æ³•å³å¯ import java.util.*;import java.util.stream.Collectors;public class Solution &#123; private HashMap&lt;String, Integer&gt; visited = new HashMap&lt;&gt;(); private int rows; private int columns; public int slidingPuzzle(int[][] board) &#123; this.rows = board.length; this.columns = board[0].length; String initState = boardToString(board); if (initState.equals(\"123450\")) &#123; return 0; &#125; Queue&lt;String&gt; queue = new LinkedList(); queue.add(initState); visited.put(initState, 0); while (!queue.isEmpty()) &#123; String state = queue.remove(); for (String nextState: adj(state)) &#123; if (!visited.containsKey(nextState)) &#123; queue.add(nextState); visited.put(nextState, visited.get(state) + 1); if (\"123450\".equals(nextState)) &#123; return visited.get(nextState); &#125; &#125; &#125; &#125; return -1; &#125; private String boardToString(int[][] board) &#123; StringBuilder stringBuilder = new StringBuilder(); for (int i = 0; i &lt; rows; i++) &#123; for (int j = 0; j &lt; columns; j++) &#123; stringBuilder.append(board[i][j]); &#125; &#125; return stringBuilder.toString(); &#125; private Iterable&lt;String&gt; adj(String state) &#123; ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;(); char[] chars = state.toCharArray(); int index = state.indexOf(\"0\"); int row = index / columns; int column = index % columns; int[][] dirs = &#123;&#123;0, 1&#125;, &#123;0, -1&#125;, &#123;1, 0&#125;, &#123;-1, 0&#125;&#125;; List&lt;Integer&gt; locations = Arrays.stream(dirs) .map(dir -&gt; new int[]&#123;dir[0] + row, dir[1] + column&#125;) .filter(item -&gt; item[0] &lt; rows &amp;&amp; item[0] &gt;= 0 &amp;&amp; item[1] &lt; columns &amp;&amp; item[1] &gt;= 0) .map(item -&gt; item[0] * columns + item[1]) .collect(Collectors.toList()); for (int i: locations) &#123; String res = swap(chars, index, i); result.add(res); swap(chars, i, index); &#125; return result; &#125; private String swap(char[] chars, int i, int j) &#123; char temp = chars[i]; chars[i] = chars[j]; chars[j] = temp; return new String(chars); &#125;&#125;","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"å›¾è®º","slug":"å›¾è®º","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9B%BE%E8%AE%BA/"}]},{"title":"ES6ï¼šå‡½æ•°","date":"2021-01-18T09:20:00.000Z","path":"/ES6ï¼šå‡½æ•°/","text":"é»˜è®¤å‚æ•°å¦‚æœåœ¨è°ƒç”¨å‡½æ•°æ—¶æ²¡æœ‰ä¼ å…¥å‚æ•°æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨é»˜è®¤å€¼ï¼ŒES5 çš„å†™æ³•å¦‚ä¸‹ function getValue(url, timeout, callback) &#123; timeout = timeout || 2000; callback = callback || function(data) &#123; console.log(data); &#125; // å…¶ä»–å¤„ç†é€»è¾‘&#125; ä½†æ˜¯ä¸Šé¢çš„ä»£ç æœ‰é—®é¢˜ï¼Œå¦‚æœ timeout ä¼ å…¥çš„æ˜¯ 0ï¼Œé‚£ä¹ˆ timeout è¿˜æ˜¯ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼Œå› ä¸º 0 å¯¹åº”çš„ boolean ä¸º falseï¼Œæ‰€ä»¥ä»£ç ä¼šä¿®æ”¹å¦‚ä¸‹ function getValue(url, timeout, callback) &#123; timeout = (typeof timeout !== 'undefined') ? timeout : 2000; callback = (typeof callback !== 'undefined') ? callback : function(data) &#123; console.log(data); &#125; // å…¶ä»–å¤„ç†é€»è¾‘&#125; ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨ ES6 é€šè¿‡ç®€å•çš„å†™æ³•å®ç°ä¸Šé¢çš„æ•ˆæœ function getValue(url, timeout = 2000, callback = function(data) &#123;console.log(data)&#125;) &#123; // å…¶ä»–å¤„ç†é€»è¾‘&#125; ä¸Šé¢çš„ timeout å’Œ callback å‚æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºé»˜è®¤å‚æ•°ï¼Œå½“è°ƒç”¨å‡½æ•°æ²¡æœ‰ä¼ å…¥å‚æ•°ï¼Œæˆ–è€…ä¼ å…¥çš„å‚æ•°ä¸º undefiend æ—¶ï¼Œå°±æ˜¯ä½¿ç”¨æŒ‡å®šçš„é»˜è®¤å‚æ•°ã€‚ arguments å¯¹è±¡æ¯ä¸€ä¸ªå‡½æ•°ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ª arguments å¯¹è±¡ï¼Œå…¶ä¸­ä¿å­˜çš„æ˜¯ä¼ å…¥çš„å‚æ•°å€¼ã€‚arguments å¯¹è±¡åœ¨ä¸¥æ ¼å’Œéä¸¥æ ¼æ¨¡å¼ä¸‹çš„è¡Œä¸ºæ˜¯ä¸åŒçš„ã€‚ åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œarguments ä¼šå—åˆ°å‘½åå‚æ•°çš„å½±å“ï¼Œå³åœ¨å‡½æ•°å†…å¯¹å‘½åå‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿä¼šç›¸åº”çš„å¯¹ arguments å¯¹è±¡äº§ç”Ÿä¿®æ”¹ function getName(first, second) &#123; console.log(first === arguments[0]); // true console.log(second === arguments[1]); // true first = 'a'; second = 'b'; console.log(first === arguments[0]); // true console.log(second === arguments[1]); // true&#125; åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¯¹å‘½åå‚æ•°çš„ä¿®æ”¹ä¸ä¼šå½±å“ arguments å¯¹è±¡ function getName(first, second = \"hello\") &#123; \"use strict\" console.log(first === arguments[0]); // true console.log(second === arguments[1]); // true first = 'a'; second = 'b'; console.log(first === arguments[0]); // false console.log(second === arguments[1]); // false&#125; å¯¹äºé»˜è®¤å‚æ•°ï¼Œæ— è®ºæ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼è¿˜æ˜¯åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¯¹å‘½åå‚æ•°çš„ä¿®æ”¹éƒ½ä¸ä¼šå½±å“ arguments å¯¹è±¡ function getName(first, second = \"hello\") &#123; console.log(first === arguments[0]); // true console.log(second === arguments[1]); // false first = 'a'; second = 'b'; console.log(first === arguments[0]); // false console.log(second === arguments[1]); // false&#125;getName(\"Hello\") å› ä¸ºåªä¼ å…¥äº†ä¸€ä¸ªå‚æ•°å€¼ï¼Œæ‰€ä»¥ arguments[0] === firstï¼Œè€Œ arguments[1] === undefiend ï¼Œæ‰€ä»¥ second çš„å€¼ä¸ arguments[1] ä¸ç›¸ç­‰ã€‚ è¡¨è¾¾å¼é»˜è®¤å‚æ•°çš„å–å€¼é™¤äº†åŸå§‹å€¼ä»¥å¤–ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¾‹å¦‚ function getValue() &#123; return 5;&#125;function add(first, second = getValue()) &#123; return first + second;&#125;add(1, 1); // 2add(1); // 6 ç”šè‡³ä½ å¯ä»¥å°†å‰é¢çš„å‚æ•°ä½œä¸ºåé¢å‚æ•°çš„é»˜è®¤å€¼ function add(first, second = first) &#123; return first + second;&#125;add(1, 2); // 3add(2); // 4 TDZ(æš‚æ—¶æ€§æ­»åŒº)æ‰€è°“çš„ä¸´æ—¶æ­»åŒºæ˜¯æŒ‡åœ¨å˜é‡å£°æ˜ä¹‹å‰ï¼Œä¸èƒ½å¤Ÿè®¿é—®è¯¥å˜é‡ function add(first = second, second) &#123; return first + second;&#125;add(undefined, 2); // ReferenceError: Cannot access 'second' before initialization ä¸Šé¢æˆ‘ä»¬è®¾ç½® first çš„é»˜è®¤å€¼ä¸º secondï¼Œå½“æˆ‘ä»¬ä¸º first ä¼ å…¥ udefiend æ—¶ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼Œä½†æ˜¯æ­¤æ—¶ second å¹¶æœªåˆå§‹åŒ–ï¼Œæ‰€ä»¥è¿™æ—¶è®¿é—® second ä¼šå‘ç”Ÿé”™è¯¯ã€‚ åŒ¿åå‚æ•°å½“æˆ‘ä»¬è°ƒç”¨ JavaScript çš„å‡½æ•°æ—¶ï¼Œä¼ å…¥çš„å‚æ•°ä¸ªæ•°å¯ä»¥ä¸å®šä¹‰å‡½æ•°æ—¶è¦æ±‚çš„å‡½æ•°ä¸ªæ•°ä¸åŒï¼Œå¯å¤šå¯å°‘ã€‚æ‰€ä»¥ä¼ å…¥çš„å‚æ•°éƒ½ä¼šä¿å­˜åœ¨ arguments å¯¹è±¡ä¸­ï¼Œæ— è®ºæ˜¯åœ¨å‡½æ•°ç­¾åä¸­å·²ç»å®šä¹‰äº†çš„å‚æ•°(å‘½åå‚æ•°)è¿˜æ˜¯æœªå®šä¹‰çš„å‚æ•°(åŒ¿åå‚æ•°) function print(arg) &#123; for(let i = 0; i &lt; arguments.length; i++) &#123; console.log(arguments[i]); &#125;&#125;print(\"a\", \"b\", \"c\"); // a // b // c åœ¨ ES6 ä¸­å¼•å…¥äº†å‰©ä½™å‚æ•°(Rest Parameters)ï¼Œå‰©ä½™å‚æ•°ä¸­åªä¿ç•™åŒ¿åå‚æ•°çš„å€¼ function print(arg, ...values) &#123; for(let i = 0; i &lt; values.length; i++) &#123; console.log(values[i]); &#125;&#125;print(\"a\", \"b\", \"c\"); // b // c, åœ¨ä¸Šé¢å¯¹å‡½æ•°è¿›è¡Œäº†ä¸€ç‚¹ä¿®æ”¹ï¼Œåœ¨å‚æ•°åˆ—è¡¨ä¸­æ·»åŠ äº†ä¸€é¡¹ ...values ,values è¡¨ç¤ºçš„å°±æ˜¯å‰©ä½™å‚æ•°ï¼Œå¦‚æœè°ƒç”¨å‡½æ•°æ—¶å¤šä¼ å…¥äº†å‚æ•°ï¼Œé‚£ä¹ˆå¤šä½™çš„å‚æ•°å°±ä¼šæ”¾å…¥ values è¿™ä¸ªæ•°ç»„ä¸­ã€‚ å‰©ä½™å‚æ•°ä¸ arguments å‚æ•°çš„ä¸åŒï¼š å‰©ä½™å‚æ•°æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼Œè€Œ arguments æ˜¯ä¸€ä¸ªç±»æ•°ç»„ å‰©ä½™å‚æ•°ä¸­åªä¿å­˜äº†åŒ¿åå‚æ•°çš„å€¼ï¼Œè€Œ argumentsåˆ™ä¿å­˜äº†æ‰€æœ‰ä¼ å…¥çš„å€¼ ä½¿ç”¨å‰©ä½™å‚æ•°æœ‰ä¸¤ç‚¹é™åˆ¶ï¼š ä¸€ä¸ªå‡½æ•°ä¸­åªèƒ½æœ‰ä¸€ä¸ªå‰©ä½™å‚æ•°ï¼Œä¸”å‰©ä½™å‚æ•°å¿…é¡»æ”¾ç½®åœ¨å‚æ•°åˆ—è¡¨çš„æœ€å å‰©ä½™å‚æ•°ä¸èƒ½ç”¨äºå¯¹è±¡çš„ setter æ–¹æ³•ä¸­ let obj = &#123; // SyntaxError: Setter function argument must not be a rest parameter set name(...values) &#123; // do something &#125;&#125; è¿™æ˜¯å› ä¸º setter æ–¹æ³•è¢«é™åˆ¶ä¸ºåªèƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯å‰©ä½™å‚æ•°ç†è®ºä¸Šè¡¨ç¤ºçš„æ˜¯å¯ä»¥æ¥å—æ— ç©·å¤šçš„å‚æ•°ã€‚ æ— è®ºåœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸­æ˜¯å¦å®šä¹‰äº†å‰©ä½™å‚æ•°ï¼Œéƒ½å¯¹ arguments å¯¹è±¡æ²¡æœ‰å½±å“ï¼Œå®ƒå§‹ç»ˆä¿å­˜ç€ä¼ å…¥å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚ Function å¢å¼ºFunction æ„é€ å‡½æ•°ä¸€èˆ¬æ˜¯ç”¨æ¥ç”Ÿæˆå‡½æ•°å®ä¾‹çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆå°‘ç”¨åˆ°å®ƒæ¥å£°æ˜ä¸€ä¸ªå‡½æ•° let add = new Function(\"first\", \"second\", \"return first + second\");console.log(add(1, 2)); // 3 åœ¨ ES6 ä¸­å¯¹ Function æ„é€ å‡½æ•°è¿›è¡Œäº†å¢å¼ºï¼Œä½¿å®ƒèƒ½å¤Ÿä½¿ç”¨é»˜è®¤å‚æ•°å’Œå‰©ä½™å‚æ•° let add= new Function(\"first\", \"second = first\", \"return first + second\");console.log(add(2)); // 4 let print = new Function(\"...values\", \"console.log(values[0])\");print(1, 2, 3); // 1 å±•å¼€è¿ç®—ç¬¦ä¸å‰©ä½™å‚æ•°å¯†åˆ‡ç›¸å…³å°±æ˜¯å±•å¼€è¿ç®—ç¬¦ï¼Œå‰©ä½™å‚æ•°æ˜¯å°†å¤šä¸ªç‹¬ç«‹çš„å‚æ•°åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œè€Œå±•å¼€è¿ç®—ç¬¦åˆ™ç›¸åï¼Œå‘ä¸€ä¸ªæ•°ç»„å±•å¼€ä¸ºä¸€ä¸ªä¸ªç‹¬ç«‹çš„å‚æ•°ã€‚è€ƒè™‘ Math.max æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å‚æ•° Math.max(3, 5); å½“å‚æ•°çš„ä¸ªæ•°æ¯”è¾ƒå°‘æ—¶å¯ä»¥è¿˜ç®—å®¹æ˜“ä½¿ç”¨ï¼Œå½“éœ€è¦æ¯”è¾ƒçš„å‚æ•°è¾ƒå¤šæ—¶ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå°†å‚æ•°æ”¾ç½®åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ç„¶åä¼ å…¥ï¼Œä½†æ˜¯Math.max ä¸æ¥æ”¶æ•°ç»„ï¼Œå®ƒåªæ¥æ”¶ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å‚æ•° Math.max([1, 3, 5, 4]); // Ã—Math.max(1, 3, 5, 4); // âˆš è¿™ä¸ªæ—¶å€™æˆ‘ä»¬é€šè¿‡ä¼šå€ŸåŠ©äº apply æ–¹æ³•ï¼Œå› ä¸º apply æ–¹æ³•æ˜¯å°†æ–¹æ³•çš„å‚æ•°åˆå¹¶ä¸ºæ•°ç»„ä¼ å…¥çš„ Math,max.apply(Math, [1, 3, 5, 4]); åœ¨ ES6 ä¸­æä¾›äº†å±•å¼€è¿ç®—ç¬¦ï¼Œå¯ä»¥ç›´æ¥å°†æ•°ç»„å±•å¼€ä¸ºä¸€ä¸ªä¸ªçš„ç‹¬ç«‹å‚æ•°è¿›è¡Œä¼ å…¥ Math.max(...[1, 3, 5, 4]) name å±æ€§ ç”±äºæœ‰å¤šç§æ–¹å¼åˆ›å»ºå‡½æ•°ï¼Œæ‰€ä»¥è¯†åˆ«ä¸€ä¸ªå‡½æ•°å¾ˆéš¾ åŒ¿åå‡½æ•°çš„ç››è¡Œï¼Œä½¿å¾—è°ƒè¯•ååˆ†å›°éš¾ï¼Œæ— æ³•è·Ÿè¸ªå †æ ˆä¿¡æ¯ å‡ºäºå¦‚ä¸ŠåŸå› ï¼ŒES6 ä¸ºæ‰€æœ‰çš„å‡½æ•°éƒ½æ·»åŠ äº†ä¸€ä¸ª name å±æ€§ã€‚ function doSomething() &#123; // empty&#125;const doOtherThing = function() &#123; // empty&#125;const anotherThing = doOtherThing;console.log(doSomething.name); // doSomethingconsole.log(doOtherThing.name); // doOtherThingconsole.log(anotherThing.name); // doOtherThing å‡½æ•° doSomething çš„ name å±æ€§ä¸º doSomethingï¼Œå› ä¸ºå®ƒçš„å‡½æ•°ç­¾åä¸º doSomethingï¼›åŒ¿åå‡½æ•° doOtherThing çš„ name å±æ€§ä¸º doOtherThingï¼Œå› ä¸ºå®ƒè¢«èµ‹äºˆçš„å˜é‡åä¸º doOtherThingã€‚anotherThing çš„ name å±æ€§è¿˜æ˜¯ä¸º doOtherThingï¼Œè¯´æ˜åŒ¿åå‡½æ•°çš„ name å±æ€§å¹¶ä¸ä¼šæ›´æ”¹ã€‚ ä¸‹é¢çœ‹å‡ ä¸ªç‰¹ä¾‹ï¼š let doSomething= function doSomethingElse() &#123; // empty&#125;console.log(doSomething.name); // doSomethingElse let doSomething = function() &#123; // empty&#125;console.log(doSomething.bind().name); // bound doSomething console.log((new Function()).name); // anonymous å‡½æ•°çš„å¤šé‡è§’è‰²å‡½æ•°å¯ä»¥é€šè¿‡ new è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ä¸é€šè¿‡ new è°ƒç”¨ã€‚JavaScript çš„å‡½æ•°å«æœ‰ä¸¤ä¸ªå†…éƒ¨å¯è§çš„æ–¹æ³•ï¼Œ[[Call]] å’Œ [[Construct]]ã€‚ å½“ä¸€ä¸ªå‡½æ•°é€šè¿‡ new è°ƒç”¨æ—¶ï¼Œ[[Construct]] æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡çš„ï¼Œç§°ä¹‹ä¸ºå®ä¾‹ï¼Œé€šè¿‡å‡½æ•°ä½“å†…éƒ¨çš„ this æ¥è®¾ç½®å®ä¾‹ã€‚æ‹¥æœ‰ [[Construct]] æ–¹æ³•çš„å‡½æ•°å«åšæ„é€ å™¨ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰[[Construct]] æ–¹æ³•ï¼Œä¾‹å¦‚åé¢æåŠçš„ç®­å¤´å‡½æ•°å°±æ²¡æœ‰ã€‚ å½“å‡½æ•°ä¸æ˜¯é€šè¿‡ new è°ƒç”¨æ—¶ï¼Œå°±æ˜¯è°ƒç”¨å‡½æ•°å†…éƒ¨çš„ [[Call]] æ–¹æ³•ï¼Œå®ƒä¼šæ‰§è¡Œå‡½æ•°çš„æ–¹æ³•ä½“ã€‚ é‚£ä¹ˆå¦‚ä½•åˆ†è¾¨å‡½æ•°ä»¥ä½•ç§æ–¹å¼è°ƒç”¨å‘¢? åœ¨ ES5 ä¸­ï¼Œå¸¸å¸¸é€šè¿‡ instance æ¥åˆ¤åˆ« function Person(name) &#123; if(this instanceof Person) &#123; this.name = name; &#125; else &#123; throw new Error(\"You must use new with Person\"); &#125;&#125;let person = new Person(\"Alice\");let notAPerson = Person(\"Bob\"); // Error: You must use new with Person ä¸Šé¢çš„æ–¹æ³•èƒ½å¤Ÿæœ‰æ•ˆæ˜¯å› ä¸º [[Construct]] æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª Person çš„å®ä¾‹ï¼Œå¹¶å°†å®ƒèµ‹å€¼ç»™ thisã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¹¶ä¸å¯é ï¼Œå› ä¸ºä¸ä½¿ç”¨ new ä¹Ÿå¯ä»¥å¾—åˆ° Person çš„å®ä¾‹ function Person(name) &#123; if(this instanceof Person) &#123; this.name = name; &#125; else &#123; throw new Error(\"You must use new with Person\"); &#125;&#125;let person = new Person(\"Alice\");let notAPerson = Person.call(person, \"Bob\"); // æ²¡æœ‰æŠ¥é”™ åœ¨ ES6 ä¸­æå‡ºäº†æ›´å¥½çš„è§£å†³åŠæ³•ï¼Œé‚£å°±æ˜¯ new.targetï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°çš„ [[Construct]] æ–¹æ³•è¢«è°ƒç”¨ï¼Œnew.target çš„å€¼å°±ä¼šè¢«èµ‹å€¼ä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦‚æœ [[Call]] è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆ new.target çš„å€¼å°±æ˜¯ undefiendã€‚æ‰€ä»¥é€šè¿‡ new.target å¯ä»¥æ–¹ä¾¿çš„çŸ¥é“æ˜¯é€šè¿‡ä½•ç§æ–¹å¼è°ƒç”¨çš„å‡½æ•° function Person(name) &#123; if (new.target !== undefined)&#123; this.name = name; &#125; else &#123; throw new Error(\"You must use new with Person\"); &#125;&#125;let person = new Person(\"Alice\");let notAPerson = Person.call(person, \"Bob\"); // Error: You must use new with Person åœ¨å‡½æ•°çš„å¤–éƒ¨ä¸èƒ½ä½¿ç”¨ new.targetï¼Œ å¦åˆ™ä¼šæŠ¥è¯­æ³•é”™è¯¯ã€‚ Block-Level Functionsåœ¨ ES3 æˆ–è€…æ›´æ—©ä»¥å‰ï¼Œæ˜¯ä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸä¸­å®šä¹‰å‡½æ•°çš„ï¼Œä½†æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸€è¡Œä¸ºï¼Œäºæ˜¯åœ¨ ES5 ä¸­ï¼Œä¸ºäº†ä¿®å¤è¿™ä¸å…¼å®¹çš„è¡Œä¸ºï¼Œè§„å®šåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹è½½å—çº§ä½œç”¨åŸŸä¸­å£°æ˜å‡½æ•°å°†ä¼šå¯¼è‡´é”™è¯¯ \"use strict\"if (condition) &#123; // åœ¨ ES5 ä¸­ä¼šå¯¼è‡´é”™è¯¯ function doSomething() &#123; // empty &#125;&#125; ä½†æ˜¯ä¸Šé¢çš„è¡Œä¸ºåœ¨ ES6 ä¸­å´æ˜¯å¯ä»¥çš„ï¼Œåœ¨ ES6 çš„ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåªåœ¨å—çº§ä½œç”¨åŸŸä¸­ï¼Œåœ¨å—çº§ä½œç”¨åŸŸä»¥å¤–ä¸èƒ½è®¿é—®è¯¥å‡½æ•° \"use strict\"console.log(typeof doSomething); // undefinedif (true) &#123; console.log(typeof doSomething); // function function doSomething() &#123; // empty &#125; console.log(typeof doSomething); // function&#125;console.log(typeof doSomething); // undefiend å› ä¸ºå¯¹äºå‡½æ•°çš„å£°æ˜ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸçš„æœ€å‰æ–¹ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ª typeof doSomething çš„ç»“æœæ˜¯functionã€‚ ä¸Šé¢çš„è¡Œä¸ºéƒ½æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å‘ç”Ÿçš„ï¼Œé‚£ä¹ˆåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°çš„å£°æ˜æ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œæ‰€ä»¥å‡½æ•°çš„å£°æ˜æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œå³åœ¨å—çº§ä½œç”¨åŸŸä¹‹å¤–ä¹Ÿå¯ä»¥è®¿é—®åˆ°å‡½æ•°ã€‚ ç®­å¤´å‡½æ•°è¯­æ³•ç®­å¤´å‡½æ•°æ˜¯ ES6 ä¸­çš„æ–°è¯­æ³•ï¼Œæ­£å¦‚åå­—æ‰€æš—ç¤ºçš„ä¸€æ ·ï¼Œæ˜¯ä½¿ç”¨ç®­å¤´æ¥å£°æ˜å‡½æ•°çš„ï¼Œä¾‹å¦‚ let add = (x, y) =&gt; &#123; return x + y;&#125;add(1, 2); // 3 ä¸Šé¢çš„å‡½æ•°ç­‰ä»·äº(å½“ç„¶ä¸æ˜¯å®Œå…¨ç­‰ä»·ï¼Œå…·ä½“çš„åŒºåˆ«åæ–‡è¯¦è¿°) let add= function(x, y) &#123; return x + y;&#125; ç®­å¤´å‡½æ•°ç”±ä¸‰éƒ¨åˆ†ç»„æˆ å‚æ•°åˆ—è¡¨ï¼šä½¿ç”¨æ‹¬å·å°†å‚æ•°æ‹¬èµ·ï¼Œå‚æ•°ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš” (x, y) (x, y = x) ç®­å¤´ï¼šâ‡’ å‡½æ•°ä½“ï¼šä½¿ç”¨èŠ±æ‹¬å·æ‹¬èµ· å¦‚æœå‚æ•°åˆ—è¡¨åªæœ‰ä¸€ä¸ªå‚æ•°çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥å‚æ•°åˆ—è¡¨ä¸å†™æ‹¬å· (x) =&gt; &#123; return x;&#125;// ç­‰ä»·äºx =&gt; &#123; return x;&#125; å¦‚æœå‡½æ•°ä½“ä¸­åªæœ‰ä¸€æ¡è¯­å¥çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥çœç•¥èŠ±æ‹¬å· x =&gt; return x; è¿›ä¸€æ­¥ï¼Œå¦‚æœè¿™ä¸€æ¡è¯­å¥ç›´æ¥è¿”å›ä¸€ä¸ªå€¼çš„è¯ï¼Œreturn ä¹Ÿå¯ä»¥çœç•¥ï¼Œå®ƒä¼šè®¡ç®—è¿™æ¡è¯­å¥ï¼Œç„¶åå°†å€¼è¿”å› x =&gt; x; å¦‚æœæ˜¯ç›´æ¥è¿”å›ä¸€ä¸ªå­—é¢é‡å¯¹è±¡çš„è¯ï¼Œéœ€è¦ä½¿ç”¨æ‹¬å·æ‹¬èµ· () =&gt; (&#123;x: 1, y: 2&#125;);// ç­‰ä»·äºfunction() &#123; return &#123; x: 1, y: 2 &#125;&#125; æ—  this ç»‘å®šåœ¨ JavaScript ä¸­ï¼Œæ¯ä¸€ä¸ªå‡½æ•°éƒ½ä¼šé»˜è®¤çš„ä¼ å…¥ä¸€ä¸ª this å‚æ•°ï¼Œå®ƒçš„å–å€¼å–å†³äºè°ƒç”¨æ–¹å¼ï¼Œè€Œä¸æ˜¯æ‰€å¤„çš„ä½ç½® function Person(name) &#123; this.name = name; this.getName = function() &#123; return this.name; &#125;&#125;let person = new Person(\"Alice\");console.log(person.getName()); // Aliceconsole.log(person.getName.call(global)); // undefiend ä¸åŒçš„è°ƒç”¨æ–¹å¼ï¼Œå‡½æ•°å†…éƒ¨ this çš„å–å€¼ä¹Ÿä¸åŒï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å°±å†™å‡ºé”™è¯¯çš„ä»£ç ã€‚ä½†æ˜¯ç®­å¤´å‡½æ•°å†…éƒ¨æ²¡æœ‰ this ç»‘å®šï¼Œè¿™æ„å‘³ç€å®ƒä¼šåœ¨å®ƒçš„ä½œç”¨åŸŸé“¾ä¸­å»å¯»æ‰¾ this function Person(name) &#123; this.name = name; this.getName = () =&gt; &#123; return this.name; &#125;&#125;let person = new Person(\"Alice\");console.log(person.getName()); // Aliceconsole.log(person.getName.call(global)); // Alice ä¸Šé¢ä¿®æ”¹ getName ä¸ºç®­å¤´å‡½æ•°ï¼Œå› ä¸ºç®­å¤´å‡½æ•°çš„å†…éƒ¨æ²¡æœ‰ this ç»‘å®šï¼Œæ‰€ä»¥å®ƒä¼šå‘å®ƒçš„ä½œç”¨åŸŸé“¾ä¸­å¯»æ‰¾ thisï¼Œå³å®ƒä½¿ç”¨çš„æ˜¯å®ƒçˆ¶çº§ä½œç”¨åŸŸçš„ thisï¼Œè¿™æ„å‘³ç€ç®­å¤´å‡½æ•°å†…éƒ¨çš„ this ä¸è°ƒç”¨æ–¹å¼æ— å…³ï¼Œä¸å®ƒæ‰€åœ¨çš„ä½ç½®æœ‰å…³ï¼Œè¿™æ ·å¯ä»¥è·å¾—é¢„æœŸçš„ç»“æœï¼Œå‡å°‘å‡º bug çš„å‡ ç‡ã€‚ æ—  arguments ç»‘å®šåŒ this ä¸€æ ·ï¼Œæ¯ä¸ªå‡½æ•°å†…éƒ¨éƒ½ä¼šè‡ªåŠ¨ä¼ å…¥ä¸€ä¸ª arguments å¯¹è±¡ï¼Œä½†æ˜¯ç®­å¤´å‡½æ•°å†…éƒ¨å¹¶æ²¡æœ‰ arguments å¯¹è±¡ï¼Œæ‰€ä»¥æƒ³å–å¾—ç®­å¤´å‡½æ•°ä¼ å…¥çš„å‚æ•°ï¼Œå°±å¾—ä½¿ç”¨å‰©ä½™å‚æ•° (function() &#123; let add = (...values) =&gt; &#123; console.log(arguments); // [Arguments] &#123;&#125; console.log(values); // [ 1, 2, 3 ] let sum = 0; for (let i = 0; i &lt; values.length; i++) &#123; sum += values[i]; &#125; return sum; &#125; console.log(add(1, 2, 3)); // 6&#125;)(); ç®­å¤´å‡½æ•°ä¸ä¸€èˆ¬å‡½æ•°çš„ä¸åŒï¼š å‡½æ•°å†…éƒ¨æ²¡æœ‰ thisï¼Œargumentsï¼Œnew.target ç»‘å®š ä¸èƒ½é€šè¿‡ new çš„æ–¹å¼è¢«è°ƒç”¨ï¼Œä¸Šæ–‡æåŠè¿‡ï¼Œç®­å¤´å‡½æ•°å†…éƒ¨æ²¡æœ‰ [[Construct]] æ–¹æ³• æ²¡æœ‰ prototype å°½ç®¡ç®­å¤´å‡½æ•°ä¸ä¸€èˆ¬å‡½æ•°æœ‰æ‰€ä¸åŒï¼Œä½†æ˜¯é€šè¿‡ typeof ä»¥åŠ instanceof æ–¹æ³•é‰´åˆ«çš„è¡Œä¸ºä¸ä¸€èˆ¬å‡½æ•°ç›¸åŒ let add = (x, y) =&gt; x + y;console.log(typeof add); // functionconsole.log(add instanceof Function); // true ç®­å¤´å‡½æ•°ä¹Ÿå¯ä»¥è°ƒç”¨callï¼Œapplyï¼Œbind æ–¹æ³•ï¼Œä½†æ˜¯ç®­å¤´å‡½æ•°å†…éƒ¨çš„ this å–å€¼å¹¶ä¸ä¼šå—åˆ°å½±å“ã€‚ å°¾è°ƒç”¨ä¼˜åŒ–ä»€ä¹ˆå«å°¾è°ƒç”¨? å°¾è°ƒç”¨æŒ‡çš„æ˜¯å‡½æ•°çš„æœ€åä¸€æ¡è¯­å¥æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ function doSomething() &#123; return doSomethingElse();&#125; æˆ‘ä»¬çŸ¥é“æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§æ”¾ç½®åˆ°å‡½æ•°æ ˆä¸­ï¼Œå½“å‡½æ•°è°ƒç”¨è¾ƒå¤šæ—¶ï¼Œç‰¹åˆ«æ˜¯é€’å½’è°ƒç”¨ï¼Œå¯èƒ½ä¼šä½¿å¾—æ ˆä¸­çš„æ ˆå¸§è¶Šæ¥è¶Šå¤šï¼Œå½“è¶…è¿‡æ ˆå¸§å…è®¸çš„æœ€å¤§æ•°é‡æ—¶ï¼Œå°±ä¼šæŠ¥é”™ function doSomething()&#123; doSomething();&#125;doSomething(); // RangeError: Maximum call stack size exceeded é‚£ä¹ˆæ‰€è°“çš„å°¾è°ƒç”¨ä¼˜åŒ–æŒ‡çš„æ˜¯ï¼Œå½“å‡½æ•°çš„æœ€åä¸€æ¡è¯­å¥æ˜¯è¿”å›å¦ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨æ—¶ï¼Œé‚£ä¹ˆè°ƒç”¨çš„å‡½æ•°ä¼šå¤ç”¨å½“å‰æ ˆå¸§ï¼Œè€Œä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ ˆå¸§ï¼Œè¿™æ ·æ ˆä¸­çš„æ ˆå¸§çš„æ•°é‡å°±ä¸ä¼šå¢åŠ ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°è¶…è¿‡æ ˆå¸§å…è®¸çš„æœ€å¤§æ•°é‡ã€‚ è¦å®ç°å°¾è°ƒç”¨ä¼˜åŒ–ï¼Œè¢«è°ƒç”¨å‡½æ•°è¦æ»¡è¶³ä»¥ä¸‹ç‰¹ç‚¹ï¼š å°¾è°ƒç”¨æ²¡æœ‰è®¿é—®å½“å‰æ ˆå¸§ä¸­çš„å˜é‡ å°¾è°ƒç”¨æ˜¯æœ€åä¸€æ¡è¯­å¥ å°¾è°ƒç”¨çš„è¿”å›å€¼ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ function doSomething()&#123; // æ— æ³•ä¼˜åŒ–ï¼Œæ²¡æœ‰ return doSomething();&#125; function doSomething() &#123; // æ— æ³•ä¼˜åŒ–ï¼Œå°¾è°ƒç”¨ä¸æ˜¯æœ€åä¸€æ¡è¯­å¥ï¼Œå…ˆè¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œç„¶åè¿›è¡ŒåŠ æ³• return 1 + doSomething();&#125; function doSomething() &#123; let num = 1, func = () =&gt; num; // æ— æ³•ä¼˜åŒ–ï¼Œè®¿é—®äº†å½“å‰æ ˆå¸§ä¸­çš„å˜é‡ return func();&#125; ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªæ±‚é˜¶ä¹˜çš„ä¾‹å­ function factorial(n) &#123; if (n &lt; 0) &#123; throw new Error(\"å‚æ•°é”™è¯¯\"); &#125; if (n &lt;= 1) &#123; return 1; &#125; return n * factorial(n - 1);&#125; ä¸Šé¢çš„å‡½æ•°æ— æ³•è¿›è¡Œå°¾ä¼˜åŒ–ï¼Œå› ä¸ºæœ€åä¸€æ¡è¯­å¥ä¸æ˜¯å°¾è°ƒç”¨ã€‚ç°åœ¨æˆ‘ä»¬æ¢ä¸€ç§æ€è·¯ï¼Œå°†ä¸Šé¢çš„å‡½æ•°è½¬åŒ–ä¸ºå¯ä»¥è¿›è¡Œå°¾è°ƒç”¨ä¼˜åŒ–çš„å‡½æ•° function factorial(n, result = 1) &#123; if (n &lt; 0) &#123; throw new Error(\"å‚æ•°é”™è¯¯\"); &#125; if (n &lt;= 1) &#123; return result; &#125; result = result * n; return factorial(n - 1, result);&#125;","tags":[{"name":"é»˜è®¤å‚æ•°","slug":"é»˜è®¤å‚æ•°","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0/"},{"name":"ç®­å¤´å‡½æ•°","slug":"ç®­å¤´å‡½æ•°","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/"}]},{"title":"ES6ï¼šå­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼","date":"2021-01-15T09:39:00.000Z","path":"/ES6ï¼šå­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼/","text":"é¦–å…ˆæ¨èä¸¤ç¯‡æ–‡ç« äº†è§£å­—ç¬¦ç¼–ç ç›¸å…³ç»†èŠ‚ Unicodeä¸JavaScriptè¯¦è§£ Javascriptä¸­çš„stringç±»å‹ä½¿ç”¨UTF-16ç¼–ç  Unicodeã€UTF-8 ä¸ UTF-16åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ° Unicodeï¼ŒUTF-8ï¼ŒUTF-16 ç­‰ç­‰æœ¯è¯­ï¼Œåœ¨å¾ˆå¤šçš„æ—¶å€™æˆ‘ä¸€ç›´æ˜¯å°†å®ƒä»¬æ··ä¸ºä¸€è°ˆçš„ï¼Œä¸è¿‡ä»Šå¤©è¯¦ç»†çš„äº†è§£äº†å®ƒä»¬ä¹‹é—´çš„ä¸åŒï¼Œä½œä¸ºæœ¬ç« çš„å‰è¨€ï¼Œæ–¹ä¾¿æœ¬ç« å†…å®¹çš„ç†è§£ã€‚ é¦–å…ˆ Unicode è¡¨ç¤ºçš„æ˜¯å­—ç¬¦é›†ï¼Œè€Œ UTF-8ï¼ŒUTF-16 è¡¨ç¤ºçš„æ˜¯å­—ç¬¦ç¼–ç ã€‚æ‰€è°“çš„å­—ç¬¦é›†æŒ‡çš„å°±æ˜¯å­—ç¬¦çš„é›†åˆï¼ŒUnicode å­—ç¬¦é›†å‡ ä¹åŒ…å«äº†ä¸–ç•Œä¸Šæ‰€æœ‰å›½å®¶çš„å­—ç¬¦ï¼Œæ‰€ä»¥ Unicode åˆè¢«ç§°ä¸ºæ˜¯ä¸‡å›½ç ï¼Œå¦‚æœä½¿ç”¨ Unicode å­—ç¬¦é›†çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥è¡¨ç¤ºå‡ ä¹æ‰€æœ‰å›½å®¶ä¸­çš„å­—ç¬¦(ASCIIå­—ç¬¦é›†åªåŒ…å«äº†è‹±æ–‡ï¼Œè€Œ GBK å­—ç¬¦é›†åŒ…å«ä¸­æ—¥éŸ©ç­‰å‡ ä¸ªå›½å®¶çš„å­—ç¬¦ä»¥åŠè‹±æ–‡å­—ç¬¦)ã€‚å¯¹äºæ¯ä¸€ä¸ªå­—ç¬¦ï¼ŒUnicode éƒ½ä¸ºå®ƒä»¬å¯¹åº”äº†ä¸€ä¸ªç ç‚¹(Code Point)ï¼Œç ç‚¹ä» 0 å¼€å§‹è®¡ç®—ï¼Œä¾‹å¦‚ \\u0000 è¡¨ç¤ºçš„å°±æ˜¯ nullï¼Œè¡¨ç¤ºç©ºçš„æ„æ€ã€‚ UFT-8ï¼ŒUTF-16 åˆ™æ˜¯å°† Unicode å­—ç¬¦é›†ä¸­åŒ…å«çš„å­—ç¬¦ç¼–ç ä¸ºæ•°å­—å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼ŒUTF-8 å’Œ UTF-16 åˆ†åˆ«å¯¹åº”ä¸åŒçš„ç¼–ç è§„åˆ™ã€‚è¿™é‡Œè¯¦ç»†ä»‹ç»ä¸€ä¸‹ UTF-16ï¼Œå› ä¸º JavaScript çš„ç¼–ç ä¸ä¹‹ç›¸å…³ã€‚ æ‰€è°“çš„ UTF-16 æŒ‡çš„æ˜¯ä½¿ç”¨ 16 ä½å³ 2 ä¸ªå­—èŠ‚å»è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä¸è¿‡éšç€ Unicode ä¸­åŒ…å«çš„å­—ç¬¦è¶Šæ¥è¶Šå¤šï¼Œä½¿ç”¨ 2 ä¸ªå­—èŠ‚å·²ç»æ— æ³•è¡¨ç¤º Unicode ä¸­æ‰€æœ‰çš„å­—ç¬¦ï¼Œæ‰€ä»¥å®é™…ä¸Š UTF-16 ä½¿ç”¨ 2 ä¸ªå­—èŠ‚æˆ–è€… 4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤º Unicode ä¸­çš„å­—ç¬¦ï¼Œé‚£ä»€ä¹ˆæ—¶å€™ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤º? ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒUTF-16 å°†å­—ç¬¦åˆ†ä¸ºäº†ä¸¤éƒ¨åˆ† åŸºæœ¬å¹³é¢ï¼šç”±å‰ $65536(2^{16})$ ä¸ªå­—ç¬¦ç»„æˆï¼Œå³ \\u0000-\\uFFFF è¾…åŠ©å¹³é¢ï¼šå‰©ä½™å…¶å®ƒå­—ç¬¦ç»„æˆ å¯¹äºä½äºåŸºæœ¬å¹³é¢ä¸­çš„å­—ç¬¦ä½¿ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œè€Œå¯¹äºè¾…åŠ©å¹³é¢ä¸­çš„å­—ç¬¦ä½¿ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚ é‚£ UTF-16 æ˜¯æ€ä¹ˆè§£ç çš„å‘¢? å¦‚æœåœ¨è§£ç æ—¶å‘ç°æŸ 2 ä¸ªå­—èŠ‚è¡¨ç¤ºçš„æ•°åœ¨ \\uD800-\\uDFFF ä¹‹é—´ï¼Œåˆ™è¯´æ˜è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºçš„å­—ç¬¦ï¼Œå¦‚æœä¸åœ¨ \\uD800-\\uDFFF ä¹‹é—´ï¼Œåˆ™è¯´æ˜æ˜¯åŸºæœ¬å¹³é¢çš„å­—ç¬¦ã€‚ ä½†æ˜¯ JavaScript å¹¶ä¸æ˜¯ä½¿ç”¨ UTF-16 è¿›è¡Œç¼–ç çš„ï¼Œè€Œæ˜¯ä½¿ç”¨ UCS-2 è¿›è¡Œç¼–ç çš„ï¼ï¼ï¼UCS-2 ç”±äºå‘æ˜çš„æ¯”è¾ƒæ—©ï¼Œå½“æ—¶ Unicode ä¸­çš„å­—ç¬¦ä½¿ç”¨ 2 ä¸ªå­—èŠ‚å³å¯è¡¨ç¤ºï¼Œæ‰€ä»¥ UCS-2 å¯¹äºä»»æ„çš„å­—ç¬¦éƒ½æ˜¯ä½¿ç”¨ 2 ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç çš„ã€‚æ‰€ä»¥åœ¨ JavaScript ä¸­æœ‰ä¸ª bug å°±æ˜¯å®ƒä¸è®¤ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºçš„å­—ç¬¦ï¼ï¼ï¼ ä¸Šé¢çš„é‚£æ®µæ˜¯æˆ‘ä»ç½‘ä¸Šçœ‹åˆ°ï¼Œç„¶åæ€»ç»“çš„ï¼Œä½†æ˜¯æˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œæ—¢ç„¶ UCS-2 å¯¹ä»»æ„å­—ç¬¦éƒ½ä½¿ç”¨ 2 ä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ï¼Œè¿™ä¸å°±æ„å‘³ç€æœ‰çš„å­—ç¬¦æ— æ³•è¢«ç¼–ç ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šæœ‰ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºçš„å­—ç¬¦ï¼Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯ä½¿ç”¨ UTF-16 è¿›è¡Œç¼–ç ï¼Œä½†æ˜¯ä½¿ç”¨çš„æ˜¯ UCS-2 è¿›è¡Œè§£ç (ä»…ä»…æ˜¯æˆ‘çš„çŒœæµ‹)ã€‚ ä¸ºä»€ä¹ˆ JavaScript ä¸ä½¿ç”¨ UTF-16 è¿›è¡Œç¼–ç ? å› ä¸ºåœ¨ JavaScript å‘æ˜çš„æ—¶å€™ï¼Œåªæœ‰ UCS-2 è¯¥ç§ç¼–ç è¢«æå‡ºæ¥äº†ï¼ŒUTF-16 è¿˜æ²¡æœ‰è¢«æå‡ºæ¥ã€‚ let text = 'ğ ®·'console.log(text.length) // 2console.log(/^.$/.test(text)) // falseconsole.log(text.charCodeAt(0)) // 55362console.log(text.charCodeAt(1)) // 57271 ä¸Šé¢çš„å­—ç¬¦ä¸² â€˜ğ ®·â€™ æ˜æ˜æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯ length å±æ€§å´æ˜¾ç¤ºæœ‰ä¸¤ä¸ªå­—ç¬¦ï¼Œè¿™æ˜¯å› ä¸º â€˜ğ ®·â€™ æ˜¯è¾…åŠ©å¹³é¢ä¸Šçš„å­—ç¬¦ï¼Œå…·æœ‰ 4 ä¸ªå­—èŠ‚ï¼Œè€Œ JavaScript å¹¶ä¸è®¤è¯† 4 ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œä¼šå°†å…¶è§£é‡Šä¸ºä¸¤ä¸ª 2 å­—èŠ‚çš„å­—ç¬¦ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ length å±æ€§ä¸º 2 çš„åŸå› ã€‚ å¹¶ä¸”åœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ—¶ä¹Ÿæœ‰ bugï¼Œ/^.$/ è¡¨ç¤ºä»»æ„åªæœ‰ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§å¸¸ç†æ¥è¯´ï¼Œ/^.$/.test(text) æµ‹è¯•çš„ç»“æœåº”è¯¥æ˜¯trueï¼Œä½†æ˜¯æœ€åçš„ç»“æœæ˜¾ç¤ºæ˜¯ falseã€‚ charCodeAt æ–¹æ³•å¯ä»¥è·å¾— Unicode çš„ Code Ponitï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾å®ƒä¸èƒ½å¾—åˆ° 4 å­—èŠ‚çš„ Unicode å­—ç¬¦çš„ Code Pointï¼Œåªæ˜¯å°†è¿™ä¸ª 4 å­—èŠ‚çš„å­—ç¬¦ä½œä¸ºä¸¤ä¸ª 2 å­—èŠ‚çš„å­—ç¬¦ï¼Œå¾—åˆ°ä¸¤ä¸ª Code Pointã€‚ æ›´å¥½çš„ Uniode æ”¯æŒcodePointAt()ä¸Šé¢çš„ charCodeAt()æ–¹æ³•æ— æ³•å¾—åˆ° 4 å­—èŠ‚å­—ç¬¦çš„ Code Pointï¼Œè€Œ ES6 æä¾›äº† codePointAt() æ–¹æ³•ï¼Œé€šè¿‡è¯¥æ–¹æ³•å¯ä»¥å¾—åˆ° 4 å­—èŠ‚å­—ç¬¦çš„ Code Point let text = 'ğ ®·'console.log(text.codePointAt(0)); // 134071console.log(text.codePointAt(1)); // 57271 ä¸Šé¢çš„ 134071 æ˜¯ â€˜ğ ®·â€™ çš„ Code Pointã€‚å¦å¤–é€šè¿‡ codePointAt æ–¹æ³•å¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“å­—ç¬¦æ˜¯å¦ä¸º 4 å­—èŠ‚çš„å­—ç¬¦ function is32BitChar(c)&#123; return c.codePointAt(0) &gt; 0xFFFF;&#125;console.log(is32BitChar(text)); // true String.fromCodePoint()String.fromCodePoint() çš„ä½œç”¨ä¸ codePointAt() æ–¹æ³•äº’è¡¥ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ ¹æ® Code Point å¾—åˆ°å­—ç¬¦ let c = String.fromCodePoint(134071);console.log(c); åœ¨æˆ‘çš„æ§åˆ¶å°æ‰“å°å‡ºçš„ä¸€ä¸ªä¹±ç ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘æ§åˆ¶å°ç¼–ç çš„é—®é¢˜ã€‚ normalizeæœ‰çš„æ—¶å€™ï¼Œæœ‰å¤šä¸ª Code Point åºåˆ—å¯¹åº”ä¸€ä¸ªå­—ç¬¦ let string1 = '\\u00F1';let string2 = '\\u006E\\u0303';console.log(string1); // Ã±console.log(string2); // Ã± è™½ç„¶ä»–ä»¬è¡¨ç¤ºéƒ½æ˜¯åŒä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯å› ä¸ºä»–ä»¬çš„ Code Point åºåˆ—ä¸åŒï¼Œæ‰€ä»¥ç›´æ¥è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå®ƒä»¬æ˜¯ä¸åŒçš„ let string1 = '\\u00F1'; // Ã±let string2 = '\\u006E\\u0303'; // Ã±console.log(string1 === string2); // falseconsole.log(string1.length); // 1console.log(string2.length); // 2 è€Œ normalize æ­£æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå®ƒé€šè¿‡å°†å­—ç¬¦è½¬åŒ–ä¸ºæ ‡å‡†åŒ–çš„å½¢å¼ï¼Œå…·ä½“è§ä¸‹é¢çš„ MDN String.prototype.normalize() æ­£åˆ™è¡¨è¾¾å¼çš„ u æ ‡ç­¾å¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨äº† u æ ‡ç­¾ï¼Œé‚£ä¹ˆä»–ä¼šåŸºäºå­—ç¬¦åŒ¹é…è€Œä¸æ˜¯ Code Point è¿›è¡ŒåŒ¹é… let text = 'ğ ®·'console.log(/^.$/.test(text)); // falseconsole.log(/^.$/**u**.test(text)); // true é€šè¿‡ length å±æ€§ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å¹¶ä¸æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ u æ ‡ç­¾è®¡ç®—æœ‰å¤šå°‘ä¸ª Code Point ä»è€Œå¾—åˆ°å­—ç¬¦ä¸²çš„çœŸå®é•¿åº¦ function codePointLength(text) &#123; let result = text.match(/[\\s\\S]/gu); return result ? result.length : 0&#125;console.log(codePointLength(\"abc\")); // 3 console.log(codePointLength(\"ğ ®·bc\")); // 3 å­—ç¬¦ä¸²è¯†åˆ«å­ä¸²åœ¨ ES5 ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ indexOf æ–¹æ³•æ¥è¯†åˆ«å­ä¸²ï¼Œåœ¨ ES6 ä¸­æ–°å¼•å…¥äº†ä¸‰ä¸ªæ–¹æ³•æ¥å¸®åŠ©æˆ‘ä»¬æ›´åŠ æ–¹ä¾¿çš„è¯†åˆ«å­ä¸² includes startsWith endsWith é€šè¿‡æ–¹æ³•çš„åç§°å³å¯çŸ¥é“æ–¹æ³•çš„ä½œç”¨ã€‚è¿™äº›æ–¹æ³•éƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•° è¦è¯†åˆ«çš„å­ä¸²ï¼Œsubstr èµ·å§‹ä½ç½®ï¼Œindex å¯¹äº index çš„å«ä¹‰ï¼Œincludes å’Œ startsWith çš„å«ä¹‰è¡¨ç¤ºä»¥ index å¼€å§‹è¯†åˆ«ï¼Œè€Œ endsWith è¡¨ç¤ºä»¥ length - index ç»“æŸè¯†åˆ«ã€‚index æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸ä¼ å…¥è¯¥å‚æ•°ï¼Œé»˜è®¤ä»å­—ç¬¦ä¸²çš„é¦–éƒ¨å¼€å§‹æœç´¢ã€‚ let msg = \"Hello World!\";console.log(msg.startsWith(\"Hello\")); // trueconsole.log(msg.endsWith(\"!\")); // trueconsole.log(msg.includes(\"o\")); // trueconsole.log(msg.startsWith('o', 4)); // trueconsole.log(msg.endsWith('o', 8)); // trueconsole.log(msg.includes('o', 8)); // false å¦‚æœå‘ startsWithã€endsWithã€includes ä¸­ä¼ å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ repeatrepeat æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ•°å­—å‚æ•° nï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†å­—ç¬¦ä¸²å¤åˆ¶ n éç„¶åè¿”å› console.log(\"hello \".repeat(3)); // \"hello hello hello \" æ­£åˆ™è¡¨è¾¾å¼y FlagES6 å¢åŠ äº†ä¸€ä¸ª y æ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾è¡¨ç¤ºä» lastIndex å¤„ç²¾ç¡®åŒ¹é… // æ²¡æœ‰ä½¿ç”¨ä¿®é¥°ç¬¦let pattern = /hello\\d\\s?/;// ä½¿ç”¨äº† g ä¿®é¥°ç¬¦let globalPattern = /hello\\d\\s?/g;// ä½¿ç”¨äº† y ä¿®é¥°ç¬¦let stickyPattern= /hello\\d\\s?/y;let text = \"hello1 hello2 hello3\";// è¿›è¡Œä¸€æ¬¡åŒ¹é…let result = pattern.exec(text);let globalResult = globalPattern.exec(text);let stickyResult= stickyPattern.exec(text);console.log(result[0]); // hello1console.log(globalResult[0]); // hello1console.log(stickyResult[0]); // hello1// ä¿®æ”¹ lastIndexpattern.lastIndex = 1;globalPattern.lastIndex = 1;stickyPattern.lastIndex = 1;// ä¿®æ”¹ lastIndex å¯¹æ— ä¿®é¥°ç¬¦çš„æ­£åˆ™å¯¹è±¡æ— å½±å“result = pattern.exec(text);// ä» lastIndex å¤„å¼€å§‹è¿›è¡Œæœç´¢åŒ¹é…globalResult = globalPattern.exec(text);// ä» lastIndex å¤„è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…åˆ™ä¸å†è¿›è¡Œåç»­åŒ¹é…stickyResult= stickyPattern.exec(text);console.log(result[0]); // hello1console.log(globalResult[0]); // hello2console.log(stickyResult[0]); // TypeError: Cannot read property '0' of null å½“ä¿®æ”¹åŒ…å« y flag çš„æ­£åˆ™å¯¹è±¡çš„ lastIndex ä¸º 1 ååœ¨è¿›è¡ŒåŒ¹é…æ—¶ï¼Œå¹¶æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸º index ä¸º 1 åçš„å­—ç¬¦ä¸º elloâ€¦ï¼Œæ— æ³•ä¸ /hello\\d\\s?/ ç²¾ç¡®åŒ¹é…ï¼Œæ‰€ä»¥ä¸ä¼šåŒ¹é…åˆ°ä»»ä½•çš„ä¸œè¥¿ã€‚ y flag ä¼šå­˜å‚¨ä¸Šæ¬¡åŒ¹é…çš„å­—ç¬¦çš„ä¸‹ä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡ï¼Œè¯¥å€¼ä¼šè¢«å­˜å‚¨åœ¨lastIndex ä¸­ let stickyPattern= /hello\\d\\s?/y;let text = \"hello1 hello2 hello3\";let stickyResult= stickyPattern.exec(text);console.log(stickyResult[0]); // hello1console.log(stickyPattern.lastIndex); // 7stickyResult= stickyPattern.exec(text);console.log(stickyResult[0]); // hello2console.log(stickyPattern.lastIndex); // 14stickyResult= stickyPattern.exec(text);console.log(stickyResult[0]); // hello3console.log(stickyPattern.lastIndex); // 20 é€šè¿‡æ­£åˆ™å¯¹è±¡çš„ sticky å±æ€§å¯ä»¥çŸ¥é“è¯¥å¯¹è±¡æ˜¯å¦æŒ‡å®šäº†y flag let pattern = /hello\\d/y;console.log(pattern.sticky); // true æ­£åˆ™è¡¨è¾¾å¼çš„å¤åˆ¶åœ¨ ES5 ä¸­å¯ä»¥é€šè¿‡ RegExp æ„é€ å‡½æ•°è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼çš„å¤åˆ¶ let re1 = /a\\db/i, re2 = new RegExp(re1); ä½†æ˜¯åœ¨æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†ä¿®é¥°ç¬¦ï¼Œé‚£ä¹ˆåœ¨ ES5 ä¼šæŠ¥é”™ï¼Œè€Œåœ¨ ES6 ä¸­æ˜¯å¯ä»¥çš„ï¼Œå¹¶ä¸”æ–°æŒ‡å®šçš„ä¿®é¥°ç¬¦ä¼šè¦†ç›–åŸæ¥çš„ä¿®é¥°ç¬¦ let re1 = /a\\db/i, // åœ¨ ES5 ä¸­ä¼šæŠ¥é”™ re2 = new RegExp(re1, \"g\");console.log(re1.toString()); // \"/a\\db/i\"console.log(re2.toString()); // \"/a\\db/g\"console.log(re1.test(\"A2B\")); // trueconsole.log(re2.test(\"A2B\")); // false flags å±æ€§åœ¨ ES5 ä¸­æƒ³è·å¾—æ­£åˆ™å¯¹è±¡åŒ…å«å“ªäº›ä¿®é¥°ç¬¦ï¼Œä¸€èˆ¬é€šè¿‡è§£æ toString å¾—åˆ°çš„å­—ç¬¦ä¸² let getFlags = function(re) &#123; let str = re.toString(); return str.substring(str.lastIndexOf(\"/\") + 1, str.length)&#125;let re = /abc/igu;console.log(getFlags(re)); // \"giu\" åœ¨ ES6 ä¸­ä¸ºæ­£åˆ™å¯¹è±¡æ·»åŠ äº†ä¸€ä¸ª flags å±æ€§ï¼Œå¯ä»¥é€šè¿‡ flags å±æ€§æ¥è·å¾—æ­£åˆ™å¯¹è±¡åŒ…å«çš„ä¿®é¥°ç¬¦ let re = /abc/igu;console.log(re.source); // \"abc\"console.log(re.flags); // \"giu\" æ¨¡æ¿å­—ç¬¦ä¸²ES5 ä¸­å­—ç¬¦ä¸²å¤„ç†éš¾ç‚¹ï¼š å¤šè¡Œå­—ç¬¦ä¸² å­—ç¬¦ä¸²æ ¼å¼åŒ– HTML è½¬ä¹‰ ES6 å¼•å…¥æ¨¡æ¿å­—ç¬¦ä¸²æ¥è§£å†³è¯¥é—®é¢˜ã€‚ åŸºæœ¬è¯­æ³•ä½¿ç”¨ ` å·å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥ let str = `Hello World!`;console.log(str); // \"Hello World\"console.log(typeof str); // string å¤šè¡Œå­—ç¬¦ä¸²ES6 ä¹‹å‰è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²çš„å†™æ³• let str = \"Hello \\n\\World!\";console.log(str); // \"Hello // World!\"// æˆ–è€…let message = [\"Hello\", \"World!\"].join(\"\\n\");console.log(message); // Hello // World! ES6 ä¸­æ›´ç®€å•çš„å†™æ³• let str = `HelloWorld!`;console.log(str); // Hello // World! åœ¨ `` ä¸­æ‰€æœ‰çš„ç©ºç™½å­—ç¬¦éƒ½ä¼šè¢«ç®—ä½œæ˜¯å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ã€‚ é€šè¿‡ä¸Šé¢çš„å†™æ³•ï¼Œå¯ä»¥å†™å‡ºæ˜“äºé˜…è¯»çš„ HTML å­—ç¬¦ä¸² let html = `&lt;div&gt; &lt;p&gt;Hello World!&lt;/p&gt;&lt;/div&gt;`; æ¨¡æ¿æ›¿æ¢åœ¨ ES5 ä¸­ä¸€èˆ¬å¦‚ä¸‹æ‹¼æ¥å­—ç¬¦ä¸² let name = \"Alice\";let message = \"Hello, My name is \" + name + \", nice to meet you!\";console.log(message); // Hello, My name is Alice, nice to meet you! åœ¨ ES6 ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å ä½ç¬¦æ¥æ–¹ä¾¿å®ç°å­—ç¬¦ä¸²çš„æ‹¼æ¥ let name = \"Alice\";let message = `Hello, My name is $&#123;name&#125;, nice to meet you!`console.log(message); // Hello, My name is Alice, nice to meet you! å…¶ä¸­ ${name} ä¼šè¢«æœ¬åœ°å˜é‡ name æ›¿æ¢ï¼Œæœ€åå½¢æˆçš„å­—ç¬¦ä¸²å°±æ˜¯è¢«æ›¿æ¢çš„å­—ç¬¦ä¸²ã€‚æ›¿æ¢çš„è¯­æ³•å°±æ˜¯${}ï¼Œå…¶ä¸­ {} ä¸­çš„å†…å®¹å¯ä»¥æ˜¯å˜é‡åï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ let price = 2.5, count = 3;let message = `$&#123;count&#125; items cost $$&#123;(price * count).toFixed(2)&#125;.`console.log(message); // 3 items cost $7.50. å¦‚æœ $ åé¢æ²¡æœ‰ {} çš„è¯ï¼Œä¼šè¢«å½“åšæ˜¯æ­£å¸¸çš„ç¾å…ƒå­—ç¬¦è¿›è¡Œè¾“å‡ºã€‚ å› ä¸ºæ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œè¿™æ„å‘³ç€å¯ä»¥åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥æ¨¡æ¿å­—ç¬¦ä¸² let name = \"Alice\";let message = `Hello, $&#123; `my name is $&#123;name&#125;.`&#125;`;console.log(message); // Hello, my name is Alice. æ ‡ç­¾æ¨¡æ¿æ ‡ç­¾å¯¹æ¨¡æ¿å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œå¹¶è¿”å›æœ€ç»ˆçš„å­—ç¬¦ä¸²å€¼ã€‚æ ‡ç­¾æ”¾ç½®åœ¨æ¨¡æ¿çš„å‰æ–¹ let str = tag`Hello World!`; å…¶ä¸­ tag å°±æ˜¯æ ‡ç­¾ï¼Œtag æ ‡ç­¾ä¼šå¯¹æ¨¡æ¿å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ï¼Œè¿”å›çš„å­—ç¬¦ä¸²ä½œä¸ºæœ€ç»ˆæ¨¡æ¿å­—ç¬¦ä¸²çš„å€¼ let str = tag`Hello World!`;function tag() &#123; return \"hello\";&#125;console.log(str); // hello ä¸€ä¸ªæ ‡ç­¾å…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•° ç”± ${} åˆ†å‰²çš„æ¨¡æ¿å­—ç¬¦ä¸²æ•°ç»„ ${} ä¸­è¡¨è¾¾å¼è®¡ç®—åçš„ç»“æœå½¢æˆçš„æ•°ç»„ let price = 2.5, count = 3;let message = tag`$&#123;count&#125; items cost $$&#123;(price * count).toFixed(2)&#125;.`function tag(literals, ...substitutions) &#123; console.log(literals); // [ '', ' items cost $', '.' ] console.log(substitutions); // [ 3, '7.50' ]&#125; åœ¨ message çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ï¼Œæœ‰ä¸¤ä¸ª ${}ï¼Œæ‰€ä»¥ä¼šè¢«åˆ†ä¸ºä¸‰æ®µï¼Œè¿™ä¸‰æ®µçš„å†…å®¹å½¢æˆçš„æ•°ç»„å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ï¼Œä¸¤ä¸ª ${} ä¸­è¡¨è¾¾å¼è®¡ç®—åçš„å€¼å½¢æˆçš„æ•°ç»„æ˜¯ç¬¬äºŒä¸ªå‚æ•°çš„å€¼ã€‚ ä¸‹é¢ä½¿ç”¨è‡ªå®šä¹‰çš„æ ‡ç­¾æ¥æ¨¡æ‹Ÿæ¨¡æ¿å­—ç¬¦ä¸²çš„é»˜è®¤è¡Œä¸º function defaultTemplate(literals, ...substitutions) &#123; let result = \"\"; for(let i = 0; i &lt; substitutions.length; i++) &#123; result += literals[i]; result += substitutions[i]; &#125; result += literals[literals.length - 1]; return result;&#125;let price = 2.5, count = 3;let message = defaultTemplate`$&#123;count&#125; items cost $$&#123;(price * count).toFixed(2)&#125;.`console.log(message); // 3 items cost $7.50. æ ‡ç­¾è¿˜å¯ä»¥è®¿é—®åˆ°æ¨¡æ¿å­—ç¬¦ä¸²çš„åŸå§‹ä¿¡æ¯ï¼Œä¸»è¦æŒ‡èƒ½å¤Ÿè®¿é—®å­—ç¬¦è½¬ä¹‰ã€‚JavaScript æä¾›äº† String.raw æ ‡ç­¾ä»¥æ¨¡æ¿è®¿é—®å­—ç¬¦ä¸²çš„åŸå§‹ä¿¡æ¯ let str1 = String.raw`Hello\\nWorld!`;let str2 = `Hello\\nWorld!`;console.log(str1); // Hello\\nWorld!console.log(str2); // Hello // World! ä¼ å…¥æ ‡ç­¾çš„ literals å‚æ•°æœ‰ä¸€ä¸ª raw å±æ€§ï¼Œé‡Œé¢ä¿å­˜çš„å°±æ˜¯å­—ç¬¦ä¸²çš„åŸå§‹ä¿¡æ¯ï¼Œè‡ªå®šä¹‰ raw æ ‡ç­¾æ¥æ¨¡æ‹Ÿ String.raw function raw(literals, ...substitutions) &#123; let result = \"\"; for(let i = 0; i &lt; substitutions.length; i++) &#123; result += literals.raw[i]; result += substitutions[i]; &#125; result += literals.raw[literals.length - 1]; return result;&#125; ä¸ defaultTemplate ä¸åŒçš„å°±æ˜¯å°† literals[i] æ¢ä¸ºäº† literals.raw[i]ã€‚","tags":[{"name":"å­—ç¬¦ä¸²","slug":"å­—ç¬¦ä¸²","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"}]},{"title":"ES6ï¼šlet å’Œ const","date":"2021-01-12T15:12:00.000Z","path":"/ES6ï¼šlet å’Œ const/","text":"var å£°æ˜å˜é‡ä½¿ç”¨ var å£°æ˜å˜é‡çš„ç‰¹ç‚¹ï¼š å˜é‡æå‡ console.log(value); // undefiendvar value = 'hello'; ä¸Šè¿°ä»£ç åœ¨å˜é‡ value å£°æ˜ä¹‹å‰å°±è®¿é—®äº† valueï¼Œåœ¨å…¶ä»–çš„ç±» C è¯­è¨€ä¸­ï¼Œè¦ä½¿ç”¨å˜é‡å¿…é¡»å…ˆå£°æ˜å˜é‡ï¼Œå¦‚æœæ²¡æœ‰å£°æ˜åˆ™ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å¯¹äºä¸Šè¿°çš„ä»£ç ï¼ŒJavaScript å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œè€Œæ˜¯æ‰“å°å‡ºäº† undefiendï¼Œè¿™æ—¶å› ä¸º JavaScript å¯¹ä½¿ç”¨ var å£°æ˜çš„å˜é‡åšäº†å˜é‡æå‡ï¼Œå°†å˜é‡ value çš„å£°æ˜æ”¾ç½®åœ¨æ‰€åœ¨ä½œç”¨åŸŸçš„æœ€å‰é¢ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç ç›¸å½“äºå¦‚ä¸‹ var value;console.log(value);value = 'hello'; æ— å—çº§ä½œç”¨åŸŸ å¯¹äºå…¶ä»–çš„ç±» C è¯­è¨€ï¼Œå˜é‡çš„ä½œç”¨åŸŸä¸€èˆ¬æ˜¯åœ¨ä¸€ä¸ªå—çº§ä½œç”¨åŸŸä¸­çš„ï¼Œä¸€æ—¦å‡ºäº†æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸï¼Œå°±æ— æ³•è®¿é—®åˆ°è¯¥å˜é‡ã€‚ä½†æ˜¯ JavaScript å¹¶æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œåªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸ if (true) &#123; var value = \"hello\";&#125;console.log(value); // hello å˜é‡ value å£°æ˜åœ¨ if çš„å—çº§ä½œç”¨åŸŸä¸­ï¼Œä½†æ˜¯å¯¹äº JavaScript æ¥è¯´æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥ value æ˜¯ä¸ªå…¨å±€å˜é‡ï¼Œå³ä½¿åœ¨ if çš„å—çº§ä½œç”¨åŸŸä¹‹å¤–è¿˜æ˜¯å¯ä»¥è®¿é—®ã€‚ let å’Œ constå—çº§ä½œç”¨åŸŸä½¿ç”¨ let å’Œ const å¯ä»¥å£°æ˜å—çº§ä½œç”¨åŸŸ if (true) &#123; let value = 'hello'&#125;console.log(value) å› ä¸ºä½¿ç”¨ let å£°æ˜çš„å˜é‡æ‹¥æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥å¦‚æœåœ¨ä½œç”¨åŸŸå¤–è®¿é—®å˜é‡ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ï¼Œå¦‚ä¸Šé¢çš„ä»£ç ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ const çš„ç”¨æ³•å’Œ let æ˜¯ç›¸åŒçš„ï¼Œä¸åŒçš„æ˜¯ä½¿ç”¨ const å£°æ˜çš„å˜é‡ï¼Œå®ƒçš„å€¼ä¸èƒ½è¢«æ›´æ”¹ï¼Œæ‰€ä»¥ const å£°æ˜çš„éå†åœ¨å£°æ˜æ—¶å°±è¦åšåˆå§‹åŒ–ï¼Œå¦‚æœæ²¡æœ‰åšåˆå§‹åŒ–ï¼Œåˆ™ä¼šæŠ¥é”™ const value åŒæ ·å¦‚æœå¯¹ const å®šä¹‰çš„å˜é‡è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œä¹Ÿä¼šæŠ¥é”™ const value = 'hello'value = 'world' ä½†æ˜¯å¦‚æœ const ä¿®é¥°çš„å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹éå†çš„å±æ€§å€¼ï¼Œä¾‹å¦‚ const person = &#123; name: 'Alice', age: 18&#125;person.name = 'Bob'console.log(person.name) // Bob ä½¿ç”¨ const ä¿®é¥° personï¼Œæ„å‘³ç€ person çš„å€¼ä¸èƒ½å‘ç”Ÿæ”¹å˜ï¼Œè€Œæ”¹å˜ person çš„å±æ€§ä¸ä¼šæ”¹å˜ person çš„å€¼ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä¿®æ”¹æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœä½ è¯•å›¾å¯¹ person è¿›è¡Œèµ‹å€¼ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ // TypeError: Assignment to constant variable.person = &#123; name: 'Bob', age: 20&#125; æš‚æ—¶æ€§æ­»åŒºå¯¹äºä½¿ç”¨ let å’Œ const å®šä¹‰çš„å˜é‡ï¼Œå®ƒä»¬çš„å£°æ˜ä¸ä¼šè¢«ç¼–è¯‘å™¨æå‡åˆ°ä½œç”¨åŸŸçš„å¼€å¤´ï¼Œè¯¥å˜é‡æ‰€åœ¨çš„ä½œç”¨åŸŸçš„å¼€å§‹åˆ°è¯¥å˜é‡å£°æ˜çš„åœ°æ–¹ä¹‹é—´çš„åŒºåŸŸå«åšæš‚æ—¶æ€§æ­»åŒº åœ¨æš‚æ—¶æ€§æ­»åŒºè®¿é—®å˜é‡ä¼šå‘ç”Ÿé”™è¯¯ï¼Œå³ä½¿æ˜¯ typeof è¿™ä¹ˆå®‰å…¨çš„æ“ä½œç¬¦éƒ½ä¸è¡Œ // undefinedconsole.log(typeof value); if(true) &#123; // ReferenceError: Cannot access 'value' before initialization console.log(typeof value); let value = \"hello\";&#125; æš‚æ—¶æ€§æ­»åŒºå¹¶æœªå‡ºç°åœ¨ ECMAScript è§„èŒƒä¸­ï¼Œä½†æ˜¯äººä»¬ç»å¸¸ä½¿ç”¨è¿™ä¸ªæœ¯è¯­æ¥è§£é‡Šä¸ºä»€ä¹ˆåœ¨ let å’Œ const å®šä¹‰å˜é‡å‰ä¸èƒ½è®¿é—®è¯¥å˜é‡ã€‚ é‡å¤å£°æ˜å˜é‡åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œä¸èƒ½å£°æ˜ç›¸åŒå˜é‡åçš„å˜é‡ï¼Œä¾‹å¦‚ var value = 'hello'// SyntaxError: Identifier 'value' has already been declaredlet value = 'world' å¾ªç¯ä¸­çš„å—çº§ä½œç”¨åŸŸä¸‹é¢æˆ‘ä»¬è¦çœ‹ä¸€ä¸ªéå†çš„ä¾‹å­ const funcs = [];for(var i = 0; i &lt; 10; i++) &#123; funcs.push(function()&#123; console.log(i) &#125;)&#125;funcs.forEach(function(func) &#123; func()&#125;) ä¸Šé¢çš„ç¨‹åºä¹Ÿè®¸ä½ ä¼šä»¥ä¸ºä¼šè¾“å‡º 0-9 ï¼Œä½†æ˜¯æœ€åçš„è¾“å‡ºæ˜¯ 10 ä¸ª 10 10101010101010101010 æœ‰ç‚¹åå¸¸ï¼Œä½†æ˜¯æƒ³æƒ³è¿˜çœŸæ˜¯ï¼Œfuncs æ•°ç»„ä¸­çš„å‡½æ•°é‡Œé¢çš„ i æŒ‡å‘çš„éƒ½æ˜¯å¾ªç¯å˜é‡ iï¼Œå½“å¾ªç¯æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå¾ªç¯å˜é‡ i å·²ç»å˜ä¸ºäº† 10ï¼Œå½“æ‰“å° i æ—¶ï¼Œç»“æœå°±å½“ç„¶å…¨éƒ¨éƒ½æ˜¯ 10 äº†ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ‰“å° 0-9 çš„è¯ï¼Œå°±éœ€è¦å°†éå† i çš„ â€œå¿«ç…§â€ ä¼ å…¥ï¼Œå¦‚ä¸‹ const funcs = [];for(var i = 0; i &lt; 10; i++) &#123; funcs.push((function(value)&#123; return function() &#123; console.log(value) &#125; &#125;)(i))&#125;funcs.forEach(function(func) &#123; func()&#125;) ä¸Šé¢çš„ä»£ç å¼€å§‹æœ‰ç‚¹å¤æ‚äº†ï¼Œå¦‚æœæ˜¯æ–°æ‰‹ä¸€æ—¶åŠä¼šå„¿è¿˜çœ‹ä¸æ‡‚ã€‚ä¸Šé¢ä»£ç å°±æ˜¯å°†å˜é‡ i çš„å€¼ä¼ å…¥äº†ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œè¿™æ—¶ funcs æ•°ç»„ä¸­çš„å‡½æ•°ä¿å­˜çš„ value å€¼æ˜¯å¾ªç¯éå†æ—¶ i çš„ â€œå¿«ç…§â€ï¼Œè€Œä¸æ˜¯å¾ªç¯å˜é‡ iï¼Œæ‰€ä»¥ä¸Šé¢çš„æœ€ç»ˆç»“æœæ˜¯æ‰“å°å‡º 0-9 0123456789 ç°åœ¨æˆ‘ä»¬ç”¨ let æ¥å®ç°æ‰“å°å‡º 0-9 const funcs = []for(let i = 0; i &lt; 10; i++) &#123; funcs.push(function() &#123; console.log(i) &#125;)&#125;funcs.forEach(function(func)&#123; func()&#125;) ä¸Šé¢æ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯ 0-9ï¼Œå’Œä½¿ç”¨ var å®šä¹‰å¾ªç¯å˜é‡çš„æƒ…å†µä¸åŒã€‚åŸå› æ˜¯å› ä¸ºæ¯æ¬¡éå†æ—¶ï¼Œ**let éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ i**ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ª func ä¸­çš„ i å®ƒä»¬éƒ½æ˜¯ä¸åŒçš„ï¼Œæ¯ä¸€ä¸ª func å‡½æ•°éƒ½æœ‰ä¸€ä¸ª iï¼Œå¹¶ä¸”æ˜¯å½“æ—¶éå†æ—¶çš„å€¼ï¼Œæ‰€ä»¥æœ€åå¤„ç†çš„ç»“æœæ˜¯ 0-9ã€‚ ä½¿ç”¨ let å®šä¹‰å¾ªç¯å˜é‡æ—¶ï¼Œæ¯æ¬¡éƒ½å‡ºåˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ä½¿ç”¨ let å®šä¹‰å¾ªç¯å˜é‡æ—¶ï¼Œæ¯æ¬¡éƒ½å‡ºåˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ä½¿ç”¨ let å®šä¹‰å¾ªç¯å˜é‡æ—¶ï¼Œæ¯æ¬¡éƒ½å‡ºåˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼ï¼ï¼ æœ€ä½³å®è·µï¼šå˜é‡ä½¿ç”¨ const å®šä¹‰ï¼Œå½“éå†éœ€è¦æ”¹å˜æ—¶ï¼Œåœ¨ä½¿ç”¨ let å®šä¹‰ã€‚","tags":[{"name":"let","slug":"let","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/let/"},{"name":"const","slug":"const","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/const/"}]},{"title":"å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†","date":"2020-12-23T16:00:00.000Z","path":"/å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†/","text":"æ ‘çš„å±‚åºéå†æ ‘çš„å±‚åºéå†æ˜¯æŒ‡ä¸€å±‚ä¸€å±‚çš„éå†æ ‘çš„èŠ‚ç‚¹ï¼Œå®ƒçš„å®ç°æ˜¯å€ŸåŠ©äºé˜Ÿåˆ—è¿›è¡Œå®ç°çš„ï¼š æ¯ä¸€æ¬¡ä»é˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºå…ƒç´ è¿›è¡Œéå†ï¼Œç„¶åå°†è¯¥å…ƒç´ çš„å·¦å³å­©å­æ·»åŠ è¿›é˜Ÿåˆ—ï¼Œä»¥æ­¤å¾€å¤ï¼Œç›´è‡³é˜Ÿåˆ—ä¸ºç©ºï¼Œéå†ç»“æŸã€‚ import java.util.LinkedList;import java.util.Queue;public class BinaryTree &#123; private class Node &#123; private Node left; private Node right; private int value; public Node(int value) &#123; this.value = value; &#125; &#125; private Node root; public BinaryTree(int value) &#123; root = new Node(value); &#125; public void levelOrder() &#123; if (root == null) &#123; return; &#125; Queue&lt;Node&gt; queue = new LinkedList&lt;&gt;(); queue.add(root); while (!queue.isEmpty()) &#123; Node node = queue.remove(); if (node.left != null) &#123; queue.add(node.left); &#125; if (node.right != null) &#123; queue.add(node.right); &#125; System.out.println(node.value); &#125; &#125;&#125; å›¾çš„å¹¿åº¦éå†å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†ä¸æ ‘çš„å±‚åºéå†ç›¸ä¼¼ï¼Œæ‰€è°“çš„å¹¿åº¦æ˜¯æŒ‡å°½å¯èƒ½çš„éå†æ‰€æœ‰çš„ç›¸é‚»å…ƒç´  å¹¿åº¦ä¼˜å…ˆéå†çš„å®ç°åŒæ ‘çš„å±‚åºéå†ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å€ŸåŠ©äºé˜Ÿåˆ—è¿™ç§æ•°æ®ç»“æ„ï¼Œæ¯æ¬¡ä»é˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºèŠ‚ç‚¹è¿›è¡Œéå†ï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹æ·»åŠ è¿›é˜Ÿåˆ—ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºå›¾æœ‰å¯èƒ½å‘ç”Ÿé‡å¤éå†ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨visited æ ‡è®°å·²éå†çš„èŠ‚ç‚¹ï¼›å¦å¤–è¿˜éœ€è¦è€ƒè™‘åˆ°æœ‰å¤šä¸ªè”é€šåˆ†é‡çš„æƒ…å†µï¼Œä¸æ·±åº¦ä¼˜å…ˆéå†çš„å†™æ³•ç±»ä¼¼ import java.util.ArrayList;import java.util.LinkedList;import java.util.Queue;public class BFSGraph &#123; private Graph graph; private boolean[] visited; private ArrayList&lt;Integer&gt; order; public BFSGraph(Graph graph) &#123; this.graph = graph; visited = new boolean[graph.V()]; order = new ArrayList&lt;&gt;(graph.V()); for (int i = 0; i &lt; graph.V(); i++) &#123; if (!visited[i]) &#123; bfs(i); &#125; &#125; &#125; private void bfs(int s) &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(s); visited[s] = true; while (!queue.isEmpty()) &#123; int v = queue.remove(); order.add(v); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; queue.add(w); visited[w] = true; &#125; &#125; &#125; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g4.txt\"); BFSGraph bfsGraph = new BFSGraph(graph); System.out.println(bfsGraph.order); &#125;&#125; å•æºè·¯å¾„é—®é¢˜å¯¹äºè·¯å¾„é—®é¢˜çš„æ€è·¯åŒDFSï¼Œä½¿ç”¨ä¸€ä¸ª pre æ•°ç»„ï¼Œä¿å­˜å½“å‰èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå½“æŸ¥è¯¢æºèŠ‚ç‚¹åˆ°æŸä¸ªç›®çš„èŠ‚ç‚¹çš„è·¯å¾„æ—¶ï¼Œåªè¦ä»ç›®çš„èŠ‚ç‚¹æ ¹æ® pre æ•°ç»„ä¸€ç›´æŸ¥æ‰¾å®ƒçš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´åˆ°å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºæºèŠ‚ç‚¹å°±æ‰¾åˆ°äº†è·¯å¾„ import java.util.*;public class SingleSourcePath &#123; private Graph graph; private int s; private boolean[] visited; private int[] pre; public SingleSourcePath(Graph graph, int s) &#123; this.graph = graph; this.s = s; visited = new boolean[graph.V()]; pre = new int[graph.V()]; Arrays.fill(visited, false); Arrays.fill(pre, -1); bfs(s); &#125; private void bfs(int s) &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(s); visited[s] = true; pre[s] = s; while (!queue.isEmpty()) &#123; int v = queue.remove(); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; queue.add(w); visited[w] = true; pre[w] = v; &#125; &#125; &#125; &#125; private void validate(int v) &#123; if (v &lt; 0 || v &gt;= graph.V()) &#123; throw new IllegalArgumentException(\"v is out of index\"); &#125; &#125; public boolean isConnected(int t) &#123; validate(t); return visited[t]; &#125; public ArrayList&lt;Integer&gt; path(int t) &#123; ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;(); if (!isConnected(t)) &#123; return res; &#125; int cur = t; while (cur != s) &#123; res.add(cur); cur = pre[cur]; &#125; res.add(s); Collections.reverse(res); return res; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g4.txt\"); SingleSourcePath singleSourcePath = new SingleSourcePath(graph, 0); // 0 -&gt; 6: [0, 2, 6] System.out.println(\"0 -&gt; 6: \" + singleSourcePath.path(6)); &#125;&#125; å¯¹äºåŒæ ·çš„å›¾ï¼Œä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†ï¼Œç»“æœæ˜¯ 0 -&gt; 6: [0, 1, 3, 2, 6] BFS æ‰¾åˆ°çš„è·¯å¾„æ¯” DFS æ‰¾åˆ°çš„è·¯å¾„è¦çŸ­ï¼Œè¿™ä¸æ˜¯å·§åˆï¼Œå› ä¸ºåœ¨æ— å‘æ— ç¯å›¾ä¸­ï¼ŒBFS æœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨å°±æ˜¯å®ƒå¯»æ‰¾åˆ°çš„è·¯å¾„æ˜¯æœ€çŸ­è·¯å¾„ï¼Œæˆ–è€…è¯´ç»å†çš„èŠ‚ç‚¹æœ€å°‘ã€‚ä¸ºä»€ä¹ˆ? æ¢ç§è§’åº¦çœ‹ï¼Œå¹¿åº¦ä¼˜å…ˆéå†æ˜¯æŒ‰ç…§è·ç¦»æºçš„æœ€å°è·ç¦»éå†çš„ã€‚ ä¸‹é¢ä¸€ä¸ªé—®é¢˜æ˜¯å¯»æ‰¾æºåˆ°å„ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œè¿™ä¸ªæœ€ç®€å•çš„å®ç°å°±æ˜¯è·å¾—æºåˆ°å„ç‚¹ä¹‹é—´çš„è·¯å¾„ï¼Œç„¶åè·å¾—è·¯å¾„çš„é•¿åº¦å³å¯æ¨ç®—å‡ºè·ç¦»ã€‚ä¸‹é¢æä¾›ä¸€ç§æ›´å¿«çš„æ–¹æ³•ï¼Œæ— é¡»å…ˆè·å¾—è·¯å¾„ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å£°æ˜ä¸€ä¸ª dis æ•°ç»„æ¥ä¿å­˜æºåˆ°å„ç‚¹çš„è·ç¦»ï¼Œå‡è®¾ w æ˜¯ v çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œä¸” v å…ˆè¢«éå†ï¼Œé‚£ä¹ˆ s -&gt; w çš„è·ç¦»ä¸º s -&gt; v + 1ï¼Œå³ dis[w] = dis[v] + 1 import java.util.*;public class SingleSourcePath &#123; private Graph graph; private int s; private boolean[] visited; private int[] pre; // dis æ•°ç»„ä¿å­˜æºåˆ°å„èŠ‚ç‚¹çš„è·ç¦» private int[] dis; public SingleSourcePath(Graph graph, int s) &#123; this.graph = graph; this.s = s; visited = new boolean[graph.V()]; pre = new int[graph.V()]; // åˆå§‹åŒ– dis = new int[graph.V()]; Arrays.fill(visited, false); Arrays.fill(pre, -1); // åˆå§‹åŒ– Arrays.fill(dis, -1); bfs(s); &#125; private void bfs(int s) &#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); queue.add(s); visited[s] = true; pre[s] = s; // æºåˆ°æºçš„è·ç¦»ä¸º 0 dis[s] = 0; while (!queue.isEmpty()) &#123; int v = queue.remove(); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; queue.add(w); visited[w] = true; pre[w] = v; // æ›´æ–° dis dis[w] = dis[v] + 1; &#125; &#125; &#125; &#125; // ä¸ path ç›¸å…³ä»£ç çœç•¥ public int dis(int t) &#123; validate(t); return dis[t]; &#125;&#125;","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"æœ€é•¿å›æ–‡å­—ç¬¦ä¸²","date":"2020-11-19T15:51:00.000Z","path":"/æœ€é•¿å›æ–‡å­—ç¬¦ä¸²/","text":"é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚ä½ å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000ã€‚ ç¤ºä¾‹ 1ï¼š è¾“å…¥: \"babad\"è¾“å‡º: \"bab\"æ³¨æ„: \"aba\" ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆã€‚ ç¤ºä¾‹ 2ï¼š è¾“å…¥: \"cbbd\"è¾“å‡º: \"bb\" æš´åŠ›æ³•æ‰«æä¸€éå­—ç¬¦ä¸²ï¼Œåˆ¤æ–­ $[i, j]$ èŒƒå›´å†…çš„å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è®°å½•æœ€é•¿çš„å­—ç¬¦ä¸² class Solution &#123; public String longestPalindrome(String s) &#123; if (s == null || s.length() &lt; 2) &#123; return s; &#125; char[] str = s.toCharArray(); int start = 0; int maxLength = 1; for (int i = 0; i &lt; str.length - 1; i++) &#123; for (int j = i + 1; j &lt; str.length; j++) &#123; // å¦‚æœ [i,j] èŒƒå›´çš„å­—ç¬¦ä¸²é•¿åº¦å°äºç›®å‰å·²çŸ¥çš„æœ€é•¿å›æ–‡å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™æ— éœ€åˆ¤æ–­ if ((j - i + 1) &gt; maxLength) &#123; // å¦‚æœæ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼Œæ›´æ–°æœ€é•¿å›æ–‡å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä»¥åŠè¯¥å›æ–‡å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½® if (isPalindrome(str, i, j)) &#123; maxLength = j - i + 1; start = i; &#125; &#125; &#125; &#125; return s.substring(start, start + maxLength); &#125; // åˆ¤æ–­ [start, end] èŒƒå›´å†…çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºå›æ–‡å­—ç¬¦ä¸² private boolean isPalindrome(char[] str, int start, int end) &#123; while (start &lt;= end) &#123; // åˆ¤æ–­ä¸¤ç«¯çš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒ,ä¸ç›¸åŒåˆ™ä¸å¯èƒ½æ˜¯å›æ–‡å­—ç¬¦ä¸² if (str[start] != str[end]) &#123; return false; &#125; start++; end--; &#125; return true; &#125;&#125; åŠ¨æ€è§„åˆ’æˆ‘ä»¬å¼€è¾Ÿä¸€ä¸ªæ•°ç»„ $dp$ï¼Œ$dp[i][j]$ è¡¨ç¤º $[i, j]$ èŒƒå›´å†…çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºå›æ–‡å­—ç¬¦ä¸²ï¼Œé‚£æˆ‘ä»¬å¯ä»¥çŸ¥é“ $$dp[i][j] =\\begin{cases}false, \\quad &amp;when \\quad str[i] \\neq str[j] \\\\dp[i+1][j-1], \\quad &amp;when \\quad str[i] = str[j]\\end{cases}$$ å½“ $str[i] \\neq str[j]$ çš„æ—¶å€™ï¼Œé‚£ä¹ˆä¸å¯èƒ½æ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼Œå¦‚æœ $str[i] = str[j]$ çš„æ—¶å€™ï¼Œå¦‚æœ $dp[i+1][j-1]$ æ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆ $dp[i][j]$ å°±æ˜¯å›æ–‡å­—ç¬¦ä¸²ã€‚ ä½†æ˜¯å¦‚æœ $i + 1 &gt; j - 1$ çš„è¯ï¼Œè¿™æ—¶ $dp[i + 1][j - 1]$ æ²¡æœ‰æ„ä¹‰ï¼Œå…¶å®è¿™ç§æƒ…å†µå°±æ˜¯ $[i,j]$ å†…åªæœ‰ä¸¤ä¸ªå­—ç¬¦ï¼Œå¦‚æœ $str[i] = str[j]$ çš„è¯ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ªå›æ–‡å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¿™æ—¶å¯ä»¥ç›´æ¥å¾—åˆ° $dp[i][j] = true$ã€‚ class Solution &#123; public String longestPalindrome(String s) &#123; if (s == null || s.length() &lt; 2) &#123; return s; &#125; int length = s.length(); boolean dp[][] = new boolean[length][length]; for (int i = 0; i &lt; length; i++) &#123; for (int j = 0; j &lt; length; j++) &#123; dp[i][j] = false; &#125; &#125; // [i,i] è¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œè‚¯å®šæ˜¯å›æ–‡å­—ç¬¦ä¸² for (int i = 0; i &lt; length; i++) &#123; dp[i][i] = true; &#125; int maxLength = 1; int begin = 0; // å› ä¸º [i, j] è¦ç”¨åˆ° [i + 1, j - 1]ï¼Œæ‰€ä»¥è®© i åŠ¨ // å¦‚æœè®© j åŠ¨ï¼Œé‚£ä¹ˆ [i + 1, j -1] çš„èŒƒå›´æ²¡éƒ½åˆ¤æ–­è¿‡ï¼Œä¼šå¯¼è‡´é”™è¯¯çš„ç»“æœ for (int j = 1; j &lt; length; j++) &#123; for (int i = 0; i &lt; j; i++) &#123; // å¦‚æœå­—ç¬¦ä¸¤ç«¯ä¸ç›¸ç­‰ï¼Œä¸æ˜¯å›æ–‡å­—ç¬¦ä¸² if (s.charAt(i) != s.charAt(j)) &#123; dp[i][j] = false; &#125; else &#123; // å¦‚æœåªæœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­ä¸ºå›æ–‡å­—ç¬¦ä¸² if (i + 1 &gt; j - 1) &#123; dp[i][j] = true; &#125; else &#123; // ä¸ dp[i + 1][j - 1] ç›¸åŒ dp[i][j] = dp[i + 1][j - 1]; &#125; &#125; // æ›´æ–°æœ€é•¿é•¿åº¦ä»¥åŠèµ·å§‹ä½ç½® if (dp[i][j] &amp;&amp; (j - i + 1) &gt; maxLength) &#123; maxLength = j - i + 1; begin = i; &#125; &#125; &#125; return s.substring(begin, begin + maxLength); &#125;&#125; ä¸­é—´æ‰©æ•£æ³•ä¸Šé¢çš„æƒ…å†µéƒ½æ˜¯æ£€æŸ¥æŸä¸ªèŒƒå›´å†…çš„å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼Œè€Œä¸­å¿ƒæ‰©æ•£æ³•ï¼Œåˆ™æ˜¯ä»¥æŸç‚¹ä¸ºä¸­å¿ƒè¿›è¡Œå‘å¤–æ‰©æ•£ï¼Œåœ¨æ‰©æ•£çš„åŒæ—¶æ£€æŸ¥æ˜¯å¦æ˜¯å›æ–‡å­—ç¬¦ä¸²ï¼Œè¿‡ç¨‹å¦‚ä¸‹ æ£€æŸ¥è¯¥ç‚¹å·¦å³ä¸¤è¾¹çš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™ç»§ç»­æ‰©æ•£ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™åœæ­¢æ‰©æ•£ åœæ­¢æ‰©æ•£åè®°å½•è¯¥å›æ–‡å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¦‚æœå¤§äºå½“å‰è®°å½•çš„æœ€å¤§å›æ–‡å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿›è¡Œæ›´æ–°ï¼Œä¸ºäº†è·å¾—è¯¥å›æ–‡å­—ç¬¦ä¸²ï¼Œè¿˜éœ€è¦è®°å½•è¯¥å›æ–‡å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½® éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ—¢å¯ä»¥ä»æŸä¸ªå­—ç¬¦å¼€å§‹æ‰©æ•£ï¼Œä¹Ÿå¯ä»¥ä»å­—ç¬¦é—´çš„ç©ºéš™è¿›è¡Œæ‰©æ•£ ä»æŸä¸ªç‚¹è¿›è¡Œæ‰©æ•£çš„ä»£ç å¦‚ä¸‹ï¼š private int centerSpread(String s, int left, int right) &#123; int length = 0; while(left &gt;=0 &amp;&amp; right &lt; s.length()) &#123; if (!(s.charAt(left) == s.charAt(right))) &#123; break; &#125; length++; left--; right++; &#125; return length;&#125; å¦‚æœä»æŸä¸ªå­—ç¬¦è¿›è¡Œæ‰©æ•£ï¼Œé‚£ä¹ˆ left å’Œ right éƒ½æ˜¯è¯¥å­—ç¬¦çš„ä¸‹æ ‡ï¼Œå¦‚æœä»æŸä¸ªå­—ç¬¦ç©ºéš™è¿›è¡Œæ‰©æ•£ï¼Œåˆ™ left å’Œ right åˆ†åˆ«ä¸ºè¯¥ç©ºéš™å·¦å³ä¸¤è¾¹å­—ç¬¦çš„ä¸‹æ ‡ã€‚æ‰©æ•£çš„ç¤ºæ„å›¾å¦‚ä¸‹ å®Œæ•´ä»£ç å¦‚ä¸‹ class Solution &#123; public String longestPalindrome(String s) &#123; int begin = 0; int maxLength = 1; for (int i = 1; i &lt; s.length(); i++) &#123; // ä»å­—ç¬¦ç©ºéš™è¿›è¡Œæ‰©æ•£ int length1 = centerSpread(s, i - 1, i); // ä»å­—ç¬¦è¿›è¡Œæ‰©æ•£ int length2 = centerSpread(s, i, i); // è·å¾—äºŒè€…è¿›è¡Œæ‰©æ•£çš„å›æ–‡å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ int length = (2 * length1) &gt;= (2 * length2 - 1) ? 2 * length1 : (2 * length2 - 1); // å¦‚æœæ¯” maxLength å¤§ï¼Œåˆ™è¿›è¡Œæ›´æ–° if (length &gt; maxLength) &#123; maxLength = length; begin = i - length/2; &#125; &#125; return s.substring(begin, begin + maxLength); &#125; private int centerSpread(String s, int left, int right) &#123; int length = 0; while(left &gt;=0 &amp;&amp; right &lt; s.length()) &#123; if (!(s.charAt(left) == s.charAt(right))) &#123; break; &#125; length++; left--; right++; &#125; return length; &#125;&#125; Manacherç®—æ³•Manacher ç®—æ³•æ˜¯å¯¹ä¸­é—´æ‰©æ•£æ³•çš„æ”¹è¿›ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨å­—ç¬¦é—´å¡«å…… # ä»¥æ­¤å……å½“å­—ç¬¦ç©ºéš™ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œç„¶åç”¨ä¸€ä¸ªæ•°ç»„è®°å½•æ–°å­—ç¬¦ä¸²æ¯ä¸ªå­—ç¬¦èƒ½å¤Ÿæ‰©æ•£å¤šè¿œ b # a # b # a # d æˆ‘ä»¬å¤ç”¨ä¸­å¿ƒæ‰©æ•£æ³•çš„ä»£ç  class Solution &#123; public String longestPalindrome(String s) &#123; int begin = 0; int maxLength = 1; // babad =&gt; b#a#b#a#d String str = String.join( \"#\", s.split(\"\")); for (int i = 1; i &lt; str.length(); i++) &#123; int length = centerSpread(str, i, i); length = 2 * length - 1; if (length &gt;= maxLength) &#123; // #a# b#b äºŒè€…é•¿åº¦ç›¸åŒï¼Œä½†æ˜¯åº”é€‰æ‹©åé¢çš„ if (length &gt; maxLength || str.charAt(i + length/2) != '#') &#123; maxLength = length; begin = i - length/2; &#125; &#125; &#125; // b#a#b =&gt; bab return String.join( \"\", str.substring(begin, begin + maxLength).split(\"#\")); &#125; private int centerSpread(String s, int left, int right) &#123; int length = 0; while (left &gt;= 0 &amp;&amp; right &lt; s.length()) &#123; if (!(s.charAt(left) == s.charAt(right))) &#123; break; &#125; length++; left--; right++; &#125; return length; &#125;&#125; è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¿˜æ²¡æœ‰ä½¿ç”¨ä¸Šé¢æåˆ°çš„æ•°ç»„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åˆ©ç”¨æ•°ç»„è®°å½•ä¸€äº›ä¿¡æ¯ï¼Œä»è€ŒåŠ å¿«ä¸­é—´æ‰©æ•£æ³•çš„é€Ÿåº¦ã€‚ é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“å¦‚ä½•åŠ å¿«ä¸­é—´æ‰©æ•£æ³•çš„é€Ÿåº¦ï¼Œè¿™å°±éœ€è¦åˆ©ç”¨å›æ–‡å­—ç¬¦ä¸²çš„ç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯å›æ–‡å­—ç¬¦ä¸²æ˜¯å·¦å³å¯¹ç§°çš„ï¼Œå½“æˆ‘ä»¬å¯¹å›æ–‡å­—ç¬¦ä¸²å†…çš„æŸä¸ªå­—ç¬¦è¿›è¡Œä¸­é—´æ‰©æ•£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ‰¾åˆ°å¯¹ç§°ä½ç½®çš„å­—ç¬¦ï¼Œçœ‹çœ‹å®ƒèƒ½å¤Ÿæ‰©æ•£çš„å¤šè¿œ å¦‚æœå®ƒæ‰©æ•£çš„è·ç¦»å°äºæ‰€å¤„å›æ–‡å­—ç¬¦ä¸²çš„èŒƒå›´ï¼Œé‚£ä¹ˆæ ¹æ®å¯¹ç§°çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¯¹è¯¥å­—ç¬¦è¿›è¡Œä¸­é—´æ‰©æ•£ï¼Œå®ƒèƒ½å¤Ÿæ‰©æ•£çš„è·ç¦»å°±æ˜¯å¯¹ç§°ä½ç½®æ‰€èƒ½æ‰©æ•£çš„è·ç¦» ä½†æ˜¯å¯¹ç§°ä½ç½®èƒ½å¤Ÿæ‰©æ•£çš„è·ç¦»åˆšå¥½åœ¨æ‰€å¤„å›æ–‡å­—ç¬¦ä¸²çš„è¾¹ç•Œï¼Œæˆ–è€…å¤§äºæ‰€å¤„çš„å›æ–‡å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ­¤æ—¶æ‰©æ•£çš„è·ç¦»å°±ä¸ç­‰äºå¯¹ç§°ä½ç½®èƒ½å¤Ÿæ‰©æ•£çš„è·ç¦»ï¼Œè€Œæ˜¯éœ€è¦è¿›è¡Œæ‰©æ•£æ‰èƒ½ç¡®å®š ä½†æ˜¯æˆ‘ä»¬ä¸éœ€è¦ä»è¯¥å­—ç¬¦ä¸²å¼€å§‹è¿›è¡Œæ‰©æ•£ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç¡®å®šåœ¨å›æ–‡å­—ç¬¦ä¸²çš„èŒƒå›´å†…ï¼Œå®ƒæ˜¯å¯¹ç§°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä»å›æ–‡å­—ç¬¦ä¸²çš„å¤–éƒ¨è¿›è¡Œæ‰©æ•£å³å¯ æ‰©æ•£å®Œæ¯•åè®°å½•èƒ½å¤Ÿæ‰©æ•£åçš„è·ç¦»ï¼Œå¹¶å†³å®šæ˜¯å¦æ›´æ–° beginï¼ŒmaxLengthã€‚ ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•çŸ¥é“æŸä¸ªå­—ç¬¦å¤„äºä¸€ä¸ªå›æ–‡å­—ç¬¦ä¸²ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è®°å½•ä¸¤ä¸ªå˜é‡ center å’Œ maxRight æ¥è¡¨ç¤ºä¸€ä¸ªå›æ–‡å­—ç¬¦ä¸²ï¼Œcenter è¡¨ç¤ºå›æ–‡å­—ç¬¦ä¸²çš„ä¸­å¿ƒï¼ŒmaxRight è¡¨ç¤ºä¸­å¿ƒç¦»å›æ–‡å­—ç¬¦ä¸²å³è¾¹ç•Œçš„è·ç¦» æˆ‘ä»¬è®¤ä¸ºå¦‚æœå­—ç¬¦çš„ä¸‹æ ‡å°äº $center + maxRight$ï¼Œé‚£ä¹ˆå®ƒå°±åœ¨ä¸€ä¸ªå›æ–‡å­—ç¬¦ä¸²ä¸­ã€‚ é‚£ä»€ä¹ˆæ—¶å€™æ›´æ–°è¿™ä¸¤ä¸ªå˜é‡å‘¢? é‚£å°±æ˜¯åœ¨æŸä¸ªå­—ç¬¦æ‰©æ•£ä¹‹åï¼Œä»–å‘å³è¾¹èƒ½å¤Ÿæ‰©æ•£çš„èŒƒå›´å¤§äºå½“å‰çš„ $center + maxRight$ï¼Œé‚£ä¹ˆå°±æ›´æ–° center å’Œ maxRightã€‚ ä»£ç å¦‚ä¸‹ï¼š class Solution &#123; public String longestPalindrome(String s) &#123; // å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸º a#b#c#b çš„å½¢å¼ // String newStr = String.join( \"#\", s.split(\"\")); StringBuilder stringBuilder = new StringBuilder(); for (int i = 0; i &lt; s.length(); i++) &#123; if (i != s.length() - 1) &#123; stringBuilder.append(s.charAt(i) + \"#\"); &#125; else &#123; stringBuilder.append(s.charAt(i)); &#125; &#125; String newStr = stringBuilder.toString(); // records[i] è¡¨ç¤ºæ‰©æ•£è·ç¦» int[] records = new int[newStr.length()]; records[0] = 0; // å›æ–‡å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ int begin = 0; int maxLength = 1; // è¡¨ç¤ºå›æ–‡å­—ç¬¦ä¸² int center = 0; int maxRight = 0; for (int i = 1; i &lt; newStr.length(); i++) &#123; // å¦‚æœ str[i] åœ¨æŸä¸ªå›æ–‡å­—ç¬¦ä¸²ä¸­ if (i &lt;= center + maxRight) &#123; // å¯¹ç§°ä½ç½®çš„æ‰©æ•£è·ç¦» int mirrorLength = records[2 * center - i]; // è¶…è¿‡æˆ–ç­‰äº center + maxRight è¡¨ç¤ºçš„è¾¹ç•Œï¼Œè¿›è¡Œä¸­é—´æ‰©æ•£ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„æ›´æ–° if (i + mirrorLength &gt;= center + maxRight) &#123; // æ‰©æ•£ int length = center + maxRight - i; while (i + length + 1 &lt; newStr.length() &amp;&amp; (i -length - 1) &gt;= 0) &#123; if (newStr.charAt(i + length + 1) != newStr.charAt(i - length - 1)) &#123; break; &#125; length++; &#125; records[i] = length; // æ›´æ–° if (2 * length + 1 &gt;= maxLength) &#123; if (2 * length + 1 &gt; maxLength || newStr.charAt(center) != '#') &#123; begin = i - length; maxLength = 2 * length + 1; &#125; &#125; if (i + length &gt; center + maxRight) &#123; center = i; maxRight = length; &#125; &#125; else &#123; // å°äº center + maxRight å½¢æˆçš„è¾¹ç•Œï¼Œç›´æ¥ä½¿ç”¨å¯¹ç§°ä½ç½®çš„å€¼ records[i] = mirrorLength; &#125; &#125; else &#123; // ä¸åœ¨å›æ–‡å­—ç¬¦ä¸²ä¸­ï¼Œè¿›è¡Œä¸­å¿ƒæ‰©æ•£ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„æ›´æ–° int length = 0; while (i + length + 1 &lt; newStr.length() &amp;&amp; (i - length - 1) &gt;= 0) &#123; if (newStr.charAt(i + length + 1) != newStr.charAt(i - length - 1)) &#123; break; &#125; length++; &#125; if (2 * length + 1 &gt; maxLength) &#123; begin = i - length; maxLength = 2 * length + 1; &#125; center = i; maxRight = length; records[i] = length; &#125; &#125; // å°† a#b#b#a å½¢å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸º abba // return String.join( \"\", newStr.substring(begin, begin + maxLength).split(\"#\")); String ss = newStr.substring(begin, begin + maxLength); StringBuilder stringBuilder1 = new StringBuilder(); for (int i = 0; i &lt; ss.length(); i++) &#123; if (ss.charAt(i) != '#') &#123; stringBuilder1.append(ss.charAt(i)); &#125; &#125; return stringBuilder1.toString(); &#125;&#125;","tags":[{"name":"leetcode","slug":"leetcode","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/leetcode/"}]},{"title":"å®‰å…¨ä¸ç®—æ³•","date":"2020-11-05T01:55:00.000Z","path":"/å®‰å…¨ç®—æ³•/","text":"æˆ‘ä»¬åœ¨ä½¿ç”¨äº’è”ç½‘äº¤æ¢æ•°æ®æ—¶ï¼Œæ•°æ®éœ€è¦ç»è¿‡å„ç§å„æ ·çš„ç½‘ç»œè®¾å¤‡æ‰èƒ½åˆ°è¾¾é€šä¿¡åŒæ–¹ï¼Œå¦‚æœæ•°æ®åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ç»è¿‡æŸäº›æ¶æ„ç”¨æˆ·çš„è®¾å¤‡ï¼Œå°±æœ‰å¯èƒ½å¯¼è‡´ä¿¡æ¯è¢«çªƒå–ã€‚æ‰€ä»¥å¦‚æœæƒ³å®‰å…¨çš„ä½¿ç”¨äº’è”ç½‘ï¼Œäº†è§£å¿…é¡»çš„å®‰å…¨æŠ€æœ¯æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚ å®‰å…¨é—®é¢˜æˆ‘ä»¬é¦–å…ˆäº†è§£ä¸€ä¸‹åœ¨é€šä¿¡çš„è¿‡ç¨‹ä¸­ä¼šé‡åˆ°ä»€ä¹ˆæ ·çš„å®‰å…¨é—®é¢˜ã€‚ çªƒå¬ $A$ å‘ $B$ å‘é€çš„ä¿¡æ¯å¯èƒ½ä¼šåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­è¢« $X$ å·çœ‹ï¼Œè¿™å°±æ˜¯çªƒå¬ã€‚ å‡å†’ $A$ ä»¥ä¸ºç»™ $B$ å‘é€äº†æ¶ˆæ¯ï¼Œä½†æ˜¯ $B$ æœ‰å¯èƒ½æ˜¯ $X$ å†’å……çš„ï¼›åŒæ · $B$ ä»¥ä¸ºæ”¶åˆ°äº† $A$ çš„æ¶ˆæ¯ï¼Œä½†æ˜¯ $A$ ä¹Ÿæœ‰å¯èƒ½æ˜¯ $X$ å†’å……çš„ï¼Œè¿™ç§é—®é¢˜å«åšå‡å†’ã€‚ ç¯¡æ”¹ $B$ ç¡®å®æ”¶åˆ°äº† $A$ å‘é€çš„ä¿¡æ¯ï¼Œä½†æ˜¯å†…å®¹å·²ç»è¢« $X$ ç»™æ”¹å˜äº†ï¼Œè¿™ç§è¡Œä¸ºå«åšç¯¡æ”¹ã€‚ äº‹åå¦è®¤ $B$ ä» $A$ é‚£é‡Œæ”¶åˆ°äº†æ¶ˆæ¯ï¼Œä½†æ˜¯ $A$ åœ¨äº‹åå®£ç§°æ¶ˆæ¯ä¸æ˜¯å®ƒå‘çš„ï¼Œè¿™ä¼šå¯¼è‡´äº’è”ç½‘ä¸Šçš„å•†ä¸šäº¤æ˜“æˆ–åˆåŒæ— æ³•æˆç«‹ï¼Œè¿™ç§è¡Œä¸ºå«åšäº‹åå¦è®¤ã€‚ åœ¨è¿™ç¯‡æ–‡ç« ä¸­å°±ç€é‡è§£å†³è¿™å››ç±»é—®é¢˜ï¼Œå¯¹äºçªƒå¬ï¼Œæˆ‘ä»¬å¯¹æ¶ˆæ¯è¿›è¡ŒåŠ å¯†æŠ€æœ¯ï¼›å¯¹äºå‡å†’ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¶ˆæ¯è®¤è¯ç æˆ–æ•°å­—ç­¾åï¼›å¯¹äºç¯¡æ”¹ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨æ¶ˆæ¯è®¤è¯ç æˆ–æ•°å­—ç­¾åï¼›å¯¹äºäº‹åå¦è®¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­—ç­¾åã€‚ é—®é¢˜ è§£å†³åŠæ³• çªƒå¬ åŠ å¯† å‡å†’ æ¶ˆæ¯è®¤è¯ç æˆ–æ•°å­—ç­¾å ç¯¡æ”¹ æ¶ˆæ¯è®¤è¯ç æˆ–æ•°å­—ç­¾å äº‹åå¦è®¤ æ•°å­—ç­¾å æ•°å­—ç­¾åå­˜åœ¨æ— æ³•ç¡®è®¤å…¬å¼€å¯†é’¥åˆ¶ä½œè€…çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­—è¯ä¹¦æ¥è§£å†³ï¼Œå…·ä½“çš„è¿‡ç¨‹æˆ‘ä»¬åœ¨åé¢åˆ†æã€‚ å¯¹ç§°åŠ å¯†å¦‚æœæˆ‘ä»¬åœ¨äº’è”ç½‘ä¸Šç›´æ¥å°†æ¶ˆæ¯å‘é€è¿‡å»çš„è¯ï¼Œæœ‰å¯èƒ½ä¼šè¢«çªƒå¬ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ¶ˆæ¯å˜ä¸ºå¯†æ–‡ï¼Œç„¶åå‘é€å‡ºå»ï¼Œå°†æ¶ˆæ¯å˜ä¸ºå¯†æ–‡çš„è¿‡ç¨‹å«åšåŠ å¯†ï¼ŒåŒæ ·åœ¨æ¥æ”¶æ–¹éœ€è¦å°†å¯†æ–‡å˜ä¸ºæ˜æ–‡(æ¶ˆæ¯)ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè§£å¯†ã€‚ åœ¨åŠ å¯†å’Œè§£å¯†çš„è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°å¯†é’¥ï¼Œæ‰€è°“çš„å¯†é’¥å¯ä»¥ç±»æ¯”äºé’¥åŒ™ï¼Œé’¥åŒ™çš„ä½œç”¨å°±æ˜¯åŠ é”ä¸å¼€é”ï¼Œè€Œå¯†é’¥çš„ä½œç”¨æ˜¯åŠ å¯†ä¸è§£å¯†ã€‚æ ¹æ®åŠ å¯†å’Œè§£å¯†æ˜¯å¦ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„å¯†é’¥ï¼Œå¯ä»¥åˆ†ä¸ºå¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†ï¼š å¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†çš„å¯†é’¥æ˜¯åŒä¸€ä¸ªå¯†é’¥ éå¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†çš„å¯†é’¥ä¸ç›¸åŒ åœ¨æœ¬å°èŠ‚ä¸­å°±ä»‹ç»å¯¹ç§°åŠ å¯†ï¼Œä»¥åŠå¯¹ç§°åŠ å¯†å­˜åœ¨ä»€ä¹ˆé—®é¢˜ã€‚ å¯¹ç§°åŠ å¯†çš„è¿‡å¦‚ä¸‹ï¼š $A$ å°†å¯†é’¥ $key$ å‘é€ç»™ $B$ $A$ ä½¿ç”¨å¯†é’¥ $key$ å¯¹æ¶ˆæ¯ $aaa$ åŠ å¯†ï¼Œå¾—åˆ°å¯†æ–‡ $xyz$ $B$ æ¥åˆ°å¯†æ–‡ $xyz$ï¼Œä½¿ç”¨å¯†é’¥ $key$ å¯¹å¯†æ–‡è§£å¯†å¾—åˆ° $aaa$ è¿™æ—¶å¦‚æœçªƒå¬è€…æ¥çªƒå¬çš„è¯ï¼Œå› ä¸ºçªƒå¬è€…æ²¡æœ‰å¯†é’¥ï¼Œæ‰€ä»¥æ— æ³•å¾—çŸ¥æ˜æ–‡æ˜¯ä»€ä¹ˆã€‚ ä½†æ˜¯ä¸Šè¿°çš„åŠ å¯†æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå¯†é’¥ $key$ åœ¨ $A$ å‘é€ç»™ $B$ çš„æ—¶å€™è¢«çªƒå¬äº† è¿™æ—¶çªƒå¬è€…å°±çŸ¥é“å¯†é’¥ï¼Œä»¥æ­¤å°†å¯†æ–‡è§£å¯†ï¼Œä»è€Œçªƒå¬æ¶ˆæ¯ã€‚ éå¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†æŒ‡çš„æ˜¯åŠ å¯†çš„å¯†é’¥å’Œè§£å¯†çš„å¯†é’¥ä¸æ˜¯åŒä¸€ä¸ªå¯†é’¥ï¼Œæˆ‘ä»¬æŠŠåŠ å¯†å¯†é’¥ç§°ä¸ºå…¬å¼€å¯†é’¥ï¼Œå› ä¸ºå®ƒæ˜¯å¯ä»¥å…¬å¼€çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®åˆ°ï¼Œæˆ‘ä»¬ç§°è§£å¯†å¯†é’¥ä¸ºç§æœ‰å¯†é’¥ã€‚ å½“ $A$ ç»™ $B$ å‘é€æ¶ˆæ¯æ—¶ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œ$B$ ä¼šç”Ÿæˆå…¬å¼€å¯†é’¥å’Œç§æœ‰å¯†é’¥ï¼Œç„¶å $B$ å°†å…¬å¼€å¯†é’¥å‘é€ç»™ $A$ï¼Œæ¥ç€ $A$ ä½¿ç”¨è¯¥å…¬å¼€å¯†é’¥åŠ å¯†æ¶ˆæ¯ï¼Œå¹¶å°†æ¶ˆæ¯å‘é€ç»™ $B$ï¼Œå½“ $B$ æ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œä½¿ç”¨ç§æœ‰å¯†é’¥å¯¹æ¶ˆæ¯è§£å¯† å³ä½¿çªƒå¬è€…çªƒå¬åˆ°äº†å¯†æ–‡ä»¥åŠå…¬å¼€å¯†é’¥ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰ç§æœ‰å¯†é’¥ï¼Œæ‰€ä»¥å®ƒä¸èƒ½è§£å¯†å‡ºæ¶ˆæ¯ã€‚ ä½†æ˜¯è¿™ç§æ–¹æ³•å¹¶ä¸æ˜¯å®Œç¾çš„ï¼Œå‡è®¾åœ¨ $B$ å‘ $A$ å‘é€å…¬å¼€å¯†é’¥æ—¶ï¼Œçªƒå¬è€…å°† $B$ å…¬å¼€å¯†é’¥ä¿®æ”¹ä¸ºäº†è‡ªå·±çš„å…¬å¼€å¯†é’¥å‘é€ç»™ $A$ å› ä¸ºå…¬å¼€å¯†é’¥å¹¶ä¸èƒ½æŒ‡æ˜æ¥æºæ˜¯è°ï¼Œå½“ $A$ æ¥æ”¶åˆ°å¯†é’¥æ—¶è¯¯ä»¥ä¸ºæ˜¯ $B$ çš„å…¬å¼€å¯†é’¥ï¼Œè¿™æ ·å½“ $A$ å‘ $B$ å‘é€æ¶ˆæ¯æ—¶ï¼Œå…¶å®ä½¿ç”¨çš„æ˜¯çªƒå¬è€…çš„å…¬å¼€å¯†é’¥æ¥åŠ å¯†æ¶ˆæ¯ï¼Œè¿™æ—¶çªƒå¬è€…é€šè¿‡ç§é’¥è§£å¯†ï¼Œä»è€Œçªƒå¬åˆ°æ¶ˆæ¯ å¹¶ä¸”å†æ¬¡ä½¿ç”¨ $B$ çš„å…¬å¼€å¯†é’¥åŠ å¯†æ¶ˆæ¯ï¼Œå°†æ¶ˆæ¯å‘é€ç»™ $B$ï¼Œå¯¹äº $A$ å’Œ $B$ æ¥è¯´ï¼Œå®ƒä»¬å®Œå…¨æ²¡æœ‰æ„è¯†åˆ°è‡ªå·±è¢«çªƒå¬äº† è¿™ç§é€šè¿‡ä¸­é€”æ›¿æ¢å…¬å¼€å¯†é’¥æ¥çªƒå¬æ•°æ®çš„æ”»å‡»æ–¹æ³•å«åšä¸­é—´äººæ”»å‡»ã€‚ éå¯¹ç§°åŠ å¯†å¯é æ€§ä¼šå‡ºç°é—®é¢˜å°±æ˜¯å› ä¸º $A$ æ— æ³•åˆ¤æ–­æ¥æ”¶åˆ°çš„å¯†é’¥æ˜¯å¦æ¥è‡ªäº $B$ï¼Œæƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦ç”¨åˆ°åé¢è®²åˆ°çš„æ•°å­—è¯ä¹¦ã€‚ æ··åˆåŠ å¯†ä½¿ç”¨éå¯¹ç§°åŠ å¯†è™½ç„¶æ¯”å¯¹ç§°åŠ å¯†å®‰å…¨ï¼Œä½†æ˜¯éå¯¹ç§°åŠ å¯†æ–¹æ³•åŠ å¯†å’Œè§£å¯†æ‰€éœ€çš„èµ„æºä»¥åŠæ—¶é—´æ¯”å¯¹ç§°åŠ å¯†æ–¹æ³•æ‰€éœ€çš„èµ„æºå’Œæ—¶é—´ä»£ä»·é«˜å¾ˆå¤šï¼Œé‚£ä¹ˆå°±æœ‰äººæå‡ºä¸€ç§åŠ å¯†æ–¹å¼ï¼ŒåŒæ—¶ä½¿ç”¨å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†è¿™ç§æ··åˆåŠ å¯†çš„æ–¹å¼ï¼Œæ—¢èƒ½å¾—åˆ°éå¯¹ç§°åŠ å¯†çš„å®‰å…¨æ€§ï¼Œåˆèƒ½å¾—åˆ°å¯¹ç§°åŠ å¯†çš„å¿«é€Ÿæ€§ã€‚ é¦–å…ˆæˆ‘ä»¬ä¸Šé¢è°ˆåˆ°å¯¹ç§°åŠ å¯†æ—¶æœ‰è®²åˆ°å¯¹ç§°åŠ å¯†çš„ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯éœ€è¦å°†åŠ å¯†çš„å¯†é’¥åœ¨äº’è”ç½‘ä¸Šä¼ è¾“ï¼Œè€Œå¯†é’¥æœ‰å¯èƒ½ä¼šè¢«çªƒå¬è€…çªƒå–ã€‚ å¦‚æœæˆ‘ä»¬ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„æ–¹æ³•æ¥åŠ å¯†å¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œè¿™æ ·å¯¹ç§°åŠ å¯†çš„å¯†é’¥å°±ä¸ä¼šè¢«çªƒå¬è€…çªƒå–ï¼Œå› ä¸ºçªƒå¬è€…æ²¡æœ‰ç§é’¥ï¼Œç„¶ååœ¨ä¸‹é¢çš„é€šä¿¡è¿‡ç¨‹ä¸­ä½¿ç”¨å¯¹ç§°åŠ å¯†çš„å¯†é’¥åŠ å¯†æ¶ˆæ¯ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨äº†éå¯¹ç§°åŠ å¯†åŠ å¯†äº†å¯¹ç§°åŠ å¯†æ‰€ä½¿ç”¨çš„å¯†é’¥ï¼Œè€Œæ¶ˆæ¯çš„åŠ å¯†éƒ½æ˜¯é€šè¿‡å¯¹ç§°åŠ å¯†çš„å¯†é’¥åŠ å¯†çš„ï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼Œè¿™æ ·æ—¢ä¿è¯äº†å®‰å…¨æ€§ï¼Œåˆå…¼é¡¾äº†åŠ è§£å¯†æ‰€éœ€çš„èµ„æºå’Œæ—¶é—´ã€‚ ç›®å‰åœ¨ç½‘é¡µä¸­ä½¿ç”¨çš„ HTTPS åè®®ä½¿ç”¨çš„å°±æ˜¯æ··åˆåŠ å¯†çš„æ–¹å¼ã€‚ å¯†é’¥äº¤æ¢ç®—æ³•Diffie-Hellman å¯†é’¥äº¤æ¢å¯ä»¥è§£å†³ä½¿ç”¨å¯¹ç§°åŠ å¯†æ–¹æ³•è¿›è¡Œé€šä¿¡æ—¶å¯†é’¥è¢«çªƒå¬çš„é—®é¢˜ã€‚åœ¨è®²è§£è¯¥ç®—æ³•çš„æ¶ˆæ¯è¿‡ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹è¯¥ç®—æ³•çš„æ¦‚å¿µã€‚ è¯¥ç®—æ³•å®ƒå¯ä»¥åˆæˆä¸¤ä¸ªå¯†é’¥ å¹¶ä¸”åˆæˆçš„å¯†é’¥æœ‰ä¸‰ä¸ªç‰¹ç‚¹ å·²çŸ¥å…¶ä¸­ä¸€ä¸ªå¯†é’¥ï¼Œæ— æ³•æ ¹æ®åˆæˆçš„å¯†é’¥æ¨æ–­å‡ºå¦ä¸€ä¸ªå¯†é’¥ åˆæˆçš„å¯†é’¥å¯ä»¥ç»§ç»­ä¸å…¶ä»–çš„å¯†é’¥è¿›è¡Œåˆæˆ å¯†é’¥åˆæˆçš„ç»“æœä¸åˆæˆçš„é¡ºåºæ— å…³ ç°åœ¨æˆ‘ä»¬å°±ä½¿ç”¨è¿™ç§æ–¹æ³•åœ¨ $A$ å’Œ $B$ ä¹‹é—´ä¼ é€’å¯†é’¥ï¼Œé¦–å…ˆç”± $A$ ç”Ÿæˆå¯†é’¥ $P$ï¼Œç„¶åå°†è¯¥å¯†é’¥å‘é€ç»™ $B$ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æœ‰å¯èƒ½è¢«çªƒå¬è€… $X$ çªƒå–åˆ°å¯†é’¥ï¼Œæ‰€ä»¥è¿™æ—¶çš„å¯†é’¥ä¸èƒ½è¢«ç”¨æ¥åŠ å¯†æ¶ˆæ¯ æ¥ç€ $A$ å’Œ $B$ å„è‡ªç”Ÿæˆè‡ªå·±çš„ç§é’¥ $SA$ å’Œ $SB$ï¼Œå¹¶ä½¿ç”¨ä¸Šè¿°çš„åˆæˆæ–¹æ³•ä¸å¯†é’¥ $P$ è¿›è¡Œåˆæˆï¼Œç„¶åå‘é€ç»™å¯¹æ–¹ï¼ŒåŒæ–¹æ¥æ”¶åˆ°å¯¹æ–¹åˆæˆçš„å¯†é’¥åï¼Œå†å°†å¯†é’¥ä¸è‡ªå·±çš„ç§é’¥åˆæˆï¼Œå¦‚ä¸‹ æœ€åï¼Œ$A$ å¾—åˆ°å¯†é’¥ $P|SB|SA$ï¼Œè€Œ $B$ å¾—åˆ°å¯†é’¥ $P|SA|SB$ï¼Œæ ¹æ®ç®—æ³•ç‰¹ç‚¹ $3$ï¼Œåˆæˆçš„å¯†é’¥ä¸åˆæˆçš„é¡ºåºæ— å…³ï¼Œæ‰€ä»¥äºŒè€…çš„å¯†é’¥æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ $A$ å’Œ $B$ å¯ä»¥ç”¨è¯¥å¯†é’¥æ¥åŠ å¯†å’Œè§£å¯†æ¶ˆæ¯ã€‚ é‚£çªƒå¬è€…æœ‰å¯èƒ½çªƒå¬è¯¥å¯†é’¥å—? é€šè¿‡ä¸Šé¢çš„åŠ¨å›¾æˆ‘ä»¬çŸ¥é“çªƒå¬è€…æŒæ¡çš„ä¿¡æ¯æœ‰å¯†é’¥ $P$ï¼Œä»¥åŠä¸¤ä¸ªåˆæˆå¯†é’¥ $P|SA$ å’Œ $P|SB$ï¼Œæ ¹æ®ç®—æ³•ç‰¹ç‚¹ $1$ï¼Œçªƒå¬è€…æ˜¯æ— æ³•æ¨æ–­ $SA$ å’Œ $SB$ çš„ï¼Œæ‰€ä»¥çªƒå¬è€…å°±ä¸èƒ½åˆæˆå‡ºå¯†é’¥ $P|SA|SB$ã€‚ æ¶ˆæ¯è®¤è¯ç æ¶ˆæ¯è®¤è¯ç å¯ä»¥æ£€æµ‹ç¯¡æ”¹ï¼Œä¾‹å¦‚ä¸‹é¢çš„åœºæ™¯ $A$ å‘ $B$ å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œåœ¨ä¸­é€”æ¶ˆæ¯è¢«æ¶æ„ç”¨æˆ·ä¿®æ”¹äº†ï¼Œä½†æ˜¯ $B$ å¹¶æ²¡æœ‰æ„è¯†åˆ°æ¶ˆæ¯å·²ç»è¢«ä¿®æ”¹äº†ï¼Œä»¥ä¸ºæ¥æ”¶åˆ°çš„æ¶ˆæ¯å°±æ˜¯ $A$ å‘é€çš„æ¶ˆæ¯ã€‚æ¶ˆæ¯è®¤è¯ç å¯ä»¥é¢„é˜²è¿™ç§æƒ…å†µå‘ç”Ÿã€‚ ä¸‹é¢çœ‹ä¸€ä¸‹ä½¿ç”¨æ¶ˆæ¯è®¤è¯ç å‘æ¶ˆæ¯çš„æµç¨‹ï¼š $A$ ç”Ÿæˆäº†ä¸€ä¸ªç”Ÿæˆæ¶ˆæ¯è®¤è¯ç çš„å¯†é’¥ï¼Œå¹¶ä»¥å®‰å…¨çš„æ–¹å¼å°†å¯†é’¥å‘é€ç»™äº† $B$ $A$ æ ¹æ®æ¶ˆæ¯å†…å®¹(å·²åŠ å¯†)ï¼Œä½¿ç”¨å¯†é’¥ç”Ÿæˆä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªç”Ÿæˆçš„å€¼å°±æ˜¯æ¶ˆæ¯è®¤è¯ç ï¼Œç®€ç§° MAC(Message Authentication Code) $A$ å°†æ¶ˆæ¯å’Œ MAC å‘é€ç»™ $B$ $B$ æ ¹æ®æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œä½¿ç”¨ $A$ ä¹‹å‰å‘é€çš„å¯†é’¥ç”Ÿæˆä¸€ä¸ªå€¼ï¼Œå¦‚æœè¿™ä¸ªå€¼ä¸ $A$ å‘é€è¿‡æ¥çš„ MAC ç›¸åŒï¼Œåˆ™å¯ä»¥è®¤ä¸ºæ¶ˆæ¯æ˜¯æ²¡æœ‰è¢«ç¯¡æ”¹è¿‡çš„ æ¥ä¸‹æ¥åªéœ€è¦å¯¹å¯†æ–‡è§£å¯†å³å¯ å¦‚æœåœ¨ä¸­é€” $X$ å¯¹ $A$ å‘é€çš„æ¶ˆæ¯è¿›è¡Œäº†ç¯¡æ”¹ï¼Œé‚£ä¹ˆ $B$ æ”¶åˆ°çš„å¯†æ–‡å’Œ $A$ å‘é€çš„å¯†æ–‡ä¸åŒï¼Œé‚£ä¹ˆ $B$ ç”Ÿæˆçš„æ¶ˆæ¯è®¤è¯ç å’Œ $A$ å‘é€çš„æ¶ˆæ¯è®¤è¯ç å°±ä¸ç›¸åŒï¼Œè¿™ä¸ªæ—¶å€™ $B$ å°±çŸ¥é“æ¶ˆæ¯è¢«ç¯¡æ”¹è¿‡äº†ï¼Œè¿™æ—¶å¯ä»¥è¦æ±‚ $A$ é‡æ–°å‘é€æ¶ˆæ¯ã€‚ æ•°å­—ç­¾åæ¶ˆæ¯è®¤è¯ç è™½ç„¶è§£å†³äº†ç¯¡æ”¹çš„é—®é¢˜ï¼Œä½†æ˜¯å› ä¸ºä»–ä»¬ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„å¯†é’¥åŠ å¯†å’Œè§£å¯†ï¼Œæ‰€ä»¥ $B$ ä¹Ÿå¯ä»¥ç”Ÿæˆæ¶ˆæ¯è®¤è¯ç ï¼Œæ‰€ä»¥äº‹å $A$ å¯ä»¥å¦è®¤æ¶ˆæ¯å¹¶ä¸æ˜¯ä»–å‘çš„ï¼Œå› ä¸ºä¸ä»…ä»…æ˜¯ä»–å¯ä»¥ç”Ÿæˆæ¶ˆæ¯è®¤è¯ç (äº‹æƒ…åˆä¸æ˜¯æˆ‘ä¸€ä¸ªäººå¯ä»¥å¹²ï¼Œä½ å‡­ä»€ä¹ˆè¯´æ˜¯æˆ‘å¹²çš„)ã€‚ ä½¿ç”¨æ•°å­—ç­¾åä¸ä»…å¯ä»¥è§£å†³ç¯¡æ”¹é—®é¢˜ï¼Œè¿˜å¯ä»¥è§£å†³äº‹åå¦è®¤é—®é¢˜ã€‚å‡è®¾ $A$ ç»™ $B$ å‘é€æ¶ˆæ¯ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹ä¸€ä¸‹æµç¨‹ï¼š $A$ åœ¨å‘é€å‰ç»™æ¶ˆæ¯åŠ ä¸Šæ•°å­—ç­¾åï¼Œæ•°å­—ç­¾ååªèƒ½ç”± $A$ ç”Ÿæˆ $B$ æ”¶åˆ° $A$ çš„æ¶ˆæ¯ï¼ŒéªŒè¯æ•°å­—ç­¾åçš„æ­£ç¡®æ€§ï¼Œä½†æ˜¯æ— æ³•ç”Ÿæˆæ•°å­—ç­¾å å› ä¸ºæ•°å­—ç­¾ååªèƒ½ç”± $A$ ç”Ÿæˆï¼Œæ‰€ä»¥ $A$ æ— æ³•åœ¨äº‹åå¦è®¤(è¿™ä»¶äº‹æƒ…å°±ä½ èƒ½å¹²ï¼Œä¸æ˜¯ä½ å¹²çš„æ˜¯è°å¹²çš„)ã€‚ æˆ‘ä»¬çœ‹ä¸€ä¸‹ä½¿ç”¨æ•°å­—ç­¾åé€šä¿¡çš„è¯¦ç»†è¿‡ç¨‹ï¼š $A$ ç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œå…¬é’¥æ˜¯æ¯ä¸ªäººéƒ½çŸ¥é“çš„ï¼Œç§é’¥æ˜¯ $A$ ç‹¬æœ‰çš„ï¼Œ$A$ ä½¿ç”¨ç§é’¥å¯¹æ¶ˆæ¯(å·²åŠ å¯†åçš„æ¶ˆæ¯)åŠ å¯†ï¼Œå¾—åˆ°æ•°å­—ç­¾å $A$ å°†æ¶ˆæ¯ä»¥åŠæ•°å­—ç­¾åå‘é€ç»™ $B$ $B$ ä½¿ç”¨ $A$ çš„å…¬é’¥å¯¹æ¶ˆæ¯è§£å¯†ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°å­—ç­¾åï¼ŒéªŒè¯è¯¥æ•°å­—ç­¾åä¸ $A$ å‘é€æ•°å­—ç­¾åæ˜¯å¦ç›¸åŒ æ•°å­—ç­¾åç¡®è®¤æ— è¯¯ï¼Œè¯´æ˜æ¶ˆæ¯æ²¡æœ‰ç»è¿‡ç¯¡æ”¹ï¼Œå¹¶ä¸”å¯ä»¥ç¡®è®¤æ¶ˆæ¯æ˜¯ $A$ å‘çš„ï¼Œå¯ä»¥å¯¹æ¶ˆæ¯è§£å¯†å¾—åˆ°æ˜æ–‡ ä¸Šè¿°è¿‡ç¨‹æœ‰ä¸¤æ¬¡åŠ å¯†ï¼Œç¬¬ä¸€æ¬¡åŠ å¯†æ˜¯å¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†ï¼Œå¾—åˆ°å¯†æ–‡é˜²æ­¢è¢«çªƒå¬ï¼Œç¬¬äºŒæ¬¡åŠ å¯†æ˜¯æ ¹æ®å¯†æ–‡ç”Ÿæˆæ•°å­—ç­¾åã€‚å¯¹åº”çš„ä¹Ÿè¦è¿›è¡Œä¸¤æ¬¡è§£å¯†ï¼Œç¬¬ä¸€æ¬¡è§£å¯†æ˜¯ä¸ºäº†å¾—åˆ°æ•°å­—ç­¾åï¼Œä»è€ŒéªŒè¯æ•°å­—ç­¾åçš„æ­£ç¡®æ€§ï¼Œå¦‚æœæ•°å­—ç­¾åç¡®è®¤æ— è¯¯ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œç¬¬äºŒæ¬¡è§£å¯†ï¼Œå°†å¯†æ–‡å˜æ¢ä¸ºæ˜æ–‡ï¼Œå¾—åˆ°çœŸæ­£çš„æ¶ˆæ¯ã€‚ äº‹å®ä¸Šï¼Œä½¿ç”¨ç§é’¥å¯¹å…¨éƒ¨çš„æ¶ˆæ¯è¿›è¡ŒåŠ å¯†æ¯”è¾ƒè€—è´¹æ—¶é—´ï¼Œä¸€èˆ¬æ˜¯æ ¹æ®æ¶ˆæ¯ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œç„¶åå¯¹å“ˆå¸Œå€¼åŠ å¯†å¾—åˆ°æ•°å­—ç­¾åã€‚ å› ä¸ºæ•°å­—ç­¾åæ˜¯ä½¿ç”¨ç§é’¥è¿›è¡ŒåŠ å¯†çš„ï¼Œåªæœ‰ $A$ æœ‰ç§é’¥ï¼Œæ‰€ä»¥ $A$ æ— æ³•äº‹åå¦è®¤ã€‚ åœ¨æœ¬å°èŠ‚æ¯”è¾ƒå¼ºè°ƒæ•°å­—ç­¾ååœ¨äº‹åå¦è®¤æ–¹é¢çš„ä½œç”¨ï¼Œä½†æ˜¯æ•°å­—ç­¾åå¯ä»¥ç”¨æ¥æ£€æµ‹æ¶ˆæ¯æ˜¯å¦è¢«ç¯¡æ”¹ï¼Œå› ä¸ºæ•°å­—ç­¾åçš„ç”Ÿæˆä¸æ¶ˆæ¯çš„å†…å®¹æ˜¯æœ‰å…³çš„ï¼Œå¦‚æœæ¶ˆæ¯è¢«ç¯¡æ”¹äº†ï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ•°å­—ç­¾åå°±ä¸å¯¹ï¼Œå°±å¯ä»¥å¾—çŸ¥æ¶ˆæ¯è¢«ç¯¡æ”¹äº†æˆ–è€…ä¸æ˜¯ $A$ å‘é€çš„æ¶ˆæ¯ã€‚ æ•°å­—è¯ä¹¦å› ä¸ºæ•°å­—ç­¾åæ²¡æœ‰è§£å†³å…¬å¼€å¯†é’¥åˆ¶ä½œè€…çš„é—®é¢˜ï¼Œæ‰€ä»¥å¦‚æœ $X$ å‡å†’ $A$ ç»™ $B$ å‘é€æ¶ˆæ¯ï¼Œæ­¤æ—¶ $X$ ä¼šç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œå¹¶ä¸”å°†å…¬é’¥å‘é€ç»™ $B$ï¼Œå› ä¸ºå…¬é’¥ä¸­æ²¡æœ‰æºå¸¦å‘é€è€…çš„ä¿¡æ¯ï¼Œ$B$ å°±ä¼šä½¿ç”¨è¯¥å…¬é’¥æ¥éªŒè¯æ•°å­—ç­¾åï¼Œå¯¹äº $B$ æ¥è¯´ä»–ä»¥ä¸ºè‡ªå·±åœ¨å’Œ $A$ é€šä¿¡ï¼Œå®é™…ä¸Šåœ¨ä¸ $A$ é€šä¿¡ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦ä½¿ç”¨æ•°å­—è¯ä¹¦ï¼Œå‡è®¾ $A$ ç»™ $B$ å‘é€æ¶ˆæ¯ï¼Œé€šä¿¡è¿‡ç¨‹å¦‚ä¸‹ï¼š $A$ å°†åŒ…å«å…¬å¼€å¯†é’¥ä»¥åŠè‡ªå·±çš„ç›¸å…³ä¿¡æ¯(å¦‚é‚®ç®±)çš„ä¸ªäººèµ„æ–™å‘é€ç»™è®¤è¯ä¸­å¿ƒ è®¤è¯ä¸­å¿ƒæ ¹æ® $A$ çš„èµ„æ–™ä½¿ç”¨è‡ªå·±çš„ç§é’¥ç”Ÿæˆä¸€ä¸ªæ•°å­—ç­¾åï¼Œå¹¶ä¸”å°†æ•°å­—ç­¾åä»¥åŠèµ„æ–™æ”¾è¿›åŒä¸€ä¸ªæ–‡ä»¶ä¸­ è®¤è¯ä¸­å¿ƒå°†è¯¥æ–‡ä»¶å‘é€ç»™ $A$ï¼Œè¯¥æ–‡ä»¶å°±æ˜¯ $A$ æ•°å­—è¯ä¹¦ $A$ å°†åŒ…å«å…¬å¼€å¯†é’¥çš„æ•°å­—è¯ä¹¦å‘é€ç»™ $B$ï¼Œ$B$ æ”¶åˆ°è¯ä¹¦åï¼Œé¦–å…ˆå¯¹ $A$ çš„èº«ä»½è¿›è¡Œç¡®è®¤(å¦‚é‚®ç®±æ˜¯å¦æ˜¯ $A$ çš„é‚®ç®±)ï¼Œæ¥ç€è·å–è®¤è¯ä¸­å¿ƒçš„å…¬å¼€å¯†é’¥ï¼Œä½¿ç”¨è®¤è¯ä¸­å¿ƒçš„å…¬å¼€å¯†é’¥å¯¹æ•°å­—ç­¾åè¿›è¡Œç¡®è®¤ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯è®¤è¯ä¸­å¿ƒç»™å‡ºçš„ç­¾å å¦‚æœç¡®è®¤ $A$ çš„ä¿¡æ¯æ— è¯¯ï¼Œä»¥åŠç­¾åæ˜¯è®¤è¯ä¸­å¿ƒçš„ç­¾åï¼Œé‚£ä¹ˆå°±ä»è¯ä¹¦ä¸­å–å‡º $A$ çš„å…¬å¼€å¯†é’¥ å¦‚æœè¿™æ—¶ $X$ å‡å†’ $A$ ç»™ $B$ å‘é€å®ƒçš„å…¬å¼€å¯†é’¥ï¼Œè¿™æ—¶ $B$ æ²¡æœ‰å¿…è¦ä¿¡ä»»ä»¥éè¯ä¹¦çš„å½¢å¼å‘é€çš„å…¬å¼€å¯†é’¥ï¼›è¿™æ—¶ $X$ ä¸ºäº†å‡å†’ $A$ åœ¨è®¤è¯ä¸­å¿ƒç™»è®°è‡ªå·±çš„å…¬å¼€å¯†é’¥ï¼Œä½†æ˜¯ $X$ æ— æ³•ä½¿ç”¨ $A$ çš„ä¿¡æ¯(å¦‚é‚®ç®±)ï¼Œå› æ­¤æ— æ³•è·å¾— $A$ çš„è¯ä¹¦ã€‚ é€šè¿‡æ•°å­—è¯ä¹¦ï¼Œæ¶ˆæ¯çš„æ¥æ”¶è€…å¯ä»¥ç¡®è®¤å…¬å¼€å¯†é’¥çš„åˆ¶ä½œè€…ã€‚ ä½†æ˜¯ç›®å‰è¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œ$B$ ä»è®¤è¯ä¸­å¿ƒå¾—åˆ°çš„å…¬å¼€å¯†é’¥çœŸçš„æ¥è‡ªäºè®¤è¯ä¸­å¿ƒå—? å¦‚æœè®¤è¯ä¸­å¿ƒä¹Ÿæ˜¯å‡å†’çš„å‘¢? å®é™…ä¸Šï¼Œè®¤è¯ä¸­å¿ƒçš„å…¬å¼€å¯†é’¥ä¹Ÿæ˜¯ä»¥æ•°å­—è¯ä¹¦çš„å½¢å¼äº¤ä»˜çš„ï¼Œä¼šæœ‰æ›´é«˜çº§åˆ«çš„è®¤è¯ä¸­å¿ƒå¯¹è¿™ä¸ªè®¤è¯ä¸­å¿ƒç½²åã€‚ å‡è®¾å­˜åœ¨ä¸€ä¸ªè¢«ç¤¾ä¼šå¹¿æ³›è®¤å¯çš„è®¤è¯ä¸­å¿ƒ $A$ï¼Œæ­¤æ—¶å‡ºç°äº†ä¸€å®¶æ–°å…¬å¸ $B$ æƒ³å¼€å±•è®¤è¯ä¸­å¿ƒä¸šåŠ¡ï¼Œä½†æ˜¯ $B$ æ²¡æœ‰å¾—åˆ°ç¤¾ä¼šçš„è®¤å¯ï¼Œäºæ˜¯ $B$ å‘ $A$ ç”³è¯·å‘è¡Œæ•°å­—è¯ä¹¦ï¼Œ$A$ ä¼šå¯¹ $B$ æ˜¯å¦èƒ½å¼€å±•è®¤è¯ä¸šåŠ¡è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœé€šè¿‡äº†æ£€æµ‹ï¼Œ$A$ å°±ä¼šå‘ $B$ å‘è¡Œè¯ä¹¦ï¼Œå…¬å¸ $B$ å°±å¯ä»¥å‘ç¤¾ä¼šè¡¨ç¤ºè‡ªå·±è·å¾—äº†å…¬å¸ $A$ çš„ä¿¡ä»»ã€‚ æœ€é¡¶ç«¯çš„è®¤è¯ä¸­å¿ƒè¢«ç§°ä¸ºæ ¹è®¤è¯ä¸­å¿ƒï¼Œå…¶è‡ªèº«çš„æ­£å½“æ€§ç”±è‡ªå·±è¯æ˜ã€‚å¦‚æœæ ¹è®¤è¯ä¸­å¿ƒä¸è¢«ä¿¡ä»»ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±æ— æ³•è¿è½¬ï¼Œæ‰€ä»¥æ ¹è®¤è¯ä¸­å¿ƒä¸€èˆ¬æ˜¯å¤§å‹ä¼ä¸šæˆ–è€…ä¸æ”¿åºœæœ‰å…³è”ä¸”å·²ç»è·å¾—äº†ç¤¾ä¼šä¿¡èµ–çš„ç»„ç»‡ã€‚ å‚è€ƒèµ„æ–™ ã€Šæˆ‘çš„ç¬¬ä¸€æœ¬ç®—æ³•ä¹¦ã€‹","tags":[{"name":"å®‰å…¨","slug":"å®‰å…¨","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%AE%89%E5%85%A8/"},{"name":"æ•°å­—ç­¾å","slug":"æ•°å­—ç­¾å","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D/"},{"name":"æ•°å­—è¯ä¹¦","slug":"æ•°å­—è¯ä¹¦","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6/"}]},{"title":"numpyä¹‹çŸ©é˜µ","date":"2020-10-31T11:41:00.000Z","path":"/numpyä¹‹çŸ©é˜µ/","text":"æ–‡ç« æ˜¯ä½¿ç”¨ jupyter å†™çš„ï¼Œä¸ºäº†æ’å…¥åˆ°åšå®¢ä¸­ï¼Œä½¿ç”¨ iframe è¿›è¡ŒåµŒå…¥ï¼Œæ‰€ä»¥é˜…è¯»ä½“éªŒå¯èƒ½ä¸æ˜¯å¾ˆå¥½","tags":[{"name":"numpy","slug":"numpy","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/numpy/"}]},{"title":"numpyä¹‹æ•°å­¦æ–¹æ³•","date":"2020-10-31T10:20:00.000Z","path":"/numpyä¹‹æ•°å­¦æ–¹æ³•/","text":"æ–‡ç« æ˜¯ä½¿ç”¨ jupyter å†™çš„ï¼Œä¸ºäº†æ’å…¥åˆ°åšå®¢ä¸­ï¼Œä½¿ç”¨ iframe è¿›è¡ŒåµŒå…¥ï¼Œæ‰€ä»¥é˜…è¯»ä½“éªŒå¯èƒ½ä¸æ˜¯å¾ˆå¥½","tags":[{"name":"numpy","slug":"numpy","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/numpy/"},{"name":"ndarray","slug":"ndarray","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/ndarray/"}]},{"title":"å›¾çš„æ·±åº¦ä¼˜å…ˆéå†","date":"2020-10-28T16:00:00.000Z","path":"/å›¾çš„æ·±åº¦ä¼˜å…ˆéå†/","text":"å›¾çš„æ·±åº¦ä¼˜å…ˆéå†æ‰€è°“å›¾çš„éå†å°±æ˜¯æŒ‰ç…§æŸç§é¡ºåºè®¿é—®å›¾ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œæ ¹æ®è®¿é—®çš„é¡ºåºä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š æ·±åº¦ä¼˜å…ˆéå† å¹¿åº¦ä¼˜å…ˆéå† åœ¨æœ¬èŠ‚ä¸­è®²è§£æ·±åº¦ä¼˜å…ˆéå†ã€‚ æ‰€è°“æ·±åº¦ä¼˜å…ˆéå†(Depth First Searchï¼Œç®€ç§° DFS)ï¼Œæ˜¯æŒ‡åœ¨éå†æ—¶ï¼Œå°½å¯èƒ½æ·±çš„è®¿é—®å›¾çš„èŠ‚ç‚¹ã€‚ä¸ºäº†æ›´å¥½çš„ç†è§£å›¾çš„æ·±åº¦ä¼˜å…ˆéå†ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†ï¼Œä¸å›¾çš„æ·±åº¦ä¼˜å…ˆéå†ä¸€æ ·ï¼Œæ ‘çš„æ·±åº¦ä¼˜å…ˆéå†ä¹Ÿæ˜¯æŒ‡å°½å¯èƒ½æ·±çš„è®¿é—®æ ‘çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰å­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸‹ä¸€æ­¥å°±åº”è¯¥éå†å®ƒçš„å­©å­èŠ‚ç‚¹(æ·±åº¦)ï¼Œå¦‚ä¸‹ ä»ä¸Šé¢çš„åŠ¨å›¾å¯ä»¥çœ‹å‡ºï¼Œå½“æˆ‘ä»¬éå†å®Œå½“å‰èŠ‚ç‚¹ä»¥åï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æœ‰å­©å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å»éå†å­©å­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬çš„éå†ç­–ç•¥å°±æ˜¯å°½å¯èƒ½æ·±çš„éå†ã€‚ç±»æ¯”äºå›¾ï¼Œå¯¹äºå›¾æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå›¾çš„èŠ‚ç‚¹æœ‰é‚»æ¥èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨éå†å®Œè¯¥èŠ‚ç‚¹åï¼Œæˆ‘ä»¬ä¸‹ä¸€æ­¥å°±å»éå†å®ƒçš„é‚»æ¥èŠ‚ç‚¹ è¿™å°±æ˜¯å›¾çš„æ·±åº¦ä¼˜å…ˆéå†ï¼Œä¸Šå›¾æ·±åº¦ä¼˜å…ˆéå†è®¿é—®çš„é¡ºåºæ˜¯ $[0, 1, 3, 2, 4, 5]$ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢çš„ç¼–ç¨‹ä¸­éªŒè¯æ˜¯å¦æ­£ç¡®ã€‚ å›¾çš„éå†ä¸æ ‘çš„éå†æœ‰ä¸€å¤„ä¸åŒï¼Œé‚£å°±æ˜¯é‡å¤è®¿é—®é—®é¢˜ã€‚æ ‘ä¸ä¼šå‘ç”Ÿé‡å¤è®¿é—®çš„é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºæ ‘çš„èŠ‚ç‚¹åªèƒ½é€šè¿‡çˆ¶èŠ‚ç‚¹è®¿é—®åˆ°ï¼Œåªæœ‰ä¸€ç§è·¯å¾„åˆ°è¾¾è¯¥èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¿…æ‹…å¿ƒï¼›ä½†æ˜¯å¯¹äºå›¾æ¥è¯´ï¼Œä¸€ä¸ªå›¾ä¸­çš„èŠ‚ç‚¹å¯ä»¥ä¸å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œè¿æ¥ï¼Œè¿™å°±æ„å‘³ç€æœ‰å¤šç§è·¯å¾„åˆ°è¾¾è¯¥èŠ‚ç‚¹ï¼Œè¿™å°±ä¼šå¯¼è‡´æŸèŠ‚ç‚¹å·²ç»é€šè¿‡ä¸€ä¸ªç›¸é‚»çš„èŠ‚ç‚¹è¢«è®¿é—®ï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯æœ‰å¯èƒ½é€šè¿‡åˆ«çš„ç›¸é‚»èŠ‚ç‚¹å†æ¬¡è¢«è®¿é—®ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªæ ‡å¿—æ¥è¡¨ç¤ºæŸä¸ªå›¾çš„èŠ‚ç‚¹æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œå¦‚æœå·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸èƒ½å†æ¬¡è®¿é—®ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ª visited æ•°ç»„æ¥è¡¨ç¤ºå›¾ä¸­çš„æŸä¸ªèŠ‚ç‚¹æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œvisited æ•°ç»„æ˜¯ä¸€ä¸ª boolean ç±»å‹çš„æ•°ç»„ï¼Œå€¼ä¸º true æ—¶å°±è¡¨ç¤ºè¯¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡äº†ï¼Œä¾‹å¦‚ visited[0] = true å°±è¡¨ç¤ºèŠ‚ç‚¹ 0 å·²ç»è¢«è®¿é—®è¿‡äº†ã€‚ ä¸‹é¢æˆ‘å°±å°†ç¼–ç¨‹å…·ä½“å®ç°ï¼š import java.util.ArrayList;import java.util.Arrays;public class DFSGraph &#123; // å›¾çš„è¡¨ç¤ºä¸­å®šä¹‰çš„ Graph æ¥å£ private Graph graph; // ä¿å­˜æ·±åº¦ä¼˜å…ˆéå†çš„é¡ºåº private ArrayList&lt;Integer&gt; order; // ä¿å­˜èŠ‚ç‚¹æ˜¯å¦å·²ç»è¢«è®¿é—®è¿‡ private boolean[] visited; public DFSGraph(Graph graph) &#123; this.graph = graph; order = new ArrayList&lt;&gt;(graph.V()); // åˆå§‹åŒ– visited ä¸­çš„å…ƒç´ å€¼ä¸º false visited = new boolean[graph.V()]; Arrays.fill(visited, false); &#125; // DFS çš„å®ç°ï¼Œé¦–å…ˆä»èŠ‚ç‚¹ 0 å¼€å§‹éå† public void dfs() &#123; dfs(0); &#125; private void dfs(int v) &#123; // æ ‡è®°å½“å‰èŠ‚ç‚¹ä¸ºè®¿é—®è¿‡çš„çŠ¶æ€ visited[v] = true; // å‘ order ä¸­æ·»åŠ å½“å‰èŠ‚ç‚¹ order.add(v); for (int w: graph.adj(v)) &#123; // å¦‚æœé‚»æ¥èŠ‚ç‚¹æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆéå†è¯¥é‚»æ¥èŠ‚ç‚¹ if (!visited[w]) &#123; dfs(w); &#125; &#125; &#125; public Iterable&lt;Integer&gt; order() &#123; return order; &#125; public static void main(String[] args) &#123; // ä½¿ç”¨é‚»æ¥è¡¨è¡¨ç¤ºå›¾ Graph graph = new AdjSet(\"g.txt\"); // å®ä¾‹åŒ–ä¸€ä¸ª DFSGraph DFSGraph dfsGraph = new DFSGraph(graph); // è°ƒç”¨ dfs æ–¹æ³•è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå† dfsGraph.dfs(); // æ‰“å°å‡ºæ·±åº¦ä¼˜å…ˆéå†çš„é¡ºåº System.out.println(dfsGraph.order()); &#125;&#125; å…¶ä¸­ g.txt çš„å†…å®¹å¦‚ä¸‹ 6 50 10 21 32 42 5 è¿™ä¸ªæ–‡ä»¶è¡¨ç¤ºçš„å›¾ä¸æˆ‘ä»¬åœ¨ä¸Šé¢çš„åŠ¨å›¾ä¸­çœ‹åˆ°çš„å›¾æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ‰“å°çš„ç»“æœ [0, 1, 3, 2, 4, 5] è¿™ä¸æˆ‘ä»¬åœ¨åŠ¨å›¾ä¸­çœ‹åˆ°çš„éå†é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚ ä½†æ˜¯ä¸Šé¢æˆ‘ä»¬å®ç°çš„æ·±åº¦ä¼˜å…ˆéå†æœ‰ä¸€ä¸ªå° bugï¼Œé‚£å°±æ˜¯ä¸Šé¢çš„æ·±åº¦ä¼˜å…ˆéå†åªé€‚åˆåªæœ‰ä¸€ä¸ªè”é€šåˆ†é‡çš„å›¾ï¼Œå¦‚æœæœ‰å¤šä¸ªè”é€šåˆ†é‡ï¼Œé‚£ä¹ˆå…¶ä»–è”é€šåˆ†é‡ä¸­çš„èŠ‚ç‚¹å°±æ°¸è¿œä¸å¯èƒ½è¢«è®¿é—®åˆ°ï¼Œå¦‚ æ—¢ç„¶å›¾ä¸­æœ‰èŠ‚ç‚¹æ°¸è¿œä¸ä¼šè¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆè¿˜èƒ½å«å›¾çš„éå†å—ï¼Œå›¾çš„éå†å¯æ˜¯è¦æ±‚èƒ½å¤Ÿè®¿é—®å›¾ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œæ”¹è¿› è¿™æ¬¡æˆ‘ä»¬ä¸åªæ˜¯ä»èŠ‚ç‚¹ $0$ å¼€å§‹éå†ï¼Œåœ¨éå†å®ŒèŠ‚ç‚¹ $0$ æ‰€åœ¨çš„è”é€šåˆ†é‡ä»¥åï¼Œæˆ‘ä»¬æ£€æŸ¥æ˜¯å¦è¿˜æœ‰èŠ‚ç‚¹æ²¡æœ‰éå†ï¼Œå³æ˜¯å¦å­˜åœ¨åˆ«çš„è”é€šåˆ†é‡ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æœ‰éå†è¯¥èŠ‚ç‚¹æ‰€åœ¨çš„è”é€šåˆ†é‡ã€‚ åœ¨æœ€åæˆ‘ä»¬è¿›è¡Œä¸€ä¸ªæ‰©å±•ï¼Œæˆ‘ä»¬çŸ¥é“æ ‘çš„æ·±åº¦ä¼˜å…ˆéå†åˆ†ä¸ºä¸‰ç§ å‰åºéå† ä¸­åºéå† ååºéå† å›¾æ²¡æœ‰ä¸­åºéå†ï¼Œå®ƒåˆ†ä¸ºä¸¤ç§ æ·±åº¦ä¼˜å…ˆå‰åºéå† æ·±åº¦ä¼˜å…ˆååºéå† åˆšåˆšæˆ‘ä»¬æ‰€ç¼–ç¨‹çš„åªæ˜¯å›¾çš„æ·±åº¦ä¼˜å…ˆå‰åºéå†ï¼Œç°åœ¨æˆ‘ä»¬ä¸å¦¨å†™ä¸€ä¸‹ååºéå†çš„ä»£ç ã€‚åœ¨å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®ååºéå†çš„è¿™ä¸ªåæŒ‡çš„æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªååœ¨æ ‘çš„éå†ä¸­æŒ‡çš„æ˜¯å…ˆè®¿é—®å½“å‰èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è®¿é—®å½“å‰èŠ‚ç‚¹åœ¨è®¿é—®å½“å‰èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹ä¹‹åã€‚ç±»æ¯”äºå›¾ï¼Œè¿™ä¸ªåæŒ‡çš„å°±æ˜¯å…ˆè®¿é—®å½“å‰èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹ï¼Œç„¶åå†è®¿é—®å½“å‰èŠ‚ ä¸Šé¢ååºéå†çš„é¡ºåºä¸º $[3, 1, 4, 5, 2, 0]$ï¼Œæˆ‘ä»¬é‡æ„ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨ preorder æ¥ä¿å­˜å‰åºéå†çš„ç»“æœï¼Œä½¿ç”¨ postorder æ¥ä¿å­˜ååºéå†çš„ç»“æœï¼š import java.util.ArrayList;import java.util.Arrays;public class DFSGraph &#123; private Graph graph; private ArrayList&lt;Integer&gt; preorder; private ArrayList&lt;Integer&gt; postorder; private boolean[] visited; public DFSGraph(Graph graph) &#123; this.graph = graph; preorder = new ArrayList&lt;&gt;(graph.V()); postorder = new ArrayList&lt;&gt;(graph.V()); visited = new boolean[graph.V()]; Arrays.fill(visited, false); &#125; public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; dfs(i); &#125; &#125; &#125; private void dfs(int v) &#123; visited[v] = true; // å‰åºéå†ï¼šåœ¨éå†ç›¸é‚»èŠ‚ç‚¹å‰ï¼Œéå†å½“å‰èŠ‚ç‚¹ preorder.add(v); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w); &#125; &#125; // ååºéå†ï¼šéå†ç›¸é‚»èŠ‚ç‚¹åï¼Œå†éå†å½“å‰èŠ‚ç‚¹ postorder.add(v); &#125; public Iterable&lt;Integer&gt; preorder() &#123; return preorder; &#125; public Iterable&lt;Integer&gt; postorder() &#123; return postorder; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); DFSGraph dfsGraph = new DFSGraph(graph); dfsGraph.dfs(); System.out.println(dfsGraph.postorder()); &#125;&#125; æ‰“å°çš„ç»“æœä¸º [3, 1, 4, 5, 2, 0] æ·±åº¦ä¼˜å…ˆéå†çš„åº”ç”¨è”é€šåˆ†é‡ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•æ±‚è§£å›¾ä¸­æœ‰å¤šå°‘ä¸ªè”é€šåˆ†é‡ã€‚å…¶å®è¿™ä¸ªé—®é¢˜éå¸¸çš„ç®€å•ï¼Œåœ¨ä¸Šé¢çš„æˆ‘ä»¬ä¿®æ”¹ DFS çš„å° bug æ—¶å°±æåˆ°ï¼Œå› ä¸ºæœ‰å¤šä¸ªè”é€šåˆ†é‡ï¼Œæˆ‘ä»¬æ— æ³•éå†å®Œæ‰€æœ‰å›¾ä¸­çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹äº†ä»£ç  æ¯æ¬¡å½“æˆ‘ä»¬åœ¨ for å¾ªç¯ä¸­è°ƒç”¨ä¸€æ¬¡ dfs çš„æ—¶å€™ï¼Œå°±è¯´æ˜å­˜åœ¨ä¸€ä¸ªè”é€šåˆ†é‡(Connected Component)ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨è°ƒç”¨ dfs æ—¶ç»Ÿè®¡è”é€šåˆ†é‡çš„ä¸ªæ•°å°±å¯ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæˆå‘˜å˜é‡ ccount æ¥ä¿å­˜è”é€šåˆ†é‡çš„ä¸ªæ•° import java.util.Arrays;public class CCGraph &#123; private int cccount; private Graph graph; private boolean[] visited; public CCGraph(Graph graph) &#123; this.graph = graph; this.cccount = 0; visited = new boolean[graph.V()]; Arrays.fill(visited, false); &#125; public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; // è”é€šåˆ†é‡ä¸ªæ•°å¢åŠ  cccount++; dfs(i); &#125; &#125; &#125; private void dfs(int v) &#123; visited[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w); &#125; &#125; &#125; public int getCccount() &#123; return cccount; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); CCGraph ccGraph = new CCGraph(graph); ccGraph.dfs(); int cccount = ccGraph.getCccount(); System.out.println(cccount); // 2 &#125;&#125; ä¸Šé¢çš„ä»£ç ä¸ DFSGraph ç±»çš„ä»£ç å‡ ä¹æ˜¯ä¸€è‡´çš„ï¼Œåªä¸è¿‡ç»Ÿè®¡äº†è”é€šåˆ†é‡çš„ä¸ªæ•°ã€‚g.txt ä¸­çš„å†…å®¹ä¸ºï¼š 7 60 10 21 32 52 44 5 å¯¹äºçš„å›¾çš„å½¢çŠ¶å¦‚ä¸‹ï¼š å¯è§ä¸Šé¢çš„å›¾æœ‰ä¸¤ä¸ªè”é€šåˆ†é‡ã€‚ ç¬¬äºŒä¸ªä¸è”é€šåˆ†é‡æœ‰å…³çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›å¾—åˆ°æ¯ä¸ªè”é€šåˆ†é‡ä¸­æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œä»¥åŠåˆ†åˆ«åŒ…å«å“ªäº›èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª ArrayList æ•°ç»„ä¿å­˜æ¯ä¸ªè”é€šåˆ†é‡åŒ…å«çš„èŠ‚ç‚¹ï¼Œä¿®æ”¹ dfs å¦‚ä¸‹ import java.util.ArrayList;import java.util.Arrays;@SuppressWarnings(\"all\")public class CCGraph &#123; private int cccount; private Graph graph; private boolean[] visited; // ä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ•°ç»„? å› ä¸ºæ•°ç»„éœ€è¦äº‹å…ˆå¼€è¾Ÿç©ºé—´ï¼Œè€Œæˆ‘ä»¬äº‹å…ˆä¸çŸ¥é“æœ‰å¤šå°‘ä¸ªè”é€šåˆ†é‡ private ArrayList&lt;ArrayList&lt;Integer&gt;&gt; lists; // æ„é€ å‡½æ•°å¯¹æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ– public CCGraph(Graph graph) &#123; this.graph = graph; this.cccount = 0; visited = new boolean[graph.V()]; Arrays.fill(visited, false); lists = new ArrayList&lt;&gt;(); &#125; public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; cccount++; // æ¯å¢åŠ ä¸€ä¸ªè”é€šåˆ†é‡ï¼Œæ–°å»ºä¸€ä¸ª list æ¥ä¿å­˜è¯¥è”é€šåˆ†é‡ä¸­åŒ…å«çš„èŠ‚ç‚¹ ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); lists.add(list); dfs(i, list); &#125; &#125; &#125; private void dfs(int v, ArrayList&lt;Integer&gt; list) &#123; visited[v] = true; // å°†èŠ‚ç‚¹ä¿å­˜åœ¨æ‰€åœ¨è”é€šåˆ†é‡å¯¹åº”çš„ list ä¸­ list.add(v); for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w, list); &#125; &#125; &#125; public int getCCcount() &#123; return cccount; &#125; public ArrayList&lt;ArrayList&lt;Integer&gt;&gt; getCCList() &#123; return lists; &#125; // åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨åŒä¸€ä¸ªè”é€šåˆ†é‡ä¸­(æ˜¯å¦è¿æ¥) public boolean isConnected(int v, int w) &#123; for (int i = 0; i &lt; cccount; i++) &#123; ArrayList list = lists.get(i); // æŸè”é€šåˆ†é‡ä¸­æ˜¯å¦åŒæ—¶åŒ…å«è¿™ä¸¤ä¸ªèŠ‚ç‚¹ if (list.contains(v) &amp;&amp; list.contains(w)) &#123; return true; &#125; &#125; // æ‰€æœ‰çš„è”é€šåˆ†é‡éƒ½ä¸åŒæ—¶åŒ…å«è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸åœ¨åŒä¸€ä¸ªè”é€šåˆ†é‡ä¸­ return false; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); CCGraph ccGraph = new CCGraph(graph); ccGraph.dfs(); int cccount = ccGraph.getCCcount(); System.out.println(cccount); // 2 // æ‰“å°å‡ºè”é€šåˆ†é‡ ArrayList&lt;ArrayList&lt;Integer&gt;&gt; lists = ccGraph.getCCList(); for (int i = 0; i &lt; cccount; i++) &#123; // è·å¾—æ¯ä¸ªè”é€šåˆ†é‡å¯¹åº”çš„ listï¼Œé‡Œé¢ä¿å­˜äº†è¯¥è”é€šåˆ†é‡åŒ…å«çš„èŠ‚ç‚¹ ArrayList&lt;Integer&gt; list = lists.get(i); // æ‰“å°å‡ºè”é€šåˆ†é‡ä¸­åŒ…å«çš„èŠ‚ç‚¹ System.out.print(i + \": \"); for (int v: list) &#123; System.out.print(v + \" \"); &#125; System.out.println(); &#125; System.out.println(ccGraph.isConnected(0, 5)); // true System.out.println(ccGraph.isConnected(0, 6)); // false &#125;&#125; ä¸Šè¿°çš„æ‰“å°ç»“æœä¸º 20: 0 1 3 2 4 5 1: 6 truefalse è·¯å¾„é—®é¢˜æ‰€è°“çš„è·¯å¾„é—®é¢˜å°±æ˜¯æ±‚ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è·¯å¾„ï¼Œè¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨æˆ‘ä»¬ä¸Šé¢çš„ isConnected æ–¹æ³•å°±å¯ä»¥çŸ¥é“ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è·¯å¾„äº†ã€‚ä¸è¿‡æˆ‘ä»¬æ›´æƒ³çŸ¥é“çš„æ˜¯ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„æ˜¯ä»€ä¹ˆï¼Œå³ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾å¦ä¸€ä¸ªèŠ‚ç‚¹ä¼šç»å†å“ªäº›èŠ‚ç‚¹ã€‚ å¯¹äºä¸‹é¢çš„ä¸€å¹…å›¾ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ä»èŠ‚ç‚¹ $0$ åˆ°èŠ‚ç‚¹ $5$ ä¹‹é—´çš„è·¯å¾„ æˆ‘ä»¬éœ€è¦è®°å½•éå†æ—¶å½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¾‹å¦‚éå†èŠ‚ç‚¹ $1$ åä¼šæ¥ç€éå†èŠ‚ç‚¹ $3$ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ $3$ çš„å‰ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ $1$ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯å°±å¯ä»¥çŸ¥é“ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å…·ä½“çš„è·¯å¾„ã€‚é¦–å…ˆä½¿ç”¨ DFS å›¾ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­è®°å½•ä¿¡æ¯ï¼Œå¦‚ä¸‹ åœ¨ä¸Šé¢æˆ‘ä»¬ä»èŠ‚ç‚¹ $0$ å¼€å§‹éå†ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬è®°å½•äº†å½“å‰èŠ‚ç‚¹ä¹‹å‰çš„èŠ‚ç‚¹ï¼Œæœ€åå¾—åˆ°è¿™ä¹ˆä¸€ä¸ªç»“æœ ç°åœ¨æˆ‘ä»¬æƒ³çŸ¥é“èŠ‚ç‚¹ $0$ æ˜¯å¦‚ä½•åˆ°è¾¾èŠ‚ç‚¹ $5$ çš„ï¼Œç›´æ¥é€†æ¨å°±å¯ä»¥çŸ¥é“è·¯å¾„ä¸º $5 \\leftarrow 4 \\leftarrow 2 \\leftarrow 0$ï¼Œå¦‚ä¸‹ è¿™ä¸ªç®—æ³•å¯ä»¥æ±‚å¾—èŠ‚ç‚¹ $0$ ä¸ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„ï¼Œä½†æ˜¯ä¸èƒ½æ±‚å¾—ä»»æ„ä¸¤ç‚¹ä¹‹é—´çš„è·¯å¾„ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä»èŠ‚ç‚¹ $0$ å¼€å§‹éå†çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ±‚å¾—èŠ‚ç‚¹ $4$ ä¸èŠ‚ç‚¹ $5$ ä¹‹é—´çš„è·¯å¾„ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä»èŠ‚ç‚¹ $4$ å¼€å§‹éå†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ç§ç®—æ³•åªèƒ½æ±‚è§£å•æºè·¯å¾„(Single Source Path) é—®é¢˜ã€‚ åœ¨ç¼–ç¨‹å®ç°æ–¹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª pre æ•°ç»„æ¥ä¿å­˜å½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¾‹å¦‚ï¼Œpre[3] = 1 å°±è¡¨ç¤ºèŠ‚ç‚¹ $3$ çš„å‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯èŠ‚ç‚¹ $1$ import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;public class SingleSourcePath &#123; private Graph graph; private boolean[] visited; private int[] pre; // ä»èŠ‚ç‚¹ s å¼€å§‹éå† private int s; public SingleSourcePath(Graph graph, int s) &#123; this.graph = graph; this.s = s; visited = new boolean[graph.V()]; Arrays.fill(visited, false); pre = new int[graph.V()]; Arrays.fill(pre, -1); // é»˜è®¤è®¤ä¸ºæºçš„å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºè‡ªå·±ï¼Œè¿™ä¸ªå€¼è®¿é—®ä¸åˆ°ï¼Œå¯ä»¥æ˜¯ä»»ä½•å€¼ dfs(s, s); &#125; private void dfs(int v, int parent) &#123; visited[v] = true; pre[v] = parent; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w, v); &#125; &#125; &#125; public boolean isConnected(int t) &#123; // å¦‚æœ pre[t] != -1ï¼Œè¯´æ˜éå†åˆ°äº†è¯¥èŠ‚ç‚¹ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¸æºèŠ‚ç‚¹æ˜¯è”é€šçš„ return pre[t] != -1; &#125; public Iterable&lt;Integer&gt; path(int t) &#123; ArrayList&lt;Integer&gt; path = new ArrayList&lt;&gt;(); // å¦‚æœä¸æ˜¯è”é€šçš„ï¼Œç›´æ¥è¿”å› if (!isConnected(t)) return path; int cur = t; while (cur != s) &#123; path.add(cur); cur = pre[cur]; &#125; path.add(s); Collections.reverse(path); return path; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); SingleSourcePath singleSourcePath = new SingleSourcePath(graph, 0); System.out.println(singleSourcePath.path(5)); &#125;&#125; å…¶ä¸­ g.txt ä¸º 7 60 10 21 32 52 44 5 å¯¹åº”çš„å›¾å°±æ˜¯ä¸Šé¢çš„åŠ¨å›¾ï¼Œè¾“å‡ºä¸º [0, 2, 4, 5] å‡è®¾ç°åœ¨æˆ‘ä»¬åªæƒ³æ±‚æºç‚¹ $s$ åˆ°ç‚¹ $t$ ä¹‹é—´çš„è·¯å¾„ï¼Œè€Œä¸æ˜¯ $s$ åˆ°ä»»æ„ä¸€ä¸ªç‚¹çš„è·¯å¾„ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬çš„è¦æ±‚é™ä½äº†ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬è®°å½•çš„ä¿¡æ¯æ›´å°‘ï¼Œé‚£æˆ‘ä»¬ç®—æ³•å¯ä¸å¯ä»¥åŠ å¿«å‘¢? å½“ç„¶å¯ä»¥ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬æ±‚è§£æºç‚¹ $s$ åˆ°ä»»æ„ä¸€ç‚¹çš„è·¯å¾„ï¼Œæ‰€ä»¥éœ€è¦å¯¹æºç‚¹ $s$ æ‰€åœ¨çš„è”é€šåˆ†é‡åš $DFS$ï¼Œéœ€è¦éå†è”é€šåˆ†é‡ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬åªéœ€è¦æ±‚è§£åˆ°å›ºå®šç‚¹ $t$ çš„è·¯å¾„ï¼Œæˆ‘ä»¬ä¸éœ€è¦å®Œæ•´çš„åšä¸€é $DFS$ï¼Œå½“æˆ‘ä»¬éå†åˆ°èŠ‚ç‚¹ $t$ æ—¶ï¼Œå°±å·²ç»å¯ä»¥é€€å‡ºéå†äº†ï¼Œæå‰ç»ˆæ­¢éå†å¯ä»¥è·å¾—æ›´å¿«çš„æ€§èƒ½ã€‚ å‡è®¾æˆ‘ä»¬éœ€è¦æ±‚è§£æºç‚¹ $0$ åˆ°èŠ‚ç‚¹ $1$ çš„è·¯å¾„ åœ¨ç¼–ç ä¸Šï¼Œåœ¨æˆ‘ä»¬åœ¨è®¾è®¡ dfs å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä»£è¡¨æ˜¯å¦å·²ç»æ‰¾åˆ°èŠ‚ç‚¹ $t$ï¼Œå¦‚æœå·²ç»æ‰¾åˆ°ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åšåç»­çš„éå†äº†ï¼Œç›´æ¥ç»ˆæ­¢éå† import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;public class Path &#123; private Graph graph; private boolean[] visited; private int[] pre; private int s; private int t; public Path(Graph graph, int s, int t) &#123; this.graph = graph; this.s = s; this.t = t; visited = new boolean[graph.V()]; Arrays.fill(visited, false); pre = new int[graph.V()]; Arrays.fill(pre, -1); dfs(s, s); &#125; private boolean dfs(int v, int parent) &#123; visited[v] = true; pre[v] = parent; // å¦‚æœå·²ç»æ‰¾åˆ°ï¼Œç›´æ¥è¿”å›ï¼Œä¸å†ç»§ç»­éå† if (v == t) &#123; return true; &#125; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; // å¦‚æœåœ¨æŸç›¸é‚»èŠ‚ç‚¹çš„æ·±åº¦ä¼˜å…ˆéå†ä¸­æ‰¾åˆ°èŠ‚ç‚¹ tï¼Œä¸å†ç»§ç»­éå†å…¶ä»–ç›¸é‚»èŠ‚ç‚¹ï¼Œæå‰è¿”å› if (dfs(w, v)) &#123; return true; &#125; &#125; &#125; return false; &#125; public boolean isConnected() &#123; return visited[t]; &#125; public Iterable&lt;Integer&gt; path() &#123; ArrayList&lt;Integer&gt; path = new ArrayList&lt;&gt;(); if (!isConnected()) &#123; return path; &#125; int cur = t; while (cur != s) &#123; path.add(cur); cur = pre[cur]; &#125; path.add(s); Collections.reverse(path); return path; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); Path path = new Path(graph, 0, 3); System.out.println(Arrays.toString(path.visited)); System.out.println(path.path()); &#125;&#125; è¾“å‡ºä¸º [true, true, false, true, false, false, false][0, 1, 3] ä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰éå†æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œè¿™æ ·æå‰ç»ˆæ­¢éå†å¯ä»¥æé«˜æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚ æ— å‘å›¾çš„ç¯æ£€æµ‹æˆ‘ä»¬æ€ä¹ˆåˆ¤æ–­ä¸€å¹…å›¾æœ‰æ²¡æœ‰ç¯å‘¢? å¾ˆç®€å•ï¼Œæˆ‘ä»¬ä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†ï¼Œå½“è®¿é—®åˆ°æŸèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹çš„æŸé‚»æ¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ï¼Œå¹¶ä¸”è¯¥é‚»æ¥èŠ‚ç‚¹ä¸æ˜¯å®ƒçš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¯¥å›¾ä¸­åŒ…å«ä¸€ä¸ªç¯ æ˜ç™½è¿™ä¸€ç‚¹ä»¥åæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™ä»£ç äº† import java.util.Arrays;public class CircleDetection &#123; private Graph graph; private boolean[] visited; private boolean hasCircle; public CircleDetection(Graph graph) &#123; this.graph = graph; visited = new boolean[graph.V()]; Arrays.fill(visited, false); hasCircle = false; &#125; public void dfs() &#123; // ä»»ä¸€è”é€šåˆ†é‡ä¸­æœ‰ç¯ï¼Œé‚£ä¹ˆå›¾ä¸­å°±æœ‰ç¯ for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; dfs(i, i); &#125; &#125; &#125; private void dfs(int v, int parent) &#123; visited[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; dfs(w, v); // è¿›å…¥ä¸‹é¢çš„ if åˆ¤æ–­å°±è¯´æ˜ w å·²ç»è®¿é—®è¿‡äº† // å¦‚æœ w ä¸æ˜¯å®ƒçš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¯´æ˜æœ‰ç¯ &#125; else if (w != parent)&#123; hasCircle = true; &#125; &#125; &#125; public boolean hasCircle() &#123; return this.hasCircle; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g.txt\"); CircleDetection circleDetection = new CircleDetection(graph); circleDetection.dfs(); System.out.println(circleDetection.hasCircle()); // true &#125;&#125; å…¶ä¸­ g.txt çš„å†…å®¹å¦‚ä¸‹ 7 60 10 21 32 52 44 5 æ‰€å¯¹åº”çš„å›¾å¦‚ä¸‹ å¦‚æœæˆ‘ä»¬å°†èŠ‚ç‚¹ $2$ å’Œ $5$ ä¹‹é—´çš„è¾¹æ–­å¼€ï¼Œé‚£ä¹ˆå›¾ä¸­æ˜¯æ²¡æœ‰ç¯çš„ï¼Œæ–°å»º g2.txt å¦‚ä¸‹ 7 50 10 21 32 44 5 Graph graph2 = new AdjSet(\"g2.txt\");CircleDetection circleDetection2 = new CircleDetection(graph2);circleDetection2.dfs();System.out.println(circleDetection2.hasCircle()); // false å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æå‰è¿”å›è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†ç¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æå‰ç»ˆæ­¢ï¼Œåé¢å°±ä¸éœ€è¦ç»§ç»­æŸ¥æ‰¾äº†ï¼Œæˆ‘ä»¬ä¿®æ”¹ dfs çš„è¿”å›å€¼ä¸º boolean ç±»å‹ï¼Œè¿™æ—¶ dfs å‡½æ•°çš„å«ä¹‰å°±æ˜¯ä»é¡¶ç‚¹ $v$ å¼€å§‹ï¼Œåˆ¤æ–­å›¾ä¸­æ˜¯å¦æœ‰ç¯ public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; if (dfs(i, i)) &#123; hasCircle = true; // ä¸ç”¨æŸ¥æ‰¾å…¶ä»–è”é€šåˆ†é‡äº† break; &#125; &#125; &#125;&#125;private boolean dfs(int v, int parent) &#123; visited[v] = true; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; if (dfs(w, v)) &#123; // å¦‚æœå·²ç»åœ¨æŸç›¸é‚»èŠ‚ç‚¹ä¸­æ‰¾åˆ°ç¯ï¼Œä¸ç”¨å†éå†å…¶ä»–çš„ç›¸é‚»èŠ‚ç‚¹ return true; &#125; &#125; else if (w != parent)&#123; // å¦‚æœå·²ç»æ‰¾åˆ°ç¯ï¼Œä¸ç”¨ç»§ç»­å‘åéå† return true; &#125; &#125; return false;&#125; äºŒåˆ†å›¾æ£€æµ‹åœ¨è¿™ä¸ªå°èŠ‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªäºŒåˆ†å›¾æ£€æµ‹çš„é—®é¢˜ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆå«äºŒåˆ†å›¾å‘¢? äºŒåˆ†å›¾éœ€è¦æ»¡è¶³ä¸€ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š å›¾ä¸­çš„èŠ‚ç‚¹è¢«åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ† å›¾ä¸­çš„è¾¹è¿æ¥çš„æ˜¯ä¸¤ä¸ªéƒ¨åˆ†çš„èŠ‚ç‚¹ åœ¨ä¸Šå›¾ä¸­ï¼ŒèŠ‚ç‚¹ $0, 3, 4, 5$ æ˜¯ä¸€éƒ¨åˆ†ï¼ŒèŠ‚ç‚¹ $1, 2, 6$ æ˜¯ä¸€éƒ¨åˆ†ï¼Œä¸¤éƒ¨åˆ†çš„èŠ‚ç‚¹æˆ‘ä½¿ç”¨ä¸åŒçš„é¢œè‰²è¿›è¡Œå¡«å……ï¼›ä¸”å›¾ä¸­æ‰€æœ‰çš„è¾¹éƒ½è¿æ¥çš„æ˜¯ä¸¤ä¸ªéƒ¨åˆ†çš„èŠ‚ç‚¹ã€‚å¾ˆæ˜æ˜¾ä¸Šé¢çš„å›¾æ»¡è¶³äºŒåˆ†å›¾çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼Œæ‰€ä»¥ä¸Šé¢çš„å›¾æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ï¼Œé‚£æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯å¦‚ä½•æ£€æµ‹ä¸€ä¸ªå›¾æ˜¯å¦æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾å‘¢? é¦–å…ˆæ˜ç™½ä¸‹é¢ä¸¤ä¸ªå›¾æ˜¯ç­‰ä»·çš„ ä½†æ˜¯æˆ‘ä»¬å¾ˆéš¾ä»å³è¾¹çš„å›¾ä¸­åˆ†è¾¨å‡ºä¸¤éƒ¨åˆ†çš„èŠ‚ç‚¹ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®æ˜¯å›¾ä¸­çš„æ‰€æœ‰è¾¹è¿æ¥çš„æ˜¯ä¸¤ä¸ªä¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬å°†å¯¹å›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†çš„è¿‡ç¨‹ä¸­å¯¹èŠ‚ç‚¹æŸ“è‰²ï¼Œç›¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹æŸ“ä¸ºä¸€ä¸ªé¢œè‰²ï¼Œå› ä¸ºæ‰€æœ‰çš„è¾¹éƒ½è¿æ¥çš„æ˜¯ä¸åŒéƒ¨åˆ†çš„èŠ‚ç‚¹ï¼Œè¿™æ„å‘³ç€ä»»æ„èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹çš„é¢œè‰²å’Œè‡ªå·±éƒ½æ˜¯ä¸åŒçš„ã€‚ æˆ‘ä»¬åœ¨éå†æ—¶å°†æ‰€æœ‰é‚»æ¥èŠ‚ç‚¹çš„é¢œè‰²æŸ“ä¸ºå’Œè‡ªå·±ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœé‚»æ¥èŠ‚ç‚¹å·²ç»æŸ“è‰²ï¼Œå¹¶ä¸”æŸ“çš„é¢œè‰²å’Œè‡ªå·±ç›¸åŒï¼Œä¸äºŒåˆ†å›¾çš„å®šä¹‰å†²çªï¼Œé‚£ä¹ˆè¯´æ˜ä¸æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ï¼Œåä¹‹é‚»æ¥èŠ‚ç‚¹æŸ“çš„é¢œè‰²å’Œè‡ªå·±ä¸åŒï¼Œåˆ™ç»§ç»­éå†ï¼Œå¦‚æœéå†å®Œæ•´ä¸ªå›¾æ—¶éƒ½æ²¡æœ‰å†²çªï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªå›¾å°±æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ ä»£ç å¦‚ä¸‹ï¼š import java.util.Arrays;public class BinaryPartitionDetection &#123; private Graph graph; private boolean[] visited; // ä»¥ 0 1 è¡¨ç¤ºä¸åŒé¢œè‰² private int[] colors; // è¡¨ç¤ºè¯¥å›¾æ˜¯å¦ä¸ºäºŒåˆ†å›¾ private boolean isBipartite; public BinaryPartitionDetection(Graph graph) &#123; this.graph = graph; visited = new boolean[graph.V()]; Arrays.fill(visited, false); // åˆå§‹åŒ– colors ä¸º -1ï¼Œè¡¨ç¤ºæœªæŸ“è‰² colors = new int[graph.V()]; Arrays.fill(colors, -1); isBipartite = true; &#125; public void dfs() &#123; for (int i = 0; i &lt; visited.length; i++) &#123; if (!visited[i]) &#123; // å¦‚æœåœ¨æŸè”é€šåˆ†é‡ä¸­æ£€æµ‹åˆ°ä¸æ˜¯äºŒåˆ†å›¾ï¼Œä¸éœ€è¦æ£€æµ‹å…¶ä»–è”é€šåˆ†é‡ if (!dfs(i, 0)) &#123; isBipartite = false; break; &#125; &#125; &#125; &#125; private boolean dfs(int v, int color) &#123; visited[v] = true; // æŸ“è‰² colors[v] = color; for (int w: graph.adj(v)) &#123; if (!visited[w]) &#123; // 0 =&gt; 1 - color = 1 // 1 =&gt; 1 - color = 0 // å¦‚æœå·²ç»åœ¨éå†æŸé‚»æ¥èŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­æ£€æµ‹åˆ°ä¸æ˜¯äºŒåˆ†å›¾ï¼Œä¸éœ€è¦éå†å…¶ä»–é‚»æ¥èŠ‚ç‚¹ if (!dfs(w, 1 - color)) &#123; return false; &#125; // è¿›å…¥ else if è¡¨ç¤ºè¯¥èŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ // å¦‚æœè¯¥èŠ‚ç‚¹çš„é¢œè‰²ä¸å®ƒçš„é‚»æ¥èŠ‚ç‚¹ç›¸åŒï¼Œè¯´æ˜ä¸æ˜¯äºŒåˆ†å›¾ï¼Œåé¢èŠ‚ç‚¹æ— éœ€éå† &#125; else if (colors[v] == colors[w]) &#123; return false; &#125; &#125; return true; &#125; public boolean isBipartite() &#123; return isBipartite; &#125; public static void main(String[] args) &#123; Graph graph = new AdjSet(\"g3.txt\"); BinaryPartitionDetection binaryPartitionDetection = new BinaryPartitionDetection(graph); binaryPartitionDetection.dfs(); System.out.println(binaryPartitionDetection.isBipartite()); // true &#125;&#125; å…¶ä¸­ g3.txt çš„å†…å®¹å¦‚ä¸‹ 7 60 10 21 32 42 54 6 æ‰€è¡¨ç¤ºçš„å›¾å¦‚ä¸‹ï¼Œä¸åŠ¨å›¾ä¸­çš„å›¾ç›¸åŒ åœ¨ä¸Šé¢çš„å®ç°ä¸­ä¹Ÿä½¿ç”¨äº†æå‰ç»ˆæ­¢çš„æŠ€æœ¯ï¼Œä½¿ç”¨è¯¥æŠ€æœ¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„æå‰ç»ˆæ­¢éå†ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"å‘Hexoåšå®¢ä¸­æ’å…¥Jupyter Notebook","date":"2020-10-27T16:05:42.000Z","path":"/å‘ Hexo åšå®¢ä¸­æ’å…¥ Jupyter Notebook/","text":"å› ä¸º Python çš„ç¬”è®°ä½¿ç”¨ Jupyter Notebook è¿›è¡Œè®°å½•ååˆ†çš„æ–¹ä¾¿ï¼Œå¹¶ä¸” Jupyter Notebook æœ¬èº«ä¹Ÿæ”¯æŒ Markdown çš„è¯­æ³•ï¼Œæ‰€ä»¥åœ¨å­¦ä¹  Python æœ‰å…³çš„å†…å®¹æ—¶æˆ‘å–œæ¬¢ä½¿ç”¨ Jupyter Notebook è¿›è¡Œè®°å½•ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘çš„ç¬”è®°éƒ½åˆ†å¸ƒåœ¨ Hexo åšå®¢ä¸­ï¼Œä½†æ˜¯ Hexo åšå®¢åªèƒ½è§£æ Markdownï¼Œæ‰€ä»¥å¦‚ä½•å°† Jupyter Notebook æ•´åˆåˆ° Hexo åšå®¢ä¸­æˆäº†æˆ‘çš„ä¸€å¤§éš¾é¢˜ï¼Œç»è¿‡å‡ æ¬¡çš„æŠ˜è…¾ï¼Œç®—æ˜¯æ¯”è¾ƒå®Œç¾çš„è§£å†³äº†æˆ‘çš„éœ€æ±‚ã€‚ ä¸‹é¢ä»‹ç»æˆ‘ä¾æ¬¡ä½¿ç”¨çš„æ–¹æ³• å°† Jupyter Notebook è½¬ Markdown æ–‡ä»¶ å°† Jupyter Notebook ä¸Šä¼ åˆ° Github ä¸Šï¼Œç„¶åé€šè¿‡ nbviewer.jupyter.org æŸ¥çœ‹ï¼Œç„¶åä½¿ç”¨ iframe æ’å…¥åˆ°é¡µé¢ä¸­ å°† Jupyter Notebook è½¬ä¸º HTMLï¼Œä¸Šä¼ åˆ° Github(Gitee)ï¼Œå¯åŠ¨ Github(Gitee) Page æœåŠ¡ï¼Œé€šè¿‡ iframe å¼•å…¥ HTML é¡µé¢è¿›è¡Œæ’å…¥ è½¬ä¸ºMarkdown é€šè¿‡ä¸Šå›¾æ–¹æ³•å°† jupyter notebook è½¬ä¸º Markdownï¼Œç„¶åæ”¾åœ¨ _post ç›®å½•ä¸‹å³å¯ã€‚è½¬æ¢å‡ºæ¥çš„ Markdown æ–‡ä»¶è‚¯å®šè·Ÿ notebook ä¸­çš„æ ·å¼æœ‰æ‰€ä¸åŒçš„ï¼Œæ‰€ä»¥è¿˜è¦èŠ±æ—¶é—´è°ƒä¸€ä¸‹ï¼Œä¸è¿‡ç›¸æ¯” Jupyter Notebook è¿˜æ˜¯å¾ˆä¸‘ã€‚ ä¸Šä¼ åˆ°Githubå°† .ipynb æ–‡ä»¶ä¸Šä¼ åˆ° Github ä¸­ï¼Œç„¶åå¤åˆ¶æ–‡ä»¶åœ¨ Github ä¸­çš„é“¾æ¥ï¼Œä¾‹å¦‚ https://github.com/LastKnightCoder/numpy-note/blob/main/numpy%E5%85%A5%E9%97%A8.ipynb ç„¶åæ‰“å¼€ https://nbviewer.jupyter.org/ ç„¶åå›è½¦ï¼Œè¿›å…¥æŸ¥çœ‹é¡µé¢ï¼Œå¤åˆ¶è¯¥é¡µé¢çš„é“¾æ¥ ç„¶ååœ¨ Markdown æ–‡ä»¶ä¸­ä½¿ç”¨ iframe æ ‡ç­¾å¼•ç”¨è¯¥é“¾æ¥ï¼Œå¦‚ &lt;iframe src=\"https://nbviewer.jupyter.org/github/LastKnightCoder/numpy-note/blob/main/numpy%E5%85%A5%E9%97%A8.ipynb\" width=\"100%\" height=\"600\"&gt;&lt;/iframe&gt; æ•ˆæœå¦‚ä¸‹ æ•ˆæœè¿˜ä¸é”™ï¼Œé™¤äº†æ–‡æ¡£çš„å¼€å¤´å’Œç»“å°¾æœ‰ nbviewer çš„æ ‡å¿—ã€‚ è½¬ä¸ºHTMLæ’å…¥ä¸Šé¢çš„ç¬¬äºŒç§æ–¹æ³•æˆ‘å·²ç»æ¯”è¾ƒæ»¡æ„äº†ï¼Œä½†æ˜¯ Jupyter Notebook çš„æ ·å¼æ”¹å˜ä¸äº†ï¼Œä¾‹å¦‚å­—ä½“ï¼Œæˆ‘å¯¹å­—ä½“çš„è¦æ±‚è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚ ç›®å‰æˆ‘åˆæ‰¾åˆ°ä¸€ç§æ›´å¥½çš„åŠæ³•ï¼Œå¯ä»¥æ›´å¥½çš„æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œé‚£å°±æ˜¯å°† Jupyter Notebook è½¬ä¸º HTML æ–‡ä»¶ï¼Œå› ä¸ºåœ¨ HTML æ–‡ä»¶ä¸­å¯ä»¥å¼•å…¥è‡ªå®šä¹‰çš„æ ·å¼ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹æ–‡æ¡£çš„æ ·å¼è¿›è¡Œæ›´æ”¹ï¼Œä»è€Œè¾¾åˆ°æˆ‘çš„è¦æ±‚ï¼Œé¦–å…ˆå°†æ–‡ä»¶ä¸‹è½½ä¸º HTML æ–‡ä»¶ å› ä¸ºä¸‹è½½çš„ HTML æ–‡ä»¶ä¼šé»˜è®¤çš„å¼•ç”¨å½“å‰ç›®å½•ä¸‹çš„ custom.css çš„æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨ HTML æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹æ–°å»º custom.css æ–‡ä»¶å³å¯ä¿®æ”¹æ ·å¼äº†ã€‚ æ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•å°†è¿™ä¸ª HTML æ–‡ä»¶æ’å…¥åˆ° Markdown æ–‡ä»¶ä¸­äº†ï¼Œå½“ç„¶è¿˜æ˜¯ä½¿ç”¨ iframe æ ‡ç­¾è¿›è¡Œæ’å…¥ã€‚é¦–å…ˆæˆ‘ä»¬å°† HTML æ–‡ä»¶åŠ custom.css æ–‡ä»¶ä¸Šä¼ åˆ° Gitee çš„ä¸€ä¸ªä»“åº“ä¸­ï¼Œç„¶åå¯åŠ¨ Gitee Page æœåŠ¡ï¼Œæ¥ç€æˆ‘ä»¬å°±å¯ä»¥è®¿é—®è¯¥ HTML æ–‡ä»¶äº†ï¼Œä¾‹å¦‚å¯ä»¥é€šè¿‡ https://lastknightcoder.gitee.io/jupyter-for-iframe/numpy%E5%85%A5%E9%97%A8.html è®¿é—®æˆ‘ä¸Šä¼ çš„ HTML æ–‡ä»¶ï¼Œæ¥ç€æˆ‘ä»¬å°±åœ¨ iframe ä¸­å¼•ç”¨å³å¯ &lt;iframe src=\"https://lastknightcoder.gitee.io/jupyter-for-iframe/numpy%E5%85%A5%E9%97%A8.html\" width=\"100%\" height=\"600\"&gt;&lt;/iframe&gt; æ•ˆæœå¦‚ä¸‹ å¯è§æˆ‘å¯¹æ ·å¼è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¸è¿‡è¿˜æœ‰ä¸€ä¸ªåœ°æ–¹ä»¤æˆ‘ä¸æ»¡æ„çš„å°±æ˜¯åµŒå…¥çš„ iframe æœ‰æ»šåŠ¨æ¡ï¼Œå¯¹äºä¸€ä¸ªæœ‰å¼ºè¿«ç—‡çš„äººæ¥è¯´çœŸçš„å¾ˆéš¾å—ï¼Œæˆ‘æƒ³åˆ°ä½¿ç”¨ jQuery æ¥è·å¾—é¡µé¢çš„é«˜åº¦ï¼Œç„¶åå°† iframe çš„ height å€¼è®¾ä¸ºè¯¥é«˜åº¦ +50 ä½œç”¨å³å¯ï¼Œé€šè¿‡åœ¨ç”Ÿæˆçš„ HTML æ–‡ä»¶çš„æœ€ååŠ å…¥ä¸‹é¢çš„è„šæœ¬å°±å¯ä»¥è·å¾—æ–‡æ¡£çš„é«˜åº¦ &lt;script&gt; let script = document.createElement(\"script\"); script.src = \"https://cdn.bootcdn.net/ajax/libs/jquery/2.1.0/jquery.min.js\"; script.text = \"text/javascript\"; document.body.append(script); console.log($(\"#notebook\").height())&lt;/script&gt; ä¾‹å¦‚æˆ‘è·å¾—çš„é«˜åº¦ä¸º 7191ï¼Œæˆ‘å°†é«˜åº¦è®¾ç½® 7200 å°±æ²¡æœ‰æ»šåŠ¨æ¡äº†ï¼Œå¦‚ä¸‹ &lt;iframe src=\"https://lastknightcoder.gitee.io/jupyter-for-iframe/numpy%E5%85%A5%E9%97%A8.html\" width=\"100%\" height=\"7200\"&gt;&lt;/iframe&gt; ä»æ­¤å°±å¯ä»¥å®‰å¿ƒçš„ä½¿ç”¨ Jupyter Notebook å†™ç¨‹åºäº†ã€‚","tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Hexo/"}]},{"title":"æ“ä½œnumpyæ•°ç»„","date":"2020-10-27T16:00:00.000Z","path":"/æ“ä½œnumpyæ•°ç»„/","text":"æ–‡ç« æ˜¯ä½¿ç”¨ jupyter å†™çš„ï¼Œä¸ºäº†æ’å…¥åˆ°åšå®¢ä¸­ï¼Œä½¿ç”¨ iframe è¿›è¡ŒåµŒå…¥ï¼Œæ‰€ä»¥é˜…è¯»ä½“éªŒå¯èƒ½ä¸æ˜¯å¾ˆå¥½","tags":[{"name":"numpy","slug":"numpy","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/numpy/"}]},{"title":"2020-10 å­¦ä¹ æ€»ç»“","date":"2020-10-27T09:50:00.000Z","path":"/2020-10 å­¦ä¹ æ€»ç»“/","text":"ç›®å‰æ¥åˆ°å“ˆå·¥å¤§ä¸€ä¸ªåŠæœˆäº†ï¼Œç®€å•çš„æ€»ç»“è¿™ä¸€ä¸ªåŠæœˆå®Œæˆäº†å“ªäº›å·¥ä½œï¼š Java Java å¹¶å‘ç¼–ç¨‹ é»‘é©¬çš„è§†é¢‘ï¼Œçœ‹å®Œäº† æ„Ÿè§‰è¿™ä¸ªè€å¸ˆè®²çš„ç‰¹åˆ«çš„å¥½ï¼Œå­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œå¼ºçƒˆæ¨è JVM(ä¸Šç¯‡) å°šç¡…è°·çš„è§†é¢‘ï¼Œçœ‹å®Œäº† SpringBoot æ¡†æ¶å…¥é—¨ çœ‹äº†å¤šä¸ªæœºæ„çš„è§†é¢‘ï¼Œæœ€ç»ˆäº§å‡ºå…¥é—¨åšå®¢ä¸€ç¯‡ ã€ŠSpringæ­ç§˜ã€‹ è¿™æœ¬ä¹¦æ˜¯ä¸€æœ¬ Spring è¿›é˜¶çš„ä¹¦ï¼Œæ„Ÿè§‰æ”¶è·å¾ˆå¤šï¼Œç›®å‰çœ‹å®Œä¸€åŠä»¥ä¸Šï¼Œåç»­çš„å†…å®¹æœ‰ç‚¹åƒåŠ›ï¼Œç›®å‰æ‰“ç®—é‡æ–°çœ‹ä¸€é å›¾è®º åœ¨æš‘å‡æœŸé—´æŠŠæ³¢æ³¢è€å¸ˆçš„å›¾è®ºçœ‹å®Œäº†ï¼Œç›®å‰æ‰“ç®—æŠŠåšå®¢å†™å‡ºæ¥ï¼Œç›®å‰å·²ç»å¿«å®Œæˆå›¾çš„æ·±åº¦ä¼˜å…ˆéå†çš„æ‰€æœ‰å†…å®¹äº† æ„Ÿè§‰è‡ªå·±çœŸçš„å˜å¼ºäº†ï¼Œè§£ä¸€äº›ç®—æ³•é¢˜æ„Ÿè§‰å¼€å§‹æœ‰ç‚¹æƒ³æ³•äº†ï¼Œå¹¶ä¸”çœ‹åˆ«äººçš„é¢˜è§£ç»ˆäºèƒ½å¤Ÿé™ä¸‹å¿ƒå»çœ‹æ‡‚äº† æœºå™¨å­¦ä¹ ä¸æ·±åº¦å­¦ä¹  ã€ŠPythonæ·±åº¦å­¦ä¹ ã€‹(kerasä½œè€…å†™çš„ä¹¦) é™¤äº†å¾ªç¯ç¥ç»ç½‘ç»œæ²¡çœ‹æ‡‚ï¼Œå…¶ä»–éƒ½çœ‹å®Œäº†ï¼Œæ”¶è·è¿˜æ˜¯è›®å¤§çš„ ã€Šæ·±åº¦å­¦ä¹ â€¦ã€‹ æ—¥æœ¬äººå†™çš„ä¸€æœ¬ä¹¦ï¼Œé›¶åŸºç¡€çš„å†™ä¸€ä¸ªæ·±åº¦å­¦ä¹ ç¨‹åºï¼Œé‡Œé¢å…³äºä¸€äº›ä¼˜åŒ–çš„æŠ€å·§è®©æˆ‘æ”¶è·å¾ˆå¤§ ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ (Pytorchç‰ˆ)ã€‹ è¿™æ˜¯ç½‘ä¸Šæ•™ç¨‹ï¼Œä¹Ÿå¯ä»¥çœ‹åšæ˜¯ä¸€æœ¬ä¹¦äº†ï¼Œç›®å‰å¿«çœ‹å®Œç¬¬ä¸‰ç« äº† åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ æ˜¯æˆ‘æ¯•è®¾é‚£ä¼šçœ‹çš„ï¼Œå½“æ—¶å‡ºäºç”µè„‘åŸå› ï¼Œæ²¡èƒ½ç»§ç»­å­¦ä¸‹å»ï¼Œç°åœ¨å†çœ‹ä¸€éï¼Œæ„Ÿè§‰æ”¶è·å¾ˆå¤š ã€Šæœºå™¨å­¦ä¹ ã€‹ å¤§åé¼é¼çš„è¥¿ç“œä¹¦ï¼Œæ„Ÿè§‰å†…å®¹å¾ˆåæ•°å­¦ï¼Œçœ‹èµ·æ¥æŒºåƒåŠ›çš„ï¼Œç›®å‰çœ‹å®Œäº†ç¬¬ä¸‰ç«  ã€Šnumpyâ€¦ã€‹ çœ‹äº†ä¸€æœ¬å°åº¦äººå†™çš„ numpy çš„ä¸€æœ¬ä¹¦ï¼Œæ•´æœ¬ä¹¦æ„Ÿè§‰å¤§éƒ¨åˆ†éƒ½åœ¨åˆ†æé‡‘èæ•°æ®ï¼Œä¸å¤ªä¹ æƒ¯ï¼Œçœ‹å®Œåæ€»ç»“äº†é‡Œé¢ä¸ numpy æœ‰å…³çš„å†…å®¹ï¼Œåšæˆäº†æ€ç»´å¯¼å›¾ ç°åœ¨æ‰“ç®—æ ¹æ®æ€ç»´å¯¼å›¾å†™å‡ºå››ç¯‡åšå®¢ï¼Œç›®å‰å®Œæˆä¸€ç¯‡ï¼Œç¬¬äºŒç¯‡ä¹Ÿå®Œæˆä¸€åŠä»¥ä¸Šï¼Œæ„Ÿè§‰æœ¬å‘¨èƒ½å†™å®Œ å‰ç«¯ ã€ŠjQueryå®æˆ˜ã€‹ è¿™æœ¬ä¹¦æ˜¯æˆ‘ç¬¬äºŒæ¬¡çœ‹äº†ï¼Œè¿™æ¬¡èŠ±äº†ä¸¤å¤©å¿«é€Ÿçš„è¿‡äº†ä¸€éï¼Œæ„Ÿè§‰ä½¿ç”¨ jQuery çœŸçš„æ˜¯å¾ˆæ–¹ä¾¿ ä¹‹å‰å†™è¿‡ä¸€ç¯‡åšå®¢ï¼Œæ„Ÿè§‰ä¸å¤ªå¥½ï¼Œæœ€è¿‘å¸Œæœ›æ‹¿å‡ºæ¥æ”¹æ”¹ BootStrap è¿ç»­èŠ±äº†ä¸‰å¤©ï¼Œè‚å®Œäº† BootStrap çš„å®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°æ–‡æ¡£å†™çš„çœŸçš„å¾ˆä¸é”™ è¿™ä¸ªå°±ä¸æ‰“ç®—å†™åšå®¢äº†ï¼Œå› ä¸ºå®˜æ–¹æ–‡æ¡£å†™çš„å¾ˆå¥½ ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ çœ‹å®Œäº†è¿™æœ¬ä¹¦ï¼Œæ”¶è·ä¹Ÿè›®å¤§çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹ DOM ä»¥åŠ BOM è¿™ä¸€å— å½’çº³äº†å››äº”å¼ æ€ç»´å¯¼å›¾ï¼Œä»¥åŠå†™äº†ä¸¤ç¯‡åšå®¢ï¼Œæœªæ¥è®¡åˆ’æ ¹æ®æ€ç»´å¯¼å›¾åœ¨è‚å‡ ç¯‡åšå®¢ è¿™æœ¬ä¹¦å¯¹äºé«˜çº§å†…å®¹è¿˜æ˜¯æ¯”è¾ƒå°‘äº†ï¼Œç›®å‰åœ¨å›¾ä¹¦é¦†å€Ÿåˆ°äº†ã€ŠJavaScriptå¿è€…ç§˜ç±ã€‹ï¼Œè¿™æœ¬ä¹¦åœ¨å¯’å‡çœ‹å®Œäº†ï¼Œè§‰å¾—å†™çš„éå¸¸å¥½ï¼Œæ˜¯å…³äºJavaScriptä»¥åŠæµè§ˆå™¨çš„é«˜çº§å†…å®¹ï¼Œæ‰“ç®—æ ¹æ®è¿™æœ¬ä¹¦å½’çº³å‡ ä¸ªæ€ç»´å¯¼å›¾ä»¥åŠå‡ ç¯‡åšå®¢ ã€ŠCSSæ­ç§˜ã€‹ è¿™æœ¬ä¹¦çš„è¯„ä»·å¾ˆé«˜ï¼Œç›®å‰çœ‹å®Œäº†ç¬¬ä¸€éƒ¨åˆ† è¿™æœ¬ä¹¦å†…å®¹è¿˜æ˜¯æ¯”è¾ƒé«˜çº§ï¼Œç†è§£äº†çš„è¯è‚å‡ ç¯‡åšå®¢ ã€ŠHTML5å®æˆ˜ã€‹ ç›®å‰çœ‹äº†è¿™æœ¬ä¹¦æœ‰å…³ video/audio é‚£ä¸€ç« èŠ‚çš„å†…å®¹ï¼Œæœ‰ç‚¹æ”¶è· echarts å’Œ React ç‹é¹ä¼Ÿè€å¸ˆç»™äº†ä¸€äº› UI å›¾ï¼Œç°åœ¨æƒ³ç”¨ React ä»¿å‡ºæ¥ï¼Œä¸ºæ­¤ç‰¹æ„å­¦ä¹ äº† echarts echarts çš„å®˜ç½‘ç°åœ¨ä¹Ÿçœ‹äº†ä¸‰éäº†å§ï¼Œå¯¹äº echarts çš„ä½¿ç”¨æ„Ÿè§‰å·²ç»è›®ç†Ÿç»ƒäº†ï¼Œä½†æ˜¯æ„Ÿè§‰ echarts ç»„ç»‡æ•°æ®çš„æ–¹å¼ä¸å¤ªèˆ’æœ(ä¸»è¦æ˜¯æ²¡æœ‰ææ‡‚å®ƒçš„é»˜è®¤å€¼é€‰æ‹©) ä¸“ä¸šç›¸å…³ å¤©çº¿ å› ä¸ºè€å¸ˆä¸Šè¯¾è€å«æˆ‘ï¼Œæ‰€ä»¥è¿™é—¨è¯¾çœŸçš„æ˜¯æˆ‘è¯»å¤§å­¦ä»¥æ¥å¬çš„æœ€è®¤çœŸçš„è¯¾äº† å› ä¸ºæ²¡æœ‰å¤©çº¿åŸºç¡€ï¼Œå¾ˆå¤šä¸œè¥¿å…¶å®éƒ½ä¸æ‡‚ï¼Œä¸è¿‡æˆ‘è§‰å¾—æˆ‘èƒ½å¬æ‡‚çš„æˆ‘éƒ½å¬æ‡‚äº†ï¼Œå¹¶ä¸”å°è±¡æ·±åˆ» æ•°å€¼åˆ†æ è€å¸ˆè®²è¯¾é£æ ¼åæ•°å­¦ï¼Œå…¶å®æˆ‘åªå…³å¿ƒæ€ä¹ˆå®ç°ä»¥åŠæ¨å¯¼æ€è·¯ï¼Œå…·ä½“æ¨å¯¼ä¸å¤ªå…³å¿ƒ ç›®å‰çœ‹äº†ã€Šæ•°å€¼åˆ†æã€‹è¿™æœ¬ä¹¦çš„å‰äº”ç« ï¼Œçœ‹äº†ä¸¤éï¼Œå†…å®¹å¤§è‡´éƒ½ä¼šäº† æˆ‘å¯¹æ•°å€¼åˆ†æè¿˜æ˜¯è›®æ„Ÿå…´è¶£çš„ å…¶ä»– è®¡ç®—æœºç»„æˆåŸç† åˆ·å®Œäº†æ…•è¯¾ä¸Šå“ˆå·¥å¤§çš„è®¡ç®—æœºç»„æˆåŸç†çš„è§†é¢‘ è¿™ä¸ªè§†é¢‘æˆ‘åœ¨å¤§äºŒå­¦ä¹ å¾®æœºåŸç†çš„æ—¶å€™çœ‹è¿‡ä¸€æ¬¡ï¼Œè¿™æ¬¡å†çœ‹ä¸€éï¼Œå°±æ˜¯ä¸ºäº†è¡¥è®¡ç®—æœºåŸºç¡€ æ¸©ä¹ ä¸€éï¼Œå°†ä¹‹å‰æä¸æ‡‚çš„é™¤æ³•è¿ç®—è¿‡ç¨‹ææ‡‚äº†(çœŸçš„è§‰å¾—è‡ªå·±å˜å¼ºäº†) è¿™é—¨è¯¾è€å¸ˆè®²çš„çœŸçš„å¾ˆå¥½ï¼Œæ¨è Cè¯­è¨€ åœ¨ã€Šå‰‘æŒ‡offerã€‹ä¸€ç›´çœ‹åˆ°æŒ‡é’ˆï¼Œå½“æ—¶æŒ‡é’ˆåŠåŠå­æ°´å¹³ï¼Œæ²¡å­¦æ˜ç™½ï¼Œæä¸å¤ªæ‡‚ï¼Œç°åœ¨çªç„¶æƒ³æŠŠå®ƒææ‡‚ çœ‹äº†ç¿æºç”·ç¥çš„ C è¯­è¨€è¯¾ç¨‹ï¼Œè¿™æ¬¡çœ‹èµ·æ¥æ„Ÿè§‰æ¯«æ— å‹åŠ›ï¼Œé…ä¸Šè€å¸ˆç£æ€§çš„å£°éŸ³ï¼Œä¸çŸ¥ä¸è§‰å°†æŒ‡é’ˆææ‡‚äº†ï¼Œæ¥ç€å°±ç”¨ C è¯­è¨€æ‰‹å†™å‡ ä¸ªæ’åºç®—æ³•(å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å½’å¹¶ã€å¿«é€Ÿ) ã€Šæˆ‘çš„ç¬¬ä¸€æœ¬Dockerä¹¦ã€‹ åŸºæœ¬çš„äº†è§£äº†ä¸€ä¸‹ Dockerï¼Œå¯¹äºå®¹å™¨ã€é•œåƒç­‰æ¦‚å¿µæœ‰äº†è¿›ä¸€æ­¥çš„è®¤è¯† ä»¥åŠäº†è§£äº† Dockerfile é‡Œé¢çš„ä¸€äº›å‘½ä»¤ Linux çœ‹äº†åƒé”‹çš„è§†é¢‘ï¼ŒåºŸè¯å®åœ¨å¤ªå¤šï¼Œè¿›åº¦éå¸¸æ…¢ï¼Œç›®å‰çœ‹äº† 6 ä¸ªè§†é¢‘å·¦å³","tags":[{"name":"å­¦ä¹ æ€»ç»“","slug":"å­¦ä¹ æ€»ç»“","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"}]},{"title":"numpy å…¥é—¨","date":"2020-10-19T16:00:00.000Z","path":"/numpyå…¥é—¨/","text":"æ–‡ç« æ˜¯ä½¿ç”¨ jupyter å†™çš„ï¼Œä¸ºäº†æ’å…¥åˆ°åšå®¢ä¸­ï¼Œä½¿ç”¨ iframe è¿›è¡ŒåµŒå…¥ï¼Œæ‰€ä»¥é˜…è¯»ä½“éªŒå¯èƒ½ä¸æ˜¯å¾ˆå¥½","tags":[{"name":"numpy","slug":"numpy","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/numpy/"},{"name":"ndarray","slug":"ndarray","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/ndarray/"}]},{"title":"å›¾çš„è¡¨ç¤º","date":"2020-10-07T16:00:00.000Z","path":"/å›¾çš„è¡¨ç¤º/","text":"é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹å›¾çš„æ•°æ®ç»“æ„é•¿ä»€ä¹ˆæ ·å­ ä¸€ä¸ªå›¾å®ƒç”±é¡¶ç‚¹ Vertex å’Œè¾¹ Edge ç»„æˆï¼Œä¸Šå›¾è“è‰²çš„èŠ‚ç‚¹è¡¨ç¤ºé¡¶ç‚¹ï¼Œè€ŒèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´çš„æœ‰æ¡çº¿è¿ç€ï¼Œè¿™å°±æ˜¯é¡¶ç‚¹ä¹‹é—´çš„è¾¹ã€‚ä¸ºäº†åœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºå›¾ï¼Œæˆ‘ä»¬ç»™å›¾çš„é¡¶ç‚¹ç¼–äº†å·ï¼Œä» $0$ å¼€å§‹ã€‚åœ¨å®é™…çš„æ¨¡å‹ä¸­ï¼Œé¡¶ç‚¹å¯èƒ½è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªåœ°é“ç«™ç‚¹ï¼Œç¤¾äº¤ç½‘ç»œä¸­çš„ä¸€ä¸ªäººï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å“ˆå¸Œè¡¨å°†ç¼–å·ä¸é¡¶ç‚¹å®é™…çš„æ„ä¹‰æ˜ å°„èµ·æ¥ï¼Œè¿›è€ŒæŠŠé¡¶ç‚¹çš„å…·ä½“æ„ä¹‰æŠ½è±¡ä¸ºç¼–å·æˆ–è€…ä¸‹æ ‡ï¼Œå½“å›¾çš„é¡¶ç‚¹ä»¥ç¼–å·è¡¨ç¤ºæ—¶ï¼Œå®ƒå°±ä¸å…·æœ‰å…·ä½“çš„æ„ä¹‰ï¼Œä»è€Œæˆ‘ä»¬å¯ä»¥ç ”ç©¶å›¾çš„ä¸€èˆ¬ç†è®ºï¼Œè€Œå½“æˆ‘ä»¬éœ€è¦ç»“è®ºçš„å…·ä½“æ„ä¹‰æ—¶ï¼Œå¯ä»¥é€šè¿‡å“ˆå¸Œè¡¨å°†ç¼–å·æ˜ å°„ä¸ºå…·ä½“çš„æ„ä¹‰ã€‚ å›¾çš„åˆ†ç±»æ ¹æ®è¾¹æ˜¯å¦æœ‰æ–¹å‘å¯ä»¥åˆ†ä¸ºæœ‰å‘å›¾å’Œæ— å‘å›¾ï¼Œæ ¹æ®è¾¹ä¸Šæœ‰å¦æœ‰æƒå€¼å¯ä»¥åˆ†ä¸ºæœ‰æƒå›¾å’Œæ— æƒå›¾ æœ‰å‘ æ— å‘ æœ‰æƒ æœ‰å‘æœ‰æƒå›¾ æ— å‘æœ‰æƒå›¾ æ— æƒ æœ‰å‘æ— æƒå›¾ æ— å‘æ— æƒå›¾ å›¾çš„åŸºæœ¬æ¦‚å¿µåœ¨è¿›å…¥æ­£é¢˜ä¹‹å‰ï¼Œç®€å•çš„ä»‹ç»ä¸€ä¸‹åœ¨åé¢ä¼šé‡åˆ°çš„å…³äºå›¾çš„åŸºæœ¬æ¦‚å¿µã€‚ è‡ªç¯è¾¹ï¼šå›¾ä¸­æœ‰ä¸€ä¸ªé¡¶ç‚¹æœ‰æ¡è¾¹æŒ‡å‘è‡ªå·± å¹³è¡Œè¾¹ï¼šä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æœ‰ä¸¤æ¡è¾¹ å¦‚æœä¸€å¹…å›¾æ—¢æ²¡æœ‰è‡ªç¯è¾¹ï¼Œä¹Ÿæ²¡æœ‰å¹³è¡Œè¾¹ï¼Œæˆ‘ä»¬å°±ç§°è¯¥å›¾ä¸ºç®€å•å›¾ã€‚æˆ‘ä»¬åªå¤„ç†ç®€å•å›¾ï¼Œå¦‚æœå›¾ä¸­æœ‰è‡ªç¯è¾¹æˆ–è€…å¹³è¡Œè¾¹ï¼Œæˆ‘ä»¬ä¼šå¿½ç•¥è¿™ç§è¾¹ï¼Œæˆ–è€…æŠ›å‡ºå¼‚å¸¸ã€‚ åœ¨ä¸€ä¸ªå›¾ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é¡¶ç‚¹éƒ½æ˜¯è”é€šçš„ï¼Œå¦‚ä¸‹ ä¾‹å¦‚é¡¶ç‚¹ 6-7 å’Œé¡¶ç‚¹ 0-5 ä¹‹é—´æ˜¯ä¸è”é€šçš„ï¼Œåƒä¸Šé¢è¿™æ ·çš„å›¾ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæœ‰ä¸¤ä¸ªè”é€šåˆ†é‡ï¼Œé¡¶ç‚¹ 0-5 å’Œé¡¶ç‚¹ 6-7 åˆ†åˆ«ä»£è¡¨ä¸€ä¸ªè”é€šåˆ†é‡ã€‚ å¦å¤–ï¼Œæ ¹æ®å›¾ä¸­æ˜¯å¦æœ‰ç¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å›¾åˆ†ä¸ºæœ‰ç¯å›¾å’Œæ— ç¯å›¾ æœ€åä»‹ç»ä¸€ä¸ªæœ‰å…³å›¾çš„æ¦‚å¿µï¼Œé‚£å°±æ˜¯åº¦(degree)ï¼Œå¯¹äºæ— å‘å›¾å’Œæœ‰å‘å›¾ï¼Œåº¦çš„å®šä¹‰æ˜¯ä¸åŒçš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»æ— å‘å›¾å…³äºåº¦çš„å®šä¹‰ï¼Œåº¦æŒ‡çš„æ˜¯æŸä¸ªé¡¶ç‚¹æœ‰å¤šå°‘ä¸ªé‚»è¾¹ï¼Œåº¦æ˜¯é¡¶ç‚¹çš„å±æ€§ã€‚æ¯”å¦‚å¯¹äºä¸‹å›¾ é¡¶ç‚¹ $0$ çš„åº¦ä¸º $2$ï¼Œå› ä¸ºé¡¶ç‚¹ $0$ æœ‰ä¸¤ä¸ªé‚»è¾¹ï¼ŒåŒç†ï¼Œé¡¶ç‚¹ $2$ çš„åº¦ä¸º $3$ï¼Œå› ä¸ºå®ƒæœ‰ä¸‰ä¸ªé‚»è¾¹ã€‚ å›¾çš„è¡¨ç¤ºæ‰€è°“å›¾çš„è¡¨ç¤ºï¼Œå°±æ˜¯æŒ‡å¦‚ä½•åœ¨è®¡ç®—æœºä¸­ä¿å­˜ä¸€ä¸ªå›¾çš„æ•°æ®ç»“æ„ å¦‚ä¸Šå›¾ï¼Œæ€ä¹ˆå°†å®ƒä¿å­˜åœ¨è®¡ç®—æœºä¸­ã€‚å¦‚æœå­¦ä¹ è¿‡å…¶ä»–æ•°æ®ç»“æ„çš„è¯ï¼Œå¦‚æ ˆï¼Œé˜Ÿåˆ—ï¼Œæ ‘ï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆè¡¨ç¤ºçš„å‘¢? å¯¹äºæ ˆå’Œé˜Ÿåˆ—è¿™ç§çº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨æ•°ç»„æˆ–è€…é“¾è¡¨æ¥è¿›è¡Œå­˜å‚¨ï¼Œè€Œå¯¹äºæ ‘è¿™ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨é“¾è¡¨è¿›è¡Œè¡¨ç¤ºï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘å®ƒçš„å·¦å­©å­å’Œå³å­©å­ï¼Œå½“ç„¶å¯¹äºæŸäº›æ ‘ç»“æ„ï¼Œå¦‚å †ã€çº¿æ®µæ ‘ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„æ¥è¿›è¡Œè¡¨ç¤ºï¼Œå› ä¸ºè¿™ä¸¤ç§æ•°æ®ç»“æ„éƒ½æ˜¯æ»¡äºŒå‰æ ‘ï¼Œå®ƒä»¬çš„å­©å­èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹ä¹‹é—´å«æœ‰æŸç§å…³ç³»ï¼Œå¯ä»¥ååˆ†æ–¹ä¾¿çš„ä½¿ç”¨æ•°ç»„è¿›è¡Œè¡¨ç¤ºã€‚ é‚»æ¥çŸ©é˜µé¦–å…ˆæˆ‘ä»¬ä»‹ç»ä½¿ç”¨ä¸€ä¸ªçŸ©é˜µæ¥å­˜å‚¨å›¾ï¼Œå¦‚æœæ•´ä¸ªå›¾æœ‰ $V$ ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨ $V \\times V$ å¤§å°çš„çŸ©é˜µæ¥å­˜å‚¨å›¾ï¼Œå‡è®¾è¿™ä¸ªçŸ©é˜µè®°åš $A$ï¼Œå¦‚æœ $A[i][j] = 1$ï¼Œåˆ™è¯´æ˜é¡¶ç‚¹ $i$ ä¸é¡¶ç‚¹ $j$ ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œåä¹‹å¦‚æœ $A[i][j] = 0$ï¼Œåˆ™è¯´æ˜é¡¶ç‚¹ $i$ ä¸é¡¶ç‚¹ $j$ ä¹‹é—´ä¸å­˜åœ¨ä¸€æ¡è¾¹ å› ä¸ºä¸å­˜åœ¨è‡ªç¯è¾¹ï¼Œæ‰€ä»¥ $A[i][i]$ çš„å€¼ä¸€å®šä¸º $0$ï¼Œå³çŸ©é˜µå¯¹è§’çº¿ä¸Šçš„å€¼ä¸€å®šæ˜¯ $0$ã€‚ åœ¨æ„å»ºä¸€å¼ å›¾æ—¶ï¼Œæˆ‘ä»¬ä¼šè¯»å–ä¸€ä¸ª txt çš„æ–‡ä»¶ï¼Œæ ¹æ®è¿™ä¸ªæ–‡ä»¶æˆ‘ä»¬ä½¿ç”¨çŸ©é˜µæ¥å­˜å‚¨ä¸€å¼ å›¾ï¼Œä¾‹å¦‚ä¸Šå›¾æ‰€å¯¹åº”çš„ txt å†…å®¹å¦‚ä¸‹ 6 70 10 21 32 32 43 54 5 è¿™ä¸ª txt è¡¨ç¤ºä»€ä¹ˆæ„æ€å‘¢? ç¬¬ä¸€è¡Œçš„ä¸¤ä¸ªæ•°å­—è¡¨ç¤ºå›¾ä¸­çš„é¡¶ç‚¹æ•°å’Œè¾¹æ•°ï¼Œå¦‚ä¸Šå›¾æœ‰ $6$ ä¸ªé¡¶ç‚¹å’Œ $7$ æ¡è¾¹ï¼Œåé¢æ¯è¡Œçš„ä¸¤ä¸ªæ•°å­—è¡¨ç¤ºä¸¤ä¸ªé¡¶ç‚¹ï¼Œè¡¨ç¤ºè¿™ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œå¦‚ç¬¬äºŒè¡Œå°±è¡¨ç¤ºé¡¶ç‚¹ $0$ å’Œé¡¶ç‚¹ $1$ ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ï¼Œå› ä¸ºæ€»å…±æœ‰ $7$ æ¡è¾¹ï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œååº”è¯¥æœ‰ $7$ è¡Œè¡¨ç¤ºæœ‰ $7$ æ¡è¾¹ã€‚ ä»£ç å¦‚ä¸‹ï¼š import java.io.File;import java.io.FileNotFoundException;import java.util.Scanner;public class AdjMatrix &#123; // å›¾çš„è¾¹æ•° private int E; // å›¾çš„é¡¶ç‚¹ä¸ªæ•° private int V; // è¡¨ç¤ºå›¾çš„çŸ©é˜µ private int[][] matrix; public AdjMatrix(String filename) &#123; // ä»æ–‡ä»¶ä¸­è¯»å–å›¾çš„æ•°æ® File file = new File(filename); Scanner scanner = null; try &#123; // ç¬¬ä¸€è¡Œæ˜¯é¡¶ç‚¹æ•°å’Œè¾¹æ•° scanner = new Scanner(file); this.V = scanner.nextInt(); matrix = new int[this.V][this.V]; this.E = scanner.nextInt(); for (int i = 0; i &lt; this.E; i++) &#123; // è¯»å–ä¸¤ä¸ªç›¸é‚»çš„é¡¶ç‚¹ int a = scanner.nextInt(); int b = scanner.nextInt(); // è®¾ç½®ä¸º 1 è¡¨ç¤ºç›¸é‚» this.matrix[a][b] = 1; this.matrix[b][a] = 1; &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; // å½“æ‰“å°å¯¹è±¡æ—¶ï¼Œå°†çŸ©é˜µæ‰“å°å‡ºæ¥ @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int i = 0; i &lt; this.V; i++) &#123; for (int j = 0; j &lt; this.V; j++) &#123; stringBuilder.append(String.format(\"%d \", this.matrix[i][j])); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125; public static void main(String[] args) &#123; AdjMatrix adjMatrix = new AdjMatrix(\"g.txt\"); System.out.println(adjMatrix); &#125;&#125; æ‰“å°ç»“æœä¸º V: 6, E: 70 1 1 0 0 0 1 0 0 1 0 0 1 0 0 1 1 0 0 1 1 0 0 1 0 0 1 0 0 1 0 0 0 1 1 0 AdjMatrix ç±»æœ‰ä¸‰ä¸ªå±æ€§ å±æ€§ å«ä¹‰ V è¡¨ç¤ºé¡¶ç‚¹æ•° E è¡¨ç¤ºè¾¹æ•° matrix è¡¨ç¤ºå›¾çš„çŸ©é˜µ ä½†æ˜¯ä¸Šé¢çš„ç¨‹åºè¿˜ä¸å¤Ÿå¥å£®ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¯¹ g.txt ä¸­è¯»åˆ°çš„æ•°å­—è¿›è¡Œæ ¡éªŒï¼Œä¾‹å¦‚è¯»åˆ°çš„é¡¶ç‚¹ä¸ªæ•°ä¸ºè´Ÿæ•°ï¼Œè¯»åˆ°çš„é¡¶ç‚¹ç¼–å·ä¸åˆç†ï¼Œä¾‹å¦‚æœ‰ $5$ ä¸ªé¡¶ç‚¹ï¼Œä½†æ˜¯å®ƒçš„ç¼–å·ä¸º $10$ã€‚å¦å¤–ï¼Œæˆ‘ä»¬åªå¤„ç†ç®€å•å›¾ï¼Œå¯¹äºè‡ªç¯è¾¹ä»¥åŠå¹³è¡Œè¾¹ä¹Ÿæ²¡æœ‰è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œæ”¹è¿› import java.io.File;import java.io.FileNotFoundException;import java.util.ArrayList;import java.util.Scanner;public class AdjMatrix &#123; private int E; private int V; private int[][] matrix; public AdjMatrix(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; scanner = new Scanner(file); // å¦‚æœè¯»å–åˆ°çš„ V å’Œ E å°äº 0ï¼Œé‚£ä¹ˆæŠ›å‡ºå¼‚å¸¸ this.V = scanner.nextInt(); if (this.V &lt; 0) &#123; throw new IllegalArgumentException(\"V Must Be Positive\"); &#125; matrix = new int[this.V][this.V]; this.E = scanner.nextInt(); if (this.E &lt; 0) &#123; throw new IllegalArgumentException(\"E Must Be Positive\"); &#125; for (int i = 0; i &lt; this.E; i++) &#123; // å¯¹è¯»å–åˆ°çš„é¡¶ç‚¹ç¼–å·è¿›è¡ŒéªŒè¯ï¼Œæ˜¯å¦åœ¨ [0, V) çš„èŒƒå›´ä¸­ int a = scanner.nextInt(); validateVertex(a); int b = scanner.nextInt(); validateVertex(b); // å¦‚æœå­˜åœ¨è‡ªç¯è¾¹ï¼ŒæŠ›å‡ºå¼‚å¸¸ if (a == b) &#123; throw new IllegalArgumentException(\"Self loop exists\"); &#125; // å¦‚æœå­˜åœ¨å¹³è¡Œè¾¹ï¼ŒæŠ›å‡ºå¼‚å¸¸ if (this.matrix[a][b] == 1) &#123; throw new IllegalArgumentException(\"Parallel edge exists\"); &#125; this.matrix[a][b] = 1; this.matrix[b][a] = 1; &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; // å¯¹é¡¶ç‚¹ç¼–å·è¿›è¡ŒéªŒè¯ï¼Œæ˜¯å¦åˆæ³• private void validateVertex(int v) &#123; if (v &lt; 0 || v &gt;= this.V) &#123; throw new IllegalArgumentException(\"Vertex \" + v + \" is invalid\"); &#125; &#125; // è¿”å›é¡¶ç‚¹æ•° public int V() &#123; return this.V; &#125; // è¿”å›è¾¹æ•° public int E() &#123; return this.E; &#125; // è¿”å›ä¸é¡¶ç‚¹ v ç›¸é‚»çš„æ‰€æœ‰é¡¶ç‚¹ public ArrayList&lt;Integer&gt; adj(int v) &#123; validateVertex(v); ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; this.V; i++) &#123; if (this.matrix[v][i] == 1) &#123; res.add(i); &#125; &#125; return res; &#125; // åˆ¤æ–­é¡¶ç‚¹ v å’Œ w æ˜¯å¦ç›¸é‚» public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return this.matrix[v][w] == 1; &#125; // è¿”å›é¡¶ç‚¹ v çš„åº¦ï¼Œå³ä¸é¡¶ç‚¹ v ç›¸é‚»çš„é¡¶ç‚¹çš„ä¸ªæ•° public int degree(int v) &#123; return adj(v).size(); &#125; // toString ä¸å˜ï¼ŒèŠ‚çœç¯‡å¹…ï¼Œçœç•¥&#125; åœ¨ä¸Šé¢æˆ‘ä»¬å¯¹è¯»å–åˆ°çš„æ•°å­—éƒ½è¿›è¡Œäº†æ£€æŸ¥ï¼Œä¿è¯äº†ä»£ç çš„å¥å£®æ€§ã€‚é™¤äº†å¢å¼ºäº†ä»£ç çš„å¥å£®æ€§ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜åœ¨ç±»ä¸­æ·»åŠ äº†äº”ä¸ªæ–¹æ³•ï¼Œå…·ä½“ä½œç”¨è§ä¸‹è¡¨ æ–¹æ³• ä½œç”¨ int V() è¿”å›å›¾çš„é¡¶ç‚¹æ•° int E() è¿”å›å›¾çš„è¾¹æ•° ArrayList adj(int v) è¿”å›ä¸é¡¶ç‚¹ v ç›¸é‚»çš„é¡¶ç‚¹ boolean hasEdge(int v, int w) åˆ¤æ–­ä¸¤é¡¶ç‚¹æ˜¯å¦ç›¸é‚» int degree(int v) è¿”å›é¡¶ç‚¹ v çš„åº¦ åœ¨æœ€åæˆ‘ä»¬åˆ†æä¸€ä¸‹ä½¿ç”¨é‚»æ¥çŸ©é˜µè¡¨ç¤ºçš„ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦ï¼š ç©ºé—´å¤æ‚åº¦ï¼š$O(V^2)$ æ—¶é—´å¤æ‚åº¦ï¼š å»ºå›¾ï¼š$O(E)$ è·å¾—ä¸é¡¶ç‚¹ $v$ ç›¸é‚»çš„é¡¶ç‚¹ï¼š$O(V)$ æŸ¥çœ‹ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ï¼š$O(1)$ å¯¹äºå»ºå›¾æ¥è¯´ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»æ‰«ææ‰€æœ‰çš„è¾¹æ‰èƒ½è·å¾—å¿…è¦çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å»ºå›¾çš„æ—¶é—´å¤æ‚åº¦æœ€å°‘ä¹Ÿæ˜¯ $O(E)$ï¼Œæ— æ³•å†ä¼˜åŒ–ï¼›è€ŒæŸ¥çœ‹ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ï¼Œæ— éœ€ä¼˜åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹ç©ºé—´å¤æ‚åº¦å’Œè·å¾—ä¸é¡¶ç‚¹ $v$ ç›¸é‚»çš„é¡¶ç‚¹çš„æ—¶é—´å¤æ‚åº¦èƒ½å¦è¿›è¡Œä¼˜åŒ–ã€‚ å› ä¸ºæˆ‘ä»¬å¹³å¸¸é‡åˆ°çš„å›¾éƒ½æ˜¯ç¨€ç–å›¾ï¼Œæ‰€è°“ç¨€ç–å›¾å°±æ˜¯ä¸€å¹…å›¾å®ƒçš„åº¦å¹³å‡å€¼å¯¹äºå›¾çš„èŠ‚ç‚¹æ•°ç›®æ¥è¯´å¾ˆå°ï¼Œè¿™å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„é‚»æ¥çŸ©é˜µæ˜¯ä¸€ä¸ªç¨€ç–çŸ©é˜µï¼Œå³å¤§éƒ¨åˆ†çš„å…ƒç´ æ˜¯ $0$ã€‚ä¾‹å¦‚å¯¹äºä¸€ä¸ªç¤¾äº¤ç½‘ç»œï¼Œæœ‰ä¸€äº¿ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯å¯¹äºæ¯ä¸ªäººæ¥è¯´ï¼Œä»–è®¤è¯†çš„äººæœ€å¤šå‡ ç™¾ä¸ªï¼Œä¹Ÿå°±æ˜¯è¿™å¹…å›¾å¹³å‡çš„åº¦ä¸ºå‡ ç™¾ï¼Œç›¸å¯¹äºä¸€äº¿æ¥è¯´ååˆ†çš„å°ï¼Œæ‰€ä»¥ç¤¾äº¤ç½‘ç»œæ˜¯ä¸€ä¸ªç¨€ç–å›¾ã€‚ å»ºç«‹ä¸€ä¸ªå›¾ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸€å¹…å›¾çš„é¡¶ç‚¹ä¿¡æ¯ä»¥åŠè¾¹çš„ä¿¡æ¯å³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªéœ€è¦ $O(V + E)$ çš„ç©ºé—´å¤æ‚åº¦å°±å¯ä»¥è¡¨ç¤ºä¸€å¹…å›¾ï¼Œå¯¹äºç¨€ç–å›¾æ¥è¯´ï¼Œç”±äºå›¾çš„æ¯ä¸ªé¡¶ç‚¹åº¦çš„å¹³å‡å€¼è¿œè¿œå°äºèŠ‚ç‚¹æ•°ï¼Œè€Œ $E$ çš„å¤§å°ç­‰äºå¹³å‡åº¦çš„å€¼ä¹˜ä»¥èŠ‚ç‚¹æ•°ï¼Œå³$$E = degree * V$$ä»è€Œæœ‰$$degree \\ll V \\Rightarrow E \\ll V^2$$å¾—åˆ°$$O(V + E) \\ll O(V^2)$$æ‰€ä»¥ä½¿ç”¨é‚»æ¥çŸ©é˜µè¡¨ç¤ºå›¾ï¼Œå¯¹äºç¨€ç–çŸ©é˜µæ¥è¯´ï¼Œå…¶å®æµªè´¹äº†å¾ˆå¤šçš„ç©ºé—´ï¼Œä¸‹é¢å°†ä»‹ç»ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•è¡¨ç¤ºå›¾ï¼Œæ— è®ºæ˜¯å¯¹äºç¨€ç–å›¾è¿˜æ˜¯ç¨ å¯†å›¾ï¼Œéƒ½å¯ä»¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ é‚»æ¥è¡¨åœ¨è¿™ä¸ªå°èŠ‚ä¸­å°†è®²è§£ä½¿ç”¨é‚»æ¥è¡¨æ¥è¡¨ç¤ºçŸ©é˜µï¼Œæ‰€è°“çš„é‚»æ¥è¡¨ï¼Œæ˜¯æŒ‡å¯¹äºæ¯ä¸ªé¡¶ç‚¹æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªé“¾è¡¨æ¥è®°å½•ä¸å®ƒç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾ å›¾ä¸­è¡¨æ ¼ç¬¬ä¸€åˆ—è¡¨ç¤ºé¡¶ç‚¹ç¼–å·ï¼Œé¡¶ç‚¹ç¼–å·åçš„ä¸€è¡Œè¡¨ç¤ºä¸è¯¥é¡¶ç‚¹ç›¸é‚»çš„é¡¶ç‚¹ï¼Œä¾‹å¦‚å¯¹äºç¬¬ä¸€è¡Œï¼Œè¡¨ç¤ºä¸é¡¶ç‚¹ $0$ ç›¸é‚»çš„é¡¶ç‚¹æœ‰é¡¶ç‚¹ $1$ å’Œ $2$ã€‚ ç°åœ¨æˆ‘ä»¬å°±è¦ç¼–ç å®ç°ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„é€»è¾‘ä¸é‚»æ¥çŸ©é˜µæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å¾ˆå¤šçš„ä»£ç ä¸é‚»æ¥çŸ©é˜µè¡¨ç¤ºçš„æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡å› ä¸ºåº•å±‚ä¿å­˜å›¾ä½¿ç”¨çš„æ˜¯é“¾è¡¨ï¼Œæœ‰ä¸€äº›å†™æ³•çš„ä¸åŒï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­æˆ‘ä¹Ÿä¼šæ ‡å‡º import java.io.File;import java.io.FileNotFoundException;import java.util.LinkedList;import java.util.Scanner;public class AdjList &#123; private int E; private int V; // å¯¹æ¯ä¸€ä¸ªé¡¶ç‚¹ï¼Œä½¿ç”¨ä¸€ä¸ªé“¾è¡¨æ¥å­˜å‚¨ä¸å®ƒç›¸é‚»çš„é¡¶ç‚¹ private LinkedList&lt;Integer&gt;[] lists; public AdjList(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (this.V &lt; 0) &#123; throw new IllegalArgumentException(\"V Must Be Positive\"); &#125; // åˆå§‹åŒ–é“¾è¡¨ this.lists = new LinkedList[this.V]; for (int i = 0; i &lt; this.V; i++) &#123; this.lists[i] = new LinkedList&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (this.E &lt; 0) &#123; throw new IllegalArgumentException(\"E Must Be Positive\"); &#125; for (int i = 0; i &lt; this.E; i++) &#123; int a = scanner.nextInt(); validateVertex(a); int b = scanner.nextInt(); validateVertex(b); if (a == b) &#123; throw new IllegalArgumentException(\"Self loop exists\"); &#125; // å¹³è¡Œè¾¹çš„åˆ¤æ–­ if (lists[a].contains(b)) &#123; throw new IllegalArgumentException(\"Parallel edge exists\"); &#125; // å°†ç›¸é‚»é¡¶ç‚¹æ·»åŠ åˆ°è‡ªå·±çš„é“¾è¡¨ä¸­ this.lists[a].add(b); this.lists[b].add(a); &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; private void validateVertex(int v) &#123; if (v &lt; 0 || v &gt;= this.V) &#123; throw new IllegalArgumentException(\"Vertex \" + v + \" is invalid\"); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public LinkedList&lt;Integer&gt; adj(int v) &#123; validateVertex(v); // ç›´æ¥è¿”å›é¡¶ç‚¹è‡ªå·±çš„é“¾è¡¨å³å¯ return lists[v]; &#125; public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return this.lists[v].contains(w); &#125; public int degree(int v) &#123; return adj(v).size(); &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (int w: adj(v)) &#123; stringBuilder.append(String.format(\"%d \", w)); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125; public static void main(String[] args) &#123; AdjList adjList = new AdjList(\"g.txt\"); System.out.println(adjList); &#125;&#125; è¾“å‡ºä¸º V: 6, E: 70 : 1 2 1 : 0 3 2 : 0 3 4 3 : 1 2 5 4 : 2 5 5 : 3 4 ä¸‹é¢åˆ†æä¸€ä¸‹ä½¿ç”¨é‚»æ¥è¡¨å®ç°å›¾çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼š ç©ºé—´å¤æ‚åº¦ï¼š$O(V + E)$ æ—¶é—´å¤æ‚åº¦ï¼š å»ºè¡¨ï¼š$O(VE)$ è·å¾—ä¸é¡¶ç‚¹ $V$ ç›¸é‚»çš„é¡¶ç‚¹ï¼š$O(degree)$ åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ï¼š$O(degree)$ å»ºè¡¨çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(VE)$ï¼Œæ˜¯å› ä¸ºæ¯æ¬¡æˆ‘ä»¬éƒ½è¦æ‰«æä¸€éè¡¨åˆ¤æ–­æ˜¯å¦æœ‰å¹³è¡Œè¾¹ï¼Œåˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(degree)$ï¼Œæ˜¯å› ä¸ºéœ€è¦éå†è¡¨æ¥åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»ã€‚ä¸Šé¢ä¸¤ä¸ªæ“ä½œéƒ½æ¯”ä½¿ç”¨é‚»æ¥çŸ©é˜µå®ç°å›¾çš„æ“ä½œæ›´åŠ çš„è´¹æ—¶ï¼Œéƒ½æ˜¯å› ä¸ºæŸ¥æ‰¾çš„èƒ½åŠ›æ¯”è¾ƒæ…¢(åœ¨å»ºå›¾æ—¶éœ€è¦æŸ¥é‡åˆ¤æ–­æ˜¯å¦æœ‰å¹³è¡Œè¾¹ï¼Œåˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»æ—¶ä¹Ÿéœ€è¦åœ¨é“¾è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾)ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯å¦æœ‰åŠæ³•å¯ä»¥æé«˜æŸ¥æ‰¾è¡¨çš„é€Ÿåº¦ã€‚ è¯´åˆ°æŸ¥æ‰¾é€Ÿåº¦ï¼Œä¸å¾—ä¸è¯´å“ˆå¸Œè¡¨å’Œçº¢é»‘æ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ HashSet æˆ–è€… TreeSet æ¥æ›¿ä»£ä¸Šé¢çš„ LinkedListï¼Œä»¥æ­¤æ¥æé«˜æŸ¥æ‰¾é€Ÿåº¦ï¼ŒäºŒè€…æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦å¦‚ä¸‹ æ•°æ®ç»“æ„ æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ HashSet $O(1)$ TreeSet $O(\\log v)$ ä»æ—¶é—´å¤æ‚åº¦ä¸Šçœ‹ï¼Œä½¿ç”¨ HashSet æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯ TreeSet æœ‰ä¸€ä¸ªä¼˜ç‚¹é‚£å°±æ˜¯æœ‰åºæ€§ï¼Œè¿™ä¼šå¸¦æ¥ä¸¤ä¸ªä¼˜ç‚¹ å¤ç°æˆ‘çš„ä»£ç æ—¶å¯ä»¥å¾—åˆ°ä¸æˆ‘ä¸€è‡´çš„ç»“æœ(è¾“å‡ºçš„é¡ºåº) å½“æˆ‘ä½¿ç”¨å›¾ç‰‡è§£é‡Šç®—æ³•è¿‡ç¨‹æ—¶ï¼Œè¾“å‡ºçš„ç»“æœå¯ä»¥ä¸æˆ‘æ¼”ç¤ºçš„ç»“æœä¸€è‡´ï¼Œå¯ä»¥æ›´å¥½çš„ç†è§£ç®—æ³• æ‰€ä»¥è¿™é‡Œæˆ‘é€‰æ‹© TreeSetã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª AdjSet ç±»ï¼Œå¤åˆ¶ AdjList çš„ä»£ç ï¼Œå°†å…¶ä¸­æ‰€æœ‰çš„ LinkedList æ”¹ä¸º TreeSet å³å¯ï¼Œå¦‚ä¸‹ import java.io.File;import java.io.FileNotFoundException;import java.util.Scanner;import java.util.TreeSet;public class AdjSet &#123; private int E; private int V; private TreeSet&lt;Integer&gt;[] sets; public AdjSet(String filename) &#123; File file = new File(filename); Scanner scanner = null; try &#123; scanner = new Scanner(file); this.V = scanner.nextInt(); if (this.V &lt; 0) &#123; throw new IllegalArgumentException(\"V Must Be Positive\"); &#125; // åˆå§‹åŒ–é“¾è¡¨ this.sets = new TreeSet[this.V]; for (int i = 0; i &lt; this.V; i++) &#123; this.sets[i] = new TreeSet&lt;&gt;(); &#125; this.E = scanner.nextInt(); if (this.E &lt; 0) &#123; throw new IllegalArgumentException(\"E Must Be Positive\"); &#125; for (int i = 0; i &lt; this.E; i++) &#123; int a = scanner.nextInt(); validateVertex(a); int b = scanner.nextInt(); validateVertex(b); if (a == b) &#123; throw new IllegalArgumentException(\"Self loop exists\"); &#125; // å¹³è¡Œè¾¹çš„åˆ¤æ–­ if (sets[a].contains(b)) &#123; throw new IllegalArgumentException(\"Parallel edge exists\"); &#125; // å°†ç›¸é‚»é¡¶ç‚¹æ·»åŠ åˆ°è‡ªå·±çš„é“¾è¡¨ä¸­ this.sets[a].add(b); this.sets[b].add(a); &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; assert scanner != null; scanner.close(); &#125; &#125; private void validateVertex(int v) &#123; if (v &lt; 0 || v &gt;= this.V) &#123; throw new IllegalArgumentException(\"Vertex \" + v + \" is invalid\"); &#125; &#125; public int V() &#123; return this.V; &#125; public int E() &#123; return this.E; &#125; public TreeSet&lt;Integer&gt; adj(int v) &#123; validateVertex(v); // ç›´æ¥è¿”å›è‡ªå·±çš„é“¾è¡¨å³å¯ return sets[v]; &#125; public boolean hasEdge(int v, int w) &#123; validateVertex(v); validateVertex(w); return this.sets[v].contains(w); &#125; public int degree(int v) &#123; return adj(v).size(); &#125; @Override public String toString() &#123; StringBuilder stringBuilder = new StringBuilder(); stringBuilder.append(String.format(\"V: %d, E: %d\\n\", this.V, this.E)); for (int v = 0; v &lt; this.V; v++) &#123; stringBuilder.append(String.format(\"%d : \", v)); for (int w: adj(v)) &#123; stringBuilder.append(String.format(\"%d \", w)); &#125; stringBuilder.append(\"\\n\"); &#125; return stringBuilder.toString(); &#125; public static void main(String[] args) &#123; AdjSet adjSet = new AdjSet(\"g.txt\"); System.out.println(adjSet); &#125;&#125; åœ¨æœ€åæˆ‘ä»¬åšä¸€ä¸ªæ”¹è¿›ï¼Œè§‚å¯Ÿä¸‰ä¸ªç±»çš„ adj æ–¹æ³• // AdjMatrixpublic ArrayList&lt;Integer&gt; adj(int v) &#123; validateVertex(v); ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; this.V; i++) &#123; if (this.matrix[v][i] == 1) &#123; res.add(i); &#125; &#125; return res;&#125;// AdjListpublic LinkedList&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return lists[v];&#125;// AdjSetpublic TreeSet&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return sets[v];&#125; è¿™ä¸‰ä¸ªæ–¹æ³•çš„è¿”å›å€¼éƒ½ä¸ç›¸åŒï¼Œè¿™å°±ä¼šç»™ä½¿ç”¨è€…å¸¦æ¥è´Ÿæ‹…ï¼Œå®ƒè¿˜éœ€è¦è®°ä½æ¯ä¸ªç±»çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Œè€ƒè™‘åˆ°ä½¿ç”¨è€…æ‹¿åˆ°ä¸é¡¶ç‚¹ $v$ ç›¸é‚»çš„æ‰€æœ‰é¡¶ç‚¹ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥éå†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å›ä¸€ä¸ªæ¥å£ Iterableï¼ŒArrayList LinkedList TreeSet ä¸‰ä¸ªç±»éƒ½å®ç°äº†è¯¥æ¥å£ï¼Œå¦‚ä¸‹ // AdjSet å…¶å®ƒä¸¤ä¸ªç±»åšç›¸åŒä¿®æ”¹public Iterable&lt;Integer&gt; adj(int v) &#123; validateVertex(v); return sets[v];&#125; æ³¨æ„ï¼šè®°å¾—è¿˜æœ‰ä¿®æ”¹ degree æ–¹æ³•ï¼Œå› ä¸ºè¿™æ˜¯ adj æ–¹æ³•è¿”å›çš„æ˜¯ Iterable æ¥å£ï¼Œè¯¥æ¥å£æ²¡æœ‰ size æ–¹æ³•ï¼Œä¿®æ”¹å¦‚ä¸‹ public int degree(int v) &#123; validateVertex(v); return this.sets[v].size();&#125; å…¶å®ƒä¸¤ä¸ªç±»åšç±»ä¼¼çš„ä¿®æ”¹ã€‚ æ€»ç»“åœ¨æ–‡ç« çš„æœ€åï¼Œæˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹ä¸‰ç§æ–¹æ³•çš„ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦ ç©ºé—´ å»ºå›¾æ—¶é—´ ä¸¤é¡¶ç‚¹æ˜¯å¦ç›¸é‚» æŸ¥æ‰¾é¡¶ç‚¹çš„é‚»è¾¹ é‚»æ¥çŸ©é˜µ $O(V^2)$ $O(E)$ $O(1)$ $O(V)$ é‚»æ¥è¡¨(LinkedList) $O(V + E)$ $O(EV)$ $O(degree)$ $O(degree)$ é‚»æ¥è¡¨(TreeSet) $O(V + E)$ $O(E\\log V)$ $O(\\log degree)$ $O(degree)$ ç”±ä¸Šå¯è§ï¼Œåº•å±‚ä½¿ç”¨ TreeSet çš„é‚»æ¥è¡¨æ¥è¡¨ç¤ºå›¾ï¼Œä»ç©ºé—´å’Œæ—¶é—´ä¸Šéƒ½éå¸¸çš„ä¼˜ç§€ï¼Œåœ¨åé¢çš„æ–‡ç« ï¼Œéƒ½å°†ä½¿ç”¨ TreeSet ç‰ˆæœ¬çš„é‚»æ¥è¡¨æ¥è¡¨ç¤ºå›¾ã€‚ åé¢ä¸ºäº†å±è”½å·®å¼‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Graph çš„æ¥å£ï¼Œè¿™ä¸‰ä¸ªç±»éƒ½å®ç° Graph æ¥å£ï¼ŒGraph æ¥å£å¦‚ä¸‹ public interface Graph &#123; int V(); int E(); int degree(int v); boolean hasEdge(int v, int w); Iterable&lt;Integer&gt; adj(int v);&#125;","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"DOMèŠ‚ç‚¹","date":"2020-09-29T02:25:00.000Z","path":"/DOMèŠ‚ç‚¹/","text":"DOM çš„å…¨ç§°ä¸º Document Object Modelï¼Œç¿»è¯‘ä¸ºå¯¹è±¡æ–‡æœ¬æ¨¡å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªé’ˆå¯¹äº HTML çš„ APIï¼Œå®ƒå°† HTML æ–‡æ¡£æç»˜ä¸ºä¸€æ£µå±‚æ¬¡åŒ–çš„æ ‘ï¼ŒDOM è§„èŒƒäº†æ“ä½œè¿™ä¸ªæ–‡æ¡£æ ‘çš„è§„èŒƒï¼Œä¾‹å¦‚æ·»åŠ ã€åˆ é™¤ã€ç§»åŠ¨ç­‰ç­‰æ“ä½œã€‚æ‰€æœ‰çš„æµè§ˆå™¨éƒ½å®ç°äº†(é™¤äº†æ—©ç‰ˆæœ¬çš„ IE) DOM è§„èŒƒï¼Œè¿™æ„å‘³ç€å¼€å‘äººå‘˜åœ¨æ‰€æœ‰çš„æµè§ˆå™¨ä¸­å†™çš„ä»£ç éƒ½æ˜¯ä¸€æ ·ï¼Œä¸åŒä¸ºæ¯ä¸€ä¸ªæµè§ˆå™¨å†™ç€ä¸åŒçš„ä»£ç (è¿™å°±æ˜¯æ ‡å‡†å¸¦æ¥çš„å¥½å¤„)ã€‚ ä¸‹é¢ç»™å‡ºäº† HTML æ–‡æ¡£ç¿»è¯‘æˆ DOM æ ‘çš„ä¾‹å­ document èŠ‚ç‚¹æ˜¯æ¯ä¸€ä¸ªæ–‡æ¡£çš„æ ¹èŠ‚ç‚¹ï¼ŒHTML æ–‡æ¡£ä¸­çš„å…ƒç´ éƒ½ä¼šè¢«è½¬åŒ–ä¸º DOM æ ‘ä¸­çš„èŠ‚ç‚¹ã€‚ NodeDOM è§„å®šäº†ä¸€ä¸ª Node ç±»å‹çš„æ¥å£ï¼ŒDOM æ ‘ä¸Šçš„èŠ‚ç‚¹éƒ½å®ç°äº†è¯¥ç±»å‹ï¼Œå› æ­¤æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æœ‰ç€ Node æ¥å£ä¸­è§„å®šçš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬å°±å…·ä½“ä»‹ç»ä¸€ä¸‹ Node ç±»å‹ã€‚ èŠ‚ç‚¹ä¿¡æ¯è™½ç„¶ HTML å…ƒç´ ä»¥åŠæ–‡æœ¬å†…å®¹éƒ½ä¼šè¢«è½¬åŒ–ä¸ºèŠ‚ç‚¹ï¼Œä½†æ˜¯æ˜æ˜¾ document èŠ‚ç‚¹ï¼ŒHTML å…ƒç´ èŠ‚ç‚¹ï¼Œä»¥åŠæ–‡æœ¬èŠ‚ç‚¹ç­‰ç­‰å®ƒä»¬ä¹‹é—´çš„åœ°ä½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ„å‘³ç€è™½ç„¶å¤§å®¶éƒ½æ˜¯ Node ç±»å‹çš„å¯¹è±¡ï¼Œä½†æ˜¯å´æœ‰ç€ä¸åŒï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ç€è‡ªå·±çš„ç±»å‹ï¼Œè€Œ nodeType å±æ€§æ­£æ˜¯ç”¨æ¥è¡¨æ˜èŠ‚ç‚¹ç±»å‹çš„ã€‚ nodeType çš„å€¼ä¸ºæ•°å­—ç±»å‹ï¼Œæ ¹æ® nodeType çš„å€¼ä¸åŒï¼ŒèŠ‚ç‚¹ç±»å‹åˆ†ä¸º 12 ç§ï¼Œå¦‚ä¸‹ Node.ELEMENT_NODE(1) Node.ATTRIBUTE_NODE(2) Node.TEXT_NODE(3) Node.CDATA_SECTION_NODE(4) Node.ENTITY_REFERENCE_NODE(5) Node.ENTITY_NODE(6) Node.PROCESSING_NODE(7) Node.COMMENT_NODE(8) Node.DOCUMENT_NODE(9) Node.DOCUMENT_TYPE_NODE(10) Node.DOCUMENT_FRAGMENT_NODE(11) Node.NOTATION_NODE(12) çœ‹åˆ°ä¸Šé¢ç½—åˆ—çš„ä¸€å¤§å †èŠ‚ç‚¹ç±»å‹ï¼Œä½ å†…å¿ƒè‚¯å®šå·²ç»å“å°¿äº†ï¼Œä½†æ˜¯ä¸Šé¢åˆ—å‡ºæ¥çš„èŠ‚ç‚¹ç±»å‹å¹¶ä¸æ˜¯æ¯ä¸ªéƒ½å¾ˆé‡è¦ï¼Œæœ‰çš„è¿™è¾ˆå­å¯èƒ½éƒ½ä¸ä¼šé‡åˆ°ï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¸­åªä¼šè®²è§£å¸¸ç”¨çš„å‡ ç§èŠ‚ç‚¹ç±»å‹ã€‚ ä¸Šé¢è¿™äº› Node å¸¸é‡ï¼Œä¸åé¢å¯¹åº”æ‹¬å·ä¸­çš„æ•°å­—çš„å€¼ç›¸ç­‰ï¼Œå¦‚ Node.ELEMENT_NODE == 1; // true é™¤äº† nodeType å±æ€§ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ nodeName å’Œ nodeValue æ¥äº†è§£èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œè¿™ä¸¤ä¸ªå±æ€§å…·ä½“çš„å–å€¼ï¼Œä¸å…·ä½“çš„èŠ‚ç‚¹ç±»å‹æœ‰å…³ï¼Œä¸åŒç±»å‹çš„ Node èŠ‚ç‚¹ï¼Œå–å€¼æœ‰æ‰€ä¸åŒï¼Œåœ¨åé¢ä»‹ç»å…·ä½“çš„èŠ‚ç‚¹ç±»å‹æ—¶ï¼Œå°†ä¼šæåˆ°å®ƒä»¬ã€‚ èŠ‚ç‚¹å…³ç³»DOM æ ‘å€Ÿé‰´äº†å®¶åº­æ—è°±çš„æ¦‚å¿µï¼Œä½¿ç”¨çˆ¶äº²ã€å­©å­ã€å…„å¼Ÿç­‰äº²å±å…³ç³»æ¥æè¿°èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬å°†å¯¹å¦‚ä¸‹ DOM æ ‘æ¥æè¿°èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³» æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª childNodes å±æ€§ï¼Œå®ƒä¿å­˜ç€å®ƒçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œè¯¥å±æ€§æ˜¯ä¸€ä¸ª NodeList å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°å­—ä¸‹æ ‡æ¥è®¿é—®çˆ¶èŠ‚ç‚¹ä¸­çš„æŸä¸ªå­èŠ‚ç‚¹ï¼Œä½†å®ƒä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚ å¯¹äºä¸Šå›¾æ¥è¯´ï¼Œdiv èŠ‚ç‚¹çš„ childNodes å°±æ˜¯ç”±å®ƒçš„ä¸‰ä¸ªå­èŠ‚ç‚¹ span h1 img ç»„æˆçš„ NodeListï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ ‡æ˜¯è·å–å®ƒçš„å­èŠ‚ç‚¹ï¼Œä¾‹å¦‚ div.childNodes[0] ==&gt; spandiv.childNodes[1] ==&gt; h1div.childNodes[2] ==&gt; img æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª parentNodeï¼Œè¯¥å±æ€§çš„å€¼æ˜¯è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä¾‹å¦‚å¯¹äºä¸Šå›¾ï¼Œspan h1 img çš„çˆ¶èŠ‚ç‚¹éƒ½æ˜¯ div èŠ‚ç‚¹ï¼Œå³ span.parentNode == h1.parentNode == img.parentNode == div; é€šè¿‡èŠ‚ç‚¹çš„ previousSibling å’Œ nextSibling å±æ€§å¯ä»¥è®¿é—®è¯¥èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œæ­£å¦‚å®ƒä»¬åå­—æ‰€æš—ç¤ºçš„é‚£æ ·ï¼ŒpreviousSibling æ˜¯è¡¨ç¤ºè¯¥èŠ‚ç‚¹çš„å‰èŠ‚ç‚¹ï¼ŒnextSibling è¡¨ç¤ºè¯¥èŠ‚ç‚¹åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æ²¡æœ‰å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆ previousSibling çš„å–å€¼ä¸º nullï¼Œå¯¹äº nextSibling ä¹Ÿæ˜¯åŒç†ï¼Œå¦‚ä¸‹ h1.previousSibling == span;h1.nextSibling == img;img.nextSibling == null; // img åé¢æ²¡æœ‰èŠ‚ç‚¹ï¼Œæ‰€ä»¥ nextSibling å±æ€§å€¼ä¸º null æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ firstChild å’Œ lastChild å±æ€§ï¼Œå®ƒä»¬çš„å€¼åˆ†åˆ«ä»£è¡¨çš„æ˜¯è¯¥èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­©å­èŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªå­©å­èŠ‚ç‚¹ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå±æ€§çš„å€¼ä¸º nullï¼Œå¦‚ä¸‹ div.firstChild == span;div.lastChild == img;span.firstChild == null; æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ª ownerDocument å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘è¯¥èŠ‚ç‚¹æ‰€åœ¨æ–‡æ¡£çš„ document èŠ‚ç‚¹ã€‚ ä¸‹å›¾å½¢è±¡çš„å±•ç¤ºäº†èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³» æ“ä½œèŠ‚ç‚¹Node æ¥å£æä¾›äº†å‡ ä¸ªæ–¹æ³•ç”¨ä»¥æ“ä½œèŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ·»åŠ èŠ‚ç‚¹ï¼Œåˆ é™¤èŠ‚ç‚¹ï¼Œç§»åŠ¨èŠ‚ç‚¹ç­‰ç­‰ã€‚ appendChildè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œä¸º Node ç±»å‹çš„èŠ‚ç‚¹ï¼Œè€Œè¯¥æ–¹æ³•çš„ä½œç”¨å°±æ˜¯å°†æ¥æ”¶çš„èŠ‚ç‚¹æ·»åŠ ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ æ­¤æ—¶æ–°æ·»åŠ çš„èŠ‚ç‚¹ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³ div.lastChild == a; å¦‚æœæ·»åŠ çš„èŠ‚ç‚¹æ˜¯å·²ç»å­˜åœ¨äºæ–‡æ¡£æ ‘ä¸­çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šå°†è¯¥èŠ‚ç‚¹ç§»åŠ¨åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå‡è®¾æœ‰å¦‚ä¸‹çš„ DOM æ ‘ï¼Œç°åœ¨æˆ‘ä»¬å°†èŠ‚ç‚¹ img æ·»åŠ åˆ° div çš„å­èŠ‚ç‚¹ä¸­ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ç›¸å½“äºå°† h2 ä¸‹çš„ img ç§»åŠ¨åˆ° div ä¸‹ ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹éƒ½åªèƒ½æœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ã€‚ insertBeforeappendChild æ–¹æ³•æ˜¯å°†èŠ‚ç‚¹æ’å…¥åˆ°æœ€åé¢ï¼Œè€Œ insertBefore åˆ™æ˜¯å°†èŠ‚ç‚¹æ’å…¥åˆ°æŸä¸ªèŠ‚ç‚¹ä¹‹å‰ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªèŠ‚ç‚¹æ’å…¥åˆ°ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºçš„èŠ‚ç‚¹çš„å‰é¢ åŒç†ï¼Œå¦‚æœæ·»åŠ çš„èŠ‚ç‚¹ä¹Ÿåœ¨æ–‡æ¡£æ ‘ç§ï¼Œé‚£ä¹ˆä¼šå°†è¯¥èŠ‚ç‚¹ç§»åŠ¨ï¼Œä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¸å¯èƒ½æœ‰ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹ã€‚ removeChildremoveChild æ˜¯ç”¨æ¥åˆ é™¤èŠ‚ç‚¹çš„ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯ä½ è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œè¢«åˆ é™¤çš„èŠ‚ç‚¹å°†ä¼šä½œä¸ºè¿”å›å€¼è¿”å›ï¼Œå¦‚ä¸‹å›¾ è¢«åˆ é™¤çš„èŠ‚ç‚¹ä»ç„¶å±äºæ–‡æ¡£æ ‘ï¼Œä½†æ˜¯åœ¨æ–‡æ¡£æ ‘ä¸­å·²ç»æ²¡æœ‰äº†å®ƒçš„ä½ç½®ã€‚ replaceChildreplaceChild å‚æ•°æ˜¯ç”¨ä¸€ä¸ªèŠ‚ç‚¹æ›¿æ¢ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œæ–°çš„èŠ‚ç‚¹ä»¥åŠè¢«æ›¿æ¢çš„èŠ‚ç‚¹ å…¶ä»–æ–¹æ³•cloneNodecloneNode æ–¹æ³•ä»åå­—å¯ä»¥çœ‹å‡ºï¼Œè¯¥æ–¹æ³•æ˜¯å°†è‡ªå·±å…‹éš†ä¸€ä»½ï¼Œå¹¶è¿”å›ã€‚å¤åˆ¶åçš„èŠ‚ç‚¹å½’æ–‡æ¡£æ‰€æœ‰ï¼Œä½†æ˜¯æ²¡æœ‰ä¸ºè¯¥èŠ‚ç‚¹æŒ‡å®šçˆ¶èŠ‚ç‚¹ã€‚ è¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª bool ç±»å‹çš„å‚æ•°ï¼Œå½“ä¼ å…¥ä¸º false æ—¶ï¼Œè¡¨ç¤ºçš„æ˜¯æµ…å¤åˆ¶ï¼Œå½“ä¼ å…¥çš„å‚æ•°ä¸º true æ—¶ï¼Œè¡¨ç¤ºçš„æ˜¯æ·±å¤åˆ¶ã€‚æµ…å¤åˆ¶åªä¼šå¤åˆ¶å½“å‰èŠ‚ç‚¹ï¼Œä¸ä¼šå¤åˆ¶è¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œè€Œæ·±å¤åˆ¶ä¸ä»…ä¼šå¤åˆ¶å½“å‰èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¼šå¤åˆ¶å½“å‰èŠ‚ç‚¹ä¸‹é¢çš„å­èŠ‚ç‚¹ã€‚ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰è¿™ä¸ªä¸€ä¸ª HTML ç»“æ„ &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt;&lt;/ul&gt; å½“æˆ‘ä»¬å¯¹ ul è¿›è¡Œå¤åˆ¶ï¼Œå¦‚æœæ˜¯æµ…å¤åˆ¶ let newUl = ul.cloneNode(false); é‚£ä¹ˆ newUl ä¸º &lt;ul&gt;&lt;/ul&gt; é‡Œé¢æ²¡æœ‰ä»»ä½•çš„å†…å®¹ï¼Œä½†æ˜¯å¦‚æœæ˜¯æ·±å¤åˆ¶çš„è¯ï¼Œåˆ™ä¼šå°†å…¶å­èŠ‚ç‚¹(ä»¥åŠå­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹)ä¹Ÿå¤åˆ¶è¿‡æ¥ let newUl = ul.cloneNode(true); è¿™æ—¶ newUl ä¸º &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt; &lt;li&gt;&lt;/li&gt;&lt;/ul&gt; normalizeè¯¥æ–¹æ³•æ˜¯ç”¨æ¥å¤„ç†èŠ‚ç‚¹ä¸­çš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œå®ƒä¼šå°†ç©ºç™½èŠ‚ç‚¹åˆ é™¤ï¼Œä»¥åŠå°†è¿ç»­çš„ä¸¤ä¸ªæ–‡æœ¬èŠ‚ç‚¹åˆå¹¶ä¸ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ Documentç°åœ¨ä»‹ç»æ–‡æ¡£çš„æ ¹èŠ‚ç‚¹ documentï¼Œå®ƒçš„ç›¸å…³å±æ€§å¦‚ä¸‹ å±æ€§ å€¼ nodeType 9 nodeName #document nodeValue null æ–‡æ¡£ä¿¡æ¯ä¸‹é¢å°†ä»‹ç»å‡ ä¸ªå±æ€§ï¼Œè¿™å‡ ä¸ªå±æ€§åŒ…å«äº†æ–‡æ¡£çš„ä¸€äº›ä¿¡æ¯ã€‚ titledocument.title å±æ€§ä¿å­˜çš„æ˜¯æ ‡ç­¾ &lt;title&gt; ä¸­çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ document.title è·å¾—æ–‡æ¡£çš„æ ‡é¢˜ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ document.title æ¥æ”¹å˜æ–‡æ¡£çš„æ ‡é¢˜ let originTitle = document.title; // è·å¾—æ–‡æ¡£çš„æ ‡é¢˜document.title = \"New Page Title\"; // ä¸ºæ–‡æ¡£è®¾ç½®æ–°çš„æ ‡é¢˜ ä¸‹é¢çš„ä¸‰ä¸ªå±æ€§ä¸ç½‘é¡µçš„è¯·æ±‚æœ‰å…³ å±æ€§ å€¼ URL é¡µé¢å®Œæ•´çš„ URLï¼Œä¸ location.href çš„å€¼ç›¸åŒ domain é¡µé¢çš„åŸŸå referrer é“¾æ¥å½“å‰ç½‘é¡µçš„é‚£ä¸ªé¡µé¢çš„ URLï¼Œå¦‚æœæ²¡æœ‰æ¥æºé¡µé¢ï¼Œå€¼ä¸ºç©ºå­—ç¬¦ä¸² æŸ¥æ‰¾å…ƒç´ document å¯¹è±¡æœ‰ä¸‰ä¸ªæ–¹æ³•å¯ä»¥è·å¾—æ–‡æ¡£æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ getElementById() getElementsByTagName() getElementsByName() ä¸‹é¢å°±å°†å…·ä½“ä»‹ç»è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚ getElementByIdè¯¥æ–¹æ³•æ ¹æ® id å€¼æ¥è·å¾—æ–‡æ¡£æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¾‹å¦‚å¯¹äºä¸‹é¢çš„ HTML ä»£ç  &lt;div id=\"box\"&gt;&lt;/div&gt; ä¸Šé¢çš„ div å…ƒç´ æœ‰ä¸€ä¸ª id å±æ€§ï¼Œå®ƒçš„å€¼ä¸º boxï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥è·å¾—è¯¥èŠ‚ç‚¹ let box = document.getElementById(\"box\"); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ–‡æ¡£æœ‰å¤šä¸ªèŠ‚ç‚¹å®ƒä»¬çš„ id ç›¸åŒï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ getElementById å»æŸ¥æ‰¾èŠ‚ç‚¹æ—¶ï¼Œä¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„èŠ‚ç‚¹ã€‚ getElementsByTagNameè¯¥æ–¹æ³•æ ¹æ®æ ‡ç­¾åæ¥è·å¾—æ–‡æ¡£æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª HTMLCollectionï¼Œä¸ NodeList ç±»ä¼¼ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªç±»æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®è¯¥å¯¹è±¡åŒ…å«çš„å…ƒç´ ã€‚ let images = document.getElementsByTagName(\"img\"); // è·å¾—æ–‡æ¡£ä¸­æ‰€ä»¥çš„ img èŠ‚ç‚¹ æˆ‘ä»¬è·å¾— images æ˜¯ä¸€ä¸ª HTMLCollection å¯¹è±¡ï¼Œå®ƒé™¤äº†å¯ä»¥ä½¿ç”¨ä¸‹æ ‡çš„å½¢å¼è·å¾—é›†åˆä¸­çš„å…ƒç´ ï¼Œè¿˜å¯ä»¥é€šè¿‡ namedItem æ¥è·å¾—ç›¸åº”çš„å…ƒç´ ï¼Œå‡è®¾æ–‡æ¡£ä¸­æœ‰ä¸€ä¸ª img å¦‚ä¸‹ &lt;img name=\"img1\" src=\"\" /&gt; è¯¥ img æœ‰ä¸€ä¸ª name å±æ€§ä¸º img1ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥è·å¾—è¯¥èŠ‚ç‚¹ images.namedItem(\"img1\"); getElementByNameè¯¥æ–¹æ³•æ˜¯æ ¹æ® name å±æ€§æ¥è·å¾—èŠ‚ç‚¹çš„ï¼Œè¯¥æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª NodeListï¼Œä¸€èˆ¬è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥å–å¾—å•é€‰æŒ‰é’®ï¼Œå› ä¸ºå•é€‰æŒ‰é’®å¿…é¡»æ‹¥æœ‰ç›¸åŒçš„ name å±æ€§ã€‚å‡è®¾æœ‰å¦‚ä¸‹å•é€‰æŒ‰é’® &lt;input type=\"ratio\" value=\"green\" name=\"color\" /&gt;&lt;input type=\"ratio\" value=\"red\" name=\"color\" /&gt;&lt;input type=\"ratio\" value=\"blue\" name=\"color\" /&gt; æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•è·å¾—æ‰€ä»¥çš„å•é€‰æŒ‰é’® document.getElementsByName(\"color\"); åˆ›å»ºèŠ‚ç‚¹æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ document æ¥åˆ›å»ºå…¶å®ƒç±»å‹çš„èŠ‚ç‚¹ï¼Œå¦‚ createElement createTextNode createDocumentFeagment å…·ä½“çš„ä¿¡æ¯å°†åœ¨åé¢è¿›è¡Œä»‹ç»ã€‚ ElementElement ç±»å‹æ˜¯ HTML ä¸­çš„æ ‡ç­¾æ‰€è¡¨ç¤ºçš„èŠ‚ç‚¹ç±»å‹ï¼Œå¦‚ div h1 æ ‡ç­¾ï¼Œå®ƒæ˜¯é™¤ Document ç±»å‹å¤–ï¼Œæœ€å¸¸ä½¿ç”¨çš„ç±»å‹ã€‚Element å…ƒç´ æä¾›äº†å¯¹å…ƒç´ æ ‡ç­¾åã€å­èŠ‚ç‚¹ä»¥åŠ attribute è®¿é—®çš„èƒ½åŠ›ã€‚ æœ‰å…³ Element ç±»å‹çš„ä¿¡æ¯å¦‚ä¸‹ å±æ€§ å€¼ nodeType 1 nodeName å…ƒç´ æ ‡ç­¾å(å¤§å†™)ï¼Œå¦‚ DIV nodeValue null é™¤äº†å¯ä»¥é€šè¿‡ nodeName è®¿é—®å…ƒç´ çš„æ ‡ç­¾åï¼Œè¿˜å¯ä»¥é€šè¿‡ tagName è®¿é—®å…ƒç´ çš„æ ‡ç­¾åï¼ŒäºŒè€…çš„è¿”å›å€¼æ˜¯ä¸€æ ·çš„(ä½¿ç”¨åè€…ä¸»è¦æ˜¯ä¸ºäº†æ¸…æ™°èµ·è§)ã€‚ HTMLElementæ‰€æœ‰çš„ HTML å…ƒç´ éƒ½ç”± HTMLElement è¡¨ç¤ºï¼ŒHTMLElement ç»§æ‰¿è‡ª Elementï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æ‰©å±•äº†å‡ ä¸ªå±æ€§ å±æ€§ å€¼ id å…ƒç´ åœ¨æ–‡æ¡£ä¸­çš„å”¯ä¸€æ ‡è¯†ç¬¦ className ä¸å…ƒç´ çš„ class å±æ€§å¯¹åº” title å…ƒç´ çš„é™„åŠ ä¿¡æ¯ lang å…ƒç´ å†…å®¹çš„è¯­è¨€ä»£ç ï¼Œå¾ˆå°‘ä½¿ç”¨ dir å…ƒç´ çš„æ–¹å‘ï¼Œé»˜è®¤ä¸º ltr(ä»å·¦å¾€å³)ï¼Œå¾ˆå°‘ä½¿ç”¨ attributeä¸‹é¢å°†ä»‹ç»æœ‰å…³æ“ä½œå…ƒç´  attribute çš„æœ‰å…³æ–¹æ³•åŠå±æ€§ã€‚ä¸ attribute æœ‰å…³çš„æ–¹æ³•å¦‚ä¸‹ getAttribute setAttribute removeAttribute è¿™äº›æ–¹æ³•å¯ä»¥å¯¹ä»»ä½• attribute è¿›è¡Œä½¿ç”¨ï¼ŒåŒ…æ‹¬ HTMLElement å®šä¹‰çš„ attribute æˆ–è€…è‡ªå·±è‡ªå®šä¹‰çš„ attributeã€‚æœ‰å¦‚ä¸‹ HTML ä»£ç  &lt;div class=\"container\" id=\"box\"&gt; &lt;/div&gt; getAttribute æ˜¯ç”¨æ¥è·å¾—èŠ‚ç‚¹çš„ attribute let box = document.getElementById(\"box\");let classValue = box.getAttribute(\"class\"); // container setAttribute æ˜¯ç”¨æ¥æ¥è®¾ç½®èŠ‚ç‚¹çš„ attributeï¼Œå¦‚æœè®¾ç½®çš„ attributeï¼Œåˆ™ä¼šè¿›è¡Œæ›¿æ¢ box.setAttribute(\"class\", \"active\");box.getAttribute(\"class\"); // active removeAttribute æ˜¯ç”¨æ¥åˆ é™¤èŠ‚ç‚¹çš„ attribute box.removeAttribute(\"class\"); è¿™ä¸ªæ–¹æ³•ä¸ä»…ä¼šæ¸…é™¤ attributeï¼Œè€Œä¸”ä¼šå°† attribute ä»å…ƒç´ ä¸­å½»åº•åˆ é™¤ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä¸å¤ªå¸¸ç”¨ã€‚ é™¤äº†é€šè¿‡ä¸Šé¢çš„ä¸‰ä¸ªæ–¹æ³•æ“ä½œå…ƒç´ çš„ attributeï¼Œè¿˜å¯ä»¥é€šè¿‡å…ƒç´ çš„ attributes å±æ€§æ¥è®¿é—®å…ƒç´ çš„ attributeï¼Œå…ƒç´ çš„ attributes å±æ€§æ˜¯ä¸€ä¸ª NamedNodeMapï¼Œå®ƒåŒ HTMLCollection å’Œ NodeList ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¼ªæ•°ç»„ï¼Œå…¶ä¸­å­˜å‚¨çš„æ˜¯ä¸€ä¸ªä¸ª Attr èŠ‚ç‚¹(æ²¡é”™ï¼Œå…ƒç´ çš„ attribute ä¹Ÿæ˜¯ä¸€ç§èŠ‚ç‚¹)ï¼›NamedNodeMap æä¾›ä»¥ä¸‹æ–¹æ³•æ¥æ“ä½œ attribute getNamedItem setNamedItem removeNamedItem item å‰é¢ä¸‰ä¸ªæ–¹æ³•éƒ½æ ¹æ® Attr èŠ‚ç‚¹çš„ nodeName æ¥è®¿é—®(å³ attribute çš„åå­—)æ¥æ“ä½œ attributeï¼Œå¦‚ let attributes = box.attributes; // è·å¾— box çš„ attributes å±æ€§let classValue = attributes.getNamedItem(\"class\"); // containerattributes.setNamedItem(\"class\", \"active\");attributes.removeNamedItem(\"class\"); æœ€åä¸€ä¸ªæ–¹æ³•æ˜¯æ ¹æ®ä¸‹æ ‡æ¥è·å¾— attributes ä¸­çš„ Attr èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ–¹æ³•ä¸é€šè¿‡æ•°ç»„ä¸‹æ ‡çš„å½¢å¼è·å¾—çš„ç»“æœæ˜¯ä¸€æ ·çš„ attributes.item(2) == attributes[2]; åˆ›å»ºå…ƒç´ åˆ›å»ºå…ƒç´ æ˜¯å±äº document å¯¹è±¡çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨ document.createElement æ¥åˆ›å»ºä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†è¯¥å…ƒç´ èŠ‚ç‚¹è¿”å›ï¼Œä¾‹å¦‚ let div = document.createElement(\"div\"); // åˆ›å»ºä¸€ä¸ª div å…ƒç´ èŠ‚ç‚¹div.id = \"box\";div.className = \"container\"; ä¸Šé¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª div èŠ‚ç‚¹å…ƒç´ ï¼Œå¹¶ä¸”ä¸ºè¯¥èŠ‚ç‚¹è®¾ç½®äº† id å’Œ className(å³ class å±æ€§)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ appendChild å°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­ï¼Œå¦‚ document.body.appendChild(div); Textæ–‡æœ¬èŠ‚ç‚¹ä½¿ç”¨ Text ç±»å‹è¿›è¡Œè¡¨ç¤ºï¼Œå®ƒçš„ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ å±æ€§ å€¼ nodeType 3 nodeName #text nodeValue èŠ‚ç‚¹æ‰€åŒ…å«çš„æ–‡æœ¬ Text ç±»å‹çš„èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥æ“ä½œèŠ‚ç‚¹ appendData(text)ï¼šå‘èŠ‚ç‚¹ä¸­æ·»åŠ æ–‡æœ¬ text deleteData(offset, count)ï¼šä» offset å¼€å§‹åˆ é™¤ count ä¸ªæ–‡æœ¬ insertData(offset, text)ï¼šåœ¨ offset åæ’å…¥æ–‡æœ¬ text replaceData(offset, count, text)ï¼šä» offset å¼€å§‹ï¼Œå°† count ä¸ªæ–‡æœ¬æ›¿æ¢ä¸º text splitText(offset)ï¼šä»¥ offset ä¸ºç•Œï¼Œå°†æ–‡æœ¬åˆ†å‰²ä¸ºä¸¤ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œå¹¶å°†ç¬¬äºŒä¸ªæ–‡æœ¬èŠ‚ç‚¹è¿”å› substringData(offset, count)ï¼šå–å¾—ä» offset å¼€å§‹çš„ count ä¸ªæ–‡æœ¬ å‡è®¾æœ‰ä¸‹é¢çš„ HTML ä»£ç  &lt;div&gt;Hello World&lt;/div&gt; div å…ƒç´ èŠ‚ç‚¹ä¸­æœ‰ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œé‡Œé¢çš„æ–‡æœ¬å†…å®¹ä¸º Hello World let text = div.firstChild; // Text èŠ‚ç‚¹æ˜¯ div çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹text.appendData(\"!\"); // Hello World!text.deleteData(0, 6); // ä» 0 å¼€å§‹ï¼Œåˆ é™¤ 6 ä¸ªå­—ç¬¦ ==&gt; World!text.insertData(0, \"Hello \"); // åœ¨ 0 å‰é¢æ’å…¥æ–‡æœ¬ï¼Œ Hello_(_ä»£è¡¨ç©ºæ ¼) =&gt; Hello World!text.replaceData(0, 5, \"Hi\"); // ä» 0 å¼€å§‹å°†å 5 ä¸ªå­—ç¬¦æ›¿æ¢ä¸º Hi =&gt; Hi World!let newText = text.splitText(3); // ä»¥ 3 ä¸ºç•Œï¼Œåˆ†ä¸ºä¸¤ä¸ªæ–‡æœ¬èŠ‚ç‚¹ =&gt;1. Hi_(_ä»£è¡¨ç©ºæ ¼) 2. World!newText.substringData(0, 1); // W æˆ‘ä»¬å¯ä»¥é€šè¿‡ document å¯¹è±¡çš„ createTextNode æ¥åˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³æ–‡æœ¬èŠ‚ç‚¹æ‰€åŒ…å«çš„æ–‡æœ¬ let text = document.createTextNode(\"JavaScript\"); æ¥ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡ appendChild æ–¹æ³•å°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­ã€‚ DocumentFragmentåœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸­ï¼Œåªæœ‰ DocumentFragment åœ¨æ–‡æ¡£ä¸­æ²¡æœ‰å¯¹åº”çš„æ ‡è®°ã€‚DOM è§„å®š DocumentFragment æ˜¯ä¸€ç§è½»é‡çº§çš„æ–‡æ¡£ï¼Œå®ƒå¯ä»¥åŒ…å«å’Œæ§åˆ¶èŠ‚ç‚¹ï¼Œä½†æ˜¯ä¸ä¼šçœŸæ­£çš„æ–‡æ¡£å ç”¨é¢å¤–çš„èµ„æºï¼Œå®ƒçš„ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ å±æ€§ å€¼ nodeType 11 nodeName #document-fragment nodeValue null ä¸€èˆ¬å°† DocumentFragment å½“åšä¸€ä¸ªä»“åº“æ¥ä½¿ç”¨ï¼Œå°†è¦æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­çš„èŠ‚ç‚¹å…ˆæ·»åŠ åˆ° DocumentFragment ä¸­ï¼Œå› ä¸ºå¦‚æœå¤§æ‰¹é‡çš„å‘æ–‡æ¡£æ ‘ç§æ·»åŠ èŠ‚ç‚¹æ—¶ï¼Œå¦‚æœä¸€ä¸ªä¸ªåƒæµè§ˆå™¨æ·»åŠ èŠ‚ç‚¹ï¼Œå°±ä¼šå¯¼è‡´æµè§ˆå™¨åå¤æ¸²æŸ“ï¼Œå¦‚æœæˆ‘ä»¬å°†èŠ‚ç‚¹å…ˆæ·»åŠ åˆ° DocumentFragment ä¸­ï¼Œç„¶ååœ¨å°† DocumentFragment æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­ï¼ŒDocumentFragment ä¼šå°†å®ƒåŒ…å«çš„èŠ‚ç‚¹ä¸€æ¬¡æ€§æ·»åŠ åˆ°æ–‡æ¡£æ ‘(DocumentFragment å¹¶ä¸ä¼šè¢«æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­)ï¼Œè¿™æ ·å¯ä»¥æé«˜æµè§ˆå™¨çš„æ€§èƒ½ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ document.createDocumentFragment æ¥åˆ›å»ºä¸€ä¸ª DocumentFragmentï¼Œæœ‰ä¸‹é¢çš„ä¸€ä¸ª ul èŠ‚ç‚¹ï¼Œ &lt;ul id=\"list\"&gt; &lt;/ul&gt; æˆ‘ä»¬éœ€è¦å°†ä¸‹é¢çš„èŠ‚ç‚¹æ·»åŠ åˆ°æ–‡æ¡£æ ‘ä¸­ &lt;li&gt;item1&lt;/li&gt;&lt;li&gt;item2&lt;/li&gt;&lt;li&gt;item3&lt;/li&gt; æˆ‘ä»¬å¯ä»¥å…ˆå°† li å…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ª DocumentFragment ä¸­ï¼Œç„¶ååœ¨æ·»åŠ åˆ°æ–‡æ¡£æ•°ä¸­ï¼Œå¦‚ä¸‹ let ul = document.getElementById(\"list\");// åˆ›å»ºä¸€ä¸ª DocumentFragmentlet fragment = document.createDocumentFragment();for(let i = 0; i &lt; 3; i++) &#123; let li = document.createElement(\"li\"); li.appendChild(document.createTextNode(\"item\" + (i + 1))); fragment.appendChild(li);&#125;ul.appendChild(fragment);","tags":[{"name":"DOM","slug":"DOM","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/DOM/"}]},{"title":"BOM","date":"2020-09-23T05:51:00.000Z","path":"/BOM/","text":"BOM æŒ‡çš„æ˜¯æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•æ“ä½œæµè§ˆå™¨(ä¸æ˜¯ç½‘é¡µ)ï¼Œä½†æ˜¯äº‹å®ä¸Šå¹¶æ²¡æœ‰æœ‰å…³äº BOM çš„æ ‡å‡†ï¼Œå¾ˆå¤šæµè§ˆå™¨å‚å•†å¯¹å…¶å®ç°ä¸ä¸€è‡´ï¼Œä¸‹é¢çš„ä¾‹å­éƒ½æ˜¯åŸºäº Chrome æµè§ˆå™¨çš„ï¼Œä½†æ˜¯å¤§å¤šæ•°å¯¹äºå…¶ä»–çš„æµè§ˆå™¨ä¹Ÿæ˜¯æˆç«‹çš„ã€‚ åœ¨æœ¬ç¯‡ä¸­ä¼šä»‹ç»ä¸æµè§ˆå™¨æœ‰å…³çš„å‡ ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬ window location history windowwindow å¯¹è±¡æœ‰ä¸¤é‡è§’è‰²ï¼š å®ƒæ˜¯ JavaScript è®¿é—®æµè§ˆå™¨çš„æ¥å£ å®ƒæ˜¯åœ¨ EcmaScript è§„èŒƒæ‰€è§„å®šçš„ Global å¯¹è±¡çš„å®ç° å…¨å±€ä½œç”¨åŸŸæ‰€æœ‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡éƒ½æ˜¯ window çš„å±æ€§ï¼Œä¾‹å¦‚ let x = 1;function sayHello() &#123; console.log(\"Hello!\");&#125;console.log(window.x); // 1window.sayHello(); // Hello! æ‰€ä»¥å¦‚æœä¸€ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨äº† thisï¼Œé‚£ä¹ˆè¿™ä¸ª this ä»£è¡¨å°±æ˜¯ window å¯¹è±¡ï¼Œä¾‹å¦‚ function copy(x) &#123; this.x = x;&#125;copy(5); ä¸Šé¢ copy å‡½æ•°çš„è°ƒç”¨ç›¸å½“äº window.copy()ï¼Œæ‰€ä»¥ copy å‡½æ•°ä¸­çš„ this å°±æ˜¯ window å¯¹è±¡ï¼Œè°ƒç”¨ä¸Šé¢çš„ copy(5) ä»¥åï¼Œåœ¨ window å¯¹è±¡ä¸‹æœ‰ä¸€ä¸ªå±æ€§ xï¼Œå®ƒçš„å€¼ä¸º 5 console.log(window.x); // 5 å…¨å±€å˜é‡ä¸ window å¯¹è±¡ä¸Šçš„å±æ€§æœ‰ä¸€ç‚¹ä¸åŒï¼Œå…¨å±€å˜é‡ä¸èƒ½é€šè¿‡ delete æ“ä½œç¬¦åˆ é™¤ï¼Œè€Œ window ä¸Šçš„å¯¹è±¡å¯ä»¥é€šè¿‡ delete æ“ä½œç¬¦åˆ é™¤ çª—å£ä½ç½®é€šè¿‡ window çš„ä»¥ä¸‹å±æ€§ï¼Œå¯ä»¥çŸ¥é“çª—å£çš„ä½ç½® å±æ€§ åŠŸèƒ½ screenLeft æˆ–è€… screenX è¡¨ç¤ºçª—å£ç¦»å±å¹•å·¦è¾¹çš„è·ç¦» screenTop æˆ–è€… screenY è¡¨ç¤ºçª—å£ç¦»å±å¹•é¡¶éƒ¨çš„è·ç¦» å»ºè®®ä½¿ç”¨ screenLeft å’Œ screenTop ä¸¤ä¸ªå±æ€§ã€‚ çª—å£å¤§å°é€šè¿‡ä»¥ä¸‹å±æ€§è·å¾—çª—å£çš„å¤§å° å±æ€§ åŠŸèƒ½ innerWidth é¡µé¢çš„å®½åº¦ innerHeight é¡µé¢çš„é«˜åº¦ï¼Œä¸åŒ…æ‹¬å·¥å…·æ å’Œè°ƒè¯•å° outerWidth æµè§ˆå™¨çš„å®½åº¦ outerHeight æµè§ˆå™¨çš„é«˜åº¦ï¼ŒåŒ…æ‹¬å·¥å…·æ å’Œè°ƒè¯•å° å› ä¸ºæµè§ˆå™¨åœ¨æ¨ªå‘æ²¡æœ‰å·¥å…·æ ç­‰éƒ¨ä»¶ï¼Œæ‰€ä»¥ innerWidth å’Œ outerWidth åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚ é™¤äº†é€šè¿‡ä¸Šé¢çš„å±æ€§å¾—åˆ°çª—å£çš„å¤§å°ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ document.documentElement å¯¹è±¡çš„ clientWidth å’Œ clientHeight å±æ€§ä»¥åŠ document.body å¯¹è±¡çš„ clientWidth å’Œ clientHeight å±æ€§æ¥å¾—åˆ°é¡µé¢çš„çª—å£ä¿¡æ¯ï¼Œä¸è¿‡æˆ‘è¯•éªŒäº†ä¸€ä¸‹ï¼Œå‘ç°å®ƒä»¬çš„å€¼å¹¶ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥æˆ‘å»ºè®®è¿˜æ˜¯åªä½¿ç”¨ innerXxx å’Œ outerXxxã€‚ æ‰“å¼€çª—å£é€šè¿‡ window.open æ–¹æ³•å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ–°çš„çª—å£ï¼Œè¯¥æ–¹æ³•æ¥æ”¶å››ä¸ªå¯é€‰å‚æ•° å‚æ•° å«ä¹‰ url è¦åŠ è½½çš„ URL name è§„å®šçª—å£çš„ target å±æ€§æˆ–è€…è®¾å®šçª—å£çš„åå­— feature ç‰¹æ€§å­—ç¬¦ replace è¡¨ç¤ºåœ¨ history ä¸­åˆ—è¡¨ä¸­æ˜¯æ–°å¢ä¸€æ¡è®°å½•ï¼Œè¿˜æ˜¯æ›¿ä»£å½“å‰çš„è®°å½•trueï¼šæ›¿ä»£fasleï¼šæ–°å¢ è¿™é‡Œè§£é‡Šä¸€ä¸‹ name å±æ€§ï¼Œå®ƒå¯ä»¥ç”¨æ¥è®¾ç½®çª—å£çš„ target å±æ€§ï¼Œæˆ–è€…è¡¨ç¤ºæ‰“å¼€çª—å£çš„åå­—ã€‚å½“ä¸ºä»¥ä¸‹å€¼æ—¶ï¼Œè¡¨ç¤ºè§„å®šçš„æ˜¯ target å±æ€§ _self _parent _blank _top å½“ä¸ºå…¶ä»–å€¼æ—¶ï¼Œè¡¨ç¤ºçš„æ˜¯æ‰“å¼€çš„çª—å£çš„åå­—ã€‚ feature å­—ç¬¦ä¸²æ˜¯ç”¨æ¥è¡¨ç¤ºåœ¨æ–°çª—å£ä¸­æœ‰å“ªäº›ç‰¹æ€§ï¼Œå¯ä»¥è®¾ç½®å¦‚ä¸‹å€¼ ç‰¹æ€§ å€¼ åŠŸèƒ½ fullscreen yes/no æˆ–è€… 1/0 çª—å£æ˜¯å¦æœ€å¤§åŒ–ï¼ŒIE Only width æ•°å€¼ çª—å£çš„å®½åº¦ï¼Œæœ€å°å€¼ä¸º 100 height æ•°å€¼ çª—å£çš„é«˜åº¦ï¼Œæœ€å°å€¼ä¸º 100 left æ•°å€¼ çª—å£ç¦»å·¦è¾¹å±å¹•çš„è·ç¦»ï¼Œä¸èƒ½ä¸ºè´Ÿå€¼ top æ•°å€¼ çª—å£ç¦»é¡¶éƒ¨å±å¹•çš„è·ç¦»ï¼Œä¸èƒ½ä¸ºè´Ÿå€¼ location yes/no æˆ–è€… 1/0 æ˜¯å¦æ˜¾ç¤ºåœ°å€æ ï¼ŒOpera Only menubar yes/no æˆ–è€… 1/0 æ˜¯å¦æ˜¾ç¤ºèœå•æ  resizable yes/no æˆ–è€… 1/0 æ˜¯å¦å¯æ‹–åŠ¨çª—å£è¾¹æ¡†æ”¹å˜æµè§ˆå™¨å¤§å°ï¼Œonly IE scrollbars yes/no æˆ–è€… 1/0 å¦‚æœå†…å®¹åœ¨è§†å£æ˜¾ç¤ºä¸ä¸‹ï¼Œæ˜¯å¦å…è®¸æ»šåŠ¨ï¼ŒIE Firefox Opera toolbar yes/no æˆ–è€… 1/0 æ˜¯å¦æ˜¾ç¤ºå·¥å…·æ ï¼ŒIE Firefox status yes/no æˆ–è€… 1/0 æ˜¯å¦æ˜¾ç¤ºçŠ¶æ€æ  ä¸‹é¢ç»™å‡ºä¸€ä¸ªç¤ºä¾‹å†™æ³• window.open(\"https://www.baidu.com\", \"baidu\", \"width=400,height=400,resizeable=yes\", true); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç‰¹æ€§å­—ç¬¦ä¸²ä¸­ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè¦åŒæ—¶è®¾ç½® width å’Œ height æ‰ä¼šèµ·æ•ˆæœï¼Œå•ç‹¬è®¾ç½®ä¸€ä¸ªæ˜¯æ²¡æœ‰æ•ˆçš„ã€‚ å®é™…æ„Ÿå—äº†ä¸€ä¸‹ç‰¹æ€§å­—ç¬¦ä¸²ï¼Œæ„Ÿè§‰é™¤äº† width height top left ç­‰å±æ€§è®¾ç½®æœ‰æ•ˆï¼Œå…¶ä»–å±æ€§è®¾ç½®æ²¡æœ‰æ•ˆæœã€‚ window.open() æ–¹æ³•ä¼šè¿”å›æ–°æ‰“å¼€çª—å£çš„ window å¯¹è±¡(å¦‚æœå¤±è´¥çš„è¯ä¼šè¿”å› null)ï¼Œè¯¥å¯¹è±¡çš„ opener å±æ€§å’Œ parent å±æ€§éƒ½æŒ‡å‘åŸçª—å£çš„ window å¯¹è±¡ï¼Œå³ let newWindow = window.open();newWindow.opener == newWindow.parent == window; // true å› ä¸ºæ–°çª—å£çš„ window å¯¹è±¡ä¸­çš„ opener å’Œ parent å±æ€§ä¿æŒç€å¯¹åŸçª—å£çš„å¼•ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥è¿›è¡Œä¸¤ä¸ªçª—å£çš„é€šä¿¡ï¼Œå¦‚æœä¸¤ä¸ªçª—å£ä¹‹é—´ä¸è¦é€šä¿¡çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°† opener å±æ€§è®¾ç½®ä¸º nullï¼Œä»¥å…å‘ç”Ÿå®‰å…¨é—®é¢˜ newWindow.opener = null; // æ­¤æ—¶ newWindow.parent ä¹Ÿä¸º null å®šæ—¶å™¨åœ¨ JavaScript ä¸­æœ‰ä¸¤ç§å®šæ—¶å™¨ï¼Œåˆ†åˆ«ä¸º setTimeout setInterval setTimeout å¯ä»¥çœ‹åšæ˜¯å»¶æ—¶å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼Œå®ƒä¼šåœ¨ç»è¿‡æŒ‡å®šçš„æ—¶é—´ä¹‹åï¼Œæ¥è°ƒç”¨ä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥ setTimeout å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå»¶æ—¶å™¨ï¼Œä¸‹é¢çš„ç¨‹åºä¼šåœ¨ 1s ååœ¨æ§åˆ¶å°æ‰“å° Hello World! setTimeout(function() &#123; console.log(\"Hello World!\");&#125;, 1000); setTimeout å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œè¡¨ç¤ºè¯¥å®šæ—¶å™¨çš„ idï¼Œè¿™ä¸ª id çš„ä½œç”¨ä¸€èˆ¬æ˜¯ç”¨æ¥åœæ­¢å®šæ—¶å™¨ï¼Œåªè¦å°†è¿™ä¸ª id ä½œä¸ºå‚æ•°ä¼ å…¥åˆ° clearTimeout(id) ä¸­ï¼Œå°±ä¼šåœæ­¢è¿™ä¸ªè®¡æ—¶å™¨ const timerId = setTimeout(function() &#123; console.log(\"Hello World!\");&#125;, 1000);clearTimeout(timerId); åœ¨ 1s åï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°æ²¡æœ‰çœ‹åˆ°æ‰“å°å‡ºäº† Hello World!ï¼Œå› ä¸ºåœ¨ 1s ä»¥å†…ï¼Œè¿™ä¸ªå®šæ—¶å™¨å°±è¢«å›æ”¶äº†ã€‚ å¦ä¸€ä¸ªå®šæ—¶å™¨æ˜¯ setIntervalï¼Œå®ƒä¹Ÿæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œå®ƒä¼šæ¯éš”è®¾å®šçš„æ—¶é—´å°±ä¼šè°ƒç”¨ä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œå¦‚ä¸‹ä»£ç ä¼šæ¯éš” 1s å°±åœ¨æ§åˆ¶å°æ‰“å°ä¸€æ¬¡ Hello World! setInterval(function() &#123; console.log(\"Hello World!\");&#125;, 1000); ä½¿ç”¨ setInterval è¦ååˆ†çš„å°å¿ƒï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ¸…ç†è¯¥å®šæ—¶å™¨çš„è¯ï¼Œå®ƒä¼šä¸€ç›´å·¥ä½œä¸‹å»ï¼Œç›´åˆ°é¡µé¢å¸è½½ï¼Œå¦‚æœæˆ‘ä»¬å¿˜è®°æ¸…ç†è¿™ä¸ªè®¡æ—¶å™¨çš„è¯ï¼Œé‚£ä¹ˆå®ƒä¼šä¸€ç›´åœ¨åå°è¿è¡Œï¼Œå ç”¨èµ„æºã€‚ åŒ setTimeout çš„ä¸€æ ·ï¼Œè¯¥å‡½æ•°ä¹Ÿè¿”å›ä¸€ä¸ª idï¼Œä½œç”¨ä¹Ÿæ˜¯ç”¨æ¥åœæ­¢è®¡æ—¶å™¨çš„ï¼Œå°†å®ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™ clearInterval(id) å³å¯åœæ­¢è¿™ä¸ªè®¡æ—¶å™¨ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªä¾‹å­ const max = 100;let count = 0;let timerId = null;function increment() &#123; count++; if (count &gt; max) &#123; clearInterval(timerId); &#125;&#125;timerId = setInterval(increment, 1000); ä¸Šé¢çš„ä»£ç æ¯éš”ä¸€ç§’å¯¹ count è¿›è¡ŒåŠ ä¸€ï¼Œå½“ count &gt; max æ—¶ï¼Œæˆ‘ä»¬åœæ­¢äº†è¯¥è®¡æ—¶å™¨ã€‚ å…¶å®ä¸Šé¢çš„ä»£ç ä¹Ÿå¯ä»¥ä½¿ç”¨ setTimeout å®ç°ï¼Œå¦‚ä¸‹ const max = 100;let count = 0;function increment() &#123; count++; if (count &lt;= max) &#123; setTimeout(increment, 1000); &#125;&#125;setTimeout(increment, 1000); ä»”ç»†é˜…è¯»ä»£ç ï¼Œè¯¥ä»£ç çš„åŠŸèƒ½åŒä¸Šé¢æ˜¯ä¸€æ ·çš„ï¼Œä½¿ç”¨ setTimeout çš„å¥½å¤„å°±æ˜¯ä¸ç”¨è·Ÿè¸ªå®šæ—¶å™¨çš„ idï¼Œå› ä¸º setTimeout æ¯æ¬¡æ‰§è¡Œå®Œå‡½æ•°åï¼Œå®ƒä¼šè‡ªåŠ¨çš„åœæ­¢ï¼Œä¸€èˆ¬è®¤ä¸ºä½¿ç”¨ setTimeout æ¥æ¨¡æ‹Ÿ setInterval æ˜¯ä¸€ç§æœ€ä½³å®è·µï¼Œæ‰€ä»¥æœ€å¥½ä¸ç”¨ setIntervalï¼Œä»¥å…å¿˜è®°åœæ­¢å®šæ—¶å™¨ï¼Œæµªè´¹èµ„æºã€‚ å¯¹è¯æ¡†æµè§ˆå™¨é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹æ³•è°ƒç”¨ç³»ç»Ÿå¯¹è¯æ¡†å‘ç”¨æˆ·æ˜¾ç¤ºæ¶ˆæ¯ alert confirm prompt locationå±æ€§location å¯¹è±¡ä¸ä»…ä¿å­˜å½“å‰æ–‡æ¡£çš„ URL ä¿¡æ¯ï¼Œå¹¶ä¸”è¿˜å°† URL è§£æä¸ºç‹¬ç«‹çš„ç‰‡æ®µï¼Œå‡è®¾å½“å‰é¡µé¢çš„ URL ä¸º https://app.diagrams.net:80/#G1FX9ydf3wgzNVe15n9jNgaGP_XaJyEYKz?login=trueï¼Œlocation å¯¹è±¡å¯¹äºçš„å±æ€§å¦‚ä¸‹ å±æ€§å ä¾‹å­ è¯´æ˜ hash #G1FX9ydf3wgzNVe15n9jNgaGP_XaJyEYKz è¿”å› URL ä¸­çš„ hash host app.diagrams.net:80 è¿”å›æœåŠ¡å™¨åç§°å’Œç«¯å£å·(å¦‚æœæœ‰çš„è¯) hostname app.diagrams.net è¿”å›æœåŠ¡å™¨åç§° href https://app.diagrams.net:80/#G1FX9ydf3wgzNVe15n9jNgaGP_XaJyEYKz?login=true å½“å‰é¡µé¢çš„å®Œæ•´åœ°å€ pathname / URL ä¸­çš„ç›®å½•æˆ–æ–‡ä»¶å port 80 è¿”å› URL ä¸­æŒ‡å®šçš„ç«¯å£å·ï¼Œå¦‚æœ URL ä¸­æ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆè¿”å›ç©ºå­—ç¬¦ä¸² protocol https: é¡µé¢ä½¿ç”¨çš„åè®® serach ?login=true URL ä¸­çš„æŸ¥è¯¢å­—ç¬¦ä¸² assignæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ location å¯¹è±¡æ¥æ”¹å˜å½“å‰é¡µé¢çš„ URLï¼Œé¦–å…ˆæœ€å¸¸ç”¨çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ assignï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª URL location.assign(\"https://www.baidu.com\"); è¿™æ ·å°±ä¼šé©¬ä¸Šæ‰“å¼€ URLï¼Œå¹¶åœ¨ history å¯¹è±¡ä¸­äº§ç”Ÿä¸€æ¡æ–°çš„è®°å½•ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥ä¿®æ”¹ location.href å±æ€§ï¼Œå¦‚ location.href = \"https://www.baidu.com\"; æˆ–è€…ç›´æ¥ä¿®æ”¹ location window.location = \"https://www.baidu.com\" å…¶å®ä¸ç®¡æ˜¯ä½¿ç”¨ location.href è¿˜æ˜¯ç›´æ¥ä¿®æ”¹ locationï¼Œåœ¨åº•å±‚éƒ½ä¼šè°ƒç”¨ assign() æ–¹æ³•ï¼Œæ‰€ä»¥ä¸Šé¢ä¸‰è¡Œä»£ç çš„æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ é™¤äº†è·³è½¬åˆ°æ–°çš„é¡µé¢ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½® location å¯¹è±¡çš„å…¶ä»–å±æ€§ï¼Œæ¥æ”¹å˜å½“å‰åŠ è½½çš„é¡µé¢ï¼Œæ¯æ¬¡ä¿®æ”¹ location çš„å±æ€§(é™¤ hash å¤–)ï¼Œé¡µé¢éƒ½ä¼šä»¥æ–°çš„ URL é‡æ–°åŠ è½½ã€‚ replaceæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ replace æ–¹æ³•æ¥æ”¹å˜å½“å‰é¡µé¢çš„ URLï¼Œå®ƒä¹Ÿæ¥æ”¶ä¸€ä¸ª URL åœ°å€ï¼Œå¹¶è·³è½¬åˆ°è¯¥åœ°å€ï¼Œä¸è¿‡ä¸ assign ä¸åŒçš„æ˜¯ï¼Œå®ƒä¸ä¼šå† history å¯¹è±¡äº§ç”Ÿä¸€æ¡æ–°çš„è®°å½•ï¼Œè€Œæ˜¯ä½¿ç”¨å½“å‰çš„è®°å½•æ›¿ä»£ä¹‹å‰çš„è®°å½•ï¼Œå¦‚ä¸‹ historyhistory ä¿å­˜ç€å½“å‰é¡µé¢è®¿é—®è¿‡çš„é¡µé¢çš„å†å²è®°å½•ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå®‰å…¨äººå‘˜æ— æ³•å¾—çŸ¥ç”¨æˆ·æµè§ˆè¿‡çš„ URLï¼Œä¸è¿‡å¯ä»¥æ ¹æ®é€šè¿‡ go æ–¹æ³•åœ¨å†å²è®°å½•ä¹‹é—´ä»»æ„è·³è½¬ã€‚ è¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ•´æ•°å€¼ï¼Œæ­£æ•°è¡¨ç¤ºå‘å‰è·³è½¬ï¼Œè´Ÿæ•°è¡¨ç¤ºå‘åè·³è½¬ï¼Œå¦‚ä¸‹ history.go(1); // å‘å‰è·³è½¬ä¸€æ­¥history.go(-2); // å‘åè·³è½¬ä¸¤æ­¥ é™¤äº†ç»™ go æ–¹æ³•ä¼ é€’æ•°å­—ä»¥å¤–ï¼Œè¿˜å¯ä»¥ä¼ é€’å­—ç¬¦ä¸²ï¼Œæµè§ˆå™¨ä¼šè·³åˆ°å†å²è®°å½•ä¸­åŒ…å«è¯¥å­—ç¬¦ä¸²çš„é¡µé¢ä¸­æœ€è¿‘çš„ä¸€ä¸ªï¼Œå¯èƒ½å‰è¿›ï¼Œä¹Ÿå¯èƒ½åé€€ï¼Œå¦‚æœå†å²è®°å½•ä¸­ä¸åŒ…å«è¯¥å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä»€ä¹ˆä¹Ÿä¸åš history.go(\"baidu\"); // è·³è½¬åˆ°æœ€è¿‘çš„åŒ…å« baidu çš„é¡µé¢ history æä¾›äº†ä¸¤ä¸ªç®€å†™æ–¹æ³• back() å’Œ forward() æ¥ä»£æ›¿ go()ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«ä»£è¡¨åé€€ä¸€æ­¥å’Œå‰è¿›ä¸€æ­¥ã€‚ å¦‚æœåœ¨åé€€åˆ°æŸé¡µé¢æ—¶ï¼Œå‡ºäºæŸç§åŸå› ï¼Œå‘ history ä¸­æ·»åŠ äº†ä¸€æ¡æ–°çš„è®°å½•ï¼Œé‚£ä¹ˆæ­¤é¡µé¢ä¹‹åçš„è®°å½•å…¨éƒ¨ä½œåºŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º è¿˜æœ‰ä¸¤ä¸ªå¯¹è±¡æ²¡æœ‰è®²ï¼Œnavigator å’Œ screenï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡æˆ‘è§‰å¾—æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œæ‰€ä»¥ä¸æ‰“ç®—å†™äº†(å¦ä¸€ä¸ªåŸå› æ˜¯æ˜¯å†™åˆ°è¿™é‡Œå·²ç»æ¯”è¾ƒç´¯äº†ï¼Œä¸æƒ³ç»§ç»­å†™äº†)ã€‚","tags":[{"name":"BOM","slug":"BOM","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/BOM/"}]},{"title":"è®°ä¸€æ¬¡ React ä¸­ CSS å¤„ç†äº‹ä»¶","date":"2020-09-22T05:51:00.000Z","path":"/è®°ä¸€æ¬¡React CSS å¤„ç†äº‹ä»¶/","text":"äº‹ä»¶çš„èµ·å› æ˜¯å¯¹ä¸€ä¸ªä½¿ç”¨ä¼ ç»Ÿç½‘é¡µå¼€å‘çš„ Web é¡¹ç›®(å³ html, css, javascript åˆ†å¼€å†™çš„é¡¹ç›®)é‡æ„ä¸º React é¡¹ç›®ã€‚ è¿™ä¸ªäº‹æƒ…å¤§éƒ¨åˆ†éƒ½æ˜¯å¤åˆ¶ç²˜è´´ï¼Œå‡è®¾æœ‰ä»¥ä¸‹çš„æ–‡ä»¶ç›®å½• Main index.jsx index.module.css index.module.css çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤º .box-left &#123; /* ä¸€äº›CSSæ ·å¼ */&#125; åœ¨ Main ç»„ä»¶çš„ index.jsx ä¸­å¼•å…¥äº† index.module.css import React from 'react'import styles from './index.module.css'function Main() &#123; return ( &lt;div className=&#123;styles.boxLeft&#125;&gt;&lt;/div&gt; )&#125;export default Main å½“æˆ‘ç»‘å®šç±»åæ—¶ï¼ŒWebStorm æç¤ºæˆ‘å†™æˆ boxLeftï¼Œå› ä¸º box-left ä¸­çš„ - ä¼šè¢«è¯†åˆ«æˆå‡å·ï¼Œæˆ‘ä»¥ä¸º React ä¼šæ ¹æ® boxLeft æ™ºèƒ½è¯†åˆ«å‡º box-leftï¼Œä½†æ˜¯æ²¡æƒ³åˆ°æ ·å¼å¤±æ•ˆäº†ã€‚ å½“æ—¶æˆ‘è¿˜ä»¥ä¸ºæ˜¯ React æ˜¯ä¸æ˜¯ä¸æ”¯æŒ CSS Moduleï¼Œä¸ºæ­¤æˆ‘è¿˜ä¸Šç½‘æœäº†ï¼Œå¹¶ä¸”ä½¿ç”¨ npm run eject å°†é…ç½®æ–‡ä»¶å¼¹å‡ºæ¥æ”¹äº†ï¼Œä½†æ˜¯æ²¡æœ‰æ€€ç–‘ boxLeft å¹¶ä¸èƒ½è¢«å¯¹åº”ä¸º box-leftï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯å› ä¸ºæˆ‘å¾ˆç›¸ä¿¡ WebStormï¼Œä»¥ä¸ºè¿™ç§å†™æ³•æ˜¯æ­£ç¡®ã€‚ æœ€åæ— è®¡å¯æ–½ï¼Œå°±æƒ³ç€æŠŠ index.module.css ä¸­çš„ç±»åæ”¹ä¸º boxLeft .boxLeft &#123; /* ä¸€äº›CSSæ ·å¼ */&#125; ç„¶åæ ·å¼å°±å‡ºæ¥äº†ã€‚ è¿™ä»¶äº‹å‘Šè¯‰æˆ‘ï¼Œä¸è¦å¤ªç›¸ä¿¡ IDEï¼Œå°±æ˜¯å› ä¸ºå¤ªç›¸ä¿¡ WebStormï¼Œä»¥è‡³äºæˆ‘æ ¹æœ¬æ²¡æœ‰è€ƒè™‘è¿‡å†™æ³•çš„é—®é¢˜ï¼Œå¯¼è‡´åœ¨è¿™ä¸Šé¢æµªè´¹äº†å‡ ä¸ªå°æ—¶ï¼›ä¹Ÿæ˜¯å› ä¸ºæµªè´¹äº†å‡ ä¸ªå°æ—¶ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå®è´µçš„ç»éªŒï¼Œæ‰€ä»¥è®°å½•ä¸‹æ¥ã€‚","tags":[{"name":"React è¸©å‘","slug":"React-è¸©å‘","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/React-%E8%B8%A9%E5%9D%91/"}]},{"title":"SpringBootå…¥é—¨","date":"2020-09-02T16:00:00.000Z","path":"/SpringBootå…¥é—¨/","text":"æœ¬ç¯‡æ–‡ç« éœ€è¦æœ‰ Spring çš„ä½¿ç”¨ç»éªŒï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œå¯¹äº Spring çš„åŸºæœ¬æ¦‚å¿µå¦‚ IOC DI AOP ä¸ä¼šè¿›è¡Œä»‹ç»ï¼Œä»¥åŠå¯¹äºåœ¨ Spring ä¸­çš„å¸¸ç”¨æ³¨è§£ï¼Œå¦‚ @Component @Autowired @Bean ç­‰ç­‰æ³¨è§£é»˜è®¤ä½ å·²ç»æŒæ¡ï¼Œå¦åˆ™å­¦ä¹ æœ¬ç¯‡æ–‡ç« ä¼šæ¯”è¾ƒå›°éš¾ã€‚ å¦‚æœä½¿ç”¨è¿‡ Spring çš„è¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¦å†™ xml é…ç½®æ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨ @Configuration æ³¨è§£æ¥é…ç½® Springï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸çš„æƒ¹äººè®¨åŒï¼Œç»™æˆ‘ä»¬å¸¦æ¥å¾ˆå¤§çš„è´Ÿæ‹…ï¼Œæ¯”å¦‚å¯¹äºæˆ‘æ¥è¯´ï¼ŒSpring çš„ xml é…ç½®æ–‡ä»¶çš„å¤´éƒ¨æˆ‘å°±è®°ä¸ä¸‹æ¥ï¼Œæ¯æ¬¡éƒ½è¦ä»å®˜ç½‘å¤åˆ¶æˆ–è€…ä»è‡ªå·±çš„åšå®¢ç¬”è®°ä¸­å¤åˆ¶ï¼Œè¿™ç§ä¸èƒ½å®Œå…¨æŒæ¡çš„æ„Ÿè§‰æˆ‘è§‰å¾—å¾ˆç³Ÿç³•ã€‚ Spring Boot çš„å‡ºç°ï¼Œä½¿å¾—æˆ‘ä»¬ä¸éœ€è¦å†™è¿™ç§ç¹ççš„é…ç½®æ–‡ä»¶ï¼Œå®ƒçš„ä¼˜ç‚¹å°±æ˜¯çº¦å®šå¤§äºé…ç½®ï¼Œæ‰€è°“çº¦å®šï¼Œå³é»˜è®¤ä½¿ç”¨å¤§å®¶ä¸€è‡´è®¤å¯çš„é…ç½®ï¼Œè€Œç¨‹åºå‘˜åªéœ€è¦é…ç½®ä¸ç¬¦åˆçº¦å®šéƒ¨åˆ†ï¼Œæ‰€ä»¥å…¶å® Spring Boot å¯ä»¥æ˜¯é›¶é…ç½®çš„ï¼Œåœ¨ä¸‹é¢çš„å…¥é—¨å°èŠ‚æˆ‘ä»¬å°†çœ‹åˆ°ä¸ç¼–å†™ä»»ä½•çš„é…ç½®æ–‡ä»¶æ­å»ºä¸€ä¸ª Web æœåŠ¡ã€‚ å…¥é—¨æˆ‘ä»¬åœ¨è¿™ä¸ªå°èŠ‚ä¸­å¿«é€Ÿçš„æ­å»ºä¸€ä¸ª Spring Boot é¡¹ç›®ï¼Œæœ‰ä¸¤ç§æ–¹æ³• åœ¨ Spring å®˜ç½‘ åœ¨çº¿åˆ›å»ºä¸€ä¸ªé¡¹ç›® ä¸Šé¢çš„é€‰é¡¹è¿˜æ˜¯å¾ˆå®¹æ˜“çœ‹æ‡‚çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ Maven æ¥ç®¡ç†é¡¹ç›®ä¾èµ–ï¼Œä½¿ç”¨çš„è¯­è¨€æ˜¯ Javaï¼Œä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ 2.3.3ï¼Œä»¥åŠé¡¹ç›®çš„ä¸€äº›ä¿¡æ¯ã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦æ­å»ºä¸€ä¸ª Web æœåŠ¡ï¼Œæ‰€ä»¥è¿˜éœ€è¦ web çš„ä¾èµ–ï¼Œæˆ‘ä»¬ç‚¹å‡»å³ä¸Šè§’çš„ ADD DEPENDENCIES æˆ‘ä»¬é€‰æ‹© Spring Web è¿™ä¸ªä¾èµ–ï¼Œé€‰æ‹©å¥½ä»¥åï¼Œæˆ‘ä»¬ç‚¹å‡» GENERATE ç”Ÿæˆä¸€ä¸ª zip æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸‹è½½ä¸‹æ¥ æˆ‘ä»¬å°†å®ƒè§£å‹ï¼Œç„¶åä½¿ç”¨ IDEï¼Œæ¯”å¦‚æˆ‘ä½¿ç”¨çš„æ˜¯ IDEA å»æ‰“å¼€è¯¥æ–‡ä»¶å¤¹ ç„¶åå°±å¯ä»¥å¿«ä¹çš„å†™ç¨‹åºäº†ã€‚ ä½¿ç”¨ IDEA æ¥åˆ›å»ºä¸€ä¸ª Spring Boot é¡¹ç›® é¦–å…ˆæ‰“å¼€ IDEAï¼Œæ–°å»ºä¸€ä¸ª Project ç„¶åæˆ‘ä»¬é€‰æ‹© Spring Initializr è§‚å¯Ÿå³ä¾§çš„ Default æ‰€å¯¹åº”çš„ URLï¼Œå…¶å® IDEA ä¹Ÿæ˜¯åœ¨ Spring å®˜ç½‘æ¥ç”Ÿæˆä¸€ä¸ª Spring Boot é¡¹ç›®çš„ï¼Œä¸è¿‡åœ¨ IDEA ä¸­ç›´æ¥åˆ›å»º Spring Boot æ–¹ä¾¿äº†å¾ˆå¤šã€‚ ç‚¹å‡» Nextï¼Œæ¥ç€æˆ‘ä»¬å°±è¦è®¾ç½®é¡¹ç›®çš„ä¸€äº›ä¿¡æ¯ï¼Œè¿™äº›é¡¹ç›®ä¿¡æ¯çš„é€‰é¡¹åŒæˆ‘ä»¬åœ¨å®˜ç½‘çœ‹åˆ°çš„é€‰é¡¹æ˜¯ä¸€æ ·çš„ é…ç½®å¥½é¡¹ç›®ä¿¡æ¯ä»¥åï¼Œæˆ‘ä»¬ç‚¹å‡» Nextï¼Œè¿™ä¸ªé¡µé¢æ˜¯æ¥æ·»åŠ ä¾èµ–çš„ æˆ‘ä»¬éœ€è¦æ·»åŠ  Web ä¾èµ–ï¼Œæˆ‘ä»¬ç‚¹å‡»å·¦ä¾§çš„ Web é€‰é¡¹ï¼Œæ¥ç€å‹¾é€‰ Spring Webï¼Œå¦‚ä¸‹ ç‚¹å‡» Nextï¼Œæ¥åˆ°æœ€åä¸€é¡¹ï¼Œè®¾ç½®é¡¹ç›®çš„åç§° ç‚¹å‡» FINISHï¼Œå®Œæˆé¡¹ç›®çš„åˆ›å»ºï¼Œå¯ä»¥æ„‰å¿«çš„å†™ä»£ç äº†ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹ç”Ÿæˆçš„ Spring Boot é¡¹ç›®çš„æ–‡ä»¶ç»“æ„ï¼Œå¦‚ä¸‹ æˆ‘ä»¬ä¸å»çœ‹ .gitignore ç­‰ç­‰é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯ src æ–‡ä»¶å¤¹çš„ç»“æ„ src main java resources static templates application.properties test java å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ Maven é¡¹ç›®çš„ç»“æ„ã€‚æˆ‘ä»¬çš„ä»£ç æ˜¯æ”¾åœ¨ main/java ç›®å½•ä¸‹çš„ï¼Œmain/resources æ–‡ä»¶å¤¹æ”¾çš„æ˜¯èµ„æºæ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹å’Œä¸€ä¸ªæ–‡ä»¶ æ–‡ä»¶(å¤¹) ä½œç”¨ static æ”¾ç½®é™æ€èµ„æºæ–‡ä»¶ï¼Œå¦‚ js æ–‡ä»¶ï¼Œcss æ–‡ä»¶ templates æ”¾ç½®æ¨¡æ¿æ–‡ä»¶ï¼Œåœ¨æ¨¡æ¿å¼•æ“å°èŠ‚è®²è¿° application.properties SpringBoot çš„é…ç½®æ–‡ä»¶ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ° main/java ç›®å½•ä¸‹ï¼Œé¦–å…ˆé‡Œé¢æœ‰ä¸€ä¸ªåŒ…ï¼Œå¦‚ com.xt.startï¼Œè¿™æ˜¯ä½ åœ¨ç”Ÿæˆä¸€ä¸ª Spring Boot é¡¹ç›®æ—¶å¡«å†™å¥½çš„ï¼Œåœ¨è¿™ä¸ªåŒ…ä¸‹æœ‰ä¸€ä¸ª Java ç±» StartApplicationï¼Œå†…å®¹å¦‚ä¸‹ package com.xt.start;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class StartApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(StartApplication.class, args); &#125;&#125; è¿™ä¸ªç±»å°±æ˜¯æˆ‘ä»¬ Spring Boot çš„å¯åŠ¨ç±»ï¼Œæˆ‘ä»¬è¿è¡Œè¿™ä¸ªç±»ï¼Œå°±ä¼šå°†è¿™ä¸ª Spring Boot é¡¹ç›®å¯åŠ¨èµ·æ¥ è¿™ä¸ªé¡¹ç›®å¯åŠ¨åœ¨ 8080 ç«¯å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ localhost:8080 è®¿é—®è¯¥é¡¹ç›® å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¯¹è®¿é—®çš„è·¯å¾„åšå¤„ç†ï¼Œæ‰€ä»¥åªä¼šå¾—åˆ°ä¸Šé¢çš„é”™è¯¯é¡µé¢ã€‚ è¯»åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œä»¥å¾€æˆ‘ä»¬éƒ½æ˜¯å°†é¡¹ç›®æ‰“åŒ…ï¼Œç„¶åæ”¾åœ¨ tomcat æ”¾ç½®é¡¹ç›®çš„è·¯å¾„ä¸‹ï¼Œç„¶åå¯åŠ¨ tomcat è®¿é—®é¡¹ç›®ï¼Œæ€ä¹ˆæˆ‘ä»¬æ²¡æœ‰é…ç½® tomcat å°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªæœåŠ¡å‘¢? è¿™æ˜¯å› ä¸º Spring Boot å†…éƒ¨åŒ…å«äº† tomcatï¼Œå¦‚æœä»”ç»†è§‚å¯Ÿä¸Šé¢çš„æ—¥å¿—ï¼Œå¯ä»¥è§‚å¯Ÿåˆ° Spring Boot ä¹Ÿæ˜¯ä½¿ç”¨äº† tomcat çš„ã€‚ æ¥ç€æˆ‘ä»¬æ¥å¯¹ä¸€äº›è¯·æ±‚è·¯å¾„åšå¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSpring Boot ä¼šé»˜è®¤æ‰«æ StartApplication(å³å¯åŠ¨ç±»)æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç±»éƒ½è¦å†™åœ¨ com.xt.start åŒ…ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬çš„ç±»æ‰æœ‰å¯èƒ½ä¼šè¢«æ·»åŠ åˆ° IOC å®¹å™¨ä¸­ã€‚ æˆ‘ä»¬åœ¨ com.xt.start ä¸‹æ–°å»ºä¸€ä¸ªåŒ… controllerï¼Œå¹¶åœ¨æ­¤åŒ…ä¸‹æ–°å»ºä¸€ä¸ªç±» HelloController package com.xt.start.controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.ResponseBody;@Controllerpublic class HelloController &#123; @GetMapping(\"/\") @ResponseBody public String hello() &#123; return \"Hello World!\"; &#125;&#125; æˆ‘å‡è®¾ä½ æœ‰ä½¿ç”¨ Spring MVC çš„åŸºç¡€ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ³¨è§£ä½ æ˜¯çœ‹çš„æ‡‚å¾—ã€‚å½“æˆ‘ä»¬è®¿é—®é¡¹ç›®çš„æ ¹ç›®å½•æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²Hello World!ã€‚é‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ localhost:8080/ ç›´æ¥è®¿é—®ï¼Œåœ¨é¡µé¢ä¼šå‘ˆç°ä¸€ä¸ªå­—ç¬¦ä¸² Hello World!ï¼Œåœ¨è¿™é‡Œæˆ‘ä½¿ç”¨ PostMan æ¥è®¿é—®è¯¥é¡¹ç›®ï¼Œå¦‚ä¸‹ æˆ‘ä»¬æ²¡æœ‰ç¼–å†™ä»»ä½•çš„é…ç½®æ–‡ä»¶ï¼Œå°±åˆ›å»ºä¸€ä¸ª Web é¡¹ç›®ï¼Œæ‰€ä»¥è¯´ Spring Boot å¤§å¤§çš„è§£æ”¾äº†æˆ‘ä»¬çš„ç”Ÿäº§åŠ›ã€‚ å…³äº JSPï¼š åœ¨ä»¥å¾€éƒ½æ˜¯å‰ç«¯å†™å¥½ html é¡µé¢ï¼Œç„¶ååç«¯æ‹¿å»ä¿®æ”¹ä¸º JSP é¡µé¢ï¼Œæ ¹æ®å‰ç«¯å‘é€çš„è¯·æ±‚è¿”å›ç›¸åº”çš„ç»è¿‡æ¸²æŸ“çš„é¡µé¢ï¼Œè¿™ç§å¼€å‘æ–¹å¼éœ€è¦å‰ç«¯å†™å¥½é¡µé¢ï¼Œåç«¯æ‰èƒ½è¿›è¡Œä¿®æ”¹ï¼Œå‰ç«¯ä¸åç«¯çš„å¼€å‘å¹¶ä¸æ˜¯å¹¶è¡Œçš„ï¼Œæ•ˆç‡ä¸èƒ½å¤Ÿæœ€å¤§åŒ–ï¼›å¹¶ä¸”åƒ JSP å‰åç«¯ä»£ç æ··æ‚åœ¨ä¸€èµ·çš„æƒ…å†µï¼ŒèŒè´£ä¸æ¸…æ™°ï¼Œä»£ç æ··ä¹±ï¼Œæ²¡æœ‰é™åˆ¶ã€‚ ç°åœ¨çš„å¼€å‘ä¸€èˆ¬éƒ½æ˜¯å‰åç«¯åˆ†ç¦»äº†ï¼Œå‰ç«¯åªéœ€è¦å‘åç«¯è¯·æ±‚æ‰€éœ€è¦çš„æ•°æ®å°±å¯ä»¥ï¼Œè€Œåç«¯åªéœ€è¦å‘é€æ•°æ®å³å¯ï¼Œåªè¦åç«¯ä¸å‰ç«¯å¼€å‘ä¹‹é—´è§„å®šå¥½è¯·æ±‚çš„æ¥å£ï¼Œä»¥åŠæ•°æ®çš„æ ¼å¼ï¼ŒäºŒè€…å¯ä»¥åŒæ—¶å¹¶è¡Œå¼€å‘ï¼Œæ•ˆç‡å¯ä»¥å¾—åˆ°æœ€å¤§åŒ–ï¼›å¹¶ä¸”æ­¤æ—¶å‰åç«¯çš„èŒè´£æ›´åŠ çš„æ¸…æ™°ï¼Œå‰ç«¯è´Ÿè´£ç»´æŠ¤å¥½å‰ç«¯é¡µé¢ï¼Œåç«¯ç»´æŠ¤å¥½åç«¯çš„é€»è¾‘ï¼Œå‡å°‘äº†äºŒè€…ä¹‹é—´çš„åä½œï¼Œä¹Ÿå°±æ„å‘³ç€å¯ä»¥æœ‰æ›´é«˜çš„å¼€å‘æ•ˆç‡ã€‚ æ‰€ä»¥åœ¨æœ¬ç¯‡ä¸­ä¸ä¼šä»‹ç»æœ‰å…³ä½¿ç”¨æ¨¡æ¿å¼•æ“å¼€å‘çš„å†…å®¹ï¼Œä¾‹å¦‚ Thymeleafã€‚ é…ç½®æ–‡ä»¶è™½ç„¶æˆ‘ä»¬è¯´ Spring Boot ä¸éœ€è¦é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬è¦é…ç½®ä¸€äº›ç‰¹æœ‰çš„ä¿¡æ¯æ—¶æˆ‘ä»¬è¿˜æ˜¯éœ€è¦å†™é…ç½®æ–‡ä»¶çš„ï¼Œæ¯”å¦‚é…ç½®æ•°æ®åº“çš„ç”¨æˆ·å’Œå¯†ç ç­‰ç­‰ä¿¡æ¯ã€‚ åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œapplication.properties æ–‡ä»¶æ˜¯é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ properties æ–‡ä»¶çš„æ ¼å¼å†™é…ç½®ä¿¡æ¯ï¼Œæ¯”å†™ XML é…ç½®æ–‡ä»¶å¥½å¤šäº†ï¼Œå¦‚æˆ‘ä»¬é…ç½®é¡¹ç›®çš„ç«¯å£å·ä¸º 8081 server.port=8081 é‡æ–°å¯åŠ¨é¡¹ç›® ç«¯å£å·å·²ç»å˜ä¸ºäº† 8081ã€‚ YAMLé…ç½®æ–‡ä»¶åœ¨ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨ propertiesï¼Œä½†æ˜¯ä½¿ç”¨ properties é…ç½®æ–‡ä»¶æ²¡æœ‰å±‚çº§å…³ç³»ï¼Œå¦‚æœä¸Šé¢é…ç½®ç«¯å£æ¢æˆä½¿ç”¨ XML é…ç½®ï¼Œé‚£ä¹ˆå¯èƒ½æ˜¯å¦‚ä¸‹çš„å½¢å¼ &lt;server&gt; &lt;port&gt;8081&lt;/port&gt;&lt;/server&gt; ä½¿ç”¨ XML é…ç½®æ–‡ä»¶è™½ç„¶ç»“æ„å±‚æ¬¡æ¸…æ™°ï¼Œä½†æ˜¯ XML æ–‡ä»¶å†—ä½™ä¿¡æ¯å¤ªå¤šï¼Œè¡¨è¾¾ç›¸åŒçš„ä¿¡æ¯éœ€è¦æ›´å¤§çš„ç©ºé—´ï¼Œä»¥åŠè¿˜æœ‰é‚£è®¨äººåŒçš„å‘½åç©ºé—´ã€‚æ‰€ä»¥æœ‰æ²¡æœ‰ä¸€ç§é…ç½®æ–‡ä»¶ï¼Œèƒ½ç®€å•çš„è¡¨ç¤ºä¿¡æ¯ï¼Œå¹¶ä¸”è¿˜èƒ½å¤Ÿæœ‰å±‚çº§å…³ç³»ï¼Œé‚£å°±æ˜¯æœ¬å°èŠ‚æ‰€è¦è®²çš„ YAML é…ç½®æ–‡ä»¶ã€‚ å¦‚æœä½¿ç”¨ YAML æ¥é…ç½®ä¸Šé¢çš„ç«¯å£å·ï¼Œå®ƒæ˜¯è¿™æ ·çš„ server: port: 8081 é€šè¿‡ç¼©è¿›å¯ä»¥æ¸…æ™°çš„è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œå¹¶ä¸”æ²¡æœ‰å†—ä½™çš„ä¿¡æ¯ï¼Œåœ¨ : çš„å·¦è¾¹è¡¨ç¤ºè¦é…ç½®çš„é€‰é¡¹ï¼Œåœ¨ : çš„å³è¾¹è¡¨ç¤ºé…ç½®çš„å…·ä½“å€¼ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**: ä¸å€¼ä¹‹é—´éœ€è¦è·Ÿä¸€ä¸ªç©ºæ ¼ï¼Œ**å¦‚ port: 8081ã€‚ YAMLè¡¨ç¤ºæ•°ç»„å’Œåˆ—è¡¨åœ¨ YAML é…ç½®æ–‡ä»¶ä¸­å¦‚ä½•è¡¨ç¤ºä¸€ä¸ªæ•°ç»„ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ˜¯è¡Œå†…è¡¨ç¤ºï¼Œå¦‚ scores: [97, 98, 99] æˆ–è€…ä½¿ç”¨è¡Œé—´çš„è¡¨ç¤ºï¼Œåœ¨æ¯ä¸€é¡¹çš„å‰é¢åŠ ä¸Š -ï¼Œå¦‚ä¸‹ scores: - 97 - 98 - 99 YAMLè¡¨ç¤ºå¯¹è±¡å‡è®¾æˆ‘ä»¬ä½¿ç”¨ YAML é…ç½®ä¸€ä¸ª Person å¯¹è±¡ï¼Œå®ƒåŒ…å« name age gender å±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼è¿›è¡Œé…ç½® person: name: Bob age: 21\" gender: male éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨é…ç½®å­—ç¬¦ä¸²ç±»å‹çš„å€¼æ—¶ï¼Œå¹¶ä¸éœ€è¦åŠ ä¸Š &quot;ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è¡Œå†…çš„æ–¹å¼é…ç½®å¯¹è±¡ï¼Œå¦‚ä¸‹ person: &#123;name: Bob, age: 21,gender: male&#125; YAMLå¼•ç”¨å½“æˆ‘ä»¬æƒ³å¼•ç”¨å·²ç»é…ç½®è¿‡çš„å€¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &amp; è®¾å®šé”šç‚¹ï¼Œç„¶åé€šè¿‡ * è¿›è¡Œå¼•ç”¨ï¼Œä¾‹å¦‚ default: &amp;default username: root password: rootmysql: database: mysql &lt;&lt;: *default é¦–å…ˆæˆ‘ä»¬é€šè¿‡ &amp;default å®šä¹‰äº†ä¸€ä¸ªé”šç‚¹ï¼Œç„¶åæˆ‘ä»¬åœ¨ mysql é€šè¿‡ *default å¼•ç”¨äº†è¯¥é”šç‚¹ï¼Œ&lt;&lt; è¡¨ç¤ºåˆå¹¶åˆ°æ­¤å¤„ï¼Œæ‰€ä»¥ä¸Šé¢çš„é…ç½®ç­‰æ•ˆäº default: &amp;default username: root password: rootmysql: database: mysql username: root password: root é…ç½®æ–‡ä»¶çš„ä½ç½®é…ç½®æ–‡ä»¶é»˜è®¤æ˜¯æ”¾åœ¨ç±»è·¯å¾„ä¸‹çš„ï¼Œå³ application.properties æ‰€åœ¨çš„ä½ç½®ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œè¿˜å¯ä»¥æ”¾åœ¨å¦å¤–ä¸‰ä¸ªä½ç½®ï¼Œè¿™ä¸‰ä¸ªä½ç½®ä¸‹çš„ application.properties æˆ– application.yml éƒ½ä¼šè¢«ä½œä¸ºé…ç½®æ–‡ä»¶ classpath:/ classpath:/config file:/ file:/config/ ä¸‹é¢è¿™å¼ å›¾æ³¨æ˜äº†ä¸Šé¢çš„å››ä¸ªä½ç½® æ—¢ç„¶å››ä¸ªä½ç½®éƒ½å¯ä»¥é…ç½®ï¼Œé‚£ä¹ˆå½“è¿™å››ä¸ªä½ç½®å‘ç”Ÿå†²çªæ—¶ï¼Œä»¥è°çš„ä¸ºå‡†å‘¢? æ‰€ä»¥è¿™å››ä¸ªä½ç½®æ˜¯æœ‰ä¼˜å…ˆçº§çš„å…³ç³»çš„ï¼Œå¦‚ä¸‹ file:/config/ &gt; file:/ &gt; classpath:/config/ &gt; classpath:/(é»˜è®¤) æ•°æ®è®¿é—®åœ¨æœ¬å°èŠ‚ä¸­æ¥è®²å¦‚ä½•ä½¿ç”¨ SpringBoot è®¿é—®æ•°æ®åº“ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œç›¸å…³ sql è¯­å¥å¦‚ä¸‹ create database test;use test;create table account( id int auto_increment, name varchar(20) not null, money double default 0 not null, constraint account_pk primary key (id));insert into account(name, money) values ('Alice', 2000.0), ('Bob', 3000.0) ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†æ•°æ®åº“ testï¼Œå¹¶åœ¨ä¸‹é¢æ–°å»ºäº†ä¸€ä¸ª account è¡¨ï¼Œæ‰§è¡Œå®Œä¸Šé¢çš„è¯­å¥åï¼Œaccount è¡¨çš„å†…å®¹å¦‚ä¸‹ JDBCé…ç½®å¥½æ•°æ®åº“çš„å†…å®¹ä»¥åï¼Œæˆ‘ä»¬å°±æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®çš„æ­¥éª¤åœ¨æ–‡ç« çš„å¼€å¤´ï¼Œä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨æ·»åŠ ä¾èµ–çš„éƒ¨åˆ†éœ€è¦æ·»åŠ  JDBC API ä»¥åŠ MySQL Driverï¼Œå¦‚ä¸‹ æ¥ç€æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ•°æ®åº“çš„ç›¸å…³é…ç½®ï¼Œå¦‚ä¸‹ spring: datasource: username: root password: root url: jdbc:mysql:///test driver-class-name: com.mysql.jdbc.Driver æ¥ç€æˆ‘ä»¬åœ¨å¯åŠ¨ç±»æ‰€åœ¨åŒ…ä¸‹æ–°å»ºåŒ… controller å¹¶æ–°å»ºç±» HelloController package com.xt.jdbc.controller;import com.xt.jdbc.entity.Account;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RestController;import java.util.Map;@RestControllerpublic class HelloController &#123; @Autowired private JdbcTemplate jdbcTemplate; @GetMapping(\"/account/&#123;id&#125;\") public Map getAccountById(@PathVariable(\"id\") Integer id) &#123; Map map = jdbcTemplate.queryForMap(\"select * from account where id = ?\", id); return map; &#125;&#125; MyBatisæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œåœ¨æ·»åŠ ä¾èµ–çš„éƒ¨åˆ†ï¼Œæ·»åŠ å¦‚ä¸‹ä¾èµ– åœ¨ application.yml é…ç½®æ•°æ®æºï¼ŒåŒä¸Š JDBCã€‚æ¥ç€æˆ‘ä»¬æ–°å»ºä¸€ä¸ªåŒ… entity æ”¾ç½®ä¸è¡¨ account å¯¹è±¡çš„å®ä½“ç±»ï¼Œå¦‚ä¸‹ package com.example.mybatis.entity;public class Account &#123; private Integer id; private String name; private Double money; public Integer getId() &#123; return id; &#125; public void setId(Integer id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Double getMoney() &#123; return money; &#125; public void setMoney(Double money) &#123; this.money = money; &#125; @Override public String toString() &#123; return \"Account&#123;\" + \"id=\" + id + \", name='\" + name + '\\'' + \", money=\" + money + '&#125;'; &#125;&#125; æ¥ç€æ–°å»ºåŒ… mapperï¼Œè¯¥åŒ…ä¸‹æ”¾ç½®çš„æœ‰å…³ MyBatis æ“ä½œæ•°æ®åº“çš„æ¥å£ï¼Œæˆ‘ä»¬æ–°å»º AccountMapper å¦‚ä¸‹ package com.example.mybatis.mapper;import com.example.mybatis.entity.Account;import org.apache.ibatis.annotations.Mapper;import org.apache.ibatis.annotations.Select;import org.apache.ibatis.annotations.Update;@Mapperpublic interface AccountMapper &#123; @Select(\"select * from account where id = #&#123;id&#125;\") public Account findById(Integer id); @Update(\"update account set money = #&#123;money&#125; where id = #&#123;id&#125;\") public void updateById(Integer id, Double money);&#125; æˆ‘ä»¬ä½¿ç”¨ @Mapper è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª MyBatis çš„ Mapper ç±»ï¼Œæ¥ç€æˆ‘ä»¬æ–°å»ºä¸€ä¸ª controller ä»¥åŠä¸€ä¸ªç±»ï¼Œå¦‚ä¸‹ package com.example.mybatis.controller;import com.example.mybatis.entity.Account;import com.example.mybatis.mapper.AccountMapper;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class HelloController &#123; @Autowired private AccountMapper accountMapper; @GetMapping(\"/account/&#123;id&#125;\") public Account getAccountById(@PathVariable Integer id) &#123; return accountMapper.findById(id); &#125; @PostMapping(\"/account/&#123;id&#125;/&#123;money&#125;\") public void updateMoneyById(@PathVariable(\"id\") Integer id, @PathVariable(\"money\") Double money) &#123; accountMapper.updateById(id, money); &#125;&#125; é¦–å…ˆæˆ‘ä»¬å‘ç°ä¸€ä¸ªè¯·æ±‚æŸ¥è¯¢ id ä¸º 2 çš„ç”¨æˆ·ä¿¡æ¯ æ¥ç€æˆ‘ä»¬å‘èµ·è¯·æ±‚ä¿®æ”¹ id ä¸º 2 çš„è´¦æˆ·çš„ money æœ€åæˆ‘ä»¬å†æ¬¡æŸ¥è¯¢ id ä¸º 2 çš„è´¦æˆ·ï¼Œè§‚å¯Ÿæ•°æ®æ˜¯å¦å·²ç»ä¿®æ”¹ JPAæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”æ·»åŠ å¦‚ä¸‹ä¾èµ– ä½¿ç”¨ JPA æ“ä½œæ•°æ®åº“ï¼Œå®ƒä¼šæ ¹æ®æˆ‘ä»¬åˆ›å»ºçš„å®ä½“ç±»æ¥è‡ªåŠ¨çš„ç”Ÿæˆå¯¹åº”çš„è¡¨ï¼Œä¸éœ€è¦æˆ‘ä»¬å†™åˆ›å»ºè¡¨çš„ sql è¯­å¥ï¼Œå¦å¤–å®ƒæä¾›äº†ç®€å•çš„ sql è¯­å¥ï¼Œå¯¹äºç®€å•çš„æŸ¥è¯¢ï¼Œæ›´æ–°æˆ‘ä»¬ä¸éœ€è¦å†™ä»»ä½•çš„ sql è¯­å¥ï¼Œæ‰€ä»¥ä½¿ç”¨ JPA æ“ä½œæ•°æ®åº“æˆ‘ä»¬åªéœ€è¦ç¼–å†™å®ä½“ç±»å³å¯ã€‚ åœ¨ application.yml ä¸­ç¼–å†™é…ç½®å¦‚ä¸‹ spring: datasource: username: root password: root url: jdbc:mysql:///test driver-class-name: com.mysql.jdbc.Driver jpa: hibernate: ddl-auto: update show-sql: true åœ¨è¿™é‡Œæˆ‘ä»¬å¤šæ·»åŠ äº†ä¸¤é¡¹é…ç½®ï¼Œå…¶ä¸­ show-sql è®¾ç½®ä¸º true è¡¨ç¤ºåœ¨æ§åˆ¶å°æ˜¾ç¤º sql è¯­å¥ï¼Œæ²¡ä»€ä¹ˆè¯´çš„ï¼Œddl-auto çš„å€¼è®¾ç½®ä¸º updateï¼Œæˆ‘ä»¬è®²ä¸€ä¸‹ï¼Œddl-auto æœ‰å››ç§å–å€¼ å–å€¼ åŠŸèƒ½ create ä¼šæ ¹æ®å®ä½“ç±»åˆ›å»ºè¡¨ï¼Œå¦‚æœæ•°æ®åº“å·²æœ‰è¡¨ï¼Œåˆ™ä¼šåˆ é™¤ create-drop åœ¨ create çš„åŸºç¡€ä¸Šï¼Œåœ¨åº”ç”¨å…³é—­å‰åˆ é™¤è¡¨ update å¦‚æœæ•°æ®åº“ä¸­å·²æœ‰è¡¨ï¼Œä¸ä¼šåˆ é™¤å·²æœ‰çš„è¡¨ï¼Œåœ¨å·²æœ‰çš„è¡¨ä¸Šè¿›è¡Œæ›´æ–°æ“ä½œ validate ä¼šå¯¹æ•°æ®åº“ä¸­å·²æœ‰çš„è¡¨è¿›è¡ŒéªŒè¯ï¼Œæ˜¯å¦ä¸å®ä½“ç±»è§„å®šçš„ç»“æ„ç›¸ç¬¦ å‰é¢ä¸¤ä¸ªé€šå¸¸ä¼šå¯¼è‡´æ•°æ®æ¶ˆå¤±ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ update å’Œ validateï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† updateã€‚æ¥ç€æˆ‘ä»¬æ–°å»ºä¸€ä¸ªå®ä½“ç±»ï¼ŒJPA ä¼šæ ¹æ®è¯¥å®ä½“ç±»åˆ›å»ºè¡¨ package com.example.jpa.entity;import javax.persistence.*;@Entity@Table(name = \"account\")public class Account &#123; @Id // è®¾ç½®ä¸»é”® @GeneratedValue(strategy = GenerationType.IDENTITY) // ä¸»é”®è‡ªå¢é•¿ private Integer id; @Column(name = \"name\") // è®¾ç½®åˆ—å private String name; @Column(name = \"money\") private Double money;&#125; æˆ‘ä»¬ä½¿ç”¨ @Entity è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼Œä½¿ç”¨ @Table è®¾ç½®äº†è¯¥å®ä½“ç±»å¯¹åº”çš„è¡¨åï¼Œä½¿ç”¨ @Id è®¾ç½®è¯¥å±æ€§ä¸ºä¸»é”®ï¼Œä½¿ç”¨ @GeneratedValue(strategy = GenerationType.IDENTITY) æ¥è®¾ç½®ä¸»é”®è‡ªå¢ï¼Œä½¿ç”¨ @Column è®¾ç½®å±æ€§å¯¹äºçš„åˆ—åã€‚ æ¥ç€æˆ‘ä»¬æ–°å»ºåŒ… repositoryï¼Œå¹¶ä¸”åœ¨è¯¥åŒ…ä¸‹æ–°å»ºæ¥å£ AccountRepository package com.example.jpa.repository;import com.example.jpa.entity.Account;import org.springframework.data.jpa.repository.JpaRepository;public interface AccountRepository extends JpaRepository&lt;Account, Integer&gt; &#123;&#125; æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­¤æ¥å£æ¥æ“ä½œæ•°æ®åº“ã€‚ æ¥ç€æˆ‘ä»¬æ–°å»º controller åŒ…ï¼Œå¹¶æ–°å»ºç±»å¦‚ä¸‹ package com.example.jpa.controller;import com.example.jpa.entity.Account;import com.example.jpa.repository.AccountRepository;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RestController;import java.util.List;@RestControllerpublic class HelloController &#123; @Autowired private AccountRepository accountRepository; @PostMapping(\"/account/&#123;id&#125;/&#123;name&#125;/&#123;money&#125;\") public List&lt;Account&gt; saveAccount(Account account) &#123; accountRepository.save(account); return accountRepository.findAll(); &#125;&#125; ä¸Šé¢çš„ç¨‹åºä¼šåœ¨æ¥åˆ°è¯·æ±‚ä»¥åä¼šè‡ªåŠ¨å°†å‚æ•°å°è£…ä¸ºä¸€ä¸ª Account å¯¹è±¡ï¼Œç„¶åå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œæ¥ç€è¿”å›æ•°æ®åº“ä¸­çš„æ‰€æœ‰ Account å¯¹è±¡","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Spring-Boot/"}]},{"title":"å°çƒä¼šåœä¸‹æ¥å—","date":"2020-08-30T10:40:00.000Z","path":"/å°çƒä¼šåœä¸‹æ¥å—/","text":"åœ¨é«˜ä¸­çš„æ—¶å€™æˆ‘æœ‰è¿™ä¹ˆä¸€ä¸ªæ€è€ƒï¼Œçµæ„Ÿæºäºä¸€é“ç‰©ç†é¢˜ç›® ä¸€ä¸ªå°çƒä»é«˜åº¦ä¸º $h$ çš„åœ°æ–¹ä¸‹è½ï¼Œè½åœ¨åœ°é¢ä¸Šæ¥ç€å¼¹èµ·ï¼Œä½†æ˜¯ç”±äºä¸åœ°é¢ç¢°æ’é€ æˆèƒ½é‡æŸå¤±ï¼Œä½¿å¾—æ¯æ¬¡å¼¹èµ·çš„é«˜åº¦åªæœ‰ä¹‹å‰é«˜åº¦çš„ $1/4$ã€‚ è¿™é“é¢˜ç›®çœ‹èµ·æ¥æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå½“æ—¶æˆ‘çš„æƒ³æ³•æ˜¯æ¯æ¬¡çƒçš„é«˜åº¦éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ $1/4$ï¼Œæ‰€ä»¥çƒæ˜¯ä¼šä¸€ç›´è¿™æ ·å¼¹ä¸‹å»çš„ï¼Œå°±åƒæ˜¯åº„å­è¯´çš„ ä¸€å°ºä¹‹æ£°ï¼Œæ—¥å–å…¶åŠï¼Œä¸‡ä¸–ä¸ç«­ã€‚ æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼Œå°çƒä¼šä¸€ç›´è¿åŠ¨ä¸‹å»ï¼Œæ‰€ä»¥å°çƒçš„è¿åŠ¨æ—¶é—´ä¸ºæ— ç©·å¤§ã€‚ ä½†æ˜¯å½“æˆ‘è®¡ç®—æ—¶å´å‘ç°ä¸å¯¹åŠ²ï¼Œå‡è®¾ä»é«˜åº¦ä¸º $h$ é™è½æ‰€éœ€çš„æ—¶é—´ä¸º $t_0$ï¼Œç”±äºä¸‹é™æ‰€éœ€æ—¶é—´ $t \\propto \\sqrt{h}$ ï¼Œé‚£ä¹ˆ $h/4$ ä¸‹é™æ‰€éœ€çš„æ—¶é—´ä¸º $t_0/2$ï¼Œæ¢å¥è¯è¯´ï¼Œæ¯æ¬¡ä¸Šå‡ç„¶åä¸‹é™æ‰€éœ€çš„æ—¶é—´ä¸ºä¹‹å‰æ‰€éœ€æ—¶é—´çš„ä¸€åŠï¼Œæ‰€ä»¥è€—è´¹çš„æ—¶é—´çš„æ•°åˆ—ä¸º$$t_0, , \\frac{t_0}{2}, , \\frac{t_0}{2^2}, , \\dots, ,\\frac{t_0}{2^n}, , \\dots$$è¿™æ˜¯ä¸€ä¸ªç­‰æ¯”æ•°åˆ—ï¼Œå…¬æ¯”ä¸º $1/2$ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸ªæ•°åˆ—æ±‚å’Œ$$t_0 \\lim_\\limits{n \\to \\infty}\\sum_{i=0}^{n} \\frac{1}{2^i} = 2t_0$$æˆ‘ä»¬å¾—åˆ°è¿™ä¹ˆä¸€ä¸ªäº‹å®ï¼Œå°çƒçš„è¿åŠ¨æ—¶é—´ä¸ä¼šè¶…è¿‡ $2t_0$ï¼Œä¹Ÿå°±æ˜¯è¯´å°çƒä¼šåœ¨ $2t_0$ ååœä¸‹ï¼Œè¿™ä¸æˆ‘åœ¨ä¹‹å‰å¾—åˆ°çš„ç»“è®ºç›¸åï¼Œå°çƒåº”è¯¥ä¼šä¸€ç›´å¼¹ä¸‹å»ï¼Œæ€ä¹ˆä¼šåœä¸‹æ¥å‘¢? æ‰€ä»¥æˆ‘å½“æ—¶ä¸€ç›´åœ¨è‹¦æ¼ï¼Œå°çƒåˆ°åº•ä¼šä¸ä¼šåœä¸‹æ¥? æˆ‘ä¸èº«è¾¹çš„åŒå­¦è®¨è®ºè¿‡è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ˜¾ç„¶ä»–ä»¬ä¸ä»…æ²¡æœ‰ç»™æˆ‘æ­£ç¡®çš„ç­”æ¡ˆï¼Œåè€Œæœ€åä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ã€‚è€Œä¸”è¿™ä¸ªé—®é¢˜ä¸€ç›´æ²¡æœ‰å¾—åˆ°è§£ç­”ï¼Œæ¸æ¸çš„æˆ‘ä¹Ÿå°±å¿˜äº†è¿™ä¸ªé—®é¢˜ï¼Œæ¯•ç«Ÿè¿™ç§é—®é¢˜ä¸ä¼šå†è€ƒå·ä¸Šå‡ºç°ï¼Œä¹Ÿä¸ä¼šå½±å“æˆ‘çš„å­¦ä¹ ã€‚ è€Œç°åœ¨æˆ‘çªç„¶æƒ³èµ·è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºæˆ‘æœ€è¿‘åœ¨çœ‹ä¸€æœ¬ä¹¦ã€Šä¸Šå¸æ·éª°å­å—?ï¼šé‡å­ç‰©ç†å²è¯ã€‹ï¼Œè¿™æœ¬ä¹¦æ˜¯è®²é‡å­åŠ›å­¦çš„å†å²çš„ï¼Œè¿™æœ¬ä¹¦ç»™äº†æˆ‘ä¸€ä¸ªå¯å‘æ¥è§£å†³æˆ‘ä¸Šé¢çš„ç–‘æƒ‘ã€‚ æƒ³å¿…åœ¨æˆ‘ä»¬å¤§éƒ¨åˆ†çš„è®¤çŸ¥ä¸­ï¼Œæˆ‘ä»¬ä¼šè§‰å¾—è®¤ä¸ºæ—¶é—´æ˜¯è¿ç»­çš„ï¼Œç©ºé—´æ˜¯è¿ç»­çš„ï¼Œèƒ½é‡ä¹Ÿæ˜¯è¿ç»­çš„ã€‚æ±½è½¦é€Ÿåº¦ä» $0km/h$ åŠ é€Ÿåˆ° $100km/h$ï¼Œé‚£ä¹ˆé€Ÿåº¦ä¸€å®šä¼šç»è¿‡ $25km/h$ï¼Œå› ä¸ºé€Ÿåº¦å®ƒæ˜¯è¿ç»­å˜åŒ–çš„ï¼›æ¸©åº¦ä» $0^{o}C$ ä¸Šå‡åˆ° $100^{o}C$ï¼Œé‚£ä¹ˆå®ƒä¸€å®šä¼šç»è¿‡ $25^{o}C$ï¼Œå› ä¸ºæ¸©åº¦ä¹Ÿæ˜¯è¿ç»­å˜åŒ–çš„ã€‚ é‡å­åŠ›å­¦çš„åˆ›å§‹è€…æ™®æœ—å…‹åœ¨ç ”ç©¶ç‰©ç†é—®é¢˜æ—¶ï¼Œç”±äºæ•°å­¦å¤„ç†çš„éœ€è¦ï¼Œä»–å‡è®¾èƒ½é‡å®ƒä¸æ˜¯è¿ç»­çš„ï¼Œè€Œæ˜¯ç¦»æ•£çš„ï¼Œæœ‰ç€æœ€å°å•ä½ï¼Œè€Œèƒ½é‡çš„å¤§å°åªèƒ½ä¸ºè¿™äº›æœ€å°å•ä½çš„æ•´æ•°å€ã€‚æ™®æœ—å…‹å¸¦æ¥è¿™ä¹ˆä¸€ç§è§‚å¿µï¼Œèƒ½é‡æ˜¯ç¦»æ•£çš„ï¼Œè€Œä¸æ˜¯è¿ç»­çš„ï¼Œè¿™åœ¨å½“æ—¶ç®€ç›´å°±æ˜¯å¼‚ç±»å­¦è¯´ï¼Œç”šè‡³åœ¨æ™®æœ—å…‹æœ€åˆæå‡ºè¿™ä¹ˆä¸€ä¸ªæ¦‚å¿µæ—¶ï¼Œä»–è‡ªå·±éƒ½ä¸ç›¸ä¿¡ã€‚ä½†æ˜¯æœ€åæˆ‘ä»¬çŸ¥é“é‡å­åŠ›å­¦å®ƒæ˜¯å¯¹çš„ï¼Œèƒ½é‡å¹¶ä¸æ˜¯è¿ç»­çš„ï¼Œè€Œæ˜¯ç¦»æ•£çš„ï¼Œåªæ˜¯èƒ½é‡çš„æœ€å°å•ä½éå¸¸å°ï¼Œå¯Ÿè§‰ä¸å‡ºæ¥è€Œå·²ã€‚ æ‰€ä»¥è¿™ç»™æˆ‘å¸¦æ¥çš„å¯å‘å°±æ˜¯ï¼Œç©ºé—´å®ƒæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯ç¦»æ•£çš„ï¼Œå®ƒæ˜¯ä¸æ˜¯ä¹Ÿæœ‰ç€æœ€å°çš„å•ä½ï¼Œåªæ˜¯è¿™ä¸ªå•ä½ç‰¹åˆ«å°ï¼Œæˆ‘ä»¬å¯Ÿè§‰ä¸å‡ºæ¥è€Œå·²ã€‚å¦‚æœç©ºé—´ä¹Ÿæœ‰ç€æœ€å°çš„å•ä½ï¼Œé‚£å½“æˆ‘ä»¬çš„é«˜åº¦å·²ç»æ˜¯æœ€å°å•ä½æ—¶ï¼Œå®ƒæ˜¯ä¸æ˜¯å°±ä¼šåœä¸‹æ¥ï¼Œå› ä¸ºå®ƒä¸å¯èƒ½è¾¾åˆ°æœ€å°å•ä½çš„ $1/4$ï¼Œå› ä¸ºå·²ç»æ˜¯æœ€å°äº†ï¼Œå¦‚æœæ¯”æœ€å°å•ä½è¿˜å°ï¼Œé‚£è¿˜èƒ½å«åšæœ€å°å•ä½å—ã€‚ æ‰€ä»¥æˆ‘çš„ç»“è®ºå°±æ˜¯å°çƒä¼šåœä¸‹æ¥ï¼Œå®ƒä¸ä¼šæ°¸è¿œçš„å¼¹ä¸‹å»ï¼Œå› ä¸ºç©ºé—´æœ‰æœ€å°å•ä½ã€‚ åœ¨è¿™é‡Œæˆ‘åˆæƒ³èµ·äº†ä¸€ä¸ªæ‚–è®ºï¼Œé‚£å°±æ˜¯èŠæ´›æ‚–è®ºï¼š ä¸€ä¸ªäººå’Œä¸€åªä¹Œé¾Ÿè¿›è¡Œèµ›è·‘ï¼Œä¹Œé¾Ÿçš„é€Ÿåº¦ä¸º $0.1m/s$ï¼Œäººçš„é€Ÿåº¦ä¸º $10m/s$ï¼Œä¹Œé¾Ÿåœ¨äººå‰æ–¹ $100m$ï¼Œé‚£ä¹ˆè¿™ä¸ªæ‚–è®ºå°±æ˜¯äººæ°¸è¿œè¿½ä¸ä¸Šä¹Œé¾Ÿï¼Œåªèƒ½åœ¨æ— é™çš„é€¼è¿‘ä¹Œé¾Ÿï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹? å‡è®¾ä¹Œé¾Ÿåœ¨ç‚¹ $B$ï¼Œäººåœ¨ç‚¹ $A$ï¼Œäººè¦è¿½ä¸Šä¹Œé¾Ÿå°±å¿…é¡»è¦ç»è¿‡ $B$ ç‚¹ ä½†æ˜¯å½“äººåˆ°è¾¾ $B$ ç‚¹æ—¶ï¼Œä¹Œé¾Ÿå·²ç»åˆ°è¾¾ $C$ ç‚¹äº† åŒç†ï¼Œäººå¦‚æœè¦è¿½ä¸Šä¹Œé¾Ÿçš„è¯ï¼Œå°±å¿…é¡»ä¼šç»è¿‡ $C$ ç‚¹ï¼Œè€Œå½“äººåˆ°è¾¾ $C$ ç‚¹æ—¶ï¼Œä¹Œé¾Ÿå·²ç»å»äº† $D$ ç‚¹äº†ï¼Œå¦‚æ­¤å¾€å¤ï¼Œäººæ°¸è¿œéƒ½ä¸å¯èƒ½è¿½ä¸Šä¹Œé¾Ÿï¼Œåªå¯èƒ½åœ¨æ— é™çš„é€¼è¿‘ã€‚è¿™ä¸æˆ‘ä»¬çš„å®é™…ä¸ç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ¥åå¯¹è¿™ä¹ˆä¸€ä¸ªæ‚–è®º? æˆ‘ä»¬å‡è®¾æ—¶é—´å’Œç©ºé—´ä¸æ˜¯è¿ç»­çš„ï¼Œä¸èƒ½å¤Ÿæ°¸è¿œçš„åˆ†å‰²ä¸‹å»ï¼Œå®ƒä»¬éƒ½æœ‰ç€æœ€å°çš„å•ä½ï¼Œå³æ—¶é—´å’Œç©ºé—´éƒ½æ˜¯ç¦»æ•£çš„ã€‚åœ¨è¿™æ ·çš„å‡è®¾ä¸‹ï¼Œé‚£ä¹ˆäººå°±ä¸ä¼šæ— é™çš„é€¼è¿‘ä¹Œé¾Ÿï¼Œæ‰€è°“çš„æ— é™çš„é€¼è¿‘ä¹Œé¾Ÿï¼ŒæŒ‡çš„å°±æ˜¯äººä¸ä¹Œé¾Ÿä¹‹é—´çš„è·ç¦»æ— é™çš„è¶‹è¿‘äº $0$ï¼Œä½†æ˜¯æˆ‘ä»¬å‡è®¾ç©ºé—´å®ƒä¸æ˜¯è¿ç»­çš„ï¼Œå³äººä¸ç©ºé—´ä¹‹é—´çš„è·ç¦»ä¸ä¼šæ— é™çš„å°ï¼Œæœ€å°ä¹Ÿåªå¯èƒ½æ˜¯ä¸€ä¸ªç©ºé—´æœ€å°å•ä½ã€‚ é‚£ä»€ä¹ˆæ—¶å€™äººä¼šè¶…è¿‡ä¹Œé¾Ÿå‘¢? æˆ‘ä»¬ä¸å¦¨å‡è®¾äººåœ¨ $1$ ä¸ªæ—¶é—´æœ€å°å•ä½ä¸­èƒ½å¤Ÿç§»åŠ¨ $10$ ä¸ªç©ºé—´æœ€å°å•ä½ï¼Œè€Œä¹Œé¾Ÿåœ¨åœ¨ $1$ ä¸ªæ—¶é—´æœ€å°å•ä½ä¸­èƒ½å¤Ÿç§»åŠ¨ $1$ ä¸ªç©ºé—´æœ€å°å•ä½ï¼Œå½“äººä¸ä¹Œé¾Ÿä¹‹é—´çš„è·ç¦»å°äº $9$ ä¸ªç©ºé—´æœ€å°å•ä½æ—¶ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€ä¸ªæ—¶é—´æœ€å°å•ä½ï¼Œäººå°±è¶…è¿‡äº†ä¹Œé¾Ÿã€‚ æ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªä¸–ç•Œçš„æœ¬è´¨ä¸æ˜¯è¿ç»­çš„ï¼Œè€Œæ˜¯ç¦»æ•£çš„ã€‚","tags":[{"name":"ä¸–ç•Œè§‚","slug":"ä¸–ç•Œè§‚","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E4%B8%96%E7%95%8C%E8%A7%82/"}]},{"title":"ä¸¤æ•°ä¹‹å’Œ","date":"2020-08-19T15:45:00.000Z","path":"/ä¸¤æ•°ä¹‹å’Œ/","text":"ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ä¸¤ä¸ªæ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆï¼Œä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚ ç¤ºä¾‹ï¼š &gt;ç»™å®š nums = [2, 7, 11, 15], target = 9&gt;å› ä¸º nums[0] + nums[1] = 2 + 7 = 9&gt;æ‰€ä»¥è¿”å› [0, 1] è§£å†³è¯¥æ–¹æ³•æœ€å®¹æ˜“çš„ç‰ˆæœ¬æ˜¯ï¼Œé¦–å…ˆå›ºå®šä¸€ä¸ªæ•° nums[i]ï¼Œç„¶åéå†æ•°ç»„æŸ¥çœ‹æ˜¯å¦åŒ…å« target-nums[i] çš„æ•°å­—ï¼Œä»£ç å¦‚ä¸‹ï¼š public int[] twoSum(int[] nums, int target) &#123; int[] res = new int[2]; // é¦–å…ˆå›ºå®š nums[i] for (int i = 0; i &lt; nums.length - 1; i++) &#123; // æ¥ç€åœ¨å‰©ä¸‹çš„æ•°å­—æŸ¥æ‰¾æ˜¯å¦æœ‰æ•°å­—ç­‰äº target - nums[j] // æˆ–è€…è¯´ nums[i] + nums[j] = target for (int j = i + 1; j &lt; nums.length; j++) &#123; if (nums[i] + nums[j] == target) &#123; res[0] = i; res[1] = j; return res; &#125; &#125; &#125; return res;&#125; ä½¿ç”¨è¿™ç§åŒé‡å¾ªç¯çš„æ–¹æ³•ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$ã€‚ é‚£æœ‰æ²¡æœ‰åªéœ€è¦æ‰«æä¸€éæ•°ç»„å³å¯ä»¥ç¡®å®šç­”æ¡ˆçš„åŠæ³•ï¼Œç­”æ¡ˆæ˜¯æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å“ˆå¸Œè¡¨åšè¿™ä»¶äº‹æƒ…ã€‚æˆ‘ä»¬åœ¨éå†æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬å°†æ•°ç»„ä¸­çš„æ•°å­—ä»¥åŠå¯¹åº”çš„ä¸‹æ ‡ä»¥é”®å€¼å¯¹çš„å½¢å¼æ·»åŠ åˆ°ä¸€ä¸ªå“ˆå¸Œè¡¨ä¸­ï¼Œæ¯æ¬¡æˆ‘ä»¬åœ¨éå†ä¸€ä¸ªæ•°å­— nums[i] æ—¶ï¼Œåœ¨æ·»åŠ è¯¥æ•°å­—åˆ°å“ˆå¸Œè¡¨ä¹‹å‰(ä¹‹æ‰€ä»¥æ˜¯ä¹‹å‰ï¼Œä»¥é˜²ä¸€ä¸ªæ•°å­—è¢«ç”¨ä¸¤æ¬¡ï¼Œå¯ä»¥è‡ªå·±ä¸¾ä¸ªä¾‹å­æƒ³æƒ³)ï¼Œéƒ½åœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰æ•°å­—ä¸º target - nums[i]ï¼Œå› ä¸ºå‘å“ˆå¸Œè¡¨æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ï¼Œæ‰€ä»¥è¿™ç§åªç”¨éå†ä¸€éæ•°ç»„å³å¯çŸ¥é“è§£çš„æ–¹æ³•ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œä»£ç å¦‚ä¸‹ï¼š public int[] twoSum(int[] nums, int target) &#123; int[] res = new int[2]; HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); for (int i = 0; i &lt; nums.length; i++) &#123; // é¦–å…ˆè¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢å®Œäº†åœ¨å°† nums[i] æ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­ if (map.containsKey(target - nums[i])) &#123; res[0] = map.get(target - nums[i]); res[1] = i; break; &#125; map.put(nums[i], i); &#125; return res;&#125; ç°åœ¨æˆ‘ä»¬å¯¹ä¸Šé¢çš„é¢˜ç›®åŠ ä¸ªæ¡ä»¶ï¼Œç»™å®šçš„æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œä¸”æ˜¯ä»å°åˆ°å¤§æ’åºçš„ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å¿«çš„æ–¹æ³•æ¥æ‰¾åˆ°ç­”æ¡ˆã€‚ å¦‚æœæ•°ç»„æ˜¯æœ‰åºçš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆçš„è§£æ³•ï¼Œé¦–å…ˆä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ•°ç»„çš„å¼€å¤´ï¼Œå³æœ€å°çš„é‚£ä¸ªæ•°å­—ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ•°ç»„çš„æœ«å°¾ï¼Œå³æœ€å¤§çš„é‚£ä¸ªæ•°å­—ã€‚æ¥ç€æˆ‘ä»¬é€šè¿‡ç§»åŠ¨è¿™ä¸¤ä¸ªæŒ‡é’ˆæ¥æ‰¾åˆ°ç­”æ¡ˆ å¦‚æœè¿™ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°å­—ä¹‹å’Œå¤§äº targetï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦å°†æŒ‡å‘æœ«å°¾çš„æŒ‡é’ˆå‘å‰ç§»ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°æ˜¯æœ€å°çš„æ•°ï¼Œæ‰€ä»¥è¿™æ—¶ä»»ä½•æ•°åŠ ä¸Šåä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°éƒ½ä¼šæ¯” target å¤§ï¼Œæ‰€ä»¥è¯¥æ•°ä¸å¯èƒ½æ˜¯è§£ï¼Œæ’é™¤ å¦‚æœå°äºï¼Œé‚£ä¹ˆæŒ‡å‘å¼€å¤´çš„æŒ‡é’ˆå‘å‰ç§»ï¼Œé“ç†åŒä¸Šï¼Œå› ä¸ºè¿™æ—¶ä»»ä½•ä¸€ä¸ªæ•°å’Œç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°ç›¸åŠ éƒ½å°äº targetï¼Œæ‰€ä»¥è¯¥æŒ‡é’ˆæŒ‡å‘çš„æ•°ä¸å¯èƒ½æ˜¯è§£ï¼Œæ’é™¤ å¦‚æœç­‰äºï¼Œé‚£å°±æ˜¯æ‰¾åˆ°äº† ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼š ä»£ç å¦‚ä¸‹ï¼š public int[] twoSum(int[] nums, int target) &#123; int p1 = 0; int p2 = nums.length - 1; int[] res = new int[2]; while (p1 &lt; p2) &#123; if (nums[p1] + nums[p2] == targets) &#123; res[0] = p1; res[1] = p2; break; &#125; if (nums[p1] + nums[p2] &lt; target) &#123; p1++; &#125; else &#123; p2--; &#125; &#125; return res;&#125;","tags":[{"name":"leetcode","slug":"leetcode","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/leetcode/"}]},{"title":"Webpackå…¥é—¨","date":"2020-07-18T16:00:00.000Z","path":"/Webpackå…¥é—¨/","text":"Webpackä»‹ç»webpack æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘ä»¬éœ€è¦åœ¨å­¦ä¹  webpack çš„ç”¨æ³•ä¹‹å‰éœ€è¦äº†è§£çš„ã€‚ å¦‚æœä½ ä¸Šç½‘å»æœçš„è¯ï¼Œä¸€èˆ¬çš„ä»‹ç»æ˜¯å®ƒæ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œé‚£ä¹ˆä»€ä¹ˆåˆå«åšæ‰“åŒ…å·¥å…·? ç”±äºç°åœ¨çš„å¼€å‘éƒ½æ˜¯å¤šäººåä½œå¼€å‘ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šå°†åŠŸèƒ½åˆ†æˆä¸€ä¸ªä¸ªçš„æ¨¡å—ç”±ä¸åŒç¨‹åºå‘˜å¼€å‘ï¼Œä½†æ˜¯è¿™äº›æ¨¡å—ä¹‹é—´å¹¶ä¸æ˜¯æ¯«æ— å…³è”çš„ï¼Œæ¨¡å—ä¹‹é—´ä¼šæœ‰ä¾èµ–å…³ç³»ã€‚æˆ‘ä»¬åˆ†å¼€ä¸ºäº†å¤šä¸ªæ–‡ä»¶ï¼Œç”±äºä¾èµ–å…³ç³»å¤æ‚ï¼Œå¦‚æœè¿™äº›æ–‡ä»¶åŠ è½½é¡ºåºä¸å½“ï¼Œå°±æœ‰å¯èƒ½å‘ç”Ÿé”™è¯¯ï¼Œå¦å¤–åˆ†å¼€æˆå¤šä¸ªæ–‡ä»¶ä¹Ÿæ„å‘³ç€æœ‰å¤šä¸ªç½‘ç»œè¯·æ±‚ï¼Œè¿™ä¼šå¯¹æœåŠ¡å™¨é€ æˆå‹åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æœ‰éœ€è¦å°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶çš„éœ€è¦ï¼Œè€Œå°†å¤šä¸ªæ–‡ä»¶åˆæˆæˆä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºæ‰“åŒ…ã€‚ è¿™é‡Œè´´ä¸€å¼ å®˜ç½‘çš„å›¾ç‰‡ é€šè¿‡å®˜ç½‘çš„å›¾ç‰‡å¯ä»¥çœ‹å‡ºï¼Œwebpack å¯ä»¥å°†ä¾èµ–çš„æ–‡ä»¶æ‰“åŒ…æˆå•ä¸ªçš„èµ„æºæ–‡ä»¶ã€‚ ä½†æ˜¯ webpack é™¤äº†æ‰“åŒ…ä¹‹å¤–è¿˜æœ‰ä»€ä¹ˆä½œç”¨ï¼Œæˆ–è€…è¯´æˆ‘ä»¬æœ‰ä»€ä¹ˆéœ€æ±‚éœ€è¦å®ƒå¸®æˆ‘ä»¬å»å®Œæˆã€‚ä¾‹å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨é¡¹ç›®ä¸­ä½¿ç”¨é«˜çº§çš„ JS è¯­æ³•ï¼Œæ¯”å¦‚ ES6 æˆ–è€…æ›´é«˜çº§çš„è¯­æ³•ï¼Œå¯æ˜¯æµè§ˆå™¨å¯¹äº ES6 çš„æ”¯æŒå¯èƒ½å¹¶ä¸å®Œå…¨ï¼Œä½†æ˜¯æˆ‘ä»¬å°±æ˜¯æƒ³ç”¨ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æœ‰å°† ES6 åŠæ›´é«˜çº§çš„è¯­æ³•è½¬åŒ–ä¸º ES5 æˆ–æ›´ä½çº§è¯­æ³•çš„éœ€è¦ã€‚ å¦å¤–ï¼Œéšç€é¡¹ç›®çš„å¤æ‚ï¼Œä½¿ç”¨ CSS ç¼–å†™æ ·å¼ä¸èƒ½æ»¡è¶³æ—¥ç›Šå¤æ‚çš„é¡¹ç›®çš„éœ€è¦ï¼Œæˆ–è€…è¯´ CSS å¹¶ä¸æ˜¯ä¸€ä¸ªå·¥ç¨‹è¯­è¨€ï¼Œè¿™ä¸ªæ„æ€æŒ‡ CSS éš¾ä»¥é˜…è¯»ã€ä¿®æ”¹ã€æ‰©å±•ã€‚æ‰€ä»¥å°±å‡ºç°åƒ less scss/sass è¿™æ ·çš„å·¥ç¨‹åŒ–çš„è¯­è¨€ï¼Œå®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„å†™æ ·å¼ï¼Œå¹¶ä¸”ååˆ†æ–¹ä¾¿ç®¡ç†ï¼Œä½†æ˜¯æµè§ˆå™¨å¹¶ä¸è®¤è¯† less scss ç­‰ç¼–å†™çš„æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æœ‰å°† lessã€scss/sass æ–‡ä»¶è½¬åŒ–ä¸º CSS æ–‡ä»¶çš„éœ€è¦ã€‚ å†ä¸€ä¸ªï¼Œæˆ‘ä»¬ä¼šåœ¨é¡¹ç›®ä¸­ç”¨åˆ° TypeScriptï¼Œå› ä¸º JavaScript çš„çµæ´»ä»¥åŠåŠ¨æ€ç‰¹æ€§ï¼Œå¯¼è‡´å¾ˆå¤šçš„é”™è¯¯åªæœ‰åœ¨è¿è¡Œæ—¶æ‰æš´éœ²å‡ºæ¥ï¼Œæ‰€ä»¥ JavaScript å¾ˆå®¹æ˜“å‡ºç° bugï¼Œä½¿ç”¨ TypeScript å¯ä»¥å¤§å¤§å‡å°‘è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œé”™è¯¯å¾€å¾€åœ¨ç¼–è¯‘æ—¶å°±èƒ½å¤Ÿå‘ç°ï¼Œä½†æ˜¯æµè§ˆå™¨å¹¶ä¸æ”¯æŒ TypeScriptï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰å°† TypeScript è½¬åŒ–ä¸º JavaScript çš„éœ€è¦ã€‚ å…¶å®è¿˜æœ‰å¾ˆå¤šçš„éœ€æ±‚ï¼Œæ¯”å¦‚å‹ç¼©æ–‡ä»¶ï¼Œæ¯”å¦‚ä¸º CSS æ ·å¼æ·»åŠ æµè§ˆå™¨å‰ç¼€ç­‰ç­‰ï¼Œè¿™äº›ç­‰åˆ°æˆ‘ä»¬åé¢åœ¨ä»‹ç»ã€‚ webpackå®‰è£…åŠç®€æ˜“å…¥é—¨æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œæˆ‘çš„é¡¹ç›®åä¸º webpack-dev mkdir webpack-devcd webpack-devnpm init -y é€šè¿‡ npm init å‘½ä»¤æˆ‘ä»¬åˆå§‹åŒ–äº†ä¸€ä¸ª npm é¡¹ç›®ï¼Œæ¥ç€æˆ‘ä»¬ä¸‹è½½ webpack å’Œ webpack-cli npm install webpack webpack-cli --save-dev ä¸ºä»€ä¹ˆæ˜¯æœ¬åœ°å®‰è£…è€Œä¸æ˜¯å…¨å±€å®‰è£…ï¼Œå¦‚æœæ˜¯å…¨å±€å®‰è£…çš„è¯ï¼Œåœ¨ä¸åŒçš„ç”µè„‘å¤§å®¶çš„ webpack çš„ç‰ˆæœ¬å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå› ä¸ºç‰ˆæœ¬çš„ä¸åŒè€Œå¸¦æ¥é—®é¢˜ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œæˆ‘ä»¬é€‰æ‹©æœ¬åœ°å±€éƒ¨å®‰è£…ï¼Œç‰ˆæœ¬ä¿¡æ¯ä¼šè¢«ä¿å­˜åœ¨ package.json ä¸­ï¼Œè¿™æ ·å¤§å®¶å®‰è£…æ—¶ç‰ˆæœ¬å°±ä¼šæ˜¯ä¸€æ ·çš„ï¼Œé¿å…äº†ä¸å¿…è¦çš„é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬ webpack ç‰ˆæœ¬å¦‚ä¸‹ \"webpack\": \"^4.43.0\",\"webpack-cli\": \"^3.3.12\" ä¸‹é¢æˆ‘ä»¬æ–°å»ºä¸€ä¸ª src æ–‡ä»¶å¤¹ï¼Œsrc æ–‡ä»¶å¤¹ä¸€èˆ¬æ˜¯æˆ‘ä»¬å¼€å‘æ—¶æ‰€ä½¿ç”¨çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹å†™ä»£ç ï¼Œåœ¨ src ä¸‹æ–°å»º index.js å’Œ util.jsï¼Œå†…å®¹å¦‚ä¸‹ // index.jsimport &#123;add&#125; from './util'let res = add(1, 2);console.log(res); // 3 // util.jsexport const add = (x, y) =&gt; &#123; return x + y;&#125;; ä¸Šé¢ index.js ä¾èµ–äº† util.jsï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œä½¿ç”¨å¦‚ä¸‹ webpack å‘½ä»¤è¿›è¡Œæ‰“åŒ… npx webpack --entry=./src/index.js --output=./dist/bundle.js --mode=development åœ¨å‘½ä»¤è¡Œæœ‰å¦‚ä¸‹è¾“å‡º å¦‚æœå‡ºç°ä¸Šé¢çš„è¾“å‡ºï¼Œè¯´æ˜æ‰“åŒ…æˆåŠŸäº†ã€‚æ¥ä¸‹æ¥è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„å‘½ä»¤ï¼šå› ä¸º webpack æ˜¯æœ¬åœ°å±€éƒ¨å®‰è£…çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ npx æ¥è°ƒç”¨ webpack å‘½ä»¤ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼ é€’äº†ä¸‰ä¸ªå‚æ•° å‚æ•° åŠŸèƒ½ entry æŒ‡å®šæ‰“åŒ…çš„å…¥å£æ–‡ä»¶ output æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶è¾“å‡ºåœ¨å“ªä¸ªç›®å½• mode æŒ‡å®šæ¨¡å¼ æˆ‘ä»¬ä½¿ç”¨ entry æ¥æŒ‡å®šæ‰“åŒ…çš„å…¥å£æ–‡ä»¶ï¼Œå³ webpack ä¼šæ ¹æ®è¯¥å…¥å£æ–‡ä»¶ï¼Œè§£æå®ƒæ‰€ä¾èµ–çš„æ–‡ä»¶ï¼Œå°†è¿™äº›æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼›æˆ‘ä»¬ä½¿ç”¨ output æ¥è¡¨æ˜æ‰€æ‰“åŒ…åçš„é‚£ä¸ªæ–‡ä»¶æ”¾ç½®åœ¨å“ªä¸ªç›®å½•ï¼Œä»¥åŠæ‰“åŒ…åçš„æ–‡ä»¶çš„æ–‡ä»¶åæ˜¯ä»€ä¹ˆï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬è®¾ç½®åœ¨æ‰“åŒ…åçš„æ–‡ä»¶æ”¾åœ¨ dist æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶åä¸º bundle.jsï¼Œä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤ä¹‹åï¼Œå¯ä»¥è§‚å¯Ÿåˆ°è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ª dist æ–‡ä»¶å¤¹ï¼Œä»¥åŠåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ª bundle.js çš„æ–‡ä»¶ mode æ˜¯ç”¨æ¥æŒ‡å®šæ¨¡å¼çš„ï¼Œå¯é€‰çš„é€‰é¡¹æœ‰ development å’Œ productionï¼Œdevelopment æŒ‡çš„æ˜¯å¼€å‘ç¯å¢ƒï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ‰“åŒ…å‡ºæ¥çš„ä»£ç ä¸ä¼šè¢«å‹ç¼©ï¼Œå½“æŒ‡å®š mode ä¸º production æ—¶ï¼Œå³ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œé‚£ä¹ˆæ‰“åŒ…åçš„ä»£ç ä¼šè¢«å‹ç¼©ã€‚ åœ¨ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ ES6 çš„æ¨¡å—è¯­æ³•ï¼Œå³ import å’Œ exportï¼Œä½†æ˜¯å¾ˆå¤šçš„ npm é¡¹ç›®ä½¿ç”¨çš„æ˜¯ CommonJS æ¨¡å—è§„åˆ™ï¼Œå³ require å’Œ module.exportsï¼Œæ‰€ä»¥åœ¨é¡¹ç›®ä¸­å¾ˆå¯èƒ½æˆ‘ä»¬ä¼šåŒæ—¶ä½¿ç”¨ä¸Šé¢ä¸¤ç§æ¨¡å—è¿›è¡Œå¯¼å‡ºå’Œå¯¼å…¥ï¼Œè¿™æ ·çš„ä»£ç æ˜¯ä¸å¯èƒ½åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„ï¼Œä½¿ç”¨ webpack å®ƒå¯ä»¥å¤„ç†è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­è‡ªç”±çš„ä½¿ç”¨è¿™ä¸¤ç§å¯¼å…¥å¯¼å‡ºçš„è§„åˆ™ï¼Œwebpack ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†ä¸ºå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„ä»£ç ï¼Œåœ¨ src ä¸‹æ–°å»º foo.js å¦‚ä¸‹ // foo.jsmodule.exports = &#123; sub: (x, y) =&gt; &#123; return x - y; &#125;&#125;; å¹¶ä¸”ä¿®æ”¹ index.js å¦‚ä¸‹ // index.jsimport &#123;add&#125; from './util'const sub = require('./foo').sub;let res1 = add(1, 2);let res2 = sub(1, 2);console.log(res1); // 3console.log(res2); // -1 åœ¨ index.js ä¸­ï¼Œæˆ‘ä»¬åŒæ—¶åº”ç”¨äº†ä¸¤ç§æ¨¡å—è¯­æ³•ï¼Œæˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­å†æ¬¡æ‰§è¡Œ npx webpack --entry=./src/index.js --output=./dist/bundle.js --mode=development ä¸ºäº†è§‚å¯Ÿæ‰“åŒ…åçš„æ–‡ä»¶æ˜¯å¦èƒ½å¤Ÿåœ¨æµè§ˆå™¨æ‰§è¡Œï¼Œæˆ‘ä»¬åœ¨ dist ä¸‹æ–°å»º index.html å¹¶å¼•ç”¨ bundle.jsï¼Œå¦‚ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;script src=\"bundle.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åœ¨æµè§ˆå™¨æ‰“å¼€ index.htmlï¼Œåœ¨æ§åˆ¶å°å¯ä»¥è§‚å¯Ÿåˆ°å¦‚ä¸‹ å¯è§ webpack ä¸ºæˆ‘ä»¬è‡ªåŠ¨å¤„ç†äº†è¿™ç§è¯­æ³•ã€‚ ä¸ºäº†ä¸æ¯æ¬¡åœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸Šé¢ä¸€è¡Œç‰¹é•¿çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® package.json ä¸­çš„ script å±æ€§ï¼Œå¦‚ä¸‹ \"scripts\": &#123; \"build\": \"webpack --entry=./src/index.js --output=./dist/bundle.js --mode=development\",&#125; ä¸‹é¢æˆ‘ä»¬åªè¦åœ¨å‘½ä»¤è¡Œè¾“å…¥ npm run build å®ƒå°±ä¼šæ‰§è¡Œé‚£ä¸€ä¸²å‘½ä»¤ï¼Œå³å¯è¿›è¡Œæ‰“åŒ…ã€‚ é…ç½®æ–‡ä»¶åœ¨ä¸Šé¢çš„ç®€æ˜“å…¥é—¨ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä¸º webpack å†™é…ç½®æ–‡ä»¶ï¼Œåªæ˜¯åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®äº† entry output mode è¿™äº›å‚æ•°ï¼Œä½†æ˜¯å…¶å®è¿™äº›å‚æ•°éƒ½æœ‰é»˜è®¤å€¼ å‚æ•° é»˜è®¤å€¼ entry src/index.js output dist/main.js mode production è¿™æ„å‘³ç€å³ä½¿æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸é…ç½®è¿™äº›å‚æ•°ï¼Œä¹Ÿèƒ½å¤Ÿè¿›è¡Œæ­£å¸¸çš„æ‰“åŒ…ï¼Œä¼šåœ¨ dist ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª main.js æ–‡ä»¶è€Œä¸æ˜¯ bundle.js æ–‡ä»¶ã€‚æ‰€ä»¥å¯ä»¥è¯´ webpack æ˜¯é›¶é…ç½®ï¼Œä¸éœ€è¦é…ç½®å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šçš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œä½†æ˜¯é›¶é…ç½®ä¹Ÿæ„å‘³ç€åŠŸèƒ½è¾ƒå¼±ï¼Œä¸ºäº†ä½¿ç”¨ webpack å¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¿…é¡»è¦å­¦ä¹  webpack è®¸è®¸å¤šå¤šçš„é…ç½®ï¼Œä½†æ˜¯è¿™äº›é…ç½®éƒ½å†™åœ¨å‘½ä»¤è¡Œä¸­ï¼Œé‚£æ˜¯ååˆ†çš„ä¸æ–¹ä¾¿ï¼Œè¿™äº›ä¸œè¥¿åº”è¯¥æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚ webpack çš„é»˜è®¤é…ç½®æ–‡ä»¶åä¸º webpack.config.js æˆ–è€… webpackfile.jsï¼Œç”±äºä¸šç•Œå¤§å¤šæ•°ä½¿ç”¨çš„éƒ½æ˜¯ webpack.config.jsï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œä¹Ÿä½¿ç”¨ webpack.config.jsã€‚åœ¨é¡¹ç›®çš„æ ¹ç›®å½•(è€Œä¸æ˜¯ src ç›®å½•)ä¸‹æ–°å»º webpack.config.jsï¼Œå†…å®¹å¦‚ä¸‹ const path = require('path');module.exports = &#123; entry: \"./src/index.js\", output: &#123; filename: \"bundle.js\", path: path.resolve(__dirname, \"dist\") &#125;, mode: \"development\"&#125;; è¿™æ—¶æˆ‘ä»¬å°±ä¸å¿…åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šå‚æ•°äº†ï¼Œæˆ‘ä»¬ä¿®æ”¹ package.json çš„ script å­—æ®µå¦‚ä¸‹ \"scripts\": &#123; \"build\": \"webpack\"&#125; æ¥ç€åœ¨å‘½ä»¤è¡Œè¿è¡Œ npm run build å³å¯çœ‹åˆ°æ‰“åŒ…æˆåŠŸçš„æ¶ˆæ¯ã€‚ä¸‹é¢å°±æ›´åŠ è¯¦ç»†çš„è®²è§£ä¸€ä¸‹ entry å’Œ output çš„é…ç½®ã€‚ entryentry æŒ‡ä»£çš„å°±æ˜¯å…¥å£æ–‡ä»¶ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨ä¸Šé¢å°±å·²ç»ä»‹ç»è¿‡çš„ã€‚å…¶å® entry å¯ä»¥æœ‰å¤šä¸ªå…¥å£ï¼Œwebpack webpack ä¼šæ ¹æ®æ¯ä¸€ä¸ªå…¥å£æ–‡ä»¶æ‰“åŒ…å‡ºä¸€ä¸ª chunk è¿™ä¸ª chunk å¯ä»¥æœ‰åå­—ï¼Œå½“å¦‚ä¸‹é…ç½®æ—¶ entry: \"./src/index.js\" æ‰“åŒ…å‡ºçš„ chunk çš„åå­—é»˜è®¤ä¸º mainã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡çš„æ–¹å¼é…ç½® chunk çš„åå­— entry: &#123; index: \"./src/index.js\" // index è¡¨ç¤º chunk åå­—ï¼Œå¯¹åº”çš„å€¼è¡¨ç¤ºå¯¹åº”çš„å…¥å£æ–‡ä»¶&#125;,output: &#123; filename: \"[name].js\", path: path.resolve(__dirname, \"dist\")&#125;, åœ¨ä¸Šé¢æœ‰ä¸¤å¤„æ”¹åŠ¨ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å°† entry çš„å€¼è®¾ç½®ä¸ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„å€¼è¡¨ç¤ºå…¥å£æ–‡ä»¶ï¼Œè€Œé”®è¡¨ç¤ºå…¥å£æ–‡ä»¶æ‰“åŒ…åçš„ chunk çš„åå­—ï¼›ç¬¬äºŒä¸ªæ”¹åŠ¨å°±æ˜¯åœ¨ output ä¸­æˆ‘ä»¬è®¾ç½®æ‰“åŒ…åçš„æ–‡ä»¶åç§°ä¸º [name].jsï¼Œè¿™ä¸ª [name] æ˜¯ä¸€ä¸ªå˜é‡ï¼ŒæŒ‡çš„å°±æ˜¯ chunk çš„åå­—ï¼Œæˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨çš„å†™æ­»ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯ä½¿æ‰“åŒ…åçš„æ–‡ä»¶åä¸ chunk åå­—ç›¸åŒï¼Œæ‰€ä»¥æ­¤æ—¶è¿è¡Œ npm run build å¯ä»¥åœ¨ dist ç›®å½•ä¸‹æ‰“åŒ…å‡º index.js æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯è¿è¡Œæ‰“åŒ…å‘½ä»¤åœ¨å‘½ä»¤è¡Œçš„è¾“å‡º outputoutput çš„å¸¸è§é…ç½®é€‰é¡¹å¦‚ä¸‹ é€‰é¡¹ åŠŸèƒ½ filename æŒ‡å®šæ–‡ä»¶åç§°ï¼Œå¯ä»¥ä¸º [name] [chunkHash] ä»¥åŠå®ƒä»¬çš„ç»„åˆ path æ‰“åŒ…åçš„æ–‡ä»¶æ”¾ç½®çš„è·¯å¾„ publicPath filename æ˜¯ç”¨æ¥æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶åçš„ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥æŒ‡å®šç‰¹å®šçš„åç§°å¦‚ bundle.js å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ [name] [chunkHash] ç­‰å˜é‡ï¼Œåˆ†åˆ«æŒ‡æ‰“åŒ…åçš„ chunk çš„åç§°å’Œæ‰“åŒ…åæ–‡ä»¶å†…å®¹è®¡ç®—å‡ºçš„ hash å€¼ã€‚äºŒè€…å¯ä»¥è¿›è¡Œç»„åˆä½¿ç”¨ï¼Œå¦‚ output: &#123; filename: \"[name][chunkHash].js\", path: path.resolve(__dirname, \"dist\")&#125; æœ¬åœ°æœåŠ¡å™¨ä¸Šé¢æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹ä¸º æ¯æ¬¡æˆ‘ä»¬æ›´æ”¹ç¨‹åºåï¼Œéƒ½è¦é‡æ–°åˆ·æ–°ç½‘é¡µä»¥è§‚å¯Ÿæœ€æ–°çš„ç»“æœï¼Œè€Œæˆ‘ä»¬å¸Œæœ›åœ¨æˆ‘ä»¬æ›´æ”¹ç¨‹åºåï¼Œé¡µé¢èƒ½å¤Ÿè‡ªåŠ¨çš„åˆ·æ–°ï¼Œä¸éœ€è¦å†æ¬¡ä½¿ç”¨ webpack è¿›è¡Œæ‰“åŒ…ï¼Œç„¶åæ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ webpack-dev-server äº†ï¼Œå®ƒå¯ä»¥åœ¨æœ¬åœ°å¼€å¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶ä¸”å½“æˆ‘ä»¬ä¿®æ”¹ç¨‹åºæ—¶ï¼Œè‡ªåŠ¨çš„åˆ·æ–°é¡µé¢ã€‚ é¦–å…ˆä¸‹è½½ webpack-dev-server npm install webpack-dev-server --save-dev æ¥ç€æˆ‘ä»¬åœ¨ webpack.config.js ä¸­åŠ å…¥ devServer é…ç½®é¡¹ const path = require('path');module.exports = &#123; // webpack-dev-server çš„é…ç½® devServer: &#123; port: 3000, contentBase: path.resolve(__dirname, 'dist') &#125;, entry: &#123; \"bundle\": \"./src/index.js\" &#125;, output: &#123; filename: \"[name].js\", path: path.resolve(__dirname, \"dist\") &#125;, mode: \"development\"&#125;; åœ¨ä¸Šé¢æˆ‘ä»¬é…ç½®äº†ä¸¤ä¸ªé€‰é¡¹ é€‰é¡¹ åŠŸèƒ½ port é…ç½®ç«¯å£å· contentBase é…ç½®æœåŠ¡å™¨çš„æ ¹ç›®å½• æ¥ç€æˆ‘ä»¬ä¸º package.json ä¸­çš„ script å­—æ®µæ·»åŠ  dev é€‰é¡¹ \"scripts\": &#123; \"build\": \"webpack\", \"dev\": \"webpack-dev-server\"&#125; æ¥ç€æˆ‘ä»¬è¿è¡Œ npm run dev å³å¯åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨äº† æ¥ç€æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ http://localhost:3000 å³å¯è®¿é—®é¡µé¢äº†ã€‚ æ³¨æ„ï¼š è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ webpack-dev-server å¹¶ä¸ä¼šè¾“å‡ºæ‰“åŒ…åçš„æ–‡ä»¶ï¼Œå®ƒä¼šæ ¹æ®å…¥å£æ–‡ä»¶çš„ä¾èµ–å…³ç³»è¿›è¡Œæ‰“åŒ…ï¼Œä½†æ˜¯æ‰“åŒ…åçš„å†…å®¹æ”¾åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯è¾“å‡ºä¸€ä¸ªæ–‡ä»¶åˆ°ç¡¬ç›˜ä¸Šï¼Œæ‰€ä»¥ä¸ä¼šç”Ÿæˆ bundle.js æ–‡ä»¶ï¼Œå› ä¸ºå®ƒåªå­˜åœ¨äºå†…å­˜ä¸­ã€‚ loaderloader åˆæ˜¯ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸ºå¤„ç†å™¨ï¼Œå¤„ç†ä»€ä¹ˆå‘¢? æ¯”å¦‚æˆ‘ä»¬éœ€è¦å°† ES6 è½¬æ¢ä¸º ES5ï¼Œè¿™å°±éœ€è¦ä¸€ä¸ª loader è¿›è¡Œè½¬æ¢ï¼›æ¯”å¦‚æˆ‘ä»¬éœ€è¦å°† less è½¬æ¢ä¸º CSSï¼Œè¿™éœ€è¦ä¸€ä¸ª loader è¿›è¡Œè½¬æ¢ï¼Œæ¯”å¦‚éœ€è¦å°† TypeScript è½¬æ¢ä¸º JavaScriptï¼Œè¿™ä¹Ÿéœ€è¦ä¸€ä¸ª loader è¿›è¡Œè½¬æ¢ï¼›ç­‰ç­‰ã€‚ ä¸‹é¢æˆ‘ä»¬å°±ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ loaderã€‚ babel-loaderæˆ‘ä»¬å¸¸å¸¸æœ‰éœ€è¦å°† ES6 æˆ–æ›´é«˜çº§çš„è¯­æ³•è½¬åŒ–ä¸º ES5çš„éœ€è¦ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ç”¨åˆ° babel-loaderï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½è¿™äº›å®‰è£…åŒ… npm install babel-loader @babel/core --save-dev @babel/core æ˜¯ babel çš„æ ¸å¿ƒåŒ…ï¼Œå…·ä½“çš„è½¬æ¢è¦ä¾èµ–è¯¥åŒ…ï¼Œæ¥ç€æˆ‘ä»¬éœ€è¦åœ¨ webpack.config.js ä¸­è¿›è¡Œé…ç½® const path = require('path');module.exports = &#123; devServer: &#123; port: 3000, contentBase: path.resolve(__dirname, 'dist') &#125;, entry: &#123; \"bundle\": \"./src/index.js\" &#125;, output: &#123; filename: \"[name].js\", path: path.resolve(__dirname, \"dist\") &#125;, mode: \"development\", module: &#123; rules: [ // é…ç½® loader &#123; test: /\\.js$/, use: \"babel-loader\" &#125; ] &#125;&#125;; æˆ‘ä»¬åœ¨ module.rules ä¸­é…ç½® loaderï¼Œå…¶ä¸­æœ€å°‘éœ€è¦é…ç½®ä¸¤é¡¹ test å’Œ useï¼Œtest ç”¨æ¥è¡¨ç¤ºå¯¹ä»€ä¹ˆæ–‡ä»¶è¿›è¡Œè½¬æ¢ï¼Œæ¯”å¦‚ä¸Šé¢å¯¹æ‰€æœ‰ä»¥ .js ç»“å°¾çš„æ–‡ä»¶è¿›è¡Œè½¬æ¢ï¼›use ç”¨æ¥æŒ‡å®šä½¿ç”¨ä»€ä¹ˆ loader è¿›è¡Œè½¬æ¢ï¼Œè¿™é‡ŒæŒ‡å®šä¸º babel-loaderã€‚ç»¼åˆä¸Šé¢ä¸¤ä¸ªé…ç½®ï¼Œè¡¨ç¤ºçš„æ„æ€å°±æ˜¯å¯¹æ‰€æœ‰ä»¥ .js ç»“å°¾çš„æ–‡ä»¶ä½¿ç”¨ babel-loader è¿›è¡Œå¤„ç†ã€‚ å…¶ä¸­ use ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚ä¸‹ use: &#123; loader: \"babel-loader\", options: &#123; &#125;&#125; å½“ use æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ options ä¸º loader é…ç½®ä¸€äº›å‚æ•°ã€‚ é™¤äº†é…ç½® test å’Œ useï¼Œè¿˜å¯ä»¥é…ç½®ä¸¤ä¸ªé€‰é¡¹ é€‰é¡¹ åŠŸèƒ½ include æŒ‡å®šæ£€æŸ¥çš„è·¯å¾„ exclude æŒ‡å®šæ’é™¤çš„è·¯å¾„ ä¸Šé¢çš„ä¸¤ä¸ªé€‰é¡¹æŒ‡å®šåªå¯¹å“ªäº›è·¯å¾„ä¸‹çš„æ–‡ä»¶è¿›è¡Œæ£€æŸ¥ï¼Œæˆ–è€…ä¸æ£€æŸ¥å“ªäº›è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œä¸€èˆ¬æ¥è¯´äºŒè€…åªéœ€è¦é…ç½®ä¸€ä¸ªå³å¯ï¼Œä½†æ˜¯å¦‚æœä¸¤ä¸ªéƒ½é…ç½®äº†ï¼Œå¹¶ä¸”æœ‰å†²çªï¼Œé‚£ä¹ˆ exclude çš„ä¼˜å…ˆçº§é«˜ã€‚ æˆ‘ä»¬æ¥ç€ä¿®æ”¹ index.js çš„å†…å®¹ï¼Œä¸ºå…¶ä¸­æ·»åŠ  ES6 çš„è¯­æ³• let x = 1;let y = 2;const add = (x, y) =&gt; &#123; return x + y;&#125;;let result = add(1, 2);let p = new Promise((resolve, reject) =&gt; &#123; resolve(1);&#125;).then(value =&gt; &#123; console.log(value);&#125;); åœ¨ index.js ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† ES6 æ‰å‡ºç°çš„è¯­æ³•ï¼Œå¦‚ let const Promise ç®­å¤´å‡½æ•°ï¼Œç°åœ¨æˆ‘ä»¬è¿è¡Œ npm run build è¿›è¡Œæ‰“åŒ…ï¼Œéƒ¨åˆ†å†…å®¹å¦‚ä¸‹ eval(\"let x = 1;\\nlet y = 2;\\n\\nconst add = (x, y) =&gt; &#123;\\n return x + y;\\n&#125;;\\n\\nlet result = add(1, 2);\\nlet p = new Promise((resolve, reject) =&gt; &#123;\\n resolve(1);\\n&#125;).then(value =&gt; &#123;\\n console.log(value);\\n&#125;);\\n\\n//# sourceURL=webpack:///./src/index.js?\"); å‘ç°å¹¶æ²¡æœ‰å°† ES6 çš„è¯­æ³•è½¬åŒ–ä¸º ES5 çš„è¯­æ³•ï¼Œå› ä¸º babel éœ€è¦ç‰¹å®šçš„æ’ä»¶æ”¯æŒï¼Œbabel ä¸ºäº†å®ç°æŒ‰éœ€åŠ è½½çš„åŠŸèƒ½ï¼Œå®ƒå°† ES6 è½¬ ES5 çš„åŠŸèƒ½åˆ†ä¸ºäº† 20+ ä¸ªæ’ä»¶ï¼Œä½ éœ€è¦å“ªä¸ªå°±ä¸‹å“ªä¸ªï¼Œä½†æ˜¯è¿™æ ·å´æ˜¯æœ‰ç‚¹éº»çƒ¦ï¼Œå¥½åœ¨ babel æ¨å‡ºäº†ä¸€ä¸ªæ’ä»¶é›†åˆ presetï¼Œæˆ‘ä»¬ç›´æ¥ä¸‹è½½ @babel/preset-env å³å¯ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„ ES6 è¯­æ³•è½¬ ES5 è¯­æ³•çš„æ’ä»¶åˆé›† npm install @babel/preset-env --save-dev æ¥ç€æˆ‘ä»¬åœ¨ webpack.config.js ä¸­è¿›è¡Œé…ç½® test: /\\.js$/,use: &#123; loader: \"babel-loader\", options: &#123; \"presets\": [ \"@babel/preset-env\" ] &#125;, exclude: path.resolve(__dirname, \"node_modules/\") // å¯¹ node_modules ä¸­çš„æ–‡ä»¶ä¸è¿›è¡Œè½¬æ¢&#125; ä½†æ˜¯è§‚å¯Ÿæ‰“åŒ…åçš„æ–‡ä»¶ï¼Œlet const å’Œç®­å¤´å‡½æ•°éƒ½è¢«è½¬ä¸ºäº† ES5ï¼Œä½†æ˜¯ Promise å¹¶æ²¡æœ‰è¢«è½¬æ¢ï¼Œå› ä¸ºè¿™æ˜¯æ–°å¢çš„ API è€Œä¸æ˜¯è¯­æ³•ï¼Œè¿™ç§æ–°å¢çš„ API é  preset-env æ˜¯è½¬åŒ–ä¸äº†çš„ï¼Œå®ƒåªèƒ½è½¬åŒ–è¯­æ³•ï¼Œæ‰€ä»¥ class ä»¥åŠ Object.assign ç­‰è¿™äº›æ–°å¢çš„ API å®ƒæ˜¯ä¸èƒ½è½¬æ¢çš„ï¼Œå¦‚æœåœ¨ç‰ˆæœ¬æ¯”è¾ƒä½çš„æµè§ˆå™¨ä¸­ï¼Œç”±äºä¸æ”¯æŒè¿™äº› APIï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ã€‚ è¿™ä¸ªæ—¶å€™éœ€è¦ polyfill ä¸ºæµè§ˆå™¨æä¾› ES6 çš„ç¯å¢ƒï¼Œå³ä½¿ç”¨ ES5 æˆ–æ›´ä½çš„è¯­æ³•å»å®ç°ä¸Šé¢çš„ APIï¼Œæœ‰ä¸¤ç§è§£å†³åŠæ³•ã€‚ ä¸‹è½½ @babel/polyfillï¼Œå¹¶ä¸”åœ¨å…¥å£æ–‡ä»¶å³ index.js ä¸­å¼•å…¥ npm install @babel/polyfill --save æ¥ç€åœ¨ index.js ä¸­å¼•å…¥ // å¼•å…¥ @babel/polyfillimport '@babel/polyfill'let x = 1;let y = 2;const add = (x, y) =&gt; &#123; return x + y;&#125;;let result = add(1, 2);let p = new Promise((resolve, reject) =&gt; &#123; resolve(1);&#125;).then(value =&gt; &#123; console.log(value);&#125;); @babel/polyfill ä½¿ç”¨ ES5 çš„è¯­æ³•å®ç°ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­æ²¡æœ‰çš„ APIï¼Œæ‰€ä»¥å³ä½¿åœ¨ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ä¹Ÿèƒ½å¤Ÿè¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œä½†æ˜¯ @babel/polyfill åŒæ—¶ä¹Ÿè¦†ç›–äº†åŸæœ‰çš„ APIï¼Œå¦å¤–æˆ‘ä»¬ç›´æ¥å¯¼å…¥äº† @babel/polyfill ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå…¶ä¸­æœ‰ä¸€äº› API æˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰ç”¨åˆ°ï¼Œæ¯”å¦‚ classï¼Œè¿™å°±ä¼šå¯¼è‡´æ‰“åŒ…å‡ºçš„æ–‡ä»¶ä½“ç§¯è¾ƒå¤§ã€‚ ä¸ºäº†å®ç°æŒ‰éœ€åŠ è½½ï¼Œæˆ‘ä»¬ä½¿ç”¨å¦ä¸€ç§è§£å†³åŠæ³•ï¼Œä¸‹è½½ä¸€ä¸ªæ’ä»¶ @babel/plugin-transform-runtimeï¼Œå› ä¸º @babel/plugin-transform-runtime ä¾èµ–äº @babel/runtimeï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦ä¸‹è½½ @babel/runtimeï¼Œå¹¶ä¸” @babel/runtime ç”Ÿäº§ç¯å¢ƒä¸‹ä¹Ÿè¦ç”¨åˆ°ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ --save-dev å®‰è£… npm install @babel/plugin-transform-runtime --save-devnpm install @babel/runtime æ¥ç€æˆ‘ä»¬åœ¨ webpack.config.js ä¸­åŠ å…¥æ’ä»¶çš„é…ç½® test: /\\.js$/,use: &#123; loader: \"babel-loader\", options: &#123; \"presets\": [ \"@babel/preset-env\" ], \"plugins\": [ \"@babel/plugin-transform-runtime\" ] &#125;&#125; æ¥ç€æˆ‘ä»¬å»æ‰ index.js å¤´éƒ¨æ·»åŠ çš„ import &#39;@babel/polyfill&#39;ï¼Œå†æ¬¡ä½¿ç”¨ webpack è¿›è¡Œæ‰“åŒ…å³å¯ã€‚ css-loaderã€style-loaderé™¤äº†å¯ä»¥å¯¹ JavaScript è¿›è¡Œæ‰“åŒ…ä»¥å¤–ï¼Œè¿˜å¯ä»¥å¯¹ CSS è¿›è¡Œæ‰“åŒ…ï¼Œä¸è¿‡ webpack åªèƒ½å¤„ç† JavaScriptï¼Œå³ä¸èƒ½æŠŠ CSS æ–‡ä»¶å½“åšå…¥å£æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åœ¨ JavaScript ä¸­å¯¼å…¥ CSSï¼Œå½“å¯¹ JavaScript è¿›è¡Œæ‰“åŒ…ï¼Œä¹Ÿä¼šåŒæ—¶å¯¹å¯¼å…¥çš„ CSS è¿›è¡Œæ‰“åŒ…ï¼Œåœ¨ src ä¸­æ–°å»º index.css å’Œ foo.css /* index.css */@import \"foo.css\";body &#123; background-color: #5d4141;&#125; /* foo.css */body &#123; color: white; font-size: 4em;&#125; æˆ‘ä»¬åœ¨ index.css ä¸­é€šè¿‡ @import è¯­æ³•å¼•å…¥äº† foo.cssï¼Œæ¥ç€æˆ‘ä»¬åœ¨ index.js ä¸­å¼•å…¥ index.css import './index.css'document.write(\"Hello World\"); æˆ‘ä»¬é€šè¿‡ import &#39;./index.css&#39; å¼•å…¥äº† CSSï¼Œwebpack å°†ä¸€åˆ‡éƒ½çœ‹ä½œæ˜¯æ¨¡å—ï¼ŒCSS æ–‡ä»¶ä¹Ÿå¯ä»¥çœ‹åšæ˜¯æ¨¡å—ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ import å°†è¯¥æ¨¡å—å¯¼å…¥ã€‚ æˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ª loader æ¥å¤„ç† import &#39;./index.css&#39; çš„è¯­æ³•ï¼Œä½¿æ ·å¼ç”Ÿæ•ˆï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ª loaderï¼Œåˆ†åˆ«ä¸º css-loader å’Œ style-loaderï¼Œé¦–å…ˆè¿›è¡Œå®‰è£… npm install css-loader style-loader --save-dev css-loader çš„ä½œç”¨æ˜¯å¤„ç† CSS æ–‡ä»¶ä¸­ @import å’Œ url() è¿™æ ·çš„è¯­æ³•çš„ï¼Œè€Œ style-loader æ˜¯å°†è§£æå®Œçš„ CSS æ ·å¼ä½œä¸º style æ ‡ç­¾æ’å…¥åˆ°é¡µé¢çš„ head å…ƒç´ ä¸­ã€‚æˆ‘ä»¬åœ¨ webpack.config.js å¯¹ loader è¿›è¡Œé…ç½® test: /\\.css$/,use: [\"style-loader\", \"css-loader\"] loader çš„æ‰§è¡Œæ˜¯æœ‰å…ˆåé¡ºåºï¼Œwebpack ä¼šæ ¹æ® use ä¸­å®šä¹‰çš„ loader ä»åå¾€å‰æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ css-loader å†™åœ¨ style-loader åé¢ï¼Œè¿™æ ·å°±ä¼šå…ˆæ‰§è¡Œ css-loaderï¼Œç„¶åæ‰§è¡Œ style-loaderã€‚ æˆ‘ä»¬è¿è¡Œ npm run devï¼Œåœ¨ http://localhost:3000 å¯ä»¥è§‚å¯Ÿåˆ°ä¸‹é¢çš„é¡µé¢ è¯´æ˜æˆ‘ä»¬çš„é…ç½®æˆåŠŸäº†ã€‚ é™¤äº†å¤„ç† CSS æ–‡ä»¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨ less sass/scss ç¼–å†™æ ·å¼ï¼Œä½†æ˜¯è¿™äº›æ–‡ä»¶æµè§ˆå™¨ä¸èƒ½è§£æï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç›¸åº”çš„ loader å°† less sass/scss è½¬ä¸º CSS æ–‡ä»¶ï¼Œä¾‹å¦‚ less-loader sass-loader npm install less less-loader node-sass sass-loader --save-dev æ¥ç€æˆ‘ä»¬åœ¨ webpack.config.js ä¸­æ·»åŠ ç›¸åº”çš„é…ç½® &#123; test: /\\.less$/, use: [\"style-loader\", \"css-loader\", \"less-loader\"]&#125;,&#123; test: /\\.(sass|scss)$/, use: [\"style-loader\", \"css-loader\", \"sass-loader\"]&#125; less-loader å’Œ sass-loader åªæ˜¯æŠŠè¦å¤„ç†çš„æ–‡ä»¶è½¬åŒ–ä¸º CSS æ–‡ä»¶ï¼Œæœ€åæˆ‘ä»¬è¿˜æ˜¯éœ€è¦é€šè¿‡ css-loader å’Œ style-loader æ¥å¤„ç†è·¯å¾„ä»¥åŠå°† CSS æ’å…¥åˆ°é¡µé¢ä¸­ã€‚ file-loaderã€url-loaderä¸‹é¢ä»‹ç»æœ‰å…³å¤„ç†å›¾ç‰‡ç›¸å…³çš„ loaderï¼Œå‡è®¾åœ¨ index.js çš„ä¸­å¼•ç”¨äº†å›¾ç‰‡ let img = new Image();img.src = \"./beauty.jpg\";document.body.appendChild(img); æˆ‘ä»¬è¿›è¡Œæ‰“åŒ…ï¼Œå‘ç°åœ¨æµè§ˆå™¨ä¸­å¹¶æ²¡æœ‰å‡ºç°æˆ‘ä»¬æƒ³è¦çš„å›¾ç‰‡ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­å¼•ç”¨çš„å›¾ç‰‡æ˜¯åœ¨ src ç›®å½•ä¸‹çš„ï¼Œåœ¨ dist ç›®å½•ä¸‹å¹¶æ²¡æœ‰è¿™å¼ å›¾ç‰‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦å°†å›¾ç‰‡æ‰“åŒ…åˆ° dist ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹ import beauty from './beauty.jpg'let img = new Image();img.src = beauty;document.body.appendChild(img); æˆ‘ä»¬å°†å›¾ç‰‡ä½œä¸ºæ¨¡å—å¯¼å…¥ï¼Œå¸Œæœ›å¾—åˆ°è¯¥å›¾ç‰‡çš„æ‰“åŒ…åçš„åœ°å€ï¼Œç„¶åå°† img.src è®¾ç½®ä¸ºè¿™ä¸ªåœ°å€ã€‚è¿™ä»¶äº‹æƒ…éœ€è¦ä¸€ä¸ª loader å»åšï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ file-loaderï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†å¼•å…¥çš„æ–‡ä»¶(ä¸€èˆ¬æ˜¯å›¾ç‰‡)æ‰“åŒ…åˆ°(æˆ–è€…è¯´ç§»åŠ¨åˆ°) æŒ‡å®šç›®å½•ä¸‹ï¼Œå¹¶è¿”å›æ‰“åŒ…åçš„æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… file-loader npm install file-loader --save-dev å¹¶åœ¨ webpack.config.js ä¸­è¿›è¡Œé…ç½® &#123; test: /\\.(png|jpe?g|gif|svg)$/, use: &#123; loader: \"file-loader\", options: &#123; name: \"[name].[ext]\", outputPath: \"img/\" &#125; &#125;&#125; å…¶ä¸­ name æ˜¯ç”¨æ¥é…ç½®è¾“å‡ºçš„æ–‡ä»¶åçš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªå˜é‡ [name] å’Œ [ext]ï¼Œ[name] ä»£è¡¨æ‰“åŒ…å‰æ–‡ä»¶çš„åç§°ï¼Œ[ext] è¡¨ç¤ºæ‰©å±•åï¼›outputPath ç”¨æ¥æŒ‡å®šæ‰“åŒ…åæ–‡ä»¶è¾“å‡ºçš„ä½ç½®ï¼Œè¿™ä¸ªä½ç½®æ˜¯ç›¸å¯¹äº output.path çš„è·¯å¾„ã€‚æ‰€ä»¥ä¼šåœ¨ dist/img ä¸‹æ‰“åŒ…å‡ºä¸€å¼ ä¸åŸæ–‡ä»¶åç›¸åŒçš„ä¸€å¼ å›¾ç‰‡ï¼Œå¹¶ä¸”å°†è¯¥æ‰“åŒ…åçš„å›¾ç‰‡çš„åœ°å€è¿”å›ï¼Œè¿™æ ·åœ¨é¡µé¢ä¸­å°±ä¼šå‡ºç°å›¾ç‰‡ã€‚ æœ‰æ—¶å€™å¯¹äºè¾ƒå°çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬å¸Œæœ›å°†å®ƒè½¬ä¸º base64ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ http è¯·æ±‚æ¬¡æ•°ã€‚æˆ‘ä»¬ä½¿ç”¨ url-loader æ¥åšè¿™ä¸ªäº‹æƒ…ï¼Œå®ƒæä¾›äº†ä¸€ä¸ª limit é€‰é¡¹ï¼Œè¯¥é€‰é¡¹æŒ‡å®šä¸€ä¸ªå€¼ï¼Œå½“å›¾ç‰‡çš„å¤§å°å°äºè¯¥å€¼æ—¶å°±è½¬åŒ–ä¸º base64ï¼Œå½“å¤§äºè¯¥å€¼æ—¶ï¼Œå°±ä½¿ç”¨ file-loader è¿›è¡Œè½¬æ¢ï¼Œæˆ‘ä»¬ä¿®æ”¹ webpack.config.js çš„é…ç½® test: /\\.(png|jpe?g|gif|svg)$/,use: &#123; loader: \"url-loader\", options: &#123; name: \"[name].[ext]\", limit: 200*1024 // å°äº 200KB å°±è½¬åŒ–ä¸º base64 ç¼–ç  &#125;&#125; ts-loaderæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä¹Ÿç»å¸¸ä½¿ç”¨ TypeScript æ¥å†™ç¨‹åºï¼Œå› ä¸º TypeScript çš„ç§ç§å¥½å¤„ï¼Œå¯ä»¥å¸®æˆ‘ä»¬å‡å°‘ bug äº§ç”Ÿçš„å‡ ç‡ï¼Œä½†æ˜¯æµè§ˆå™¨ä¹Ÿæ˜¯ä¸è®¤è¯† TypeScriptï¼Œæˆ‘ä»¬éœ€è¦å°† TypeScript è½¬åŒ–ä¸º JavaScriptï¼Œè¿™éœ€è¦ ts-loader æ¥å¸®æˆ‘ä»¬åšè¿™ä»¶äº‹æƒ…ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸‹è½½ç›¸å…³çš„åŒ… npm install typescript ts-loader --save-dev æ¥ç€æˆ‘ä»¬éœ€è¦é…ç½® webpack.config.js ä»¥åŠ tsconfig.json(åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºè¯¥æ–‡ä»¶) test: /\\.ts$/,use: \"ts-loader\" &#123; \"compilerOptions\": &#123; \"module\": \"commonjs\", \"target\": \"es5\", \"allowJs\": true &#125;, \"include\": [ \"./src/\" ], \"exclude\": [ \"./node_modules/\" ]&#125; å…³äº tsconfig.json çš„é…ç½®ä¸æ˜¯é‡ç‚¹ï¼Œå¯ä»¥å»ç½‘ä¸Šäº†è§£ç›¸å…³å†…å®¹ã€‚ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥è‡ªç”±çš„å†™ TypeScript äº†ã€‚ pluginplugin æ˜¯ webpack çš„å¦ä¸€å¤§ç‰¹è‰²ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ç›¸å½“å¤šçš„åŠŸèƒ½ï¼Œåœ¨ webpack æ‰“åŒ…çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºå¾ˆå¤šäº‹ä»¶ï¼Œè€Œ plugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ webapck æä¾›çš„ API æ”¹å˜è¾“å‡ºçš„ç»“æœã€‚ä¸‹é¢å°±ä»‹ç»ä¸€äº›å¸¸ç”¨åˆ°çš„ pluginã€‚ mini-css-extract-pluginåœ¨å¤„ç† CSS çš„ loader ä¸­ï¼Œæˆ‘ä»¬æœ€åä½¿ç”¨ style-loader å°†æœ€åçš„æ ·å¼ä»¥ style æ ‡ç­¾çš„å½¢å¼æ’å…¥åˆ°é¡µé¢ä¸­ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›å°†æ ·å¼æŠ½ç¦»å‡ºä¸€ä¸ª CSS æ–‡ä»¶å‘¢? è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ° mini-css-extract-plugin æ’ä»¶äº†ã€‚é¦–å…ˆè¿›è¡Œä¸‹è½½ npm install mini-css-extract-plugin --save-dev æ¥ç€åœ¨ webpack.config.js ä¸­è¿›è¡Œé…ç½® const path = require('path');const MiniCssExtractPlugin = require('mini-css-extract-plugin');module.exports = &#123; // çœç•¥å…¶ä»–é…ç½® module: &#123; rules: [ // çœç•¥å…¶ä»– loader é…ç½® &#123; test: /\\.css$/, use: [MiniCssExtractPlugin.loader, \"css-loader\"] &#125; ] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: \"main.css\" // æŠ½ç¦»å‡ºçš„ css æ–‡ä»¶åç§° &#125;) ]&#125;; é¦–å…ˆæˆ‘ä»¬é€šè¿‡ require(&#39;mini-css-extract-plugin&#39;) å¼•å…¥è¯¥æ’ä»¶ï¼Œæ¥ç€åœ¨ plugins é€‰é¡¹ä¸­é…ç½®äº†è¯¥æ’ä»¶ï¼Œå¹¶è®¾ç½®äº†æŠ½ç¦»åçš„ CSS æ–‡ä»¶çš„åç§°ï¼Œæ¥ç€å› ä¸ºæˆ‘ä»¬å¸Œæœ›æœ€åæŠ½ç¦»å‡ºä¸€ä¸ª CSS æ–‡ä»¶è€Œä¸æ˜¯å°†æ–‡ä»¶ä»¥ style æ ‡ç­¾çš„å½¢å¼æ’å…¥åˆ°é¡µé¢ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨äº† MiniCssExtractPlugin.loader æ¥æ›¿æ¢äº† style-loaderã€‚ æˆ‘ä»¬è¿è¡Œ npm run build å°±å¯ä»¥è§‚å¯Ÿåˆ°åœ¨ dist ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ª main.css æ–‡ä»¶ã€‚ä¸ºäº†è§‚å¯Ÿåˆ°æ•ˆæœï¼Œæˆ‘ä»¬åœ¨ dist/index.html ä¸­å°†è¯¥ main.css å¼•å…¥ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;link rel=\"stylesheet\" href=\"./main.css\"&gt;&lt;script src=\"bundle.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æ‰“å¼€è¯¥ html å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ã€‚ clean-webpack-pluginè¯¥æ’ä»¶çš„ä½œç”¨æ˜¯åœ¨æ¯æ¬¡æ‰“åŒ…å‰åˆ é™¤ dist æ–‡ä»¶å¤¹ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡éƒ½å¯ä»¥çœ‹åˆ°æœ€æ–°çš„æ‰“åŒ…æ–‡ä»¶ã€‚å¯èƒ½ä½ è¿˜ä¸èƒ½ç†è§£è¿™ä¸ªåº”ç”¨åœºæ™¯ï¼Œç°åœ¨æˆ‘ä»¬ä¿®æ”¹ output.filename å¦‚ä¸‹ output: &#123; filename: \"[name]@[chunkHash].js\", path: path.resolve(__dirname, \"dist\")&#125; æ¯æ¬¡ç”Ÿæˆçš„æ–‡ä»¶ç”±åå­—å’Œæ–‡ä»¶å†…å®¹ç”Ÿæˆçš„ hash å€¼ç»„æˆï¼Œæ¯æ¬¡æˆ‘ä»¬ä¿®æ”¹ç¨‹åºï¼Œç„¶åæ‰“åŒ…ï¼Œå°±ä¼šäº§ç”Ÿä¸åŒçš„å“ˆå¸Œå€¼ï¼Œæ‰€ä»¥ dist ä¸‹çš„æ–‡ä»¶ä¼šä¸æ–­çš„å¢å¤šï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“å“ªä¸ªæ–‡ä»¶æ˜¯æˆ‘ä»¬æœ€æ–°æ‰“åŒ…å‡ºæ¥çš„ï¼Œå¦‚ä¸‹ æ‰€ä»¥æˆ‘ä»¬å°±æœ‰è¿™ä¸ªéœ€è¦ï¼Œåœ¨ç”Ÿæˆæ–°çš„æ‰“åŒ…æ–‡ä»¶ä¹‹å‰ï¼Œå°†ä¹‹å‰çš„æ‰“åŒ…æ–‡ä»¶è¿›è¡Œåˆ é™¤ã€‚é¦–å…ˆä¸‹è½½ clean-webpack-plugin npm install clean-webpack-plugin --save-dev æ¥ç€é…ç½® webpack.config.js // çœç•¥å…¶ä»–const &#123;CleanWebpackPlugin&#125; = require('clean-webpack-plugin');module.exports = &#123; // çœç•¥å…¶ä»–é…ç½® plugins: [ new MiniCssExtractPlugin(&#123; filename: \"main.css\" &#125;), new CleanWebpackPlugin() ]&#125;; å†æ¬¡è¿›è¡Œæ‰“åŒ…ï¼Œå‘ç°ä¹‹å‰çš„ dist æ–‡ä»¶å¤¹ä¸‹ä¹‹å‰çš„æ‰“åŒ…æ–‡ä»¶éƒ½è¢«åˆ æ‰äº†ã€‚ html-webpack-pluginä½¿ç”¨ clean-webpack-plugin ä¼šå°†æˆ‘ä»¬ä¹‹å‰åœ¨ dist ä¸‹æ–°å»ºçš„ index.html æ–‡ä»¶ä¹Ÿä¼šåˆ é™¤æ‰ï¼Œä¸ºäº†è§‚å¯Ÿæ‰“åŒ…æ•ˆæœï¼Œæˆ‘ä»¬ä¸å¾—ä¸åœ¨ dist ç›®å½•ä¸‹å†æ¬¡æ–°å»º index.html å¹¶ä¸”å°†æ‰“åŒ…åçš„ JavaScript æ–‡ä»¶å’Œ CSS æ–‡ä»¶å¼•å…¥ï¼Œæ¯æ¬¡æ‰“åŒ…ä¸€æ¬¡éƒ½è¦è¿™ä¹ˆåšå®åœ¨ä»¤äººæ¼ç«ï¼Œæˆ‘ä»¬ä½¿ç”¨ html-webpack-plugin æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ html-webpack-plugin ä¼šæ ¹æ®ä¸€ä¸ª html æ–‡ä»¶æ¨¡æ¿ï¼Œåœ¨ dist æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€ä¸ª html æ–‡ä»¶ï¼Œå¹¶ä¸”ä¼šå°†æ‰“åŒ…åçš„ JavaScript å’Œ CSS è‡ªåŠ¨å¼•å…¥ï¼Œå¤§å¤§çš„è§£æ”¾äº†æˆ‘ä»¬çš„åŒæ‰‹ã€‚é¦–å…ˆæˆ‘ä»¬ä¸‹è½½ html-webpack-plugin npm install html-webpack-plugin --save-dev æ¥ç€åœ¨ webpack.config.js ä¸­è¿›è¡Œé…ç½® // çœç•¥å…¶ä»–const HtmlWebpackPlugin = require('html-webpack-plugin');module.exports = &#123; // çœç•¥å…¶ä»–é…ç½® plugins: [ new MiniCssExtractPlugin(&#123; filename: \"main.css\" &#125;), new CleanWebpackPlugin(), new HtmlWebpackPlugin(&#123; template: \"./src/index.html\", filename: \"index.html\" &#125;) ]&#125;; å…¶ä¸­æˆ‘ä»¬åœ¨ HtmlWebpackPlugin ä¸­ä¼ å…¥äº†ä¸¤ä¸ªé…ç½®é¡¹ é…ç½®é¡¹ ä½œç”¨ template æŒ‡å®šæ¨¡æ¿çš„è·¯å¾„ filename æŒ‡å®šç”Ÿæˆçš„ html æ–‡ä»¶çš„æ–‡ä»¶å åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬å°†æ¨¡æ¿æŒ‡å®šä¸º src/index.htmlï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ src æ–°å»º index.html å¦‚ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt; åªæ˜¯ä¸€ä¸ªæ ‡å‡†çš„ html æ–‡ä»¶ï¼Œé‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚è¿è¡Œ npm run build å³å¯è§‚å¯Ÿåˆ°åœ¨ dist æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†ä¸€ä¸ª index.html æ–‡ä»¶ ç”Ÿæˆçš„ index.html çš„å†…å®¹å¦‚ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;link href=\"main.css\" rel=\"stylesheet\"&gt;&lt;/head&gt;&lt;body&gt;&lt;script src=\"bundle%4063ea546939ae13c70c31.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å¯è§å®ƒå·²ç»è‡ªåŠ¨ä¸ºæˆ‘ä»¬å¼•å…¥äº†æ‰“åŒ…åçš„ JavaScript æ–‡ä»¶å’Œ CSS æ–‡ä»¶ã€‚ å‚è€ƒæ–‡ç«  webpack loaderå’Œpluginç¼–å†™ Webpacké…ç½®Typescript ä½ çœŸçš„ä¼šç”¨ Babel å—? @babel/preset-env, @babel/polyfillå’Œ@babel/plugin-transform-runtime webpack 4.0 Babelï¼špluginã€presetçš„åŒºåˆ«ä¸ä½¿ç”¨ webpack4.0 clean-webpack-plugin æ’ä»¶è·³å‘æŒ‡å—","tags":[{"name":"Webapck","slug":"Webapck","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Webapck/"}]},{"title":"ä½¿ç”¨CSSå’ŒJavaScriptåšä¸€ä¸ªæ—¶é’Ÿ","date":"2020-07-08T15:31:00.000Z","path":"/ä½¿ç”¨CSSå’ŒJavaScriptåšä¸€ä¸ªæ—¶é’Ÿ/","text":"åœ¨ Youtube çœ‹åˆ°ä¸€ä¸ªä½¿ç”¨ CSS å’Œ JavaScript å®ç°çš„æ—¶é’Ÿæ•ˆæœï¼Œè§‰å¾—æ˜¯ä¸ªæ¯”è¾ƒå¥½çš„ç»ƒæ‰‹é¡¹ç›®ï¼Œå°±è·Ÿç€åšäº†ä¸€ä¸ªï¼Œåœ¨æ·±å…¥ç ”ç©¶ä»£ç çš„è¿‡ç¨‹ä¸­çš„ç¡®å­¦ä¹ åˆ°äº†å¾ˆå¤šçš„ä¸œè¥¿ï¼Œæˆå“æ•ˆæœå¦‚ä¸‹ é¦–å…ˆæˆ‘ä»¬æ­å»ºåŸºæœ¬çš„é¡µé¢ç»“æ„ï¼Œæ–°å»º clock.html å¦‚ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"clock.css\"&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=\"clock\"&gt; &lt;div id=\"hour\"&gt;&lt;/div&gt; &lt;div id=\"minute\"&gt;&lt;/div&gt; &lt;div id=\"second\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div id=\"digits\"&gt;&lt;/div&gt; &lt;script src=\"clock.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ç»“æ„å¾ˆç®€å•ï¼Œåˆ†ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œä¸Šé¢çš„éƒ¨åˆ†ä¸ºæ—¶é’Ÿï¼Œä¸‹é¢çš„éƒ¨åˆ†ä¸ºæ—¶é’Ÿçš„æ•°å­—æ˜¾ç¤ºï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆåœ¨ clock.css å†™å‡ºè¿™æ ·çš„æ ·å¼ * &#123; margin: 0; padding: 0; box-sizing: border-box; font-family: Consolas;&#125;body &#123; min-height: 100vh; background-color: #060415; display: flex; justify-content: center; align-items: center; flex-direction: column;&#125; æˆ‘ä»¬è®¾ç½®äº† body ä¸ºä¸€ä¸ª flex ç›’å­ï¼Œå¹¶è®¾ç½®äº†æ°´å¹³å’Œå‚ç›´æ–¹å‘éƒ½å±…ä¸­ï¼Œå› ä¸ºæ˜¯åˆ†ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½®äº† flex-direction ä¸º columnã€‚è¿™æ—¶é¡µé¢é™¤äº† body çš„èƒŒæ™¯é¢œè‰²ï¼Œä»€ä¹ˆæ•ˆæœéƒ½æ²¡æœ‰ï¼Œæ¥ä¸‹æˆ‘ä»¬ä¸º clock å†™æ ·å¼ #clock &#123; width: 350px; height: 350px; border: 8px solid #FFFFFF; border-radius: 50%; display: flex; justify-content: center; align-items: center;&#125; åŒç†ï¼Œæˆ‘ä»¬æŠŠ clock ä¹Ÿè®¾ç½®ä¸ºäº† flex ç›’å­ï¼Œå¹¶ä½¿å¾—å®ƒå†…éƒ¨çš„å­å…ƒç´ èƒ½å¤Ÿå±…ä¸­å¯¹é½ï¼Œç›®å‰æ•ˆæœå¦‚ä¸‹ æ¥ç€æˆ‘ä»¬åœ¨æ—¶é’Ÿçš„ä¸­é—´æ·»åŠ ä¸€ä¸ªç‚¹ #clock::before &#123; position: absolute; content: \"\"; width: 15px; height: 15px; background-color: #2196f3; z-index: 100; border-radius: 50%;&#125; ä¸Šé¢æˆ‘ä»¬è®¾ç½® ::before ä¼ªå…ƒç´ ä¸ºç»å¯¹å®šä½ position: absolute;ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢? å½“è®¾ç½®ä¸ºç»å¯¹å®šä½ä¹‹åï¼Œå®ƒè„±ç¦»äº†æ–‡æ¡£æµï¼Œæ­¤æ—¶å®ƒä¸ä¼šå—åˆ° flex ç›’å­çš„å½±å“ï¼Œå¹¶ä¸”æ­¤æ—¶å¹¶æ²¡æœ‰è®¾ç½® left, top ç­‰çš„å€¼ï¼Œè¿™æ—¶çš„**é»˜è®¤ä½ç½®æ˜¯å®ƒæ²¡æœ‰è„±ç¦»æ–‡æ¡£æµæ—¶çš„ä½ç½®(static position)**ã€‚é‚£ä¹ˆå®ƒæ²¡æœ‰è„±ç¦»æ–‡æ¡£æµæ—¶çš„ä½ç½®åœ¨å“ªé‡Œï¼Œå› ä¸ºå®ƒåœ¨ clock ä¸­ï¼Œå¹¶ä¸” clock ä¸­çš„å­å…ƒç´ æ˜¯å±…ä¸­çš„ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰è„±ç¦»æ–‡æ¡£æµæ—¶å®ƒæ˜¯å±…ä¸­çš„ï¼Œæ‰€ä»¥è¿™æ—¶å®ƒæ˜¯å±…ä¸­çš„ ä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰ç†è§£åˆ°ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸ºç»å¯¹å®šä½ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªç‚¹ï¼Œè¿˜æœ‰æ—¶é’ˆï¼Œåˆ†é’ˆå’Œç§’é’ˆå…¨éƒ¨éƒ½æ˜¯åœ¨ä¸­é—´é‡åˆçš„ï¼Œå¦‚æœä¸è®¾ç½®ç»å¯¹å®šä½è„±ç¦»æ–‡æ¡£æµï¼Œè¿™äº›å…ƒç´ æ˜¯ç»å¯¹ä¸ä¼šé‡åˆçš„ï¼Œåƒæ˜¯è¿™æ · ä½†æ˜¯å½“å®ƒä»¬è®¾ç½® position: absoluteï¼Œå¹¶ä¸”æ²¡æœ‰è®¾ç½® top, left ç­‰å€¼æ—¶ï¼Œå®ƒä»¬ä½ç½®ä¼šåœ¨ static positionï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å³æ˜¯å±…ä¸­å¯¹é½çš„ä½ç½®ã€‚æ¥ç€æˆ‘ä»¬ä¸ºä¸‰ä¸ªé’ˆç¼–å†™æ ·å¼ #hour, #minute, #second &#123; position: absolute; display: flex; justify-content: center;&#125;#hour &#123; width: 200px; height: 200px;&#125;#hour::before &#123; content: \"\"; width: 8px; height: 50%; background-color: #FFFFFF;&#125;#minute &#123; width: 230px; height: 230px;&#125;#minute::before &#123; content: \"\"; width: 4px; height: 50%; background-color: #FFFFFF;&#125;#second &#123; width: 250px; height: 250px;&#125;#second::before &#123; content: \"\"; width: 2px; height: 50%; background-color: #2196f3;&#125; ä¸Šé¢çš„ä»£ç è™½é•¿ï¼Œä½†å¾ˆå¤šéƒ½æ˜¯é‡å¤çš„ï¼Œè§‚å¯Ÿä»£ç ï¼Œæˆ‘ä»¬æŠŠ hour, minute, second ä¹Ÿå…¨éƒ¨è®¾ç½®ä¸ºäº†ç»å¯¹å®šä½ï¼Œå°±æ˜¯ä¸ºäº†ä½¿å¾—å®ƒä»¬èƒ½å¤Ÿåœ¨ä¸­é—´é‡åˆã€‚å¦å¤–æˆ‘ä»¬è®¾ç½®äº† hour, minute, second ä¸º flex ç›’å­ï¼Œå¹¶è®¾ç½®äº†æ°´å¹³å±…ä¸­ï¼Œæ­¤æ—¶çš„æ—¶é’Ÿå¦‚ä¸‹ æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è®©å®ƒåŠ¨èµ·æ¥ï¼Œå¹¶ä¸”è®¾ç½®ä¸‹é¢çš„æ—¶é’Ÿæ˜¾ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨ JavaScript å®ç°è¿™ä¸ªåŠŸèƒ½ const hour = document.querySelector(\"#hour\");const minute = document.querySelector(\"#minute\");const second = document.querySelector(\"#second\");setInterval(() =&gt; &#123; let day = new Date(); let hours = day.getHours(); let minutes = day.getMinutes(); let seconds = day.getSeconds(); let hourRotateDeg = hours * 30; let minuteRotateDeg = minutes * 6; let secondRotateDeg = seconds * 6; hour.style.transform = `rotateZ($&#123;hourRotateDeg + minuteRotateDeg/12&#125;deg)`; minute.style.transform = `rotateZ($&#123;minuteRotateDeg&#125;deg)`; second.style.transform = `rotateZ($&#123;secondRotateDeg&#125;deg)`; hours = hours &lt; 10 ? \"0\" + hours : hours; minutes = minutes &lt; 10 ? \"0\" + minutes : minutes; seconds = seconds &lt; 10 ? \"0\" + seconds : seconds; let ampm = hours &gt; 12 ? \"PM\" : \"AM\"; let digits = document.querySelector(\"#digits\"); digits.innerHTML = `$&#123;hours&#125;:$&#123;minutes&#125;:$&#123;seconds&#125; $&#123;ampm&#125;`;&#125;, 1000); JavaScript çš„ä»£ç è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè®¾ç½®äº†ä¸€ä¸ªæ¯éš” 1s æ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶å™¨ï¼Œæ¯æ¬¡æˆ‘ä»¬è·å¾—å½“å‰çš„æ—¶é—´ï¼Œè®¡ç®—å‡ºæ—¶é’ˆã€åˆ†é’ˆä»¥åŠç§’é’ˆæ—‹è½¬çš„è§’åº¦ï¼Œè®¾ç½®æ ·å¼å³å¯ã€‚åœ¨è¿™å…¶ä¸­æœ‰ä¸€ä¸ªå°çš„çŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯å½“å°æ—¶ã€åˆ†é’Ÿã€ç§’å°äº 10 æ—¶ï¼Œæˆ‘ä»¬è¦åœ¨å‰é¢è¡¥ 0ã€‚ æœ€åæˆ‘ä»¬é€šè¿‡ innerHTML è®¾ç½®äº†è¦æ˜¾ç¤ºçš„æ—¶é’Ÿç‚¹æ•°ï¼Œä»¥åŠç›¸å…³ CSS å¦‚ä¸‹ #digits &#123; color: #FFFFFF; font-size: 4em;&#125; æœ€åæˆå“çš„æ•ˆæœå¦‚ä¸‹ åœ¨æœ€åæˆ‘æ€»ç»“ä¸€ä¸‹æˆ‘åœ¨è¿™ä¸ªå°å°çš„é¡¹ç›®è·å¾—çš„çŸ¥è¯†ï¼Œå¦‚ä¸‹ position: relative ä¸ä¼šè„±ç¦»æ–‡æ¡£æµ position: absolute, float ä¼šè„±ç¦»æ–‡æ¡£æµ position: absolute æœªè®¾ç½® left, top ç­‰å±æ€§æ—¶ï¼Œé»˜è®¤æ˜¯ static position è€Œä¸æ˜¯ 0 display: flex å¯¹å¤„äºæ–‡æ¡£æµ(normal flow)çš„å…ƒç´ äº§ç”Ÿå½±å“ï¼Œå¯¹è„±ç¦»æ–‡æ¡£æµçš„å…ƒç´ ä¸äº§ç”Ÿå½±å“","tags":[{"name":"CSS","slug":"CSS","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/CSS/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"}]},{"title":"JavaScriptåŠ å·è¿ç®—ç¬¦","date":"2020-07-04T16:03:00.000Z","path":"/JavaScriptåŠ å·è¿ç®—ç¬¦/","text":"ä»Šå¤©çœ‹åˆ°å‡ é“æœ‰å…³åŠ å·çš„é¢˜ç›®ï¼Œè§‰å¾—å¾ˆæ€ªå¼‚å¦‚ä¸‹ [] + &#123;&#125; // '[object Object]'[] + [] // ''&#123;&#125; + [] // 0&#123;&#125; + &#123;&#125; // NaN[] + &#123;&#125; == &#123;&#125; + [] // true&#123;&#125; + [] != [] + &#123;&#125; // true å½“æ—¶æˆ‘å°±å®Œå…¨æ²¡æœ‰ææ‡‚ï¼Œæ‰€ä»¥å†³å®šæ¢ç´¢ä¸€ä¸‹ JavaScript ä¸­çš„ + å·è¿ç®—ç¬¦ï¼Œå¦å¤–ï¼Œå¯¹äº toString å’Œ valueOf è¿™ä¸¤ä¸ªæ–¹æ³•ä¸€ç›´æä¸æ¸…ä¼šè°ƒç”¨å“ªä¸ªï¼Œåœ¨æ¢ç´¢ + å·è¿ç®—ç¬¦çš„è¿‡ç¨‹ä¸­ä¹Ÿä¸€å¹¶ææ‡‚äº†ï¼Œæˆ‘å°†ä¼šåœ¨ä¸‹é¢ä»”ç»†è®²è§£ã€‚ ä¸€å…ƒè¿ç®—ç¬¦+ æ—¢å¯ä»¥ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆè®²è§£è¾ƒç®€å•çš„ä¸€å…ƒè¿ç®—ç¬¦ï¼Œå¦‚ä¸‹è¡¨ï¼š ç±»å‹ è½¬æ¢è§„åˆ™ undefiend NaN null 0 boolean true =&gt; 1false =&gt; 0 number åŸæ ·è¿”å›ï¼Œå¦‚ +1 =&gt; 1 string 1. å¦‚æœå­—ç¬¦ä¸²ä¸ºçº¯æ•°å­—ç»„æˆï¼Œå¦‚ &quot;5678&quot; =&gt; 56782. å¦‚æœä¸ä¸ºçº¯æ•°å­—ï¼Œé‚£ä¹ˆè¿”å› NaN3. ç©ºå­—ç¬¦ä¸²ä¼šè¢«è½¬åŒ–ä¸º 0ï¼Œå³ &quot;&quot; =&gt; 0 symbol æŠ›å‡º TypeError å¼‚å¸¸ object åˆ†ä¸ºä¸¤æ­¥ï¼š1. å…ˆè¿›è¡Œ toPrimitive è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¾—åˆ°è¿”å›å€¼ ret2. ç„¶åå¯¹ ret è¿›è¡Œä¸Šé¢æè¿°è¿‡ç¨‹çš„è½¬æ¢ï¼Œä¾‹å¦‚å¦‚æœè¿”å› trueï¼Œå¾—åˆ° 1 ä¸‹è¡¨æ˜¯ ECMAScript ä¸­çš„è§„èŒƒï¼Œä¸Šé¢çš„å†…å®¹æ¥è‡ªè¿™é‡Œï¼š Argument Result Undefined NaN Null +0 Boolean The result is 1 if the argument is true. The result is +0 if the argument is false. Number The result equals the input argument (no conversion). String See grammar and note below. Object Apply the following steps:1. Let primValue be ToPrimitive(input argument, hint Number).2. Return ToNumber(primValue). ä¸‹é¢æ¥çœ‹å‡ ä¸ªä¾‹å­ï¼Œæ¥éªŒè¯ä¸Šé¢çš„å†…å®¹ console.log(+undefined); // NaNconsole.log(+null); // 0console.log(+true); // 1console.log(+false); // 0console.log(+2); // 2console.log(+Symbol()); // Uncaught TypeError: Cannot convert a Symbol value to a numberconsole.log(+\"123\"); // 123console.log(+\"1aa1\"); // NaN å¯¹äºå¯¹è±¡é¦–å…ˆè¦è¿›è¡Œ toPrimitive è½¬åŒ–ä¸ºåŸå§‹ç±»å‹ï¼Œç„¶åå°†åŸå§‹ç±»å‹è½¬åŒ–ä¸ºæ•°å­— let obj1 = &#123; valueOf() &#123; return 12; &#125;&#125;;console.log(+obj1); // 12let obj2 = &#123;&#125;;console.log(+obj2); // NaN å¯¹äºç©ºå¯¹è±¡ï¼Œåœ¨è½¬åŒ–ä¸ºåŸå§‹å€¼æ—¶å¾—åˆ°çš„æ˜¯ &quot;[object Object]&quot;ï¼Œå°†å®ƒè½¬åŒ–ä¸ºæ•°å­—æ—¶ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¸æ˜¯çº¯æ•°å­—ï¼Œæ‰€ä»¥ä¼šè¢«è½¬åŒ–ä¸º NaNã€‚ äºŒå…ƒè¿ç®—ç¬¦å½“æŠŠ + ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦æ—¶ï¼Œéµå¾ªä»¥ä¸‹è¿‡ç¨‹ï¼š Let lref be the result of evaluating AdditiveExpression. Let lval be GetValue(lref). ReturnIfAbrupt(lval). Let rref be the result of evaluating MultiplicativeExpression. Let rval be GetValue(rref). ReturnIfAbrupt(rval). Let lprim be ToPrimitive(lval). ReturnIfAbrupt(lprim). Let rprim be ToPrimitive(rval). ReturnIfAbrupt(rprim). If Type(lprim) is String or Type(rprim) is String, then Let lstr be ToString(lprim). ReturnIfAbrupt(lstr). Let rstr be ToString(rprim). ReturnIfAbrupt(rstr). Return the String that is the result of concatenating lstr and rstr. Let lnum be ToNumber(lprim). ReturnIfAbrupt(lnum). Let rnum be ToNumber(rprim). ReturnIfAbrupt(rnum). Return the result of applying the addition operation to lnum and rnum. See the Note below 12.7.5. ä¸Šé¢æ˜¯ ECMAScript ä¸­çš„è§„èŒƒï¼Œå¦‚æœè‹±æ–‡ä¸å¤ªç†Ÿçš„è¯ï¼Œä¸‹é¢æˆ‘å°†ä»¥ä¸­æ–‡ç®€å•ç¿»è¯‘å¦‚ä¸‹ï¼š é¦–å…ˆå°† + å·ä¸¤è¾¹çš„å€¼é€šè¿‡ toPrimitive è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹(å¦‚æœå·²ç»æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™åŸæ ·è¿”å›) å¦‚æœå¾—åˆ°çš„ä¸¤ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ä¸­æœ‰å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°†äºŒè€…è½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥èµ·æ¥ï¼Œå°†ç»“æœè¿”å› å¦‚æœä¸¤ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ä¸­æ²¡æœ‰å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°±å°†ä¸¤ä¸ªå€¼è½¬åŒ–ä¸ºæ•°å­—ï¼Œç„¶åè¿›è¡Œç›¸åŠ  ä¸‹é¢æ¥çœ‹å‡ ä¸ªä¾‹å­ï¼š // ä¸¤ä¸ªå€¼ä¸­æœ‰ä¸€ä¸ªä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™è°ƒç”¨äºŒè€…çš„ toString æ–¹æ³•ï¼Œç„¶åè¿›è¡Œç›¸åŠ \"\" + 2; // \"2\"true + \"abc\"; // \"trueabc\"// ä¸¤ä¸ªå€¼ä¸­æ²¡æœ‰å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè½¬åŒ–ä¸ºæ•°å­—ç„¶åç›¸åŠ 2 + true; // =&gt; 2 + 1 = 3null + 2; // =&gt; 0 + 2 = 2[] + 2; // =&gt; \"\" + 2 = \"2\" å¯¹äºå¯¹è±¡è¦è½¬åŒ–ä¸ºåŸå§‹ç±»å‹ï¼Œç„¶åè¿›è¡Œç›¸åŠ ï¼Œé‚£ä¹ˆå¯¹è±¡è½¬åŒ–ä¸ºåŸå§‹ç±»å‹çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆ? ä¸‹é¢æ˜¯è°ƒç”¨çš„è¿‡ç¨‹ï¼š å¦‚æœæœ‰ [Symbol.toPrimitive] æ–¹æ³•ï¼Œåˆ™è°ƒç”¨ [Symbol.toPrimitive]() æ–¹æ³•è½¬åŒ–ä¸ºåŸå§‹ç±»å‹ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å¿…é¡»ä¸ºåŸå§‹ç±»å‹ å¦‚æœæ²¡æœ‰ [Symbol.toPrimitive] æ–¹æ³•ï¼Œé‚£ä¹ˆè°ƒç”¨ valueOf æ–¹æ³•ï¼Œå¦‚æœ valueOf è¿”å›çš„ä¸æ˜¯åŸå§‹å€¼(åŸºæœ¬æ•°æ®ç±»å‹)ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ toString æ–¹æ³•ï¼Œå¦‚æœ toString è¿”å›çš„ä¹Ÿä¸æ˜¯åŸå§‹å€¼ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ [] + 2; // \"\" + 2 = \"2\" æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› ä¸ºæ•°ç»„æ²¡æœ‰ [Symbol.toPrimitive] æ–¹æ³•ï¼Œæ‰€ä»¥é¦–å…ˆä¼šè°ƒç”¨æ•°ç»„çš„ valueOf æ–¹æ³•ï¼Œå› ä¸ºæ•°ç»„çš„ valueOf æ–¹æ³•è¿”å›çš„æ˜¯æ•°ç»„æœ¬èº«ï¼Œå¹¶ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥æ¥ç€ä¼šè°ƒç”¨æ•°ç»„çš„ toString æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªç©ºå­—ç¬¦ä¸² &quot;&quot; ï¼Œé€šè¿‡æˆ‘ä»¬ä¸Šé¢çš„è®²è§£ï¼Œå¦‚æœä¸¤ä¸ªå€¼ä¸­æœ‰ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œåˆ™ä¼šå°†äºŒè€…è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥ï¼Œæ‰€ä»¥ [] + 2 =&gt; &quot;&quot; + 2 = &quot;2&quot;ã€‚ä¸‹é¢åœ¨æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š let obj = &#123; [Symbol.toPrimitive](hint) &#123; return 20; &#125;, valueOf() &#123; return 0; &#125;&#125;;2 + obj; // 22 ç”±äºå¯¹è±¡ obj æœ‰ [Symbol.toPrimitive] æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹æ—¶ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¾—åˆ°çš„å€¼ä¸º 20ï¼Œæ‰€ä»¥ 2 + obj =&gt; 2 + 20 = 22ã€‚ é¢˜ç›®è®²è§£å›åˆ°å¼€å¤´æˆ‘ä»¬æå‡ºçš„å‡ ä¸ªä¾‹å­ï¼š [] + &#123;&#125; // '[object Object]' é¦–å…ˆå°†ä¸¤ä¸ªä¸œè¥¿è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ²¡æœ‰ [Symbol.toPrimitive] æ–¹æ³•ï¼Œæ‰€ä»¥æ¥ç€ä¼šè°ƒç”¨å®ƒä»¬çš„ valueOf æ–¹æ³•ï¼Œä½†æ˜¯å®ƒä»¬çš„ valueOf æ–¹æ³•è¿”å›çš„éƒ½æ˜¯å®ƒä»¬æœ¬èº«ï¼Œæ‰€ä»¥æ¥ç€ä¼šè°ƒç”¨å®ƒä»¬çš„ toString æ–¹æ³•ï¼Œ[] çš„ toString æ–¹æ³•å¾—åˆ°çš„æ˜¯ &#39;&#39; ç©ºå­—ç¬¦ä¸²ï¼Œ{} çš„ toString æ–¹æ³•å¾—åˆ°çš„æ˜¯ &#39;[object Object]&#39;ï¼ŒäºŒè€…éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå°†äºŒè€…è¿›è¡Œæ‹¼æ¥ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ &#39;[object Object]&#39;ã€‚ [] + [] // '' æœ‰ä¸Šé¢˜çš„ç»éªŒï¼Œ[] =&gt; &#39;&#39;ï¼Œä¸¤ä¸ªç©ºå­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥å¾—åˆ°çš„ç»“æœæ˜¯ &#39;&#39;ã€‚ &#123;&#125; + [] // 0 æ¥ç€çœ‹ {} + []ï¼Œå› ä¸º JavaScript ä¼šå°†ä»¥ { å¼€å¤´çš„è¯­å¥è§£æä¸ºä»£ç å—è€Œä¸æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ‰€ä»¥ {} + [] ç›¸å½“äº +[]ï¼Œè¿™æ—¶çš„ + ç›¸å½“äºæ˜¯ä¸€ä¸ªä¸€å…ƒè¿ç®—ç¬¦ï¼Œæ ¹æ®ä¸€å…ƒè¿ç®—ç¬¦ä¸Šé¢è®²è§£çš„å†…å®¹ï¼Œé¦–å…ˆå°† [] è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¾—åˆ° &quot;&quot;ï¼Œæ¥ç€å°† &quot;&quot; è½¬åŒ–ä¸ºæ•°å­—ï¼Œå¾—åˆ°çš„ç»“æœä¸º 0ã€‚ &#123;&#125; + &#123;&#125; // NaN æ ¹æ®ä¸Šä¸€é“é¢˜çš„è®²è§£ï¼Œ{} + {} ç›¸å½“äº +{}ï¼Œ{} è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å¾—åˆ°çš„æ˜¯ &quot;[object Object]&quot;ï¼Œè¯¥å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—å¾—åˆ°çš„ NaNï¼Œæ‰€ä»¥ç»“æœæ˜¯ NaNã€‚ [] + &#123;&#125; == &#123;&#125; + [] // true [] + {} å¾—åˆ°çš„ç»“æœæ˜¯ &#39;[object Object]&#39;ï¼Œ{} + [] å¾—åˆ°çš„ç»“æœå¹¶ä¸æ˜¯ 0ï¼Œå› ä¸ºè¿™æ—¶ {} å¹¶ä¸æ˜¯åœ¨è¯­å¥çš„å¼€å¤´ï¼Œä¼šè¢«çœ‹åšæ˜¯ç©ºå¯¹è±¡ï¼Œæ‰€ä»¥ {} + [] å¾—åˆ°çš„ç»“æœä¹Ÿæ˜¯ &#39;[object Object]&#39;ï¼ŒäºŒè€…æ˜¯ç›¸ç­‰çš„ï¼Œç»“æœæ˜¯ true &#123;&#125; + [] != [] + &#123;&#125; // true {} + [] å› ä¸ºåœ¨å¼€å¤´ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ 0ï¼Œè€Œ [] + {} çš„ç»“æœæ˜¯ [object Object]ï¼ŒäºŒè€…ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥ {} + [] != [] + {} çš„ç»“æœä¹Ÿæ˜¯ trueã€‚ å‚è€ƒæ–‡çŒ® JavaScript åŠ å·è¿ç®—ç¬¦è¯¦è§£ valueOf() vs. toString() in Javascript The Addition operator ( + ) ToNumber ECMAScript7è§„èŒƒä¸­çš„ToPrimitiveæŠ½è±¡æ“ä½œ Object to primitive conversion Symbol.toPrimitive ä¸ [] + {} == {} + []","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"},{"name":"+å·è¿ç®—","slug":"å·è¿ç®—","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%8F%B7%E8%BF%90%E7%AE%97/"}]},{"title":"è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦","date":"2020-07-01T06:35:00.000Z","path":"/è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦/","text":"é¢˜ç›®ï¼šå‡è®¾æŠŠæŸè‚¡ç¥¨çš„ä»·æ ¼æŒ‰ç…§æ—¶é—´å…ˆåé¡ºåºå­˜å‚¨åœ¨æ•°ç»„ä¸­ï¼Œè¯·é—®ä¹°å–è¯¥è‚¡ç¥¨ä¸€æ¬¡å¯èƒ½è·å¾—çš„æœ€å¤§åˆ©æ¶¦æ˜¯å¤šå°‘? ä¾‹å¦‚ï¼Œä¸€åªè‚¡ç¥¨åœ¨æŸäº›æ—¶é—´èŠ‚ç‚¹çš„ä»·æ ¼ä¸º $[9, 11, 8, 5, 7, 12, 16, 14]$ã€‚å¦‚æœæˆ‘ä»¬èƒ½åœ¨ä»·æ ¼ä¸º $5$ çš„æ—¶å€™ä¹°å…¥å¹¶åœ¨ä»·æ ¼ä¸º $16$ æ—¶å–å‡ºï¼Œåˆ™èƒ½æ”¶è·æœ€å¤§çš„åˆ©æ¶¦ $11$ã€‚ å¦‚æœæˆ‘ä»¬ä½¿ç”¨è›®åŠ›æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨è®¿é—®æ•°ç»„ä¸­çš„æ•°å­—æ—¶ä¹°å…¥ï¼Œç„¶åå¯»æ‰¾åé¢çš„æœ€å¤§å€¼å–å‡ºï¼Œå¾—åˆ°ä¹°å–çš„å·®å€¼ï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨å˜é‡ä¿å­˜æœ€å¤§çš„ä¹°å–å·®å€¼ï¼Œè¿™æ ·çš„ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n^2)$ã€‚ å¦‚æœæˆ‘ä»¬æ¢ä¸€ç§æ€è·¯ï¼Œå¦‚æœæˆ‘ä»¬ä»¥ $diff(i)$ è¡¨ç¤ºä»¥æ•°ç»„ä¸­ç¬¬ $i$ æ•°å­—å°†è‚¡ç¥¨å–å‡ºèƒ½å¤Ÿè·å¾—çš„æœ€å¤§åˆ©æ¶¦($i$ ä» $0$ å¼€å§‹)ï¼Œåœ¨å–å‡ºçš„ä»·æ ¼ä¸€å®šæ—¶ï¼Œä¹°å…¥çš„ä»·æ ¼è¶Šä½è¶Šå¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦æ‰¾å‡ºå‰é¢ $i-1$ ä¸ªæ•°å­—ä¸­çš„æœ€å°å€¼å³å¯å¾—åˆ°ä¹°å–çš„æœ€å¤§åˆ©æ¶¦ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ç”¨æ‰«æå‰é¢çš„æ•°å­—ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå˜é‡å°†å‰é¢çš„æœ€å°å€¼è®°å½•ä¸‹æ¥ã€‚æ‰€ä»¥è¿™æ ·åšçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰«æä¸€éæ•°ç»„å³å¯ã€‚ ä»£ç å¦‚ä¸‹ public static int maxDiff(int[] data) &#123; if (data == null || data.length &lt;= 1) &#123; return 0; &#125; // æœ€å¤§å·®å€¼ int maxDiff = 0; int min = data[0]; for (int i = 2; i &lt; data.length; i++) &#123; if (data[i] &gt; min) &#123; // è®¡ç®—ä»¥ data[i] å–å‡ºæ—¶çš„æœ€å¤§å·®å€¼ int diff = data[i] - min; if (diff &gt; maxDiff) &#123; maxDiff = diff; &#125; &#125; else &#123; // æ›´æ–°æœ€å°å€¼ min = data[i]; &#125; &#125; return maxDiff;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—","date":"2020-07-01T06:25:00.000Z","path":"/åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—/","text":"é¢˜ç›®ï¼š$0, 1, â€¦, n-1$ è¿™ $n$ ä¸ªæ•°å­—æ’æˆä¸€ä¸ªåœˆï¼Œä»æ•°å­— $0$ å¼€å§‹ï¼Œæ¯æ¬¡ä»è¿™ä¸ªåœ†åœˆé‡Œåˆ é™¤ç¬¬ $m$ ä¸ªæ•°å­—ã€‚æ±‚å‡ºè¿™ä¸ªåœ†åœˆé‡Œå‰©ä¸‹çš„æœ€åä¸€ä¸ªæ•°å­—ã€‚ è¿™é“é¢˜å°±æ˜¯æœ‰åçš„çº¦ç‘Ÿå¤«ç¯é—®é¢˜ï¼Œä¸‹é¢ä»‹ç»ä¸¤ç§ä»‹ç»ï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨é“¾è¡¨æ¨¡æ‹Ÿè¯¥ç¯ï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨åŠ¨æ€è§„åˆ’ã€‚ å¯¹äºä½¿ç”¨ç¯å½¢é“¾è¡¨æ¨¡æ‹Ÿç¯ï¼Œå¯ä»¥å¾ˆå¿«çš„å†™å‡ºè¿™æ ·çš„ä»£ç  public static int lastRemaining(int n, int m) &#123; List&lt;Integer&gt; list = new LinkedList&lt;&gt;(); // å°† 0 ~ n-1 å…± n ä¸ªæ•°å­—æ·»åŠ åˆ°é“¾è¡¨ä¸­ for (int i = 0; i &lt; n; i++) &#123; list.add(i); &#125; // è¦åˆ é™¤çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œå› ä¸ºæ˜¯ç¯å½¢é“¾è¡¨ï¼Œæˆ‘ä»¬è¦å¯¹é“¾è¡¨çš„é•¿åº¦æ±‚ä½™ int currentIndex = (m - 1) % list.size(); // å½“é“¾è¡¨ä¸­æœ‰ä¸€ä¸ªä»¥ä¸Šçš„å…ƒç´  while (list.size() &gt; 1) &#123; // åˆ é™¤å…ƒç´  list.remove(currentIndex); // æ›´æ–°ä¸‹ä¸€æ¬¡è¦åˆ é™¤çš„å…ƒç´ çš„ä¸‹æ ‡ currentIndex = (currentIndex + m - 1) % list.size(); &#125; // è¿”å›é“¾è¡¨ä¸­ä»…å‰©çš„å…ƒç´  return list.get(0);&#125; è€Œå¦ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œæˆ‘ä»¬ä½¿ç”¨ $f(n, m)$ è¡¨ç¤º $n$ ä¸ªæ•°å­—ä¸­åˆ é™¤ç¬¬ $m$ ä¸ªæ•°å­—å‰©ä¸‹æ¥çš„æ•°å­—ã€‚ç¬¬ä¸€ä¸ªè¢«åˆ é™¤çš„æ•°å­—æ˜¯ $(m-1) % n$ï¼Œè®°ä¸º $k$ï¼Œè¿˜å‰©ä¸‹ $n - 1$ ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸ªæ˜ å°„ $x$ $y$ $0$ $k + 1$ $1$ $k+2$ $â€¦$ $â€¦$ $n- k - 2$ $n - 1$ $n- k -1$ $0$ $â€¦$ $â€¦$ $n - 2$ $k - 1$ $y$ åºåˆ—æ˜¯åˆ é™¤äº†å…ƒç´  $k$ å‰©ä¸‹çš„å…ƒç´ æ’åºï¼Œæˆ‘ä»¬ä¸ä¸€ä¸ª $0-(n-2)$ çš„å…ƒç´ æ˜ å°„èµ·æ¥ï¼Œ$x$ ä¸ $y$ ä¹‹é—´çš„å¯¹åº”å…³ç³»ä¸º $y = (x + k + 1) % n$ã€‚å› ä¸º $k = (m - 1) % n$ï¼Œæ‰€ä»¥ $(k + 1) % n = m % n$ï¼Œæ‰€ä»¥ä¸Šå¼çš„å…³ç³»è¿›ä¸€æ­¥æ›´æ”¹ä¸º $y = (x + m) % n$ã€‚ å‡è®¾ $y$ åºåˆ—æœ€åå‰©ä¸‹çš„æ•°å­—ä¸º $f^{â€˜}(n-1, m)$ï¼Œè®°ä¸º $u$ï¼Œè®¾ $x$ åºåˆ—æœ€åå‰©ä¸‹çš„å€¼ä¸º $v$ï¼Œé‚£ä¹ˆæœ‰è¿™æ ·çš„ä¸€ä¸ªå…³ç³» â€‹$$f^{â€˜}(n-1, m) = u = (v + m) % n = (f(n-1, m) + m) % n$$åˆå› ä¸º$$f(n,m) = f^{â€˜}(n-1, m)$$æ‰€ä»¥ä»¬å¾—åˆ°äº† $f(n,m)$ ä¸ $f(n-1, m)$ çš„é€’æ¨å…¬å¼$$f(n,m) = f^{â€˜}(n-1, m) = u = (f(n-1, m) + m) % n$$æ‰€ä»¥ä»¬å¾—åˆ°äº† $f(n,m)$ ä¸ $f(n-1, m)$ çš„é€’æ¨å…¬å¼$$f(n,m) =\\begin{cases}0, &amp; n = 1 \\\\\\left[f(n-1,m) + m \\right] % n, &amp; n &gt; 1\\end{cases}$$ç¼–ç¨‹å¦‚ä¸‹ public static int lastRemaining(int n, int m) &#123; if (n &lt; 1 || m &lt; 1) &#123; return 0; &#125; int last = 0; for (int i = 2; i &lt;= n; i++) &#123; last = (last + m) % n; &#125; return last;&#125; è™½ç„¶æˆ‘ä»¬åˆ†æäº†è¿™ä¹ˆå¤šï¼Œä½†æ˜¯å®é™…ä¸Šçš„ä»£ç å´æ˜¯éå¸¸çš„çŸ­ã€‚","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"nä¸ªéª°å­çš„ç‚¹æ•°","date":"2020-07-01T05:43:00.000Z","path":"/nä¸ªéª°å­çš„ç‚¹æ•°/","text":"é¢˜ç›®ï¼šæŠŠ $n$ ä¸ªéª°å­æ‰”åœ¨åœ°ä¸Šï¼Œæ‰€æœ‰éª°å­æœä¸Šä¸€é¢çš„ç‚¹æ•°ä¹‹å’Œä¸º $s$ã€‚è¾“å…¥ $n$ï¼Œæ‰“å°å‡º $s$ æ‰€æœ‰å¯èƒ½çš„å€¼å‡ºç°çš„æ¦‚ç‡ã€‚ ä¸€ä¸ªéª°å­æ€»å…±æœ‰ $6$ é¢ï¼Œæ‰€ä»¥æ€»å…±æœ‰ $6^n$ æ€»æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»Ÿè®¡å‡ºæ‰€ä»¥ $s$ å¯èƒ½å‡ºç°çš„æ¬¡æ•°ï¼Œç„¶åé™¤ä»¥ $6 ^ n$ å°±å¯ä»¥å¾—åˆ°æ‰€æœ‰å€¼å‡ºç°çš„æ¦‚ç‡ã€‚ ç°åœ¨çš„é—®é¢˜å°±æ˜¯æ€ä¹ˆç»Ÿè®¡ $s$ ç‚¹å‡ºç°çš„æ¬¡æ•°ï¼Œæˆ‘ä»¬ä»¥ $f(i, s)$ è¡¨ç¤º $i$ ä¸ªéª°å­æŠ•å‡º $s$ ç‚¹çš„æ¬¡æ•°ï¼Œå› ä¸ºç¬¬ $i$ ä¸ªéª°å­èƒ½å¤ŸæŠ•å‡º $1, 2, 3, 4, 5, 6$ ç‚¹ $6$ ç§æƒ…å†µï¼Œæ‰€ä»¥åªè¦å‰ $i - 1$ ä¸ªéª°å­æŠ•å‡º $s-1, s-2, s-3, s-4, s-5, s-6$ çš„ç‚¹æ•°ï¼Œå‡å¯ä»¥ä½¿å¾— $i$ ä¸ªéª°å­æŠ•å‡º $s$ ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·çš„å…³ç³»å¼$$f(i,s) = f(i-1, s-1) + f(i-1, s-2) + f(i-1, s-3) + f(i-1, s-4) + f(i-1, s-5)+ f(i-1, s-6)$$ä»£ç å¦‚ä¸‹ public static double[] probability(int n) &#123; if (n &lt; 1) &#123; return new double[]&#123;0&#125;; &#125; // æœ‰nä¸ªéª°å­ï¼Œä¸ºäº†æ–¹ä¾¿ä»1å¼€å§‹ï¼Œæ‰€ä»¥è®¾ç½® n + 1 ä¸ªæ•°ç»„ï¼Œç‚¹æ•°æœ€å¤§ä¸º 6nï¼Œä¹Ÿæ˜¯ä» 1 å¼€å§‹ int[][] numbers = new int[n + 1][6*n + 1]; for (int i = 1; i &lt;= 6; i++) &#123; numbers[1][i] = 1; &#125; // i è¡¨ç¤ºéª°å­æ•° for (int i = 2; i &lt;= n; i++) &#123; // s è¡¨ç¤º i ä¸ªéª°å­æŠ•å‡ºçš„ç‚¹æ•° for (int s = i; s &lt;= 6 * i; s++) &#123; // cur è¡¨ç¤ºç¬¬ i ä¸ªéª°å­æŠ•å‡ºçš„ç‚¹æ•° for (int cur = 1; cur &lt;= 6; cur++) &#123; // s - cur è¡¨ç¤ºå‰ i - 1 ä¸ªéª°å­åº”è¯¥æŠ•å‡ºçš„ç‚¹æ•° // å‰ i - 1 ä¸ªéª°å­æŠ•å‡ºçš„ç‚¹æ•°æœ€å°å€¼ä¸º i - 1 // å¦‚æœ s - cur å°äº i - 1 è¯´æ˜ä¸å¯èƒ½ if (s - cur &lt; i - 1) &#123; break; &#125; numbers[i][s] += numbers[i - 1][s - cur]; &#125; &#125; &#125; double total = Math.pow(6, n); // æœ€å°ç‚¹æ•°ä¸º nï¼Œæœ€å¤§ç‚¹æ•°ä¸º 6nï¼Œæ€»å…±æœ‰ 6n - n + 1 = 5n + 1ç§å¯èƒ½ double[] ans = new double[5 * n + 1]; for (int i = n; i &lt;= 6 * n; i++) &#123; ans[i - n] = numbers[n][i] / total; &#125; return ans;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹","date":"2020-07-01T02:02:00.000Z","path":"/äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹/","text":"é¢˜ç›®ï¼šç»™å®šä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­ç¬¬ $k$ å¤§çš„èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¸‹å›¾çš„äºŒå‰æœç´¢æ ‘ä¸­ï¼Œç¬¬ $3$ å¤§çš„èŠ‚ç‚¹æ˜¯ $7$ å…¶å®è§£å†³è¿™é“é¢˜çš„ç®—æ³•ååˆ†çš„ç®€å•ï¼Œå› ä¸ºå¯¹äºäºŒå‰æœç´¢æ ‘æ¥è¯´ï¼Œå®ƒçš„ä¸­åºéå†æ˜¯æ’å¥½åºçš„ç»“æœï¼Œæˆ‘ä»¬è¦æŸ¥æ‰¾ç¬¬ $k$ å¤§çš„èŠ‚ç‚¹ï¼Œåªè¦ä¸­åºéå†åˆ°ç¬¬ $k$ ä¸ªèŠ‚ç‚¹å³å¯ï¼Œè¿™ä¸ªèŠ‚ç‚¹å³æ˜¯ç¬¬ $k$ å¤§çš„èŠ‚ç‚¹ public class GetKthNode &#123; // ä»¥å…¨å±€å˜é‡è¡¨ç¤ºè¿˜éœ€éå†å¤šå°‘ä¸ªèŠ‚ç‚¹ private static int count; private static class BinaryTreeNode &#123; BinaryTreeNode left; BinaryTreeNode right; int value; public BinaryTreeNode(int value) &#123; this.value = value; this.left = null; this.right = null; &#125; &#125; public static BinaryTreeNode getKthNode(BinaryTreeNode root, int k) &#123; if (root == null || k &lt;= 0) &#123; return null; &#125; count = k; return getKthNode(root); &#125; private static BinaryTreeNode getKthNode(BinaryTreeNode root) &#123; BinaryTreeNode target = null; if (root.left != null) &#123; target = getKthNode(root.left); &#125; if (target == null) &#123; if (count == 1) &#123; target = root; &#125; count--; &#125; if (target == null &amp;&amp; root.right != null) &#123; target = getKthNode(root.right); &#125; return target; &#125; public static void main(String[] args) &#123; BinaryTreeNode root = new BinaryTreeNode(8); root.left = new BinaryTreeNode(6); root.right = new BinaryTreeNode(10); root.left.left = new BinaryTreeNode(5); root.left.right = new BinaryTreeNode(7); root.right.left = new BinaryTreeNode(9); root.right.right = new BinaryTreeNode(11); BinaryTreeNode target = getKthNode(root, 3); System.out.println(target != null ? target.value : \"null\"); // 7 &#125;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹","date":"2020-07-01T01:00:00.000Z","path":"/ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹/","text":"é¢˜ç›®ï¼šè¾“å…¥ä¸¤ä¸ªé“¾è¡¨ï¼Œæ‰¾å‡ºå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€‚é“¾è¡¨èŠ‚ç‚¹å®šä¹‰å¦‚ä¸‹ï¼š private static class ListNode &#123; ListNode next; int value; public ListNode(int value) &#123; this.value = value; this.next = null; &#125;&#125; é¦–å…ˆæˆ‘ä»¬ä¼šè€ƒè™‘è›®åŠ›æ³•ï¼Œæˆ‘ä»¬åœ¨éå†ç¬¬ä¸€ä¸ªé“¾è¡¨æ—¶ï¼Œæ¯è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬éƒ½ä¼šå»ç¬¬äºŒä¸ªé“¾è¡¨æŸ¥çœ‹æ˜¯å¦æœ‰ç›¸åŒçš„èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰è¯´æ˜å®ƒä»¬é‡åˆï¼Œè¿™ä¸ªèŠ‚ç‚¹å³æ˜¯å®ƒä»¬çš„å…¬å…±èŠ‚ç‚¹ã€‚å¦‚æœç¬¬ä¸€ä¸ªé“¾è¡¨çš„é•¿åº¦ä¸º $m$ï¼Œç¬¬äºŒä¸ªé“¾è¡¨çš„é•¿åº¦ä¸º $n$ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦ä¸º $O(mn)$ã€‚ å¦‚æœæˆ‘ä»¬èƒ½ä»é“¾è¡¨çš„å°¾éƒ¨å¼€å§‹éå†çš„è¯ï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªç›¸åŒçš„èŠ‚ç‚¹å³æ˜¯å®ƒä»¬ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€‚ä½†æ˜¯ç”±äºé¢˜ç›®æ‰€ç»™å‡ºçš„é“¾è¡¨æ˜¯å•å‘é“¾è¡¨ï¼Œä¸èƒ½ä»å°¾éƒ¨å¼€å§‹éå†ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨æ ˆï¼Œæˆ‘ä»¬åœ¨éå†ä¸¤ä¸ªé“¾è¡¨æ—¶å°†èŠ‚ç‚¹æ·»åŠ åˆ°æ ˆä¸­ï¼Œæ¥ç€ä»æ ˆä¸­å–å‡ºå…ƒç´ ï¼Œæ˜¯ä¸æ˜¯å°±ç›¸å½“äºä»å°¾éƒ¨å¼€å§‹éå†é“¾è¡¨äº†ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•éœ€è¦ $O(m+n)$ çš„æ—¶é—´å¤æ‚åº¦å’Œ $O(m + n)$ çš„ç©ºé—´å¤æ‚åº¦ã€‚ ç°åœ¨åœ¨è€ƒè™‘ä¸€ç§è§£æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆè·å¾—ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦ï¼Œå‡è®¾ç¬¬ä¸€ä¸ªé“¾è¡¨æ¯”ç¬¬äºŒä¸ªé“¾è¡¨é•¿ $k$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆè®©ç¬¬ä¸€ä¸ªé“¾è¡¨å…ˆèµ° $k$ æ­¥ï¼Œæ¥ç€åŒæ—¶éå†ä¸¤ä¸ªé“¾è¡¨ï¼Œè¿™æ—¶å®ƒä»¬ä¼šåŒæ—¶åˆ°è¾¾ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ï¼Œæ‰€ä»¥å½“å®ƒä»¬éå†çš„èŠ‚ç‚¹ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“è¿™ä¸ªèŠ‚ç‚¹æ˜¯ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€‚è¯¥ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(m + n)$ï¼Œä½†æ˜¯ä¸éœ€è¦é¢å¤–çš„ç©ºé—´å¤æ‚åº¦ã€‚ public static ListNode findFirstCommonNode(ListNode root1, ListNode root2) &#123; if (root1 == null || root2 == null) &#123; return null; &#125; int length1 = getListLength(root1); int length2 = getListLength(root2); ListNode ahead = root1; ListNode after = root2; // å¦‚æœé“¾è¡¨ 2 æ¯”é“¾è¡¨ 1 é•¿ï¼Œé“¾è¡¨ 2 å…ˆèµ° if (length2 - length1 &gt; 0) &#123; ahead = root2; after = root1; &#125; // é•¿çš„å…ˆèµ° k æ­¥ for (int i = 0; i &lt; Math.abs(length2 - length1); i++) &#123; ahead = ahead.next; &#125; // å½“è®¿é—®çš„èŠ‚ç‚¹ç›¸åŒæ—¶ï¼Œå³æ˜¯ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ while (ahead != null &amp;&amp; after != null) &#123; if (ahead == after) &#123; return ahead; &#125; ahead = ahead.next; after = after.next; &#125; return null;&#125;// è·å¾—é“¾è¡¨çš„é•¿åº¦private static int getListLength(ListNode root) &#123; ListNode cur = root; int length = 0; while (cur != null) &#123; length++; cur = cur.next; &#125; return length;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"æœ€å¤§å­æ•°ç»„å’Œä»¥åŠæœ€é•¿å­å­—ç¬¦ä¸²","date":"2020-06-29T14:30:00.000Z","path":"/æœ€å¤§å­æ•°ç»„å’Œä»¥åŠæœ€é•¿å­å­—ç¬¦ä¸²/","text":"é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰æ­£æ•°ä¹Ÿæœ‰è´Ÿæ•°ã€‚æ•°ç»„ä¸­çš„ä¸€ä¸ªæˆ–è¿ç»­å¤šä¸ªæ•´æ•°ç»„æˆä¸€ä¸ªå­æ•°ç»„ã€‚æ±‚æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ã€‚ æˆ‘ä»¬å‡è®¾ä½¿ç”¨ $f(i)$ è¡¨ç¤ºä»¥ç¬¬ $i$ ä¸ªæ•°å­—ç»“å°¾çš„å­æ•°ç»„çš„æœ€å¤§å’Œï¼Œé‚£ä¹ˆ $f(i +1)$ ä¸ $f(i)$ çš„å…³ç³»ä¸º $$ f(i) = \\begin{cases} f(i - 1) + data[i], & f(i - 1) > 0 \\\\ data[i], & f(i) \\leq 0 \\end{cases} $$ å¦‚æœ $f(i - 1)$ å°äº $0$ çš„è¯ï¼Œé‚£ä¹ˆ $f(i - 1) + data[i] &lt; data[i]$ï¼Œæ‰€ä»¥ä»¥ç¬¬ $i$ ä¸ªæ•°å­—ç»“å°¾çš„æ•°ç»„æœ€å¤§å’Œä¸º $data[i]$ã€‚æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡æ˜¯å¯»æ‰¾ $max [ f(i) ], i = 0, 1, â€¦, n - 1$ï¼Œæ‰€ä»¥ä»£ç å¦‚ä¸‹ public static int findGreastSumOfSubArray(int[] data) &#123; if (data == null || data.length == 0) &#123; throw new RuntimeException(\"æ•°ç»„ä¸ºç©ºæˆ–null\"); &#125; // f(i) int sum = 0; // max&#123;f(i)&#125; int greastSum = sum; // éå†æ•°ç»„ for (int i = 0; i &lt; data.length; i++) &#123; if (sum &lt;= 0) &#123; sum = data[i]; &#125; else &#123; sum += data[i]; &#125; // æ›´æ–° max&#123;f(i)&#125; if (sum &gt; greastSum) &#123; greastSum = sum; &#125; &#125; return greastSum;&#125; è¯·ä»å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºä¸€ä¸ªæœ€é•¿çš„ä¸åŒ…å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²ï¼Œè®¡ç®—è¯¥æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å‡è®¾å­—ç¬¦ä¸²ä¸­åªåŒ…å« &#39;a&#39;~&#39;z&#39; çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œåœ¨å­—ç¬¦ä¸² &quot;arabcacfr&quot; ä¸­ï¼Œæœ€é•¿çš„ä¸å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²æ˜¯ &quot;acfr&quot;ï¼Œé•¿åº¦ä¸º $4$ã€‚ æˆ‘ä»¬å®šä¹‰ $f(i)$ è¡¨ç¤ºä»¥ç¬¬ $i$ ä¸ªå­—ç¬¦ç»“å°¾çš„ä¸åŒ…å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²çš„æœ€é•¿é•¿åº¦ï¼Œé‚£ä¹ˆ $f(i)$ ä¸ $f(i - 1)$ çš„å…³ç³»æ˜¯ä»€ä¹ˆå‘¢? ç¬¬ $i$ ä¸ªå­—ç¬¦ä»æ¥æ²¡æœ‰å‡ºç°è¿‡ï¼Œé‚£ä¹ˆ $f(i) = f(i - 1) + 1$ ç¬¬ $i$ ä¸ªå­—ç¬¦ä»¥å‰å‡ºç°è¿‡ï¼Œè¿™ä¸ªæ—¶å€™è¦åˆ†ä¸¤ç§æƒ…å†µè€ƒè™‘ ä»¥å‰å‡ºç°è¿‡çš„å­—ç¬¦åœ¨ä»¥ $f(i - 1)$ è¡¨ç¤ºçš„å­å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œè®°è¿™ä¸¤ä¸ªé‡å¤çš„å­—ç¬¦é—´çš„è·ç¦»ä¸º $d$ï¼Œå¹¶ä¸”æ»¡è¶³ $d \\leq f(i - 1)$ï¼Œè¿™æ—¶ $f(i)$ å°±æ˜¯ $d$ å¦‚æœä»¥å‰å‡ºç°çš„å­—ç¬¦åœ¨ $f(i - 1)$ è¡¨ç¤ºçš„å­å­—ç¬¦ä¸²ä»¥å¤–ï¼Œé‚£ä¹ˆè¯¥å­—ç¬¦å¯¹äº $f(i)$ æ¥è¯´è¿˜æ˜¯æœªé‡å¤çš„ï¼Œæ‰€ä»¥ $f(i) = f(i - 1) + 1$ ä»£ç å¦‚ä¸‹ public static int getLongestStringWithoutDuplication(String string) &#123; if (string == null || string.length() == 0) &#123; return 0; &#125; char[] str = string.toCharArray(); // ä¿å­˜å­—ç¬¦ä¹‹å‰å‡ºç°è¿‡çš„ä½ç½®ï¼Œåˆå§‹ä¸º -1ï¼Œè¡¨ç¤ºæœªå‡ºç°è¿‡ int[] position = new int[26]; for (int i = 0; i &lt; 26; i++) &#123; position[i] = -1; &#125; // f(i) int curLength = 0; // max&#123;f(i)&#125; int maxLength = 0; for (int i = 0; i &lt; str.length; i++) &#123; int prevIndex = position[str[i] - 'a']; // å¦‚æœä¹‹å‰æœªå‡ºç°è¿‡æˆ–è€… d &gt; f(i - 1)ï¼Œé‚£ä¹ˆ f(i) = f(i -1) + 1 if (prevIndex &lt; 0 || (i - prevIndex) &gt; curLength) &#123; curLength++; &#125; else &#123; // å¦‚æœ f(i) å¤§äºå½“å‰çš„ max&#123;f(i)&#125;ï¼Œé‚£ä¹ˆæ›´æ–° max&#123;f(i)&#125; if (curLength &gt; maxLength) &#123; maxLength = curLength; &#125; // d &lt; f(i - 1) æ—¶ï¼Œf(i) = d = i - preIndex curLength = i - prevIndex; &#125; // è®¾ç½®å­—ç¬¦å‡ºç°çš„ä½ç½® position[str[i] - 'a'] = i; &#125; if (curLength &gt; maxLength) &#123; maxLength = curLength; &#125; return maxLength;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—","date":"2020-06-29T05:01:00.000Z","path":"/æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—/","text":"é¢˜ç›®ï¼šæ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€åŠï¼Œè¯·æ‰¾å‡ºè¿™ä¸ªæ•°å­—ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸º $9$ çš„æ•°ç»„ ${ 1, 2, 3, 2, 2, 2, 5, 4, 2 }$ã€‚ç”±äºæ•°å­— $2$ åœ¨æ•°ç»„ä¸­å‡ºç°äº† $5$ æ¬¡ï¼Œè¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€åŠï¼Œå› æ­¤è¾“å‡º $2$ã€‚ å¦‚æœè¿™ä¸ªæ•°ç»„æ˜¯æ’å¥½åºçš„æ•°ç»„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾ˆå®¹æ˜“å°±å¯ä»¥ç»Ÿè®¡å‡ºæ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°ï¼Œä½†æ˜¯é¢˜ç›®å¹¶æ²¡æœ‰è¯´æ˜æ•°ç»„æ˜¯æ’åºçš„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨æ’åºç®—æ³•è¿›è¡Œæ’åºï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n\\log n)$ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯æœ€å¿«çš„æ–¹æ³•ï¼Œä¸‹é¢ä»‹ç»ä¸¤ç§æ›´å¿«çš„è§£æ³•ã€‚ å¦‚æœæˆ‘ä»¬å°†æ•°ç»„æ’å¥½åºï¼Œç”±äºæœ‰ä¸€ä¸ªæ•°å­—çš„æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€èˆ¬ï¼Œé‚£ä¹ˆä¸­ä½æ•°ä¸€å®šæ˜¯è¯¥æ•°ï¼Œå³æ’å¥½åºçš„æ•°ç»„çš„ $n/2$ çš„ä½ç½®å¤„å°±æ˜¯æˆ‘ä»¬éœ€è¦è¾“å‡ºçš„æ•°å­—ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾æ•°ç»„ä¸­ç¬¬ $n/2$ å¤§çš„æ•°å­—ï¼Œå¯¹äºæŸ¥æ‰¾ç¬¬ $k$ å¤§çš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ $partition$ ç®—æ³•ã€‚ $partition$ æ˜¯å¿«é€Ÿæ’åºç”¨åˆ°çš„ç®—æ³•ï¼Œå®ƒå°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå‰åŠéƒ¨åˆ†çš„æ•°å°äºååŠéƒ¨åˆ†çš„æ•°ï¼Œè¿”å›å‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†åˆ†ç•Œå¤„çš„ä¸‹æ ‡ $index$($index$ æ˜¯å‰åŠéƒ¨åˆ†çš„æœ€åä¸€ä¸ªæ•°çš„ä¸‹æ ‡)ï¼Œå¦‚æœè¯¥ä¸‹æ ‡ä¸º $n/2$ï¼Œé‚£ä¹ˆæ‰¾åˆ°äº†æˆ‘ä»¬è¦è¾“å‡ºçš„æ•°ï¼Œå¦‚æœå¤§äº $n/2$ï¼Œé‚£ä¹ˆæ•°å­—åœ¨å‰åŠéƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯¹å‰åŠéƒ¨åˆ†ç»§ç»­ä½¿ç”¨ $partition$ ç®—æ³•ï¼›å¦‚æœ $index$ å°äº $n / 2$ï¼Œé‚£ä¹ˆè¾“å‡ºçš„æ•°å­—åœ¨ååŠéƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯¹ååŠéƒ¨åˆ†ä½¿ç”¨ $partition$ ç®—æ³•ã€‚ä»¥æ­¤å¾€å¤ï¼Œç›´åˆ° $index$ çš„å€¼ä¸º $n/2$ï¼Œæˆ‘ä»¬å°±å°†è¯¥æ•°è¾“å‡ºã€‚ ä»£ç å¦‚ä¸‹ // partition ç®—æ³•private static int partition(int[] data, int start, int end) &#123; if (end &lt; start) &#123; throw new RuntimeException(\"å‚æ•°é”™è¯¯\"); &#125; int num = data[end]; int more = end + 1; int cur = start; while (cur &lt; more) &#123; if (data[cur] &lt;= num) &#123; cur++; &#125; else &#123; int number = data[cur]; data[cur] = data[--more]; data[more] = number; &#125; &#125; return cur - 1;&#125;public static int findMoreThanHalfNumber(int[] data) &#123; int start = 0; int end = data.length - 1; int index = partition(data, start, end); // middle ä»£è¡¨æ˜¯ n /2 çš„ä½ç½® int middle = start + (end - start) / 2; while (index != middle) &#123; if (index &lt; middle) &#123; start = index + 1; index = partition(data, start, end); &#125; else &#123; end = index - 1; index = partition(data, start, end); &#125; &#125; return data[index];&#125; ä¸‹é¢è®²è§£ç¬¬äºŒç§è§£æ³•ï¼Œé¢˜ç›®è¯´æœ‰ä¸€ä¸ªæ•°å­—è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€åŠï¼Œè¯´æ˜è¯¥æ•°å­—å‡ºç°çš„æ¬¡æ•°æ¯”å…¶ä»–æ•°å­—å‡ºç°çš„æ¬¡æ•°åŠ èµ·æ¥éƒ½å¤šï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨éå†æ•°ç»„æ—¶ä¿å­˜ä¸¤ä¸ªå˜é‡ï¼Œä¸€ä¸ªä¿å­˜çš„æ˜¯æ•°ç»„ä¸­çš„æ•°å­—ï¼Œä¸€ä¸ªæ˜¯æ¬¡æ•°ï¼›å¦‚æœä¸‹ä¸€ä¸ªæ•°å­—ä¸ä¿å­˜çš„æ•°å­—ä¸åŒï¼Œé‚£ä¹ˆæ¬¡æ•°å‡ä¸€ï¼Œå¦‚æœç›¸åŒï¼Œé‚£ä¹ˆæ¬¡æ•°åŠ ä¸€ã€‚å¦‚æœæ¬¡æ•°å·²ç»ä¸º $0$ï¼Œé‚£ä¹ˆè®¾ç½®ä¿å­˜çš„æ•°å­—ä¸ºç›®å‰çš„æ•°å­—ï¼Œå› ä¸ºè¾“å‡ºçš„æ•°å­—å‡ºç°çš„æ¬¡æ•°æ¯”å…¶ä»–æ‰€æœ‰æ•°å­—å‡ºç°çš„æ¬¡æ•°åŠ èµ·æ¥éƒ½å¤šï¼Œæ‰€ä»¥æœ€åä¿å­˜çš„æ•°å­—ä¸€å®šæ˜¯æˆ‘ä»¬æƒ³è¦è¾“å‡ºçš„æ•°å­—ã€‚ ä»£ç å¦‚ä¸‹ public static int moreThanHalfNumber(int[] data) &#123; if (data == null || data.length == 0) &#123; throw new RuntimeException(\"å‚æ•°æ“ä½œ\"); &#125; // ä¿å­˜æ¬¡æ•° int count = 1; // ä¿å­˜æ•°å­— int result = data[0]; for (int i = 1; i &lt; data.length; i++) &#123; if (count == 0) &#123; result = data[i]; count = 1; continue; &#125; if (result != data[i]) &#123; count--; &#125; else &#123; count++; &#125; &#125; return result;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"å­—ç¬¦ä¸²çš„æ’åˆ—","date":"2020-06-29T02:33:00.000Z","path":"/å­—ç¬¦ä¸²çš„æ’åˆ—/","text":"é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥å­—ç¬¦ä¸² abcï¼Œåˆ™æ‰“å°å‡ºç”±å­—ç¬¦ aã€bã€c æ‰€èƒ½æ’åˆ—å‡ºæ¥çš„æ‰€æœ‰å­—ç¬¦ä¸² abcã€acbã€bacã€bcaã€cab å’Œ cbaã€‚ æˆ‘ä»¬è¦æ‰“å°å‡ºå­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ï¼Œå°±æ˜¯è¦è®©å­—ç¬¦èƒ½å¤Ÿå‡ºç°åœ¨æ‰€æœ‰çš„ä½ç½®ä¸Šã€‚æˆ‘ä»¬çš„æ–¹æ³•å¦‚ä¸‹ï¼Œé¦–å…ˆå°†å­—ç¬¦ä¸²åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†åªæœ‰é¦–å­—ç¬¦ä¸€ä¸ªå­—ç¬¦ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å‰©ä¸‹çš„éƒ¨åˆ†ã€‚æ¥ç€æˆ‘ä»¬åˆ†ä¸ºä¸¤æ­¥å‡ºæ¥ ç¬¬ä¸€æ­¥è®©æ‰€æœ‰çš„å­—ç¬¦éƒ½èƒ½å¤Ÿå‡ºç°åœ¨é¦–ä½ï¼Œå°†é¦–å­—ç¬¦ä¾æ¬¡ä¸åé¢çš„å­—ç¬¦è¿›è¡Œäº¤æ¢ï¼Œè¿™æ ·èƒ½å¤Ÿä¿è¯é¦–å­—ç¬¦å¯ä»¥å‡ºç°åœ¨åé¢çš„æ¯ä¸ªä½ç½®ä¸Šï¼Œä¹Ÿå¯ä»¥ä¿è¯åé¢çš„å­—ç¬¦å‡ºç°åœ¨ç¬¬ä¸€ä¸ªä½ç½®ä¸Š ç¬¬äºŒæ­¥æˆ‘ä»¬å›ºå®šç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œæ¥ç€å¤„ç†ç¬¬äºŒéƒ¨åˆ†ï¼Œè€Œç¬¬äºŒéƒ¨åˆ†çš„å¤„ç†ä¹Ÿæ˜¯å°†ç¬¬äºŒéƒ¨åˆ†ä¹Ÿåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œé¦–å­—ç¬¦ä¸å‰©ä¸‹çš„éƒ¨åˆ†ä¸¤éƒ¨åˆ†ï¼Œè¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œé€šè¿‡è¿™æ ·çš„å¤„ç†ï¼Œæˆ‘ä»¬ç¡®ä¿æ¯ä¸ªå­—ç¬¦éƒ½èƒ½å¤Ÿå‡ºç°åœ¨æ¯ä¸ªä½ç½®ä¸Š ä»£ç å¦‚ä¸‹ï¼š public static void permutation(String string) &#123; char[] str = string.toCharArray(); permutation(str, 0);&#125;private static void permutation(char[] str, int index) &#123; if (index == str.length) &#123; System.out.println(new String(str)); &#125; for (int i = index; i &lt; str.length; i++) &#123; // é¦–å­—ç¬¦ä¸åé¢çš„å­—ç¬¦è¿›è¡Œäº¤æ¢ char temp = str[i]; str[i] = str[index]; str[index] = temp; // å›ºå®šé¦–å­—ç¬¦ï¼Œå¤„ç†ç¬¬äºŒéƒ¨åˆ† permutation(str, index + 1); // å°†å­—ç¬¦äº¤æ¢å›æ¥ï¼Œä»¥ä¾¿é¦–å­—ç¬¦èƒ½å¤Ÿå‡ºç°åœ¨åé¢çš„æ¯ä¸ªä½ç½® temp = str[i]; str[i] = str[index]; str[index] = temp; &#125;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"å¤æ‚é“¾è¡¨çš„å¤åˆ¶","date":"2020-06-28T06:06:00.000Z","path":"/å¤æ‚é“¾è¡¨çš„å¤åˆ¶/","text":"é¢˜ç›®ï¼šè¯·å®ç°å‡½æ•° ComplexListNode Clone(ComplexListNode root)ï¼Œå¤åˆ¶ä¸€ä¸ªå¤æ‚é“¾è¡¨ã€‚åœ¨å¤æ‚é“¾è¡¨ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰ä¸€ä¸ª next æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ª sbling æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­çš„ä»»æ„èŠ‚ç‚¹æˆ–è€… nullã€‚å¤æ‚é“¾è¡¨çš„èŠ‚ç‚¹å®šä¹‰å¦‚ä¸‹ï¼š private static class ComplexListNode &#123; ComplexListNode next; ComplexListNode sibling; int value; public ComplexListNode(int value) &#123; this.value = value; &#125;&#125; ä¸€ä¸ªå¤æ‚é“¾è¡¨çš„ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤º çœ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå¤šäººçš„è§£å†³æ–¹æ¡ˆæ˜¯é¦–å…ˆå¤åˆ¶é“¾è¡¨çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨ next æŒ‡é’ˆè¿æ¥èµ·æ¥ï¼Œç¬¬äºŒæ­¥å†æ¬¡éå†é“¾è¡¨ï¼Œå¹¶ä¸”é€æ¬¡è®¾ç½® sbling æŒ‡é’ˆã€‚è€ƒè™‘è¯¥é“¾è¡¨çš„é•¿åº¦ä¸º Nï¼Œé‚£ä¹ˆåœ¨æ¯æ¬¡è®¾ç½® sbling èŠ‚ç‚¹æ—¶éƒ½è¦æœç´¢æ•´ä¸ªé“¾è¡¨ï¼Œæœç´¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(N)$ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰è¿™ä¸ªæœç´¢è¿‡ç¨‹ï¼Œæ‰€ä»¥æ•´ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º $O(N^2)$ã€‚ ç°åœ¨æˆ‘ä»¬å¯ä»¥è€ƒè™‘ç¬¬äºŒç§æ–¹æ³•ï¼Œç¬¬ä¸€æ­¥ä»ç„¶æ˜¯æ ¹æ®åŸå§‹é“¾è¡¨çš„èŠ‚ç‚¹ N åˆ›å»ºå¤åˆ¶çš„èŠ‚ç‚¹ N&#39;ï¼Œå¹¶å°† &lt;N,N&#39;&gt; æ”¾å…¥åˆ°ä¸€ä¸ªå“ˆå¸Œè¡¨ä¸­ï¼Œé‚£ä¹ˆè¿™æ ·ä¸€æ¥ï¼Œç¬¬äºŒæ­¥å°±ä¸éœ€è¦å»æœç´¢æ•´ä¸ªé“¾è¡¨ï¼Œåªéœ€è¦ä»¥ $O(1)$ çš„å¤æ‚åº¦å°±å¯ä»¥ä»å“ˆå¸Œè¡¨ä¸­æ‹¿åˆ°æƒ³è¦çš„èŠ‚ç‚¹ã€‚è¿™ç§æƒ…å†µå°±æ˜¯ä»¥ç©ºé—´æ¢æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦ $O(N)$ çš„ç©ºé—´å¤æ‚åº¦æŠŠæ—¶é—´å¤æ‚åº¦ä» $O(N^2)$ é™åˆ° $O(N)$ã€‚ ç°åœ¨æˆ‘ä»¬åœ¨è€ƒè™‘ä¸€ç§æ–¹æ³•ï¼Œé¦–å…ˆç¬¬ä¸€æ­¥è¿˜æ˜¯æ ¹æ®åŸå§‹é“¾è¡¨çš„èŠ‚ç‚¹ N å¤åˆ¶èŠ‚ç‚¹ N&#39;ï¼Œå¹¶ä¸”å°† N&#39; é“¾æ¥åˆ° N ä¹‹åï¼Œå¦‚ä¸‹æ‰€ç¤º private static void cloneNodes(ComplexListNode root) &#123; ComplexListNode cur = root; while (cur != null) &#123; ComplexListNode cloneNode = new ComplexListNode(cur.value); cloneNode.next = cur.next; cur.next = cloneNode; cur = cloneNode.next; &#125;&#125; ç¬¬äºŒæ­¥è®¾ç½®å¤åˆ¶å‡ºæ¥çš„èŠ‚ç‚¹çš„ sblingï¼Œå¦‚æœèŠ‚ç‚¹ N çš„ sbling æŒ‡é’ˆæŒ‡å‘çš„æ˜¯ Sï¼Œé‚£ä¹ˆ N&#39; çš„ sbling æŒ‡å‘çš„å°±æ˜¯ S.nextï¼Œå¦‚ä¸‹ private static void siblingNodes(ComplexListNode root) &#123; ComplexListNode cur = root; while (cur != null) &#123; if (cur.sibling != null) &#123; cur.next.sibling = cur.sibling.next; &#125; cur = cur.next.next; &#125;&#125; æœ€åä¸€æ­¥å°±æ˜¯é€‰æ‹©è¿™äº›é“¾è¡¨çš„ç¬¬å¶æ•°ä¸ªèŠ‚ç‚¹é€šè¿‡ next è¿æ¥èµ·æ¥ï¼Œç„¶åè¿”å›æ ¹èŠ‚ç‚¹ private static ComplexListNode reconnect(ComplexListNode root) &#123; ComplexListNode cur = root; ComplexListNode cloneRoot = null; ComplexListNode curClone = null; if (cur != null) &#123; cloneRoot = cur.next; &#125; while (cur != null) &#123; curClone = cur.next; cur = cur.next.next; curClone = curClone.next; &#125; return cloneRoot;&#125; æˆ‘ä»¬æŠŠä¸Šé¢ä¸‰æ­¥æ¥åˆèµ·æ¥ï¼Œå°±æ˜¯å¤åˆ¶é“¾è¡¨çš„å®Œæ•´è¿‡ç¨‹ public static ComplexListNode clone(ComplexListNode root) &#123; cloneNodes(root); siblingNodes(root); return reconnect(root);&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"æ‰‹å†™Promise","date":"2020-06-27T16:00:00.000Z","path":"/æ‰‹å†™Promise/","text":"Promiseçš„ä½¿ç”¨å›è°ƒåœ°ç‹±é¦–å…ˆæˆ‘ä»¬äº†è§£ä¸€ä¸‹ Promise å‡ºç°çš„èƒŒæ™¯ï¼Œå‡è®¾æœ‰ä¸‹é¢çš„ç¨‹åº let name = getUserNameById(id);let score = getScoreByName(name);let scholarship = getScholarshipByScore(score);console.log(scholarship); è¿™ä¸ªç¨‹åºé¦–å…ˆæ ¹æ® id å»è·å–åå­—ï¼Œæ¥ç€æ ¹æ®æ‹¿åˆ°çš„åå­—å–è·å¾—åˆ†æ•°ï¼Œæœ€åæ ¹æ®åˆ†æ•°å»è·å–å¥–å­¦é‡‘ï¼Œæœ€åæ‰“å°å‡ºå¥–å­¦é‡‘ã€‚ä½†æ˜¯è¿™ä¸ªç¨‹åºçœŸçš„èƒ½è¾¾åˆ°é¢„æœŸçš„æ•ˆæœå—? ç­”æ¡ˆæ˜¯ä¸èƒ½ï¼Œå› ä¸º JavaScript æ˜¯å¼‚æ­¥çš„ï¼Œå¯¹äºä¸€èˆ¬çš„è€—æ—¶æ“ä½œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯å°†å‡½æ•°ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šæ‹¿å‡ºé˜Ÿåˆ—ä¸­çš„å‡½æ•°æ‰§è¡Œã€‚æ‰€ä»¥ä¸Šé¢çš„å‡½æ•°éƒ½ä¸ä¼šè¢«ç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥å½“ç„¶æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥ä¸Šé¢çš„ name, score, scholarship éƒ½æ˜¯ undefinedã€‚ ä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨å›è°ƒå‡½æ•°çš„å½¢å¼ï¼Œç­‰æˆ‘ä»¬æ ¹æ® id æ‹¿åˆ° name ä¹‹åï¼Œå°† name ä¼ å…¥å›è°ƒå‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯â€åŒæ­¥â€çš„æ•ˆæœï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä¸Šé¢çš„ä»£ç ä¿®æ”¹å¦‚ä¸‹ getUserNameById(id, function(name) &#123; getScoreByName(name, function(score) &#123; getScholarshipByScore(score, function(scholarship) &#123; console.log(scholarship) &#125;) &#125;)&#125;) ä½†æ˜¯ä¸Šé¢çš„ç¨‹åºçœ‹èµ·æ¥è¿˜æ˜¯æ€ªå“äººçš„ï¼Œå‡½æ•°å¥—ç€å‡½æ•°ï¼Œåƒè¿™æ ·çš„æƒ…å†µæˆ‘ä»¬ç§°ä¹‹ä¸ºå›è°ƒåœ°ç‹±ã€‚å›è°ƒåœ°ç‹±ä¸èƒ½ä½¿ç”¨ try... catch æ•è·å¼‚å¸¸ï¼Œä¸èƒ½ä½¿ç”¨ returnï¼Œå¹¶ä¸”ä»£ç çš„å¯è¯»æ€§å·®ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚å¯èƒ½ç°åœ¨ä½ è¿˜ä½“ä¼šä¸åˆ°ï¼Œä¸Šé¢æˆ‘ä»¬åªæ˜¯åµŒå¥—äº†ä¸‰å±‚ï¼Œå®é™…çš„æƒ…å†µå¯èƒ½æœ‰æ›´å¤šçš„å±‚ï¼Œä½¿å¾—ä»£ç å¾ˆéš¾é˜…è¯»ã€‚ Promiseçš„ç®€å•ä½¿ç”¨æ­£æ˜¯ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œåœ¨ ES6 ä¸­æå‡ºäº† Promise æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹å¦‚ä½•ä½¿ç”¨ Promiseï¼Œçœ‹ä¸‹é¢çš„ç¨‹åº let p = new Promise(resolve =&gt; &#123; // fn1 setTimeout(() =&gt; &#123; console.log(\"1s\") resolve(1); &#125;, 1000);&#125;);p.then(value =&gt; &#123; // fn2 console.log(value);&#125;); Promise æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•° fn1ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸€ä¸ª then æ–¹æ³•ï¼Œthen æ–¹æ³•ä¹Ÿæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•° fn2ï¼Œåªæœ‰å½“ fn1 ä¸­æ¥æ”¶ resolve å‡½æ•°æ‰§è¡Œ(å½“ resolve æ‰§è¡Œä»¥åï¼Œæˆ‘ä»¬å°±è¯´è¯¥ Promise å¯¹è±¡è¿›å…¥äº† fulfilled çŠ¶æ€)ï¼Œfn2 æ‰ä¼šè¢«æ‰§è¡Œã€‚ ä»¥ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œé¦–å…ˆæˆ‘ä»¬å¾€ Promise ä¸­ä¼ é€’äº†ä¸€ä¸ªå›è°ƒå‡½æ•° fn1ï¼Œè¯¥å‡½æ•°ä¼šç«‹å³æ‰§è¡Œ // å‘æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„å›è°ƒå‡½æ•° fn1resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"1s\") resolve(1); &#125;, 1000);&#125; å½“è¯¥ fn1 çš„ resolve å‡½æ•°æ‰§è¡Œä¹‹åï¼Œfn2 æ‰ä¼šè¢«æ‰§è¡Œï¼Œæ‰€ä»¥ 1s ä¹‹å fn2 æ‰ä¼šæ‰§è¡Œ // then æ¥æ”¶çš„å›è°ƒå‡½æ•° fn2value =&gt; &#123; console.log(value);&#125; fn2 æ¥æ”¶çš„å‚æ•° value æ˜¯é€šè¿‡ resolve ä¼ å…¥çš„ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬é€šè¿‡ resolve(1) ä¼ å…¥äº†å‚æ•° 1ï¼Œæ‰€ä»¥ fn2 æ¥å—åˆ°çš„å‚æ•°ä¸º 1ã€‚ä¸Šé¢æ‰§è¡Œçš„ç»“æœä¸º å¯è§ fn2 æ˜¯åœ¨ resolve å‡½æ•°ä¹‹åæ‰§è¡Œçš„ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯ä»£ç æ‰§è¡Œçš„é¡ºåºï¼Œå¹¶ä¸”ä¸ç”¨å†™åµŒå¥—çš„å›è°ƒå‡½æ•°ï¼Œè€Œæ˜¯ä½¿ç”¨ then æ–¹æ³•è¿›è¡Œâ€å¹³è¡Œâ€çš„è°ƒç”¨ã€‚ é“¾å¼è°ƒç”¨æ‰€è°“çš„é“¾å¼è°ƒç”¨æ˜¯æŒ‡åœ¨è°ƒç”¨ then æ–¹æ³•ä¹‹åè¿˜å¯ä»¥ç»§ç»­è°ƒç”¨ then æ–¹æ³•ï¼Œå¦‚ä¸‹ let p = new Promise(resolve =&gt; &#123; // fn1 resolve(1);&#125;);p.then(value =&gt; &#123; // fn2 console.log(value); return 2;&#125;).then(value =&gt; &#123; // fn3 console.log(value);&#125;); è¾“å‡ºå¦‚ä¸‹ 12 å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬è¿ç»­è°ƒç”¨äº†ä¸¤æ¬¡ thenï¼Œåœ¨æ‰§è¡Œæ—¶ï¼Œfn3 æ˜¯åœ¨ fn2 ä¹‹åæ‰§è¡Œçš„ï¼Œå¹¶ä¸” fn3 ä¸­çš„å‚æ•° value æ˜¯ fn2 çš„è¿”å›å€¼ã€‚å…¶å® then æ–¹æ³•ä¹Ÿå¯ä»¥ä¸ä¼ é€’ä»»ä½•çš„å‚æ•° let p = new Promise(resolve =&gt; &#123; // fn1 resolve(1);&#125;);p.then(value =&gt; &#123; // fn2 console.log(value); return 2;&#125;) .then() // æ²¡æœ‰ä¼ é€’ä»»ä½•çš„å‚æ•° .then(value =&gt; &#123; // fn3 console.log(value);&#125;); åœ¨ä¸Šé¢æˆ‘ä»¬è°ƒç”¨äº†æ²¡æœ‰ä¼ å…¥å›è°ƒå‡½æ•° then ä¹‹ååˆç»§ç»­è°ƒç”¨äº†ä¸€ä¸ª thenï¼Œæ ¹æ®æˆ‘ä»¬ä¸Šé¢æ‰€è®²çš„ï¼Œfn3 æ¥å—çš„å‚æ•° value æ˜¯ç¬¬äºŒä¸ª then å›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼Œä½†æ˜¯ç”±äºç¬¬äºŒä¸ª then æ²¡æœ‰å›è°ƒå‡½æ•°ï¼Œæ„å‘³ç€æ ¹æœ¬æ²¡æœ‰è¿”å›å€¼ï¼Œè¿™ä¸ªæ—¶å€™ä¼šæŠŠä¸Šä¸€å±‚çš„è¿”å›å€¼å³ fn2 è¿”å›å€¼ä¼ åˆ° fn3 æ‰€ä»¥ä¸Šé¢çš„è¾“å‡ºæ˜¯ 12 then ä¸­çš„å›è°ƒå‡½æ•°é™¤äº†å¯ä»¥è¿”å›æ™®é€šçš„å€¼ä»¥å¤–ï¼Œè¿˜å¯ä»¥è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå½“è¿”å› Promise å¯¹è±¡æ—¶ï¼Œä¸‹é¢å¦‚æœç»§ç»­è°ƒç”¨ thenï¼Œé‚£ä¹ˆ then ä¸­çš„å›è°ƒå‡½æ•°è¦ç­‰åˆ°è¿™ä¸ª Promise å¯¹è±¡ä¸­çš„ resolve æ–¹æ³•æ‰§è¡Œåæ‰ä¼šè¢«æ‰§è¡Œï¼Œå³è¿›å…¥äº† fulfilled çŠ¶æ€ ï¼Œå¹¶ä¸”è¿™ä¸ª then ä¸­å›è°ƒå‡½æ•°æ‰€éœ€çš„å‚æ•°æ˜¯è¿”å›çš„ Promise å¯¹è±¡ resolve ä¼ å…¥çš„å€¼ï¼Œå¦‚ä¸‹ let p = new Promise(resolve =&gt; &#123; resolve(1);&#125;);p.then(value =&gt; &#123; // fn1 console.log(value); return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"then è¿”å›çš„Promise\"); resolve(2); &#125;, 1000); &#125;)&#125;) .then(value =&gt; &#123; // fn2 console.log(value);&#125;); fn2 åœ¨ fn1 è¿”å›çš„ Promise è¿›å…¥äº† fulfilled çŠ¶æ€ä¹‹åæ‰ä¼šè¢«æ‰§è¡Œ ä¸Šé¢çš„æ‰§è¡Œç»“æœä¸º åŸå‹æ–¹æ³•ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº† resolve å’Œ then æ–¹æ³•ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ resolve æ–¹æ³•ä¹‹åï¼Œthen æ¥æ”¶çš„å›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œã€‚å…¶å®ä¼ å…¥ Promise çš„å›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ resolveï¼Œå¦ä¸€ä¸ªæ˜¯ rejectï¼Œå½“å‡½æ•°äº§ç”Ÿé”™è¯¯æ—¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šè°ƒç”¨ reject æ–¹æ³•ï¼Œè¿™æ—¶æˆ‘ä»¬è¯´ Promise å¯¹è±¡è¿›å…¥äº† rejetced çŠ¶æ€ï¼Œè¿™æ—¶åé¢çš„ then æ–¹æ³•ä¸ä¼šæ‰§è¡Œï¼Œä¸ then æ–¹æ³•ç›¸å¯¹çš„æ˜¯ä¸€ä¸ª catch æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ—¶ç”¨æ¥å¤„ç†é”™è¯¯çš„ï¼Œå½“è¯¥ Promise å¯¹è±¡è¿›å…¥äº† rejected çŠ¶æ€ï¼Œcatch ä¸­çš„å›è°ƒå‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œï¼Œä¸ then ç›¸ä¼¼ï¼Œcatch ä¸­å›è°ƒå‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯ reject è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œå¦‚ä¸‹ let p = new Promise((resolve, reject) =&gt; &#123; reject(\"error\");&#125;).then(() =&gt; &#123; console.log(\"thenæ–¹æ³•æ‰§è¡Œäº†\");&#125;).catch(error =&gt; &#123; console.log(\"catchæ–¹æ³•æ‰§è¡Œ\"); console.log(\"message: \" + error);&#125;); ç»“æœä¸º catchæ–¹æ³•æ‰§è¡Œmessage: error ä¸Šé¢æˆ‘ä»¬è°ƒç”¨äº† rejectï¼Œè¿™æ—¶åé¢çš„ then ä¸­çš„å›è°ƒå‡½æ•°æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œè€Œæ˜¯ä¼šæ‰§è¡Œ catch ä¸­çš„å›è°ƒå‡½æ•°ã€‚ å…¶å® then æ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°ç”¨æ¥å¤„ç† resolve ä¹‹åçš„ç»“æœï¼Œè€Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°åˆ™æ˜¯ç”¨æ¥å¤„ç† reject ä¹‹åçš„ç»“æœï¼Œæ¯”å¦‚ä¸Šé¢çš„ç¨‹åºå¯ä»¥å†™ä¸º let p = new Promise((resolve, reject) =&gt; &#123; reject(\"error\");&#125;).then(() =&gt; &#123; console.log(\"thenæ–¹æ³•æ‰§è¡Œäº†\");&#125;, error =&gt; &#123; console.log(\"catchæ–¹æ³•æ‰§è¡Œ\"); console.log(\"message:\" + error);&#125;) æ‰§è¡Œçš„ç»“æœä¸ä¸Šé¢çš„ç›¸åŒï¼Œ**å…¶å® catch(onError) å‡½æ•°æœ¬è´¨ä¸Šå°±æ˜¯ then(null, onError)**ã€‚ æœ‰çš„æ—¶å€™æ— è®ºæ˜¯æˆåŠŸä»¥å¦ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨ä¸€èˆ¬æ˜¯ç”¨æ¥èµ„æºçš„å›æ”¶ï¼Œç”¨æ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½çš„æ˜¯ finally å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿæ˜¯æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ— è®ºæ˜¯åœ¨ fulfilled çŠ¶æ€è¿˜æ˜¯ rejected çŠ¶æ€éƒ½æ˜¯ä¼šè¢«æ‰§è¡Œçš„ let p = new Promise((resolve, reject) =&gt; &#123; // rejectedçŠ¶æ€ reject();&#125;).then(() =&gt; &#123; console.log(\"thenæ–¹æ³•æ‰§è¡Œäº†\");&#125;, () =&gt; &#123; console.log(\"catchæ–¹æ³•æ‰§è¡Œ\");&#125;).finally(() =&gt; &#123; console.log(\"finallyæ‰§è¡Œäº†\")&#125;); æœ€åçš„æ‰§è¡Œç»“æœä¸º catchæ–¹æ³•æ‰§è¡Œfinallyæ‰§è¡Œäº† ç°åœ¨æˆ‘ä»¬å°† reject() æ”¹ä¸º resolve() let p = new Promise((resolve, reject) =&gt; &#123; // fulfilled çŠ¶æ€ resolve();&#125;).then(() =&gt; &#123; console.log(\"thenæ–¹æ³•æ‰§è¡Œäº†\");&#125;, () =&gt; &#123; console.log(\"catchæ–¹æ³•æ‰§è¡Œ\");&#125;).finally(() =&gt; &#123; console.log(\"finallyæ‰§è¡Œäº†\")&#125;); è¿™æ—¶æ‰§è¡Œçš„ç»“æœä¸º thenæ–¹æ³•æ‰§è¡Œäº†finallyæ‰§è¡Œäº† æ‰€ä»¥ä¸è®ºå‡ºäºå“ªä¸ªçŠ¶æ€ï¼Œfinally ä¸­çš„å›è°ƒå‡½æ•°éƒ½ä¼šè¢«æ‰§è¡Œã€‚ é™æ€æ–¹æ³•é™æ€æ–¹æ³•æŒ‡çš„å°±æ˜¯é€šè¿‡ Promise ç›´æ¥è°ƒç”¨çš„æ–¹æ³•ã€‚ resolveæˆ‘ä»¬é¦–å…ˆæ¥ä»‹ç» resolve æ–¹æ³•ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæ ¹æ®å‚æ•°çš„ä¸åŒæƒ…å†µï¼Œè¿”å›å€¼ä¹Ÿä¸ç›¸åŒ å‚æ•°æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œç›´æ¥è¿”å› let p1 =new Promise((resolve, reject) =&gt; &#123; resolve(123);&#125;);let p2 = Promise.resolve(p1);console.log(p1 === p2); // true å‚æ•°æ˜¯ä¸€ä¸ªå«æœ‰ then æ–¹æ³•çš„å¯¹è±¡(æˆ‘ä»¬ä¹Ÿç§°ä¹‹ä¸º thenable å¯¹è±¡)ï¼Œé‚£ä¹ˆä¼šç«‹å³æ‰§è¡Œè¯¥ then æ–¹æ³•ï¼Œè¯¥ then æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¸ºè¿”å›çš„ Promise çš„ resolve, reject æ–¹æ³• let p = Promise.resolve(&#123; then(resolve, reject) &#123; resolve(123); &#125;&#125;);p.then(value =&gt; &#123; console.log(value); // 123&#125;); å‚æ•°ä¸æ˜¯ä¸Šé¢ä¸¤ç§æƒ…å†µï¼Œé‚£ä¹ˆä¼šè¿”å›çš„ä¸€ä¸ª fulfilled çŠ¶æ€çš„ Promiseï¼Œè¯¥ Promise ä¼šå°†å‚æ•°ä¼ ç»™åé¢çš„ then let p = Promise.resolve(\"123\");p.then(value =&gt; &#123; console.log(value); // 123&#125;); allè¯¥æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå®ƒæ¥å—ä¸€ä¸ªç”± Promise å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œåªæœ‰å½“è¯¥æ•°ç»„ä¸­çš„æ‰€æœ‰ Promise å¯¹è±¡éƒ½å˜ä¸º fulfilled çŠ¶æ€ä¹‹åï¼Œè¿”å›çš„ Promise å¯¹è±¡æ‰ä¼šå˜ä¸º fulfilled çŠ¶æ€ let p1 = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"p1\"); resolve(1); &#125;, 1000);&#125;);let p2 = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"p2\"); resolve(2); &#125;, 2000);&#125;);let p3 = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"p3\"); resolve(3); &#125;, 3000);&#125;);Promise.all([p1, p2, p3]).then(results =&gt; &#123; console.log(results); // [ 1, 2, 3 ]&#125;); åœ¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰ä¸‰ä¸ª Promise å¯¹è±¡ï¼Œè¿™ä¸ªä¸‰ä¸ªå¯¹è±¡åˆ†åˆ«åœ¨ 1s, 2s, 3s åå˜ä¸º fulfilledï¼Œæ‰€ä»¥è¿”å›çš„ Promise å¯¹è±¡åœ¨ 3s åå˜ä¸º fulfilled çŠ¶æ€ï¼Œå¹¶ä¸”ä¼šå°†è¿™ä¸‰ä¸ª Promise å¯¹è±¡å‘ resolve ä¼ å…¥çš„å€¼å½¢æˆæ•°ç»„ä¼ å…¥åˆ°è¿”å›çš„ Promise çš„ resolve ä¸­ ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœä¸º racerace æ–¹æ³•å®ƒä¹Ÿä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼ŒåŒ all æ–¹æ³•ä¸€æ ·ï¼Œå®ƒä¹Ÿæ¥å—ä¸€ä¸ªç”± Promise å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œä½†æ˜¯ä¸æ˜¯å½“æ‰€æœ‰çš„ Promise å¯¹è±¡å˜ä¸º fulfilled åï¼Œè¿”å›çš„ Promise å¯¹è±¡æ‰ä¼šå˜ä¸º fulfilledï¼Œè€Œæ˜¯è¿™äº› Promise å¯¹è±¡è¿›è¡Œç«èµ›ï¼Œå½“æœ€å¿«çš„ä¸€ä¸ª Promise å¯¹è±¡å˜ä¸º fulfilled çŠ¶æ€æ—¶ï¼Œè¿”å›çš„ Promise å¯¹è±¡å°±ä¼šå˜ä¸º fulfilled let p1 = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"p1\"); resolve(1); &#125;, 1000);&#125;);let p2 = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"p2\"); resolve(2); &#125;, 2000);&#125;);let p3 = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"p3\"); resolve(3); &#125;, 3000);&#125;);Promise.race([p1, p2, p3]).then(result =&gt; &#123; console.log(result);&#125;); å¹¶ä¸”ä¼šå°†å‘æœ€å¿«å˜ä¸º fulfilled çŠ¶æ€çš„ Promise å¯¹è±¡çš„ resolve ä¼ å…¥çš„å€¼ä¼ å…¥åˆ°è¿”å›çš„ Promise å¯¹è±¡çš„ resolve æ–¹æ³•ä¸­ æ‰€ä»¥ä¸Šé¢ç¨‹åºçš„æ‰§è¡Œç»“æœä¸º å¯è§å½“ p1 å˜ä¸º fulfilled ä¹‹åï¼Œè¿”å›çš„ Promise ä¹Ÿå˜ä¸ºäº† fulfilled çŠ¶æ€ï¼Œå¹¶ä¸”æ‹¿åˆ°äº†å‘ p1 çš„ resolve ä¸­ä¼ å…¥çš„å€¼ã€‚ å®ç°Promiseç®€å•å®ç°ä¸‹é¢å°±å°†ç®€å•å®ç°ä¸€ä¸ª Promiseã€‚é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ï¼ŒPromise æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«ä¸º pending, fulfilled, rejected ä¸‰ä¸ªçŠ¶æ€ï¼Œåˆå§‹æ—¶çš„ Promise æ˜¯ pending çŠ¶æ€ï¼Œå½“è°ƒç”¨ resolve æ–¹æ³•åå°±ä¼šå˜ä¸º fulfilled çŠ¶æ€ï¼Œå½“å¤„äº fulfilled çŠ¶æ€æ—¶ï¼Œthen ä¸­çš„ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œï¼›è°ƒç”¨ reject æ–¹æ³•å°±ä¼šå˜ä¸º rejected çŠ¶æ€ï¼Œå½“å¤„äº rejected çŠ¶æ€æ—¶ï¼Œthen ä¸­çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œæˆ–è€… catch ä¸­çš„å›è°ƒå‡½æ•°æ‰ä¼šè¢«æ‰§è¡Œã€‚å¹¶ä¸” fulfilled å’Œ rejected çŠ¶æ€åªèƒ½ç”± pending çŠ¶æ€è½¬å˜è€Œæ¥ï¼Œå¹¶ä¸”ä¸€èˆ¬è½¬å˜ä¸º fulfilled çŠ¶æ€æˆ–è€… rejected çŠ¶æ€ï¼Œé‚£ä¹ˆçŠ¶æ€å°±ä¸èƒ½å†æ¬¡è¿›è¡Œè½¬å˜ class Promise &#123; // Promiseçš„ä¸‰ä¸ªçŠ¶æ€ PENDING = 'pending'; FULFILLED = 'fulfilled'; REJECTED = 'rejected'; // å½“å‰çŠ¶æ€ state = this.PENDING; // ä¼ ç»™ then ä¸­å›è°ƒå‡½æ•°çš„å€¼ value = null; // æ„é€ å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç«‹å³æ‰§è¡Œè¯¥å‡½æ•°å¹¶å°† _resolve å’Œ _reject ä¼ å…¥ constructor(fn) &#123; fn(this._resolve.bind(this), this._reject.bind(this)); &#125; // å½“æ‰§è¡Œåˆ° then æ–¹æ³•ä½†è¿˜æœªå˜ä¸º fulfilled çŠ¶æ€æ—¶ï¼Œé‚£ä¹ˆå°†å‘ then ä¸­ä¼ å…¥çš„å›è°ƒå‡½æ•°å…ˆä¿å­˜èµ·æ¥ callbacks = []; _resolve(value) &#123; // å¦‚æœçŠ¶æ€ä¸ä¸º pendingï¼Œè¯´æ˜çŠ¶æ€å·²å‘ç”Ÿæ”¹å˜ï¼Œä¸å†æ‰§è¡Œ if (this.state !== this.PENDING) &#123; return; &#125; // å°†è¦ä¼ ç»™ then ä¸­å›è°ƒå‡½æ•°çš„å€¼ä¿å­˜èµ·æ¥ this.value = value; // æ”¹å˜çŠ¶æ€ this.state = this.FULFILLED; // æ‰§è¡Œå‘ then ä¸­ä¼ å…¥çš„ onFulfilled å‡½æ•° this.callbacks.forEach(callback =&gt; callback.onFulfilled(this.value)); &#125; _reject(error) &#123; // è¿‡ç¨‹åŒ reject if (!this.PENDING) &#123; return; &#125; this.value = error; this.state = this.REJECTED; this.callbacks.forEach(callback =&gt; callback.onRejected(this.value)); &#125; then(onFulfilled, onRejected) &#123; // å¦‚æœå½“å‰çš„çŠ¶æ€ä¸º pendingï¼Œé‚£ä¹ˆå°†å›è°ƒå‡½æ•°ä¿å­˜åˆ° callbacks å‡½æ•°ä¸­ï¼Œç­‰åˆ°çŠ¶æ€æ”¹å˜æ—¶æ‰§è¡Œ if (this.state === this.PENDING) &#123; this.callbacks.push(&#123; onFulfilled, onRejected &#125;); return; &#125; // å¦‚æœçŠ¶æ€ä¸º fulfilled çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œ onFulfilled æ–¹æ³• if (this.state === this.FULFILLED) &#123; onFulfilled(this.value); return; &#125; // åŒä¸Š if (this.state === this.REJECTED) &#123; onRejected(this.value); return; &#125; &#125;&#125; ä¸Šé¢çš„ç¨‹åºçš„æ³¨é‡Šæè¿°äº†ç¨‹åºçš„åŠŸèƒ½ï¼Œç›¸æ¯”è¿˜æ˜¯ä¸éš¾ç†è§£çš„ï¼Œç°åœ¨æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦æœ‰æ•ˆ let p = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"1så\"); resolve(1); &#125;, 1000);&#125;);p.then(value =&gt; &#123; console.log(value);&#125;); ç»“æœå¦‚ä¸‹ é“¾å¼è°ƒç”¨ç°åœ¨æˆ‘ä»¬æ¥å®ç°é“¾å¼è°ƒç”¨ï¼Œè¦å®ç°é“¾å¼è°ƒç”¨å°±éœ€è¦è¿”å›ä¸€ä¸ª Promiseï¼Œæ¯æ¬¡è°ƒç”¨ then æ–¹æ³•æˆ‘ä»¬éƒ½è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œä¿®æ”¹å¦‚ä¸‹ _resolve(value) &#123; if (this.state !== this.PENDING) &#123; return; &#125; this.value = value; this.state = this.FULFILLED; // ä¿®æ”¹äº†è¿™é‡Œï¼Œç”±äºéœ€è¦å°† then ä¸­çš„å›è°ƒå‡½æ•°çš„è¿”å›å€¼è¿”å›ï¼Œæ‰€ä»¥ä¸èƒ½ç®€å•çš„è°ƒç”¨ this.callbacks.forEach(callback =&gt; this._handle(callback));&#125;_reject(error) &#123; if (!this.PENDING) &#123; return; &#125; this.value = error; this.state = this.REJECTED; // åŒ resolve this.callbacks.forEach(callback =&gt; this._handle(callback));&#125;then(onFulfilled, onRejected) &#123; // è¿”å›æ–°çš„ Promise return new Promise((resolve, reject) =&gt; &#123; this._handle(&#123; onFulfilled, onRejected, resolve, reject &#125;) &#125;)&#125;_handle(callback) &#123; // å¦‚æœæ˜¯ pending çŠ¶æ€ï¼Œå°† callback å»¶è¿Ÿæ‰§è¡Œ if (this.state === this.PENDING) &#123; this.callbacks.push(callback); &#125; if (this.state === this.FULFILLED) &#123; // å¦‚æœ then æ–¹æ³•æ²¡æœ‰ä¼ å…¥ onFulFilled å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆå°†ä¸Šä¸€å±‚è¿”å›çš„å€¼ä¼ å…¥ if (!callback.onFulfilled) &#123; callback.resolve(this.value); return; &#125; // å¦‚æœæœ‰ onFulFilled å‡½æ•°ï¼Œé‚£ä¹ˆå°† onFulFilled å‡½æ•°çš„è¿”å›å€¼ä¼ å…¥åˆ°è¿”å›çš„ Promise å¯¹è±¡çš„ resolve ä¸­ try &#123; // ç”¨æˆ·ä¼ å…¥çš„å›è°ƒå‡½æ•°å¯èƒ½ä¼šå‡ºé”™ï¼Œæ‰€ä»¥ä½¿ç”¨ try...catch åŒ…è£¹èµ·æ¥ let ret = callback.onFulfilled(this.value); callback.resolve(ret); &#125; catch (e) &#123; // å½“ä¼ å…¥çš„å›è°ƒå‡½æ•°å‡ºé”™æ—¶ï¼ŒPromise å˜ä¸º rejectedçŠ¶æ€ callback.reject(e); &#125; &#125; if (this.state === this.REJECTED) &#123; if (!callback.onRejected) &#123; callback.reject(this.value); return; &#125; let ret = callback.onRejected(this.value); callback.reject(ret); &#125;&#125; ç°åœ¨æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½å¤Ÿè¿›è¡Œé“¾å¼è°ƒç”¨ let p = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"1så\"); resolve(1); &#125;, 1000);&#125;);p.then(value =&gt; &#123; console.log(value); return 2;&#125;).then() // ä»€ä¹ˆå›è°ƒå‡½æ•°éƒ½æ²¡æœ‰ä¼ å…¥ï¼Œä¼šå°†ä¸Šä¸€ä¸ª then è¿”å›çš„å€¼ä¼ å…¥ .then(value =&gt; &#123; console.log(value);&#125;); ä¸Šé¢çš„æ‰§è¡Œç»“æœä¸º ä¸Šé¢æˆ‘ä»¬è¿˜è¦æœ€åä¸€ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼Œå°±æ˜¯å¦‚æœ then ä¸­çš„å›è°ƒå‡½æ•°è¿”å›çš„æ˜¯ Promise å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦åœ¨ _resolve å¯¹å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå€¼æ˜¯ Promise å¯¹è±¡ï¼Œè®°ä½œ p1ï¼Œé‚£ä¹ˆ then è¿”å›çš„ Promise å¯¹è±¡ p2 çš„ resolve æ–¹æ³•åº”å½“åœ¨ p1 å¯¹è±¡çš„ resolve æ‰§è¡Œä¹‹åæ‰§è¡Œã€‚ä¿®æ”¹ _resolve å¦‚ä¸‹ _resolve(value) &#123; if (this.state !== this.PENDING) &#123; return; &#125; // åªå¢åŠ äº†ä¸‹é¢çš„ä»£ç  if (value instanceof Promise) &#123; // å½“å‰ resolve çš„æ‰§è¡Œåº”å½“åœ¨ value çš„ resolve æ‰§è¡Œä¹‹å value.then(this._resolve.bind(this), this._reject.bind(this)); return; &#125; this.value = value; this.state = this.FULFILLED; this.callbacks.forEach(callback =&gt; this._handle(callback));&#125; ç°åœ¨æˆ‘ä»¬æ¥éªŒè¯ä¸€ç•ª let p = new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"1så\"); resolve(1); &#125;, 1000);&#125;);p.then(value =&gt; &#123; console.log(value); return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; console.log(\"åˆ1så\"); resolve(2); &#125;, 1000) &#125;);&#125;).then(value =&gt; &#123; console.log(value);&#125;); æ‰§è¡Œç»“æœä¸º åŸå‹æ–¹æ³•æ¥ä¸‹æ¥ç»§ç»­å®ç° Promise å¯¹è±¡çš„å‡ ä¸ªåŸå‹æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ catch å’Œ finallyã€‚catch çš„å®ç°å¾ˆç®€å• catch(onRejected) &#123; return this.then(null, onRejected);&#125; æ¥ä¸‹æ¥æ˜¯å®ç° finally æ–¹æ³•ï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„ç‰ˆæœ¬æ˜¯ finally(onDone) &#123; return this.then(onDone, onDone);&#125; ä¸ç®¡æ˜¯å¤„äº fulfilled çš„çŠ¶æ€è¿˜æ˜¯ rejected çš„çŠ¶æ€ï¼ŒonDone æ–¹æ³•éƒ½ä¼šå¾—åˆ°æ‰§è¡Œï¼Œä½†æ˜¯ä½¿ç”¨è¿™æ ·çš„æ–¹å¼æœ‰ç¼ºç‚¹ onDone æ–¹æ³•æ˜¯æ— è®ºå¤±è´¥è¿˜æ˜¯æˆåŠŸæ—¶éƒ½ä¼šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥å®ƒåº”è¯¥æ²¡æœ‰å‚æ•°ï¼Œä½†æ˜¯ä½¿ç”¨ then(onDone, onDone) çš„æ–¹å¼å°±ä¼šä¼ å…¥å‚æ•° å¦‚æœ onDone è¿”å›ä¸€ä¸ª Promise å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆä¼šæ”¹å˜ finally è¿”å›çš„ Promise çš„çŠ¶æ€ å¤„äºä¸Šè¿°è€ƒè™‘ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å®ç°æ–¹å¼ finally(onDone) &#123; if (typeof onDone !== 'function') &#123; return this.then(); &#125; // æ— è®ºæˆåŠŸä¸å¦ï¼ŒonDone() éƒ½ä¼šæ‰§è¡Œï¼Œä¸”ä¸éœ€è¦å‚æ•° // å¦å¤–æ‰§è¡Œ finally ä¸ä¼šå½±å“ä¹‹å‰çš„ Promise çŠ¶æ€ return this.then( value =&gt; Promise.resolve(onDone()).then(() =&gt; value), error =&gt; Promise.resolve(onDone()).then(() =&gt; &#123;throw error&#125;) );&#125; é™æ€æ–¹æ³•æœ€åæ¥å®ç° Promise çš„é™æ€æ–¹æ³•ï¼Œé¦–å…ˆå®ç° resolve æ–¹æ³•ï¼Œå¯¹äºè¯¥æ–¹æ³•çš„ä½¿ç”¨æˆ‘ä»¬åœ¨ç”¨æ³•é‚£é‡Œå·²ç»ä»‹ç»è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥è´´å‡ºå®ç°çš„ä»£ç  static resolve(value) &#123; // å¦‚æœä¼ å…¥çš„æ˜¯ Promise å¯¹è±¡ï¼Œç›´æ¥è¿”å› if (value instanceof Promise) &#123; return value; &#125; // å¦‚æœä¼ å…¥çš„æ˜¯ thenable å¯¹è±¡ï¼Œåˆ™ç«‹å³æ‰§è¡Œå¯¹è±¡çš„ thenï¼Œå¹¶å°† resolve å’Œ reject ä¼ å…¥ if (value &amp;&amp; typeof value === 'object' &amp;&amp; typeof value.then === 'function') &#123; return new Promise((resolve, reject) =&gt; value.then(resolve, reject)); &#125; if (value) &#123; // å¦‚æœä¸æ˜¯ä¸Šé¢ä¸¤ç§æƒ…å†µï¼Œå¹¶ä¸” value å­˜åœ¨ï¼Œé‚£ä¹ˆç›´æ¥å°† value ä¼ å…¥ resolve return new Promise(resolve =&gt; resolve(value)); &#125; else &#123; return new Promise(resolve =&gt; resolve()); &#125;&#125; all æ–¹æ³•åœ¨ä¸Šé¢ä¹Ÿä»‹ç»è¿‡äº†ï¼Œåªæœ‰å½“æ‰€æœ‰ä¼ å…¥çš„ Promise å¯¹è±¡éƒ½å˜ä¸º fulfilled çŠ¶æ€ï¼Œè¿”å›çš„ Promise å¯¹è±¡æ‰ä¼šå˜ä¸º fulfilled çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå˜é‡æ¥ç»Ÿè®¡å·²ç»å˜ä¸º fulfilled çŠ¶æ€çš„ Promise å¯¹è±¡çš„ä¸ªæ•°ï¼Œå½“æ‰€æœ‰ Promise å¯¹è±¡éƒ½å˜ä¸º fulfilled çŠ¶æ€æ—¶ï¼Œæ‰§è¡Œ resolve æ–¹æ³•ï¼Œå°†è¿”å›çš„ Promise å¯¹è±¡å˜ä¸º fulfilled çŠ¶æ€ï¼Œå¦‚ä¸‹ static all(promises) &#123; return new Promise((resolve, reject) =&gt; &#123; // Promise å¯¹è±¡çš„ä¸ªæ•° let itemLength = promises.length; // ç»Ÿè®¡å·²å˜ä¸º fulfilled çŠ¶æ€çš„ Promise å¯¹è±¡ä¸ªæ•° let finishedPromise = 0; // è¿”å›çš„æ•°ç»„ let results = Array.from(&#123;length: itemLength&#125;); promises.forEach(promise =&gt; &#123; promise.then(result =&gt; &#123; results[finishedPromise] = result; finishedPromise++; // å½“æ‰€æœ‰çš„ Promise å¯¹è±¡å˜ä¸º fulfilled æ—¶ï¼Œè¿”å›çš„ Promise å¯¹è±¡çŠ¶æ€å˜ä¸º fulfilled if (finishedPromise == itemLength) resolve(results); &#125; &#125;, error =&gt; &#123; // åªè¦æœ‰ä¸€ä¸ªå˜ä¸º rejectedï¼Œé‚£ä¹ˆç›´æ¥å˜ä¸º rejected çŠ¶æ€ reject(error); &#125;) &#125;) &#125;)&#125; race æ–¹æ³•çš„ç”¨æ³•ä¹Ÿä»‹ç»è¿‡ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨ resolve æ–¹æ³•åªä¼šæ‰§è¡Œä¸€æ¬¡çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¾ˆå¿«å¯ä»¥å†™å‡ºè¿™æ ·çš„ä»£ç  static race(promises) &#123; return new Promise((resolve, reject) =&gt; &#123; promises.forEach(promise =&gt; &#123; promise.then(result =&gt; &#123; resolve(result); &#125;, error =&gt; &#123; reject(error); &#125;) &#125;) &#125;)&#125; ç”±äº resolve åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåªæœ‰æœ€å…ˆå˜ä¸º fulfilled çŠ¶æ€çš„ Promise å¯¹è±¡èƒ½å°†å®ƒ resolve çš„å€¼ä¼ å…¥ã€‚ å®Œæ•´ä»£ç class Promise &#123; PENDING = 'pending'; FULFILLED = 'fulfilled'; REJECTED = 'rejected'; state = this.PENDING; value = null; constructor(fn) &#123; fn(this._resolve.bind(this), this._reject.bind(this)); &#125; callbacks = []; _resolve(value) &#123; if (this.state !== this.PENDING) &#123; return; &#125; if (value instanceof Promise) &#123; value.then(this._resolve.bind(this), this._reject.bind(this)); return; &#125; this.value = value; this.state = this.FULFILLED; this.callbacks.forEach(callback =&gt; this._handle(callback)); &#125; _reject(error) &#123; if (!this.PENDING) &#123; return; &#125; this.value = error; this.state = this.REJECTED; this.callbacks.forEach(callback =&gt; this._handle(callback)); &#125; then(onFulfilled, onRejected) &#123; return new Promise((resolve, reject) =&gt; &#123; this._handle(&#123; onFulfilled, onRejected, resolve, reject &#125;) &#125;) &#125; catch(onRejected) &#123; return this.then(null, onRejected); &#125; finally(onDone) &#123; if (typeof onDone !== 'function') &#123; return this.then(); &#125; return this.then( value =&gt; Promise.resolve(onDone()).then(() =&gt; value), error =&gt; Promise.resolve(onDone()).then(() =&gt; &#123;throw error&#125;) ); &#125; _handle(callback) &#123; if (this.state === this.PENDING) &#123; this.callbacks.push(callback); &#125; if (this.state === this.FULFILLED) &#123; if (!callback.onFulfilled) &#123; callback.resolve(this.value); return; &#125; try &#123; let ret = callback.onFulfilled(this.value); callback.resolve(ret); &#125; catch (e) &#123; callback.reject(e); &#125; &#125; if (this.state === this.REJECTED) &#123; if (!callback.onRejected) &#123; callback.reject(this.value); return; &#125; let ret = callback.onRejected(this.value); callback.reject(ret); &#125; &#125; static resolve(value) &#123; if (value instanceof Promise) &#123; return value; &#125; if (value &amp;&amp; typeof value === 'object' &amp;&amp; typeof value.then === 'function') &#123; return new Promise((resolve, reject) =&gt; value.then(resolve, reject)); &#125; if (value) &#123; return new Promise(resolve =&gt; resolve(value)); &#125; else &#123; return new Promise(resolve =&gt; resolve()); &#125; &#125; static all(promises) &#123; return new Promise((resolve, reject) =&gt; &#123; let itemLength = promises.length; let finishedPromise = 0; let results = Array.from(&#123;length: itemLength&#125;); promises.forEach(promise =&gt; &#123; promise.then(result =&gt; &#123; results[finishedPromise] = result; finishedPromise++; if (finishedPromise == itemLength) &#123; resolve(results); &#125; &#125;, error =&gt; &#123; reject(error); &#125;) &#125;) &#125;) &#125; static race(promises) &#123; return new Promise((resolve, reject) =&gt; &#123; promises.forEach(promise =&gt; &#123; promise.then(result =&gt; &#123; resolve(result); &#125;, error =&gt; &#123; reject(error); &#125;) &#125;) &#125;) &#125;&#125; å‚è€ƒæ–‡ç«  å›¾è§£ Promise å®ç°åŸç†ï¼ˆä¸€ï¼‰ï¼šå…ˆå†™ä¸€ä¸ªåŸºç¡€çš„ Promise å›¾è§£ Promise å®ç°åŸç†ï¼ˆäºŒï¼‰ï¼š Promise é“¾å¼è°ƒç”¨ å›¾è§£ Promise å®ç°åŸç†ï¼ˆä¸‰ï¼‰ï¼šPromise åŸå‹æ–¹æ³•å®ç° å›¾è§£ Promise å®ç°åŸç†ï¼ˆå››ï¼‰ï¼šPromise é™æ€æ–¹æ³•å®ç° Promise.allå’ŒPromise.raceæºç å®ç°","tags":[{"name":"Promise","slug":"Promise","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Promise/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"}]},{"title":"ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘","date":"2020-06-25T16:00:00.000Z","path":"/ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘/","text":"é¢˜ç›®ï¼šä»ä¸Šåˆ°ä¸‹æ‰“å°å‡ºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ŒåŒä¸€å±‚çš„èŠ‚ç‚¹æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ã€‚ä¾‹å¦‚ä¸‹é¢çš„äºŒå‰æ ‘ ä¾æ¬¡æ‰“å°å‡º 8, 6, 10, 5, 7, 9, 11ã€‚äºŒå‰æ ‘èŠ‚ç‚¹çš„å®šä¹‰å¦‚ä¸‹ï¼š private static class BinaryTreeNode &#123; private BinaryTreeNode left; private BinaryTreeNode right; int value; public BinaryTreeNode(int value) &#123; this.left = null; this.right = null; this.value = value; &#125;&#125; è¿™é“é¢˜è€ƒå¯Ÿçš„æ˜¯æ ‘çš„å±‚åºéå†ï¼Œå¯¹äºæŒ‰å±‚éå†çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨é˜Ÿåˆ—æ¥è¾…åŠ©éå†ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼Œå¯¹äºæ ¹èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†å®ƒæ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶åä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ è¿›è¡Œæ‰“å°ï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¥ç€ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œæ‰“å°è¯¥å…ƒç´ ï¼Œç„¶åå°†è¯¥å…ƒç´ çš„å·¦å³å­èŠ‚ç‚¹æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œé‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºï¼Œæˆ‘ä»¬ä»ä¸‹å›¾æ¥çœ‹ä¸Šé¢çš„è¿‡ç¨‹ ä»£ç å¦‚ä¸‹ public static void printFromTopToBottom(BinaryTreeNode root) &#123; if (root == null) &#123; return; &#125; Queue&lt;BinaryTreeNode&gt; queue = new LinkedList&lt;&gt;(); // å…ˆå°†æ ¹èŠ‚ç‚¹æ·»åŠ è¿›é˜Ÿåˆ— queue.offer(root); // é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ while (!queue.isEmpty()) &#123; // æ¯æ¬¡å°†é˜Ÿé¦–å…ƒç´ å¼¹å‡ºå¹¶æ‰“å° BinaryTreeNode node = queue.poll(); System.out.println(node.value); // ç„¶åå°†è¯¥å…ƒç´ çš„å·¦å³å­èŠ‚ç‚¹æ·»åŠ è¿›é˜Ÿåˆ— if (node.left != null) &#123; queue.offer(node.left); &#125; if (node.right != null) &#123; queue.offer(node.right); &#125; &#125;&#125; é¢˜ç›®ï¼šä»ä¸Šåˆ°ä¸‹æŒ‰å±‚æ‰“å°äºŒå‰æ ‘ï¼ŒåŒä¸€å±‚çš„èŠ‚ç‚¹æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œæ¯ä¸€å±‚æ‰“å°åˆ°ä¸€è¡Œã€‚å¦‚æ‰“å°ä¸‹é¢äºŒå‰æ ‘çš„ç»“æœä¸ºï¼š 8 6 10 5 7 9 11 è¿™é“é¢˜ç›®å’Œä¸Šé¢çš„é¢˜ç›®ç±»ä¼¼ï¼Œä¸è¿‡æˆ‘ä»¬è¦ç”¨ä¸¤ä¸ªå˜é‡ä¸¤ä¿å­˜å½“å‰å±‚è¿˜è¦æ‰“å°çš„èŠ‚ç‚¹æ•°ç›®å’Œä¸‹ä¸€å±‚è¦æ‰“å°çš„èŠ‚ç‚¹æ•°ç›®ã€‚æˆ‘ä»¬ä½¿ç”¨ toBePrinted æ¥ä¿å­˜å½“å‰å±‚è¿˜éœ€è¦æ‰“å°çš„èŠ‚ç‚¹çš„æ•°ç›®ï¼ŒnextLevel æ¥ä¿å­˜ä¸‹ä¸€å±‚è¦æ‰“å°çš„èŠ‚ç‚¹æ•°ç›®ã€‚å½“ toBePrinted ä¸ä¸º 0ï¼Œæ¯æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ nextLevel++ï¼Œæ¯å¼¹å‡ºä¸€ä¸ªå…ƒç´  toBePrinted--ï¼Œå½“ toBePrinted ä¸º 0 æ—¶ï¼Œæˆ‘ä»¬æ‰“å°æ¢è¡Œï¼Œå¹¶å°† nextLevel èµ‹å€¼ç»™ toBePrintedï¼Œå¹¶ä¸”è®¾ç½® nextLevel ä¸º 0ï¼Œä»£ç å¦‚ä¸‹ public static void printWithLevel(BinaryTreeNode root) if (root == null) &#123; return; &#125; Queue&lt;BinaryTreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.offer(root); int nextLevel = 0; int toBePrinted = 1; while (!queue.isEmpty()) &#123; BinaryTreeNode node = queue.poll(); System.out.print(node.value + \"\\t\"); toBePrinted--; if (node.left != null) &#123; queue.offer(node.left); nextLevel++; &#125; if (node.right != null) &#123; queue.offer(node.right); nextLevel++; &#125; if (toBePrinted == 0) &#123; System.out.println(); toBePrinted = nextLevel; nextLevel = 0; &#125; &#125;&#125; é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°æŒ‰ç…§ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘ï¼Œå³ç¬¬ä¸€è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œç¬¬äºŒå±‚æŒ‰ç…§ä»å³åˆ°å·¦çš„é¡ºåºæ‰“å°ï¼Œç¬¬ä¸‰å±‚å†æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œå…¶ä»–è¡Œä»¥æ­¤ç±»æ¨ã€‚ æŒ‰ä¹‹å­—å½¢æ‰“å°æ ‘çš„è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå¯èƒ½ä¸€æ—¶éš¾ä»¥æƒ³åˆ°è§£å†³æ–¹æ¡ˆï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨å…·ä½“çš„ä¾‹å­ä¸€æ­¥æ­¥åˆ†æçœ‹æ˜¯å¦èƒ½æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚ä»¥ä¸‹é¢çš„æ ‘ä¸ºä¾‹ å¯¹äºå¥‡æ•°å±‚(ä» 1 å¼€å§‹)ï¼Œæˆ‘ä»¬å°†èŠ‚ç‚¹ä¿å­˜åˆ°ä¸€ä¸ªæ ˆä¸­ï¼Œå¦‚ stack1ï¼Œå¯¹äºå¶æ•°å±‚ï¼Œæˆ‘ä»¬å°†èŠ‚ç‚¹ä¿å­˜åˆ°å¦ä¸€ä¸ªæ ˆä¸­ï¼Œå¦‚ stack2ã€‚åœ¨å¥‡æ•°å±‚æ—¶ï¼Œæˆ‘ä»¬æ¯æ¬¡ä»æ ˆ stack1 ä¸­å¼¹å‡ºä¸€ä¸ªå…ƒç´ å¹¶æ‰“å°ï¼Œå¹¶å°†å…ƒç´ çš„å·¦å­©å­(å…ˆ)å’Œå³å­©å­æ·»åŠ åˆ° stack2 ä¸­ï¼Œå½“ stack1 ä¸ºç©ºæ—¶ï¼Œè¯´æ˜è¯¥å±‚çš„å…ƒç´ å·²å…¨éƒ¨æ‰“å°å®Œæ¯•ï¼Œåˆ‡æ¢åˆ° stack2ï¼Œæˆ‘ä»¬æ¯æ¬¡ä» stack2 ä¸­å¼¹å‡ºä¸€ä¸ªå…ƒç´ å¹¶æ‰“å°ï¼Œå¹¶å°†è¯¥å…ƒç´ çš„å³å­©å­(å…ˆ)å’Œå·¦å­©å­(å)æ·»åŠ åˆ° stack1 ä¸­ï¼Œå½“ stack2 ä¸ºç©ºæ—¶ï¼Œåˆ‡æ¢åˆ° stack1ï¼Œç›´åˆ° stack1 å’Œ stack2 åŒæ—¶ä¸ºç©ºæ—¶ï¼Œæ‰“å°è¿‡ç¨‹ç»“æŸ public static void printZhi(BinaryTreeNode root) &#123; if (root == null) &#123; return; &#125; Stack&lt;BinaryTreeNode&gt; stack1 = new Stack&lt;&gt;(); Stack&lt;BinaryTreeNode&gt; stack2 = new Stack&lt;&gt;(); stack1.push(root); // è¡¨ç¤ºæ‰€åœ¨çš„å±‚æ•°ï¼Œä» 1 å¼€å§‹ int level = 1; while (!stack1.isEmpty() || !stack2.isEmpty()) &#123; // å¥‡æ•°å±‚ä»stack1ä¸­å–å‡ºå…ƒç´ ï¼Œå¹¶å°†å…ƒç´ çš„å·¦å­©å­å’Œå³å­©å­æ·»åŠ åˆ°stack2ä¸­ if (level % 2 == 1) &#123; BinaryTreeNode node = stack1.pop(); System.out.print(node.value + \"\\t\"); if (node.left != null) &#123; stack2.push(node.left); &#125; if (node.right != null) &#123; stack2.push(node.right); &#125; // å½“ stack1 ä¸ºç©ºï¼Œæ¥åˆ°ä¸‹ä¸€å±‚ if (stack1.isEmpty()) &#123; System.out.println(); level++; &#125; &#125; else &#123; // stack2 çš„è¿‡ç¨‹åŒä¸Šï¼Œä¸è¿‡å…ˆå°†å³å­©å­å…ˆæ·»åŠ åˆ°stack1ä¸­ BinaryTreeNode node = stack2.pop(); System.out.print(node.value + \"\\t\"); if (node.right != null) &#123; stack1.push(node.right); &#125; if (node.left != null) &#123; stack1.push(node.left); &#125; if (stack2.isEmpty()) &#123; System.out.println(); level++; &#125; &#125; &#125;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"é“¾è¡¨çš„å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹","date":"2020-06-15T16:00:00.000Z","path":"/é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹/","text":"é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨çš„å€’æ•°ç¬¬ $k$ ä¸ªèŠ‚ç‚¹ã€‚ä¸ºäº†ç¬¦åˆå¤§å¤šæ•°äººçš„ä¹ æƒ¯ï¼Œæœ¬é¢˜ä» $1$ å¼€å§‹è®¡æ•°ï¼Œå³é“¾è¡¨çš„å°¾èŠ‚ç‚¹æ˜¯å€’æ•°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªé“¾è¡¨æœ‰ $6$ ä¸ªèŠ‚ç‚¹ï¼Œå¦‚ä¸‹ 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6ï¼Œè¿™ä¸ªé“¾è¡¨çš„å€’æ•°ç¬¬ $3$ ä¸ªèŠ‚ç‚¹æ˜¯å€¼ä¸º $4$ çš„èŠ‚ç‚¹ã€‚é“¾è¡¨çš„å®šä¹‰å¦‚ä¸‹ï¼š private static class ListNode &#123; public ListNode next; public int value; public ListNode(int value) &#123; this.next = null; this.value = value; &#125;&#125; æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ€è·¯å°±æ˜¯å…ˆéå†é“¾è¡¨ï¼Œç›´åˆ°ç»“å°¾ï¼Œæ¥ç€å›æº¯ $k - 1$ æ­¥å³å¯è·å¾—å€’æ•°ç¬¬ $k$ ä¸ªèŠ‚ç‚¹ ä½†æ˜¯ä»ä¸Šé¢é“¾è¡¨çš„å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œè¯¥é“¾è¡¨æ˜¯ä¸€ä¸ªå•å‘çš„é“¾è¡¨ï¼Œæˆ‘ä»¬æ ¹æœ¬æ— æ³•è¿›è¡Œå›æº¯ã€‚ æ‰€ä»¥æˆ‘ä»¬è‡ªç„¶çš„æƒ³åˆ°äº†ç¬¬äºŒç§åŠæ³•ï¼Œé¦–å…ˆéå†ä¸€éé“¾è¡¨ï¼Œå¹¶ä¸”ç»Ÿè®¡é“¾è¡¨ä¸­èŠ‚ç‚¹çš„ä¸ªæ•° $n$ï¼Œè¿™æ ·æˆ‘ä»¬åªè¦å‘å‰èµ° $n - k$ æ­¥å³å¯åˆ°å€’æ•°ç¬¬ $k$ ä¸ªèŠ‚ç‚¹ è¿™ç§æ–¹æ³•éœ€è¦éå†ä¸¤éé“¾è¡¨ï¼Œå¦‚æœé¢è¯•å®˜å‘Šè¯‰ä½ åªéœ€è¦éå†ä¸€éå³å¯ï¼Œæˆ‘ä»¬åº”å½“æ€ä¹ˆåšã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸¤ä¸ªå‰åæŒ‡é’ˆï¼Œé¦–å…ˆç¬¬ä¸€ä¸ªæŒ‡é’ˆå…ˆèµ° $k - 1$ æ­¥ï¼Œç„¶åä¸¤ä¸ªæŒ‡é’ˆåŒæ—¶å‘å‰èµ°ï¼Œå½“ç¬¬ä¸€ä¸ªæŒ‡é’ˆåˆ°è¾¾å°¾èŠ‚ç‚¹æ—¶ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆä¹Ÿå°±åˆ°è¾¾äº†å€’æ•°ç¬¬ $k$ ä¸ªèŠ‚ç‚¹ï¼Œè¯¥ç§æ–¹æ³•åªéœ€è¦éå†ä¸€éé“¾è¡¨ ä»£ç å¦‚ä¸‹ï¼š public class FindKthToTail &#123; private static class ListNode &#123; public ListNode next; public int value; public ListNode(int value) &#123; this.next = null; this.value = value; &#125; &#125; public static ListNode findKthToTail(ListNode root, int k) &#123; if (root == null || k &lt;= 0) &#123; return null; &#125; ListNode ahead = root; ListNode after = root; // ç¬¬ä¸€ä¸ªæŒ‡é’ˆå…ˆèµ° k - 1 æ­¥ï¼Œå¦‚æœé“¾è¡¨çš„é•¿åº¦å°äº k ï¼Œåˆ™è¿”å› null for (int i = 0; i &lt; k - 1; i++) &#123; if (ahead.next == null) &#123; return null; &#125; ahead = ahead.next; &#125; // äºŒè€…åŒæ—¶èµ°ï¼Œå½“ç¬¬ä¸€ä¸ªæŒ‡é’ˆåˆ°è¾¾å°¾èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆåˆ°è¾¾å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹ while(ahead.next != null) &#123; ahead = ahead.next; after = after.next; &#125; return after; &#125; public static void main(String[] args) &#123; ListNode root = new ListNode(1); root.next = new ListNode(2); root.next.next = new ListNode(3); root.next.next.next = new ListNode(4); ListNode result = findKthToTail(root, 2); System.out.println(result != null ? result.value : \"null\"); // 3 &#125;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"é“¾è¡¨ä¸­ç¯çš„å…¥å£èŠ‚ç‚¹","date":"2020-06-15T16:00:00.000Z","path":"/é“¾è¡¨ä¸­ç¯çš„å…¥å£èŠ‚ç‚¹/","text":"å¦‚ä½•é“¾è¡¨ä¸­åŒ…å«ç¯ï¼Œå¦‚ä½•æ‰¾å‡ºç¯çš„å…¥å£èŠ‚ç‚¹? ä¾‹å¦‚ï¼Œåœ¨å¦‚å›¾æ‰€ç¤ºçš„é“¾è¡¨ä¸­ï¼Œç¯çš„å…¥å£èŠ‚ç‚¹æ˜¯èŠ‚ç‚¹ $3$ã€‚ è§£å†³è¿™é“é¢˜çš„æ€è·¯åˆ†ä¸ºä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯ç¡®å®šè¯¥é“¾è¡¨æœ‰æ²¡æœ‰ç¯ï¼Œæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªå¿«æŒ‡é’ˆï¼Œä¸€ä¸ªæ…¢æŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆä¸€æ¬¡æ€§èµ°ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆä¸€æ¬¡æ€§èµ°ä¸€æ­¥ã€‚å¦‚æœæœ‰ç¯çš„è¯ï¼Œé‚£ä¹ˆå¿«æŒ‡é’ˆå’Œæ…¢æŒ‡é’ˆå°±ä¼šç›¸é‡ï¼Œå¹¶ä¸”æ˜¯åœ¨ç¯å†…ç›¸é‡ï¼›å¦‚æœæ²¡æœ‰ç¯çš„è¯ï¼Œé‚£ä¹ˆå¿«æŒ‡é’ˆå°±ä¼šåˆ°è¾¾å°¾èŠ‚ç‚¹ï¼Œæ…¢æŒ‡é’ˆä¸å¿«æŒ‡é’ˆä¸ä¼šç›¸é‡ã€‚ public static ListNode meetingNode(ListNode root) &#123; if (root == null) &#123; return null; &#125; // æ…¢æŒ‡é’ˆå…ˆèµ°ä¸€æ­¥ ListNode slow = root.next; if (slow == null) &#123; return null; &#125; // å¿«æŒ‡é’ˆå…ˆèµ°ä¸¤æ­¥ ListNode fast = slow.next; while (slow != null &amp;&amp; fast != null) &#123; if (slow == fast) &#123; return fast; &#125; slow = slow.next; fast = fast.next; if (fast != null) &#123; fast = fast.next; &#125; &#125; return null; ç¬¬äºŒæ­¥å°±æ˜¯ç¡®å®šç¯çš„å…¥å£èŠ‚ç‚¹ï¼Œé¦–å…ˆæˆ‘ä»¬æ‹¿åˆ°åœ¨ç¬¬ä¸€æ­¥ä¸­å¿«æ…¢æŒ‡é’ˆç›¸é‡çš„èŠ‚ç‚¹ï¼Œè®©è¿™ä¸ªèŠ‚ç‚¹éå†ç¯ä»¥ç»Ÿè®¡ç¯çš„æ•°ç›®ï¼Œå½“è¿™ä¸ªèŠ‚ç‚¹å›åˆ°åŸåœ°æ—¶å³èµ°äº†ä¸€åœˆã€‚æ‹¿åˆ°ç¯çš„æ•°ç›® $k$ ä»¥åï¼Œæˆ‘ä»¬ç»§ç»­å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆå…ˆèµ° $k$ æ­¥ï¼Œç„¶åä¸¤ä¸ªæŒ‡é’ˆç»§ç»­èµ°ï¼Œå½“ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡æ—¶ï¼Œå³æ˜¯ç¯çš„å…¥å£èŠ‚ç‚¹ public static ListNode entryNodeOfLoop(ListNode root) &#123; // è·å¾—ç›¸é‡çš„èŠ‚ç‚¹ ListNode meetingNode = meetingNode(root); if (meetingNode == null) &#123; return null; &#125; // ç»Ÿè®¡ç¯ä¸­èŠ‚ç‚¹æ•°ç›® int count = 1; ListNode loopNode = meetingNode; while (loopNode.next != meetingNode) &#123; count++; loopNode = loopNode.next; &#125; ListNode ahead = root; ListNode after = root; // ahead å…ˆèµ° count æ­¥ for (int i = 0; i &lt; count; i++) &#123; ahead = ahead.next; &#125; // ç›¸é‡èŠ‚ç‚¹å³ä¸ºç¯çš„å…¥å£èŠ‚ç‚¹ while (ahead != after) &#123; ahead = ahead.next; after = after.next; &#125; return after;&#125; æµ‹è¯•å¦‚ä¸‹ public static void main(String[] args) &#123; ListNode root = new ListNode(1); root.next = new ListNode(2); root.next.next = new ListNode(3); root.next.next.next = new ListNode(4); root.next.next.next.next = new ListNode(5); root.next.next.next.next.next = new ListNode(6); root.next.next.next.next.next.next = root.next.next; ListNode entryNode = entryNodeOfLoop(root); System.out.println(entryNode != null ? entryNode.value : \"null\"); // 3&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²","date":"2020-06-12T16:00:00.000Z","path":"/è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²/","text":"é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦è¡¨ç¤ºæ•°å€¼(åŒ…æ‹¬æ•´æ•°å’Œå°æ•°)ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸² +100, 5e2, -123, 3.14e+1 éƒ½è¡¨ç¤ºæ•°å€¼ï¼Œè€Œ 12e, 1a3.12, 1.2.3, +-5 éƒ½ä¸æ˜¯ã€‚ é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½æ•°å€¼çš„æ ¼å¼ä¸º A.B[e|E]Cï¼Œå…¶ä¸­ A, B, C ä»£è¡¨çš„æ˜¯æ•°å­—ï¼Œæœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ A, C ä¸­çš„å‰æ–¹å¯ä»¥æœ‰æ­£è´Ÿå·ï¼Œè€Œ B ä¸èƒ½æœ‰æ­£è´Ÿå·ã€‚æˆ‘ä»¬å˜æˆçš„æ€è·¯ä¾¿æ˜¯ï¼Œé¦–å…ˆæ‰«æå­—ç¬¦ä¸²ï¼Œçœ‹æ˜¯å¦åŒ¹é… Aï¼Œå³å­—ç¬¦ä¸²çš„å‰æ–¹æ˜¯å¦æ˜¯æ•°å­—(å¯åŒ…å«æ­£è´Ÿå·)ï¼Œæ¥ç€å¦‚æœç¢°åˆ°å°æ•°ç‚¹ï¼Œåˆ™æ‰«æå°æ•°ç‚¹åçš„å­—ç¬¦æ˜¯å¦æ˜¯æ•°å­—(ä¸èƒ½åŒ…å«æ­£è´Ÿå·)ï¼›æœ€ååŒ¹é…ç§‘å­¦è®¡æ•°æ³•ï¼Œå¦‚æœç¢°åˆ° e|Eï¼Œé‚£ä¹ˆæ‰«æåé¢çš„å­—ç¬¦æ˜¯å¦æ˜¯æ•°å­—(å¯åŒ…å«æ­£è´Ÿå·)ã€‚ ä»£ç å¦‚ä¸‹ï¼š public class IsNumberic &#123; // å…¨å±€å˜é‡ï¼Œæ§åˆ¶ä»å“ªé‡Œå¼€å§‹æ‰«æå­—ç¬¦ä¸² private static int index; public static boolean isNumberic(char[] str) &#123; if (str == null) &#123; return false; &#125; // æ‰«æå­—ç¬¦ä¸²å¼€å¤´æ˜¯å¦æ˜¯æ•°å­—(å¯å¸¦æ­£è´Ÿå·) boolean numberic = scanInteger(str, 0); if (index &lt; str.length) &#123; // å¦‚æœæœ‰å°æ•°ç‚¹ if (str[index] == '.') &#123; index++; // æ‰«æå°æ•°ç‚¹åçš„æ•°å­—(ä¸å¸¦æ­£è´Ÿå·) // ä½¿ç”¨ || æ˜¯å› ä¸º A. æˆ–è€… .Béƒ½ç®—æœ‰æ•ˆçš„æ•°å€¼ numberic = scanUnsignedInteger(str, index) || numberic; &#125; &#125; if (index &lt; str.length) &#123; // å¦‚æœæ‰«æåˆ° e|E if (str[index] == 'e' || str[index] == 'E') &#123; index++; // æ‰«æ e|E å­—ç¬¦åé¢æ˜¯å¦ä¸ºæ•°å­—(å¯å¸¦æ­£è´Ÿå·) numberic = numberic &amp;&amp; scanInteger(str, index); &#125; &#125; // ç¬¦åˆA.B[e|E]Cçš„å½¢å¼ï¼Œå¹¶ä¸”å­—ç¬¦ä¸²å…¨éƒ¨æ‰«æå®Œæ¯• return numberic &amp;&amp; index == str.length; &#125; // åˆ¤æ–­ä»æŸä¸ªä½ç½®å¼€å§‹ï¼Œåé¢æ˜¯å¦æœ‰æ•°å­—(å¯å¸¦æ­£è´Ÿå·) private static boolean scanInteger(char[] str, int start) &#123; if (start &gt;= str.length) &#123; return false; &#125; if (str[start] == '+' || str[start] == '-') &#123; return scanUnsignedInteger(str, start + 1); &#125; return scanUnsignedInteger(str, start); &#125; // åˆ¤æ–­ä»æŸä¸ªä½ç½®å¼€å§‹ï¼Œåé¢æ˜¯å¦æœ‰æ•°å­—(ä¸å¸¦æ­£è´Ÿå·) private static boolean scanUnsignedInteger(char[] str, int start) &#123; index = start; if (index &lt; str.length) &#123; while(str[index] &gt;= '0' &amp;&amp; str[index] &lt;= '9') &#123; index++; if (index == str.length) &#123; break; &#125; &#125; &#125; return index &gt; start; &#125; public static void main(String[] args) &#123; System.out.println(isNumberic(\".123\".toCharArray())); // true System.out.println(isNumberic(\"123.\".toCharArray())); // true System.out.println(isNumberic(\"+.123\".toCharArray())); // true System.out.println(isNumberic(\"-.123\".toCharArray())); // true System.out.println(isNumberic(\".123e-2\".toCharArray())); // true System.out.println(isNumberic(\"1.2.2\".toCharArray())); // false System.out.println(isNumberic(\"1.2e+2\".toCharArray())); // true &#125;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°","date":"2020-06-10T16:00:00.000Z","path":"/äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°/","text":"é¢˜ç›®ï¼šè¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ $1$ çš„ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼ŒæŠŠ $9$ è¡¨ç¤ºæˆäºŒè¿›åˆ¶æ˜¯ $1001$ï¼Œæœ‰ $2$ ä½æ˜¯ $1$ã€‚å› æ­¤ï¼Œå¦‚æœè¾“å…¥ $9$ï¼Œåˆ™è¯¥å‡½æ•°è¾“å‡º $2$ã€‚ æˆ‘ä»¬é€šè¿‡å°†æ•°å­—ä¸ $1$ ç›¸ä¸ï¼Œå³å¯çŸ¥é“æ•°å­—çš„äºŒè¿›åˆ¶çš„æœ€åä¸€ä½æ˜¯å¦ä¸º $1$ï¼Œæˆ‘ä»¬åªè¦é€æ¸çš„å°†æ•°å­—è¿›è¡Œå³ç§»ï¼Œå³å¯ç»Ÿè®¡å‡ºæ•°å­—ä¸­ $1$ çš„æ•°ç›®ï¼Œæ‰€ä»¥ä¼šå†™ä¸‹è¿™æ ·çš„ä»£ç  public static int numbersOfOne(int n) &#123; int count = 0; while (n != 0) &#123; if ((n &amp; 1) != 0) &#123; count++; &#125; n = n &gt;&gt; 1; &#125; return count;&#125; ä½†æ˜¯ä¸Šé¢çš„ä»£ç æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚æœè¾“å…¥çš„æ•´æ•°ä¸ºè´Ÿæ•°å‘¢? æ ¹æ®è´Ÿæ•°çš„è¡¨ç¤ºåŸåˆ™ï¼Œå®ƒçš„é¦–ä½æ˜¯ $1$ æ¥è¡¨ç¤ºæ•°å­—çš„æ­£è´Ÿæ€§ï¼Œåœ¨å³ç§»çš„è¿‡ç¨‹ä¸­ï¼Œé¦–ä½ä¼šè¿›è¡Œè¡¥ $1$ ä»¥è¡¨ç¤ºå®ƒçš„ç¬¦å·è¿˜æ˜¯è´Ÿçš„ï¼Œè¿™ä¸ªæ—¶å€™ç»Ÿè®¡å‡ºçš„æ•°å­—å°±æ˜¯é”™è¯¯çš„äº†ï¼Œå¹¶ä¸”ä¼šé€ æˆä¸Šé¢ä»£ç çš„æ­»å¾ªç¯ï¼Œå¦‚ä¸‹ä»¥ $8$ ä½è¡¨ç¤ºçš„ $-7$ ä¸ºä¾‹ ä¸ºäº†è§£å†³è´Ÿæ•°å¼•èµ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åå…¶é“è€Œè¡Œä¹‹ï¼Œè®© $1$ è¿›è¡Œå·¦ç§»ï¼Œç„¶åä¸æ•°å­—ç›¸ä¸ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç»Ÿè®¡å‡ºæ•°å­— $1$ çš„ä¸ªæ•°ï¼Œæ‰€ä»¥ä¿®æ”¹ä»£ç å¦‚ä¸‹ public static int numbersOfOne(int n) &#123; int count = 0; int flag = 1; while (flag != 0) &#123; if ((n &amp; flag) != 0) &#123; count++; &#125; flag = flag &lt;&lt; 1; &#125; return count;&#125; ä½†æ˜¯æˆ‘ä»¬å‘ç°ç»Ÿè®¡è´Ÿæ•°ä¸­ $1$ çš„ä¸ªæ•°çš„ç»“æœä¸æˆ‘ä»¬æƒ³è±¡çš„ä¸ç¬¦ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»Ÿè®¡ $-7$ çš„ä¸ªæ•°ï¼Œç»“æœä¸º public static void main(String[] args) &#123; System.out.println(numbersOfOne(-7)); // 30&#125; ç»“æœæ˜¯ $30$ è€Œä¸æ˜¯ $4$ï¼Œéš¾é“æ˜¯æˆ‘ä»¬çš„ç®—æ³•é”™äº†ï¼Œå…¶å®ä¸æ˜¯ï¼Œè€Œæ˜¯è®¡ç®—æœºå­˜å‚¨æ•°å­—æ˜¯ä»¥å…¶è¡¥ç è¿›è¡Œå­˜å‚¨çš„ï¼Œå¯¹äºæ­£æ•°æ¥è¯´ï¼Œå®ƒçš„è¡¥ç æ˜¯å®ƒæœ¬èº«ï¼Œè€Œå¯¹äºè´Ÿæ•°ï¼Œåˆ™æ˜¯å°†é™¤ç¬¦å·ä½è¿›è¡Œå–åï¼Œç„¶ååŠ  $1$ï¼Œæ‰€ä»¥ $-7$ çš„è¡¥ç ä¸º ä¸Šé¢è®¡ç®—å‡ºä¸€ä¸ªæ•°å­—äºŒè¿›åˆ¶è¡¨ç¤ºçš„ $1$ çš„ä¸ªæ•°éœ€è¦è¿›è¡Œ $32$ æ¬¡å¾ªç¯(å¯¹äº int ç±»å‹çš„æ•°æ®)ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å¯¹ç®—æ³•è¿›è¡Œæ”¹è¿›ï¼Œä½¿å¾—äºŒè¿›åˆ¶ä¸­æœ‰å‡ ä¸ª $1$ åˆ™è¿›è¡Œå‡ æ¬¡å¾ªç¯ã€‚ä¸ºäº†ç†è§£ä¸‹é¢è®²çš„ç®—æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å°†ä¸€ä¸ªæ•°å­—å‡å» $1$ å®ƒçš„äºŒè¿›åˆ¶ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–? å…ˆè¯´ç»“è®ºï¼Œå‡è®¾æ•°å­—äºŒè¿›åˆ¶æœ€å³è¾¹çš„ $1$ åœ¨ç¬¬ $m$ ä½ï¼Œå³ç¬¬ $m$ ä½åé¢çš„ä½å…¨æ˜¯ $0$ï¼Œåœ¨å‡å» $1$ ä¹‹åï¼Œç¬¬ $m$ ä½çš„ $1$ å˜æˆ $0$ï¼Œåé¢çš„ $0$ å…¨éƒ¨å˜ä¸º $1$ï¼Œè€Œç¬¬ $m$ ä½å‰é¢çš„æ•°å­—ä¿æŒä¸å˜ï¼Œä»¥ $8$ ä½è¡¨ç¤ºçš„ $10$ ä¸ºä¾‹ é‚£ä¹ˆæˆ‘ä»¬å°†æ•°å­— $n$ ä¸ $n - 1$ è¿›è¡Œç›¸ä¸ä¼šå¾—åˆ°ä»€ä¹ˆï¼Œå› ä¸º $n - 1$ ç¬¬ $m$ ä½å‰é¢çš„æ•°å­—ä¸å˜ï¼Œæ‰€ä»¥ $n - 1$ çš„ç¬¬ $m$ ä½ä»¥å‰çš„æ•°å­—ä¸ $n$ ç›¸åŒï¼Œæ‰€ä»¥ $n$ &amp; $n - 1$ å¾—åˆ°çš„ç¬¬ $m$ ä½ä»¥å‰çš„äºŒè¿›åˆ¶æ˜¯ä¸å˜çš„ï¼Œè€Œ $n - 1$ ç¬¬ $m$ ä½å˜æˆ $0$ï¼Œä»¥åŠç¬¬ $m$ ä½ä»¥åçš„ $0$ å˜ä¸º $1$ï¼Œæ‰€ä»¥ $n$ &amp; $n - 1$ å¾—åˆ°çš„ç¬¬ $m$ ä½åŠç¬¬ $m$ ä½ä»¥åçš„äºŒè¿›åˆ¶æ˜¯ $0$ï¼Œæ‰€ä»¥ $n$ &amp; $n - 1$ çš„æ•ˆæœå°±æ˜¯å°†æ•°å­— $n$ ä¸­æœ€å³è¾¹çš„ $1$ ç»™å»é™¤äº† æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥å†™å‡ºè¿™æ ·çš„ä»£ç  public static int numbersOfOne(int n) &#123; int count = 0; while(n != 0) &#123; count++; n = (n - 1) &amp; n; &#125; return count;&#125; æ¯æ¬¡å¾ªç¯ä¼šå»é™¤ä¸€ä¸ª $1$ï¼Œæ‰€ä»¥äºŒè¿›åˆ¶ä¸­æœ‰å‡ ä¸ª $1$ï¼Œä¾¿ä¼šè¿›è¡Œå‡ æ¬¡å¾ªç¯ã€‚ æ‰©å±•ï¼š ç”¨ä¸€æ¡è¯­å¥åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯ä¸æ˜¯ $2$ çš„æ•´æ•°æ¬¡æ–¹ã€‚ä¸€ä¸ªæ•´æ•°å¦‚æœæ˜¯ $2$ çš„æ•´æ•°æ¬¡æ–¹ï¼Œé‚£ä¹ˆå®ƒçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­æœ‰ä¸”åªæœ‰ä¸€ä½æ˜¯ $1$ï¼Œè€Œå…¶ä»–æ‰€æœ‰ä½éƒ½æ˜¯ $0$ã€‚æ‰€ä»¥æˆ‘ä»¬ç»Ÿè®¡è¯¥æ•°äºŒè¿›åˆ¶ä¸­ $1$ çš„ä¸ªæ•°ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªï¼Œé‚£ä¹ˆå°±æ˜¯ $2$ çš„æ•´æ•°æ¬¡æ–¹ã€‚ è¾“å…¥ä¸¤ä¸ªæ•´æ•° $m$ å’Œ $n$ï¼Œè®¡ç®—éœ€è¦æ”¹å˜ $m$ çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„å¤šå°‘ä½æ‰èƒ½å¾—åˆ° $n$ã€‚æ¯”å¦‚ $10$ çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º $1010$ï¼Œ$13$ çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º $1101$ï¼Œéœ€è¦æ”¹å˜ $1010$ ä¸­çš„ $3$ ä½æ‰èƒ½å¾—åˆ° $1101$ã€‚æˆ‘ä»¬å¯ä»¥åˆ†ä¸¤æ­¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆå°†è¿™ä¸¤ä¸ªæ•°è¿›è¡Œå¼‚æˆ–ï¼Œè¿™æ · $m$ å’Œ $n$ äºŒè¿›åˆ¶ä¸åŒçš„ä½ä¼šå¾—åˆ° $1$ï¼Œç›¸åŒçš„ä½æ˜¯ $0$ï¼Œæˆ‘ä»¬åªè¦ç»Ÿè®¡å¼‚æˆ–åäºŒè¿›åˆ¶ä¸­ $1$ çš„ä¸ªæ•°ï¼Œå³å¯å¾—åˆ°éœ€è¦æ”¹å˜çš„ä½æ•°ã€‚","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"offsetX,pageX,clientXå’ŒscreenX","date":"2020-06-02T16:00:00.000Z","path":"/offsetX,pageX,clientX,screenX/","text":"åœ¨ä½¿ç”¨çš„ JavaScript çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹ offsetï¼Œpageï¼Œclient ç­‰ç­‰æ‰€è¡¨ç¤ºçš„è·ç¦»ä¸€ç›´ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œç°è¶æœ‰æ—¶é—´ç³»ç»Ÿçš„å­¦ä¹ äº†ä¸€ä¸‹ã€‚ä¸Šé¢æ‰€è¿°çš„ offsetXï¼ŒpageX ç­‰ç­‰éƒ½æ˜¯äº‹ä»¶å¯¹è±¡ event çš„å±æ€§ï¼Œå½“æœ‰é¼ æ ‡äº‹ä»¶è§¦å‘æ—¶ï¼Œå¯ä»¥è·å¾—ç›¸åº”çš„äº‹ä»¶å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«ç€é¼ æ ‡çš„å„ç§è·ç¦»ï¼Œç°æ€»ç»“å¦‚ä¸‹ offsetXï¼šç¦»è§¦å‘äº‹ä»¶å…ƒç´ å·¦è¾¹çš„è·ç¦» pageXï¼šç¦»é¡µé¢å·¦è¾¹çš„è·ç¦» clientXï¼šç¦»æµè§ˆå™¨å·¦è¾¹çš„è·ç¦» screenXï¼šç¦»ç”µè„‘æ˜¾ç¤ºå™¨å·¦è¾¹çš„è·ç¦» ç°åœ¨å°±æ¼”ç¤ºä¸€ä¸‹ï¼Œå‡è®¾æœ‰ä¸‹é¢çš„é¡µé¢ç»“æ„ ä¸Šå›¾å·²ç»åŸºæœ¬å¯ä»¥æ˜ç™½ offsetX å’Œ clientXçš„å¤§å°ï¼Œå¦‚æœæ²¡æœ‰æ¨ªå‘çš„æ»šåŠ¨æ¡çš„è¯ï¼ŒpageX ä¸ clientX çš„å¤§å°æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœæœ‰æ»šåŠ¨æ¡çš„è¯ï¼Œé‚£ä¹ˆ pageX çš„è·ç¦»ä¸€èˆ¬æ˜¯å¤§äº clientX çš„è·ç¦»çš„ï¼Œå¦‚ä¸‹ ä¸Šå›¾åº”è¯¥å·²ç»é˜é‡Šäº† pageX ä¸ clientX çš„ä¸åŒï¼Œé‚£ä¹ˆåªå‰©æœ€åä¸€ä¸ª screenXï¼Œè¿™ä¸ªä¹Ÿè¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯é¼ æ ‡ä½ç½®ç¦»ç”µè„‘æ˜¾ç¤ºå™¨å·¦ä¾§çš„ä½ç½®ï¼Œå¦‚æœæµè§ˆå™¨æ˜¯æœ€å¤§åŒ–çš„è¯ï¼Œå±å¹•çš„å·¦ä¾§ä¸æµè§ˆå™¨çš„å·¦ä¾§ç›¸åŒï¼Œé‚£ä¹ˆ screenX çš„å¤§å°ä¸ clientX çš„å¤§å°ç›¸åŒï¼Œå¦‚æœä¸æ˜¯æœ€å¤§åŒ–ï¼Œé‚£ä¹ˆ ä¸Šé¢ä»‹ç»çš„æ˜¯æ¨ªå‘è·ç¦»ï¼Œçºµå‘è·ç¦»ä¹Ÿæ˜¯ç›¸ä¼¼ï¼ŒoffsetYï¼ŒpageYï¼ŒclientYï¼ŒscreenY è®¡ç®—å°†å·¦ä¾§è·ç¦»æ¢ä¸ºä¸Šä¾§è·ç¦»ã€‚ è¿™é‡Œè¿˜å¯ä»¥åœ¨æ‰©å±•ä¸€ä¸ªè·ç¦»ï¼ŒscrollX æŒ‡çš„æ˜¯æ¨ªå‘æ»šåŠ¨çš„è·ç¦»ï¼Œå…¶å®é€šè¿‡åˆ†æå¯ä»¥å‘ç°$$scrollX = pageX - clientX$$å¦‚ä¸‹å›¾æ‰€ç¤º","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"}]},{"title":"TypeScriptå…¥é—¨æŒ‡å—","date":"2020-05-29T16:00:00.000Z","path":"/TypeScriptå…¥é—¨æŒ‡å—/","text":"ä»‹ç»TypeScriptæ˜¯ä»€ä¹ˆTypeScript æ˜¯ä»€ä¹ˆ? å¼•ç”¨å®˜æ–¹çš„å®šä¹‰ TypeScript is a typed superset of JavaScript that compiles to plain JavaScript. Any browser. Any host. Any OS. Open source. ç®€å•ç¿»è¯‘å°±æ˜¯ TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œå¹¶ä¸”å¯ä»¥è¢«ç¼–è¯‘æˆ JavaScriptã€‚å®ƒå¯ä»¥è¿è¡Œåœ¨ä»»ä½•æµè§ˆå™¨ï¼Œä»»ä½•ä¸»æœºï¼Œä»»ä½•æ“ä½œç³»ç»Ÿä¸Šã€‚å¹¶ä¸”å®ƒæ˜¯å¼€æºçš„ã€‚ çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½å¯¹ TypeScript è¿˜æ˜¯æ²¡æœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Œå…¶å®åœ¨æˆ‘çœ‹æ¥ TypeScript æ˜¯å¯¹ JavaScript åšäº†å„ç§é™åˆ¶ï¼Œè¿™é‡Œè¯´çš„é™åˆ¶å¹¶ä¸æ˜¯è´¬ä¹‰çš„æ„æ€ï¼Œå› ä¸º JavaScript å®åœ¨æ˜¯å¤ªçµæ´»äº†ï¼Œå¾ˆå¤šçš„é—®é¢˜åªæœ‰åœ¨è¿è¡Œçš„æ—¶å€™æ‰ä¼šæš´éœ²å‡ºæ¥ï¼Œæ¯”å¦‚å¯¹äºå‡½æ•°ï¼Œå³ä½¿å®šä¹‰æ—¶è¦æ±‚ä¼ ä¸¤ä¸ªå‚æ•°ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨æ—¶å´å¯ä»¥ä¼ å…¥ä»»æ„çš„å‚æ•°ï¼Œæ‰€ä»¥ä½ æ— æ³•é™åˆ¶ä½¿ç”¨è¯¥å‡½æ•°çš„ç”¨æˆ·ä¼ å…¥æ­£ç¡®çš„å‚æ•°ï¼Œå¦‚æœç¢°åˆ°ä¸ä»”ç»†çœ‹ API æ–‡æ¡£çš„ç”¨æˆ·ï¼Œé¬¼çŸ¥é“å®ƒä½¿ç”¨çš„æ—¶å€™ä¼šä¼ å…¥ä»€ä¹ˆï¼Œå‡ºäº†é—®é¢˜è¯´ä¸å®šä¼šç”©é”…ä½ å…¼å®¹æ€§åšçš„ä¸å¥½ã€‚è€Œ TypeScript åˆ™é™åˆ¶äº†è¿™ä¸€ç‚¹ï¼Œåœ¨ä½¿ç”¨æ—¶ä¼ å…¥çš„å‚æ•°å¿…é¡»ä¸å®šä¹‰ä¼ å…¥çš„ç›¸åŒï¼Œå¹¶ä¸”æœ‰æç¤ºæ¯ä¸ªå‚æ•°çš„ä½œç”¨ï¼Œç”¨æˆ·ä½¿ç”¨è¯¥å‡½æ•°æ—¶å¿…é¡»æŒ‰è§„å®šçš„æ¥ã€‚ TypeScriptçš„ä¼˜åŠ¿é‚£ä¹ˆ TypeScript å¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå¥½å¤„ï¼š é”™è¯¯åœ¨ç¼–è¯‘æ—¶å°±å¯ä»¥æš´éœ²å‡ºæ¥ï¼Œè€Œä¸å¿…ç­‰åˆ°è¿è¡Œæ—¶æ‰æš´éœ²å‡ºæ¥ å¦‚ä¸‹ js æ–‡ä»¶ å¦‚ä¸Šï¼Œä¸€ä¸å°å¿ƒå°†å˜é‡åå†™é”™äº†ï¼Œå†™æˆäº† MyNaneï¼Œè¿™ç§é”™è¯¯æ˜¯å¾ˆæœ‰å¯èƒ½å‘ç”Ÿçš„ï¼Œä½†æ˜¯åœ¨å¾ˆå¤šçš„æ—¶å€™æˆ‘ä»¬è‡ªå·±å´å¾ˆéš¾å‘ç°ï¼Œåªæœ‰å½“æˆ‘ä»¬è¿è¡Œè¯¥ç¨‹åºæŠ¥é”™çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰æœ‰å¯èƒ½æ ¹æ®æŠ¥é”™ä¿¡æ¯ï¼Œç¡®å®šæŠ¥é”™çš„åŸå› ï¼›æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœæŠ¥é”™çš„ä¿¡æ¯ä¸æ˜ç¡®ï¼Œä½ å‡ ä¹æ— æ³•ç¡®å®šæ˜¯å“ªé‡Œå‡ºç°é—®é¢˜ï¼Œåˆ°æ—¶å€™è¦é ä¸€åŒè‚‰çœ¼å»æ‰¾å‡ºè¿™ä¹ˆä¸€ä¸ªå°å°çš„ä¸åŒï¼Œæ›¾ç»æˆ‘å°±æœ‰å› ä¸ºå˜é‡åå†™é”™çš„é—®é¢˜ï¼Œæˆ‘æ‰¾äº†åŠä¸ªå°æ—¶ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨ TypeScript çš„è¯ï¼Œè¿™æ ·çš„é—®é¢˜åœ¨ç¼–è¯‘æ—¶å°±ä¼šè¢«å‘ç°ï¼Œå¦‚ä¸‹ ts æ–‡ä»¶ æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨ MyNane ä¸‹é¢å‡ºç°äº†çº¢è‰²çš„æ³¢æµªçº¿ï¼Œå°†é¼ æ ‡æ”¾åœ¨ä¸Šé¢ï¼Œè¿˜ä¼šè´´å¿ƒçš„ç»™å‡ºæç¤ºã€‚ æ™ºèƒ½æç¤º å¯¹äºç°ä»£çš„ç¨‹åºå‘˜æ¥è¯´ï¼Œä»£ç çš„æ™ºèƒ½æç¤ºé‚£æ˜¯èƒ½å¤Ÿå¤§å¤§çš„æé«˜å·¥ä½œæ•ˆç‡çš„ï¼Œä¸ä»…å¦‚æ­¤ï¼Œè¿˜å¯ä»¥å‡å°‘å‡ºé”™çš„æ¦‚ç‡ï¼Œå¦‚æœä½ æ‰‹åŠ¨å†™å‡ºä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•åï¼Œå‡ºé”™çš„æ¦‚ç‡å¯æ˜¯å¾ˆé«˜çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸€äº›è‹±è¯­ä¸å¥½çš„åŒå­¦ã€‚ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œå› ä¸º JavaScript ä¸æ˜¯é™æ€ç±»å‹ï¼Œè€Œæ˜¯åŠ¨æ€ç±»å‹ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½ä½¿ç”¨ var, let, const å£°æ˜ï¼Œè€Œä¸æ˜¯åƒ C è¯­è¨€è¿™æ ·é™æ€ç±»å‹è¯­è¨€ï¼Œä¸åŒçš„ç±»å‹ä½¿ç”¨ä¸åŒçš„å…³é”®å­—ï¼Œå¦‚ int, char[] ç­‰ç­‰ã€‚æ‰€ä»¥è¿™å°±æ„å‘³ç€ JavaScript è¿™ä¸ªç±»å‹æ˜¯å¯å˜çš„ï¼Œä¸€ä¼šå„¿è¿™æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸€ä¼šå„¿æ˜¯æ•°å­—ç±»å‹ï¼Œç¼–è¯‘å™¨æ ¹æœ¬åœ¨ç¼–è¯‘é˜¶æ®µæ ¹æœ¬ä¸èƒ½ç¡®å®šä½ æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ‰€ä»¥æ— æ³•ç»™å‡ºç›¸åº”ç±»å‹çš„ç‰¹æœ‰æ–¹æ³•ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ç±»å‹çš„ toUpperCase() æ–¹æ³•ï¼Œå¦‚ä¸‹ js æ–‡ä»¶ å¦‚ä¸Šï¼Œä¸Šé¢çš„å‡½æ•°çš„åŠŸèƒ½æ˜¯å°†ä¼ å…¥çš„å•è¯é¦–å­—æ¯å¤§å†™ï¼Œæˆ‘ä»¬åªæ˜¯ç®€å•çš„è°ƒç”¨å­—ç¬¦ä¸²å¯¹è±¡çš„å‡½æ•° toUpperCase()ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°å½“æˆ‘ä»¬æ‰“å‡º word. æ—¶æ²¡æœ‰ç»™å‡ºä»»ä½•çš„æå‡ºï¼Œå› ä¸º JavaScript æ ¹æœ¬ä¸èƒ½ç¡®å®šä½ ä¼ å…¥çš„æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œæ¯•ç«Ÿ JavaScript æ˜¯å¦‚æ­¤çš„çµæ´»ï¼Œä½¿ç”¨æ—¶ä½ å¯ä»¥ä¼ å…¥ä»»ä½•ç±»å‹çš„å‚æ•°ã€‚ä½†æ˜¯å¯¹äº TypeScript å°±ä¸ä¸€æ ·äº†ï¼Œå› ä¸ºå®ƒä¼šå¯¹å‚æ•°çš„ç±»å‹åšå‡ºé™åˆ¶ï¼Œå¦‚ä¸‹ æˆ‘ä»¬é™åˆ¶äº†ä¼ å…¥çš„å‚æ•°å¿…é¡»ä¸º string ç±»å‹ï¼Œåœ¨ç¼–è¯‘çš„é˜¶æ®µï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‚¯å®šä¼ å…¥çš„ä¸€å®šæ˜¯ string ç±»å‹ï¼Œæ‰€ä»¥åœ¨å‡½æ•°çš„æ–¹æ³•é‡Œé¢ï¼Œå½“æˆ‘ä»¬è¾“å…¥ word. æ—¶ä¼šç»™å‡ºå­—ç¬¦ä¸²å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è§„å®šäº†å‡½æ•°å¿…é¡»ä¼ å…¥ä»€ä¹ˆç±»å‹ï¼Œè¿™æ ·ç”¨æˆ·åœ¨ä½¿ç”¨æ—¶å°±ä¸èƒ½éšä¾¿çš„ä¼ å…¥å‚æ•°ï¼Œæ‰€æœ‰çš„ä¸€åˆ‡å¿…é¡»æŒ‰è§„å®šçš„æ¥ï¼Œè¿™åˆæ— å½¢çš„å‡å°‘äº† bug çš„äº§ç”Ÿï¼Œå¹¶ä¸”ç”¨æˆ·åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œè¿˜ä¼šç»™å‡ºæå‡ºï¼Œéœ€è¦ä¼ å…¥ä»€ä¹ˆå‚æ•°ç±»å‹ï¼Œå¿…è¦çš„æ—¶å€™è¿˜å¯ä»¥ç»™å‡ºä¼ å…¥å‚æ•°çš„æ„ä¹‰ï¼Œå¦‚ä¸‹ TypeScript çš„å¥½å¤„è¿˜ä¸æ­¢è¿™ä¸€äº›ï¼Œä¸è¿‡å°±æˆ‘åˆ—ä¸¾çš„è¿™ä¸¤ä¸ªï¼Œå°±æœ‰è¶³å¤Ÿçš„ç†ç”±æ¥å­¦ TypeScript äº†ï¼ŒTypeScript æ›´å¤šçš„å¥½å¤„å°±éœ€è¦ä½ åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æ…¢æ…¢ç†ä¼šäº†ã€‚ å…¥é—¨ä½¿ç”¨ä¸‹é¢å°±å°†ä»‹ç» TypeScript çš„å®‰è£…ï¼Œä»¥åŠå¦‚ä½•å°† TypeScript è½¬åŒ–ä¸º JavaScript ä»£ç ï¼Œæ¯•ç«Ÿæµè§ˆå™¨å’Œ Node åªèƒ½è¿è¡Œ JavaScript ä»£ç ã€‚ å®‰è£…TypeScriptåœ¨å®‰è£… TypeScript ä¹‹å‰ï¼Œç¡®ä¿ä½ çš„è®¡ç®—æœºæŒ‰ç…§å¥½äº† Nodeï¼Œå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥å»ç½‘ä¸Šæœå¦‚ä½•å®‰è£…ï¼Œæ•™ç¨‹å¾ˆå¤šã€‚å®‰è£…å®Œæˆä¹‹åï¼Œä½¿ç”¨ npm ä¸‹è½½ typescript npm install -g typescript æŸ¥çœ‹ç‰ˆæœ¬(ä¸»è¦æ˜¯éªŒè¯æ˜¯å¦æˆåŠŸå®‰è£…) tsc -VVersion 3.8.3 ç¼–å†™TypeScriptç¨‹åºæ–°å»º greeter.ts function greeter(person: string) &#123; return \"Hello \" + person;&#125;let user = 'XT';console.log(greeter(user)); åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ tsc å‘½ä»¤å°†å®ƒç¼–è¯‘ä¸º js tsc greeter.ts è¿™æ—¶ä¼šåœ¨è¯¥ç›®å½•ä¸‹ç”Ÿæˆ greeter.jsï¼Œgreeter.js çš„å†…å®¹ä¸º function greeter(person) &#123; return \"Hello \" + person;&#125;var user = 'XT';console.log(greeter(user)); æ¥ç€æˆ‘ä»¬ä½¿ç”¨ node è¿è¡Œè¯¥ js æ–‡ä»¶ node greeter.js è¾“å‡ºä¸º Hello XT æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬çš„æµç¨‹ä¸ºï¼Œç¼–å†™ ts æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ tsc ç¼–è¯‘ä¸º js æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ node è¿è¡Œ js æ–‡ä»¶æŸ¥çœ‹ç»“æœï¼Œé‚£æœ‰æ²¡æœ‰ä»€ä¹ˆå·¥å…·å¸®æˆ‘ä»¬åšè¿™ä»¶äº‹æƒ…ï¼Œä¸€ä¸ªå‘½ä»¤ç›´æ¥åˆ°ä½ã€‚è¿™é‡Œæˆ‘ä»¬æ¨èä½¿ç”¨ ts-nodeï¼Œè¯¥å‘½ä»¤å¯ä»¥ä¸€æ­¥åˆ°ä½ï¼Œå°±ç›¸å½“äºæ˜¯ç›´æ¥è¿è¡Œ ts æ–‡ä»¶ï¼Œé¦–å…ˆä¸‹è½½ ts-node npm install -g ts-node ç°åœ¨æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ ts-node greeter.ts æŸ¥çœ‹ç»“æœã€‚ åŸºæœ¬ç±»å‹TypeScript ä¸ JavaScript æœ€å¤§çš„ä¸åŒå°±æ˜¯ TypeScript æ˜¯ä¸€ä¸ªæœ‰ç±»å‹çš„è¯­è¨€ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼å£°æ˜å˜é‡ let å˜é‡å: ç±»å‹ = å€¼; é‚£ä¹ˆ TypeScript æœ‰å“ªäº›ç±»å‹å‘¢? ä¸‹é¢å°±ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚ boolean// å€¼åªèƒ½ä¸ºtrueæˆ–è€…falselet isDone: boolean = false; numberlet decNumber: number = 20; // åè¿›åˆ¶let hexNumber: number = 0x14; // åå…­è¿›åˆ¶ 20let binNumber: number = 0b10100; // äºŒè¿›åˆ¶ 20let octNumber: number = 0o24; //å…«è¿›åˆ¶ 20 stringlet name: string = \"bob\"; // å•å¼•å·ï¼ŒåŒå¼•å·éƒ½å¯ä»¥let greetStr: string = `Hello $&#123;name&#125;`; // æ”¯æŒæ¨¡æ¿å­—ç¬¦ä¸² æ•°ç»„(Array)let list: number[] = [1, 2, 3]; // æ•°å­—æ•°ç»„let list: Array&lt;number&gt; = [1, 2, 3]; // æ•°ç»„æ³›å‹ å…ƒç¥–(Turple)è§„å®šäº†æ•°ç»„çš„é•¿åº¦ï¼Œä»¥åŠæ¯ä¸ªå…ƒç´ çš„ç±»å‹ let x: [string, number]; // xæœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä¸ºæ•°å­—x = [\"hello\", 1] enumæšä¸¾ç±»å‹ enum Color &#123; Red, Green, Blue&#125;let colorName: Color = Color.Blue; anyä»»æ„ç±»å‹ï¼Œä¸å†™ JavaScript ä¸€æ · // ä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆç±»å‹ï¼Œæˆ–è€…ä¸å¸Œæœ›åšè¯­æ³•æ£€æŸ¥ï¼Œå°±ç›¸å½“äºå†™JavaScriptlet notSure: any = 4;notSure = false;let list: any[] = [1, true, \"a\"] voidvoid ä¸€èˆ¬ç”¨äºè¡¨ç¤ºå‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ï¼Œå°†å®ƒå£°æ˜ä¸ºä¸€ä¸ªå˜é‡æ²¡æœ‰æ„ä¹‰ // ä¸è¿”å›ä»»ä½•å€¼function printUser(user): void &#123; console.log(user)&#125;// å£°æ˜ä¸€ä¸ªvoidç±»å‹å˜é‡æ˜¯æ²¡æœ‰æ„ä¹‰çš„let x: void = null; // åªèƒ½è¢«èµ‹å€¼ä¸ºnullå’Œundefined undefined, nulllet u: undefined = undefined; // é€šå¸¸å£°æ˜å˜é‡æ„ä¹‰ä¸å¤§let n: null = null; neverå‡½æ•°æŠ›å‡ºå¼‚å¸¸æˆ–è€…æ­»å¾ªç¯æ˜¯å¯ä»¥ä½¿ç”¨ nerver ä½œä¸ºè¿”å›å€¼ // è¡¨ç¤ºä¸å­˜åœ¨çš„æ•°æ®ç±»å‹ å‡½æ•°æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™å°±å¯ä»¥ç”¨never // neveræ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œå¯ä»¥èµ‹å€¼ç»™ä»»ä½•çš„ç±»å‹function error(message: string): never &#123; throw new Error(message)&#125;function fail() &#123; return error(\"something error\");&#125;// æ— é™å¾ªç¯ï¼Œå‡½æ•°ä¸èƒ½ç»“æŸï¼Œä¹Ÿå¯ä»¥è¿”å›neverfunction inifiniteLoop(): never &#123; while (true) &#123; &#125;&#125; object// è¡¨ç¤ºéåŸå§‹ç±»å‹declare function create(o: object | null): void;create(&#123;prop: 0&#125;); æ³¨æ„ï¼šå½“æ²¡æœ‰å°†å˜é‡å£°æ˜ä¸ºæŸä¸ªåŸºæœ¬ç±»å‹æ—¶ï¼ŒTypeScript ä¼šè¿›è¡Œç±»å‹æ¨æ–­ï¼Œå¦‚ let str = 'hello'; // str ä¼šè¢«æ¨æ–­ä¸º string ç±»å‹ å¦‚ä¸Šï¼Œå˜é‡ str ä¼šè¢«æ¨æ–­ä¸º string ç±»å‹ï¼Œè¿™æ—¶ str ä¸èƒ½è¢«èµ‹å€¼ä¸ºåˆ«çš„ç±»å‹ å¦‚æœå˜é‡åœ¨å£°æ˜æ—¶å¹¶æ²¡æœ‰è¢«èµ‹å€¼ï¼Œé‚£ä¹ˆå®ƒçš„ç±»å‹ä¼šè¢«æ¨æ–­ä¸º anyï¼Œè¿™æ—¶å®ƒå¯ä»¥è¢«èµ‹äºˆä»»ä½•ç±»å‹çš„å€¼ let str; // str è¢«æ¨æ–­ä¸º anyï¼Œå¯ä»¥ä¸ºèµ‹äºˆä»»ä½•ç±»å‹çš„å€¼str = 'hello';str = 2; é«˜çº§ç±»å‹æšä¸¾ç±»å‹æˆ‘ä»¬ä½¿ç”¨ enum æ¥å®šä¹‰æšä¸¾ç±»å‹ï¼Œå¦‚ enum Week &#123; Mon, Tue, Wen, Thu, Fri, Sat, Sun&#125; æšä¸¾ç±»å‹ä¼šè¢«ç¼–è¯‘ä¸ºä»é›¶é€’å¢çš„æ•°å­— var Week;(function (Week) &#123; Week[Week[\"Mon\"] = 0] = \"Mon\"; Week[Week[\"Tue\"] = 1] = \"Tue\"; Week[Week[\"Wen\"] = 2] = \"Wen\"; Week[Week[\"Thu\"] = 3] = \"Thu\"; Week[Week[\"Fri\"] = 4] = \"Fri\"; Week[Week[\"Sat\"] = 5] = \"Sat\"; Week[Week[\"Sun\"] = 6] = \"Sun\";&#125;)(Week || (Week = &#123;&#125;)); é€šè¿‡ç¼–è¯‘åçš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œæšä¸¾åå’Œæšä¸¾å€¼å¯ä»¥äº’ç›¸å¼•ç”¨ console.log(Week[0] === 'Mon'); // trueconsole.log(Week[1] === 'Tue'); // trueconsole.log(Week[2] === 'Wen'); // trueconsole.log(Week[3] === 'Thu'); // trueconsole.log(Week['Fri'] === 4); // trueconsole.log(Week['Sat'] === 5); // trueconsole.log(Week['Sun'] === 6); // true æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºæšä¸¾åæ‰‹åŠ¨èµ‹å€¼ï¼Œå¦‚ enum Week &#123; Mon = 1, Tue, Wen, Thu, Fri, Sat, Sun&#125; æˆ‘ä»¬ä¸º Mon æ‰‹åŠ¨èµ‹å€¼ä¸º 1ï¼Œæœªæ‰‹åŠ¨èµ‹å€¼çš„é¡¹ä¼šæ¥ç€ä¸Šä¸€é¡¹é€’å¢ï¼Œæ‰€ä»¥ Tue çš„å€¼ä¸º 2ï¼ŒWen çš„å€¼ä¸º 3ï¼Œä»¥æ­¤é€’å¢ã€‚å¦‚æœåé¢é€’å¢çš„æ•°å­—ä¸å‰é¢å®šä¹‰æ•°å­—é‡å¤äº†ï¼Œè¿™æ—¶æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œè€Œæ˜¯ä¼šè¦†ç›–ä¹‹å‰çš„é¡¹ enum Week &#123; Mon = 3, Tue = 1, Wen, Thu, Fri, Sat, Sun&#125; å¯è§ Thu çš„å€¼ä¹Ÿæ˜¯ 3ï¼Œè¿™ä¸ªæ—¶å€™å®ƒçš„å€¼ä¸ Mon é‡å¤äº†ï¼Œä½†æ˜¯æ­¤æ—¶ Week[3] çš„å€¼æ˜¯ Thu è€Œä¸æ˜¯ Monï¼Œå› ä¸ºåé¢çš„ Thu å°†å‰é¢çš„ Mon è¦†ç›–äº† var Week;(function (Week) &#123; Week[Week[\"Mon\"] = 3] = \"Mon\"; Week[Week[\"Tue\"] = 1] = \"Tue\"; Week[Week[\"Wen\"] = 2] = \"Wen\"; Week[Week[\"Thu\"] = 3] = \"Thu\"; // Week[3] è¢«é‡æ–°èµ‹å€¼ä¸ºäº†\"Thu\" Week[Week[\"Fri\"] = 4] = \"Fri\"; Week[Week[\"Sat\"] = 5] = \"Sat\"; Week[Week[\"Sun\"] = 6] = \"Sun\";&#125;)(Week || (Week = &#123;&#125;)); å‡½æ•°ç±»å‹å¯¹äºå‡½æ•°æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨å‡½æ•°ç±»å‹æ¥è§„èŒƒå®ƒï¼Œä¸€ä¸ªå‡½æ•°æœ‰è¾“å…¥å’Œè¾“å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹çš„å½¢å¼æ¥è¡¨ç¤ºå‡½æ•°ç±»å‹ (x: number, y:number) =&gt; number ä¸Šé¢å°±è§„èŒƒè¿™ä¸ªå‡½æ•°ç±»å‹çš„è¾“å…¥ä¸ºä¸¤ä¸ª number ç±»å‹çš„å‚æ•°ï¼Œè¾“å‡ºä¸º number ç±»å‹çš„å‚æ•°ï¼Œå¦‚ let add:(x: number, y:number) =&gt; number = (x, y) =&gt; &#123; return x + y;&#125; ä¸Šé¢çš„ add å‡½æ•°æ˜¯ä¸€ä¸ª (x: number, y:number) =&gt; number ç±»å‹çš„å‡½æ•°ï¼Œå®ƒå¿…é¡»æ¥å—ä¸¤ä¸ª number ç±»å‹çš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª number ç±»å‹çš„å‚æ•°ï¼Œå¦‚æœ add å‡½æ•°ä¸æ»¡è¶³æ­¤è§„åˆ™ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ åœ¨ä¸Šé¢ add è¿”å›çš„æ˜¯ä¸€ä¸ª string ç±»å‹çš„å€¼ï¼Œè€Œä¸æ˜¯ number ç±»å‹ï¼Œè¿™æ—¶ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚ ç°åœ¨è€ƒè™‘æœ‰ä¸€ä¸ªå‡æ³•å‡½æ•°ï¼Œå®ƒä¹Ÿæ»¡è¶³ä¸Šé¢çš„å‡½æ•°ç±»å‹ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¢«å£°æ˜å¦‚ä¸‹ let substract: (x: number, y: number) =&gt; number = (x, y) &#123; return x - y;&#125; å¦‚æœè¿˜æœ‰å¾ˆå¤šçš„å‡½æ•°ä¹Ÿæ»¡è¶³ä¸Šé¢çš„å‡½æ•°ç±»å‹çš„è¯ï¼Œé‚£æ˜¯ä¸æ˜¯æ¯æ¬¡éƒ½è¦å†™ä¸€èˆ¬å‡½æ•°ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä¸å¯ä»¥ä¸ºè¿™ä¸ªå‡½æ•°ç±»å‹èµ·ä¸€ä¸ªåˆ«åï¼Œè¿™æ ·æ–¹ä¾¿å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ type èµ·åˆ«åï¼Œå¦‚ä¸‹ type compute = (x: number, y: number) =&gt; number;let substract: compute = (x, y) &#123; return x - y;&#125;let add: compute = (x, y) &#123; return x + y;&#125; å¦‚æœè¿˜æœ‰åˆ«çš„å‡½æ•°æ—¶è¿™ä¸ªå‡½æ•°ç±»å‹çš„è¯ï¼Œæˆ‘ä»¬ä½¿ç”¨èµ·çš„åˆ«å compute è¿›è¡Œç”³æ˜å°±å¯ä»¥äº†ã€‚ å¦‚æœæˆ‘ä»¬ä½¿ç”¨åŒ¿åå‡½æ•°çš„å½¢å¼å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå®ƒä¼šè¿›è¡Œç±»å‹æ¨æ–­ï¼Œå¦‚ function add(x: number, y: number): number &#123; return x + y;&#125; é‚£ä¹ˆ add ä¼šè¢«è‡ªåŠ¨æ¨æ–­ä¸º (x: number, y:number) =&gt; numberï¼Œå¦‚æœå‚æ•°æ²¡æœ‰æ³¨æ˜ç±»å‹ï¼Œé‚£ä¹ˆä¼šè¢«æ¨æ–­ä¸º anyã€‚ è”åˆç±»å‹è”åˆç±»å‹è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹çš„ä¸€ç§ï¼Œå¦‚ä¸‹ let score: string | number; // score å¯ä»¥ä¸ºæ•°å­—ï¼Œä¹Ÿå¯ä»¥ä¸ºå­—ç¬¦ä¸²score = 97;score = \"97\"; // ä¸ä¼šæŠ¥é”™ å½“æˆ‘ä»¬ä¸ºè”åˆç±»å‹è¿›è¡Œèµ‹å€¼æ—¶ï¼Œä¼šæ ¹æ®ç±»å‹æ¨æ–­æ¨æ–­å‡ºä¸€ä¸ªç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è®¿é—®è¯¥ç±»å‹æ‰€æ‹¥æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ let score: string | number;score = \"97\"; // è¢«æ¨æ–­ä¸º string ç±»å‹score.length; // å¯ä»¥è®¿é—® string ç±»å‹çš„å±æ€§å’Œæ–¹æ³• å½“ TypeScript ä¸èƒ½ç¡®å®šè”åˆç±»å‹çš„å…·ä½“ç±»å‹æ—¶ï¼Œé‚£ä¹ˆåªèƒ½è®¿é—®è”åˆç±»å‹ä¸­è¿™äº›ç±»å‹çš„å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ function getLength(something: string|number): number &#123; return something.length;&#125; å› ä¸º something ä¸º string æˆ–è€… number ç±»å‹ï¼Œæ‰€ä»¥å®ƒåªèƒ½è®¿é—® string å’Œ number ç±»å‹å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å› ä¸º number ç±»å‹æ²¡æœ‰ length å±æ€§ï¼Œæ‰€ä»¥ä¸Šé¢ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹ æ¥å£æ¥å£å¯ä»¥çœ‹åšæ˜¯å¯¹è±¡çš„ç±»å‹ï¼Œæ¥å£è§„å®šäº†å¯¹è±¡çš„ç»“æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨ interface æ¥å®šä¹‰ä¸€ä¸ªæ¥å£ interface Person &#123; name: string; age: number;&#125; ä¸Šé¢æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå«åš Person çš„æ¥å£ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡æ—¶è¿™ä¸ªæ¥å£ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±å¿…é¡»å«æœ‰ name å’Œ age å±æ€§ï¼Œå¹¶ä¸” name å±æ€§çš„å€¼ä¸º stringï¼Œage å±æ€§çš„å€¼ä¸º numberï¼Œå¦‚ä¸‹ let person: Person = &#123; name: 'bob', age: 13&#125; å¯ä»¥è¯´æ¥å£è§„å®šäº†å¯¹è±¡çš„ç»“æ„ï¼Œå®šä¹‰äº†å¯¹è±¡æ‰€å¿…é¡»æ‹¥æœ‰çš„å±æ€§åï¼Œä¸èƒ½å¤šï¼Œä¹Ÿä¸èƒ½å°‘ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹ let person: Person = &#123; name: 'bob', age: 13, gender: 'male'&#125; person ä¸­å«æœ‰æ¥å£ Person ä¸æ›¾å®šä¹‰è¿‡çš„å±æ€§ genderï¼Œè¿™æ—¶å°±ä¼šæŠ¥é”™ å¯é€‰å±æ€§æœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸éœ€è¦å¯¹è±¡å®Œå…¨åŒ¹é…ä¸€ä¸ªå½¢çŠ¶ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å®šä¹‰å¯é€‰å±æ€§ï¼Œå®šä¹‰çš„è§„åˆ™å¦‚ä¸‹ interface Person &#123; name: string; age: number; gender?: string;&#125; åœ¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯é€‰å±æ€§ genderï¼Œè¿™ä¸ªæ—¶å€™ç±»å‹ä¸º Person çš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ gender å±æ€§ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ let person: Person = &#123; name: 'bob', age: 13, gender: 'male'&#125; æˆ–è€… let person: Person = &#123; name: 'bob', age: 13&#125; éƒ½æ˜¯å¯ä»¥çš„ã€‚ åªè¯»å±æ€§æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¯¹è±¡çš„æŸäº›å±æ€§åœ¨å®šä¹‰æ—¶è¢«èµ‹å€¼ï¼Œå¹¶ä¸”ä»¥åä¸èƒ½è¢«æ›´æ”¹ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™ä¸ªå±æ€§å®šä¹‰ä¸ºåªè¯»å±æ€§ã€‚æˆ‘ä»¬ä½¿ç”¨ readonly å®šä¹‰æŸä¸ªå±æ€§ä¸ºåªè¯»å±æ€§ interface Person &#123; readonly id: number; name: string; age: number;&#125; å½“å¯¹è±¡çš„ç±»å‹ä¸º Person æ—¶ï¼Œåœ¨åˆ›å»ºæ—¶è¦ä¸º id èµ‹å€¼(åˆå§‹åŒ–)ï¼Œå¹¶ä¸”è¿™æ—¶ id æ˜¯åªè¯»çš„ï¼Œä¸èƒ½è¢«æ”¹å˜ let tom: Person = &#123; id: 1, name: 'Tom', age: 3&#125;tom.id = 2; ä¸Šé¢æˆ‘ä»¬å°è¯•ä¿®æ”¹ tom å¯¹è±¡çš„ idï¼Œä½†æ˜¯å› ä¸º id æ˜¯åªè¯»çš„ï¼Œä¸èƒ½è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸Šé¢çš„ç¨‹åºä¼šæŠ¥é”™ ä»»æ„å±æ€§å¦‚æœæˆ‘ä»¬å¸Œæœ›æŸä¸ªæ¥å£å¯ä»¥æœ‰ä»»æ„çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ interface Person &#123; name: string; age?: number; [propName: string]: any;&#125; æˆ‘ä»¬å®šä¹‰äº† Person æ¥å£å¯ä»¥æœ‰ä»»æ„çš„å±æ€§ï¼Œè¯¥å±æ€§çš„é”®å€¼ä¸º string ç±»å‹ï¼Œå€¼ä¸º any ç±»å‹ã€‚ä¸€æ—¦å®šä¹‰äº†ä»»æ„å±æ€§ï¼Œé‚£ä¹ˆç¡®å®šå±æ€§å’Œå¯é€‰å±æ€§çš„ç±»å‹å¿…é¡»ä¸ºä»»æ„å±æ€§æ‰€è§„å®šçš„ç±»å‹çš„å­é›†ã€‚æ¯”å¦‚ä¿®æ”¹ä¸Šé¢çš„æ¥å£ interface Person &#123; name: string; age?: number; [propName: string]: string;&#125; å› ä¸º age çš„å€¼ç±»å‹ä¸º numberï¼Œè€Œä»»æ„å±æ€§è§„å®šçš„å€¼ç±»å‹ä¸º stringï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ ç±»ç±»å¯ä»¥çœ‹åšæ˜¯åˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿ï¼Œæˆ‘ä»¬ä½¿ç”¨ class æ¥å®šä¹‰ä¸€ä¸ªç±»ï¼Œä¸€ä¸ªç±»ä¸­æœ‰å±æ€§å’Œæ–¹æ³• class Person &#123; public name: string; public age: number; constructor(name:string, age: number) &#123; this.name = name; this.age = age; &#125;&#125;let tom = new Person(\"Tom\", 3); æˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»æ¥å¤§é‡çš„åˆ›å»ºå¯¹è±¡ã€‚åœ¨ç±»ä¸­æœ‰ä¸€ä¸ªæ–¹æ³• constructor()ï¼Œè¿™ä¸ªæ–¹æ³•å«åšæ„é€ å‡½æ•°ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ç”¨æ¥åˆå§‹åŒ–å±æ€§çš„ã€‚ ç±»çš„ç»§æ‰¿æˆ‘ä»¬ä½¿ç”¨ extends å…³é”®å­—æ¥å®ç°ç»§æ‰¿ class Person &#123; public name: string; public age: number; constructor(name:string, age: number) &#123; this.name = name; this.age = age; &#125;&#125;class Student extends Person &#123; public score: number; constructor(name: string, age: number, score: number) &#123; super(name, age); this.score = score; &#125;&#125; é€šè¿‡ç»§æ‰¿ï¼Œæˆ‘ä»¬å¤ç”¨çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚åœ¨ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨äº† superï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°åˆå§‹åŒ–çˆ¶ç±»çš„å±æ€§ã€‚ è®¿é—®æƒé™è®¿é—®æƒé™æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«ä¸º publicï¼Œprivateï¼Œprotected ä¸‰ç§ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯ public è®¿é—®æƒé™ï¼Œä½¿ç”¨è¯¥æƒé™ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«è®¿é—®åˆ°ï¼Œä¾‹å¦‚ class Person &#123; public name: string; public age: number; constructor(name:string, age: number) &#123; this.name = name; this.age = age; &#125;&#125;let tom = new Person(\"Tom\", 3);// å¯ä»¥ç›´æ¥è®¿é—®console.log(tom.name, tom.age); // Tom 3 å¦‚æœä½¿ç”¨ privateï¼Œé‚£ä¹ˆè¯¥å±æ€§åªèƒ½åœ¨ç±»å†…éƒ¨æ‰èƒ½è¢«è®¿é—®ï¼Œåœ¨ç±»çš„å¤–éƒ¨ä¸èƒ½è¢«è®¿é—®ï¼Œå¦‚ class Person &#123; private name: string; public age: number; constructor(name:string, age: number) &#123; this.name = name; this.age = age; &#125;&#125;let tom = new Person(\"Tom\", 3);console.log(tom.name, tom.age); æˆ‘ä»¬å°† name çš„è®¿é—®æƒé™ä¿®æ”¹ä¸ºäº† privateï¼Œè¿™ä¸ªæ—¶å€™ä¸èƒ½å†ç±»å¤–è¢«ç›´æ¥è®¿é—®ï¼Œæ‰€ä»¥ä¸Šé¢é€šè¿‡ tom.name è®¿é—®å±æ€§ name ä¼šæŠ¥é”™ å¦‚æœä½¿ç”¨ protected ä¿®é¥°ï¼Œé‚£ä¹ˆè¯¥å±æ€§åªèƒ½åœ¨è¯¥ç±»å†…éƒ¨åŠå…¶å­ç±»ä¸­æ‰èƒ½è¢«è®¿é—®ï¼Œé™¤æ­¤ä¹‹å¤–ä¸èƒ½è¢«è®¿é—®ï¼Œå¦‚ä¸‹ class Person &#123; protected name: string; public age: number; constructor(name:string, age: number) &#123; this.name = name; this.age = age; &#125;&#125;class Student extends Person &#123; public score: number; constructor(name: string, age: number, score: number) &#123; super(name, age); this.score = score; &#125; // åœ¨å­ç±»ä¸­å¯ä»¥è¢«è®¿é—® public getName(): string &#123; return this.name; &#125;&#125;let alice = new Student(\"Alice\", 4, 5);console.log(alice.getName()); // Alice// ä¸‹è¡Œè¯­å¥ä¼šæŠ¥é”™console.log(alice.name); å¦‚ä¸Šæ‰€ç¤ºï¼Œçˆ¶ç±» Person çš„ name å±æ€§ä½¿ç”¨ protected ä¿®é¥°ï¼Œæ‰€ä»¥åœ¨å­ç±» Student ä¸­å¯ä»¥è®¿é—®ï¼Œä½†æ˜¯åœ¨çˆ¶ç±»å’Œå­ç±»çš„å¤–éƒ¨ä¸èƒ½è®¿é—® é™æ€å±æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ static å…³é”®å£°æ˜é™æ€å±æ€§ä»¥åŠé™æ€æ–¹æ³•ï¼Œé™æ€å±æ€§å’Œæ–¹æ³•æ˜¯å±äºç±»çš„ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å¯¹è±¡ï¼Œä½¿ç”¨å±æ€§å’Œæ–¹æ³•è¦ä½¿ç”¨ç±»åè°ƒç”¨ï¼Œå¦‚ä¸‹ class Person &#123; public static max_age:number = 100; public name:string; public age:number; constructor(name:string, age:number) &#123; this.name = name; this.age = age; &#125;&#125;let person = new Person(\"Tom\", 15);// é€šè¿‡ç±»å¯¹è±¡è®¿é—®å®ä¾‹å±æ€§console.log(person.name); // Tom// é€šè¿‡ç±»è®¿é—®é™æ€å±æ€§console.log(Person.max_age); // 100 readonlyæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ readonly æ¥ä¿®é¥°ç±»çš„å±æ€§ï¼Œæ¥è¡¨ç¤ºè¯¥å±æ€§æ˜¯åªè¯»çš„ï¼Œåªæœ‰åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–è¯¥å±æ€§ï¼Œå¦‚ä¸‹ class Person &#123; public readonly name:string; public age:number; constructor(name:string, age:number) &#123; this.name = name; this.age = age; &#125;&#125;let person = new Person(\"Alice\", 12);person.name = \"Bob\"; åœ¨ä¸Šé¢æˆ‘ä»¬å£°æ˜äº† name å±æ€§ä¸º readonlyï¼Œè¡¨æ˜ name å±æ€§æ˜¯åªè¯»çš„ï¼Œä½†æ˜¯åœ¨åé¢æˆ‘ä»¬è¯•å›¾ä¿®æ”¹è¯¥å±æ€§ï¼Œè¿™ä¸ªæ—¶å€™å°†ä¼šæŠ¥é”™ å®ç°æ¥å£æ¥å£çš„å¦ä¸€ä¸ªä½œç”¨å°±æ˜¯å¯¹ç±»è¿›è¡ŒæŠ½è±¡ï¼Œä¸€ä¸ªç±»å¯ä»¥å®ç°æ¥å£ï¼Œå½“ç±»å®ç°æ¥å£æ—¶ï¼Œè¦æ±‚ç±»ä¸­å¿…é¡»æœ‰æ¥å£ä¸­å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ä¸‹ interface IPerson &#123; name: string; age: number; gender: string;&#125;class Person implements IPerson&#123; public name:string; public age:number; public gender: string; constructor(name:string, age:number, gender:string) &#123; this.name = name; this.age = age; this.gender = gender; &#125;&#125;let person = new Person(\"Alice\", 12, \"male\"); å…¶å®æˆ‘å¯¹æ¥å£çš„ç†è§£ï¼Œå…¶å®å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªæ ‡å‡†ã€‚å®šä¹‰äº†æ ‡å‡†ä¹‹åï¼Œå¯¹äºå…·ä½“çš„å®ç°å°±ä¸å…³å¿ƒäº†ï¼Œå¯ä»¥å’Œå…·ä½“çš„å®ç°è§£è€¦ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªæ“ä½œæ•°æ®åº“çš„å¯¹è±¡ï¼Œä½†æ˜¯å¯¹äºä¸åŒçš„å‚å®¶(æ•°æ®åº“)ï¼Œå…·ä½“æ€ä¹ˆæ“ä½œæ•°æ®åº“éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡ä¸èƒ½å†™æ­»æ˜¯æ€ä¹ˆç±»å‹ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å®šä¹‰æ“ä½œæ•°æ®åº“çš„æ ‡å‡†ï¼Œæ¯”å¦‚æ“ä½œæ•°æ®åº“çš„æ–¹æ³•åï¼Œæ–¹æ³•æ¥æ”¶çš„å‚æ•°ï¼Œè€Œå¯¹äºå…·ä½“çš„å®ç°åº”è¯¥ç”±å„è‡ªçš„äº§å•†ç¼–å†™ã€‚åªè¦è¿™äº›å‚å•†å®ç°äº†æˆ‘ä»¬çš„æ ‡å‡†ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥ç”¨ï¼Œç±»æ¯”è¿‡æ¥ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ ‡å‡†å°±æ˜¯æ¥å£ï¼Œè€Œå„è‡ªå‚å•†çš„å®ç°å°±æ˜¯å®ç°äº†æ¥å£çš„ç±»ã€‚ interface OperateDatabase &#123; save: () =&gt; void;&#125;function saveData(obj: OperateDatabase): void &#123; obj.save();&#125; åœ¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ“ä½œæ•°æ®åº“çš„æ¥å£ OperateDatabaseï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³• saveData()ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ¥å£ï¼Œæ³¨æ„è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šæ˜¯æŸä¸ªç‰¹å®šçš„å¯¹è±¡ç±»å‹ï¼Œå¦åˆ™çš„å°±ä¼šä¸è¯¥ç±»å‹ç»‘å®šåœ¨ä¸€èµ·ã€‚æ¥ç€æˆ‘ä»¬å¯ä»¥ä¸¤ä¸ªç±»å®ç°è¯¥æ¥å£ class MysqlDatabase implements OperateDatabase &#123; save() &#123; console.log(\"mysql ä¿å­˜æ•°æ®\"); &#125;&#125;class RedisDatabase implements OperateDatabase &#123; save() &#123; console.log(\"redis ä¿å­˜æ•°æ®\"); &#125;&#125; è¿™ä¸¤ä¸ªç±»å°±ç›¸å½“äºæ˜¯è¿™ä¸ªæ ‡å‡†çš„å…·ä½“å®ç°ã€‚å½“æˆ‘ä»¬è°ƒç”¨ saveData æ–¹æ³•æ—¶ï¼Œå°†å…·ä½“çš„å®ç°ç±»ä¼ å…¥å³å¯ saveData(new MysqlDatabase()); // mysql ä¿å­˜æ•°æ®saveData(new RedisDatabase()); // redis ä¿å­˜æ•°æ® å£°æ˜åˆå¹¶å‡½æ•°çš„åˆå¹¶ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å°†ä¼ å…¥çš„æ•°å­—æˆ–è€…å­—ç¬¦ä¸²åè½¬ï¼Œæ¯”å¦‚è¾“å…¥ 123ï¼Œåˆ™è¾“å‡º 321ï¼Œè¾“å…¥ helloï¼Œåˆ™è¾“å‡º ollehï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ç±»å¦‚ä¸‹ function reverse(x: number | string): number|string&#123; if (typeof x === 'number') &#123; return Number(x.toString().split('').reverse().join('')); &#125; else &#123; return x.toString().split('').reverse().join(''); &#125;&#125; è¿™ä¸ªå‡½æ•°çš„å®šä¹‰æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œä¸èƒ½ç²¾ç¡®çš„è¡¨è¾¾è¾“å…¥æ•°å­—æ—¶ï¼Œè¾“å‡ºä¹Ÿæ˜¯æ•°å­—ï¼Œè¾“å…¥æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œè¾“å‡ºä¹Ÿæ˜¯å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å¯ä»¥é‡è½½ reverse çš„å¤šä¸ªå®šä¹‰ function reverse(x: number): number;function reverse(x: string): string;function reverse(x: number | string): number|string&#123; if (typeof x === 'number') &#123; return Number(x.toString().split('').reverse().join('')); &#125; else &#123; return x.toString().split('').reverse().join(''); &#125;&#125; æ¥å£çš„åˆå¹¶å½“æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªç›¸åŒåå­—çš„æ¥å£æ—¶ï¼Œæ¥å£ä¸­çš„å±æ€§ä¼šè‡ªåŠ¨è¿›è¡Œåˆå¹¶ interface Person &#123; name: string;&#125;interface Person &#123; age: number;&#125; ç›¸å½“äº interface Person &#123; name: string; age: number;&#125; å¦‚æœä¸¤ä¸ªæ¥å£æœ‰ç›¸åŒçš„å±æ€§ï¼Œåªè¦å®ƒä»¬è¿”å›çš„å€¼çš„ç±»å‹ç›¸åŒï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ï¼Œå¦‚ä¸‹ interface Person &#123; name: string; gender: string;&#125;interface Person &#123; age: number; gender:string;&#125; åœ¨ä¸¤ä¸ªæ¥å£ä¸­ï¼Œå®ƒä»¬æœ‰ç›¸åŒçš„å±æ€§å genderï¼Œå¹¶ä¸”å®ƒä»¬çš„å®šä¹‰æ—¶ä¸€æ ·çš„ï¼Œå®ƒä»¬çš„åˆå¹¶ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œç›¸å½“äºå¦‚ä¸‹ interface Person &#123; name: string; age: number; gender:string;&#125; ä½†æ˜¯å¦‚æœæœ‰ç›¸åŒçš„å±æ€§ï¼Œä½†æ˜¯å®šä¹‰å´ä¸åŒï¼Œå³å€¼çš„ç±»å‹ä¸åŒï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ interface Person &#123; name: string; gender: string;&#125;interface Person &#123; age: number; gender:number;&#125; ä¸Šé¢ä¸¤ä¸ªæ¥å£çš„ gender çš„å®šä¹‰ä¸åŒï¼ŒæŠ¥é”™å¦‚ä¸‹ ç±»å‹æ–­è¨€æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªä¸ç¡®å®šçš„ç±»å‹æ–­è¨€ä¸ºå…·ä½“çš„ç±»å‹ï¼Œæ¯”å¦‚å°†ä¸€ä¸ªè”åˆç±»å‹æ–­è¨€ä¸ºå…¶ä¸­çš„æŸä¸€ä¸ªå…·ä½“çš„ç±»å‹ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨å®ƒç‰¹æœ‰çš„æ–¹æ³•ã€‚ç±»å‹æ–­è¨€çš„è¯­æ³•ä¸º å€¼ as ç±»å‹ æˆ–è€… &lt;ç±»å‹&gt;å€¼ ä¸Šé¢ä¸¤ç§æ–¹æ³•éƒ½æ˜¯å°†å€¼æ–­è¨€ä¸ºæŸä¸ªå…·ä½“çš„ç±»å‹ã€‚å› ä¸ºåœ¨ React ä¸­åªæ”¯æŒ as è¯­æ³•ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ã€‚ è”åˆç±»å‹æ–­è¨€ä¸ºå…¶ä¸­å…·ä½“ç±»å‹å°±å¦‚ä¸Šé¢æ‰€è¯´ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å°†è”åˆç±»å‹æ–­è¨€ä¸ºå…·ä½“çš„ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç±»å‹ç‰¹æœ‰çš„æ–¹æ³•ï¼Œå¦åˆ™åªèƒ½ä½¿ç”¨äºŒè€…å…¬å…±çš„æ–¹æ³•ã€‚æˆ‘ä»¬ç¬¬ä¸€ä¸ªå½¢çŠ¶ç±»å‹ interface Circle &#123; radius: number;&#125;interface Square &#123; size: number;&#125;interface Rectangle &#123; width: number; height: number;&#125;type Shape = Circle | Square | Rectangle; æ¥ç€æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ Shape ç±»å‹çš„å‚æ•°ï¼Œè¿”å›é¢ç§¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™ä¹ˆå†™ function getArea(s: Shape): number &#123; if (typeof s.radius === 'number') &#123; return 3.14159 * s.radius * s.radius; &#125; else if (typeof s.size === 'number') &#123; return s.size * s.size; &#125; else &#123; return s.width * s.height; &#125;&#125; ä½†æ˜¯ä½ ä¼šå‘ç°ä¸€ç‰‡æŠ¥çº¢ å› ä¸ºä¼ å…¥çš„ç±»å‹ s æ ¹æœ¬æ— æ³•ç¡®å®šæ˜¯ä»€ä¹ˆå…·ä½“çš„ç±»å‹ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—® Circle, Square, Rectangle çš„å…¬å…±å±æ€§å’Œæ–¹æ³•ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è®¿é—®ä»–ä»¬ç‰¹æœ‰çš„å±æ€§æ—¶å°±ä¼šæŠ¥é”™ï¼Œæ¯”å¦‚ s.radiusï¼Œæ‰€ä»¥åœ¨è®¿é—®å…·ä½“çš„å±æ€§è¿›è¡Œåˆ¤æ–­æ—¶ï¼Œæˆ‘ä»¬è¦æ–­è¨€ä¸ºå…·ä½“çš„ç±»å‹ï¼Œä¿®æ”¹å¦‚ä¸‹ function getArea(s: Shape): number &#123; if (typeof (s as Circle).radius === 'number') &#123; s = s as Circle; return 3.14159 * s.radius * s.radius; &#125; else if (typeof (s as Square).size === 'number') &#123; s = s as Square; return s.size * s.size; &#125; else &#123; s = s as Rectangle; return s.width * s.height; &#125;&#125; æˆ‘ä»¬é¦–å…ˆè¿›è¡Œæ–­è¨€ä¸ºå…·ä½“çš„ç±»å‹ï¼Œç„¶åè¿›è¡Œåˆ¤æ–­ã€‚ çˆ¶ç±»æˆ–æ¥å£æ–­è¨€ä¸ºå­ç±»æˆ–å®ç°ç±»æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†çˆ¶ç±»æˆ–æ¥å£æ–­è¨€ä¸ºå…·ä½“çš„å­ç±»ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨å­ç±»ç‰¹æœ‰çš„å±æ€§æˆ–æ–¹æ³•ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªçˆ¶ç±»å’Œä¸¤ä¸ªå­ç±» class Person &#123; name: string; age: number; constructor(name: string, age: number) &#123; this.name = name; this.age = age; &#125;&#125;class Student extends Person&#123; score: number; constructor(name:string, age: number, score: number) &#123; super(name, age); this.score = score; &#125;&#125;class Teacher extends Person&#123; level: number; constructor(name:string, age: number, level: number) &#123; super(name, age); this.level = level; &#125;&#125; æ¥ç€å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ Person ç±»å‹çš„å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ–­è¨€ä¸ºå…·ä½“çš„å­ç±»æ‰èƒ½ä½¿ç”¨å­ç±»çš„å±æ€§å’Œæ–¹æ³• function isStudent(p: Person) &#123; if (typeof (p as Student).score === 'number') &#123; return true; &#125; else &#123; return false; &#125;&#125;console.log(isStudent(new Student('Bob', 15, 100))); // true æ³›å‹åœ¨å®šä¹‰å‡½æ•°ã€ç±»å’Œæ¥å£æ—¶ï¼Œå¹¶ä¸å…·ä½“æŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªå ä½ç¬¦è¡¨ç¤ºç±»å‹ï¼Œå…·ä½“çš„ç±»å‹åœ¨ä½¿ç”¨çš„æ—¶å€™ä¼ å…¥å†³å®šã€‚ å‡½æ•°æ³›å‹æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ï¼Œæ•°ç»„ä¸­å­˜å‚¨çš„å…·ä½“ç±»å‹ç­‰åˆ°ä½¿ç”¨æ—¶ç¡®å®š function createArray&lt;T&gt;(length: number, defaultValue: T): Array&lt;T&gt; &#123; let x = new Array&lt;T&gt;(length); for (let i = 0; i &lt; length; i++) &#123; x.push(defaultValue); &#125; return x;&#125; è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ•°ç»„çš„é•¿åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼ã€‚è¯¥æ•°ç»„çš„ç±»å‹æˆ‘ä»¬ä½¿ç”¨æ³›å‹ T ä»£æ›¿ï¼Œå…·ä½“çš„ç±»å‹åœ¨ä½¿ç”¨æ—¶ç¡®å®šï¼Œå¦‚åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 5ï¼Œç±»å‹ä¸º numberï¼Œé»˜è®¤å€¼ä¸º 0 çš„æ•°ç»„ï¼Œå¦‚ä¸‹ let arr = createArray&lt;number&gt;(5, 0);console.log(arr); // [ &lt;5 empty items&gt;, 0, 0, 0, 0, 0 ] å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“æ³›å‹çš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„æ“ä½œå®ƒçš„å±æ€§å’Œæ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å¯¹è±¡æ³›å‹åšå‡ºçº¦æŸï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹å®šçš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¦‚è¦æ±‚æ³›å‹å¿…é¡»ç¬¦åˆæŸä¸ªæ¥å£ interface Length &#123; length: number;&#125;function getLength&lt;T extends Length&gt;(t: T):number &#123; return t.length;&#125; ä¸Šé¢æˆ‘ä»¬è¦æ±‚æ³›å‹ T ç»§æ‰¿äº†æ¥å£ Lengthï¼Œå³ä¼ å…¥çš„å¯¹è±¡ t å¿…é¡»å«æœ‰å±æ€§ length console.log(getLength(\"123\")); // 3 æ¥å£æ³›å‹åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ¥å£ä¸­ä½¿ç”¨æ³›å‹ interface CreateArrayFunc&lt;T&gt; &#123; (length: number, defaultValue: T): Array&lt;T&gt;&#125;let createArray: CreateArrayFunc&lt;number&gt;;createArray = function&lt;T&gt;(length: number, defaultValue: T) &#123; let x: T[] = []; for(let i = 0; i &lt; length; i++) &#123; x.push(defaultValue); &#125; return x;&#125;console.log(createArray(5, 3)); // [ 3, 3, 3, 3, 3 ] ç±»æ³›å‹æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç±»ä¸­ä½¿ç”¨æ³›å‹ class Stack&lt;T&gt; &#123; data: T[]; size: number; constructor(capacity: number) &#123; this.data = new Array&lt;T&gt;(capacity); this.size = 0; &#125; push (item: T): void &#123; this.data.push(item); this.size++; &#125; pop (): T &#123; this.size--; return this.data.pop() as T; &#125; printStack(): void &#123; console.log(this.data); &#125;&#125; æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Stack æ ˆï¼Œå®ƒé‡Œé¢å­˜å‚¨çš„ç±»å‹æ˜¯ä¸€ä¸ªæ³›å‹ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ç¡®å®šï¼Œå¦‚ä¸‹ // å®šä¹‰äº†ä¸€ä¸ªå­˜å‚¨ number ç±»å‹æ•°æ®çš„æ ˆ å®¹é‡ä¸º10let stack = new Stack&lt;number&gt;(10); stack.push(10);stack.push(5);stack.printStack(); // [ &lt;10 empty items&gt;, 10, 5 ] å‚è€ƒæ–‡çŒ® TypeScriptå…¥é—¨æ•™ç¨‹ TypeScriptå®‰åˆ©æŒ‡å—","tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/TypeScript/"}]},{"title":"JavaScriptä¹‹æ­£åˆ™è¡¨è¾¾å¼","date":"2020-05-27T16:00:00.000Z","path":"/JavaScriptä¹‹æ­£åˆ™è¡¨è¾¾å¼/","text":"åœ¨å­—ç¬¦ä¸²çš„å¤„ç†ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸è¦è¿›è¡Œå­—ç¬¦ä¸²çš„åŒ¹é…ï¼Œæ ¡éªŒç­‰ç­‰æ“ä½œã€‚æ¯”å¦‚æ ¡éªŒå­—ç¬¦ä¸²çš„æ ¼å¼æ˜¯å¦ç¬¦åˆé‚®ç®±ï¼Œç”µè¯å·ç çš„æ ¼å¼ï¼Œæ ¡éªŒå¯†ç æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œå¯†ç ä¸­æ˜¯å¦åŒ…å«æ•°å­—å’Œå­—æ¯ç­‰ç­‰ï¼›åˆæˆ–è€…åŒ¹é…å¾—åˆ°æŸç§è§„åˆ™çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸€äº›æ“ä½œå¦‚æœä½¿ç”¨å¸¸è§„çš„æ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œï¼Œä¼šèŠ±è´¹è¾ƒå¤§çš„ä»£ä»·ï¼ŒåŒ…æ‹¬æ—¶é—´å’Œç²¾åŠ›ã€‚ æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”¨æ¥è¡¨è¾¾å­—ç¬¦ä¸²çš„è§„åˆ™ï¼Œå®ƒå¯ä»¥æ£€éªŒå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæŸä¸ªç‰¹å®šçš„è§„åˆ™ï¼Œæˆ–è€…åŒ¹é…å­—ç¬¦ä¸²ä¸­ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ï¼Œåœ¨ä¸€èˆ¬çš„ä½¿ç”¨ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¸€èˆ¬ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ä¸­ç‰¹å®šçš„ä½ç½®ã€‚ æ­£åˆ™å¯¹è±¡JavaScript æ­£åˆ™å¯¹è±¡çš„åˆ›å»ºæœ‰ä¸¤ç§å¸¸è§çš„æ–¹æ³•ï¼Œä¸€æ˜¯ä½¿ç”¨ RegExp æ„é€ å‡½æ•°è¿›è¡Œåˆ›å»ºï¼ŒäºŒæ˜¯ä½¿ç”¨å­—é¢é‡çš„æ–¹æ³•è¿›è¡Œåˆ›å»ºï¼Œå¦‚ä¸‹ let regex1 = new RegExp('hello', 'g');let regex2 = /hello/g; å…¶ä¸­ hello è¡¨ç¤ºå­—ç¬¦ä¸²çš„è§„åˆ™ï¼Œç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„&quot;hello&quot;ï¼Œg è¡¨ç¤ºè¿›è¡Œå…¨å±€åŒ¹é…(global)ï¼Œåƒè¿™æ ·çš„æ ‡å¿—è¿˜æœ‰ä¸¤ä¸ªï¼Œm è¡¨ç¤ºè¿›è¡Œå¤šè¡ŒåŒ¹é…(multiline)ï¼Œi è¡¨ç¤ºå¿½ç•¥å¤§å°å†™(ignoreCase)ï¼Œè¿™ä¸‰ä¸ªæ ‡å¿—äº’ä¸å†²çªï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œå¦‚ let regex = /hello/igm; å…·ä½“æ ‡å¿—çš„ä½œç”¨åœ¨åé¢è®²è§£ã€‚åœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨å­—é¢é‡çš„å½¢å¼åˆ›å»ºæ­£åˆ™å¯¹è±¡ï¼Œç›¸å¯¹äºä½¿ç”¨æ„é€ å‡½æ•°ï¼Œå­—é¢é‡çš„åˆ›å»ºæ¯”è¾ƒç®€ä¾¿ï¼Œä¸è¿‡å¦‚æœéœ€è¦åŠ¨æ€çš„åˆ›å»ºæ­£åˆ™å¯¹è±¡ï¼Œæˆ–è€…æ ¹æ®å­—ç¬¦ä¸²åˆ›å»ºæ­£åˆ™å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼ã€‚ æ­£åˆ™å¯¹è±¡ä¸­çš„å±æ€§ globalï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦è®¾ç½®äº† g æ ‡å¿— ignoreCaseï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦è®¾ç½®äº† i æ ‡å¿— lastIndexï¼šæ•´æ•°ï¼Œä»å­—ç¬¦ä¸²çš„æŸä¸ªä½ç½®å¼€å§‹åŒ¹é…ï¼Œé»˜è®¤ä¸º 0 multilineï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦è®¾ç½®äº† m æ ‡å¿— sourceï¼šæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²è¡¨ç¤º let regex = /\\d&#123;3&#125;hello$/ig;console.log(regex.global); // trueconsole.log(regex.ignoreCase); // trueconsole.log(regex.multiline); // falseconsole.log(regex.lastIndex); // 0console.log(regex.source); // \\d&#123;3&#125;hello$ æ­£åˆ™å¯¹è±¡ä¸­çš„æ–¹æ³•testtest()ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥åˆ¤æ–­è¯¥å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæ­£åˆ™å¯¹è±¡çš„è§„åˆ™ï¼Œå¦‚ä¸‹ let regex = /hello/g;let string1 = \"hello world\";let string2 = \"Hello World\";console.log(regex.test(string1)); // trueconsole.log(regex.test(string2)); // false execexec() æ–¹æ³•æ˜¯ç”¨æ¥æ•è·åŒ¹é…åˆ°çš„å­—ç¬¦ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬ä¸€é¡¹è¡¨ç¤ºä¸æ•´ä¸ªæ¨¡å¼åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œç¬¬äºŒé¡¹è¡¨ç¤ºç¬¬ä¸€ä¸ªæ•è·ç»„(æ•è·ç»„çš„æ¦‚å¿µå¦‚æœä¸æ‡‚ï¼Œå¯ä»¥çœ‹äº†æ‹¬å·çš„ä½œç”¨åœ¨å›æ¥çœ‹)ï¼Œç¬¬ä¸‰é¡¹è¡¨ç¤ºç¬¬äºŒä¸ªæ•è·ç»„ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿”å›çš„æ•°ç»„ä¸æ™®é€šæ•°ç»„ä¸åŒçš„æ˜¯ï¼Œè¯¥æ•°ç»„è¿˜æœ‰ä¸‰ä¸ªå±æ€§ï¼Œindex ã€ input å’Œ groupsï¼Œindex è¡¨ç¤ºåŒ¹é…åˆ°çš„å­—ç¬¦åœ¨åŸå§‹å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼Œä» 0 å¼€å§‹ï¼›input è¡¨ç¤ºè¾“å…¥çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œgroups è¡¨ç¤ºæ•è·ç»„çš„åç§°ã€‚ let regex = /(he)(ll)(o)/g;let string = \"so hello\";let result = regex.exec(string);console.log(result); è¾“å‡ºä¸º [ 'hello', 'he', 'll', 'o', index: 3, input: 'so hello', groups: undefined] å¦‚æœæ­£åˆ™å¯¹è±¡çš„æ ‡å¿—æœ‰ g çš„è¯ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œ exec() æ–¹æ³•åä¼šæ”¹å˜ lastIndex ä¸ºåŒ¹é…å­—ç¬¦ä¸²åå­—ç¬¦çš„ indexï¼Œæ¥ä¸‹æ¥å†æ¬¡æ‰§è¡Œ exec() æ–¹æ³•æ—¶å°†ä¼šä» lastIndex å¤„å¼€å§‹åŒ¹é…ï¼Œå¦‚ let string = \"ab abc abc\";let regex = /ab/g;console.log(regex.lastIndex); // 0regex.exec(string);console.log(regex.lastIndex); // 2regex.exec(string);console.log(regex.lastIndex); // 5regex.exec(string);console.log(regex.lastIndex); // 9regex.exec(string); // åŒ¹é…ä¸åˆ°ä¼šè¿”å› nullconsole.log(regex.lastIndex); // é‡æ–°å˜ä¸º 0 æ„é€ å‡½æ•°RegExpçš„å±æ€§æ„é€ å‡½æ•° RegExp ä¸­æœ‰ä¸€äº›é™æ€å±æ€§ï¼Œè¿™äº›å±æ€§ä¼šä¿å­˜æœ€è¿‘ä¸€æ¬¡æ­£åˆ™å¯¹è±¡æ“ä½œçš„ä¸€äº›ä¿¡æ¯ï¼Œå¹¶ä¸”è¿™äº›å±æ€§æœ‰ä¸¤ç§æ–¹æ³•è®¿é—®ï¼Œä¸€ç§æ˜¯å…·æœ‰è¯­ä¹‰çš„é•¿å±æ€§åï¼Œä¸€ç§æ˜¯ç®€çŸ­çš„çŸ­å±æ€§åï¼Œå…·ä½“å¦‚ä¸‹ï¼š inputï¼šçŸ­å±æ€§åä¸º $_ï¼Œæœ€è¿‘ä¸€æ¬¡è¦åŒ¹é…çš„å­—ç¬¦ä¸² lastMatchï¼š$&amp;ï¼Œæœ€è¿‘ä¸€æ¬¡çš„åŒ¹é…é¡¹ leftContextï¼š$`ï¼Œ input ä¸­ lastMatch çš„å·¦è¾¹éƒ¨åˆ† rightContextï¼š$&#39;ï¼Œinput ä¸­ lastMatch çš„å³è¾¹éƒ¨åˆ† $1, $2, ...ï¼šåé¢ä»‹ç» let regex = /hello/g;let string = \"he hello llo\";regex.exec(string);console.log(RegExp.input); // he hello lloconsole.log(RegExp.lastMatch); // helloconsole.log(RegExp.leftContext); // he_ (ä»_è¡¨ç¤ºç©ºæ ¼)console.log(RegExp.rightContext); // _llo å­—ç¬¦ä¸²æ–¹æ³•åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œæœ‰è®¸å¤šçš„æ–¹æ³•ä¹Ÿæ˜¯ä¸æ­£åˆ™è¡¨è¾¾å¼æœ‰å…³çš„ï¼Œå¦‚ replaceï¼Œmatchï¼Œä¸‹é¢å°±ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚ replacereplace() æ–¹æ³•çš„ä½œç”¨æ˜¯ä½¿ç”¨æ–°çš„å­—ç¬¦ä¸²æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„æŸäº›å†…å®¹ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­è¦è¢«æ›¿æ¢çš„å†…å®¹ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²æˆ–è€…æ˜¯ä¸€ä¸ªæ­£åˆ™å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ç”¨æ¥æ›¿æ¢ç¬¬ä¸€ä¸ªå‚æ•°çš„ï¼Œå¦‚ let string = \"gello\";string = string.replace('g', 'h'); // å°† string ä¸­çš„ g æ›¿æ¢ä¸º hconsole.log(string); // hello let string = \"abc\";string = string.replace(/[ab]/g, '#'); // å°†å­—ç¬¦ä¸²ä¸­çš„ a æˆ– b æ›¿æ¢ä¸º #console.log(string); // ##c åœ¨ä¸Šé¢ä¸­ä½¿ç”¨äº† [ab]ï¼Œè¿™ä¸ªè¡¨ç¤º a æˆ–è€… bï¼Œå…·ä½“ä¼šåœ¨å…ƒå­—ç¬¦é‚£é‡Œè®²è§£ã€‚ matchmatch æ–¹æ³•çš„ä½œç”¨ä¸ exec çš„ä½œç”¨å·®ä¸å¤šï¼Œä¸è¿‡ä¸€ä¸ªæ˜¯ RegExp å¯¹è±¡çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ String å¯¹è±¡çš„æ–¹æ³•ã€‚match æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ­£åˆ™å¯¹è±¡ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ ¹æ®æ­£åˆ™å¯¹è±¡æ˜¯å¦è®¾ç½®äº† g æ ‡å¿—ï¼Œè¿”å›çš„ç»“æœä¹Ÿä¸ç›¸åŒã€‚ å¦‚æœæ²¡æœ‰è®¾ç½® g æ ‡å¿—ï¼Œå³ä¸ä¼šå…¨å±€åŒ¹é…ï¼Œåªä¼šåŒ¹é…ä¸€æ¬¡ï¼Œé‚£ä¹ˆå®ƒè¿”å›çš„ç»“æœä¸ exec è¿”å›çš„ç»“æœç›¸åŒï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¡¨ç¤ºåŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œåé¢çš„å…ƒç´ è¡¨ç¤ºæ•è·ç»„ï¼Œå¹¶ä¸”ä¹Ÿæœ‰ inputï¼Œindexï¼Œgroupsç­‰å±æ€§ï¼Œè¡¨ç¤ºçš„å«ä¹‰ä¹Ÿç—› execï¼Œå¦‚ä¸‹ let string = \"hello\";let result = string.match(/(?&lt;h&gt;he)(?&lt;l&gt;ll)(o)/);console.log(result); è¾“å‡ºä¸º [ 'hello', 'he', 'll', 'o', index: 0, input: 'hello', groups: [Object: null prototype] &#123; h: 'he', l: 'll' &#125;] è¿™æ¬¡çš„æ­£åˆ™è¡¨è¾¾å¼è·Ÿä»¥å¾€çš„ä¸åŒï¼Œè¿™æ¬¡æˆ‘è®¾ç½®äº†æ•è·ç»„çš„åç§°ï¼Œå¦‚ (?&lt;h&gt;he) å³å°†æ•è·ç»„ (he) çš„åç§°è®¾ç½®ä¸ºäº† hï¼Œè®¾ç½®æ•è·ç»„åç§°çš„æ ¼å¼å¦‚ä¸‹ (?&lt;æ•è·ç»„åç§°&gt;æ•è·ç»„å†…å®¹) ä¸ºæ•è·ç»„è®¾ç½®åç§°ï¼Œå¯ä»¥æ–¹ä¾¿åœ¨åé¢è¿›è¡Œå¼•ç”¨ã€‚ å¦‚æœè®¾ç½®äº† g æ ‡å¿—ï¼Œè¿™æ—¶è¿”å›å€¼ä¸ exec æ–¹æ³•å°±ä¸åŒäº†ï¼Œå®ƒä¼šå°†å­—ç¬¦ä¸²ä¸­æ‰€æœ‰ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼è§„åˆ™çš„å†…å®¹éƒ½åŒ¹é…å‡ºæ¥ï¼Œå¹¶æ”¾å…¥æ•°ç»„ä¸­ï¼Œå¦‚ let string = \"hello\";let re = /(?&lt;h&gt;he)(?&lt;l&gt;ll)(o)/g;let result = string.match(re);console.log(result); // [ 'hello' ]string = \"hello helloworld\";result = string.match(re);console.log(result); // [ 'hello', 'hello' ] è¿™æ—¶è®¾ç½®çš„æ•è·ç»„çš„ä¿¡æ¯å°±æå–ä¸åˆ°äº†ï¼Œæ‰€ä»¥ä»æŸç§ç¨‹åº¦ä¸Šè¯´ï¼Œexec çš„åŠŸèƒ½æ¯” match æ›´åŠ çš„å¼ºå¤§ï¼Œä¸è¿‡ exec å¹¶ä¸èƒ½ä¸€æ¬¡æå–å‡ºå­—ç¬¦ä¸²ä¸­æ‰€æœ‰ç¬¦åˆè§„åˆ™çš„å†…å®¹ï¼Œè€Œæ˜¯éœ€è¦åšä¸€ä¸ªå¾ªç¯ï¼Œå¦‚ä¸‹ let string = \"hello helloworld\";let re = /(?&lt;h&gt;he)(?&lt;l&gt;ll)(o)/g;let result;let results = new Array();// å½“ re.exec()ä¸ä¸º null æ—¶while (result = re.exec(string)) &#123; results.push(result[0]); // result ä¸­è¿˜åŒ…å«äº†æ•è·ç»„çš„ä¿¡æ¯&#125;console.log(results); // [ 'hello', 'hello' ] å­—ç¬¦åŒ¹é…ä¸Šé¢ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…éƒ½æ˜¯è¿›è¡Œç²¾ç¡®çš„åŒ¹é…ï¼Œå¦‚ /hello/ï¼ŒåŒ¹é…å­—ç¬¦ä¸²ä¸­çš„ hello å†…å®¹ï¼Œè¿™æ ·æˆ‘ä»¬æ ¹æœ¬æ— æ³•é¢†ä¼šåˆ°æ­£åˆ™è¡¨è¾¾å¼çš„å¼ºå¤§ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ­£æ˜¯å¼ºå¤§åœ¨å®ƒæ¨¡ç³ŠåŒ¹é…çš„èƒ½åŠ›ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ Windows ä¸­è¿›è¡Œæ–‡ä»¶æŸ¥æ‰¾ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¸è®°å¾—æ–‡ä»¶çš„å…·ä½“åç§°ï¼Œæ¯”å¦‚å¿˜äº†æŸä¸ªå­—æ¯ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šç”¨ . å»è¡¨ç¤ºä»»æ„çš„å­—æ¯å»è¿›è¡ŒæŸ¥æ‰¾ã€‚ç°åœ¨æˆ‘ä»¬å°±æ¥è®²è®²æ­£åˆ™è¡¨è¾¾å¼æ¨¡ç³ŠåŒ¹é…çš„èƒ½åŠ›ã€‚ å­—ç¬¦ç»„åœ¨è¿›è¡ŒåŒ¹é…çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬ä¸ç¡®å®šæŸä¸ªä½ç½®çš„å­—ç¬¦æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¡¨ç¤ºç‰¹å®šå«ä¹‰çš„å­—ç¬¦æ¥å æ®è¿™ä¸ªä½ç½®ï¼Œæ¯”å¦‚ [abc] è¡¨ç¤ºè¿™ä¸ªä½ç½®æ˜¯ aï¼Œbï¼Œc ä¸­çš„æŸä¸ªå­—ç¬¦ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¡¨ç¤ºè¿™ä¸ªå­—ç¬¦æ˜¯å°å†™å­—æ¯ï¼ŒæŒ‰ç…§ä¸Šé¢çš„å†™æ³•ï¼Œä½ å¯èƒ½ä¼šè¿™ä¹ˆå†™ [abcdefghijklmnopqrstuvwxyz]ï¼Œè¿™æ ·çš„å†™æ³•æœ‰ç‚¹åäººç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŒƒå›´è¡¨ç¤ºæ³•æ¥ä»£æ›¿ä¸Šé¢çš„å†™æ³•ï¼Œå¦‚ [a-z] çš„å†™æ³•å°±è¡¨ç¤ºæ‰€æœ‰çš„å°å†™å­—æ¯ï¼ŒåŒç† [A-Z] å°±è¡¨ç¤ºæ‰€æœ‰çš„å¤§å†™å­—æ¯ï¼Œ[0-9] å°±è¡¨ç¤ºæ•°å­—ï¼Œ[0-9a-zA-Z] è¡¨ç¤ºè¿™ä¸ªä½ç½®å¯ä»¥æ˜¯æ•°å­—ï¼Œå°å†™å­—æ¯ï¼Œå¤§å†™å­—æ¯ã€‚å¦‚ä¸‹ let re = /[a-zA-Z0-9]/;console.log(re.test('0')); // trueconsole.log(re.test('s')); // trueconsole.log(re.test('S')); // trueconsole.log(re.test('?')); // false æˆ‘ä»¬å¯ä»¥åœ¨ [] ä¸­åŠ å…¥ ^ è¡¨ç¤ºå–åï¼Œå¦‚ [^0-9] è¡¨ç¤ºéæ•°å­—ï¼Œå³å®ƒå¯ä»¥åŒ¹é…æ‰€æœ‰çš„éæ•°å­— let re = /[^0-9]/;console.log(re.test(\"2\")); // falseconsole.log(re.test(\"a\")); // trueconsole.log(re.test(\"?\")); // true æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å…ƒå­—ç¬¦æ¥å æ®ä½ç½®ï¼Œæ¯”å¦‚ \\d å°±ä»£è¡¨æ•°å­—ï¼Œå®ƒçš„ä½œç”¨ä¸ [0-9] æ˜¯ä¸€æ ·çš„ï¼Œå¸¸è§çš„å…ƒå­—ç¬¦å¦‚ä¸‹æ‰€ç¤º(ä¸åŒ…å«è¡¨ç¤ºä½ç½®çš„å…ƒå­—ç¬¦ï¼Œè¡¨ç¤ºä½ç½®çš„å…ƒå­—ç¬¦åœ¨åé¢ä»‹ç») å…ƒå­—ç¬¦ å«ä¹‰ \\d è¡¨ç¤ºæ•°å­— \\s è¡¨ç¤ºç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ï¼Œå›è½¦ï¼Œåˆ¶è¡¨ç¬¦ç­‰ç­‰ \\w è¡¨ç¤ºæ•°å­—ï¼Œå¤§å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ï¼Œç›¸å½“äº [0-9a-zA-Z_] . è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ æ¥çœ‹å‡ ä¸ªä¾‹å­ // è¡¨ç¤ºæ•°å­—let re1 = /\\d/;console.log(re1.test(\"2\")); // true// ç©ºç™½å­—ç¬¦let re2 = /\\s/;console.log(re2.test(\" \")); // trueconsole.log(re2.test(\"\\t\")); // trueconsole.log(re2.test(\"\\n\")); // true// è¡¨ç¤ºå¤§å°å†™å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿let re3 = /\\w/;console.log(re3.test(\"2\")); // trueconsole.log(re3.test(\"a\")); // trueconsole.log(re3.test(\"A\")); // trueconsole.log(re3.test(\"_\")); // true ä¸åœ¨ [] ä¸­åŠ å…¥ ^è¡¨ç¤ºå–åï¼Œä¸Šé¢çš„å…ƒå­—ç¬¦ä¹Ÿæœ‰å¯¹åº”çš„å…ƒå­—ç¬¦è¡¨ç¤ºå–åçš„æ¦‚å¿µ å…ƒå­—ç¬¦ å«ä¹‰ \\D ä¸ \\d ç›¸åï¼Œè¡¨ç¤ºéæ•°å­— \\S ä¸ \\s ç›¸åï¼Œè¡¨ç¤ºéç©ºç™½å­—ç¬¦ \\W ä¸ \\w ç›¸åï¼Œè¡¨ç¤ºéå•è¯ let re1 = /\\D/;console.log(re1.test(\"2\")); // falseconsole.log(re1.test(\"\\n\")); // truelet re2 = /\\S/;console.log(re2.test(\" \")); // falseconsole.log(re2.test(\"9\")); // truelet re3 = /\\W/;console.log(re3.test(\"0\")); // falseconsole.log(re3.test(\"\\t\")); // true é‡è¯ç°åœ¨æˆ‘ä»¬å‡è®¾ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…ç”µè¯å·ç ï¼Œå‡è®¾ç”µè¯å·ç å°±æ˜¯ 11 ä½æ•°å­—ï¼Œæ‰€ä»¥å†™å‡ºæ¥çš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯è¿™æ ·çš„ \\d\\d\\d\\d\\d\\d\\d\\d\\d\\d\\dï¼Œè¿™ç§å†™æ³•ä¹Ÿç›¸å½“çš„åäººç±»ï¼Œä¸ä»…éš¾è¯»(éœ€è¦ä¸€ä¸ªä¸ªæ•°æ‰çŸ¥é“æœ‰å¤šå°‘ä¸ªæ•°)ï¼Œè€Œä¸”å†™èµ·æ¥ä¹Ÿéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é‡è¯æ¥ç®€å†™ä¸Šé¢çš„è¡¨è¾¾å¼ï¼Œå¦‚ \\d{11} å°±è¡¨ç¤º \\d è¿ç»­å‡ºç° 11 æ¬¡ï¼Œå¸¸è§çš„é‡è¯å†™æ³•å¦‚ä¸‹ é‡è¯ å«ä¹‰ {n} è¡¨ç¤ºè¿ç»­å‡ºç° n æ¬¡ {m,n} è¡¨ç¤ºè¿ç»­å‡ºç° m-nï¼Œæœ€å°‘å‡ºç° mï¼Œæœ€å¤šå‡ºç° n æ¬¡ {n,} è¡¨ç¤ºè¿ç»­å‡ºç°æœ€å°‘ n æ¬¡(åŒ…æ‹¬ n æ¬¡) * è¡¨ç¤ºè¿ç»­å‡ºç°ä»»æ„å¤šæ¬¡ + è¡¨ç¤ºè¿ç»­å‡ºç° 1 æ¬¡æˆ– 1 æ¬¡ä»¥ä¸Š ? è¡¨ç¤ºå‡ºç° 0 æ¬¡æˆ– 1 æ¬¡ // åŒ¹é…è¿ç»­å‡ºç°çš„ 5 ä½æ•°å­—let re = /\\d&#123;5&#125;/g;let string = \"123 1234 12345 654321\";console.log(string.match(re)); // [ '12345', '65432' ] // åŒ¹é…è¿ç»­å‡ºç°çš„ 2-3 ä½æ•°å­—let re = /\\d&#123;2,3&#125;/g;let string = \"12 123 1234\";console.log(string.match(re)); // [ '12', '123', '123' ] // åŒ¹é…è¿ç»­å‡ºç° 4 ä½åŠ 4 ä½ä»¥ä¸Šçš„æ•°å­—let re = /\\d&#123;4,&#125;/g;let string = \"12 123 1234 12345\";console.log(string.match(re)); // [ '1234', '12345' ] // b å¯ä»¥å‡ºç°ä»»æ„æ¬¡let re = /ab*c/g;let string = \"ac abc abbc abbbc\";console.log(string.match(re)); // [ 'ac', 'abc', 'abbc', 'abbbc' ] // b å‡ºç° 1 æ¬¡æˆ– 1 æ¬¡ä»¥ä¸Šlet re = /ab+c/g;let string = \"ac abc abbc abbbc\";console.log(string.match(re)); // [ 'abc', 'abbc', 'abbbc' ] // b å‡ºç° 0 æ¬¡æˆ– 1 æ¬¡let re = /ab?c/g;let string = \"ac abc abbc abbbc\";console.log(string.match(re)); è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é…æ‰€è°“çš„è´ªå©ªåŒ¹é…å°±æ˜¯å°½å¯èƒ½çš„å¤šåŒ¹é…ï¼Œå¦‚ let re = /ab+/g;let string = \"abbbb\";console.log(string.match(re)); // [ 'abbbb' ] æ˜æ˜åŒ¹é… ab ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯å®ƒä¼šå°½å¯èƒ½å¤šçš„åŒ¹é…ï¼Œè¿™å°±æ˜¯è´ªå©ªæ¨¡å¼ï¼Œä¸æ­¤ç›¸å¯¹çš„æ˜¯æƒ°æ€§åŒ¹é…ï¼Œæƒ°æ€§åŒ¹é…å°±æ˜¯åœ¨æ»¡è¶³æ¡ä»¶çš„æƒ…å†µä¸‹ä¼šå°½å¯èƒ½çš„å°‘åŒ¹é…ï¼Œå¦‚ä¸Šä¾‹å°±ä¼šåŒ¹é… abï¼Œåœ¨é»˜è®¤çš„æƒ…å†µä¸‹æ˜¯è´ªå©ªåŒ¹é…ï¼Œè¦ä½¿ç”¨æƒ°æ€§åŒ¹é…å°±è¦ä½¿ç”¨æƒ°æ€§é‡è¯ è´ªå©ª æƒ°æ€§ + +? * *? ? ?? {n,m} {n,m}? {n,} {n,}? let re = /ab+?/g;let string = \"abbbb\";console.log(string.match(re)); // [ 'ab' ] ç°åœ¨è€ƒè™‘æ ¹æ® html å­—ç¬¦ä¸²è·å¾—æŸ id å±æ€§ï¼Œå¦‚ &lt;div id=&quot;container&quot; class=&quot;active&quot;&gt;&lt;/div&gt;ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨è´ªå©ªåŒ¹é…çš„è¯ï¼Œè€ƒè™‘è¿™æ ·çš„åŒ¹é…è§„åˆ™ /id=&quot;.*&quot;/ï¼Œé‚£ä¹ˆæ•è·åˆ°çš„å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ let re = /id=\".*\"/;let string = \"&lt;div id=\\\"container\\\" class=\\\"active\\\"&gt;&lt;/div&gt;\";console.log(re.exec(string)[0]); // id=\"container\" class=\"active\" æˆ‘ä»¬å‘ç°åŒ¹é…åˆ°çš„æ˜¯ id=&quot;container&quot; class=&quot;active&quot;ï¼Œå› ä¸ºåœ¨è´ªå©ªæ¨¡å¼ä¸‹å†ç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹ä¼šå°½å¯èƒ½å¤šçš„åŒ¹é…ï¼Œæ‰€ä»¥ä¼šç›´æ¥åŒ¹é…åˆ°æœ€åä¸€ä¸ªåŒå¼•å·ï¼Œè§£å†³åŠæ³•æœ‰ä¸¤ç§ï¼Œå…¶ä¸­ç®€å•çš„è§£å†³åŠæ³•å°±æ˜¯ä½¿ç”¨æƒ°æ€§åŒ¹é… let re = /id=\".*?\"/;let string = \"&lt;div id=\\\"container\\\" class=\\\"active\\\"&gt;&lt;/div&gt;\";console.log(re.exec(string)[0]); // id=\"container\" å¦ä¸€ç§åŠæ³•å°±æ¯”è¾ƒ trickï¼Œæˆ‘è§‰å¾—åªå¯æ„ä¼šï¼Œéš¾ä»¥è¨€ä¼  let re = /id=\"[^\"]*\"/;let string = \"&lt;div id=\\\"container\\\" class=\\\"active\\\"&gt;&lt;/div&gt;\";console.log(re.exec(string)[0]); // id=\"container\" ä»”ç»†ä½“ä¼šä¸Šé¢çš„å†™æ³•å§ï¼Œæˆ‘è§‰å¾—å¾ˆå¥½ç”¨ï¼Œæ¯”å¦‚è·å¾—æŸæ ‡ç­¾çš„æ ‡ç­¾å let re = /&lt;[^&gt;]*&gt;/;let string = \"&lt;div&gt;&lt;/div&gt;\";console.log(re.exec(string)[0]); // &lt;div&gt; åˆ†æ”¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨å¤šä¸ªåˆ†æ”¯ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼Œæ¯”å¦‚åŒ¹é…åå…­è¿›åˆ¶è¡¨ç¤ºçš„é¢œè‰²ï¼Œæœ‰ä¸¤ç§è¡¨ç¤ºï¼Œä¸€ç§æ˜¯ #F4E242 å…­ä½çš„ï¼Œä¸€ç§æ˜¯ç®€å†™çš„ #FFF ä¸‰ä½è¡¨ç¤ºçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ | æ¥è¡¨ç¤ºæˆ–çš„å…³ç³» let regex = /#([0-9a-fA-F]&#123;6&#125;|[0-9a-fA-F]&#123;3&#125;)/g;let string1 = \"#FFF\";let string2 = \"#F34E23\"console.log(string1.match(regex)); // [ '#FFF' ]console.log(string2.match(regex)); // [ '#F34E23' ] æ‹¬å·çš„ä½œç”¨åˆ†ç»„ä¸åˆ†æ”¯å‡è®¾æˆ‘ä»¬è¦åŒ¹é… I love Java å’Œ I love C è¿™ä¸¤å¥è¯ï¼Œä½ å¯èƒ½ä¼šå†™å‡ºè¿™æ ·çš„æ­£åˆ™è¡¨è¾¾å¼ /I love Java|C/ ä½†æ˜¯è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤ºçš„æ˜¯ I love Java æˆ–è€… C è€Œä¸æ˜¯ I love Cï¼Œæ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯è¿™æ · /I love (Java|C)/ Java å’Œ C é€‰å…¶ä¸€ã€‚ æ•è·æ•°æ®å‡è®¾æˆ‘ä»¬è¦åŒ¹é…ä¸€ä¸ªæ ¼å¼ä¸º yyyy-mm-dd æ ¼å¼çš„æ—¥æœŸï¼Œå¹¶ä¸”å¸Œæœ›è·å¾—å¹´æœˆæ—¥ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè¿™ä¹ˆå†™ let re = /\\d&#123;4&#125;-\\d&#123;2&#125;-\\d&#123;2&#125;/;let string = \"2020-05-27\";let result = re.exec(string)[0]; // 2020-05-27let results = result.split(\"-\");console.log(\"year:\" + results[0]); // year:2020console.log(\"month:\" + results[1]); // month:05console.log(\"day:\" + results[2]); // day:27 å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ æ‹¬å·æ¥æ•è·æ•°æ®ï¼Œå¯¹äºè¢«æ‹¬å·åŒ…èµ·æ¥çš„æ•°æ®ï¼Œå…¶åŒ¹é…çš„å†…å®¹ä¼šè¢«æå–å‡ºæ¥ï¼Œæ·»åŠ åˆ°è¿”å›çš„æ•°ç»„ä¸­ï¼Œå¦‚ let re = /(\\d&#123;4&#125;)-(\\d&#123;2&#125;)-(\\d&#123;2&#125;)/;let string = \"2020-05-27\";let result = re.exec(string);console.log(\"year:\" + result[1]); // ç¬¬ä¸€ä¸ªæ•è·ç»„ \\d&#123;4&#125; åŒ¹é…çš„å†…å®¹console.log(\"month:\" + result[2]); // ç¬¬äºŒä¸ªæ•è·ç»„ \\d&#123;2&#125; åŒ¹é…çš„å†…å®¹console.log(\"day:\" + result[3]); // ç¬¬ä¸‰ä¸ªæ•è·ç»„ \\d&#123;2&#125; åŒ¹é…çš„å†…å®¹ ä¸Šé¢æˆ‘ä»¬å¯¹å¹´æœˆæ—¥çš„è§„åˆ™ä½¿ç”¨æ‹¬å·åŒ…äº†èµ·æ¥ï¼Œåœ¨è¿›è¡ŒåŒ¹é…æ—¶ï¼Œå¯¹åº”è¢«åŒ¹é…åˆ°çš„æ•°æ®ä¼šæ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œåœ¨ä»‹ç» exec æ–¹æ³•æ—¶ï¼Œå…¶è¿”å›çš„æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ è¡¨ç¤ºåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ï¼Œåé¢çš„å…ƒç´ è¡¨ç¤ºæ•è·ç»„(æ‹¬å·åŒ…èµ·æ¥)ä¸­æ•è·çš„å†…å®¹ã€‚ RegExpçš„å±æ€§$1â€¦é™¤äº†å¯ä»¥æ ¹æ®è¿”å›çš„æ•°ç»„ result æ¥å¾—åˆ°æ•è·çš„æ•°æ®ï¼Œè¿˜å¯ä»¥é€šè¿‡åœ¨ä¸Šé¢æè¿‡ä¸€å˜´çš„ RegExp æ„é€ å‡½æ•°çš„å±æ€§ $1, $2, $3 ... ç­‰ç­‰æ¥è·å¾—æ‰€æ•è·çš„å†…å®¹ï¼Œå…¶ä¸­ $1 è¡¨ç¤ºç¬¬ä¸€ä¸ªæ•è·ç»„æ‰€åŒ¹é…çš„å†…å®¹ï¼Œå¦‚ä¸‹ let re = /(\\d&#123;4&#125;)-(\\d&#123;2&#125;)-(\\d&#123;2&#125;)/;let string = \"2020-05-27\";let result = re.exec(string);console.log(\"year:\" + RegExp.$1); // year:2020console.log(\"month:\" + RegExp.$2); // month:05console.log(\"day:\" + RegExp.$3); // day:27 æ¯æ¬¡åœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…æ—¶ï¼ŒRegExp ä¸­çš„ $1, $2, $3 ... ä¹Ÿä¼šç›¸åº”çš„æ›´æ–°ã€‚ æ‹¬å·åµŒå¥—ç°åœ¨è€ƒè™‘å¦‚æœæ‹¬å·æœ‰åµŒå¥—çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸Šé¢æ—¥æœŸæ ¼å¼æ•è·æ›´ç²¾å‡†çš„è¡¨è¾¾å¼ /(\\d&#123;4&#125;)-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2]\\d)|(3[0-1]))/ ä¸Šé¢æ‹¬å·åµŒå¥—çš„å¾ˆå¤æ‚ï¼Œåœ¨åŸç†ä¸Šï¼Œè¢«æ‹¬å·åŒ…èµ·æ¥çš„è§„åˆ™æ‰€åŒ¹é…çš„å†…å®¹éƒ½ä¼šè¢«æ•è·ï¼Œé‚£ä¹ˆåµŒå¥—å¸¦æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œæ•è·çš„é¡ºåºå“ªä¸ªåœ¨å‰ï¼Œå“ªä¸ªåœ¨åï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œæ ¹æ®å·¦æ‹¬å·æ¥ï¼Œæ¯”å¦‚ä¸Šå¼ä¸­çš„æ•è·é¡ºåºä¸º (\\d{4}) ((0\\d)|(1[0-2])) (0\\d) (1[0-2]) ((0[1-9])|([1-2]\\d)|(3[0-1])) (0[1-9]) ([1-2]\\d) (3[0-1]) æ‰€ä»¥å¦‚æœä½¿ç”¨ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ•è·å¾—åˆ°å¹´æœˆæ—¥çš„ä¿¡æ¯ï¼Œæ ¹æ®åˆ†æå¹´æ˜¯ç¬¬ä¸€æ•è·ç»„ï¼Œæœˆæ˜¯ç¬¬äºŒæ•è·ç»„ï¼Œæ—¥æ˜¯ç¬¬äº”æ•è·ç»„ let re = /(\\d&#123;4&#125;)-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2]\\d)|(3[0-1]))/;let date = \"2020-05-27\";let result = re.exec(date);console.log(result[1], result[2], result[5]); // 2020 05 27 ç”±äºæ— ç”¨çš„æ•è·ç»„å¤ªå¤šï¼Œå¯¼è‡´æƒ³è¦æå–åŒ…å«ä¿¡æ¯çš„æ•è·ç»„è·å–å›°éš¾ï¼Œå…¶å®ä»”ç»†è§‚å¯Ÿï¼Œé‡Œé¢çš„å¤§å¤šæ•°æ‹¬å·ä¸»è¦æ˜¯ä¸ºåˆ†æ”¯åšå‡†å¤‡çš„ï¼Œå¯¹äºè¿™äº›æ•è·ç»„ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸æ•è·ï¼Œä»…ä»…ä½œä¸ºåˆ†æ”¯ä½¿ç”¨ï¼Œæˆ‘ä»¬åœ¨æ‹¬å·é‡Œé¢çš„å‰æ–¹åŠ å…¥ ?: è¡¨ç¤ºè¯¥æ‹¬å·åŒ¹é…çš„å†…å®¹ä¸è¿›è¡Œæ•è·ï¼Œå¦‚ä¸‹ let re = /(\\d&#123;4&#125;)-((?:0[1-9])|(?:1[0-2]))-((?:0[1-9])|(?:[1-2]\\d)|(?:3[0-1]))/;let date = \"2020-05-27\";let result = re.exec(date);console.log(result[1], result[2], result[3]); // 2020 05 27 å¦‚æœä½œä¸ºåˆ†æ”¯çš„æ‹¬å·å¤ªå¤šï¼Œä¸ºæ¯ä¸€ä¸ªåˆ†æ”¯æ·»åŠ  ?: ä¹Ÿæ¯”è¾ƒè´¹åŠ›ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ç»™åŒ…å«ä¿¡æ¯çš„æ•è·ç»„å‘½åï¼Œå‘½åçš„æ–¹æ³•åœ¨ä¸Šé¢æœ‰æåˆ°è¿‡ let re = /(?&lt;year&gt;\\d&#123;4&#125;)-(?&lt;month&gt;(0[1-9])|(1[0-2]))-(?&lt;day&gt;(0[1-9])|([1-2]\\d)|(3[0-1]))/;let date = \"2020-05-27\";let result = re.exec(date);let groups = result.groups;console.log(groups.year, groups.month, groups.day); // 2020 05 27 é€šè¿‡ç»™æ•è·ç»„å‘½åï¼Œå¯ä»¥æ–¹ä¾¿çš„é€šè¿‡ groups å¯¹è±¡å¾—åˆ°æƒ³è¦çš„æ•°æ®ã€‚ åå‘å¼•ç”¨ç°åœ¨å†æ¬¡è€ƒè™‘åŒ¹é…æ—¥æœŸï¼Œå·²çŸ¥ä¸‹é¢è¿™ä¸‰ç§æ—¥æœŸæ ¼å¼éƒ½å¯ä»¥ 2017-02-122017 02 122017/02/12 æ‰€ä»¥ä½ å¯èƒ½ä¼šå†™å‡ºè¿™æ ·çš„æ­£åˆ™è¡¨è¾¾å¼ /\\d&#123;4&#125;(-| |\\/)\\d&#123;2&#125;(-| |\\/)\\d&#123;2&#125;/ ç»è¿‡æµ‹è¯•ï¼Œå‘ç°èƒ½ç¬¦åˆè¦æ±‚ console.log(re.test(\"2017-02-17\")); // trueconsole.log(re.test(\"2017 02 17\")); // trueconsole.log(re.test(\"2017/02/17\")); // true ä½†æ˜¯ä½ ä¼šå‘ç°ä¸€äº›æ„å¤–çš„æƒ…å†µ console.log(re.test(\"2017-02/17\")); // trueconsole.log(re.test(\"2017-02 17\")); // trueconsole.log(re.test(\"2017 02-17\")); // true å‰åçš„åˆ†éš”ç¬¦ä¸ä¸€è‡´çš„æƒ…å†µä¹Ÿèƒ½å¤ŸåŒ¹é…ï¼Œè€Œæˆ‘ä»¬è¦æ±‚çš„æ˜¯å‰åçš„åˆ†éš”ç¬¦æ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•ç”¨åˆ†ç»„ï¼Œä½¿å¾—å‰é¢å’Œåé¢çš„åˆ†éš”ç¬¦æ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä¸‹ let re = /\\d&#123;4&#125;(-| |\\/)\\d&#123;2&#125;\\1\\d&#123;2&#125;/;console.log(re.test(\"2017-02-17\")); // trueconsole.log(re.test(\"2017 02 17\")); // trueconsole.log(re.test(\"2017/02/17\")); // trueconsole.log(re.test(\"2017-02/17\")); // falseconsole.log(re.test(\"2017-02 17\")); // falseconsole.log(re.test(\"2017 02-17\")); // false æ³¨æ„åˆ°æˆ‘ä»¬å¯¹äºåé¢çš„åˆ†ç»„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† \\1 å»è¿›è¡Œæ›¿ä»£ï¼Œ\\1 çš„æ„æ€å°±æ˜¯ä»£è¡¨å¼•ç”¨ç¬¬ä¸€ä¸ªåˆ†ç»„ï¼Œè¿™æ ·å°±å¯ä»¥åšåˆ°è¿™ä¸ªåœ°æ–¹ä¸å‰é¢çš„åˆ†ç»„ç›¸åŒã€‚åŒç†æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ \\2 è¡¨ç¤ºå¼•ç”¨ç¬¬äºŒä¸ªåˆ†ç»„(å¦‚æœæœ‰çš„è¯ï¼Œå¦‚æœæ²¡æœ‰å°±å•çº¯çš„è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸² &quot;\\2&quot;)ã€‚ ä½ç½®åŒ¹é…ç›¸å…³å…ƒå­—ç¬¦æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æœ€åä¸€ä¸ªå†…å®¹å°±æ˜¯å…³äºä½ç½®çš„åŒ¹é…ï¼Œä¸å­—ç¬¦åŒ¹é…ä¸åŒï¼Œä½ç½®åŒ¹é…æ—¶åŒ¹é…å­—ç¬¦é—´çš„ä½ç½®ï¼Œå¸¸è§æœ‰å…³ä½ç½®çš„å…ƒå­—ç¬¦å¦‚ä¸‹ å…ƒå­—ç¬¦ å«ä¹‰ ^ å¼€å¤´ä½ç½® $ ç»“å°¾ä½ç½® \\b å•è¯è¾¹ç•Œï¼Œå³ \\w ä¸ \\W ä¹‹é—´çš„ä½ç½® (?=p) åŒ¹é… p æ¨¡å¼å‰é¢çš„ä½ç½®ï¼Œå…·ä½“è§ä¾‹å­ (?&lt;=p) åŒ¹é… p æ¨¡å¼åé¢çš„ä½ç½® let string = \"[JS] hello\";let result = string.replace(/^/,\"#\");console.log(result); // #[JS] helloresult = string.replace(/$/, \"#\");console.log(result); // [JS] hello#result = string.replace(/\\b/g, \"#\"); // \\b æ˜¯ \\w ä¸ \\W ä¹‹é—´çš„ä½ç½®ï¼Œè¡¨ç¤ºå•è¯çš„è¾¹ç•Œconsole.log(result); // [#JS#] #hello#result = string.replace(/(?=hello)/, \"#\"); // hello å‰é¢çš„ä½ç½®console.log(result); // [JS] #helloresult = string.replace(/(?&lt;=hello)/, \"#\"); // hello åé¢çš„ä½ç½®console.log(result); // [JS] hello# åŒç†ï¼Œä¹Ÿæœ‰å…ƒå­—ç¬¦è¡¨ç¤ºä¸ä¸Šé¢ç›¸åçš„æ„ä¹‰ å…ƒå­—ç¬¦ å«ä¹‰ \\B ä¸ \\b ç›¸åï¼Œè¡¨ç¤ºéå•è¯è¾¹ç•Œ (?!p) ä¸ (?=p) ç›¸åï¼Œè¡¨ç¤ºä¸æ˜¯ p å‰é¢ä½ç½®çš„æ‰€æœ‰ä½ç½® (?&lt;!p) ä¸ (?&lt;=p) ç›¸åï¼Œè¡¨ç¤ºä¸æ˜¯ p åé¢ä½ç½®çš„æ‰€æœ‰ä½ç½® let string = \"[JS] hello\";let result = string.replace(/\\B/g,\"#\");console.log(result); // #[J#S]# h#e#l#l#oresult = string.replace(/(?!hello)/g, \"#\"); // ä¸æ˜¯ hello å‰é¢ä½ç½®çš„æ‰€æœ‰ä½ç½®console.log(result); // #[#J#S#]# h#e#l#l#o#result = string.replace(/(?&lt;!hello)/g, \"#\"); // ä¸æ˜¯ hello åé¢ä½ç½®çš„æ‰€æœ‰ä½ç½®console.log(result); // #[#J#S#]# #h#e#l#l#o åƒä½åˆ†éš”ç¬¦æ¡ˆä¾‹ç°åœ¨æ¥åšä¸€ä¸ªæ¡ˆä¾‹ï¼Œå°†æ•°å­—è½¬åŒ–ä¸ºåƒä½åˆ†éš”ç¬¦è¡¨ç¤ºæ³•ï¼Œå¦‚ 12345678 è½¬åŒ–ä¸º 12,345,678ï¼Œæˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°åä¸‰ä½æ•°å­—çš„å‰é¢ä½ç½®ï¼Œç„¶åæ·»åŠ é€—å·ï¼Œå¦‚ä¸‹ let string = \"12345678\";result = string.replace(/(?=(\\d&#123;3&#125;)$)/g,\",\");console.log(result); // 12345,678 è¿›ä¸€æ­¥å¼„å‡ºæ‰€æœ‰çš„é€—å· result = string.replace(/(?=(\\d&#123;3&#125;)+$)/g,\",\"); // 12,345,678 ä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€ä¸ªå°å°é—®é¢˜ï¼Œæµ‹è¯•çš„æ•°å­—ä¸ªæ•°æ˜¯ä¸‰çš„å€æ•°çš„æ—¶å€™ï¼Œåœ¨å¼€å¤´ä¹Ÿä¼šæ·»åŠ ä¸€ä¸ªé€—å· let string = \"123456789\";result = string.replace(/(?=(\\d&#123;3&#125;)+$)/g,\",\");console.log(result); // ,123,456,789 æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼å¦‚ä¸‹ result = string.replace(/(?=(?!^)(\\d&#123;3&#125;)+$)/g,\",\"); å…¶ä¸­ (?!^) è¡¨ç¤ºä¸æ˜¯å¼€å¤´çš„ä½ç½®ã€‚å¦‚æœå¸Œæœ›æ”¯æŒæ›´å¤šçš„æ ¼å¼ï¼Œæ¯”å¦‚ 1234567 12345678 è½¬æ¢ä¸º 1,234,567 12,345,678ï¼Œåªè¦å°†ä¸Šé¢çš„è¡¨è¾¾å¼ä¸­çš„å¼€å¤´ï¼Œç»“å°¾æ›¿æ¢ä¸º \\b å³å¯ let string = \"1234567 12345678\";result = string.replace(/(?=(?!\\b)(\\d&#123;3&#125;)+\\b)/g,\",\");console.log(result); // 1,234,567 12,345,678 è€ƒè™‘åˆ° (?!\\b) å°±ç›¸å½“äº \\Bï¼Œæ‰€ä»¥ä¸Šé¢çš„è¡¨è¾¾å¼ä¹Ÿå¯ç®€å†™å¦‚ä¸‹ /(?=\\B(\\d&#123;3&#125;)+\\b)/g å¤šè¡Œæ¨¡å¼æ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸‰ä¸ªå¸¸è§çš„æ ‡å¿—ï¼Œåˆ†åˆ«ä¸ºå…¨å±€æ¨¡å¼ gï¼Œè¡¨ç¤ºè¿›è¡Œå…¨å±€åŒ¹é…ï¼Œå¦‚æœä¸è®¾ç½®è¯¥æ ‡å¿—ï¼Œé‚£ä¹ˆåªä¼šåŒ¹é…ä¸€æ¬¡ï¼Œå¦‚æœå­—ç¬¦ä¸²åé¢è¿˜è¦ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ä¸ä¼šè¢«åŒ¹é…çš„ï¼Œå¯¹äº exec() æ–¹æ³•ï¼Œéå…¨å±€æ¨¡å¼ä¸‹ä¸ä¼šæ›´æ”¹ lastIndexï¼Œå³ lastIndex å§‹ç»ˆæ˜¯ 0ã€‚ let string = \"hello hello\";let re1 = /hello/;let re2 = /hello/g;// éå…¨å±€æ›¿æ¢ åªä¼šæ›¿æ¢åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ª helloconsole.log(string.replace(re1, \"#\")); // # hello// å…¨å±€æ›¿æ¢ å­—ç¬¦ä¸²ä¸­æ‰€ä»¥çš„ hello éƒ½ä¼šè¢«æ›¿æ¢console.log(string.replace(re2, \"#\")); // # # ç¬¬äºŒæ ‡å¿— i å¾ˆå¥½ç†è§£ï¼Œå³å¿½ç•¥å¤§å°å†™ let re1 = /hello/;let re2 = /hello/i;let string = \"Hello\";// ä¸å¿½ç•¥å¤§å°å†™console.log(re1.test(string)); // false// å¿½ç•¥å¤§å°å†™console.log(re2.test(string)); // true ç¬¬ä¸‰ä¸ªæ ‡å¿— m è¡¨ç¤ºå¤šè¡Œæ¨¡å¼ï¼Œå®ƒåªä¼šå½±å“ ^,$ï¼Œå¦‚æœä¸æ˜¯å¤šè¡Œæ¨¡å¼ï¼Œé‚£ä¹ˆ ^, $ å°±è¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ï¼Œå¦‚æœæ˜¯å¤šè¡Œæ¨¡å¼ï¼Œé‚£ä¹ˆ ^,$ å°±è¡¨ç¤ºæ¯ä¸€è¡Œçš„å¼€å¤´å’Œç»“å°¾ã€‚ éå¤šè¡Œæ¨¡å¼ let string = \"I \\nlove \\njava\";// éå¤šè¡Œ ^,$ è¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾console.log(string.replace(/^|$/g, \"#\")); è¾“å‡ºå¦‚ä¸‹ #I love java# å¤šè¡Œæ¨¡å¼ let string = \"I \\nlove \\njava\";// å¤šè¡Œæ¨¡å¼ ^,$ è¡¨ç¤ºæ¯ä¸€è¡Œçš„å¼€å¤´å’Œç»“å°¾console.log(string.replace(/^|$/gm, \"#\")); è¾“å‡ºå¦‚ä¸‹ #I ##love ##java#","tags":[{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"}]},{"title":"Springå¸¸è§æ³¨è§£","date":"2020-05-21T16:00:00.000Z","path":"/Springå¸¸è§æ³¨è§£/","text":"ä»‹ç» Spring æ¡†æ¶ä¸­çš„å¸¸è§æ³¨è§£(NO XML)ï¼Œåœ¨ä»‹ç» Spring æ³¨è§£ä¹‹å‰ï¼Œç®€è¦çš„ä»‹ç»ä¸€ä¸‹ IoCã€‚ IoCç®€è¦ä»‹ç»IoC(Inverse of Control) çš„æ„æ€æ˜¯æ§åˆ¶åè½¬ï¼Œæ„æ€å°±æ˜¯æ§åˆ¶æƒå‘ç”Ÿè½¬æ¢ï¼Œä»¥å‰æˆ‘ä»¬éœ€è¦æŸä¸ªç±»çš„å¯¹è±¡ï¼Œéƒ½æ˜¯ç›´æ¥ new å‡ºæ¥çš„ï¼Œç°åœ¨æœ‰äº† IoCï¼Œå¯¹è±¡åˆ›å»ºçš„æ§åˆ¶æƒäº¤ç»™ Springï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æŸä¸ªå¯¹è±¡ï¼Œå‘ IoC å®¹å™¨æ‹¿ï¼Œå¦‚ä¸‹ ä¸Šé¢å°† Dog ç±»å¯¹è±¡æ”¾å…¥å®¹å™¨çš„è¿‡ç¨‹æˆ‘ä»¬æˆä¸ºæ³¨å…¥ï¼Œå®¹å™¨æˆ‘ä»¬ä¸€èˆ¬ç§°ä¸º IoC å®¹å™¨æˆ–è€… Spring å®¹å™¨ã€‚ä¸Šé¢åšçš„å¥½å¤„å¯ä»¥å‡å°‘ç±»ä¸ç±»ä¹‹é—´çš„è€¦åˆæ€§ï¼Œè€¦åˆæ€§è¿™ä¸ªè¯å¯èƒ½é«˜å¤§å°šï¼Œæˆ‘ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ Dog ç±»å‘ç”Ÿäº†æ”¹å˜ï¼Œé«˜è€¦åˆæ€§æ„å‘³ç€å¦‚æœæœ‰ç±»ä¾èµ– Dog ç±»çš„è¯ï¼Œé‚£ä¹ˆç›¸åº”çš„è¯¥ç±»æœ‰å¯èƒ½ä¹Ÿè¦å‘ç”Ÿæ”¹å˜ï¼Œå¦‚æœè€¦åˆåº¦ä½çš„è¯ï¼Œä¹Ÿå°±æ˜¯æ ¹æœ¬å¯Ÿè§‰ä¸åˆ°è‡ªå·±ä¾èµ–äº† Dog ç±»ï¼Œæ ¹æœ¬å°±ä¸éœ€è¦æ”¹å˜ã€‚ æˆ‘ä»¬åœ¨åƒå®¹å™¨è¦æŸä¸ªå¯¹è±¡æ—¶ï¼Œå¯Ÿè§‰ä¸åˆ°æŸä¸ªç±»çš„æ‰€åœ¨(å› ä¸ºä¸€èˆ¬ä½¿ç”¨æ¥å£å»æ¥æ”¶ä»å®¹å™¨ä¸­æ‹¿çš„å¯¹è±¡)ï¼Œæ¯”å¦‚ Animal animal = ioc.getObject('dog'); å‡è®¾ Dog å®ç°äº† Animal æ¥å£ï¼Œioc å¯¹è±¡è¡¨ç¤º IoC å®¹å™¨ï¼ŒgetObject() è¡¨ç¤ºä»å®¹å™¨ä¸­è·å¾—å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œä¼ å…¥çš„å‚æ•°è¡¨ç¤ºå¯¹è±¡åœ¨å®¹å™¨ä¸­çš„ idã€‚å¦‚æœ Dog ç±»å‘ç”Ÿæ”¹å˜(ä½†æ˜¯ä»–åœ¨å®¹å™¨ä¸­çš„ id æ˜¯ä¸ä¼šå˜çš„)ï¼Œæˆ‘ä»¬è·å– Dog å¯¹è±¡çš„æ–¹å¼è¿˜æ˜¯å’Œä¸Šé¢ä¸€æ ·ï¼Œä¸éœ€è¦å‘ç”Ÿæ”¹å˜ã€‚å‡è®¾å¦‚æœæ˜¯ç›´æ¥ new Dog() çš„è¯ï¼Œå¦‚æœ Dog çš„ç±»åå˜äº†ï¼Œé‚£ä¹ˆæ‰€æœ‰ç›´æ¥ä¾èµ– Dog ç±»çš„æ‰€æœ‰ç±»éƒ½è¦å‘ç”Ÿæ”¹å˜ï¼Œè¿™å°±æ˜¯ä½è€¦åˆçš„å¥½å¤„ã€‚ æ³¨æ„ï¼šè¦ä½¿ç”¨ Spring IoCï¼Œè®°å¾—åœ¨ pom.xml(Maven) ä¸­å¯¼å…¥åæ ‡ &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;&lt;/dependency&gt; @Configuration@Configuration çš„å®šä¹‰ï¼š @Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Componentpublic @interface Configuration &#123; @AliasFor( annotation = Component.class ) String value() default \"\"; boolean proxyBeanMethods() default true;&#125; è¢« @Configuration ä¿®é¥°çš„ç±»æ˜¯ Spring çš„é…ç½®ç±»ï¼Œæ‰€è°“çš„é…ç½®ç±»å°±æ˜¯ç”¨æ¥é…ç½®ç”¨çš„ï¼Œå¯ä»¥é…ç½®æ‰«æå“ªäº›åŒ…ï¼Œå°†è¿™äº›åŒ…ä¸‹çš„ç±»æ³¨å…¥åˆ° IoC å®¹å™¨ä¸­ï¼Œä¹Ÿå¯ä»¥é…ç½®å°†ç‰¹å®šçš„ç±»æ³¨å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚ è¢« @Configuration ä¿®é¥°çš„ç±»ä¹Ÿä¼šè¢«æ³¨å…¥åˆ° IoC å®¹å™¨ä¸­ï¼Œ@Configuration æœ‰ä¸€ä¸ª value å€¼ï¼Œå®ƒæ˜¯ç”¨æ¥è®¾ç½®è¯¥ç±»å¯¹è±¡åœ¨ IoC å®¹å™¨ä¸­çš„ idï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé‚£ä¹ˆé»˜è®¤æ˜¯ç±»åï¼Œä¸è¿‡é¦–å­—æ¯è¦æ”¹ä¸ºå°å†™ï¼Œæ¯”å¦‚ package config;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configurationpublic class SpringConfiguration &#123;&#125; SpringConfiguration æ˜¯ Spring çš„é…ç½®ç±»ï¼Œç”±äº @Configuration æ²¡æœ‰é…ç½®idï¼Œæ‰€ä»¥å®ƒåœ¨ IoC å®¹å™¨ä¸­çš„ id ä¸º springConfigurationï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•ï¼Œå¦‚ä¸‹ import config.SpringConfiguration;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); SpringConfiguration springConfiguration = ac.getBean(\"springConfiguration\", SpringConfiguration.class); System.out.println(springConfiguration); &#125;&#125; AnnotationConfigApplicationContext å¯ä»¥çœ‹åšæ˜¯ IoC å®¹å™¨ï¼Œæˆ‘ä»¬ä¼ å…¥é…ç½®ç±»æ‰€åœ¨çš„åŒ… config ç»™å®ƒï¼Œå®ƒä¼šæ‰«æè¯¥åŒ…æ‰¾åˆ°é…ç½®ç±»ï¼Œç„¶åæ ¹æ®é…ç½®ç±»ä¸ºå®¹å™¨æ³¨å…¥å¯¹è±¡ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬åœ¨é…ç½®ç±»ä¸­ä»€ä¹ˆéƒ½æ²¡æœ‰åšï¼Œæ‰€ä»¥ä¸ä¼šå‘ IoC å®¹å™¨æ³¨å…¥åˆ«çš„å¯¹è±¡ã€‚ æ¥ç€æˆ‘ä»¬é€šè¿‡è·å¾—å¯¹è±¡çš„æ–¹æ³• getBean() è·å¾—äº†é…ç½®ç±» SpringConfiguration çš„å¯¹è±¡ï¼Œè¯¥æ–¹æ³•éœ€è¦ä¼ å…¥åœ¨ IoC å®¹å™¨ä¸­çš„ idï¼Œå› ä¸ºæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤æ˜¯ springConfigurationã€‚ @ComponentScan@ComponentScan æ³¨è§£çš„å®šä¹‰ @Retention(RetentionPolicy.RUNTIME)@Target(&#123;ElementType.TYPE&#125;)@Documented@Repeatable(ComponentScans.class)public @interface ComponentScan &#123; @AliasFor(\"basePackages\") String[] value() default &#123;&#125;; @AliasFor(\"value\") String[] basePackages() default &#123;&#125;; Class&lt;?&gt;[] basePackageClasses() default &#123;&#125;; Class&lt;? extends BeanNameGenerator&gt; nameGenerator() default BeanNameGenerator.class; Class&lt;? extends ScopeMetadataResolver&gt; scopeResolver() default AnnotationScopeMetadataResolver.class; ScopedProxyMode scopedProxy() default ScopedProxyMode.DEFAULT; String resourcePattern() default \"**/*.class\"; boolean useDefaultFilters() default true; ComponentScan.Filter[] includeFilters() default &#123;&#125;; ComponentScan.Filter[] excludeFilters() default &#123;&#125;; boolean lazyInit() default false; @Retention(RetentionPolicy.RUNTIME) @Target(&#123;&#125;) public @interface Filter &#123; FilterType type() default FilterType.ANNOTATION; @AliasFor(\"classes\") Class&lt;?&gt;[] value() default &#123;&#125;; @AliasFor(\"value\") Class&lt;?&gt;[] classes() default &#123;&#125;; String[] pattern() default &#123;&#125;; &#125;&#125; è¯¥æ³¨è§£çš„ä½œç”¨æ˜¯æ‰«æåŒ…æˆ–è€…ç±»ï¼Œå°†æ‰«æåˆ°ç±»æ³¨å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚ç”±ä¸Šé¢å¯è§ï¼Œè¯¥ç±»çš„å±æ€§è¿˜æ˜¯æŒºå¤šçš„ï¼Œè¿™é‡Œä»‹ç»å‡ ä¸ªé‡è¦çš„å±æ€§ã€‚ valueå’Œbasepackagesè¿™ä¸¤ä¸ªå±æ€§æ”¾åœ¨ä¸€èµ·è®²æ˜¯å› ä¸ºä»–ä»¬äº’ä¸ºåˆ«å @AliasFor(\"basePackages\")String[] value() default &#123;&#125;;@AliasFor(\"value\")String[] basePackages() default &#123;&#125;; å®ƒä»¬çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œè§„å®šè¦æ‰«æå“ªäº›åŒ…ï¼Œä»å®šä¹‰çœ‹ï¼Œå®ƒä»¬çš„å€¼éƒ½æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œæˆ‘ä»¬åœ¨ com.xt.service ä¸‹å®šä¹‰ ServiceTest ç±»å¦‚ä¸‹ package com.xt.service;public class ServiceTest &#123; public void service() &#123; System.out.println(\"service...\"); &#125;&#125; Spring çš„é…ç½®ç±»å¦‚ä¸‹ package config;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan(\"com.xt.service\")public class SpringConfiguration &#123;&#125; æˆ‘ä»¬åœ¨é…ç½®ç±»ä¸­è§„å®šäº†è¦æ‰«æçš„åŒ…ä¸ºcom.xt.serviceï¼Œæ¥ç€æˆ‘ä»¬åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯• import com.xt.service.ServiceTest;import config.SpringConfiguration;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); ServiceTest serviceTest = ac.getBean(\"serviceTest\", ServiceTest.class); serviceTest.service(); &#125;&#125; ä½†æ˜¯å´å‘ç”Ÿå¼‚å¸¸ï¼Œåœ¨å®¹å™¨ä¸­æ²¡æœ‰åä¸º serviceTest çš„å¯¹è±¡ è¿™æ˜¯å› ä¸ºå³ä½¿æ‰«æäº† ServiceTest æ‰€åœ¨çš„åŒ…ï¼Œä½†å¹¶ä¸æ˜¯è¯¥åŒ…ä¸‹æ‰€æœ‰çš„ç±»éƒ½ä¼šè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œè€Œæ˜¯è¢« @Component æ³¨è§£æ‰€ä¿®é¥°çš„ç±»æ‰ä¼šè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¸º ServiceTest åŠ ä¸Š @Component æ³¨è§£ï¼Œå¦‚ä¸‹ package com.xt.service;import org.springframework.stereotype.Component;@Componentpublic class ServiceTest &#123; public void service() &#123; System.out.println(\"service...\"); &#125;&#125; å†æ¬¡è¿è¡Œæµ‹è¯•ç±»ï¼Œç»“æœå¦‚ä¸‹ æ³¨æ„ï¼š@Component è¿˜æœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œ@Controllerï¼Œ@Serviceï¼Œ@Repositoryï¼Œè¿™äº›æ³¨è§£çš„ä½œç”¨ä¸ @Component ä¸€æ¯›ä¸€æ ·ï¼Œé‚£ä¸ºä»€ä¹ˆè¦åˆ›å»ºè¿™äº›æ³¨è§£ï¼Œä¸»è¦æ˜¯ä»–ä»¬æ‰€ä»£è¡¨çš„çš„è¯­ä¹‰ï¼Œ@Controller ä¸»è¦ç”¨åœ¨ Web å±‚çš„ç±»ä¸Šï¼Œ@Service ä¸»è¦ç”¨åœ¨ Service å±‚ä¸Šï¼Œè€Œ @Repository ä¸»è¦ç”¨åœ¨ Dao å±‚ä¸Šï¼Œç¨‹åºå‘˜çœ‹åˆ°æŸç±»è¢«ä»€ä¹ˆæ³¨è§£ä¿®é¥°ï¼Œå°±å¯ä»¥æ˜ç™½è¯¥ç±»çš„èŒè´£æ˜¯ä»€ä¹ˆäº†ã€‚ å¦‚æœ @ComponentScan æ²¡æœ‰æŒ‡å®šä»»ä½•å€¼ï¼Œé‚£ä¹ˆé»˜è®¤ä¼šæ‰«æè¯¥ç±»æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…ï¼Œå¦‚ package config;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScanpublic class SpringConfiguration &#123;&#125; @ComponentScan æ²¡æœ‰æŒ‡å®šä»»ä½•å€¼ï¼Œé‚£ä¹ˆå°±ä¼šé»˜è®¤æ‰«æ config åŒ…ä¸‹çš„ç±»åŠå…¶å­åŒ…ä¸‹çš„ç±»ã€‚ basePackageClassesbasePackageClasses çš„å®šä¹‰å¦‚ä¸‹ï¼š Class&lt;?&gt;[] basePackageClasses() default &#123;&#125;; è¯¥å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå­—èŠ‚ç æ•°ç»„ï¼Œå½“è®¾ç½®æŒ‡å®šå­—èŠ‚ç æ—¶ï¼Œä¼šæ‰«ææŒ‡å®šå­—èŠ‚ç æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ï¼Œå‡è®¾æœ‰å¦‚ä¸‹ç»“æ„ UserServiceImpl å®ç°äº† UserService æ¥å£ï¼ŒäºŒè€…å†…å®¹å¦‚ä¸‹ package com.xt.service;public interface UserService &#123; void doService();&#125; package com.xt.service.impl;import com.xt.service.UserService;import org.springframework.stereotype.Service;@Servicepublic class UserServiceImpl implements UserService &#123; public void doService() &#123; System.out.println(\"do service...\"); &#125;&#125; Spring çš„é…ç½®ç±»å¦‚ä¸‹ package config;import com.xt.service.UserService;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan(basePackageClasses = UserService.class)public class SpringConfiguration &#123;&#125; æˆ‘ä»¬é…ç½® basePackageClasses ä¸º UserService.classï¼Œæ‰€ä»¥ä¼šæ‰«æ UserService æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…ï¼Œæ‰€ä»¥ UserServiceImpl ä¼šè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•å¦‚ä¸‹ import com.xt.service.UserService;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); UserService userService = ac.getBean(\"userServiceImpl\", UserService.class); userService.doService(); &#125;&#125; ç»“æœå¦‚ä¸‹ nameGeneratorè¯¥å±æ€§çš„ä½œç”¨æ˜¯è®¾ç½®æ³¨å…¥åˆ°å®¹å™¨ä¸­çš„å¯¹è±¡(æˆ‘ä»¬ä¸€èˆ¬ç§°è¿™ä¸ªå¯¹è±¡ä¸º bean)çš„ id åç§°çš„ç”Ÿæˆè§„åˆ™ï¼Œå¦‚ä¸‹ Class&lt;? extends BeanNameGenerator&gt; nameGenerator() default BeanNameGenerator.class; åœ¨ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤ä½¿ç”¨äº† BeanNameGenerator è¿™ä¸ªç±»å»ç”Ÿæˆ id çš„åç§°ï¼Œè€Œç”Ÿæˆçš„è§„åˆ™åœ¨ä¸Šé¢ä»‹ç»è¿‡ï¼Œå³ id ä¸ºç±»åï¼Œä¸è¿‡é¦–å­—æ¯è¦å°å†™ï¼Œ Spring ä¸­çš„æœ‰å…³é»˜è®¤ id åç§°ç”Ÿæˆçš„éƒ¨åˆ†æºç å¦‚ä¸‹ public static String decapitalize(String name) &#123; if (name == null || name.length() == 0) &#123; return name; &#125; if (name.length() &gt; 1 &amp;&amp; Character.isUpperCase(name.charAt(1)) &amp;&amp; Character.isUpperCase(name.charAt(0)))&#123; return name; &#125; char chars[] = name.toCharArray(); chars[0] = Character.toLowerCase(chars[0]); return new String(chars);&#125; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœå¯¹äºç¬¬ä¸€ä¸ªå­—æ¯å’Œç¬¬äºŒä¸ªå­—æ¯éƒ½ä¸ºå¤§å†™çš„è¿™ç§ç‰¹æ®Šçš„ç±»åæ˜¯ä¸ä¼šå°†é¦–å­—æ¯å˜ä¸ºå°å†™çš„ã€‚ é™¤äº†å¯ä»¥ä½¿ç”¨é»˜è®¤çš„ç”Ÿæˆè§„åˆ™ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±è‡ªå®šä¹‰ id çš„ç”Ÿæˆè§„åˆ™ï¼Œåœ¨ custom åŒ…ä¸‹æ–°å»º CustomBeanNameGenerator ç±»ï¼Œè¯¥ç±»çš„ä½œç”¨å°±æ˜¯ id åç§°çš„ç”Ÿæˆè§„åˆ™ï¼Œè¯¥ç±»éœ€è¦å®ç° BeanNameGenerator æ¥å£ï¼Œè¯¦ç»†å¦‚ä¸‹ package custom;import org.springframework.beans.factory.annotation.AnnotatedBeanDefinition;import org.springframework.beans.factory.config.BeanDefinition;import org.springframework.beans.factory.support.BeanDefinitionRegistry;import org.springframework.beans.factory.support.BeanNameGenerator;import org.springframework.core.annotation.AnnotationAttributes;import org.springframework.core.type.AnnotationMetadata;import org.springframework.lang.Nullable;import org.springframework.util.Assert;import org.springframework.util.ClassUtils;import org.springframework.util.StringUtils;import java.beans.Introspector;import java.util.Map;import java.util.Set;public class CustomBeanNameGenerator implements BeanNameGenerator &#123; public String generateBeanName(BeanDefinition beanDefinition, BeanDefinitionRegistry beanDefinitionRegistry) &#123; String beanName = null; // åˆ¤æ–­è¯¥ç±»æ˜¯å¦æ˜¯ç”±æ³¨è§£æ³¨å…¥çš„ if (beanDefinition instanceof AnnotatedBeanDefinition) &#123; // å¦‚æœæ˜¯å¼ºè½¬ä¸º AnnotatedBeanDefinition ä»¥è·å¾—æœ‰å…³æ³¨è§£çš„ä¿¡æ¯ AnnotatedBeanDefinition annotatedBeanDefinition = (AnnotatedBeanDefinition) beanDefinition; // è·å¾—æ³¨è§£çš„ä¿¡æ¯ AnnotationMetadata annotationMetadata = annotatedBeanDefinition.getMetadata(); // è·å¾—æ‰€æœ‰æ³¨è§£ Set&lt;String&gt; types = annotationMetadata.getAnnotationTypes(); // éå†æ‰€æœ‰æ³¨è§£ for (String type: types) &#123; // è·å¾—æ³¨è§£çš„å±æ€§ AnnotationAttributes annotationAttributes = AnnotationAttributes.fromMap(annotationMetadata.getAnnotationAttributes(type, false)); // å¦‚æœè¯¥æ³¨è§£ä¸ºComponentæˆ–å…¶è¡ç”Ÿæ³¨è§£(æš‚ä¸è€ƒè™‘ JSR è§„èŒƒï¼Œå¦‚ @Resource)ä¸”valueå±æ€§æœ‰å€¼ // å¹¶ä¸” annotationAttributes ä¸ä¸ºnull if (annotationAttributes != null &amp;&amp; isStereotypeWithNameValue(type, annotationMetadata.getMetaAnnotationTypes(type), annotationAttributes)) &#123; // è·å¾— value å±æ€§çš„å€¼ Object value = annotationAttributes.get(\"value\"); // å¦‚æœvalueä¸ºStringï¼Œåˆ™å¼ºè½¬ if (value instanceof String) &#123; String strValue = (String) value; // value å€¼é•¿åº¦ä¸ä¸º 0 if (StringUtils.hasLength(strValue)) &#123; // å¦‚æœ beanName æœ‰å€¼ï¼Œè¯´æ˜å·²ç»è®¾ç½®è¿‡äº† æ­¤æ—¶ value ä¸ beanName ä¸åŒï¼Œè¯´æ˜äº§ç”Ÿäº†å†²çªï¼ŒæŠ›å‡ºå¼‚å¸¸ if (beanName != null &amp;&amp; !strValue.equals(beanName)) &#123; throw new IllegalArgumentException(\"å¤šä¸ªæ³¨è§£è®¾ç½®äº†valueï¼Œäº§ç”Ÿäº†å†²çª\"); &#125; else &#123; beanName = strValue; &#125; &#125; &#125; &#125; &#125; &#125; // æ²¡æœ‰ Component åŠå…¶è¡ç”Ÿæ³¨è§£æˆ–è€…æ²¡æœ‰è®¾ç½® value å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤è‡ªå®šä¹‰çš„ç±»åç”Ÿæˆè§„åˆ™ return beanName != null ? beanName : buildDefaultBeanName(beanDefinition); &#125; // åˆ¤æ–­è¯¥æ³¨è§£æ˜¯å¦æ˜¯ComponentåŠå…¶è¡ç”Ÿæ³¨è§£ å¹¶ä¸”æœ‰ value å±æ€§ private boolean isStereotypeWithNameValue(String annotationType, Set&lt;String&gt; metaAnnotationTypes, @Nullable Map&lt;String, Object&gt; attributes) &#123; boolean isStereotype = annotationType.equals(\"org.springframework.stereotype.Component\") || metaAnnotationTypes.contains(\"org.springframework.stereotype.Component\") || annotationType.equals(\"javax.annotation.ManagedBean\") || annotationType.equals(\"javax.inject.Named\"); return isStereotype &amp;&amp; attributes != null &amp;&amp; attributes.containsKey(\"value\"); &#125; // é»˜è®¤ bean id ç”Ÿæˆ private String buildDefaultBeanName(BeanDefinition beanDefinition) &#123; // è·å¾—å…¨é™å®šç±»åï¼Œå¦‚com.xt.service.impl.UserServiceImpl String beanClassName = beanDefinition.getBeanClassName(); // è·å¾—ç±»å å¦‚UserServiceImpl String shortClassName = ClassUtils.getShortName(beanClassName); // é»˜è®¤ç”Ÿæˆè§„åˆ™ä¸º my + ç±»å return \"my\" + shortClassName; &#125;&#125; ä¸Šé¢çš„ id ç”Ÿæˆè§„åˆ™ä¸ºå¦‚æœ @Component åŠå…¶è¡ç”Ÿæ³¨è§£è®¾ç½®äº† id åç§°ï¼Œåˆ™ä½¿ç”¨è®¾ç½®çš„åç§°ï¼Œå¦åˆ™é»˜è®¤çš„ id åç§°ä¸º my + ç±»åã€‚ç°åœ¨å°† SpringConfiguration çš„ @ComponentScan çš„ nameGenerator è®¾ç½®ä¸º CustomBeanNameGenerator.classï¼Œå¦‚ä¸‹ package config;import com.xt.service.UserService;import custom.CustomBeanNameGenerator;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan(nameGenerator = CustomBeanNameGenerator.class, basePackages = \"com.xt.service.impl\")public class SpringConfiguration &#123;&#125; UserServiceImpl çš„å†…å®¹å¦‚ä¸‹ package com.xt.service.impl;import com.xt.service.UserService;import org.springframework.stereotype.Service;@Servicepublic class UserServiceImpl implements UserService &#123; public void doService() &#123; System.out.println(\"do service...\"); &#125;&#125; å¯è§ä½¿ç”¨ @Service ä¿®é¥°äº†ï¼Œä½†æ˜¯æ²¡ç”¨è®¾ç½® value å€¼ï¼Œæ‰€ä»¥é»˜è®¤ç”Ÿæˆçš„ id æ˜¯ myUserServiceImplï¼Œåœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•å¦‚ä¸‹ import com.xt.service.UserService; import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); // id å·²ç»æ”¹ä¸ºäº† myUserServiceImpl UserService userService = ac.getBean(\"myUserServiceImpl\", UserService.class); userService.doService(); &#125;&#125; è¾“å‡ºå¦‚ä¸‹ å¯è§æˆ‘ä»¬çš„è‡ªå®šä¹‰ id ç”Ÿæˆè§„åˆ™ç”Ÿæ•ˆäº†ï¼Œç°åœ¨ä¿®æ”¹ UserServiceImpl å¦‚ä¸‹ï¼Œè¿™æ¬¡è®¾ç½® id å€¼ package com.xt.service.impl;import com.xt.service.UserService;import org.springframework.stereotype.Service;@Service(\"userService\")public class UserServiceImpl implements UserService &#123; public void doService() &#123; System.out.println(\"do service...\"); &#125;&#125; æ ¹æ®æˆ‘ä»¬çš„è§„åˆ™ï¼Œè¿™æ—¶çš„ id åä¸ºè®¾å®šçš„å€¼ï¼Œå³ userServiceï¼Œä¿®æ”¹æµ‹è¯•ç±» UserService userService = ac.getBean(\"userService\", UserService.class); åœ¨æ­¤ä¿®æ”¹ UserServiceImplï¼Œè¿™æ¬¡ä½¿ç”¨å¤šä¸ªæ³¨è§£ä¿®é¥°ï¼Œå¦‚ä¸‹ package com.xt.service.impl;import com.xt.service.UserService;import org.springframework.stereotype.Component;import org.springframework.stereotype.Service;@Service(\"userService\")@Component(\"userServiceImpl\")public class UserServiceImpl implements UserService &#123; public void doService() &#123; System.out.println(\"do service...\"); &#125;&#125; è¿è¡Œæµ‹è¯•ç±»ï¼Œè¿™æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚ä¸‹ useDefaultFiltersåœ¨ @ComponentScan ä¸­æœ‰ä¸€ä¸ªå±æ€§ useDefaultFilters boolean useDefaultFilters() default true; å®ƒçš„å€¼é»˜è®¤ä¸º trueï¼Œå³å¦‚æœè¢«æ‰«æçš„ç±»è¢« @Componentï¼Œ@Controllerï¼Œ@Serviceï¼Œ@Repositoryè¿™å››ä¸ªæ³¨è§£ä¿®é¥°æ—¶ï¼Œé‚£ä¹ˆå°†è¯¥ç±»å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¦‚æœä¸º falseï¼Œé‚£ä¹ˆè¢«è¿™å››ä¸ªæ³¨è§£ä¿®é¥°çš„ç±»ä¸ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­(ä½†æ˜¯æœ‰å¯èƒ½é€šè¿‡å…¶ä»–æ³¨è§£æˆ–å±æ€§å°†è¯¥ç±»æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œå¦‚ includeFiltersï¼Œ@Import)ã€‚ includeFiltersincludeFilters å±æ€§çš„ä½œç”¨æ˜¯å…è®¸ç¬¦åˆè¿‡æ»¤è§„åˆ™çš„ç±»å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ª Filter æ³¨è§£ @Retention(RetentionPolicy.RUNTIME)@Target(&#123;&#125;)public @interface Filter &#123; FilterType type() default FilterType.ANNOTATION; @AliasFor(\"classes\") Class&lt;?&gt;[] value() default &#123;&#125;; @AliasFor(\"value\") Class&lt;?&gt;[] classes() default &#123;&#125;; String[] pattern() default &#123;&#125;;&#125; è¯¥æ³¨è§£æœ‰ä¸€ä¸ª type å±æ€§ï¼Œå®ƒçš„é»˜è®¤å–å€¼ä¸º FilterType.ANNOTATIONï¼Œè¡¨ç¤ºè¿‡æ»¤çš„è§„åˆ™ä¸ºæ³¨è§£ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½® value å±æ€§ä¸ºæŸæ³¨è§£çš„å­—èŠ‚ç å¯¹è±¡ï¼Œé‚£ä¹ˆè¢«è¯¥æ³¨è§£ä¿®é¥°çš„ç±»å¯¹è±¡å¯ä»¥æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œæ¯”å¦‚å…è®¸è‡ªå®šä¹‰ @MyAnno æ³¨è§£æ‰€ä¿®é¥°çš„ç±»æ³¨å…¥åˆ°å®¹å™¨ä¸­ @ComponentScan(includeFilters = @ComponentScan.Filter(MyAnno.class)) åœ¨æ‰«æçš„ç±»ä¸­ï¼Œå¦‚æœè¯¥ç±»è¢«è‡ªå®šä¹‰æ³¨è§£ @MyAnno ä¿®é¥°ï¼Œé‚£ä¹ˆè¯¥ç±»å¯¹è±¡ä¼šè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ã€‚ excludeFiltersä¸ includeFilters çš„ä½œç”¨ç›¸åï¼Œå¯¹äºç¬¦åˆè¿‡æ»¤è§„åˆ™çš„ç±»å¯¹è±¡ä¸èƒ½è¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¦‚ @ComponentScan(excludeFilters = @ComponentScan.Filter(Service.class)) ä¸Šé¢çš„æ³¨è§£çš„ä½œç”¨æ˜¯ï¼Œæ‰«æåˆ°çš„ç±»å¦‚æœè¢« @Service ä¿®é¥°ï¼Œé‚£ä¹ˆè¯¥ç±»å¯¹è±¡ä¸èƒ½è¢«åŠ å…¥åˆ°å®¹å™¨ä¸­ã€‚ åœ¨ä¸Šé¢æˆ‘ä»¬çŸ¥é“ Filter æ³¨è§£ä¸­ï¼Œå®ƒçš„ type å±æ€§ä¸º FilterType.ANNOTATIONï¼Œå³è¢«æŸæ³¨è§£ä¿®é¥°ï¼Œä»–ä¼š(includeFilters)/ä¸å¯ä»¥(excludeFilters)åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼Œå…¶å® type è¿˜å¯ä»¥æœ‰å¤šç§å–å€¼ï¼Œå¦‚ä¸‹ package org.springframework.context.annotation;public enum FilterType &#123; ANNOTATION, ASSIGNABLE_TYPE, ASPECTJ, REGEX, CUSTOM; private FilterType() &#123; &#125;&#125; åœ¨è¿™é‡Œæˆ‘ä»¬åœ¨ä»‹ç» FilterType.CUSTOMï¼Œè¿™è¡¨ç¤ºæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™ï¼Œå®šä¹‰è¿‡æ»¤è§„åˆ™çš„ç±»éœ€è¦å®ç° TypeFilter æ¥å£ã€‚åœ¨ custom ä¸­æ–°å»º CustomFilter ç±» package custom;import org.springframework.core.type.classreading.MetadataReader;import org.springframework.core.type.classreading.MetadataReaderFactory;import org.springframework.core.type.filter.TypeFilter;import java.io.IOException;public class CustomFilter implements TypeFilter &#123; public boolean match(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory) throws IOException &#123; return true; &#125;&#125; ä¿®æ”¹é…ç½®ç±»å¦‚ä¸‹ package config;import custom.CustomFilter;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;import org.springframework.context.annotation.FilterType;import org.springframework.stereotype.Service;@Configuration@ComponentScan( basePackages = \"com.xt.service\", includeFilters = @ComponentScan.Filter( type = FilterType.CUSTOM, classes = CustomFilter.class ))public class SpringConfiguration &#123;&#125; å› ä¸º CustomFilter å®ç°çš„ match å§‹ç»ˆè¿”å› trueï¼Œæ‰€ä»¥è¢«æ‰«æåˆ°çš„ç±»å¯¹è±¡ä¼šè¢«æ— æ¡ä»¶çš„æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œæˆ‘ä»¬ä¿®æ”¹ com.xt.service.impl.UserServiceImpl å¦‚ä¸‹ package com.xt.service.impl;import com.xt.service.UserService;public class UserServiceImpl implements UserService &#123; public void doService() &#123; System.out.println(\"do service...\"); &#125;&#125; è¯¥ç±»æ²¡æœ‰è¢«ä»»ä½•æ³¨è§£ä¿®é¥°ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œä½†æ˜¯å®ƒçš„å¯¹è±¡è¿˜æ˜¯ä¼šæ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œæµ‹è¯•ç±»å¦‚ä¸‹ import com.xt.service.UserService;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); UserService userService = ac.getBean(\"userServiceImpl\", UserService.class); userService.doService(); &#125;&#125; è¾“å‡ºä¸º @Beanå¯¹äºæˆ‘ä»¬è‡ªå·±å†™çš„ç±»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ @Component åŠå…¶è¡ç”Ÿæ³¨è§£ï¼Œä½¿å¾—è¢«æ‰«æåˆ°æ—¶è¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œä½†æ˜¯å¯¹äºç¬¬ä¸‰æ–¹çš„ç±»åº“ï¼Œç”±äºå·²ç»è¢«ç¼–è¯‘ä¸ºäº†å­—èŠ‚ç ï¼Œæˆ‘ä»¬å·²ç»æ— æ³•ä¿®æ”¹ï¼Œå³ä¸èƒ½å†åˆ«äººçš„æºç ä¸ŠåŠ ä¸Šæ³¨è§£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœæƒ³å°†ç¬¬ä¸‰æ–¹ç±»åº“å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Œä½¿ç”¨ @Bean å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚@Bean çš„å®šä¹‰ä¸º @Target(&#123;ElementType.METHOD, ElementType.ANNOTATION_TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface Bean &#123; @AliasFor(\"name\") String[] value() default &#123;&#125;; @AliasFor(\"value\") String[] name() default &#123;&#125;; /** @deprecated */ @Deprecated Autowire autowire() default Autowire.NO; boolean autowireCandidate() default true; String initMethod() default \"\"; String destroyMethod() default \"(inferred)\";&#125; ä»¥æ•°æ®æºå¯¹è±¡ DataSource å¯¹è±¡ä¸ºä¾‹ï¼Œé¦–å…ˆå¯¼å…¥åæ ‡ &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;&lt;/dependency&gt; é…ç½®ç±»å¦‚ä¸‹ package config;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.jdbc.datasource.DriverManagerDataSource;import javax.sql.DataSource;@Configurationpublic class SpringConfiguration &#123; @Bean public DataSource createDataSource() &#123; return new DriverManagerDataSource(); &#125;&#125; åœ¨æ‰«æé…ç½®ç±»æ—¶ï¼Œä¼šæ‰«æé…ç½®ç±»ä¸­è¢« @Bean æ³¨è§£çš„æ–¹æ³•ï¼Œä¼šå°†è¯¥æ–¹æ³•è¿”å›çš„å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œè¿™æ˜¯é»˜è®¤çš„ id åç§°ä¸ºæ–¹æ³•åã€‚æµ‹è¯•ç±»å¦‚ä¸‹ import org.springframework.context.annotation.AnnotationConfigApplicationContext;import javax.sql.DataSource;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); DataSource dataSource = ac.getBean(\"createDataSource\", DataSource.class); System.out.println(dataSource); &#125;&#125; è¾“å‡ºä¸º å¯è§å®¹å™¨ä¸­æœ‰ DataSource å¯¹è±¡äº†ã€‚ å¦‚æœè¢« @Bean æ³¨è§£çš„æ–¹æ³•é‡è½½äº†çš„è¯ï¼Œé‚£ä¹ˆä¼šå°†é‡è½½çš„æ–¹æ³•è¿”å›çš„å¯¹è±¡æ³¨å…¥å®¹å™¨ï¼Œå¦‚ package config;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.datasource.DriverManagerDataSource;import javax.sql.DataSource;@Configurationpublic class SpringConfiguration &#123; @Autowired private DataSource dataSource; @Bean public DataSource createDataSource() &#123; return new DriverManagerDataSource(); &#125; @Bean public JdbcTemplate createJdbcTemplate() &#123; System.out.println(\"æ— å‚å‡½æ•°\"); return new JdbcTemplate(dataSource); &#125; @Bean public JdbcTemplate createJdbcTemplate(DataSource dataSource) &#123; System.out.println(\"æœ‰å‚å‡½æ•°\"); return new JdbcTemplate(dataSource); &#125;&#125; æœ‰ä¸¤ä¸ª createJdbcTemplate æ–¹æ³•ï¼Œæ ¹æ®ä¸Šé¢æ‰€è¯´ï¼Œé‡è½½çš„æ–¹æ³•ï¼Œå³ä¸‹é¢é‚£ä¸ªæœ‰å‚æ•°çš„å‡½æ•°è¿”å›çš„å¯¹è±¡ä¼šè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¯ä»¥åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•å¦‚ä¸‹ import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.jdbc.core.JdbcTemplate;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); JdbcTemplate jdbcTemplate = ac.getBean(\"createJdbcTemplate\", JdbcTemplate.class); System.out.println(jdbcTemplate); &#125;&#125; nameå’Œvalue@AliasFor(\"name\")String[] value() default &#123;&#125;;@AliasFor(\"value\")String[] name() default &#123;&#125;; æŒ‰ç…§ä¸Šé¢çš„å®šä¹‰ï¼Œname å’Œ value äº’ä¸ºåˆ«åï¼Œå®ƒä»¬çš„ä½œç”¨å°±æ˜¯è®¾ç½®æ³¨å…¥åˆ°å®¹å™¨å¯¹è±¡çš„ id åç§°ã€‚ autowireCandidateboolean autowireCandidate() default true; è¯¥å±æ€§çš„ä½œç”¨ä¸ @Autowired æœ‰å…³ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ @Autowired è‡ªåŠ¨æ³¨å…¥æ—¶ï¼Œå¦‚ @Autowiredprivate DataSource dataSource; å®¹å™¨ä¼šå°†å…¶ä¸­çš„ dataSource å¯¹è±¡æ³¨å…¥åˆ°æˆå‘˜å˜é‡ä¸­ï¼Œä½†æ˜¯å¦‚æœ autowireCandidate è®¾ç½®ä¸º falseï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±ä¸èƒ½ä½¿ç”¨ @Autowired è‡ªåŠ¨æ³¨å…¥ï¼Œå¦‚ @Autowiredprivate DataSource dataSource;@Bean(autowireCandidate = false)public DataSource createDataSource() &#123; return new DriverManagerDataSource();&#125; è¿™æ—¶å°±ä¸èƒ½å°† dataSource å¯¹è±¡é€šè¿‡ @Autowired æ³¨è§£è‡ªåŠ¨æ³¨å…¥åˆ°æˆå‘˜å˜é‡ dataSource ä¸­ï¼Œå†æ¬¡è¿è¡Œæµ‹è¯•ä»£ç ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ @Importåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œå¯èƒ½æœ‰å¤šä¸ªé…ç½®ç±»ï¼Œæ¯”å¦‚æ•°æ®åº“çš„é…ç½®ç±»ï¼Œé‚£ä¹ˆä¸»é…ç½®ç±»å°±è¦å¯¼å…¥æ•°æ®åº“é…ç½®ç±»çš„é…ç½®ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ° @Import æ³¨è§£ã€‚@Import æ³¨è§£çš„å®šä¹‰å¦‚ä¸‹ @Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface Import &#123; Class&lt;?&gt;[] value();&#125; @Import æ³¨è§£çš„ä½œç”¨æ˜¯å¯¼å…¥ value å±æ€§æ‰€æŒ‡æ˜çš„ç±»ï¼Œå°†è¿™äº›ç±»å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¦‚æœ‰ä¸‹é¢çš„æ•°æ®åº“é…ç½®ç±» package config;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.annotation.Bean;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.datasource.DriverManagerDataSource;import javax.sql.DataSource;public class JdbcConfiguration &#123; @Bean(\"dataSource\") public DataSource createDataSource() &#123; return new DriverManagerDataSource(); &#125; @Bean(\"jdbcTemplate\") public JdbcTemplate createJdbcTemplate(@Autowired DataSource dataSource) &#123; return new JdbcTemplate(dataSource); &#125;&#125; æˆ‘ä»¬åœ¨ä¸»é…ç½®ç±»ä¸­å¯¼å…¥è¯¥é…ç½®ç±» package config;import org.springframework.context.annotation.Import;@Configuration@Import(JdbcConfiguration.class)public class SpringConfiguration &#123;&#125; æˆ‘ä»¬åœ¨å¯¼å…¥ JdbcConfiguration æ—¶ï¼Œä¼šæ‰«æ JdbcConfiguration ä¸­çš„æ–¹æ³•ï¼Œå°†è¢« @Bean æ³¨è§£çš„æ–¹æ³•è¿”å›çš„å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œæ‰€ä»¥è¿™æ—¶ DataSource å¯¹è±¡å’Œ JdbcTemplate å¯¹è±¡ä¼šè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œåœ¨æµ‹è¯•ç±»æµ‹è¯•å¦‚ä¸‹ import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.jdbc.core.JdbcTemplate;import javax.sql.DataSource;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); DataSource dataSource = ac.getBean(\"dataSource\", DataSource.class); JdbcTemplate jdbcTemplate = ac.getBean(\"jdbcTemplate\", JdbcTemplate.class); assert dataSource != null; assert jdbcTemplate != null; &#125;&#125; è¿è¡Œæµ‹è¯•ç±»é¡ºåˆ©è¿è¡Œï¼Œæ²¡æœ‰æŠ¥é”™ JdbcConfiguration å®ƒä¹Ÿä¼šè¢«æ³¨å…¥å®¹å™¨ä¸­ï¼Œè¿™æ—¶å®ƒçš„ id ä¸ºå®ƒçš„å…¨é™å®šç±»åï¼Œè€Œä¸æ˜¯ç±»åé¦–å­—æ¯å°å†™ï¼Œå³config.JdbcConfiguration ImportSelectorå½“æˆ‘ä»¬éœ€è¦åŠ¨æ€çš„å†³å®šå¯¼å…¥å“ªäº›ç±»æ—¶ï¼Œæˆ–è€…éœ€è¦å¤§é‡å¯¼å…¥ç±»æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º @Import ä¼ å…¥è‡ªå®šä¹‰å¯¼å…¥ç±»ï¼Œè¯¥ç±»éœ€è¦å®ç° ImportSelector æ¥å£ã€‚è¯¥æ¥å£ä¸­æœ‰ä¸€ä¸ªæ–¹æ³• String[] selectImports(AnnotationMetadata annotationMetadata)ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„åŒ…å«çš„æ˜¯è¦æ·»åŠ åˆ°å®¹å™¨ä¸­çš„ç±»åã€‚ å› ä¸ºæˆ‘ä»¬è¿‡æ»¤è§„åˆ™ä½¿ç”¨ AspectJ è¡¨è¾¾å¼ï¼Œæ‰€ä»¥éœ€è¦å¯¼å…¥ç›¸å…³åæ ‡ &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.13&lt;/version&gt;&lt;/dependency&gt; ç°åœ¨æˆ‘ä»¬å®Œæˆè¿™ä¹ˆä¸€ä¸ªåŠŸèƒ½ï¼Œè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„è¿‡æ»¤è§„åˆ™å’Œè¦æ‰«æçš„åŒ…ï¼Œå°†æ‰«æåŒ…ä¸­ç¬¦åˆè¿‡æ»¤è§„åˆ™çš„ç±»å¯¹è±¡æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œåœ¨ resources ä¸‹æ–°å»º customImport.properties å¦‚ä¸‹ custom.expression=com.xt.service.impl.*custom.basePackage=com.xt è¿‡æ»¤è§„åˆ™ä½¿ç”¨ ASPECTJ æ ¼å¼çš„è¿‡æ»¤è§„åˆ™ï¼Œæ‰«æçš„åŒ…ä¸º com.xtï¼Œæ–°å»ºç±» custom.CustomImport å¦‚ä¸‹ package custom;import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;import org.springframework.context.annotation.ImportSelector;import org.springframework.core.io.support.PropertiesLoaderSupport;import org.springframework.core.io.support.PropertiesLoaderUtils;import org.springframework.core.type.AnnotationMetadata;import org.springframework.core.type.filter.AspectJTypeFilter;import org.springframework.core.type.filter.TypeFilter;import java.util.HashSet;import java.util.Properties;import java.util.Set;public class CustomImport implements ImportSelector &#123; // ä½¿ç”¨ AspectJ è¡¨è¾¾å¼è¡¨ç¤ºè¿‡æ»¤è§„åˆ™ private String expression; // æ‰«æçš„åŒ… private String basePackage; public CustomImport() &#123; // è¯»å–é…ç½®æ–‡ä»¶ åˆå§‹åŒ– try &#123; // æ ¹æ®é…ç½®æ–‡ä»¶è·å¾—è¿‡æ»¤è§„åˆ™å’Œæ‰«æçš„åŒ… Properties properties = PropertiesLoaderUtils.loadAllProperties(\"customImport.properties\"); expression = properties.getProperty(\"custom.expression\"); basePackage = properties.getProperty(\"custom.basePackage\"); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; // å®ç°çš„æ–¹æ³• public String[] selectImports(AnnotationMetadata annotationMetadata) &#123; ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false); // æ ¹æ® aspectj è¡¨è¾¾å¼è½¬æ¢ä¸ºå¯¹åº”çš„è¿‡æ»¤å™¨ TypeFilter typeFilter = new AspectJTypeFilter(expression, CustomImport.class.getClassLoader()); // å°†è¿‡æ»¤å™¨æ·»åŠ åˆ°æ‰«æå™¨ä¸­ scanner.addIncludeFilter(typeFilter); // åˆ›å»º Set é›†åˆä¿å­˜æ‰«æåˆ°çš„ç¬¦åˆè¿‡æ»¤è§„åˆ™çš„ç±» Set&lt;String&gt; classes = new HashSet&lt;String&gt;(); // ä½¿ç”¨è¿‡æ»¤å™¨æ‰«ææŒ‡å®šåŒ…ï¼Œå¾—åˆ°ç¬¦åˆè¿‡æ»¤è§„åˆ™çš„ç±» å¹¶æ·»åŠ åˆ° classes ä¸­ scanner.findCandidateComponents(basePackage).forEach(beanDefinition -&gt; classes.add(beanDefinition.getBeanClassName())); // å°† classes è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ•°ç»„è¿”å› return classes.toArray(new String[classes.size()]); &#125;&#125; æ ¹æ®ä¸Šé¢çš„è¿‡æ»¤è§„åˆ™ï¼Œåªæœ‰ UserServiceImpl ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­(é™¤é…ç½®ç±»)ï¼Œåœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•ä¸€ç•ª import config.SpringConfiguration;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SpringConfiguration.class); String[] names = ac.getBeanDefinitionNames(); for (String name: names) &#123; System.out.println(name); &#125; &#125;&#125; æµ‹è¯•ç±»æ˜¯è·å¾—å®¹å™¨æ‰€æœ‰å¯¹è±¡çš„ idï¼Œå¹¶æ‰“å°å‡ºæ¥ï¼Œå¦‚ä¸‹ é™¤äº†å‰é¢äº”ä¸ªåšåˆå§‹åŒ–å·¥ä½œçš„å¯¹è±¡ä»¥åŠé…ç½®ç±»å¯¹è±¡ï¼Œåªæœ‰ UserServiceImpl è¢«æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œè¿™æ¬¡æˆ‘ä»¬ä¿®æ”¹è¿‡æ»¤è§„åˆ™ä¸º custom.expression=com.xt..*custom.basePackage=com.xt Aspectj è¡¨è¾¾å¼ä¸ºå°† com.xt åŒ…åŠå…¶å­å­™åŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œå†æ¬¡è¿ç®—æµ‹è¯•ç±»ï¼Œè¾“å‡ºä¸º è¿™æ—¶ com.xt.utils.Logger å¯¹è±¡ä¹Ÿè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­äº†ã€‚ æ³¨æ„ï¼šä¸Šé¢çš„ UserServiceImpl å’Œ Logger éƒ½æ²¡æœ‰ä½¿ç”¨ä»»ä½•æ³¨è§£è¿›è¡Œä¿®é¥°ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ Java ç±»ã€‚ ImportBeanDefinitionRegistrarImportBeanDefinitionRegistrar çš„åŠŸèƒ½åŒ ImportSelectorï¼Œä¸è¿‡äºŒè€…çš„è¿”å›å€¼ä¸åŒï¼ŒImportSelector è¿”å›ä¸€ä¸ªè¦æ·»åŠ åˆ°å®¹å™¨ä¸­ç±»ååç§°ç»„æˆçš„æ•°ç»„ï¼Œè€Œ ImportBeanDefinitionRegistrar ä»€ä¹ˆéƒ½ä¸è¿”å›ï¼Œè¯´æ˜åœ¨ ImportBeanDefinitionRegistrar å†…éƒ¨å·²ç»å°†æ‰«æåŒ…ä¸‹ç¬¦åˆè§„åˆ™çš„ç±»æ·»åŠ åˆ°å®¹å™¨ä¸­å»äº†ã€‚ç°åœ¨æˆ‘ä»¬è¦å®ç°ä¸ä¸Šé¢ç›¸åŒçš„åŠŸèƒ½ï¼Œæ–°å»º custom.CustomImportBeanDefinitionRegistrarï¼Œå¦‚ä¸‹ package custom;import org.springframework.beans.factory.support.BeanDefinitionRegistry;import org.springframework.context.annotation.ClassPathBeanDefinitionScanner;import org.springframework.context.annotation.ImportBeanDefinitionRegistrar;import org.springframework.core.io.support.PropertiesLoaderUtils;import org.springframework.core.type.AnnotationMetadata;import org.springframework.core.type.filter.AspectJTypeFilter;import org.springframework.core.type.filter.TypeFilter;import java.util.Properties;public class CustomImportBeanDefinitionRegistrar implements ImportBeanDefinitionRegistrar &#123; private String expression; private String basePackage; public CustomImportBeanDefinitionRegistrar() &#123; try &#123; Properties properties = PropertiesLoaderUtils.loadAllProperties(\"customImport.properties\"); expression = properties.getProperty(\"custom.expression\"); basePackage = properties.getProperty(\"custom.basePackage\"); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; @Override public void registerBeanDefinitions(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry) &#123; // å¾—åˆ°æ‰«æå™¨ ClassPathBeanDefinitionScanner scanner = new ClassPathBeanDefinitionScanner(registry, false); // å¾—åˆ°è¿‡æ»¤å™¨ TypeFilter typeFilter = new AspectJTypeFilter(expression, CustomImportBeanDefinitionRegistrar.class.getClassLoader()); scanner.addIncludeFilter(typeFilter); // æ‰«ææŒ‡å®šåŒ… å°†ç¬¦åˆè¿‡æ»¤è§„åˆ™çš„ç±»å¯¹è±¡ç›´æ¥æ³¨å…¥åˆ°å®¹å™¨ä¸­ scanner.scan(basePackage);&#125; è¯¥ç±»çš„å¤§éƒ¨åˆ†å·¥ä½œä¸ CustomImport æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯æœ€åä½¿ç”¨äº† ClassPathBeanDefinitionScanner å¯¹è±¡ç›´æ¥æ‰«æåŒ…ï¼Œå°†ç¬¦åˆè¿‡æ»¤è§„åˆ™çš„ç±»å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ã€‚é…ç½®æ–‡ä»¶å’Œé…ç½®ç±»å¦‚ä¸‹ custom.expression=com.xt..*custom.basePackage=com.xt package config;import custom.CustomImportBeanDefinitionRegistrar;import org.springframework.context.annotation.Import;@Import(CustomImportBeanDefinitionRegistrar.class)public class SpringConfiguration &#123;&#125; æµ‹è¯•ç±»ä¸ä¸Šé¢ç›¸åŒï¼Œè¿è¡Œæµ‹è¯•ç±»ï¼Œç»“æœå¦‚ä¸‹ ä¸ ImportSelector å®ç°çš„æ•ˆæœç›¸åŒï¼Œä¸è¿‡æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼ŒImportSelector çš„ id ç”Ÿæˆè§„åˆ™ä¸ºå…¨é™å®šç±»åï¼Œè€Œ ImportBeanDefinitionRegistrar çš„ id ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚ @PropertySource@PropertySource æ³¨è§£çš„ä½œç”¨æ˜¯ç”¨æ¥è¯»å–èµ„æºæ–‡ä»¶ï¼Œè¯¥æ³¨è§£çš„å®šä¹‰å¦‚ä¸‹ @Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Repeatable(PropertySources.class)public @interface PropertySource &#123; String name() default \"\"; String[] value(); boolean ignoreResourceNotFound() default false; String encoding() default \"\"; Class&lt;? extends PropertySourceFactory&gt; factory() default PropertySourceFactory.class;&#125; ä»–ä¸ä»…å¯ä»¥è¯»å– properties æ–‡ä»¶ï¼Œè¿˜å¯ä»¥è¯»å– xml æ–‡ä»¶ï¼Œç”šè‡³å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ yml æ–‡ä»¶è§£æå™¨è¯»å– yml æ–‡ä»¶ã€‚ ä¸»é…ç½®ç±»å¦‚ä¸‹ package config;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;import org.springframework.context.annotation.Import;import org.springframework.context.annotation.PropertySource;@Configuration@PropertySource(\"jdbc.properties\")@Import(&#123;JdbcConfig.class&#125;)public class SpringConfiguration &#123;&#125; åœ¨ä¸»é…ç½®ç±»ä¸­è¯»å–äº†é…ç½®æ–‡ä»¶ jdbc.propertiesï¼Œé…ç½®æ–‡ä»¶å’Œ JDBC é…ç½®ç±» JdbcConfig å¦‚ä¸‹æ‰€ç¤º jdbc.driver=com.mysql.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/sbjdbc.username=rootjdbc.password=root package config;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.context.annotation.Bean;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.datasource.DriverManagerDataSource;import javax.sql.DataSource;public class JdbcConfig &#123; @Value(\"$&#123;jdbc.driver&#125;\") private String driver; @Value(\"$&#123;jdbc.url&#125;\") private String url; @Value(\"$&#123;jdbc.username&#125;\") private String username; @Value(\"$&#123;jdbc.password&#125;\") private String password; @Bean(\"dataSource\") public DataSource createDataSource() &#123; DriverManagerDataSource dataSource = new DriverManagerDataSource(); dataSource.setDriverClassName(driver); dataSource.setUrl(url); dataSource.setUsername(username); dataSource.setPassword(password); return dataSource; &#125; @Bean(\"jdbcTemplate\") public JdbcTemplate createJdbcTemplate(@Autowired DataSource dataSource) &#123; return new JdbcTemplate(dataSource); &#125;&#125; æˆ‘ä»¬å°†é€šè¿‡ PropertySource è¯»å–åˆ°çš„èµ„æºï¼Œé€šè¿‡ @Value æ³¨è§£ï¼Œä»¥ Spring EL è¡¨è¾¾å¼çš„å½¢å¼æ³¨å…¥åˆ°äº†æˆå‘˜å˜é‡ä¸­ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è¯»å– xml æ–‡ä»¶ï¼Œæˆ‘ä»¬æ–°å»º jdbc.xmlï¼Œ å†…å®¹å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE properties SYSTEM \"http://java.sun.com/dtd/properties.dtd\"&gt;&lt;properties&gt; &lt;entry key=\"jdbc.driver\"&gt;com.mysql.jdbc.Driver&lt;/entry&gt; &lt;entry key=\"jdbc.url\"&gt;jdbc:mysql://localhost:3306/sb&lt;/entry&gt; &lt;entry key=\"jdbc.username\"&gt;root&lt;/entry&gt; &lt;entry key=\"jdbc.password\"&gt;root&lt;/entry&gt;&lt;/properties&gt; ä¿®æ”¹ @PropertySource çš„å€¼ @PropertySource(\"jdbc.xml\") ç”±ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œxml æ–‡ä»¶ç›¸å¯¹äº properties æœ‰æ›´åŠ æ˜æ˜¾çš„å±‚çº§å…³ç³»ï¼Œç»“æ„æ¯”è¾ƒæ¸…æ¥šï¼Œä½†æ˜¯è¿™ç§ä¼˜ç‚¹çš„ä»£ä»·å°±æ˜¯å†—ä½™æ€§æ€§å¾ˆé«˜ï¼Œä¸ºäº†è¡¨è¾¾çœŸæ­£æœ‰ç”¨çš„ä¿¡æ¯ï¼ŒåŠ å…¥å¾ˆå¤šæ— ç”¨çš„å†…å®¹ã€‚ä¸ºäº†æ•´åˆ properties å’Œ xml çš„ä¼˜ç‚¹ï¼Œäººä»¬æå‡ºäº†ä¸€ä¸ªæ–°çš„æ ¼å¼çš„æ–‡ä»¶ YAML(æ–‡ä»¶åç¼€åä¸º.yml)ï¼Œå®ƒä¸ä»…ä¹¦å†™ç®€å•ï¼Œå¹¶ä¸”å¯ä»¥è¡¨è¾¾å±‚çº§å…³ç³»ï¼Œæ–°å»º jdbc.yml å¦‚ä¸‹ jdbc: driver: com.mysql.jdbc.driver url: jdbc:mysql://localhost:3306/sb username: root password: root ä½†æ˜¯ @PropertySource é»˜è®¤åªæ”¯æŒ propeties å’Œ xml æ–‡ä»¶çš„è¯»å–ï¼Œå¦‚æœè¦æ”¯æŒ yml æ–‡ä»¶çš„è¯»å–ï¼Œå°±éœ€è¦è‡ªå·±å®šä¹‰è§£æç±»ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹çš„ç±»åº“æ¥è§£æ yml æ–‡ä»¶ï¼Œåœ¨ pom.xml ä¸­å¯¼å…¥è§£æ yml ç±»åº“çš„åæ ‡ &lt;dependency&gt; &lt;groupId&gt;org.yaml&lt;/groupId&gt; &lt;artifactId&gt;snakeyaml&lt;/artifactId&gt; &lt;version&gt;1.23&lt;/version&gt;&lt;/dependency&gt; ç„¶ååœ¨é…ç½®ç±»ä¸­ä¿®æ”¹å¦‚ä¸‹ @PropertySource(value = \"jdbc.yml\", factory = CustomYAMLPropertySourceFactory.class) æ–°å»º custom.CustomYAMLPropertySourceFactory å®ç° PropertySourceFactory æ¥å£ï¼Œå¦‚ä¸‹ package custom;import org.springframework.beans.factory.config.YamlPropertiesFactoryBean;import org.springframework.core.env.PropertiesPropertySource;import org.springframework.core.env.PropertySource;import org.springframework.core.io.support.EncodedResource;import org.springframework.core.io.support.PropertySourceFactory;import java.io.IOException;import java.util.Properties;public class CustomYAMLPropertySourceFactory implements PropertySourceFactory &#123; public PropertySource&lt;?&gt; createPropertySource(String name, EncodedResource encodedResource) throws IOException &#123; YamlPropertiesFactoryBean factoryBean = new YamlPropertiesFactoryBean(); // è§£æ yaml æ–‡ä»¶ factoryBean.setResources(encodedResource.getResource()); // å°†è§£æçš„æ–‡ä»¶è½¬æ¢ä¸º properties Properties properties = factoryBean.getObject(); // spring é»˜è®¤èƒ½è§£æ propertiesï¼Œä½¿ç”¨ spring æºç çš„ç±»å»è§£æ return name != null ? new PropertiesPropertySource(name, properties) : new PropertiesPropertySource(encodedResource.getResource().getFilename() ,properties); &#125;&#125; @DependsOnæœ‰çš„æ—¶å€™ä¸€ä¸ª Bean å¯¹è±¡éœ€è¦åœ¨å¦ä¸€ä¸ª Bean å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¹‹åæ‰èƒ½æ³¨å…¥åˆ°å®¹å™¨ï¼Œæ¯”å¦‚ One ç±»å¯¹ Two ç±»æœ‰ä¾èµ–å…³ç³»ï¼Œåœ¨é€»è¾‘ä¸Šéœ€è¦å…ˆæ³¨å…¥ Two å¯¹è±¡ï¼ŒOne, Two çš„å®šä¹‰å¦‚ä¸‹ package example;import org.springframework.stereotype.Component;@Componentpublic class One &#123; public One() &#123; System.out.println(\"oneè¢«åˆ›å»ºäº†\"); &#125;&#125; package example;import org.springframework.stereotype.Component;@Componentpublic class Two &#123; public Two() &#123; System.out.println(\"Twoè¢«åˆ›å»ºäº†\"); &#125;&#125; ä¸»é…ç½®ç±»å¦‚ä¸‹ package config;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan(\"example\")public class SpringConfiguration &#123;&#125; æµ‹è¯•ç±»å¦‚ä¸‹ import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); &#125;&#125; è¿è¡Œè¾“å‡ºä¸º One å…ˆäº Two å…ˆæ³¨å…¥å®¹å™¨ä¸­ï¼Œå¦‚æœéœ€è¦ One åœ¨ Two åï¼Œå¯ä»¥åŠ ä¸Š @DependsOn,å¦‚ä¸‹ package example;import org.springframework.context.annotation.DependsOn;import org.springframework.stereotype.Component;@Component@DependsOn(\"two\")public class One &#123; public One() &#123; System.out.println(\"oneè¢«åˆ›å»ºäº†\"); &#125;&#125; å†æ¬¡è¿è¡Œæµ‹è¯•ç±» è¿™æ—¶ Two ç±»å¯¹è±¡å…ˆè¢«åˆ›å»ºã€‚ @Lazy@Lazy æ˜¯ç”¨æ¥å»¶è¿ŸåŠ è½½æ—¶æœºçš„ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨åˆå§‹åŒ–å®¹å™¨æ—¶ï¼Œå°±ä¼šå°†æ‰«æåˆ°çš„ç±»å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¦‚æœå¯¹äºä¸€ä¸ªå¤§å‹çš„é¡¹ç›®ï¼Œå¯èƒ½ä¼šæœ‰æˆåƒä¸Šä¸‡ä¸ªç±»ï¼Œå¦‚æœåœ¨ä¸€å¼€å§‹å°±å°†å…¨éƒ¨çš„å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ï¼Œä¼šå¤§å¤§çš„å»¶ç¼“é¡¹ç›®çš„å¯åŠ¨æ—¶é—´ï¼Œæ‰€ä»¥ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦è¯¥ç±»å¯¹è±¡æ—¶æ‰æŠŠå¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œè¿˜æ˜¯åœ¨ä¸Šä¾‹ä¸­ï¼Œæ–°å»º Three package example;import org.springframework.context.annotation.Lazy;import org.springframework.stereotype.Component;@Componentpublic class Three &#123; public Three() &#123; System.out.println(\"threeè¢«åˆ›å»ºäº†\"); &#125;&#125; è¿è¡Œæµ‹è¯•ç±» import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); &#125;&#125; è¾“å‡ºä¸º æˆ‘ä»¬åªæ˜¯åœ¨æµ‹è¯•ç±»ä¸­åˆå§‹åŒ–äº†å®¹å™¨ï¼Œä½†æ˜¯ Three ç±»å¯¹è±¡å·²ç»è¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­äº†ã€‚è¿™æ—¶æˆ‘ä»¬å¯¹ Three ä½¿ç”¨ @Lazy æ³¨è§£ï¼Œå†æ¬¡è¿è¡Œæµ‹è¯•ç±» è¿™æ—¶ Three ç±»å¯¹è±¡å¹¶æ²¡æœ‰è¢«åˆ›å»ºï¼Œåªæœ‰æˆ‘ä»¬ç¬¬ä¸€æ¬¡å‘å®¹å™¨è·å–æ‰€éœ€å¯¹è±¡æ—¶ï¼Œæ‰ä¼šè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œä¿®æ”¹æµ‹è¯•ç±»å¦‚ä¸‹ import example.Three;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); System.out.println(\"===========================\"); Three three = ac.getBean(\"three\", Three.class); &#125;&#125; ç»“æœä¸º æ³¨æ„ï¼š@Lazy æ³¨è§£å¯¹äºèŒƒå›´ä¸ºå•ä¾‹çš„ç±»æœ‰æ•ˆã€‚ @Conditional@Conditional æ³¨è§£æ˜¯ç”¨æ¥è®¾å®šæ³¨å…¥æ¡ä»¶çš„ï¼Œå½“æ‰«æåˆ°æŸç±»æˆ–è€…æ–¹æ³•æ—¶ï¼Œæ˜¯å¦å°†è¯¥ç±»å¯¹è±¡æˆ–è¿”å›å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ï¼Œæ ¹æ® @Conditional æŒ‡å®šçš„æ¡ä»¶å†³å®šã€‚@Conditional æ³¨è§£çš„å®šä¹‰å¦‚ä¸‹ @Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface Conditional &#123; Class&lt;? extends Condition&gt;[] value();&#125; è¯¥æ³¨è§£åªæœ‰ä¸€ä¸ª value å±æ€§ï¼Œè¯¥å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªç»§æ‰¿äº† Condition æ¥å£çš„å­—èŠ‚ç å¯¹è±¡ï¼ŒCondition æ¥å£æœ‰ä¸€ä¸ª match æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå½“è¿”å› true æ—¶ï¼Œå¯ä»¥å°†å¯¹è±¡æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¦åˆ™ä¸è¡Œã€‚ ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ•°æ®æºï¼Œä¸€ä¸ªæ˜¯ Windows ä¸‹çš„æ•°æ®æºï¼Œä¸€ä¸ªæ˜¯ Linux ä¸‹çš„æ•°æ®æºï¼Œç°åœ¨æˆ‘ä»¬çš„ä»»åŠ¡æ ¹æ®æ“ä½œç³»ç»Ÿæ¥å†³å®šä½¿ç”¨å“ªä¸ªæ•°æ®æºæ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼ŒJdbcConfig ç±»å®šä¹‰å¦‚ä¸‹ package config;import condition.LinuxCondition;import condition.WindowsCondition;import org.springframework.beans.factory.annotation.Value;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Conditional;import org.springframework.jdbc.datasource.DriverManagerDataSource;import javax.sql.DataSource;public class JdbcConfig &#123; @Value(\"$&#123;jdbc.driver&#125;\") private String driver; @Value(\"$&#123;jdbc.url&#125;\") private String url; @Value(\"$&#123;jdbc.username&#125;\") private String username; @Value(\"$&#123;jdbc.password&#125;\") private String password; @Bean(\"dataSource\") @Conditional(WindowsCondition.class) public DataSource createWindowsDataSource() &#123; DriverManagerDataSource dataSource = new DriverManagerDataSource(); dataSource.setDriverClassName(driver); dataSource.setUrl(url); dataSource.setUsername(username); dataSource.setPassword(password); // ç”¨ä»¥è§‚å¯Ÿå“ªä¸ªæ•°æ®æºè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ System.out.println(\"Windows Env\"); return dataSource; &#125; @Bean(\"dataSource\") @Conditional(LinuxCondition.class) public DataSource createLinuxDataSource() &#123; DriverManagerDataSource dataSource = new DriverManagerDataSource(); dataSource.setDriverClassName(driver); dataSource.setUrl(url); dataSource.setUsername(username); dataSource.setPassword(password); // ç”¨ä»¥è§‚å¯Ÿå“ªä¸ªæ•°æ®æºè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ System.out.println(\"Linux Env\"); return dataSource; &#125;&#125; åœ¨ä¸Šé¢æˆ‘ä»¬å¯¹ Windows å’Œ Linux çš„æ•°æ®æºéƒ½ä½¿ç”¨äº† Conditional æ³¨è§£ï¼Œåˆ†åˆ«ä½¿ç”¨ WindowsCondition å’Œ LinuxCondition ç±»æ¥å†³å®šæ˜¯å¦æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼ŒäºŒç±»çš„å†…å®¹å¦‚ä¸‹ package condition;import org.springframework.context.annotation.Condition;import org.springframework.context.annotation.ConditionContext;import org.springframework.core.env.Environment;import org.springframework.core.type.AnnotatedTypeMetadata;public class WindowsCondition implements Condition &#123; public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) &#123; // è·å¾—ç¯å¢ƒå¯¹è±¡ Environment environment = context.getEnvironment(); // è·å¾—æ“ä½œç³»ç»Ÿåç§° String osName = environment.getProperty(\"os.name\"); System.out.println(osName); // å¦‚æœåŒ…å« Windows åˆ™å¯ä»¥æ³¨å…¥ if (osName.contains(\"Windows\")) &#123; return true; &#125; return false; &#125;&#125; package condition;import org.springframework.context.annotation.Condition;import org.springframework.context.annotation.ConditionContext;import org.springframework.core.env.Environment;import org.springframework.core.type.AnnotatedTypeMetadata;public class LinuxCondition implements Condition &#123; public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) &#123; Environment environment = context.getEnvironment(); String osName = environment.getProperty(\"os.name\"); System.out.println(osName); if (osName.contains(\"Linux\")) &#123; return true; &#125; return false; &#125;&#125; é…ç½®ç±»å’Œæµ‹è¯•ç±»å¦‚ä¸‹æ‰€ç¤º package config;import org.springframework.context.annotation.Configuration;import org.springframework.context.annotation.Import;import org.springframework.context.annotation.PropertySource;@Configuration@PropertySource(\"classpath:jdbc.properties\")@Import(JdbcConfig.class)public class SpringConfiguration &#123;&#125; import org.springframework.context.annotation.AnnotationConfigApplicationContext;import javax.sql.DataSource;public class SpringTest &#123; public static void main(String[] args) &#123; AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); DataSource dataSource = ac.getBean(\"dataSource\", DataSource.class); &#125;&#125; è¿è¡Œæµ‹è¯•ç±»ï¼Œè¾“å‡ºä¸º @Profileæœ‰çš„æ—¶å€™æˆ‘ä»¬åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹æ³¨å…¥åˆ°å®¹å™¨ä¸­çš„ç±»æ˜¯ä¸åŒçš„ï¼Œæ¯”å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸‹ä¸‰è€…æ³¨å…¥çš„ç±»æ˜¯ä¸åŒçš„ï¼Œè¦å®ç°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šé¢æåŠçš„ @Conditional æ³¨è§£ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ä¸Šè¿°é—®é¢˜æ¯”è¾ƒå¸¸è§ï¼Œæ‰€ä»¥ Spring ä¸ºæˆ‘ä»¬æä¾›äº† @Profile æ³¨è§£æ¥å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œ @Profile çš„å®šä¹‰å¦‚ä¸‹ @Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)@Retention(RetentionPolicy.RUNTIME)@Documented@Conditional(ProfileCondition.class)public @interface Profile &#123; String[] value();&#125; å¯ä»¥è§‚å¯Ÿåˆ° @Profile çš„åº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨äº† @Conditional æ³¨è§£ï¼Œ@Profile æ³¨è§£åªæœ‰ä¸€ä¸ªå±æ€§å€¼ valueï¼Œå®ƒæ˜¯ç”¨æ¥å®šä¹‰ç¯å¢ƒåç§°çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ dev ä»£è¡¨å¼€å‘ç¯å¢ƒï¼Œtest ä»£è¡¨æµ‹è¯•ç¯å¢ƒï¼Œprod ä»£è¡¨ç”Ÿäº§ç¯å¢ƒã€‚ åœ¨é…ç½®å¥½ç±»å±äºå“ªä¸ªç¯å¢ƒåï¼Œå¯ä»¥é€šè¿‡å®¹å™¨å¯¹è±¡ä¸­ç¯å¢ƒå¯¹è±¡ä¸­çš„setActiveProfiles()æ–¹æ³•æ¥æ¿€æ´»å¯¹åº”çš„ç¯å¢ƒï¼Œè¿™æ ·åªæœ‰å¯¹åº”ç¯å¢ƒçš„ç±»ä¼šè¢«æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œæˆ‘ä»¬æ–°å»ºä¸‰ä¸ªæµ‹è¯•ç±» package example;import org.springframework.context.annotation.Profile;import org.springframework.stereotype.Component;@Profile(\"dev\")@Componentpublic class Dev &#123; public Dev() &#123; System.out.println(\"å¼€å‘ç¯å¢ƒ\"); &#125;&#125; package example;import org.springframework.context.annotation.Profile;import org.springframework.stereotype.Component;@Profile(\"test\")@Componentpublic class Test &#123; public Test() &#123; System.out.println(\"æµ‹è¯•ç¯å¢ƒ\"); &#125;&#125; package example;import org.springframework.context.annotation.Profile;import org.springframework.stereotype.Component;@Profile(\"prod\")@Componentpublic class Prod &#123; public Prod() &#123; System.out.println(\"ç”Ÿäº§ç¯å¢ƒ\"); &#125;&#125; é…ç½®ç±»å¦‚ä¸‹ package config;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan(\"example\")public class SpringConfiguration &#123;&#125; æµ‹è¯•ç±»å¦‚ä¸‹ import config.SpringConfiguration;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; // ä¸èƒ½ä¼ å…¥é…ç½®ç±»çš„æ‰€åœ¨åŒ… æˆ–è€…é…ç½®å­—èŠ‚ç å¯¹è±¡ å¦åˆ™æ‰€æœ‰ä¸‰ä¸ªç±»éƒ½ä¸ä¼šè¢«æ³¨å…¥ AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(); // è®¾ç½®æ¿€æ´»çš„ç¯å¢ƒ ac.getEnvironment().setActiveProfiles(\"dev\"); // è®¾ç½®é…ç½®ç±» ac.register(SpringConfiguration.class); // åˆ·æ–°å®¹å™¨ ac.refresh(); &#125;&#125; è¾“å‡ºä¸º è‡ªåŠ¨æ³¨å…¥æˆ‘ä»¬ä¸€èˆ¬åœ¨ Service å±‚ä¸­ä¼šç”¨åˆ° Dao å±‚ä¸­çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ Service ä¸­ä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ª Dao å±‚çš„æˆå‘˜å˜é‡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸€èˆ¬æ˜¯åœ¨å®¹å™¨ä¸­çš„ï¼Œæ‰€ä»¥ Service å±‚éœ€è¦å‘å®¹å™¨ç´¢å–å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³¨è§£ä½¿å¾—å®¹å™¨ä¸­çš„å¯¹è±¡è‡ªåŠ¨æ³¨å…¥åˆ°å¯¹åº”çš„æˆå‘˜å˜é‡ä¸­ï¼Œä¸‹é¢å°±ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„è‡ªåŠ¨æ³¨å…¥æ³¨è§£ã€‚ @Autowiredå’Œ@Qualifier@Autowired æ³¨è§£é¦–å…ˆä¼šæ ¹æ®æˆå‘˜å˜é‡çš„ç±»å‹å»å®¹å™¨ä¸­æ‰¾å¯¹åº”ç±»å‹çš„æ³¨è§£ï¼Œå¦‚æœæœ‰å¤šä¸ªç›¸åŒç±»å‹çš„å¯¹è±¡ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨æˆå‘˜å˜é‡çš„åç§°ä½œä¸º id å»å®¹å™¨ä¸­å¯»æ‰¾å¯¹åº”çš„å¯¹è±¡ã€‚ JdbcConfig ç±»å¦‚ä¸‹ package config;import org.springframework.context.annotation.Bean;import org.springframework.jdbc.datasource.DriverManagerDataSource;import javax.sql.DataSource;public class JdbcConfig &#123; @Bean(\"dataSource1\") public DataSource createDataSource1() &#123; return new DriverManagerDataSource(); &#125; @Bean(\"dataSource2\") public DataSource createDataSource2() &#123; return new DriverManagerDataSource(); &#125;&#125; æˆ‘ä»¬å‘å®¹å™¨ä¸­æ³¨å…¥äº†ä¸¤ä¸ª DataSource å¯¹è±¡ï¼Œè¿™æ—¶æˆ‘ä»¬åœ¨ TestAutowired ä¸­ä½¿ç”¨ @AutoWired æ³¨è§£ï¼Œå¦‚ä¸‹ package test;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;import javax.sql.DataSource;@Componentpublic class TestAutowired &#123; @Autowired DataSource dataSource;&#125; ç”±äºåœ¨å®¹å™¨ä¸­æœ‰ä¸¤ä¸ª DataSource ç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥ @Autowired æ— æ³•æ ¹æ®ç±»å‹è‡ªåŠ¨æ³¨å…¥ï¼Œæ‰€ä»¥ @Autowired ä¼šæ ¹æ®å˜é‡å dataSource ä½œä¸º id å»å®¹å™¨ä¸­å¯»æ‰¾å¯¹è±¡æ³¨å…¥ï¼Œä½†æ˜¯åœ¨å®¹å™¨ä¸­å¹¶æ²¡æœ‰ id ä¸º dataSource çš„å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½å¤ŸæˆåŠŸæ³¨å…¥ã€‚ ä¸ºäº†è§£å†³ä¸Šé¢ @Autowired æ³¨è§£å­˜åœ¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ @Qualifier æ³¨è§£æŒ‡å®šè‡ªåŠ¨æ³¨å…¥çš„ id åç§°ï¼Œå¦‚ @Autowired@Qualifier(\"dataSource1\")DataSource dataSource; æ³¨æ„ï¼š @Qualifier æ³¨è§£ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…åˆ @Autowired æ³¨è§£æˆ–åé¢æåˆ°çš„ @Inject æ³¨è§£ä½¿ç”¨ @Autowired æœ‰ä¸€ä¸ªå±æ€§ä¸º requiredï¼Œè¯¥å±æ€§æ˜¯è§„å®šæ˜¯å¦è¦æ±‚ä¸€å®šè¦æ³¨å…¥æˆåŠŸï¼Œé»˜è®¤ä¸º trueï¼Œå³å¿…é¡»æ³¨å…¥æˆåŠŸï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ @Injectå’Œ@Namedä½¿ç”¨ @Inject å’Œ @Named éœ€è¦å¯¼å…¥å¯¹è±¡çš„åæ ‡ &lt;dependency&gt; &lt;groupId&gt;javax.inject&lt;/groupId&gt; &lt;artifactId&gt;javax.inject&lt;/artifactId&gt; &lt;version&gt;1&lt;/version&gt;&lt;/dependency&gt; @Inject æ³¨è§£æ˜¯ JSR330 è§„èŒƒè§„å®šçš„æ³¨è§£ï¼Œå®ƒçš„ä½œç”¨ä¹Ÿæ˜¯å®ç°è‡ªåŠ¨æ³¨å…¥æ³¨è§£ï¼Œå®ƒçš„è§„åˆ™æ˜¯æ ¹æ®ç±»å‹è‡ªåŠ¨æ³¨å…¥ï¼Œå¦‚æœæœ‰å¤šä¸ªç›¸åŒç±»å‹çš„å¯¹è±¡ï¼Œé‚£ä¹ˆä¼šä¿é”™ï¼Œä¸ @Autowired æ³¨è§£ä¸åŒï¼Œå¹¶ä¸ä¼šä»¥å˜é‡åä½œä¸º id ç»§ç»­å¯»æ‰¾ã€‚ @Named æ³¨è§£ä¹Ÿæ˜¯ JSR330 è§„èŒƒè§„å®šçš„æ³¨è§£ï¼Œå®ƒå¯ä»¥å’Œ @Inject æ³¨è§£é…åˆä½¿ç”¨ï¼Œå®ƒæ˜¯ç”¨æ¥è®¾ç½®åœ¨å®¹å™¨ä¸­çš„ id åç§°çš„ï¼Œä¸ @Qualifier æ³¨è§£ä¸€æ ·ï¼Œ@Named æ³¨è§£ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…åˆ @Autowired æ³¨è§£æˆ– @Inject ä½¿ç”¨ @Inject@Named(\"dataSource1\")DataSource dataSource; @Resource@Resource æ³¨è§£æ˜¯ JSR250 è§„èŒƒè§„å®šçš„æ³¨è§£ï¼Œå®ƒæœ‰ä¸€ä¸ª name å±æ€§ï¼Œè¯¥å±æ€§æ˜¯ç”¨æ¥æŒ‡å®šè‡ªåŠ¨æ³¨å…¥å¯¹è±¡åœ¨å®¹å™¨ä¸­çš„ idï¼ŒåŒ @Named å’Œ @Qualifier ä¸åŒï¼Œä»–å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œå¦‚ @Resource(name = \"dataSource1\")DataSource dataSource; @Primaryå½“æˆ‘ä»¬ä»…ä»…ä½¿ç”¨ Autowired æ—¶ï¼Œå¦‚æœå®¹å™¨ä¸­æœ‰å¤šä¸ªç›¸åŒç±»å‹çš„å¯¹è±¡ä¸”å®¹å™¨æ²¡æœ‰ä¸æˆå‘˜å˜é‡åç›¸åŒçš„å¯¹è±¡ï¼Œé‚£ä¹ˆæ³¨å…¥æ˜¯ä¼šå¤±è´¥çš„ï¼Œå¦‚ package config;import org.springframework.context.annotation.Bean;import org.springframework.jdbc.datasource.DriverManagerDataSource;import javax.sql.DataSource;public class JdbcConfig &#123; @Bean public DataSource createDataSource1() &#123; return new DriverManagerDataSource(); &#125; @Bean public DataSource createDataSource2() &#123; return new DriverManagerDataSource(); &#125;&#125; @AutowiredDataSource dataSource; è¿™æ—¶è‡ªåŠ¨æ³¨å…¥ä¼šå¤±è´¥ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ @Primary æ¥è¡¨æ˜é‚£ä¸ªå¯¹è±¡æ—¶ä¸»è¦çš„ï¼Œå½“æœ‰å¤šä¸ªç±»å‹ç›¸åŒçš„å¯¹è±¡æ—¶ï¼Œä¼˜å…ˆæ³¨å…¥è¯¥å¯¹è±¡ï¼Œå¦‚ @Bean@Primarypublic DataSource createDataSource1() &#123; return new DriverManagerDataSource();&#125; è¿™æ—¶ä½¿ç”¨ @Autowired æ³¨è§£ï¼Œä¼šé»˜è®¤æ³¨å…¥è¿™ä¸ª DataSource å¯¹è±¡ã€‚ @PostConstructå’Œ@PreDestroyåœ¨åˆ›å»º Bean åï¼Œå¯èƒ½éœ€è¦åšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ @PostConstruct æ³¨è§£ï¼Œåœ¨å¯¹è±¡è¢«é”€æ¯å‰ï¼Œå¯èƒ½éœ€è¦åšä¸€äº›èµ„æºçš„å›æ”¶å·¥ä½œï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ @PreDestroyï¼Œè¿™ä¸¤ä¸ªæ³¨è§£åªèƒ½æ”¾åœ¨æ–¹æ³•ä¸Šï¼Œæ–°å»ºä¸€ä¸ª utils.Logger ç±»å¦‚ä¸‹ package utils;import org.springframework.stereotype.Component;import javax.annotation.PostConstruct;import javax.annotation.PreDestroy;@Componentpublic class Logger &#123; public Logger() &#123; System.out.println(\"å¯¹è±¡åˆ›å»º\"); &#125; @PostConstruct public void init() &#123; System.out.println(\"åˆå§‹åŒ–å·¥ä½œ...\"); &#125; @PreDestroy public void destroy() &#123; System.out.println(\"èµ„æºå›æ”¶å·¥ä½œ...\"); &#125;&#125; æˆ‘ä»¬ä½¿ç”¨ @PostContruct æ³¨è§£äº† init æ–¹æ³•å’Œä½¿ç”¨ PreDestroy æ³¨è§£äº† destroy æ–¹æ³•ï¼Œè¿™æ„å‘³ç€å½“åˆ›å»ºLogger å¯¹è±¡åä¼šæ‰§è¡Œ init æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨ Logger å¯¹è±¡é”€æ¯å‰ï¼Œä¼šæ‰§è¡Œ destroy æ‰§è¡Œèµ„æºå›æ”¶å·¥ä½œã€‚ç°è¿›è¡ŒéªŒè¯ï¼Œé…ç½®ç±»å¦‚ä¸‹ package config;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan(\"utils\")public class SpringConfiguration &#123;&#125; æµ‹è¯•ç±»å¦‚ä¸‹ import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class SpringTest &#123; public static void main(String[] args) &#123; // åœ¨åˆ›å»ºå®¹å™¨æ—¶ ä¼šåˆ›å»º Logger å¯¹è±¡å¹¶æ³¨å…¥ï¼Œåˆ›å»ºå¯¹è±¡åä¼šæ‰§è¡Œ init æ–¹æ³• AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(\"config\"); // é”€æ¯å®¹å™¨ï¼Œ Logger å¯¹è±¡ä¼šè¢«ä¸€åŒé”€æ¯ åœ¨é”€æ¯å‰ä¼šæ‰§è¡Œ destroy æ–¹æ³• ac.close(); &#125;&#125; ç»“æœå¦‚ä¸‹ å‚è€ƒèµ„æ–™ Springé«˜çº§ä¹‹æ³¨è§£é©±åŠ¨å¼€å‘ @Profileè¿›è¡Œç¯å¢ƒåˆ‡æ¢","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"Spring","slug":"Spring","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Spring/"},{"name":"IOC","slug":"IOC","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/IOC/"}]},{"title":"Ajaxè·¨åŸŸ","date":"2020-04-21T16:00:00.000Z","path":"/Ajaxè·¨åŸŸ/","text":"åŒæºç­–ç•¥ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï¼šåŒ domain(æˆ–IP)ï¼ŒåŒç«¯å£ï¼ŒåŒåè®®è§†ä¸ºåŒä¸€ä¸ªåŸŸï¼Œä¸€ä¸ªåŸŸå†…çš„è„šæœ¬ä»…ä»…å…·æœ‰æœ¬åŸŸå†…çš„æƒé™ï¼Œå¯ä»¥ç†è§£ä¸ºæœ¬åŸŸè„šæœ¬åªèƒ½è¯»å†™æœ¬åŸŸå†…çš„èµ„æºï¼Œè€Œæ— æ³•è®¿é—®å…¶å®ƒåŸŸçš„èµ„æºï¼Œè¿™ç§å®‰å…¨é™åˆ¶ç§°ä¸ºåŒæºç­–ç•¥ã€‚æˆ‘ä»¬çœ‹å‡ ä¸ªä¾‹å­åˆ¤æ–­ä¸¤ä¸ªé“¾æ¥æ˜¯å¦æ˜¯åŒæº url1 url2 æ˜¯å¦åŒæº åŸå›  http://example.com:8080 http://example.com:80 å¦ ç«¯å£ä¸åŒ http://example.com:8080 https://example.com:8080 å¦ åè®®ä¸åŒ http://www.baidu.com http://www.taobao.com å¦ åŸŸåä¸åŒ http://127.0.0.1:8080 http://localhost:8080 å¦ åŸŸåä¸åŸŸåå¯¹åº”çš„IPåœ°å€ä¸åŒæº http://example.com:8000/a.js http://example.com:8000/b.js æ˜¯ åè®®ï¼ŒåŸŸåï¼Œç«¯å£ç›¸åŒï¼Œå­åŸŸåä¸åŒ æˆ‘ä»¬é¦–å…ˆå¯åŠ¨ä¸€ä¸ª Node ç¨‹åºä½œä¸ºæœåŠ¡ç«¯ï¼Œå¯åŠ¨åœ¨æœ¬åœ°çš„ 4000 ç«¯å£ï¼Œå¦‚ä¸‹ const http = require('http');const server = http.createServer();server.on('request', function(req, res) &#123; res.end('hello world');&#125;)server.listen(4000, function() &#123; console.log('æœåŠ¡å¯åŠ¨åœ¨4000ç«¯å£...');&#125;) ç°åœ¨æˆ‘ä»¬åŒæ—¶åœ¨æœ¬åœ°çš„ 5501 ç«¯å£å¯åŠ¨ä¸€ä¸ªé™æ€æœåŠ¡å™¨æ˜¾ç¤ºç½‘é¡µï¼Œåœ¨ç½‘é¡µä¸­æˆ‘ä»¬å‘èµ·ä¸€ä¸ª ajax è¯·æ±‚ï¼Œå‘æœ¬åœ°çš„ 4000 ç«¯å£è¯·æ±‚æ•°æ®ï¼Œå³æˆ‘ä»¬åˆšåˆšæ­çš„ Node ç¨‹åº const xhr = new XMLHttpRequest();xhr.onreadystatechange = function () &#123; if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; console.log(xhr.responseText); &#125; &#125; xhr.onerror = function() &#123; console.error('å‡ºé”™äº†') &#125;xhr.open('get', 'http://127.0.0.1:4000');xhr.send(null); è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ‰“å¼€æ§åˆ¶å°ï¼Œå‘ç°ç»™å‡ºè¿™æ ·çš„é”™è¯¯ä¿¡æ¯ å› ä¸ºç½‘é¡µçš„åœ°å€ http://127.0.0.1:5501 ä¸æœåŠ¡å™¨çš„åœ°å€ http://127.0.0.1:4000 å®ƒä»¬çš„ç«¯å£æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯ä¸åŒæºçš„ï¼Œæ‰€ä»¥è¿™ä¸ªè¯·æ±‚æ˜¯è·¨åŸŸçš„è¯·æ±‚ï¼Œè€Œæµè§ˆå™¨æ˜¯ä¸å…è®¸è·¨åŸŸè¯·æ±‚çš„ã€‚é‚£ä¹ˆæµè§ˆå™¨ä¸ºä»€ä¹ˆä¼šæå‡ºåŒæºç­–ç•¥ï¼Œè¿™æ˜¯å‡ºäºå®‰å…¨çš„è€ƒè™‘ã€‚åŒæºç­–ç•¥åŒ…æ‹¬ä¸¤ç§ï¼š DOM åŒæºç­–ç•¥ï¼šç¦æ­¢å¯¹ä¸åŒæºé¡µé¢ DOM è¿›è¡Œæ“ä½œï¼Œè¿™é‡Œä¸»è¦åœºæ™¯æ˜¯ iframe è·¨åŸŸçš„æƒ…å†µï¼Œä¸åŒåŸŸåçš„ iframe æ˜¯é™åˆ¶äº’ç›¸è®¿é—®çš„ XMLHttpRequest åŒæºç­–ç•¥ï¼šç¦æ­¢ä½¿ç”¨ xhr å¯¹è±¡å‘ä¸åŒæºçš„æœåŠ¡å™¨åœ°å€å‘èµ· HTTP è¯·æ±‚ åœ¨è¿™é‡Œæˆ‘ä»¬åªå…³æ³¨ Ajax è·¨åŸŸï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚æœæ²¡æœ‰åŒæºç­–ç•¥ä¼šæœ‰ä»€ä¹ˆå±å®³ï¼š ç”¨æˆ·ç™»å½•äº†è‡ªå·±çš„é“¶è¡Œé¡µé¢ http://mybank.comï¼Œhttp://mybank.com å‘ç”¨æˆ·çš„ cookie ä¸­æ·»åŠ ç”¨æˆ·æ ‡è¯† ç”¨æˆ·æµè§ˆäº†æ¶æ„é¡µé¢ http://evil.comï¼Œæ‰§è¡Œäº†é¡µé¢ä¸­çš„æ¶æ„ Ajax è¯·æ±‚ä»£ç  http://evil.com å‘ http://mybank.com å‘èµ· Ajax HTTP è¯·æ±‚ï¼Œè¯·æ±‚ä¼šé»˜è®¤æŠŠ http://mybank.com å¯¹åº” cookie ä¹ŸåŒæ—¶å‘é€è¿‡å» é“¶è¡Œé¡µé¢ä»å‘é€çš„ cookie ä¸­æå–ç”¨æˆ·æ ‡è¯†ï¼ŒéªŒè¯ç”¨æˆ·æ— è¯¯ï¼Œresponse ä¸­è¿”å›è¯·æ±‚æ•°æ®ï¼Œæ­¤æ—¶æ•°æ®å°±æ³„éœ²äº† è€Œä¸”ç”±äº Ajax åœ¨åå°æ‰§è¡Œï¼Œç”¨æˆ·æ— æ³•æ„ŸçŸ¥è¿™ä¸€è¿‡ç¨‹ æ‰€ä»¥æœ‰äº†åŒæºç­–ç•¥æˆ‘ä»¬æ‰èƒ½å¤Ÿå®‰å…¨çš„ä¸Šç½‘ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬è¿˜æ˜¯æœ‰è·¨åŸŸçš„éœ€æ±‚çš„ï¼Œå¹¶ä¸”ç°åœ¨éšç€å‰åç«¯åˆ†ç¦»çš„æµè¡Œï¼Œå‰ç«¯ä¸åç«¯ä¸åŒæºæ˜¯å¾ˆæœ‰å¯èƒ½ï¼Œæ‰€ä»¥è¿«åˆ‡éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸‹é¢å°±ä»‹ç»ä¸¤ç§è·¨åŸŸçš„æ–¹æ³•ã€‚ JSONPåŒæºç­–ç•¥æå‡äº† Web å‰ç«¯çš„å®‰å…¨æ€§ï¼Œä½†ç‰ºç‰²äº† Web æ‹“å±•ä¸Šçš„çµæ´»æ€§ã€‚è®¾æƒ³è‹¥æŠŠ htmlã€jsã€cssã€flashã€image ç­‰æ–‡ä»¶å…¨éƒ¨å¸ƒç½®åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå°ç½‘ç«™è¿™æ ·å‡‘æ´»è¿˜è¡Œï¼Œå¤§ä¸­ç½‘ç«™å¦‚æœè¿™æ ·åšæœåŠ¡å™¨æ ¹æœ¬å—ä¸äº†çš„ã€‚æ‰€ä»¥ï¼Œç°ä»£æµè§ˆå™¨åœ¨å®‰å…¨æ€§å’Œå¯ç”¨æ€§ä¹‹é—´é€‰æ‹©äº†ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚åœ¨éµå¾ªåŒæºç­–ç•¥çš„åŸºç¡€ä¸Šï¼Œé€‰æ‹©æ€§åœ°ä¸ºåŒæºç­–ç•¥å¼€æ”¾äº†åé—¨ï¼Œ ä¾‹å¦‚ img script style ç­‰æ ‡ç­¾ï¼Œéƒ½å…è®¸å®åŸŸå¼•ç”¨èµ„æºï¼Œä¸¥æ ¼è¯´è¿™éƒ½æ˜¯ä¸ç¬¦åˆåŒæºè¦æ±‚çš„ã€‚ æ­£æ˜¯åˆ©ç”¨ script æ ‡ç­¾å¼•ç”¨çš„èµ„æºæ²¡æœ‰åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ script å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè€ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªå›è°ƒï¼Œå°†æ•°æ®ä½œä¸ºå‚æ•°è¿”å›ï¼Œè¿™ä¸€æ ·å°±å¯ä»¥æ‹¿åˆ°æƒ³è¦çš„æ•°æ®ã€‚å¯èƒ½ä½ ç°åœ¨ä¸èƒ½æ˜ç™½æ˜¯ä»€ä¹ˆæ„æ€ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨é¡µé¢ä¸­æ·»åŠ ä¸‹é¢çš„å†…å®¹ &lt;script&gt; function getData(data) &#123; console.log(data); &#125; // åˆ›å»ºä¸€ä¸ª script æ ‡ç­¾ç”¨ä»¥è¯·æ±‚æ•°æ® let scriptElement = document.createElement('script'); // è®¾ç½®è¯·æ±‚çš„åœ°å€ å¹¶ä¸”è®¾ç½®äº†å¤„ç†æ•°æ®çš„å›è°ƒå‡½æ•°åç§° scriptElement.src = 'http://127.0.0.1:4000?callback=getData'; // è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œä¸è®¾ç½®çš„è¯æµè§ˆå™¨ä¼šæŠ¥é”™ Uncaught SyntaxError: Unexpected identifier scriptElement.setAttribute('type', 'text/javascript'); // å°†è¿™ä¸ª script æ ‡ç­¾æ·»åŠ åˆ° body ä¸­ document.getElementsByTagName('body')[0].appendChild(scriptElement);&lt;/script&gt; Node æœåŠ¡ç«¯çš„ä»£ç  const http = require('http');const querystring = require('querystring');const server = http.createServer();server.on('request', function(req, res) &#123; let qs = querystring.parse(req.url.split('?')[1]); // è§£æè¯·æ±‚å‚æ•° let data = \"Hello World\"; // è¿”å›çš„æ•°æ® // ä¸€å®šè¦åœ¨ $&#123;data&#125; ä¸¤ç«¯åŠ ä¸ŠåŒå¼•å·ï¼Œå¦åˆ™æµè§ˆå™¨å¾—åˆ°çš„æ˜¯ getData(Hello World)ä¼šæŠ¥é”™ res.end(`$&#123;qs.callback&#125;(\"$&#123;data&#125;\")`); // å³getData(data)&#125;)server.listen(4000, function() &#123; console.log('æœåŠ¡å¯åŠ¨åœ¨4000ç«¯å£...');&#125;) ç»“æœå¦‚ä¸‹ æˆ‘æ¥ç†ä¸€ä¸‹ä¸Šé¢çš„æ­¥éª¤ é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå‡½æ•° getDataï¼Œè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯ç”¨æ¥å¤„ç†æ•°æ®çš„ï¼Œæ¥æ”¶çš„é‚£ä¸ªå‚æ•°å°±æ˜¯æ•°æ® function getData(data) &#123; console.log(data);&#125; åˆ›å»ºä¸€ä¸ª script æ ‡ç­¾ï¼Œå¹¶ä¸”è®¾ç½®äº†è¯·æ±‚çš„åœ°å€ï¼Œä»¥åŠå°†å¤„ç†æ•°æ®å‡½æ•°çš„åç§°å³ getData ä½œä¸ºå‚æ•°ä¼ å…¥ script.src = 'http://127.0.0.1:4000?callback=getData'; æœåŠ¡å™¨æ¥åˆ°è¯·æ±‚ï¼Œå°†è¦è¿”å›çš„æ•°æ®ä½œä¸ºä¼ å…¥çš„å›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥ res.end(`$&#123;qs.callback&#125;(\"$&#123;data&#125;\")`); // å³getData(data) script æ ‡ç­¾å¾—åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œå³ getData(&quot;Hello World&quot;)ï¼Œscript å¾—åˆ°çš„æ•°æ®æ˜¯å¯æ‰§è¡Œçš„ä»£ç ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ getData() æ–¹æ³•ï¼Œè¿™æ ·æ•°æ® Hello World å°±ä½œä¸ºå‚æ•°ä¼ é€’ç»™äº† getData() ä¼˜ç‚¹ï¼š ä½¿ç”¨ç®€ä¾¿ï¼Œæ²¡æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„è·¨åŸŸæ–¹æ³• ç¼ºç‚¹ï¼š åªæ”¯æŒ GET è¯·æ±‚ï¼Œå¹¶ä¸”ä»£ç æ˜¯ä»å…¶ä»–åŸŸå¾—åˆ°çš„ï¼Œä¸æ’é™¤å¯èƒ½æœ‰æ¶æ„ä»£ç ï¼Œæ‰€ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ï¼ŒæœåŠ¡ç«¯å¿…é¡»ç¡®ä¿å€¼å¾—ä¿¡ä»» è¦ç¡®å®š JSONP è¯·æ±‚å¤±è´¥å¹¶ä¸å®¹æ˜“ CORSCORS(Cross-origin resource sharingï¼Œè·¨åŸŸèµ„æºå…±äº«) æ˜¯ä¸€ä¸ª W3C æ ‡å‡†ï¼Œå®šä¹‰äº†åœ¨å¿…é¡»è®¿é—®è·¨åŸŸèµ„æºæ—¶ï¼Œæµè§ˆå™¨ä¸æœåŠ¡å™¨åº”è¯¥å¦‚ä½•æ²Ÿé€šã€‚CORS èƒŒåçš„åŸºæœ¬æ€æƒ³ï¼Œå°±æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„ HTTP å¤´éƒ¨è®©æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œæ²Ÿé€šï¼Œä»è€Œå†³å®šè¯·æ±‚æˆ–å“åº”æ˜¯åº”è¯¥æˆåŠŸï¼Œè¿˜æ˜¯åº”è¯¥å¤±è´¥ã€‚CORS éœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼ŒIE æµè§ˆå™¨ä¸èƒ½ä½äº IE10ã€‚ å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œæˆ‘ä»¬åªè¦æ­£å¸¸çš„å‘å‡º Ajax è¯·æ±‚å³å¯ï¼Œä¸ä¹‹å‰æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œå¦‚ const xhr = new XMLHttpRequest();xhr.onreadystatechange = function () &#123; if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; console.log(xhr.responseText); &#125; &#125; xhr.onerror = function() &#123; console.error('å‡ºé”™äº†') &#125;xhr.open('get', 'http://127.0.0.1:4000');xhr.send(null); ä½†æ˜¯åœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬è¦è®¾ç½®ä¸€ä¸‹ä¿¡èµ–çš„è¯·æ±‚æ¥æºï¼Œå¦‚ä¸‹ const http = require('http');const server = http.createServer();server.on('request', function(req, res) &#123; // è¡¨ç¤ºæ¥è‡ª http://127.0.0.1:5501 çš„è¯·æ±‚å¯ä»¥æ‹¿åˆ°æ•°æ® res.setHeader('Access-Control-Allow-Origin', 'http://127.0.0.1:5501') res.end('hello world');&#125;)server.listen(4000, function() &#123; console.log('æœåŠ¡å¯åŠ¨åœ¨4000ç«¯å£...');&#125;) é™¤äº†å¯ä»¥è®¾ç½®è¯·æ±‚æ¥æºï¼Œè¿˜å¯ä»¥è®¾ç½®å…è®¸çš„æ–¹æ³•ï¼Œå…è®¸çš„å¤´éƒ¨ç­‰ç­‰ å“åº”å¤´ ä½œç”¨ Access-Control-Allow-Origin è®¾ç½®å…è®¸çš„è¯·æ±‚æ¥æºï¼Œå¦‚æœå…è®¸ä»»æ„æ¥æºï¼Œå¯ä»¥è®¾ç½®ä¸º * Access-Control-Allow-Methods å…è®¸çš„æ–¹æ³•ï¼Œå¤šä¸ªä»¥é€—å·åˆ†éš”ï¼Œå¦‚ GET, POST Access-Control-Allow-Headers å…è®¸çš„è¯·æ±‚å¤´ï¼Œå¤šä¸ªä»¥é€—å·åˆ†éš” æµè§ˆå™¨å°† CORS è¯·æ±‚åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«ä¸ºç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚ã€‚å¦‚æœæ»¡è¶³ä»¥ä¸‹ä¸¤ç±»è¯·æ±‚ï¼Œå°±æ˜¯ç®€å•è¯·æ±‚ è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ï¼š GET POST HEAD HTTP çš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š Accept Accept-Language Content-Language Last-Event-ID Content-Typeï¼šåªé™äºä¸‰ä¸ªå€¼ application/x-www-form-urlencodedã€multipart/form-dataã€text/plain å¦‚æœä¸æ»¡è¶³ä»¥ä¸Šçš„ä¸¤å¤§æ¡ä»¶ï¼Œé‚£ä¹ˆå°±æ˜¯éç®€å•è¯·æ±‚ï¼Œè€Œæµè§ˆå™¨å¯¹äºç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚çš„å¤„ç†æ˜¯ä¸ä¸€æ ·çš„ã€‚ ç®€å•è¯·æ±‚ åœ¨è¯·æ±‚ä¸­éœ€è¦é™„åŠ ä¸€ä¸ªé¢å¤–çš„ Origin å¤´éƒ¨ï¼Œå…¶ä¸­åŒ…å«è¯·æ±‚é¡µé¢çš„æºä¿¡æ¯ï¼ˆåè®®ã€åŸŸåå’Œç«¯å£ï¼‰ï¼Œä»¥ä¾¿æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå¤´éƒ¨ä¿¡æ¯æ¥å†³å®šæ˜¯å¦ç»™äºˆå“åº”ã€‚ä¾‹å¦‚ï¼šOrigin: http://127.0.0.1:5501 å¦‚æœæœåŠ¡å™¨è®¤ä¸ºè¿™ä¸ªè¯·æ±‚å¯ä»¥æ¥å—ï¼Œå°±åœ¨ Access-Control-Allow-Origin å¤´éƒ¨ä¸­å›å‘ç›¸åŒçš„æºä¿¡æ¯(å¦‚æœæ˜¯å…¬å…±èµ„æºï¼Œå¯ä»¥å›å‘ *)ï¼Œä¾‹å¦‚ï¼šAccess-Control-Allow-Originï¼šhttp://127.0.0.1:5501 æ²¡æœ‰è¿™ä¸ªå¤´éƒ¨æˆ–è€…æœ‰è¿™ä¸ªå¤´éƒ¨ä½†æºä¿¡æ¯ä¸åŒ¹é…ï¼Œæµè§ˆå™¨å°±ä¼šé©³å›è¯·æ±‚ï¼Œæ³¨æ„ï¼Œè¯·æ±‚å’Œå“åº”éƒ½ä¸åŒ…å« cookie ä¿¡æ¯ å¦‚æœéœ€è¦åŒ…å« cookie ä¿¡æ¯ï¼Œajax è¯·æ±‚éœ€è¦è®¾ç½® xhr çš„å±æ€§ withCredentials ä¸º trueï¼ŒæœåŠ¡å™¨éœ€è¦è®¾ç½®å“åº”å¤´éƒ¨ Access-Control-Allow-Credentials: true éç®€å•è¯·æ±‚ éç®€å•è¯·æ±‚å¯èƒ½å¯¹æœåŠ¡å™¨æ•°æ®äº§ç”Ÿå‰¯ä½œç”¨ï¼Œæµè§ˆå™¨å¿…é¡»é¦–å…ˆä½¿ç”¨ OPTIONS æ–¹æ³•å‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚(preflight request)ï¼Œä»è€Œè·çŸ¥æœåŠ¡ç«¯æ˜¯å¦å…è®¸è¯¥è·¨åŸŸè¯·æ±‚ï¼Œ Originï¼šä¸ç®€å•çš„è¯·æ±‚ç›¸åŒ Access-Control-Request-Method: è¯·æ±‚è‡ªèº«ä½¿ç”¨çš„æ–¹æ³• Access-Control-Request-Headers: (å¯é€‰)è‡ªå®šä¹‰çš„å¤´éƒ¨ä¿¡æ¯ï¼Œå¤šä¸ªå¤´éƒ¨ä»¥é€—å·åˆ†éš” Origin: http://127.0.0.1:5501Access-Control-Request-Method: POSTAccess-Control-Request-Headers: NCZ å‘é€è¿™ä¸ªè¯·æ±‚åï¼ŒæœåŠ¡å™¨å¯ä»¥å†³å®šæ˜¯å¦å…è®¸è¿™ç§ç±»å‹çš„è¯·æ±‚ï¼Œä¸€æ—¦æœåŠ¡å™¨é€šè¿‡ Preflight è¯·æ±‚ï¼Œå…è®¸è¯¥è¯·æ±‚ä¹‹åï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨æ­£å¸¸çš„ CORS è¯·æ±‚ï¼Œå°±éƒ½è·Ÿç®€å•è¯·æ±‚ä¸€æ ·äº†ã€‚ ä¼˜ç‚¹ï¼š CORS é€šä¿¡ä¸åŒæºçš„ AJAX é€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ï¼Œå®¹æ˜“ç»´æŠ¤ æ”¯æŒæ‰€æœ‰ç±»å‹çš„ HTTP è¯·æ±‚ ç¼ºç‚¹ï¼š å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯ IE10 ä»¥ä¸‹çš„æµè§ˆå™¨ ç¬¬ä¸€æ¬¡å‘é€éç®€å•è¯·æ±‚æ—¶ä¼šå¤šä¸€æ¬¡è¯·æ±‚ å‚è€ƒé“¾æ¥ è·¨åŸŸçš„é‚£äº›äº‹å„¿ æµè§ˆå™¨åŒæºç­–ç•¥åŠè·¨åŸŸçš„è§£å†³æ–¹æ³•","tags":[{"name":"Ajax","slug":"Ajax","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Ajax/"}]},{"title":"JavaScriptæŸ¯é‡ŒåŒ–","date":"2020-04-20T16:00:00.000Z","path":"/JavaScriptæŸ¯é‡ŒåŒ–/","text":"æŸ¯é‡ŒåŒ–ä»‹ç»å‡½æ•°æŸ¯é‡ŒåŒ–æŒ‡çš„æ˜¯å‡½æ•°å¤„ç†ä¸€éƒ¨åˆ†çš„å‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªå‡½æ•°æ¥å¤„ç†å‰©ä½™çš„å‚æ•°ï¼Œå¦‚æ¯”å¦‚æœ‰ä¸€ä¸ªåŠ æ³•å‡½æ•°å¦‚ä¸‹ function add(x, y) &#123; return x + y;&#125;add(1, 2); // 3 ç°åœ¨å¦‚æœè¿™ä¸ªå‡½æ•°è¢«æŸ¯é‡ŒåŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹ä½¿ç”¨ const increment = add(1); // æ¥æ”¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°å¤„ç†ç¬¬äºŒä¸ªå‚æ•°increment(2); // 3increment(4); // 5 æŸ¯é‡ŒåŒ–å®ç°ç°åœ¨æ€ä¹ˆå®ç°è¿™ç§æ•ˆæœï¼Œå¦‚æœåªæ˜¯é’ˆå¯¹ä¸Šé¢çš„åŠ æ³•å‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥å¦‚ä¸‹å®ç° function add(x, y) &#123; return function(y) &#123; return x + y; &#125;&#125; ä½†æ˜¯è¿™ç§æ–¹æ³•æ˜æ˜¾åªå¯¹åŠ æ³•å‡½æ•°æœ‰æ•ˆï¼Œæˆ‘ä»¬ç°åœ¨æ˜¯æƒ³è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä¸ºå‚æ•°ï¼Œä½œç”¨å°±æ˜¯æŠŠè¿™ä¸ªå‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œå¹¶å°†è¿™ä¸ªæŸ¯é‡ŒåŒ–çš„å‡½æ•°è¿”å›ï¼Œæ¯”å¦‚ curryAdd = curry(add); // æ¥æ”¶addå‡½æ•°ï¼Œå°†å‡½æ•°addæŸ¯é‡ŒåŒ–const increment = curryAdd(1);increment(2); // 3increment(4); // 5 é¦–å…ˆå®ç°ä¸€ä¸ªç®€å•ç‰ˆæœ¬çš„ function curry(fn, ...args1) &#123; return function(...args2) &#123; fn(...args1, ...args2) &#125;&#125; ä½†æ˜¯è¿™ä¸ªå‡½æ•°æ˜æ˜¾æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œé‚£å°±æ˜¯åªèƒ½ä¼ å…¥ä¸¤æ¬¡å‚æ•°ï¼Œæ€ä¹ˆè§£å†³ï¼Œè‚¯å®šä½¿ç”¨é€’å½’äº† function curry(fn, ...args1) &#123; if (fn.length == args1.length) &#123; return fn(...args1); &#125; else &#123; return function(...args2) &#123; return curry(fn, ...args1, ...args2) &#125; &#125;&#125; ä¸Šé¢çš„å‡½æ•°é¦–å…ˆåˆ¤æ–­æ¥æ”¶çš„å‚æ•°çš„ä¸ªæ•°ä¸å‡½æ•°è¦æ±‚å‚æ•°çš„ä¸ªæ•°æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒåˆ™ç›´æ¥æ‰§è¡Œå‡½æ•°ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªå‡½æ•°æ¥å¤„ç†å‰©ä¸‹çš„å‚æ•°ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å‡½æ•°çš„æŸ¯é‡ŒåŒ–ã€‚ æŸ¯é‡ŒåŒ–åº”ç”¨ä¸¾ä¾‹ç°åœ¨æ¥çœ‹ä¸€ä¸‹æŸ¯é‡ŒåŒ–æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œå‡è®¾æœ‰ä¸€ä¸ª ajax è¯·æ±‚çš„å‡½æ•°å¦‚ä¸‹ function ajax(type, url, data) &#123; let xhr = new XMLHttpRequest(); xhr.onReadystateChange = function() &#123; // ... &#125; xhr.open(type, url); xhr.send(data);&#125; ç°åœ¨æˆ‘ä»¬å°†è¿™ä¸ªå‡½æ•°æŸ¯é‡ŒåŒ– let curriedAjax = curry(ajax);let post = curriedAjax('post'); æˆ‘ä»¬å‘ curriedAjax ä¼ å…¥ä¸€ä¸ªå‚æ•° postï¼Œå¾—åˆ°ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ç”¨æ¥å‘ post è¯·æ±‚çš„ï¼Œæˆ‘ä»¬æ¯æ¬¡å‘ post è¯·æ±‚æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨ post æ–¹æ³•å³å¯ï¼Œè¿™æ ·å‡½æ•°çš„å¤ç”¨æ€§æœ‰äº†æå¤§çš„å¢å¼ºï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä¼ å…¥å‚æ•° let postGoogle = post('https://www.google.com'); æˆ‘ä»¬åˆå¾—åˆ°äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å‘ https://www.google.com å‘é€ post è¯·æ±‚ï¼Œå‡½æ•°çš„å¤ç”¨æ€§åˆè¿›ä¸€æ­¥çš„æå‡ã€‚ ä½¿ç”¨è¿‡ jQuery çš„éƒ½çŸ¥é“ï¼Œå¯ä»¥ä½¿ç”¨ $.ajax() è¿™æ ·çš„é€šç”¨æ–¹æ³•ï¼Œä½†æ˜¯ä¹Ÿæœ‰ $.get() å’Œ $.post() è¿™æ ·çš„è¯­æ³•ç³–ï¼Œä½†æ˜¯ jQuery åº•éƒ¨æ˜¯ä¸æ˜¯è¿™æ ·å®ç°çš„å°±ä¸å¾—è€ŒçŸ¥äº†ã€‚ å‚è€ƒé“¾æ¥ å¤§ä½¬ï¼ŒJavaScript æŸ¯é‡ŒåŒ–ï¼Œäº†è§£ä¸€ä¸‹ JavaScriptä¸“é¢˜ä¹‹å‡½æ•°æŸ¯é‡ŒåŒ–","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"},{"name":"æŸ¯é‡ŒåŒ–","slug":"æŸ¯é‡ŒåŒ–","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%9F%AF%E9%87%8C%E5%8C%96/"}]},{"title":"JavaScripté—­åŒ…","date":"2020-04-17T16:00:00.000Z","path":"/JavaScripté—­åŒ…/","text":"JavaScriptçš„ä½œç”¨åŸŸJavaScript çš„ä½œç”¨åŸŸæœ‰ä¸¤ç§ å…¨å±€ä½œç”¨åŸŸ å‡½æ•°ä½œç”¨åŸŸ ä¸å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼ŒJavaScript æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œå‚è€ƒä»¥ä¸‹ç¨‹åº if (true) &#123; var x = 1;&#125;console.log(x); // 1 ä¸Šé¢çš„å˜é‡ x å®šä¹‰åœ¨ if çš„è¯­å¥å—ä¸­ï¼Œåœ¨å…¶ä»–çš„è¯­è¨€ä¸­ï¼Œx åœ¨è¯­å¥å—å¤–æ˜¯è®¿é—®ä¸åˆ°çš„ï¼Œä½†æ˜¯ç”±äº JavaScript æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥å˜é‡ x æ˜¯å…¨å±€å˜é‡ï¼Œæ‰€ä»¥åœ¨è¯­å¥å—å¤–ä¹Ÿå¯ä»¥è¢«è®¿é—®åˆ°ã€‚ æ³¨æ„ï¼š ä¸Šé¢çš„è®¨è®ºæ˜¯åŸºäº ES5 çš„ï¼Œåœ¨ ES6 ä¸­ï¼Œé€šè¿‡å…³é”®å­— let æˆ– const å£°æ˜çš„å˜é‡ï¼Œå¯ä»¥å®ç°å—çº§ä½œç”¨åŸŸçš„æ•ˆæœ if (true) &#123; let x = 1;&#125;console.log(x); // not defined JavaScript ä½œç”¨åŸŸé“¾JavaScript ä½œç”¨åŸŸé“¾æŒ‡çš„æ˜¯æŸ¥æ‰¾å˜é‡çš„é¡ºåºï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¨‹åº var i = 1;function foo() &#123; var i = 2; function bar() &#123; var i = 3; console.log(i); &#125; bar();&#125;foo(); // 3 åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åœ¨ bar() å‡½æ•°ä¸­è®¿é—®äº†å˜é‡ iï¼Œè¿™æ—¶ bar() ä¼šå…ˆåœ¨ bar() å‡½æ•°å†…éƒ¨æŸ¥æ‰¾æ˜¯å¦æœ‰å˜é‡ iï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šå» bar() å‡½æ•°çš„ä¸Šä¸€çº§ä½œç”¨åŸŸå³ foo() å‡½æ•°ä¸­å¯»æ‰¾ï¼Œå¦‚æœè¿˜æ²¡æœ‰ï¼Œåˆ™ä¼šå»å…¨å±€ä½œç”¨åŸŸå¯»æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šæŠ¥é”™å˜é‡æœªå®šä¹‰ï¼Œæ‰€ä»¥ä¸Šè¿° bar() å‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸º bar --&gt; foo --&gt; å…¨å±€ä½œç”¨åŸŸ ç¼–è¯‘å™¨ä¼šæ ¹æ®ä½œç”¨åŸŸé“¾å»å¯»æ‰¾å˜é‡ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™ä¼šæŠ¥é”™ã€‚ é—­åŒ…ä»‹ç»ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Œç®€å•çš„è¯´å°±æ˜¯å…è®¸å‡½æ•°è®¿é—®å¹¶æ“ä½œå‡½æ•°å¤–éƒ¨çš„å˜é‡ï¼Œåªè¦è¯¥å˜é‡å¤„äºè¯¥å‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­ï¼Œæ¯”å¦‚ function foo() &#123; var x = 1; return function() &#123; console.log(x); &#125;&#125;var func = foo();func(); // 1 å‡½æ•° foo() è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„è¿™ä¸ªå‡½æ•°ä¸­è®¿é—®äº†å˜é‡ xï¼Œæ ¹æ®æˆ‘ä»¬çš„è®²è§£ï¼Œä¼šæ ¹æ®è¿™ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸé“¾å»å¯»æ‰¾è¿™ä¸ªå˜é‡ xï¼Œè¯¥åŒ¿åå‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸé“¾ è¿”å›çš„åŒ¿åå‡½æ•° --&gt; foo --&gt; å…¨å±€ä½œç”¨åŸŸ æ‰€ä»¥å½“æ‰§è¡Œè¯¥åŒ¿åå‡½æ•°æ—¶ï¼Œä¼šæ ¹æ®ä¸Šè¿°çš„ä½œç”¨åŸŸé“¾å»å¯»æ‰¾å˜é‡ xï¼Œä¼šåœ¨ foo ä¸­æ‰¾åˆ°å˜é‡ xï¼Œæ‰€ä»¥è¾“å‡ºçš„ç»“æœæ˜¯ 1ã€‚ ä½ å¯èƒ½ä¼šæœ‰è¿™æ ·çš„ç–‘æƒ‘ï¼Œå½“æ‰§è¡Œå®Œå‡½æ•° foo() åï¼Œå˜é‡ x ä¸æ˜¯åº”è¯¥å·²ç»è¢«é”€æ¯äº†å—ï¼Œä¸ºä»€ä¹ˆè¿˜èƒ½å¤Ÿè¢«è®¿é—®ã€‚ä¹‹æ‰€ä»¥ä¼šæœ‰è¿™æ ·çš„æƒ³æ³•ï¼Œå¯èƒ½æ˜¯å—å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„å½±å“ï¼Œå¦‚ Cï¼ŒJava ç­‰ï¼Œä½†æ˜¯è¦æ˜ç™½ JavaScript ä¸è¿™äº›ç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œè‡³å°‘ Java ä¸èƒ½å¤Ÿè¿”å›å‡½æ•°ï¼Œå› ä¸ºè¿”å›çš„å‡½æ•°è¿˜ä¿å­˜ç€å¯¹å˜é‡ x çš„å¼•ç”¨ï¼Œæ‰€ä»¥å˜é‡ x åœ¨æ‰§è¡Œå®Œ foo() ä¹‹åæ˜¯ä¸ä¼šè¢«æ¸…é™¤çš„ï¼Œè¿™å°±æ˜¯è¿˜èƒ½å¤Ÿè®¿é—® x çš„åŸå› ã€‚ é‚£æ¥ä¸‹æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œçœ‹çœ‹ä½ æ˜¯å¦æ˜ç™½äº†é—­åŒ… for (var i = 0; i &lt; 10; i++) &#123; setTimeout(function()&#123; console.log(i); &#125;, i * 100)&#125; ä¸Šé¢çš„ç¨‹åºçš„æ•ˆæœæ˜¯å»¶æ—¶ i * 100 ms æ‰“å°è¾“å‡º iï¼Œä½ å¯èƒ½å¸Œæœ›å¾—åˆ°ä¸‹é¢è¿™æ ·çš„è¾“å‡º 0123456789 ä½†æ˜¯çœŸæ­£çš„ç»“æœæ˜¯ 10101010101010101010 è¿™æ˜¯å› ä¸º setTimeout æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå½“æ‰§è¡Œ setTimeout æ—¶ï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼Œè¿™äº›å›è°ƒå‡½æ•°ç­‰åˆ°å»¶è¿Ÿæ—¶é—´åˆ°äº†ä»¥åï¼Œä¼šå°†è¿™äº›å›è°ƒå‡½æ•°æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç®€å•æ¥è¯´ï¼Œå½“æ‰§è¡Œåˆ° setTimeout å‡½æ•°æ—¶ï¼Œä¸ä¼šæœ‰ä»»ä½•çš„é˜»ç¢ç›´æ¥è¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ï¼Œç­‰åˆ°å¾ªç¯æ‰§è¡Œå®Œæ¯•ï¼Œç¼–è¯‘å™¨ä¼šå–å‡ºäº‹ä»¶é˜Ÿåˆ—ä¸­çš„å‡½æ•°æ‰§è¡Œ(è¿™äº›å›è°ƒå‡½æ•°å¹¶ä¸æ˜¯æ‰§è¡Œåˆ° setTimeout æ–¹æ³•æ—¶ç«‹å³è¢«æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ï¼Œè€Œæ˜¯ç­‰åˆ°è®¾å®šçš„å»¶è¿Ÿæ—¶é—´åå†æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­çš„)ï¼Œæ‰€ä»¥å½“æ‰§è¡Œè¿™äº›å›è°ƒå‡½æ•°æ—¶ï¼Œå¾ªç¯å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œå˜é‡ i çš„å€¼å·²ç»å˜ä¸ºäº† 10ï¼Œè¿™äº›å›è°ƒå‡½æ•°æ ¹æ®å®ƒçš„ä½œç”¨åŸŸé“¾æ‰¾åˆ°çš„å˜é‡ i çš„å€¼å°±å…¨éƒ¨æ˜¯ 10 äº†ã€‚ é—­åŒ…å®ç°ç§æœ‰å˜é‡åœ¨ JavaScript ä¸­æ˜¯æ²¡æœ‰å…³é”®å­—å»å£°æ˜ç§æœ‰å˜é‡çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡é—­åŒ…æ¥å®ç°è¿™æ ·çš„æ•ˆæœï¼Œå¦‚ä¸‹ function Person () &#123; var name = 'ninja'; this.setName = function (value) &#123; name = value; &#125; this.getName = function () &#123; return name; &#125;&#125;var person = new Person();console.log(person.name); // è®¿é—®ä¸åˆ° undefinedconsole.log(person.getName()); // ninjaperson.setName('dummy');console.log(person.getName()); // dummy é€šè¿‡é—­åŒ…ï¼ŒsetName å’Œ getName å¯ä»¥å¯¹ name è¿›è¡Œè®¿é—®å’Œæ“ä½œï¼Œä½†æ˜¯å´ä¸èƒ½å¤Ÿè¢«å®ä¾‹å˜é‡ person è®¿é—®åˆ°ï¼Œå› ä¸º name å¹¶ä¸æ˜¯ person çš„å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®ç°äº†ç§æœ‰å˜é‡ã€‚ é—­åŒ…å¤„ç†å›è°ƒå‡½æ•°å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªåŠ¨ç”»å‡½æ•° var tick = 0;function animateIt(id) &#123; var element = document.getElementById(id); var timer = setInterval(function () &#123; if (tick &lt; 100) &#123; element.style.left = element.style.top = tick + \"px\"; tick++; &#125; else &#123; clearInterval(timer); &#125; &#125;, 10);&#125; è¯¥å‡½æ•°å®ç°åœ¨ 1s å†…å°†å…ƒç´ å‘ä¸‹å’Œå‘å³å¹³ç§» 100pxï¼Œå¦‚ä¸‹ document.getElementById(\"box1\").addEventListener('click', function () &#123; animateIt(\"box1\");&#125;) ä½†æ˜¯å½“æˆ‘ä»¬åŒæ—¶å¯¹ä¸¤ä¸ªå…ƒç´ ä½¿ç”¨åŠ¨ç”»æ—¶ï¼Œç”±äºäºŒè€…å…±äº«å˜é‡ tickï¼Œåˆ™ä¼šå¯¼è‡´äºŒè€…çš„åŠ¨ç”»çŠ¶æ€å‘ç”Ÿå†²çªï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¹åŠ¨å¦‚ä¸‹ function animateIt(id) &#123; var tick = 0; var element = document.getElementById(id); var timer = setInterval(function () &#123; if (tick &lt; 100) &#123; element.style.left = element.style.top = tick + \"px\"; tick++; &#125; else &#123; clearInterval(timer); &#125; &#125;, 10);&#125;document.getElementById(\"box1\").addEventListener('click', function () &#123; animateIt(\"box1\");&#125;)document.getElementById(\"box2\").addEventListener('click', function () &#123; animateIt(\"box2\");&#125;) æˆ‘ä»¬å°† tick å®šä¹‰åœ¨å‡½æ•°å†…ï¼Œç”±äºé—­åŒ…ï¼ŒsetInteval ä¸­çš„å›è°ƒå‡½æ•°å¯ä»¥è®¿é—®åˆ°tickï¼Œå¹¶ä¸”ä¸¤ä¸ªä¸åŒid å…ƒç´ çš„tickæ˜¯ä¸åŒçš„ï¼Œä¸ä¼šç›¸äº’å¹²æ‰°","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"},{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E9%97%AD%E5%8C%85/"}]},{"title":"ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨","date":"2020-04-14T16:00:00.000Z","path":"/ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨/","text":"é¢˜ç›®ï¼šè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œä»å°¾åˆ°å¤´åè¿‡æ¥æ‰“å°å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚é“¾è¡¨èŠ‚ç‚¹å®šä¹‰å¦‚ä¸‹ï¼š private static class ListNode &#123; private int value; private ListNode next; public ListNode(int value) &#123; this.value = value; &#125;&#125; å¦‚æœåªæ˜¯åè¿‡æ¥æ‰“å°èŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆå¾ˆç®€å•ï¼Œåªè¦éå†é“¾è¡¨ï¼Œå°†èŠ‚ç‚¹çš„å€¼ push åˆ°ä¸€ä¸ªæ ˆé‡Œé¢ï¼Œå› ä¸ºæ ˆçš„ç‰¹ç‚¹æ˜¯åè¿›å…ˆå‡ºï¼Œæ‰€ä»¥æœ€åæˆ‘ä»¬éå†æ ˆï¼Œè¾¾åˆ°çš„æ•ˆæœå°±æ˜¯å°†é“¾è¡¨ä»å°¾åˆ°å¤´æ‰“å°ï¼Œå¦‚ä¸‹ public static void printListReverse(ListNode root) &#123; if (root == null) &#123; return; &#125; Stack&lt;Integer&gt; stack = new Stack&lt;&gt;(); ListNode cur = root; // éå†é“¾è¡¨ å°†å€¼æ·»åŠ åˆ°æ ˆä¸­ while (cur != null) &#123; stack.push(cur.value); cur = cur.next; &#125; // éå†æ ˆ æ‰“å°æ ˆå¤´çš„å€¼ while (!stack.isEmpty()) &#123; System.out.println(stack.pop()); &#125;&#125; å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨é€’å½’ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåè¿‡æ¥æ‰“å°å³å…ˆæ‰“å°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶ååœ¨æ‰“å°å½“å‰èŠ‚ç‚¹ï¼Œå¦‚ä¸‹ public static void printListReverse2(ListNode root) &#123; // æ—¢æ˜¯é€’å½’é€€å‡ºçš„æ¡ä»¶ ä¹Ÿæ˜¯å¯¹ä¼ å…¥çš„é“¾è¡¨è¿›è¡Œæ£€æŸ¥ if (root == null) &#123; return; &#125; printListReverse2(root.next); System.out.println(root.value);&#125;","tags":[{"name":"å‰‘æŒ‡offer é“¾è¡¨","slug":"å‰‘æŒ‡offer-é“¾è¡¨","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer-%E9%93%BE%E8%A1%A8/"}]},{"title":"äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾","date":"2020-04-11T16:00:00.000Z","path":"/äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾/","text":"é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚ é¦–å…ˆå°†è¿™ä¸ªäºŒç»´æ•°ç»„çœ‹åšæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œè€ƒè™‘è¿™ä¹ˆä¸€ä¸ªæ€è·¯ï¼Œé¦–å…ˆåœ¨çŸ©é˜µä¸­é€‰å–ä¸€ä¸ªæ•°ï¼Œå¦‚æœè¦æŸ¥æ‰¾çš„æ•°å¤§äºè¿™ä¸ªæ•°ï¼Œé‚£ä¹ˆè¯¥æ•°åº”è¯¥åœ¨é€‰å–æ•°å­—çš„ä¸‹æ–¹æˆ–è€…å³æ–¹ï¼Œå¦‚æœè¯¥æ•°å°äºé€‰å–çš„æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°åº”è¯¥åœ¨é€‰å–æ•°å­—çš„ä¸Šæ–¹æˆ–è€…å·¦æ–¹ï¼Œæ— è®ºæ€æ ·ï¼ŒæŸ¥æ‰¾çš„æ•°éƒ½ä¼šåœ¨é€‰å–ä½ç½®çš„ä¸¤ä¸ªåŒºåŸŸéƒ½å‡ºç°ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªåŒºåŸŸæœ‰é‡å çš„éƒ¨åˆ†ï¼Œè¿™ä½¿å¾—é—®é¢˜è¾ƒä¸ºå¤æ‚ï¼Œ ç°åœ¨ä¸å¦¨æ¢ä¸€ç§æ€è·¯ï¼Œæˆ‘ä»¬ä»å³ä¸Šè§’å¼€å§‹è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæŸ¥æ‰¾çš„æ•°æ¯”å³ä¸Šè§’çš„æ•°å°ï¼Œé‚£ä¹ˆè¯¥æ•°åªå¯èƒ½åœ¨å·¦æ–¹ï¼Œå¦‚æœæŸ¥æ‰¾çš„æ•°æ¯”å³ä¸Šè§’å¤§ï¼Œé‚£ä¹ˆè¯¥æ•°åªå¯èƒ½åœ¨ä¸‹æ–¹ï¼ŒæŸ¥æ‰¾çš„æ•°éƒ½åªä¼šåœ¨ä¸€ä¸ªåŒºåŸŸå‡ºç°ï¼Œè¦ä¹ˆåœ¨å·¦æ–¹ï¼Œè¦ä¹ˆåœ¨ä¸‹æ–¹ï¼Œæ¯ä¸€æ¬¡æŸ¥æ‰¾éƒ½ä¼šä½¿å¾—æŸ¥æ‰¾çš„åŒºåŸŸå˜å°ï¼Œä¸‹é¢ä»¥æŸ¥æ‰¾æ•°å­—5ä¸ºä¾‹ ä»£ç å¦‚ä¸‹ public class Test &#123; public static boolean findInMatrix(int[][] matrix, int number) &#123; boolean found = false; // è·å¾—çŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•° int rows = matrix.length; int columns = matrix[0].length; if (matrix != null &amp;&amp; rows &gt; 0 &amp;&amp; columns &gt; 0) &#123; // ä»å³ä¸Šè§’å¼€å§‹æŸ¥æ‰¾ int row = 0; int column = columns - 1; // ç»§ç»­æŸ¥æ‰¾çš„æ¡ä»¶ while (row &lt; rows &amp;&amp; columns &gt;= 0) &#123; if (matrix[row][column] == number) &#123; // æ‰¾åˆ°é€€å‡ºwhileå¾ªç¯ found = true; break; &#125; else if (matrix[row][column] &gt; number) &#123; // æ¯”å³ä¸Šè§’å° åœ¨å·¦æ–¹ column--; &#125; else &#123; // å¦åˆ™æ¯”å³ä¸Šè§’å¤§ åœ¨ä¸‹æ–¹ row++; &#125; &#125; &#125; return found; &#125; public static void main(String[] args) &#123; int[][] matrix = &#123;&#123;1, 2, 3&#125;, &#123;2, 4, 6&#125;, &#123;3, 6, 9&#125;&#125;; boolean found = findInMatrix(matrix, 2); System.out.println(found); &#125;&#125;","tags":[{"name":"æ•°ç»„æŸ¥æ‰¾","slug":"æ•°ç»„æŸ¥æ‰¾","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E7%BB%84%E6%9F%A5%E6%89%BE/"}]},{"title":"jQueryç³»ç»Ÿæ•™ç¨‹","date":"2020-04-07T15:00:00.000Z","path":"/jQueryç³»ç»Ÿæ•™ç¨‹/","text":"æœ¬ç¯‡æ–‡ç« æ˜¯åœ¨å®Œæ•´å­¦ä¹  jQuery ä»¥åï¼Œç³»ç»Ÿæ•´ç†çš„æ•™ç¨‹ï¼Œå¤§çº²å¦‚ä¸‹ jQuery çš„æ ¸å¿ƒå‡½æ•° $, jQuery æ“ä½œ jQuery é›†åˆ æ“ä½œ DOM å…ƒç´ çš„å±æ€§å’Œç±»å±æ€§ æ“ä½œæ ·å¼ æ“ä½œ DOM å…ƒç´ (æ·»åŠ ï¼Œåˆ é™¤â€¦) jQuery äº‹ä»¶ jQuery æ˜¾ç¤ºä¸éšè— jQuery åŠ¨ç”» jQuery æ‰©å±•åŠå®ç”¨å‡½æ•° Ajax jQueryæ ¸å¿ƒå‡½æ•°jQuery è¿™ä¸ªåº“ä¸­æœ€é‡è¦çš„å°±æ˜¯å®ƒæä¾›çš„æ ¸å¿ƒå‡½æ•° jQuery() ï¼Œå®ƒæä¾›äº†éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°ç”¨çš„ååˆ†çš„é¢‘ç¹ï¼Œæ‰€ä»¥æä¾›äº† jQuery() çš„åˆ«åï¼Œé‚£å°±æ˜¯ $() ï¼Œåœ¨åé¢çš„æ¼”ç¤ºä¸­éƒ½å°†ä¼šä»¥ $ ä¸ºä¾‹ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¯¥æ ¸å¿ƒå‡½æ•°æä¾›äº†å“ªäº›åŠŸèƒ½ é€‰æ‹©å¤šä¸ª DOM å…ƒç´  å°† HTML å­—ç¬¦ä¸²å¾—è§£æä¸ºä¸€ä¸ª DOM å…ƒç´  ä½œä¸ºå…¥å£å‡½æ•° å°† DOM å…ƒç´ è½¬æ¢ä¸º jQuery é›†åˆ ä¸Šé¢æœ‰äº›åè¯å¯èƒ½æ²¡æœ‰å¬è¿‡ï¼Œè¿™é‡Œåªæ˜¯æ„Ÿæ€§äº†è§£ä¸€ä¸‹ï¼Œä¸‹é¢å°±å…·ä½“è®²è§£ã€‚ é€‰æ‹©å…ƒç´ è€ƒè™‘ä¸‹é¢çš„ DOM ç»“æ„ &lt;div id=\"box\"&gt;&lt;/div&gt;&lt;div class=\"container\"&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt; å¦‚æœä½¿ç”¨åŸç”Ÿçš„ JavaScript é€‰æ‹©ä¸Šé¢çš„å…ƒç´ çš„å†™æ³•å¦‚ä¸‹ document.getElementById(\"box\");document.getElementsByClassName(\"container\")[0];document.getElementsByTagName(\"p\")[0]; è€Œç°åœ¨ä½¿ç”¨ $() å‡½æ•°ï¼Œä¸ºå…¶ä¼ å…¥ CSS çš„é€‰æ‹©å™¨å³å¯é€‰ä¸­å…ƒç´  $(\"#box\");$(\".container\");$(\"p\"); ä½¿ç”¨ $() å¾—åˆ°çš„æ˜¯ä¸€ä¸ªé›†åˆï¼Œå³ä½¿ä½¿ç”¨äº† id é€‰æ‹©å™¨ #box ï¼Œå¾—åˆ°ä¹Ÿæ˜¯ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå…ƒç´ çš„é›†åˆï¼Œå¦‚ä¸‹ æˆ‘ä»¬æŠŠå®ƒç§°ä¸º jQuery å¯¹è±¡æˆ–è€… jQuery é›†åˆï¼Œåœ¨ä¸‹é¢æˆ‘å°†ä¸ä¼šåŒºåˆ†äºŒè€…ï¼Œå¯èƒ½ä¼šæ··åˆä½¿ç”¨ï¼Œè¯·æ³¨æ„ã€‚ç”±ä¸Šå¯è§ï¼Œ jQuery å¯¹è±¡çš„ç»“æ„åƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†å®ƒä¸æ˜¯çœŸæ­£çš„æ•°ç»„ï¼Œå› ä¸ºä»–ä¸æ˜¯ Array çš„å®ä¾‹ï¼Œåªæ˜¯ä½¿ç”¨å¯¹è±¡æ¥æ¨¡æ‹Ÿæ•°ç»„ï¼Œ jQuery å¯¹è±¡ä¸­çš„å…ƒç´ (å€Ÿç”¨æ•°ç»„çš„æ¦‚å¿µ)æ˜¯è¢«é€‰æ‹©çš„ DOM å…ƒç´ ã€‚ jQuery çš„æ ¸å¿ƒå‡½æ•°æ”¯æŒå‡ ä¹æ‰€æœ‰çš„ CSS é€‰æ‹©å™¨ï¼Œå¦‚ å±æ€§é€‰æ‹©å™¨ input[value] /* é€‰æ‹©æœ‰ value å±æ€§çš„ input æ ‡ç­¾ */input[type='text'] /* é€‰æ‹© type ä¸º text çš„ input æ ‡ç­¾ */a[href^='http://'] /* é€‰æ‹© href ä»¥ http:// å¼€å¤´çš„ a æ ‡ç­¾ */a[href$='pdf'] /* é€‰æ‹© href ä»¥ pdf ç»“å°¾çš„ a æ ‡ç­¾ */a[href*='jquery'] /* é€‰æ‹© href å±æ€§åŒ…å« jquery çš„ a æ ‡ç­¾ */ ä¼ªç±»é€‰æ‹©å™¨ a:firstp:oddp:evenul li:last-child è¿‡æ»¤å™¨ :animated /* å¤„äºåŠ¨ç”»çŠ¶æ€çš„å…ƒç´  */:checkbox /* ç›¸å½“äº input[type='chexkbox'] */:checked /* é€‰æ‹©å¤„äºé€‰ä¸­çŠ¶æ€çš„å¤šé€‰æ¡†æˆ–å•é€‰æ¡† */:disabled... â€¦ é€‰æ‹©å™¨ååˆ†çš„å¤šï¼Œç”±äºé‡ç‚¹ä¸åœ¨äºé€‰æ‹©å™¨ï¼Œå¦å¤–è¿™ä¸ªä¹Ÿæ²¡æœ‰ä»€ä¹ˆåŸç†å¯è®²ï¼Œä¹Ÿå°±æ˜¯ API çš„ä½¿ç”¨ï¼Œéšç€ä½¿ç”¨ jQuery çš„å¢å¤šï¼Œè‡ªç„¶ä¼šæŒæ¡ï¼Œæ‰€ä»¥è¿™é‡Œå°±ç‚¹åˆ°å³æ­¢ã€‚ å°† HTML å­—ç¬¦ä¸²è½¬åŒ–ä¸º jQuery å¯¹è±¡è¿™é‡Œé¦–å…ˆè§£é‡Šä¸€ä¸‹ä»€ä¹ˆå«åš HTML å­—ç¬¦ä¸²ï¼Œä¸ç»™å‡ºå…·ä½“çš„å®šä¹‰ï¼Œå¾ˆå¥½ç†è§£ï¼Œå½¢å¦‚ä¸‹é¢çš„å­—ç¬¦ä¸²å°±å«åš HTML å­—ç¬¦ä¸² \"&lt;p&gt;123&lt;/p&gt;\"\"&lt;h1&gt;ä¸€çº§æ ‡é¢˜&lt;/h1&gt;\" å½“æˆ‘ä»¬å‘ jQuery çš„æ ¸å¿ƒå‡½æ•°ä¼ é€’è¿™æ ·çš„å­—ç¬¦ä¸²æ—¶ï¼Œæ ¸å¿ƒå‡½æ•°ä¼šå°†è¯¥å­—ç¬¦ä¸²è§£æå¾—åˆ°ä¸€ä¸ª jQuery å¯¹è±¡ï¼Œå¦‚ ä½œä¸ºå…¥å£å‡½æ•°å› ä¸ºæˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨ JavaScript ä¸­æ“ä½œ DOM ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šç­‰åˆ° DOM æ ‘æ¸²æŸ“å®Œæ¯•ä¹‹åå†å»æ‰§è¡Œ JavaScript ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æŠŠ script æ ‡ç­¾æ”¾åœ¨ body å…ƒç´ çš„æœ€åé¢ï¼Œæˆ–è€…å°†ä»£ç æ”¾åœ¨ window.onload ä¸­ï¼Œå¦‚ä¸‹ window.onload = function() &#123; // è¦æ‰§è¡Œçš„ä»£ç &#125; onload æ–¹æ³•ä¼šåœ¨ DOM æ ‘æ¸²æŸ“å®Œæ¯•ï¼Œå¹¶ä¸”å¤–éƒ¨èµ„æºå¦‚å›¾ç‰‡ç­‰ç­‰åŠ è½½å®Œæ¯•åä¼šæ‰§è¡Œï¼Œè™½ç„¶èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯åœ¨ç­‰å¾…é™æ€èµ„æºåŠ è½½çš„æ—¶å€™ï¼Œç”¨æˆ·æ˜¯ä¸èƒ½ä¸é¡µé¢è¿›è¡Œäº¤äº’çš„ï¼Œè¿™æ—¶ç”¨æˆ·å°±ä¼šæ„Ÿè§‰é¡µé¢å¡æ­»äº†ï¼Œä½“éªŒæ„Ÿååˆ†ä¸å¥½ã€‚æˆ‘ä»¬åªæ˜¯å¸Œæœ›åœ¨ DOM æ ‘æ¸²æŸ“å®Œæ¯•åå°±æ‰§è¡Œä»£ç ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ ready() å‡½æ•°ï¼Œå¦‚ä¸‹ $(document).ready(function() &#123; // è¦æ‰§è¡Œçš„ä»£ç &#125;) è¿™é‡Œè¦æ‰§è¡Œçš„ä»£ç åœ¨ DOM æ ‘æ¸²æŸ“å®Œæ¯•åå³å¯æ‰§è¡Œï¼Œè€Œä¸å¿…ç­‰åˆ°èµ„æºåŠ è½½å®Œæ¯•ã€‚ä¸Šé¢çš„å†™æ³•å¯ä»¥ç®€å†™ä¸º $(function() &#123; // è¦æ‰§è¡Œçš„ä»£ç &#125;) å°† DOM å…ƒç´ è½¬åŒ–ä¸º jQuery å¯¹è±¡ä¸ºæ ¸å¿ƒå‡½æ•°ä¼ å…¥ DOM å…ƒç´ ï¼Œä¼šè¿”å›ä¸€ä¸ª jQueryå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†è¿™ä¸ª DOM å…ƒç´ ï¼Œå¦‚ä¸‹ å°† DOM å…ƒç´ è½¬åŒ–ä¸º jQuery å¯¹è±¡å¯ä»¥ä½¿ç”¨ jQuery å¯¹è±¡åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æƒ³è¾ƒäºåŸç”Ÿæ–¹æ³•æ–¹ä¾¿å¾ˆå¤šã€‚ å¦‚ä½•å°† jQuery å¯¹è±¡è½¬åŒ–ä¸ºDOMå…ƒç´ å‘¢? æˆ‘ä»¬çŸ¥é“ jQuery å¯¹è±¡çš„ç»“æ„æ˜¯ç±»ä¼¼äºæ•°ç»„ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ DOM å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹æ ‡çš„æ–¹å¼è·å– DOM å…ƒç´ ï¼Œå¦‚ä¸‹ä¸¤ç§æ–¹æ³•éƒ½æ˜¯å¯ä»¥çš„ jQueryå¯¹è±¡[index] jQueryå¯¹è±¡.get(index)ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ¥å—è´Ÿæ•°ï¼Œè¡¨ç¤ºå€’æ•° æ“ä½œ jQuery é›†åˆåœ¨æœ¬èŠ‚ä¼šä½¿ç”¨ jQuery é›†åˆè¿™ä¸€å«æ³•ï¼Œå› ä¸ºå¾€é‡Œé¢æ·»åŠ å…ƒç´ æˆ–è€…åˆ é™¤å…ƒç´ ç­‰ç­‰æ“ä½œï¼Œé›†åˆçš„å«æ³•æ¯”å¯¹è±¡çš„å«æ³•æ›´åŠ çš„ç¬¦åˆã€‚å¦‚æœä¸åšè¯´æ˜ï¼Œä¸‹é¢æ“ä½œçš„DOMä¸ºä»¥ä¸‹ &lt;div id=\"box\"&gt;&lt;/div&gt;&lt;div class=\"container\"&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt; æ·»åŠ å…ƒç´ ä½¿ç”¨ jQuery é›†åˆè°ƒç”¨ add æ–¹æ³•ä¸ºé›†åˆæ·»åŠ å…ƒç´ ï¼Œ add æ–¹æ³•å¯ä»¥æ¥æ”¶ä¸åŒç±»å‹çš„å‚æ•°ï¼Œå¦‚ä¸‹ jQuery é€‰æ‹©å™¨ï¼šå°†ä¸ jQuery é€‰æ‹©å™¨åŒ¹é…çš„æ‰€æœ‰ DOM å…ƒç´ æ·»åŠ åˆ°é›†åˆä¸­ DOM å…ƒç´ æˆ– DOM å…ƒç´ ç»„æˆçš„æ•°ç»„ï¼šå°† DOM å…ƒç´ æˆ–æ•°ç»„ä¸­çš„å…ƒç´ æ·»åŠ åˆ°é›†åˆä¸­ HTML å­—ç¬¦ä¸²ï¼šå°† HTML å­—ç¬¦ä¸²è§£æä¸º DOM å…ƒç´ åæ·»åŠ åˆ°é›†åˆä¸­ è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ jQuery é›†åˆï¼Œä¾‹å­å¦‚ä¸‹ let collection = $(\"#box\");collection = collection.add(\".container\"); // æ·»åŠ ä¸€ä¸ª jQuery é€‰æ‹©å™¨collection = collection.add(document.getElementsByTagName(\"p\")[0]); // æ·»åŠ ä¸€ä¸ª DOM å…ƒç´ collection = collection.add(\"&lt;h1&gt;123&lt;/h1&gt;\"); // æ·»åŠ ä¸€ä¸ª HTML å­—ç¬¦ä¸²console.dir(collection); è¿‡æ»¤å…ƒç´ è¿‡æ»¤é›†åˆä¸­çš„å…ƒç´ æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ notï¼Œä¸€ä¸ªæ˜¯ filterï¼Œä¸¤ä¸ªæ–¹æ³•çš„ä¾§é‡ç‚¹ä¸åŒï¼Œ not æ–¹æ³•ä¼šåˆ é™¤æ‰é›†åˆä¸­ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›æ–°é›†åˆï¼›è€Œ filter çš„è¯­ä¹‰æ˜¯ä¿ç•™é›†åˆä¸­ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ–°é›†åˆã€‚äºŒè€…æ¥æ”¶çš„å‚æ•°åŒ add æ–¹æ³•ä¸€æ ·ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒä¼šç´ è°ƒç”¨è¯¥å‡½æ•°ï¼Œæ ¹æ®å‡½æ•°çš„è¿”å›å€¼æ¥å†³å®šå…ƒç´ çš„å»ç•™ï¼Œæ¯”å¦‚å¯¹äº not æ–¹æ³•ï¼Œå¦‚æœå‡½æ•°è¿”å› trueï¼Œåˆ™åˆ é™¤æ­¤å…ƒç´ ï¼Œå¯¹äº filter åˆ™ç›¸åï¼Œå¦‚æœè¿”å› trueï¼Œåˆ™ä¿ç•™æ­¤å…ƒç´ ã€‚è¿™äº›ä¼ å…¥çš„å‡½æ•°ä¸­çš„ä¸Šä¸‹æ–‡(ä¹Ÿå°±æ˜¯ this)æŒ‡å‘è°ƒç”¨è¯¥å‡½æ•°çš„å…ƒç´ ã€‚ let collection = $(\"#box\");collection = collection.add(\".container\"); // æ·»åŠ ä¸€ä¸ª jQuery é€‰æ‹©å™¨collection = collection.add(document.getElementsByTagName(\"p\")[0]); // æ·»åŠ ä¸€ä¸ª DOM å…ƒç´ collection = collection.add(\"&lt;h1&gt;123&lt;/h1&gt;\"); // æ·»åŠ ä¸€ä¸ª HTML å­—ç¬¦ä¸²collection = collection.not(function() &#123; return $(this).html() === \"123\"; // åˆ é™¤æ‰ html å†…å®¹ä¸º 123 çš„ï¼Œä¹Ÿå°±æ˜¯ h1 æ ‡ç­¾&#125;)console.dir(collection); æ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œæ­¤æ—¶é›†åˆä¸­åªæœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œå°† h1 å…ƒç´ æ»¤é™¤äº† let collection = $(\"#box\");collection = collection.add(\".container\"); // æ·»åŠ ä¸€ä¸ª jQuery é€‰æ‹©å™¨collection = collection.add(document.getElementsByTagName(\"p\")[0]); // æ·»åŠ ä¸€ä¸ª DOM å…ƒç´ collection = collection.add(\"&lt;h1&gt;123&lt;/h1&gt;\"); // æ·»åŠ ä¸€ä¸ª HTML å­—ç¬¦ä¸²collection = collection.filter(function() &#123; return $(this).html() === \"123\"; // ä¿ç•™ html å†…å®¹ä¸º 123 çš„ï¼Œä¹Ÿå°±æ˜¯ h1 æ ‡ç­¾&#125;)console.dir(collection); å°†ä¸Šé¢çš„ not æ”¹ä¸º filterï¼Œè¿™æ—¶é›†åˆé‡Œé¢å°±åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£å°±æ˜¯ h1 å…ƒç´  é€šè¿‡ä¸Šé¢å‡ ä¸ªæ–¹æ³•çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“è¿™äº›æ–¹æ³•è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„ jQuery é›†åˆï¼Œè¿™æ„å‘³ç€å¯ä»¥æ¥ç€.ï¼Œå¦‚ä¸‹ let collection = $(\"#box\") .add(\".container\") .add(document.getElementsByTagName(\"p\")[0]) .add(\"&lt;h1&gt;123&lt;/h1&gt;\") .filter(function() &#123; return $(this).html() === \"123\"; &#125;); è¿™æ ·å†™èµ·æ¥æ˜æ˜¾æ¯”ä¸Šé¢å†™èµ·æ¥çˆ½å¤šäº†ï¼Œè¿™ç§å†™æ³•å«åšé“¾å¼ç¼–ç¨‹ï¼Œåƒé“¾å­ä¸€æ ·ï¼Œä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚ éå†é›†åˆä½¿ç”¨ each æ–¹æ³•éå†é›†åˆï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½ä¼šè°ƒç”¨ each ä¸­ä¼ å…¥çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸Šä¸‹æ–‡ä¼šè¢«è®¾å®šä¸ºè¯¥å…ƒç´ ï¼Œå¦‚ &lt;div&gt;1&lt;/div&gt;&lt;div&gt;2&lt;/div&gt;&lt;div&gt;3&lt;/div&gt;&lt;div&gt;4&lt;/div&gt;&lt;div&gt;5&lt;/div&gt; $(\"div\").each(function() &#123; console.log($(this).html())&#125;) é›†åˆæŸ¥æ‰¾ is(selector)ï¼šåˆ¤æ–­æ˜¯å¦é›†åˆä¸­æ˜¯å¦åŒ…å«ä¸é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ ï¼ŒåŒ…å«è¿”å› trueï¼Œå¦åˆ™è¿”å› false has(test)ï¼štest å¯ä»¥ä¸ºé€‰æ‹©å™¨ï¼Œä¹Ÿå¯ä»¥ä¸º DOM å…ƒç´ ï¼Œå®ƒåˆ¤æ–­çš„æ˜¯é›†åˆä¸­çš„å…ƒç´ çš„åä»£ä¸­æ˜¯å¦åŒ…å«ä¸ test åŒ¹é…çš„å…ƒç´ ï¼Œå¦‚æœé›†åˆä¸­æŸå…ƒç´  e çš„åä»£åŒ…å«ä¸ test åŒ¹é…çš„å…ƒç´ ï¼Œåˆ™å°†å…ƒç´  e æ·»åŠ åˆ°æ–°çš„é›†åˆä¸­ï¼Œæœ€åè¿”å›è¯¥é›†åˆï¼Œå¦‚ &lt;div&gt; &lt;ol&gt; &lt;li&gt;&lt;/li&gt; &lt;/ol&gt;&lt;/div&gt;&lt;div&gt; &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt; // $(\"div\")ä¸­æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªdivå…ƒç´ çš„åä»£æœ‰olå…ƒç´ // æ‰€ä»¥è¿”å›çš„æ–°çš„é›†åˆä¸­åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼Œæ˜¯ç¬¬ä¸€ä¸ªdivå…ƒç´ $(\"div\").has(\"ol\"); // ä¸¤ä¸ªå…ƒç´ çš„åä»£éƒ½æœ‰liå…ƒç´ ï¼Œæ‰€ä»¥æ–°é›†åˆä¸­çš„å…ƒç´ ä¸åŸé›†åˆç›¸åŒ$(\"div\").has(\"li\"); find(selector)ï¼šè¯¥æ–¹æ³•ä¼šéå†é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œåœ¨è¿™äº›å…ƒç´ çš„åä»£æ‰¾åˆ°åŒ¹é… selector çš„å…ƒç´ ï¼Œç„¶åå°†è¿™äº›åŒ¹é…çš„å…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ªæ–°çš„é›†åˆä¸­ï¼Œå¹¶è¿”å›è¯¥æ–°çš„é›†åˆ $(\"div\").find(\"img\") // åœ¨æ‰€æœ‰divæ ‡ç­¾ä¸­æ‰¾åˆ°imgæ ‡ç­¾ï¼Œè¿”å›è¿™äº›imgæ ‡ç­¾ç»„æˆçš„é›†åˆ è½¬æ¢é›†åˆjQuery å¯¹è±¡æœ‰ä¸€ä¸ª map æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸æ•°ç»„çš„ map æ–¹æ³•ä¸€æ ·ï¼Œæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼ä¼šè¢«æ·»åŠ åˆ°æ–°çš„é›†åˆä¸­å¹¶è¿”å›(å¦‚æœè¿”å›çš„æ˜¯ null æˆ–è€… undefined åˆ™ä¸ä¼šæ·»åŠ åˆ°æ–°çš„é›†åˆä¸­)ï¼Œè¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…ƒç´ åœ¨é›†åˆä¸­çš„ä¸‹æ ‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è°ƒç”¨è¯¥å‡½æ•°çš„å…ƒç´ ã€‚ &lt;div&gt;1&lt;/div&gt;&lt;div&gt;2&lt;/div&gt;&lt;div&gt;3&lt;/div&gt;&lt;div&gt;4&lt;/div&gt;&lt;div&gt;5&lt;/div&gt; $(\"div\").map(function(index, element) &#123; return index; // get()æ–¹æ³•ä¼šå°†é›†åˆè½¬å˜ä¸ºä¸€ä¸ªçœŸæ­£çš„æ•°ç»„&#125;).get().join(\", \"); //\"0, 1, 2, 3, 4\" æ“ä½œ DOM å…ƒç´ çš„å±æ€§å’Œç±»å±æ€§æ“ä½œå±æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨attr()æ–¹æ³•æ–¹ä¾¿çš„æ“ä½œ DOM å…ƒç´ çš„å±æ€§ attr(name, value)ï¼šä¸ºåå­—ä¸º name çš„å±æ€§è®¾ç½®å€¼ä¸º value $(\"div\").attr(\"id\", \"box\"); // å°†æ‰€æœ‰ div æ ‡ç­¾çš„ id è®¾ç½®ä¸º box attr(name)ï¼šè·å–é›†åˆä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ä¸­å±æ€§åå­—ä¸º name çš„å€¼ attr(attributes)ï¼šä»¥å¯¹è±¡çš„å½¢å¼æ¥è®¾ç½®å±æ€§å€¼ $(\".attr\").attr(&#123; title: \"cat\", // è®¾ç½® title å±æ€§ä¸º cat id: \"cat\" // è®¾ç½® id å±æ€§ä¸º cat&#125;) removeAttr(name)ï¼šåˆ é™¤æŒ‡å®šåç§°çš„å±æ€§ ç»è¿‡æµ‹è¯•ï¼Œå‘ç° attr() æ–¹æ³•å¯ä»¥è®¾ç½®ä»»æ„å±æ€§çš„å€¼(æˆ‘çš„æ„æ€æ˜¯æŒ‡å³ä½¿è¿™äº›å±æ€§æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ¯”å¦‚ dog ä¹Ÿå¯ä»¥è®¾ç½®ï¼Œè€Œè¿™äº›ä¸å­˜åœ¨çš„å±æ€§ç§°ä¸ºè‡ªå®šä¹‰å±æ€§)ï¼Œæ¯”å¦‚ attr(\"dog\", \"dog\"); // ä¸º dog å±æ€§è®¾ç½®å€¼ä¸º dog ä¸Šé¢çš„ dog å°±æ˜¯è‡ªå®šä¹‰çš„å±æ€§åã€‚åœ¨ HTML5 ä¸­å»ºè®®è‡ªå®šä¹‰å±æ€§åä»¥ data- å¼€å¤´ï¼Œå¦‚ data-dogï¼Œ HTML5 ä¼šå°† data- å¼€å¤´çš„å±æ€§åæ·»åŠ åˆ° dataset çš„å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ dataset[&quot;å±æ€§å&quot;] dataset.å±æ€§å çš„æ–¹å¼è®¿é—®ï¼Œè¿™æ—¶çš„å±æ€§åä¸éœ€è¦åŠ ä¸Š data- å‰ç¼€ï¼Œå¦‚ dataset[&quot;dog&quot;] dataset.dog å¦‚æœå±æ€§åä¹‹é—´ä½¿ç”¨ - è¿æ¥ï¼Œå¦‚ data-my-nameï¼Œåˆ™è®¿é—®æ—¶éœ€è¦ä½¿ç”¨é©¼å³°å‘½åæ³•è®¿é—®ï¼Œå³ dataset[&quot;myName&quot;] dataset.myName åœ¨æ–°çš„é¡µé¢æ‰“å¼€æ ‡ç­¾ç°åœ¨ä½¿ç”¨ attr() æ–¹æ³•æ¥åšå‡ ä¸ªä¾‹å­ï¼Œç¬¬ä¸€ä¸ªè¦æ±‚é¡µé¢å†…çš„é“¾æ¥éƒ½è¦åœ¨æ–°çš„é¡µé¢æ‰“å¼€ï¼Œåšæ³•å°±æ˜¯å°† a æ ‡ç­¾çš„ target å±æ€§è®¾ç½®ä¸º _blank ï¼Œè¿™ç§äº‹æƒ…å½“ç„¶å¯ä»¥åœ¨å†™çš„æ—¶å€™å°±å†™å¥½ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªé—®é¢˜ é¦–å…ˆè¿™ä¸ªå·¥ä½œæ˜¯é‡å¤æ€§çš„å·¥ä½œï¼Œæ¯å†™ä¸€ä¸ª a éƒ½è¦é‡å¤åŒæ ·çš„äº‹æƒ…ï¼Œæ—¢ç´¯åˆä¸å¤Ÿä¼˜é›… å¦‚æœé¡µé¢å†…çš„é“¾æ¥æ˜¯ç”¨æˆ·åŠ å…¥çš„å‘¢ï¼Œæ¯”å¦‚ç™¾ç§‘ï¼Œè¿™æ—¶æ‰“å¼€çš„é“¾æ¥å°±ä¸ä¸€å®šæ˜¯åœ¨æ–°çš„é¡µé¢æ‰“å¼€äº† æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ attr() æ‰¹é‡è®¾ç½® a æ ‡ç­¾çš„ target å±æ€§ä¸º _blank ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„ a æ ‡ç­¾ï¼Œå› ä¸ºæœ‰çš„ a æ ‡ç­¾æ˜¯åœ¨é¡µé¢å†…è·³è½¬çš„ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦åœ¨æ–°çš„é¡µé¢å†…æ‰“å¼€ï¼Œæ‰€ä»¥åº”è¯¥è®¾ç½® href å±æ€§ä»¥ http:// å¼€å¤´çš„ a æ ‡ç­¾åœ¨æ–°çš„é¡µé¢æ‰“å¼€ $(\"a[href^='http://']\").attr(\"target\", \"_blank\") è§£å†³åŒé‡æäº¤åœ¨æäº¤è¡¨å•æ—¶ï¼Œæœ‰çš„æ—¶å€™ç”±äºä¸èƒ½å¤ŸåŠæ—¶ç»™äºˆç”¨æˆ·åé¦ˆï¼Œå¯¼è‡´ç”¨æˆ·ä¸ç¡®å®šæ˜¯å¦æäº¤æˆåŠŸï¼Œç”¨æˆ·ä¼šå¤šæ¬¡ç‚¹å‡»æäº¤æŒ‰é’®ï¼Œè¿™æ ·ä¼šç»™æœåŠ¡å™¨ç«¯å¸¦æ¥éº»çƒ¦ï¼Œæˆ‘ä»¬åœ¨æ•è· submit äº‹ä»¶æ—¶ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡æäº¤æ—¶ï¼Œæˆ‘ä»¬æ¥ç€å°† disabled å±æ€§è®¾ç½®ä¸º true (æˆ–è€…ä¸º disabled )ï¼Œå¦‚ä¸‹ // ç»‘å®šè¡¨å•çš„æäº¤äº‹ä»¶$(\"form\").submit(function() &#123; // :submit è¡¨ç¤º type ä¸º submit çš„å…ƒç´  // æäº¤ä¹‹åå°†submitæŒ‰é’®è®¾ç½®ä¸ºdisabled $(\":submit\", this).attr(\"disabled\", \"disabled\") &#125;) åœ¨ä¸Šé¢ä¸­è®¾ç½® disabled å±æ€§æ—¶ï¼Œdisabled å±æ€§çš„å€¼ä¸é‡è¦ï¼Œé‡ç‚¹æ˜¯è®¾ç½®äº† disabled è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥å³ä½¿å°†å®ƒè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸² &quot;&quot;ï¼Œå®ƒä¹Ÿæ˜¯ç”Ÿæ•ˆçš„ï¼Œå¦‚æœæƒ³ disabled å±æ€§è®¾ç½®ä¸ºä¸ç”Ÿæ•ˆï¼Œé‚£ä¹ˆå°±å°†å®ƒçš„å€¼è®¾ç½®ä¸º false (æ³¨æ„ä¸è¦è®¾ç½®ä¸ºå­—ç¬¦ä¸² &quot;false&quot; )ï¼Œä¸‹é¢çš„å†™æ³•ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä½¿å¾— disabled ç”Ÿæ•ˆ attr(&quot;disabled&quot;, &quot;disabled&quot;) attr(&quot;disabled&quot;, &quot;&quot;) attr(&quot;disabled&quot;, &quot;false&quot;) attr(&quot;disabled&quot;, true) åªæœ‰å°† disabled è®¾ç½®ä¸ºå¸ƒå°”å€¼ false æ‰ä¼šä½¿å¾— disabled å¤±æ•ˆ attr(&quot;disabled&quot;, false) æ“ä½œç±»å±æ€§ä¸ºä»€ä¹ˆç±»å±æ€§è¦å•ç‹¬æ‹¿å‡ºæ¥å‘¢? å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œä¸ºæ‰€æœ‰çš„ div æ ‡ç­¾æ·»åŠ ä¸€ä¸ªç±» boxï¼Œé‚£ä¸‹é¢è¿™æ ·çš„å†™æ³•å¯¹ä¸å¯¹ $(\"div\").attr(\"class\", \"box\"); ä¸Šé¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¸Šé¢çš„å†™æ³•æ˜¯ä¸º class å±æ€§èµ‹å€¼ä¸º boxï¼Œä½†æ˜¯ä¹‹å‰çš„ç±»å±æ€§å°±ä¼šè¢«è¦†ç›–æ‰ï¼Œæˆ‘ä»¬æƒ³åšçš„ä»…ä»…æ˜¯æ·»åŠ çš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦çŸ¥é“ä¹‹å‰çš„ç±»å±æ€§æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æ­£ç¡®çš„å†™æ³•å¦‚ä¸‹ // è·å¾—åŸæ¥çš„ç±»ååˆ—è¡¨ è½¬åŒ–ä¸ºæ•°ç»„const classList = $(\"div\").attr(\"class\").split(\" \");// å°†è¦æ·»åŠ çš„ç±»åæ·»åŠ åˆ°æ•°ç»„ä¸­classList.push(\"box\");// å°†æ•°ç»„ä¸­çš„å…ƒç´ ä»¥ç©ºæ ¼æ‹¼æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²const newClassList = classList.join(\" \");// è®¾ç½®classå±æ€§$(\"div\").attr(\"class\", newClassList); ç»è¿‡åƒè¾›ä¸‡è‹¦ç»ˆäºæ·»åŠ äº†ä¸€ä¸ªç±»ï¼Œè€ƒè™‘åˆ°è¿™æ ·çš„æ“ä½œå¾ˆé¢‘ç¹ï¼Œæ‰€ä»¥æœ€å¥½å°†ä¸Šé¢çš„æ“ä½œæŠ½è±¡ä¸ºä¸€ä¸ªæ–¹æ³•ï¼Œè€Œ jQuery ä¸ºæˆ‘ä»¬åšäº†è¿™ä»¶äº‹æƒ…ï¼š addClass(names) names å¯ä»¥æ˜¯å•ä¸ªç±»åï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªä»¥ç©ºæ ¼åˆ†éš”çš„å­—ç¬¦ä¸²è¡¨ç¤ºçš„å¤šä¸ªç±»å names è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºå•ä¸ªç±»åæˆ–è€…å¤šä¸ªç±»åï¼Œè¿™ä¸ªå‡½æ•°ä¼šä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œå…ƒç´ çš„ä¸‹æ ‡(å…ƒç´ åœ¨ jQuery é›†åˆä¸­çš„ä¸‹æ ‡)å’Œå½“å‰ç±»åçš„å€¼ removeClass(names) å‚æ•°åŒ addClass ï¼Œä½œç”¨æ˜¯åˆ é™¤å•ä¸ªæˆ–å¤šä¸ªç±»å toggleClass(names) è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯åˆ‡æ¢ç±»åï¼Œä»€ä¹ˆæ„æ€å‘¢? æ¯”å¦‚å¦‚æœè¯¥å…ƒç´ å­˜åœ¨ names æŒ‡å®šçš„ç±»ï¼Œåˆ™åˆ é™¤æ‰æŒ‡å®šçš„ç±»ï¼Œå¦‚æœä¸å­˜åœ¨æŒ‡å®šçš„ç±»ï¼Œåˆ™æ·»åŠ æŒ‡å®šçš„ç±» å‚æ•°åŒä¸Š addClass(\"box\"); // ä¸ºå…ƒç´ æ·»åŠ  box ç±»addClass(function(index, value) &#123; // index æ˜¯å…ƒç´ åœ¨ jQuery ä¸­çš„ä¸‹æ ‡ // value æ˜¯å…ƒç´ å½“å‰ç±»åçš„å€¼ // return \"active big\" return \"box\"; // è¿”å›å€¼å°†ä¼šè¢«ä½œä¸ºç±»åæ·»åŠ &#125;)removeClass(\"box\"); // åˆ é™¤è¯¥å…ƒç´  box ç±»toggleClass(\"box\"); // å¦‚æœå­˜åœ¨ box ç±»ï¼Œåˆ™åˆ é™¤ box ç±»ï¼Œå¦‚æœä¸å­˜åœ¨ box ç±»ï¼Œåˆ™æ·»åŠ  box ç±» hasClass(name) åˆ¤æ–­æ˜¯å¦åŒ…å«ç±»åä¸º name çš„ç±»ï¼ŒåŒ…å«åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false HTML5 å…¶å®ä¹Ÿæä¾›äº†åŸç”Ÿçš„æ“ä½œç±»çš„æ–¹æ³•ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ª classList å¯¹è±¡ï¼Œå®ƒçš„åŸå‹å¯¹è±¡æä¾›äº†æ“ä½œç±»åçš„æ–¹æ³• classList.add()ï¼šä¸ºå…ƒç´ æ·»åŠ ä¸€ä¸ªç±» classList.remove()ï¼šä¸ºå…ƒç´ åˆ é™¤æŒ‡å®šçš„ç±» classList.toggle()ï¼šåˆ‡æ¢æŒ‡å®šçš„ç±»ï¼Œå­˜åœ¨åˆ™ç§»é™¤ï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ  classList.contains()ï¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ç±»ï¼Œå­˜åœ¨è¿”å› trueï¼Œåä¹‹è¿”å› false æ®æˆ‘è¯•éªŒæ‰€çŸ¥ï¼Œä¸Šé¢çš„æ¯æ¬¡æ“ä½œåªèƒ½å¯¹ä¸€ä¸ªç±»æ“ä½œï¼Œæ„æ€å°±æ˜¯ä¸èƒ½åŒæ—¶æ·»åŠ å¤šä¸ªç±»æˆ–åˆ é™¤ã€‚ æ“ä½œæ ·å¼ä½¿ç”¨ css() æ–¹æ³•æ¥è®¾ç½®æ ·å¼ï¼Œä½¿ç”¨çš„æ–¹æ³•ä¸ attr() ç±»ä¼¼ css(name, value)ï¼šè®¾ç½®æ ·å¼ name ä¸º value css(properties)ï¼šä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡æ¥è®¾ç½®æ ·å¼ css(name)ï¼šè·å¾—æ ·å¼ï¼Œå¦‚æœæ˜¯å«æœ‰å¤šä¸ªå…ƒç´ çš„ jQuery é›†åˆè°ƒç”¨æ­¤æ–¹æ³•ï¼Œé‚£ä¹ˆè¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ çš„è®¡ç®—æ ·å¼å€¼ çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæœ‰ä¸‹é¢çš„ div æ ‡ç­¾ &lt;div&gt;&lt;/div&gt; ç°ä¸ºå®ƒè®¾ç½®é«˜åº¦å’Œå®½åº¦ $(\"div\").css(&#123; width: \"100px\", height: \"100px\"&#125;) css(name, value)ï¼šå…¶ä¸­ value å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼å°†ä½œä¸º value å€¼ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…ƒç´ åœ¨ jQuery é›†åˆä¸­çš„ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ ·å¼å½“å‰çš„å€¼ï¼ŒåŒæ—¶å‡½æ•°çš„å†…éƒ¨ä¸Šä¸‹æ–‡ this æŒ‡å‘å½“å‰å…ƒç´  è·å–å…ƒç´ å®½åº¦ä¸‹é¢æˆ‘ä»¬æ¥è·å–æŸå…ƒç´ çš„ width å€¼ $(\"div\").css(\"width\"); // 100px å¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ•°å­—ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ˜¯å¸Œæœ›å¾—åˆ°æ•°å­—ç”¨æ¥è®¡ç®—æˆ–è€…å…¶ä»–ç”¨é€”ï¼Œæ‰€ä»¥å¦‚æœæƒ³å¾—åˆ°æ•°å­—çš„è¯å°±éœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œè§£æï¼Œä½†æ˜¯ jQuery æœ‰è€ƒè™‘è¿™ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ width(), height() æ–¹æ³•è·å¾—æ•°å­—çš„ç»“æœï¼Œå¦‚ $(\"div\").width(); // 100 è¿™é‡Œçš„ width çš„å¤§å°æ˜¯è®¾ç½®æ ·å¼æ—¶çš„å¤§å°å—? æ¯”å¦‚ div&#123; width: 100px;&#125; ä½¿ç”¨ width() æ–¹æ³•å¾—åˆ°çš„æ•°å­—æ˜¯100å—? ä¸ºä»€ä¹ˆåœ¨è¿™é‡Œæˆ‘ä¼šæå‡ºè¿™ä¹ˆä¸€ä¸ªç–‘é—®ï¼Œå› ä¸ºè¿™é‡Œè®¾ç½®çš„ width ä¸ä¸€å®šæ˜¯æ ‡ç­¾çš„å†…å®¹å®½åº¦ï¼Œä¹Ÿå¯èƒ½åŒ…æ‹¬ padding, border (å½“ box-sizing è®¾ç½®ä¸º border-box æ—¶)ï¼Œæ‰€ä»¥è¿™é‡Œçš„ width å¾—åˆ°çš„æ˜¯ content-width è¿˜æ˜¯åœ¨ style æ ‡ç­¾ä¸­è®¾ç½®çš„ width ï¼Œæˆ‘ä»¬è®¾ç½® div çš„æ ·å¼ä¸º div &#123; box-sizing: border-box; padding: 10px; width: 100px;&#125; è¿™ä¸ªæ—¶å€™åœ¨ style é‡Œé¢è®¾ç½®çš„ width ä¸º 100 ï¼Œä½†æ˜¯å®é™…çš„ content-width åº”è¯¥æ˜¯ 80 ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ width() æ–¹æ³•å¾—åˆ°çš„ç»“æœæ˜¯å¤šå°‘ $(\"div\").width(); // 80 ä¸Šé¢å¾—åˆ°çš„ç»“æœæ˜¯ 80 ï¼Œæ‰€ä»¥ width() æ–¹æ³•å¾—åˆ°çš„å®½åº¦æ˜¯ content-width ï¼Œå³æ˜¯å®é™…å†…å®¹çš„å®½åº¦ï¼Œ height() æ–¹æ³•ä¹Ÿæ˜¯åŒç†ã€‚ é™¤äº†å¯ä»¥ä½¿ç”¨ width() æ–¹æ³•è·å¾—å…ƒç´ çš„å®½åº¦ä»¥å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®å…ƒç´ çš„å®½åº¦ width(value) value çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå•ä½é»˜è®¤ä¸º px ä¹Ÿå¯ä»¥æ˜¯å¸¦å•ä½çš„å­—ç¬¦ä¸²(å¦‚æœæ²¡æœ‰æŒ‡å®šå•ä½ï¼Œåˆ™é»˜è®¤ä¸º px) è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºè¦è®¾ç½®çš„å€¼ï¼Œè¯¥å‡½æ•°çš„ä¸Šä¸‹æ–‡(this)æ˜¯è¯¥å…ƒç´  è¿™é‡Œåˆæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¦‚æœæˆ‘è®¾å®šå®½åº¦ï¼Œé‚£ä¹ˆè¿™é‡Œçš„å®½åº¦æˆ‘è®¾å®šçš„æ˜¯å†…å®¹å®½åº¦ conetnt-width è¿˜æ˜¯å…ƒç´ çš„ width æ ·å¼ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸Šé¢çš„ div ä¸ºä¾‹ div &#123; box-sizing: border-box; padding: 10px; width: 100px;&#125; è¿™é‡Œæˆ‘ä»¬è®¾å®š width ä¸º 200 ï¼Œç„¶åé€šè¿‡ width() æ–¹æ³•è·å¾—å®½åº¦ï¼Œå¦‚æœå¾—åˆ°çš„å€¼æ˜¯ 200 ï¼Œé‚£è¯´æ˜è®¾å®šçš„æ˜¯ content-width ï¼Œå¦‚æœå¾—åˆ°çš„æ˜¯ 180 ï¼Œè¯´æ˜è®¾å®šçš„æ˜¯ width æ ·å¼çš„å€¼ $(\"div\").width(200);console.log($(\"div\").width()); // 200 å¾—åˆ°çš„ç»“æœæ˜¯ 200 ï¼Œè¯´æ˜è®¾å®šçš„æ˜¯ content-width ã€‚ åœ¨è¿™é‡Œæˆ‘çªç„¶åˆæœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œé‚£å°±æ˜¯ css(&quot;width&quot;) ä¸ width() å¾—åˆ°çš„ç»“æœæ˜¯ç›¸åŒçš„å—ï¼Œè¿˜æ˜¯ä»¥ä¸Šé¢çš„ div ä¸ºä¾‹ div &#123; box-sizing: border-box; padding: 10px; width: 100px;&#125; console.log($(\"div\").width()); // 80console.log($(\"div\").css(\"width\")); // 100px æƒŠè®¶çš„å‘ç°äºŒè€…å¾—åˆ°çš„ç»“æœæ˜¯åœ¨æ•°å€¼ä¸Šæ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯è§ä½¿ç”¨ css(&quot;width&quot;) è·å¾—çš„æ˜¯ width æ ·å¼çš„å€¼ï¼Œé‚£ä¹ˆä½¿ç”¨ css(&quot;width&quot;, 200) è®¾å®šçš„æ˜¯ width æ ·å¼çš„å€¼å—ï¼Œæµ‹è¯•ä¸€ä¸‹ $(\"div\").css(\"width\", 200);console.log($(\"div\").width()); // 180console.log($(\"div\").css(\"width\")); // 200px æœç„¶ css() æ–¹æ³•è®¾ç½®çš„å€¼ä¹Ÿæ˜¯ width æ ·å¼çš„å€¼ï¼Œæ‰€ä»¥è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼š width()(height())æ–¹æ³•è®¾å®šæˆ–è€…è·å–çš„å€¼æ˜¯æŒ‡å†…å®¹çš„å®½åº¦(é«˜åº¦) css() è®¾å®šæˆ–è·å–çš„å®½åº¦(é«˜åº¦)æ˜¯æŒ‡æ ·å¼é‡Œé¢çš„ width å€¼çš„å¤§å° åœ¨ box-sizing ä¸º content-box ä¸‹äºŒè€…å¾—åˆ°çš„æ•°å€¼ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åœ¨ box-sizing ä¸º border-box çš„æƒ…å†µä¸‹ï¼Œç”±äº padding å’Œ border çš„å½±å“ï¼ŒäºŒè€…çš„ç»“æœæ˜¯ä¸åŒçš„(åœ¨ padding å’Œ border ä¸º 0 çš„æƒ…å†µä¸‹æ˜¯ç›¸åŒçš„)ã€‚ ç»è¿‡ä¸€æ¬¡å®è·µï¼Œæˆ‘å‘ç°ä¸Šé¢çš„æè¿°ä¹Ÿä¸å¤ªå‡†ç¡®ï¼Œcss(&quot;width&quot;)ä¸width()æ–¹æ³•è·å¾—çš„å€¼ç¬¦åˆä¸Šé¢æƒ…å†µçš„æ¡ä»¶æ˜¯ï¼Œå®ƒçš„å¤§å°æ²¡æœ‰è¶…è¿‡å®ƒçˆ¶å…ƒç´ çš„å¤§å°ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œé‚£ä¹ˆcss(&quot;width&quot;)å°±æ˜¯çˆ¶å…ƒç´ çš„widthæ ·å¼çš„å¤§å°ï¼Œè€Œwidth()æ–¹æ³•çš„å¤§å°æˆ‘è§‰å¾—å¾ˆå¤æ‚ï¼Œè¿˜ä¸çŸ¥é“æ€ä¹ˆè®¡ç®—ï¼Œè‡ªå·±åŠ¨æ‰‹è¯•è¯•å§ã€‚ é™¤äº† width() å’Œ height() æ–¹æ³•ï¼ŒjQuery è¿˜æä¾›äº†ç‰¹åˆ«çš„æ–¹æ³•æ¥è·å¾—ç‰¹æ®Šçš„å®½åº¦å’Œé«˜åº¦ æ–¹æ³• æè¿° innerwidth() å†…å®¹å®½åº¦+å†…è¾¹è·å®½åº¦ innerHeight() åŒä¸Š outerWidth(margin) marginä¸ºfalseæ—¶ï¼Œå†…å®¹å®½åº¦ + å†…è¾¹è·å®½åº¦ + è¾¹æ¡†å®½åº¦marginä¸ºtrueæ—¶ï¼Œå†åŠ ä¸Šå¤–è¾¹è·çš„å®½åº¦ outerHeight(margin) åŒä¸Š è·å–å…ƒç´ ä½ç½®offsetoffset()ï¼Œè·å–å…ƒç´ ç¦»æ–‡æ¡£åŸç‚¹çš„è·ç¦»ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰ left å’Œ top ä¸¤ä¸ªå±æ€§ï¼Œè¡¨ç¤ºç¦»æ–‡æ¡£åŸç‚¹ç»è¿‡æµ‹è¯•ï¼Œåº”è¯¥æ˜¯å…ƒç´ çš„ border çš„å·¦ä¸Šè§’ç¦»æ–‡æ¡£åŸç‚¹çš„è·ç¦»ã€‚ positionå¦ä¸€ä¸ªè·å–ä½ç½®æœ‰å…³ä¿¡æ¯çš„æ˜¯ position() ï¼Œå®ƒæ˜¯è·å¾—ä¸å®ƒå…ƒç´ å·¦ä¸Šè§’ä¹‹é—´çš„è·ç¦»ï¼Œè¿™ä¸ªçˆ¶å…ƒç´ æ˜¯å®ƒæ‰€æœ‰çˆ¶å…ƒç´ ä¸­ä½¿ç”¨äº†å®šä½ position ä¸”ç¦»ä»–æœ€è¿‘çš„çˆ¶å…ƒç´ ï¼Œè™½ç„¶æœ‰ç‚¹æ‹—å£ï¼Œä¸è¿‡ä½¿ç”¨è¿‡ç»å¯¹å®šä½çš„è¯ï¼Œå°±ä¼šå¾ˆå®¹æ˜“æ˜ç™½ï¼Œå› ä¸ºå®ƒä¸ç»å¯¹å®šä½çš„è§„åˆ™æ˜¯ä¸€æ ·çš„ã€‚ ç»è¿‡æˆ‘çš„å®éªŒï¼Œå‘ç°è¿™ä¸ªè·ç¦»ä¸æ˜¯è¾¹æ¡†ä¸è¾¹æ¡†çš„è·ç¦»ï¼Œè€Œæ˜¯å­å…ƒç´  margin ç¦»çˆ¶å…ƒç´  padding ä¹‹é—´çš„è·ç¦»ã€‚ æ“ä½œ DOM å…ƒç´ è®¾ç½® html å†…å®¹ä»¥åŠæ–‡æœ¬å†…å®¹ html()ï¼šè·å–jQueryé›†åˆä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ html å†…å®¹ html(content)ï¼šå°†ä¼ å…¥çš„ HTML ç‰‡æ®µï¼Œè®¾ç½® jQuery é›†åˆä¸­å…ƒç´ çš„ HTML å†…å®¹ text()ï¼šè·å¾— jQuery é›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„æ–‡æœ¬å†…å®¹æ‹¼æ¥çš„å­—ç¬¦ä¸² text(content)ï¼šå°† jQuery é›†åˆå…ƒç´ çš„æ–‡æœ¬å†…å®¹è®¾ç½®ä¸ºä¼ å…¥çš„å€¼ content å¯ä»¥ä¸ºå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºè¦è®¾ç½®çš„å†…å®¹ï¼Œå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…ƒç´ åœ¨ jQuery é›†åˆä¸­çš„ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å½“å‰html(text)çš„å€¼ã€‚ è¿½åŠ å…ƒç´  append(content)ï¼šå°† content è¿½åŠ å…ƒç´ å†…å®¹çš„æœ€åé¢(å­å…ƒç´ çº§åˆ«) prepend(content)ï¼šå°† content è¿½åŠ å…ƒç´ å†…å®¹çš„æœ€å‰é¢ before(content)ï¼šå°† content è¿½åŠ åˆ°å…ƒç´ çš„å‰é¢(å…„å¼Ÿå…ƒç´ çº§åˆ«) after(content)ï¼šå°† content è¿½åŠ åˆ°å…ƒç´ çš„åé¢ content çš„å€¼å¯ä»¥ä¸ºå­—ç¬¦ä¸²ï¼Œå…ƒç´ ï¼ŒjQueryé›†åˆï¼Œå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼å°†è¢«æ·»åŠ ï¼Œå‡½æ•°å°†æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå…ƒç´ çš„ä¸‹æ ‡å’ŒåŸå…ˆçš„å†…å®¹ã€‚ å¦‚æœé€‰æ‹©ç°æœ‰çš„DOMå…ƒç´ æ·»åŠ åˆ°æŸå…ƒç´ çš„æœ€åï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªç§»åŠ¨æ“ä½œï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¤åˆ¶æ“ä½œï¼Œæ¯”å¦‚æœ‰è¿™ä¹ˆä¸€ä¸ªç»“æ„ &lt;div&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt; æ‰§è¡Œä¸‹é¢çš„è¯­å¥ $(\"div\").append($(\"p\")); å¾—åˆ°çš„ç»“æœæ˜¯ &lt;div&gt; &lt;p&gt;&lt;/p&gt;&lt;/div&gt; è€Œä¸æ˜¯ &lt;div&gt; &lt;p&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt; å¦‚æœjQueryé›†åˆä¸­æœ‰å¤šä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆè¢«æ·»åŠ çš„å…ƒç´ ä¼šå¤åˆ¶å¤šä»½ï¼Œæ·»åŠ åˆ°è¿™äº›å…ƒç´ å†…å®¹çš„åé¢(å¦‚æœæ·»åŠ çš„æ˜¯DOMä¸­å·²æœ‰çš„å…ƒç´ ï¼Œä¹Ÿæ˜¯ç§»åŠ¨æ“ä½œ)ï¼Œå…¶å®ƒçš„æ“ä½œ(prependâ€¦)ä¹Ÿæ˜¯åŒç†ã€‚ appendTo(target) prependTo(target) insertBefore(target) insertAfter(target) è¿™äº›æ–¹æ³•çš„ä½œç”¨åŒä¸Šé¢ä»‹ç»çš„æ˜¯ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¸è¿‡æ˜¯ä¸»åŠ¨å˜ä¸ºäº†è¢«åŠ¨ï¼Œå¦‚ $(\"div\").append(content); // å‘divä¸­æ·»åŠ content$(\"div\").appendTo(target); // å°†divæ·»åŠ åˆ°targetä¸­ target åªèƒ½ä¸ºå…ƒç´ æˆ–è€…å­—ç¬¦ä¸² åˆ é™¤å…ƒç´  remove(selector)ï¼šåˆ é™¤ jQuery é›†åˆä¸­çš„å…ƒç´ ï¼Œselector æ˜¯ä¸€ä¸ªå¯é€‰çš„é€‰æ‹©å™¨ï¼Œç”¨æ¥è¿›ä¸€æ­¥ç­›é€‰è¦åˆ é™¤çš„å…ƒç´ ï¼Œè¢«åˆ é™¤çš„å…ƒç´ ä¼šæ”¾å…¥ä¸€ä¸ªæ–°çš„ jQuery é›†åˆä¸­è¿”å›ï¼Œæ‰€ä»¥è¢«åˆ é™¤çš„å…ƒç´ å¯ä»¥ç»§ç»­æ’å…¥åˆ° DOM ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ä¹‹å‰ç»‘å®šçš„äº‹ä»¶å’Œæ•°æ®å…¨éƒ¨è¢«åˆ é™¤äº†ã€‚ empty()ï¼šåˆ é™¤ DOM å…ƒç´ ä¸­çš„å†…å®¹ï¼Œä¸ remove ä¸åŒï¼Œ remove æ˜¯åˆ é™¤è¿™ä¸ª DOM å…ƒç´ ï¼ŒåŒ…æ‹¬è¿™ä¸ªå…ƒç´ åŒ…æ‹¬çš„å†…å®¹ï¼Œä½†æ˜¯ empty åªæ˜¯æ¸…é™¤è¯¥ DOM å…ƒç´ çš„å†…å®¹ã€‚ detach(selector)ï¼šè¯¥æ–¹æ³•çš„ä½œç”¨ä¸ remove æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¿ç•™ç»‘å®šçš„äº‹ä»¶å’Œç»‘å®šçš„æ•°æ®ã€‚ å¤åˆ¶å…ƒç´  clone(cloneHandler)ï¼šå¤åˆ¶ jQuery é›†åˆä¸­çš„å…ƒç´ ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„ jQuery é›†åˆè¿”å›ã€‚ cloneHandler å¦‚æœä¸º trueï¼Œé‚£ä¹ˆå°±ä¼šå¤åˆ¶ç»‘å®šçš„äº‹ä»¶ï¼Œå¦‚æœä¸º false å°±ä¸ä¼šå¤åˆ¶ç»‘å®šçš„äº‹ä»¶ æ›¿æ¢å…ƒç´  replaceWith(content)ï¼šä½¿ç”¨ content å»æ›¿æ¢ jQuery é›†åˆä¸­çš„å…ƒç´ ï¼Œè¿”å›è¢«æ›¿æ¢çš„å…ƒç´ ï¼Œ content å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå…ƒç´ å’Œå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºæ›¿æ¢çš„å†…å®¹ï¼Œå‡½æ•°çš„ä¸Šä¸‹æ–‡è¢«è®¾ç½®ä¸ºå½“å‰çš„å…ƒç´ ï¼Œä¸ä¼ é€’ä»»ä½•çš„å‚æ•°ï¼›å¦‚æœ content æ˜¯å·²ç»åœ¨DOMä¸­çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºæ˜¯ç§»åŠ¨åˆ° jQuery é›†åˆä¸­å…ƒç´ çš„ä½ç½®ï¼Œå¦‚æœ jQuery é›†åˆä¸­æœ‰å¤šä¸ªå…ƒç´ ï¼Œä¼šå¤åˆ¶å¤šä¸ª content å‰¯æœ¬ replaceAll(selector)ï¼šä½¿ç”¨ jQuery é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ å»æ›¿æ¢åŒ¹é… selector çš„å…ƒç´ ï¼Œå¦‚æœjQueryé›†åˆä¸­çš„å…ƒç´ æ˜¯å·²ç»åœ¨ DOM ä¸­çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºå°†ç¬¦åˆ selector çš„å…ƒç´ åˆ é™¤ï¼Œç„¶åå°† jQuery é›†åˆä¸­çš„å…ƒç´ ç§»åŠ¨åˆ°è¿™é‡Œï¼Œå¦‚æœç¬¦åˆ selector çš„å…ƒç´ æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆä¼šå¤åˆ¶å¤šä¸ª jQuery é›†åˆçš„å‰¯æœ¬ç§»åŠ¨ å¤„ç†è¡¨å•å…ƒç´  val()ï¼šè·å¾—é›†åˆä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ value å€¼ï¼Œå¦‚æœè¯¥å…ƒç´ æ˜¯ä¸€ä¸ªå¯ä»¥å¤šé€‰çš„å…ƒç´ ï¼Œé‚£ä¹ˆè¿”å›æ‰€æœ‰é€‰æ‹©é¡¹ç»„æˆæ•°ç»„(æ¯”å¦‚&lt;select mupltiple=&quot;mupltiple&quot;&gt;&lt;/select&gt;) å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ ä¸æ˜¯è¡¨å•å…ƒç´ ï¼Œåˆ™ä¼šè¿”å›ç©ºå­—ç¬¦ä¸² val(value)ï¼šè®¾ç½®é›†åˆä¸­è¡¨å•å…ƒç´ çš„ value å€¼ valueå€¼ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºè¢«è®¾ç½®çš„å†…å®¹ï¼Œå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå…ƒç´ çš„ä¸‹æ ‡å’Œå½“å‰çš„valueå€¼ val(values)ï¼šä½¿å¾—å¤šé€‰æ¡†ï¼Œå•é€‰æ¡†ï¼Œæˆ–è€…selectå…ƒç´ ä¸­çš„å¯é€‰é¡¹ä¸­ï¼Œå¦‚æœè¿™äº›é€‰é¡¹çš„å€¼åœ¨valuesä¸­ï¼Œåˆ™å®ƒå˜ä¸ºé€‰ä¸­çŠ¶æ€ jQuery äº‹ä»¶ç»‘å®šäº‹ä»¶jQuery ä½¿ç”¨ on æ–¹æ³•ç»‘å®šäº‹ä»¶ï¼Œå¦‚ä¸‹ on(eventType, childSelector, data, listener) eventTypeï¼Œå¿…éœ€ï¼Œè¦ç»‘å®šçš„äº‹ä»¶çš„ç±»å‹ï¼Œå¦‚ click childSelectorï¼Œå¯é€‰ï¼Œè§„å®šæŠŠäº‹ä»¶ç»‘å®šåˆ°å­å…ƒç´ ä¸Š dataï¼Œå¯é€‰ï¼Œè§„å®šä¼ é€’åˆ°å‡½æ•°çš„é¢å¤–æ•°æ® listenerï¼Œå¯é€‰ï¼Œè§„å®šäº‹ä»¶å‘ç”Ÿæ—¶è¿è¡Œçš„å‡½æ•° on æ–¹æ³•é™¤äº†ç»™å·²ç»å­˜åœ¨äºDOMä¸­çš„å…ƒç´ ç»‘å®šäº‹ä»¶ä»¥å¤–ï¼Œè¿˜å¯ä»¥ç»™ç°åœ¨è¿˜ä¸å­˜åœ¨äº DOM ä¸­ä½†æ˜¯æœªæ¥ä¼šæ·»åŠ åˆ° DOM ä¸­çš„å…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œå¦‚ &lt;div&gt;&lt;/div&gt; æ­¤æ—¶ DOM ä¸­åªæœ‰ div æ ‡ç­¾ï¼Œè¿™æ—¶æˆ‘æƒ³ç»™æœªæ¥ä¼šè¢«æ·»åŠ åˆ° DOM ä¸­çš„ p æ ‡ç­¾ç»‘å®šç‚¹å‡»äº‹ä»¶ $(\"p\").appendTo($(\"div\")); // å°†pæ ‡ç­¾æ·»åŠ åˆ°divä¸­// ä¸ºdivæ ‡ç­¾ä¸­çš„pæ ‡ç­¾ç»‘å®šäº‹ä»¶ï¼Œå³ä½¿pæ ‡ç­¾ä¸€å¼€å§‹å¹¶ä¸åœ¨DOMä¸­ï¼Œä¹Ÿå¯ä»¥ç»‘å®šæˆåŠŸ$(\"div\").on(\"click\", \"p\", function() &#123; &#125;) ä½¿ç”¨ one() ç»‘å®šäº‹ä»¶ï¼Œè¯¥äº‹ä»¶åœ¨æ‰§è¡Œå®Œä¸€æ¬¡åä¼šè¢«åˆ é™¤ one(eventType, data, listener) å„å‚æ•°çš„å«ä¹‰ä¸ on æ˜¯ä¸€è‡´çš„ é™¤äº†å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ç»‘å®šäº‹ä»¶ä»¥å¤–ï¼ŒjQuery è¿˜æä¾›äº†ååˆ†æ–¹ä¾¿çš„ç»‘å®šç‰¹å®šäº‹ä»¶æ–¹æ³•ï¼Œå¦‚ // ä¸ºdivæ ‡ç­¾ç»‘å®šç‚¹å‡»äº‹ä»¶$(\"div\").click(function() &#123; &#125;) è¿™æ ·ç›´æ¥ä»¥äº‹ä»¶çš„åå­—ç»‘å®šäº‹ä»¶ï¼Œæ—¢æ–¹ä¾¿ï¼Œè¯­ä¹‰åˆæ˜ç¡®ï¼Œæ”¯æŒè¿™ç§æ–¹å¼çš„ eventTypeName å¦‚ä¸‹ è§£ç»‘äº‹ä»¶ off(event, selector, listener)ï¼šç§»é™¤é€šè¿‡ on æ–¹æ³•ç»‘å®šçš„äº‹ä»¶ è§¦å‘äº‹ä»¶ trigger(event, data) è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥è§¦å‘äº‹ä»¶çš„ï¼Œæ¯”å¦‚ $(&quot;#foo&quot;).trigger(&quot;click&quot;) ä¼šè§¦å‘ id ä¸º foo çš„ç‚¹å‡»äº‹ä»¶ data æ˜¯å¯é€‰å‚æ•°ï¼Œæ˜¯ä¼ é€’ç»™äº‹ä»¶å¤„ç†çš„é¢å¤–å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…å¯¹è±¡ æ¥è§£é‡Šä¸€ä¸‹ dataï¼ŒåŠ å…¥åœ¨ç»‘å®šäº‹ä»¶æ—¶éœ€è¦é¢å¤–çš„å‚æ•°ï¼Œå¦‚ // éœ€è¦é¢å¤–çš„å‚æ•°a, b$(\"#foo\").click(function(event, a, b) &#123; &#125;) è¿™æ—¶æˆ‘ä»¬åœ¨è§¦å‘äº‹ä»¶æ—¶å°±éœ€è¦ä¼ å…¥é¢å¤–çš„å‚æ•° $(\"#foo\").trigger(\"click\", [\"foo\", \"bar\"]) triggerHandler(event, data) triggerHandler çš„ä½œç”¨ä¸ trigger ç±»ä¼¼ï¼Œä¸è¿‡æœ‰å‡ ç‚¹ä¸åŒ .triggerHandler() æ–¹æ³•å¹¶ä¸ä¼šè§¦å‘äº‹ä»¶çš„é»˜è®¤è¡Œä¸º(ä¾‹å¦‚ï¼Œè¡¨å•æäº¤)ã€‚ .trigger() ä¼šå½±å“æ‰€æœ‰ä¸ jQuery å¯¹è±¡ç›¸åŒ¹é…çš„å…ƒç´ ï¼Œè€Œ .triggerHandler() ä»…å½±å“ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å…ƒç´ ã€‚ ä½¿ç”¨ .triggerHandler() åˆ›å»ºçš„äº‹ä»¶ï¼Œå¹¶ä¸ä¼šåœ¨ DOM æ ‘ä¸­å‘ä¸Šå†’æ³¡ã€‚ .triggerHandler() è¿”å›æœ€åä¸€ä¸ªå¤„ç†çš„äº‹ä»¶çš„è¿”å›å€¼ï¼Œè€Œä¸æ˜¯ jQuery é›†åˆï¼Œå³ä¸èƒ½è¿›è¡Œé“¾å¼è°ƒç”¨ é™¤äº†ä¸Šè¿°çš„æ–¹æ³•å¤–ï¼ŒjQuery è¿˜æä¾›äº†å¯ä»¥ç›´æ¥é€šè¿‡åå­—ç›´æ¥è§¦å‘äº‹ä»¶ï¼Œå¦‚ $(\"#foo\").click() // è§¦å‘ç‚¹å‡»äº‹ä»¶ å…¶ä»–äº‹ä»¶ toggle(listener1, listener2, ...) å½“ç‚¹å‡»å…ƒç´ æ—¶ä¼šä¾æ¬¡è§¦å‘äº‹ä»¶ æ¯”å¦‚ç¬¬ä¸€æ¬¡ç‚¹å‡»è§¦å‘ listener1 ï¼Œç¬¬äºŒæ¬¡ç‚¹å‡»è§¦å‘ listener2 ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¦‚æœ toggle ä¸­çš„äº‹ä»¶è§¦å‘å®Œäº†ï¼Œé‚£ä¹ˆä¼šå¾ªç¯è§¦å‘ hover(enterHandle, leaveHadnler) å½“é¼ æ ‡è¿›å…¥å…ƒç´ æ—¶è§¦å‘ enterHandle ï¼Œç¦»å¼€å…ƒç´ æ—¶è§¦å‘ leaveHadnler hover(handler) å½“é¼ æ ‡è¿›å…¥å…ƒç´ ä»¥åŠç¦»å¼€å…ƒç´ æ—¶å‡ä¼šè§¦å‘ handler Eventå®ä¾‹æˆ‘ä»¬å‘å…ƒç´ ç»‘å®šäº‹ä»¶æ—¶ï¼Œä¼šå‘ç›‘å¬å™¨(ç»‘å®šçš„å¤„ç†å‡½æ•°)ä¼ å…¥ä¸€ä¸ª event å¯¹è±¡ï¼Œé‚£ä¹ˆ event å¯¹è±¡ä¸­æœ‰ä»€ä¹ˆä¿¡æ¯å¯ä»¥ä¸ºæˆ‘ä»¬æ‰€ç”¨å‘¢? å±æ€§ å«ä¹‰ altKey å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œå¦‚æœ Alt é”®è¢«æŒ‰ä¸‹ï¼Œè®¾ç½®ä¸º trueï¼Œå¦åˆ™ä¸º false ctrlKey å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œå¦‚æœ Ctrl é”®è¢«æŒ‰ä¸‹ï¼Œè®¾ç½®ä¸º trueï¼Œå¦åˆ™ä¸º false shiftKey å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œå¦‚æœ Shift é”®å·²è¢«æŒ‰ä¸‹ï¼Œåˆ™è®¾ç½®ä¸º trueï¼Œå¦åˆ™ä¸º false target è§¦å‘äº‹ä»¶çš„å…ƒç´  currentTarget å†’æ³¡é˜¶æ®µçš„å½“å‰å…ƒç´ ï¼Œå®ƒå’Œäº‹ä»¶å¤„ç†å™¨ä¸­ this å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ relatedTarget å¯¹äºé¼ æ ‡äº‹ä»¶ï¼Œæ‰¾å‡ºè§¦å‘äº‹ä»¶æ—¶å…‰æ ‡ç¦»å¼€æˆ–è€…è¿›å…¥çš„å…ƒç´  pageX/pageY å¯¹äºé¼ æ ‡äº‹ä»¶ï¼ŒæŒ‡å®šè§¦å‘äº‹ä»¶æ—¶å…‰æ ‡ç›¸å¯¹äºé¡µé¢åŸç‚¹çš„æ°´å¹³/å‚ç›´åæ ‡ screenX/screenY å¯¹äºé¼ æ ‡äº‹ä»¶ï¼ŒæŒ‡å®šè§¦å‘äº‹ä»¶æ—¶å…‰æ ‡ç›¸å¯¹äºå±å¹•åŸç‚¹çš„æ°´å¹³/å‚ç›´åæ ‡ timestamp jQuery.Eventå®ä¾‹åˆ›å»ºæ—¶çš„æ—¶é—´æˆ³ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ æ–¹æ³• å«ä¹‰ preventDefault() é˜»æ­¢é»˜è®¤åŠ¨ä½œ(è¡¨å•æäº¤ï¼Œé“¾æ¥è·³è½¬ï¼Œå¤é€‰æ¡†çŠ¶æ€æ”¹å˜) stopPropagation() åœæ­¢å†’æ³¡ stopImmediatePropagation() åœæ­¢å†’æ³¡ï¼ŒåŒ…æ‹¬å½“å‰å…ƒç´ ä¸Šçš„äº‹ä»¶ isDefaultPrevented() å¦‚æœå·²ç»åœ¨æ­¤å®ä¾‹ä¸Šè°ƒç”¨äº† preventDefault() æ–¹æ³•ï¼Œåˆ™è¿”å› true isPropagationStopped() å¦‚æœå·²ç»åœ¨æ­¤å®ä¾‹ä¸Šè°ƒç”¨äº† stopPropagation() æ–¹æ³•ï¼Œåˆ™è¿”å› true isImmediatePropagationStopped() å¦‚æœå·²ç»åœ¨æ­¤å®ä¾‹ä¸Šè°ƒç”¨äº† stopImmediatePropagation() æ–¹æ³•ï¼Œåˆ™è¿”å› true jQuery æ˜¾ç¤ºä¸éšè—æ˜¾ç¤ºå’Œéšè—å…ƒç´  hide()ï¼šéšè—å…ƒç´  show()ï¼šæ˜¾ç¤ºå…ƒç´  éšè—å…ƒç´ æ˜¯å°†å…ƒç´ çš„ display å±æ€§è®¾ç½®ä¸º noneï¼Œè€Œæ˜¾ç¤ºå±æ€§ä¼šå°† display å±æ€§è®¾ç½®ä¸ºä¸éšè—å‰çš„ display ç›¸åŒï¼Œæ¯”å¦‚åœ¨éšè—å‰æŸå…ƒç´ çš„ display ä¸º blockï¼Œ hide ä¼šå°† dispaly è®¾ç½®ä¸º noneï¼Œshow ä¼šå°† display è®¾ç½®ä¸ºä¸ä¹‹å‰ç›¸åŒä¸º blockã€‚ toggle()ï¼šåˆ‡æ¢ï¼Œå¦‚æœä¸ºæ˜¾ç¤ºï¼Œåˆ™éšè—ï¼Œå¦‚æœéšè—ï¼Œåˆ™æ˜¾ç¤º æ˜¾ç¤ºéšè—åŠ¨ç”»ä¸Šé¢çš„æ–¹æ³•å…¶å®è¿˜å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•° hide(speed, callback) speed ç”¨æ¥è§„å®šéšè—çš„é€Ÿåº¦ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰åŠ¨ç”»æ•ˆæœçš„ï¼Œå…ƒç´ ç¬é—´æ¶ˆå¤±ï¼Œå¯ä»¥ä¼ å…¥æ•°å­—ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä»¥ä¸‹é¢„å®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œslow, normal, fast callback æ˜¯åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åä¼šæ‰§è¡Œçš„å›è°ƒå‡½æ•° åŒç†ï¼Œshow() å’Œtoggle() ä¹Ÿç”±è¿™ä¸¤ä¸ªå‚æ•°ï¼Œä¸hide() çš„ç”¨æ³•ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥ä¸å†èµ˜è¿°ã€‚ å‡è®¾æœ‰ä¸€ä¸ª div æ ‡ç­¾ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»å®ƒæ—¶ï¼Œå®ƒä¼šå…ˆéšè—ï¼Œä¼šæ˜¾ç¤º $(\"div\").click(function() &#123; $(this).hide(\"slow\").show(\"fast\")&#125;) é™¤äº†ä¸Šé¢æ–¹æ³•æ˜¾ç¤ºå’Œéšè—å…ƒç´ ä»¥å¤–ï¼ŒjQuery è¿˜æä¾›äº†å¾ˆå¤šçš„æ–¹æ³•ï¼Œå¦‚ æ·¡å…¥æ·¡å‡º(åªæ”¹å˜å…ƒç´ çš„ä¸é€æ˜åº¦)ï¼š fadeIn(speed, callback) fadeOut(speed, callback) fadeTo(speed, opacity, callback)ï¼šé€æ¸æ”¹å˜å…ƒç´ çš„é€æ˜åº¦åˆ°è®¾å®šçš„opacity æˆ‘ä»¬åœ¨ä½¿ç”¨ hide æˆ–è€… show æ—¶ï¼Œé™¤äº†æ”¹å˜é€æ˜åº¦ä»¥å¤–ï¼Œè¿˜ä¼šæ”¹å˜é«˜åº¦å’Œå®½åº¦ï¼Œè€Œ fade... æ–¹æ³•åªä¼šæ”¹å˜ä¸é€æ˜åº¦ï¼Œå½“ opacity ä¸º 0 æ—¶ï¼Œå°† display è®¾ç½®ä¸º none $(\"div\").click(function() &#123; $(this).fadeOut(\"slow\").fadeIn(\"fast\")&#125;) æ»‘å…¥æ»‘å‡ºï¼š slideDown(speed, callback)ï¼šæ”¹å˜å…ƒç´ çš„å‚ç›´å°ºå¯¸ï¼Œä½¿å…ƒç´ é€æ¸æ˜¾ç¤ºå‡ºæ¥ slideUp(speed, callback)ï¼šæ”¹å˜å…ƒç´ çš„å‚ç›´å°ºå¯¸ï¼Œä½¿å…ƒç´ é€æ¸æ¶ˆå¤± slideToggle(speed, callback)ï¼šéšè—åˆ™æ˜¾ç¤ºï¼Œæ˜¾ç¤ºåˆ™éšè— $(\"div\").click(function() &#123; $(\"div\").slideUp(\"slow\").slideDown(\"fast\")&#125;) jQuery åŠ¨ç”» animate(properties, duration, easing, callback) propertiesï¼šå…ƒç´ æœ€åè¾¾åˆ°çš„ CSS çŠ¶æ€ durationï¼šæŒç»­æ—¶é—´ easingï¼šåŠ¨ç”»æ›²çº¿ï¼ŒjQuery æä¾›ä¸¤ä¸ªå‡½æ•°æ›²çº¿ linear å’Œ swing callbackï¼šåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åçš„ä¼šæ‰§è¡Œçš„å›è°ƒå‡½æ•° æˆ‘ä»¬é€šè¿‡ç»™å®šå¸Œæœ›å…ƒç´ æœ€åèƒ½å¤Ÿè¾¾åˆ°çš„ CSS çŠ¶æ€ï¼Œæ¯”å¦‚ä½ç½®çš„å˜åŒ–ï¼Œå®½é«˜çš„å˜åŒ–ï¼Œè€Œ jQuery ä¼šè‡ªåŠ¨æ ¹æ®æŒç»­çš„æ—¶é—´ä»¥åŠåˆå§‹çš„çŠ¶æ€è®¡ç®—å‡ºä¸­é—´çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å¸§ï¼Œå¦‚ $(\"div\").click(function() &#123; $(\"div\").animate(&#123; width: \"200px\" &#125;, 500, \"swing\")&#125;) è‡ªå®šä¹‰ç¼©æ”¾åŠ¨ç”»$(\"div\").hover(function() &#123; // é¼ æ ‡æ”¾ä¸Šå»æ—¶ï¼Œæ”¾å¤§ä¸¤å€ $(\"div\").animate(&#123; width: $(this).width() * 2, height: $(this).height() * 2 &#125;)&#125;, function () &#123; // ç¦»å¼€æ—¶æ¢å¤åŸæ · $(\"div\").animate(&#123; width: $(this).width() / 2, height: $(this).height() / 2 &#125;)&#125;) è‡ªå®šä¹‰æ‰è½åŠ¨ç”»$(\"div\").click(function() &#123; $(this).css(&#123; position: \"relative\" &#125;).animate(&#123; opacity: 0, // è®¡ç®—è¦ä¸‹é™çš„é«˜åº¦ top: $(window).height() - $(this).height() - $(this).position().top &#125;, \"slow\", function() &#123; // å› ä¸º opacity ä¸º 0 åªæ˜¯ä¸å¯è§ï¼Œä½†æ˜¯ä»ç„¶å æ®ä½ç½®ï¼Œæ‰€ä»¥æœ€åè¦hideéšè—ä¸€ä¸‹ // å¯ä»¥å°† opacity æœ€åçš„çŠ¶æ€è®¾ç½®ä¸º hideï¼Œé‚£ä¹ˆè¿™ä¸ªå›è°ƒå‡½æ•°å¯ä»¥çœç•¥ $(this).hide() &#125;)&#125;) å°† $.fx.off è®¾ç½®ä¸º true ä¼šç¦ç”¨åŠ¨ç”» jQueryæ‰©å±•åŠå®ç”¨å‡½æ•°jQueryä¸å…¶ä»–åº“å¹¶å­˜ $.noConflict()ï¼šå°† $ æ§åˆ¶æƒç»™å…¶ä»–åº“ï¼Œåœ¨æ‰§è¡Œè¯¥è¡Œä»£ç åä¸èƒ½ä½¿ç”¨ $ï¼Œåªèƒ½ä½¿ç”¨ jQuery jQueryå®ç”¨å‡½æ•° $.trim(value)ï¼šå»é™¤å­—ç¬¦ä¸²å‰åçš„ç©ºç™½å­—ç¬¦(ä¸ä»…ä»…æ˜¯ç©ºæ ¼ï¼Œè¿˜æœ‰å›è½¦ç­‰ç­‰) $.each(container, callback)ï¼šä¼šä¸º container (æ•°ç»„|å¯¹è±¡)ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ callbackï¼Œcallback çš„å‚æ•°å°±æ˜¯ container ä¸­çš„æ¯ä¸ªå…ƒç´  $.grep(array, callback, invert)ï¼šä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ callbackï¼Œæ ¹æ® callback çš„è¿”å›å€¼å†³å®šæ˜¯å¦å°†å…ƒç´ æ·»åŠ åˆ°æ–°çš„æ•°ç»„ï¼Œå¦‚æœ invert ä¸º trueï¼Œé‚£ä¹ˆ callback è¿”å› false åˆ™å°†å…ƒç´ æ·»åŠ åˆ°æ–°æ•°ç»„ï¼Œåä¹‹è‹¥ invert ä¸º falseï¼Œåˆ™ callback è¿”å› true åˆ™å°†å…ƒç´ æ·»åŠ åˆ°æ–°çš„æ•°ç»„ï¼Œæœ€åå°†æ–°æ•°ç»„è¿”å› $.map(array, callback)ï¼šè¿™ä¸ªæ–¹æ³•ä¸æƒ³å¤šè§£é‡Š $.inArray(value, array)ï¼šæ–¹æ³• value åœ¨ array ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡ $.makeArray(object)ï¼šå°†ä¸€ä¸ªä¼ªæ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ $.unique(array)ï¼šè¿”å› array ä¸­ä¸é‡å¤çš„å…ƒç´ ç»„æˆçš„æ•°ç»„ $.merge(array1, array2)ï¼šå°†ç¬¬äºŒä¸ªæ•°ç»„åˆå¹¶åˆ°ç¬¬ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªæ•°ç»„ ä¸Šé¢çš„æ–¹æ³•å¤§å¤šæ•° JavaScript å·²ç»æœ‰åŸç”Ÿçš„å®ç°äº† æ‰©å±•jQuery$.fn.xxxï¼šè¯¥æ–¹æ³•ä¼šè¢«æ·»åŠ åˆ° jQuery å¯¹è±¡çš„åŸå‹ä¸Šï¼Œé€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥æ‰©å±• jQuery Ajaxå¯åŠ¨ä¸€ä¸ªNodeæ¥è¿›è¡ŒæœåŠ¡ç«¯æµ‹è¯•const http = require('http');const server = http.createServer();server.on('request', (req, res) =&gt; &#123; // å¤„ç†è·¨åŸŸ // å…è®¸http://127.0.0.1:5500 è·¨åŸŸè¯·æ±‚ res.setHeader('Access-Control-Allow-Origin', 'http://127.0.0.1:5500'); res.end(\"Hello World\");&#125;)server.listen(4000, () =&gt; &#123; console.log(\"æœåŠ¡å¯åŠ¨åœ¨4000ç«¯å£\");&#125;) å›é¡¾Ajax&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src=\"https://cdn.bootcss.com/jquery/3.4.1/jquery.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;button&gt;å‘é€è¯·æ±‚&lt;/button&gt; &lt;ul&gt; &lt;/ul&gt; &lt;script&gt; $(\"button\").click(function () &#123; let xhr = new XMLHttpRequest(); // è®¾ç½®è¯·æ±‚æ–¹æ³•å’Œè¯·æ±‚è·¯å¾„ xhr.open(\"GET\", \"http://localhost:4000\"); // ç›‘å¬onreadystatechangeï¼Œå½“readyStateæ”¹å˜æ—¶ä¼šè§¦å‘æ­¤å‡½æ•° xhr.onreadystatechange = function () &#123; // readyStateä¸º4è¡¨ç¤ºå¤„ç†è¯·æ±‚å®Œæˆ if (this.readyState == 4) &#123; if (this.status &gt;= 200 &amp;&amp; this.status &lt; 300) &#123; // æˆåŠŸ $(\"ul\").append(`&lt;li&gt;$&#123;this.responseText&#125;&lt;/li&gt;`) &#125; else &#123; // å¤±è´¥ alert(\"å¤±è´¥\"); &#125; &#125; &#125; // å‘é€çš„è¯·æ±‚ä½“æ•°æ® getæ–¹æ³•ä¸ä¼ å‚æ•°ï¼Œæˆ–è€…ä¼ å…¥null xhr.send(); &#125;) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¸Šé¢çš„ä»£ç æ˜¯å½“ç‚¹å‡»buttonæ—¶å‘é€ä¸€ä¸ªajaxè¯·æ±‚ï¼Œå¹¶ä¸”è·å¾—çš„å†…å®¹æ·»åŠ åˆ°ulä¸­ï¼Œæ•ˆæœå¦‚ä¸‹ XMLHttpRequest å¯¹è±¡æ‹¥æœ‰çš„å±æ€§å’Œæ–¹æ³•ä¸º å±æ€§å’Œæ–¹æ³• å«ä¹‰ abort() å–æ¶ˆå½“å‰è¯·æ±‚ getAllResponseHeaders() è·å¾—æ‰€ä»¥çš„å“åº”å¤´åŠç›¸åº”çš„å€¼ç»„æˆçš„å­—ç¬¦ä¸² getResponseHeader() è·å¾—æŒ‡å®šåç§°çš„å“åº”å¤´å’Œå€¼ open(method, url, async, username, password) è®¾ç½®è¯·æ±‚æ–¹æ³•å’Œ URLï¼Œå¯ä»¥è®¾ç½®åŒæ­¥è¯·æ±‚å’Œå¼‚æ­¥è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥æé«˜åŸºäºå®¹å™¨è®¤è¯éœ€è¦çš„ç”¨æˆ·åå’Œå¯†ç  send(content) å‘é€å¸¦æœ‰æŒ‡å®šå†…å®¹çš„è¯·æ±‚ setRequestHeader(name, value) è®¾ç½®è¯·æ±‚å¤´ onreadystatechange å½“çŠ¶æ€æ”¹å˜æ—¶ï¼Œè§¦å‘æ­¤æ–¹æ³•æ¥æ”¶çš„å›è°ƒå‡½æ•° readyState ç›®å‰çš„è¯·æ±‚çŠ¶æ€ï¼š0ï¼šå·²åˆ›å»º XHR å¯¹è±¡ï¼Œä½†æ˜¯æœªè°ƒç”¨ open æ–¹æ³•1ï¼šå·²è°ƒç”¨ open æ–¹æ³•ï¼Œä½†æ˜¯è¯·æ±‚è¿˜æœªå‘å‡º2ï¼šå·²è°ƒç”¨ send æ–¹æ³•3ï¼šæœåŠ¡ç«¯æ­£åœ¨å¤„ç†ï¼ŒresponseText ä¸­å·²æœ‰éƒ¨åˆ†æ•°æ®4ï¼šå“åº”å·²ç»æ¥æ”¶å®Œæˆ reponseText å“åº”ä½“ä¸­çš„æ•°æ® responseXML å¦‚æœè¿”å›çš„å†…å®¹æŒ‡å®šä¸º XMLï¼Œä¼šå¤åˆ¶ä¸€ä»½ reponseText çš„å†…å®¹åˆ°è¿™é‡Œ status æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç  statusText è¿”å›çš„æ–‡æœ¬çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚ success ok jQuery å‘èµ· Ajax è¯·æ±‚ get(url, parameters, callback, type) urlï¼šè¯·æ±‚çš„è·¯å¾„ parametersï¼šè¯·æ±‚å‚æ•°ï¼Œä¼šè¢«æ‹¼æ¥åˆ° url å callbackï¼šè¯·æ±‚æˆåŠŸåè°ƒç”¨çš„å‡½æ•° typeï¼šä»¥ä½•ç§æ–¹å¼å¤„ç†å“åº”æ•°æ®ï¼Œå¦‚ htmlï¼Œjson getJSON(url, parameters, callback)ï¼šç›¸å½“äºæ˜¯ get(url, parameters, callback, type) ä¸­ type ä¸º json çš„å¿«æ·å†™æ³• post(url, parameters, callback, type)ï¼šåŒ getï¼Œä¸è¿‡è¯·æ±‚çš„æ–¹æ³•æ˜¯ POSTï¼Œè€Œä¸”è¯·æ±‚æ•°æ®æ˜¯æ”¾åœ¨è¯·æ±‚ä½“ä¸­çš„ ajax(options)ï¼š é€šè¿‡ä¼ å…¥çš„é€‰é¡¹ options å¯ä»¥æ§åˆ¶å‘é€ ajax è¯·æ±‚çš„å„ç§ç»†èŠ‚ å‚æ•° å«ä¹‰ url è¯·æ±‚çš„åœ°å€ type è¯·æ±‚çš„æ–¹æ³•ï¼Œå¦‚ GET POSTï¼Œé»˜è®¤ä¸º GET data è¯·æ±‚å‚æ•°ï¼Œå¦‚æœæ˜¯ GETï¼Œåˆ™æŠŠå‚æ•°æ”¾å…¥è¯·æ±‚åœ°å€ä¸­ï¼Œå¦‚æœæ˜¯ POSTï¼Œåˆ™æŠŠæ•°æ®ä½œä¸ºè¯·æ±‚ä¸»é¢˜ processData å°†ä¸Šé¢çš„ data è¿›è¡Œå¤„ç†ä¸º URL ç¼–ç æ ¼å¼ï¼Œå¦‚æœæŒ‡å®šä¸º falseï¼Œåˆ™ä¸è¿›è¡Œæ­¤æ“ä½œ contentType æŒ‡å®šè¯·æ±‚å†…å®¹çš„ç±»å‹ cache æ˜¯å¦å¯åŠ¨æµè§ˆå™¨ç¼“å­˜ï¼Œé»˜è®¤ä¸º true timeout è¶…æ—¶æ—¶é—´(å•ä½æ¯«ç§’)ï¼Œè¶…è¿‡æ”¹æ—¶é—´æ²¡æœ‰å¾—åˆ°åº”ç­”ï¼Œåˆ™è°ƒç”¨å¤„ç†é”™è¯¯çš„å›è°ƒå‡½æ•° async å¦‚æœæŒ‡å®š falseï¼Œåˆ™å°†è¯·æ±‚ä½œä¸ºåŒæ­¥è¯·æ±‚æ¥æäº¤ï¼Œé»˜è®¤ä¸ºå¼‚æ­¥ beforeSend åœ¨å‘èµ·è¯·æ±‚ä¹‹å‰è°ƒç”¨çš„å‡½æ•° success è¿”å›æˆåŠŸçŠ¶æ€ç æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå“åº”ä¸»ä½“ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ¶ˆæ¯å­—ç¬¦ä¸²ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸º XHR å®ä¾‹çš„å¼•ç”¨ error è¿”å›é”™è¯¯çŠ¶æ€ç æ—¶è°ƒç”¨çš„å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸º XHR å®ä¾‹ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ¶ˆæ¯å­—ç¬¦ä¸²ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå¼‚å¸¸å¯¹è±¡ complete è¯·æ±‚ç»“æŸæ—¶è°ƒç”¨çš„æ–¹æ³•ï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸º XHR å®ä¾‹ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ¶ˆæ¯å­—ç¬¦ä¸² xhr ç”¨æ¥æä¾› XHR å®ä¾‹è‡ªå®šä¹‰å®ç°çš„å›è°ƒå‡½æ•° jQuery çš„ ajax æ–¹æ³•ä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¹ˆå¤šå¯é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ä¸€äº›é€‰é¡¹çš„è¯ï¼Œå°±ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼Œä½¿ç”¨ ajaxSetup æ–¹æ³•æ¥è®¾ç½®é»˜è®¤å€¼ ajaxSetup(options) $.ajaxSetup(&#123; type: 'POST', timeout: 5000&#125;) é‚£ä¹ˆåé¢çš„æ¯ä¸ª ajax è°ƒç”¨éƒ½ä¼šä½¿ç”¨è¿™äº›é»˜è®¤å€¼($.get() çš„ HTTP æ–¹æ³•ä¸ä¼šè¢«æ”¹ä¸º POST)ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"},{"name":"jQuery","slug":"jQuery","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/jQuery/"}]},{"title":"ä½¿ç”¨beforeå’Œafterå®ç°ä¸€ä¸ªhoveré®ç½©æ•ˆæœ","date":"2020-04-04T16:00:00.000Z","path":"/ä½¿ç”¨beforeå’Œafterå®ç°ä¸€ä¸ªhoveré®ç½©æ•ˆæœ/","text":"ä»Šå¤©å¼€å§‹å­¦ä¹ CSSæ•ˆæœï¼Œè®°å½•ä¸€ä¸‹ï¼Œæˆå“å¦‚ä¸‹ å®ç°çš„æ€è·¯å¾ˆç®€å•ï¼Œä½¿ç”¨åˆ°äº†::beforeå’Œ::afterä¸¤ä¸ªä¼ªå…ƒç´ ï¼Œé»˜è®¤ä¸¤ä¸ªä¼ªå…ƒç´ çš„widthä¸º0ï¼Œheightä¸çˆ¶å…ƒç´ çš„é«˜åº¦ç›¸åŒï¼Œå½“é¼ æ ‡æ”¾ä¸Šå»æ—¶ï¼Œä¼ªå…ƒç´ çš„widthå˜ä¸º100%ï¼Œæ³¨æ„åˆ°ä¸¤ä¸ªä¼ªå…ƒç´ å˜åŒ–çš„æ–¹å‘ä¸ä¸€æ ·ï¼Œå› ä¸º::beforeè¢«è®¾ç½®ä¸ºäº† top: 0;left: 0; è€Œ::afterè¢«è®¾ç½®ä¸º bottom: 0;right: 0; talk is cheap, show me the codeï¼Œç›´æ¥ä¸Šä»£ç å§ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; html, body &#123; width: 100%; height: 100%; background-color: #fff; &#125; a &#123; font-size: 50px; display: block; width: 300px; height: 100px; line-height: 100px; margin: auto; text-decoration: none; text-align: center; text-transform: uppercase; color: #666; border: 1px solid black; position: absolute; top: 0; left: 0; bottom: 0; right: 0; font-family: Arial, Helvetica, sans-serif; transition: all 0.5s; z-index: 1; &#125; a::before, a::after &#123; content: \"\"; display: block; width: 0; height: 100px; position: absolute; background: #333; transition: all 0.5s; z-index: -1; &#125; a::before &#123; top: 0; left: 0; &#125; a::after &#123; bottom: 0; right: 0; &#125; a:hover::before, a:hover::after &#123; width: 100%; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;a href=\"#\"&gt;Move&lt;/a&gt;&lt;/body&gt;&lt;/html&gt; ä¸Šé¢çš„ä»£ç ä¸éš¾ç†è§£ï¼Œå°±ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨aæ ‡ç­¾ä¸­è®¾ç½®äº† margin: auto;position: absolute;top: 0;left: 0;bottom: 0;right: 0; è¿™æ ·çš„å†™æ³•ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä½¿å¾—aæ ‡ç­¾åœ¨bodyä¸­å±…ä¸­æ˜¾ç¤ºï¼Œå› ä¸ºè®¾ç½®äº†å®šä½çš„å±æ€§ top: 0;left: 0;bottom: 0;right: 0; å››ä¸ªéƒ½ä¸º0ï¼Œè¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œè®¾ç½®marginä¸ºautoä¼šä¸ºaå…ƒç´ å››å‘¨å……æ»¡å¤–è¾¹è·ï¼Œå¦‚ä¸‹ è¿™æ ·å°±å¯ä»¥åˆ°å±…ä¸­çš„æ•ˆæœã€‚","tags":[{"name":"CSS","slug":"CSS","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/CSS/"}]},{"title":"æ•°ç»„ä¸­çš„é‡å¤çš„æ•°å­—","date":"2020-04-03T16:00:00.000Z","path":"/æ•°ç»„ä¸­çš„é‡å¤çš„æ•°å­—/","text":"é¢˜ç›®ä¸€ï¼šæ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­— åœ¨ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°ç»„éƒ½åœ¨ 0~n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥é•¿åº¦ä¸º7çš„æ•°ç»„{2, 3, 1, 0, 2, 5, 3}ï¼Œé‚£ä¹ˆå¯¹åº”çš„è¾“å‡ºæ˜¯é‡å¤çš„æ•°ç»„2æˆ–è€…3ã€‚ è€ƒè™‘å¦‚æœæ²¡æœ‰æ•°ç»„ä¸­æ²¡æœ‰é‡å¤çš„æ•°å­—ï¼Œé‚£ä¹ˆæ’åºåä¼šæœ‰arr[i] = i(å› ä¸ºå…ƒç´ åœ¨ 0~n-1 çš„èŒƒå›´å†…)ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬éå†æ•°ç»„ï¼Œè®©ç¬¬iä¸ªä½ç½®çš„å…ƒç´ çš„å€¼ä¸ºi(ä»0å¼€å§‹)ï¼Œåšæ³•æ˜¯å½“arr[i] != içš„æ—¶å€™ï¼Œä¸ç¬¬arr[i]çš„ä½ç½®è¿›è¡Œäº¤æ¢ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—ç¬¬arr[i]ä¸ªä½ç½®ä¸Šçš„æ•°æ˜¯arr[i]ï¼Œå³arr[arr[i]] = arr[i] int temp = arr[i];arr[i] = arr[temp];arr[temp] = temp; å¦‚æœæœ‰é‡å¤çš„æ•°ï¼Œç”±äºarr[arr[i]]ä½ç½®ä¸Šçš„æ•°å·²ç»è¢«å äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±çŸ¥é“æœ‰é‡å¤çš„æ•°ï¼Œç®—æ³•å¦‚ä¸‹ public class Test01 &#123; public static boolean duplicate(int[] arr) &#123; if (arr.length &lt;= 0 || arr == null) &#123; return false; &#125; for (int i = 0; i &lt; arr.length; i++) &#123; while(arr[i] != i) &#123; if (arr[arr[i]] == arr[i]) &#123; return true; &#125; swap(arr, i, arr[i]); printArr(arr); &#125; &#125; return false; &#125; private static void swap(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; private static void printArr(int[] arr) &#123; System.out.print(\"[\"); for (int i = 0; i &lt; arr.length; i++) &#123; System.out.print(arr[i]); if(i != arr.length - 1) &#123; System.out.print(\", \"); &#125; &#125; System.out.println(\"]\"); &#125; public static void main(String[] args) &#123; int[] arr = &#123;2, 3, 1, 0, 2, 3, 5&#125;; // int[] arr = &#123;7, 5, 6, 3, 4, 1, 0, 2&#125;; boolean duplicated = duplicate(arr); System.out.println(duplicated); &#125;&#125; é¢˜ç›®äºŒï¼šä¸ä¿®æ”¹æ•°ç»„æ‰¾å‡ºé‡å¤çš„æ•°å­— åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n+1 çš„æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 1~n çš„èŒƒå›´å†…ï¼Œæ‰€ä»¥æ•°ç»„ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­—æ˜¯é‡å¤çš„ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ï¼Œä½†ä¸èƒ½ä¿®æ”¹è¾“å…¥çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥é•¿åº¦ä¸º8çš„æ•°ç»„{2, 3, 5, 4, 3, 2, 6, 7}ï¼Œé‚£ä¹ˆå¯¹åº”çš„è¾“å‡ºæ˜¯é‡å¤çš„æ•°å­—2æˆ–è€…3ã€‚ è¯¥ç®—æ³•æœ‰ä¸¤ç§æ€è·¯ï¼Œç¬¬ä¸€ç§éœ€è¦å¤§å°ä¸º n+1 çš„è¾…åŠ©æ•°ç»„ï¼Œæˆ‘ä»¬éå†æ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ éƒ½å¤åˆ¶åˆ°è¾…åŠ©æ•°ç»„ä¸­ï¼ŒåŸåˆ™å¦‚ä¸‹ï¼Œå‡è®¾è¦å¤åˆ¶çš„å…ƒç´ ä¸ºmï¼Œé‚£ä¹ˆå°†è¯¥æ•°å¤åˆ¶åˆ°è¾…åŠ©æ•°ç»„ä¸­ä¸‹æ ‡ä¸ºmçš„ä½ç½®ï¼Œè¿™æ ·å¾ˆå®¹æ˜“çŸ¥é“å“ªä¸ªå…ƒç´ é‡å¤äº†ã€‚ public class Test02 &#123; public static int duplicate(int[] arr) &#123; int N = arr.length; int[] helpArr = new int[N]; for(int i = 0; i &lt; N; i++) &#123; if (arr[i] == helpArr[arr[i]]) &#123; return arr[i]; &#125; else &#123; helpArr[arr[i]] = arr[i]; &#125; &#125; return -1; &#125; public static void main(String[] args) &#123; int[] arr = &#123;2, 3, 5, 4, 3, 2, 6, 7&#125;; int num = duplicate(arr); System.out.println(num); // 3 &#125;&#125; å¦ä¸€ç§æ€è·¯æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œé¦–å…ˆæˆ‘ä»¬å°†æ•°å­—åˆ†æˆä¸¤åŠï¼Œæ¯”å¦‚ 1~m å’Œ m+1~nï¼Œæ¥ç€æˆ‘ä»¬åœ¨æ•°ç»„ä¸­ç»Ÿè®¡æ•°å­—åœ¨ 1~m åŒºé—´ä¸­çš„ä¸ªæ•°ï¼Œå¦‚æœæ•°é‡å¤§äº m ï¼Œé‚£ä¹ˆå°±è¯´æ˜åœ¨ 1~m ä¸­æœ‰é‡å¤çš„æ•°å­—ï¼Œå¦åˆ™åœ¨ m+1~n ä¸­æœ‰é‡å¤çš„æ•°å­—ï¼Œå‡è®¾åœ¨ 1~m ä¸­æœ‰é‡å¤çš„æ•°å­—ï¼Œé‚£ä¹ˆç»§ç»­åˆ†æˆä¸¤åŠï¼Œå¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°ä¸¤è¾¹åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä»£ç å¦‚ä¸‹ public class Test03 &#123; public static int duplicate(int[] arr) &#123; int start = 1; int end = arr.length - 1; while (end &gt;= start) &#123; int middle = start + (end - start) / 2; // è·å¾—æ•°å­—èŒƒå›´åœ¨[start, middle]èŒƒå›´å†…çš„æ•°ç›® int countNum = count(arr, start, middle); if (start == end) &#123; if(countNum &gt; 1) &#123; return start; &#125; else &#123; // å¦‚æœèŒƒå›´åªå‰©æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æ•°ç›®ä¸å¤§äº1ï¼Œè¯´æ˜æ²¡æœ‰é‡å¤çš„ break; &#125; &#125; if (countNum &gt; (middle - start + 1)) &#123; // åœ¨[start, middle]ä¸­ç»§ç»­æ‰¾ end = middle; &#125; else &#123; // åœ¨[middle + 1, end]ä¸­ç»§ç»­æ‰¾ start = middle + 1; &#125; &#125; return -1; &#125; // ç»Ÿè®¡æ•°ç»„ä¸­æ•°å­—èŒƒå›´åœ¨[start, end]èŒƒå›´å†…çš„æ•°ç›® private static int count(int[] arr, int start, int end) &#123; int count = 0; for(int i = 0; i &lt; arr.length; i++) &#123; if (start &lt;= arr[i] &amp;&amp; arr[i] &lt;= end) &#123; count++; &#125; &#125; return count; &#125; public static void main(String[] args) &#123; int[] arr = &#123;2, 3, 5, 4, 3, 2, 6, 7&#125;; int num = duplicate(arr); System.out.println(num); // 3 &#125;&#125;","tags":[{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%89%91%E6%8C%87offer/"}]},{"title":"å•ä¾‹æ¨¡å¼","date":"2020-04-02T16:00:00.000Z","path":"/å•ä¾‹æ¨¡å¼/","text":"é¢˜ç›®ï¼šè®¾è®¡ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬åªèƒ½ç”Ÿæˆè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ å¦‚æœåªèƒ½ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œè¿™æ„å‘³ç€æ„é€ æ–¹æ³•å¿…é¡»ä¸ºç§æœ‰çš„ï¼Œè¯¥ç±»å®ä¾‹çš„åˆ›å»ºä¸èƒ½ç”±ç”¨æˆ·åˆ›å»ºï¼Œä¸€ä¸ªå®¹æ˜“æƒ³åˆ°çš„ç‰ˆæœ¬å¦‚ä¸‹ public class Test01 &#123; private Test01() &#123; &#125; private static Test01 instance; public static Test01 getInstance() &#123; if (instance == null) &#123; instance = new Test01(); &#125; return instance; &#125; public static void main(String[] args) &#123; Test01 one = Test01.getInstance(); Test01 two = Test01.getInstance(); System.out.println(one == two); // true &#125;&#125; æˆ‘ä»¬åœ¨ç±»é‡Œé¢å£°æ˜äº†ä¸€ä¸ªinstanceå˜é‡ï¼Œå®ƒæ˜¯è¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œç”¨æˆ·é€šè¿‡getInstance()æ¥è·å¾—è¯¥ç±»çš„å®ä¾‹ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œé¦–å…ˆåˆ¤æ–­instanceæ˜¯ä¸æ˜¯ä¸ºnullï¼Œå¦‚æœæ˜¯nullè¯´æ˜è¿˜æ²¡æœ‰åˆ›å»ºè¿‡è¯¥å®ä¾‹ï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå¦‚æœä¸ä¸ºnullï¼Œè¯´æ˜å·²ç»åˆ›å»ºè¿‡è¯¥å®ä¾‹ï¼Œå°†ä¹‹å‰åˆ›å»ºè¿‡çš„å®ä¾‹è¿”å›ï¼Œä»è€Œè¾¾åˆ°åˆ›å»ºçš„å§‹ç»ˆæ˜¯ä¸€ä¸ªå®ä¾‹çš„æ•ˆæœã€‚ ä½†æ˜¯ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹å¯èƒ½åˆ›å»ºå‡ºå¤šä¸ªå®ä¾‹ï¼Œè€ƒè™‘è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œif (instance == null)æ—¶ï¼Œè¿™æ—¶æ˜¯æˆåŠŸçš„ï¼Œä¼šè¿›å…¥åˆ°ifè¯­å¥ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™å®ƒå¤±å»äº†æ‰§è¡Œæƒï¼Œè¿™ä¸ªæ—¶å€™ç¬¬äºŒä¸ªçº¿ç¨‹æ‰§è¡Œif (instance == null)æ—¶ï¼Œç”±äºinstanceè¿˜æ²¡æœ‰èµ‹å€¼ï¼Œå®ƒçš„å€¼è¿˜ä¸ºnullï¼Œå®ƒä¹Ÿèƒ½å¤Ÿè¿›å…¥åˆ°ifè¯­å¥ä¸­ï¼Œè¿™ä¸ªæ—¶å€™ç¬¬ä¸€ä¸ªçº¿ç¨‹å’Œç¬¬äºŒä¸ªçº¿ç¨‹éƒ½ä¼šä½¿ç”¨newå…³é”®å­—åˆ›å»ºå‡ºä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä»¬æ˜¯ä¸åŒçš„ã€‚ ç®€å•çš„è§£å†³ä¸Šé¢çš„é—®é¢˜å°±æ˜¯åŠ é”ï¼Œä¸Šé¢ä¼šå‡ºç°é—®é¢˜çš„è¯­å¥ä¸º if (instance == null) &#123; instance = new Test01();&#125; æ‰€ä»¥æˆ‘ä»¬ä¸ºè¿™ä¸ªè¯­å¥å—åŠ ä¸Šé”å°±è¡Œï¼Œè¿™å°±å‡ºç°äº†ç¬¬äºŒä¸ªç‰ˆæœ¬ public class Test02 &#123; private static Test02 instance; private Test02() &#123; &#125; private static Test02 getInstance() &#123; synchronized(Test02.class) &#123; if (instance == null) &#123; instance = new Test02(); &#125; &#125; return instance; &#125; public static void main(String[] args) &#123; Test02 one = Test02.getInstance(); Test02 two = Test02.getInstance(); System.out.println(one == two); // true &#125;&#125; ä½†æ˜¯è¿™ä¸ªæ–¹æ³•è¿˜æœ‰ä¸€ä¸ªå°çš„ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯æ¯æ¬¡æˆ‘ä»¬è·å–å®ä¾‹çš„æ—¶å€™ï¼Œéƒ½éœ€è¦åŠ é”ï¼Œè¿™æ„å‘³ç€æ€§èƒ½çš„æŸå¤±ï¼Œå½“instanceä¸ä¸ºnullçš„æ—¶å€™ï¼Œå·²ç»ä¸ä¼šç”±äºå¤šçº¿ç¨‹è€Œäº§ç”Ÿé—®é¢˜äº†ï¼Œä¹Ÿå°±ä¸ç”¨åŠ é”äº†ï¼Œæ‰€ä»¥å†æ¬¡ä¿®æ”¹getInstance()ï¼Œäº§ç”Ÿäº†ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ public class Test03 &#123; private static Test03 instance; private Test03() &#123; &#125; private static Test03 getInstance() &#123; if (instance == null) &#123; synchronized(Test03.class) &#123; if (instance == null) &#123; instance = new Test03(); &#125; &#125; &#125; return instance; &#125; public static void main(String[] args) &#123; Test03 one = Test03.getInstance(); Test03 two = Test03.getInstance(); System.out.println(one == two); // true &#125;&#125; åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œåªæœ‰åœ¨instanceä¸ºnullçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰åŠ é”ã€‚ ä¸Šé¢çš„æ–¹æ³•å·²ç»æ¯”è¾ƒå¥½äº†ï¼Œè¿™é‡Œå†æ¬¡æ¨èæ›´å¥½çš„åŠæ³•ï¼Œæˆ‘ä»¬åœ¨instanceå£°æ˜çš„æ—¶å€™å°±ä¸ºå®ƒèµ‹å€¼ public class Test04 &#123; // åœ¨å£°æ˜çš„æ—¶å€™å°±èµ‹å€¼ private static Test04 instance = new Test04(); private Test04() &#123; &#125; public static Test04 getInstance() &#123; return instance; &#125; public static void main(String[] args) &#123; Test04 one = Test04.getInstance(); Test04 two = Test04.getInstance(); System.out.println(one == two); // true &#125;&#125; ä½†æ˜¯ç”±äºinstanceæ˜¯é™æ€å˜é‡ï¼Œé™æ€å˜é‡åœ¨ç±»è¢«ä¸»åŠ¨ä½¿ç”¨æ—¶å°±ä¼šè¢«åˆå§‹åŒ–ï¼Œè€Œä¸æ˜¯ç­‰æˆ‘ä»¬éœ€è¦åˆ›å»ºç±»çš„å®ä¾‹æ—¶æ‰è¢«åˆå§‹åŒ–ï¼Œç®€å•çš„è¯´å°±æ˜¯åˆ›å»ºçš„æ—¶æœºè¿‡æ—©ï¼Œä»è€Œé™ä½å†…å­˜çš„ä½¿ç”¨æ•ˆç‡ï¼Œæˆ‘ä»¬ä½¿ç”¨é™æ€å†…éƒ¨ç±»æ¥è§£å†³æŒ‰éœ€åŠ è½½çš„é—®é¢˜ public class Test05 &#123; private Test05() &#123; &#125; private static final class InnerTest &#123; private static Test05 instance = new Test05(); &#125; public static Test05 getInstance() &#123; return InnerTest.instance; &#125; public static void main(String[] args) &#123; Test05 one = Test05.getInstance(); Test05 two = Test05.getInstance(); System.out.println(one == two); //true &#125;&#125; è¿™ä¸ªæ—¶å€™ï¼Œåªæœ‰æˆ‘ä»¬éœ€è¦ç”¨åˆ°ç±»çš„å®ä¾‹æ—¶ï¼Œæ‰ä¼šåˆå§‹åŒ–instanceã€‚ åœ¨ä¸Šé¢5ç§å®ç°å•ä¾‹æ¨¡å¼çš„æ–¹æ³•ä¸­ï¼š ç¬¬ä¸€ç§æ–¹æ³•åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ä¸èƒ½å·¥ä½œ ç¬¬äºŒç§æ¨¡å¼è™½ç„¶èƒ½å¤Ÿåœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹å·¥ä½œï¼Œä½†æ˜¯æ•ˆç‡å¾ˆä½ ç¬¬ä¸‰ç§æ–¹æ³•é€šè¿‡ä¸¤æ¬¡åˆ¤æ–­ç¡®ä¿èƒ½å¤Ÿåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹é«˜æ•ˆçš„å·¥ä½œ ç¬¬å››ç§æ–¹æ³•åœ¨å£°æ˜æ—¶å°±åˆå§‹åŒ–ï¼Œä¸”åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œç¡®ä¿åªåˆ›å»ºä¸€ä¸ªå®ä¾‹ ç¬¬äº”ç§æ–¹æ³•åˆ©ç”¨å†…éƒ¨ç±»ï¼Œåšåˆ°åªè¦åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰ä¼šåˆ›å»ºå®ä¾‹ï¼Œæé«˜ç©ºé—´ä½¿ç”¨æ•ˆç‡","tags":[{"name":"å•ä¾‹æ¨¡å¼","slug":"å•ä¾‹æ¨¡å¼","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"JavaScriptä¸­çš„å†’æ³¡ä¸æ•è·","date":"2020-03-16T16:00:00.000Z","path":"/JavaScriptä¸­çš„å†’æ³¡ä¸æ•è·/","text":"JavaScriptä¸­çš„å†’æ³¡ä¸æ•è·é¦–å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­æ¥æ˜ç™½ä»€ä¹ˆæ˜¯å†’æ³¡å’Œæ•è·ï¼Œæ¥çœ‹ä¸‹é¢çš„ä¸€ä¸ªhtmlç»“æ„ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; .outer &#123; width: 200px; height: 200px; background-color: black; margin: 100px auto; &#125; .inner &#123; width: 100px; height: 100px; background-color: greenyellow; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"outer\"&gt; &lt;div class=\"inner\"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å°±æ˜¯ä¸€ä¸ªå¤§ç›’å­é‡Œé¢å¥—ç€ä¸€ä¸ªå°ç›’å­ï¼Œä¸ºä¸¤ä¸ªç›’å­è®¾ç½®äº†èƒŒæ™¯é¢œè‰²ä»¥ä½œåŒºåˆ†ï¼Œå¦‚ä¸‹ ç°åœ¨ä¸ºäºŒè€…éƒ½æ·»åŠ ä¸€ä¸ªç‚¹å‡»æ–¹æ³• &lt;script&gt; let outer = document.querySelector('.outer'); let inner = document.querySelector('.inner'); outer.addEventListener('click', (e) =&gt; &#123; console.log('outerè¢«ç‚¹å‡»äº†'); &#125;); inner.addEventListener('click', (e) =&gt; &#123; console.log('innerè¢«ç‚¹å‡»äº†'); &#125;);&lt;/script&gt; ç°åœ¨å¦‚æœç‚¹å‡»é‡Œé¢çš„ç›’å­innerï¼Œé‚£ä¹ˆouterçš„ç‚¹å‡»äº‹ä»¶ä¼šä¸ä¼šè§¦å‘ï¼Œå› ä¸ºæŒ‰é“ç†ä¹Ÿç®—æ˜¯ç‚¹å‡»äº†outerçš„åŒºåŸŸï¼Œæ‰€ä»¥outerçš„ç‚¹å‡»äº‹ä»¶åº”è¯¥è¢«è§¦å‘ã€‚ç°åœ¨é—®é¢˜åˆæ¥äº†ï¼Œæ˜¯å…ˆè§¦å‘innerè¿˜æ˜¯å…ˆè§¦å‘outerçš„ç‚¹å‡»äº‹ä»¶å‘¢? æŒ‰ç…§äºŒè€…è§¦å‘é¡ºåºçš„ä¸åŒåˆ†ä¸ºæ•è·å’Œå†’æ³¡ã€‚ ç°åœ¨ç‚¹å‡»ç»¿è‰²çš„å°ç›’å­ï¼Œçœ‹çœ‹è¾“å‡ºæ˜¯ä»€ä¹ˆ å½“æˆ‘ä»¬ç‚¹å‡»é‡Œé¢çš„ç›’å­å³ inner æ—¶ï¼Œè§¦å‘äº†å®ƒçš„ç‚¹å‡»äº‹ä»¶ï¼Œéšåè§¦å‘äº† outer çš„ç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ ·è§¦å‘å­å…ƒç´ äº‹ä»¶ä¹‹åè§¦å‘çˆ¶å…ƒç´ äº‹ä»¶çš„è¡Œä¸ºå°±å«åšå†’æ³¡ï¼›æ•è·å°±æ˜¯éšä¹‹ç›¸åäº†ï¼Œå…ˆå¤„ç† outerï¼Œç„¶åå¤„ç† inner çš„äº‹ä»¶ã€‚ è¦å®ç°æ•è·çš„æ•ˆæœï¼Œé¦–å…ˆæˆ‘ä»¬ä¸º addEventListener æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸º trueï¼Œå¦‚ä¸‹ outer.addEventListener('click', (e) =&gt; &#123; console.log('outerè¢«ç‚¹å‡»äº†');&#125;, true);inner.addEventListener('click', (e) =&gt; &#123; console.log('innerè¢«ç‚¹å‡»äº†');&#125;, true); è¿™æ—¶æˆ‘ä»¬åœ¨ç‚¹å‡»é‡Œé¢çš„ç›’å­ è¿™æ—¶æ˜¯outerçš„ç‚¹å‡»äº‹ä»¶å…ˆè¢«æ‰§è¡Œï¼Œç„¶åæ˜¯innerçš„ç‚¹å‡»äº‹ä»¶è¢«æ‰§è¡Œã€‚ å†’æ³¡å’Œæ•è·çš„å‡ºç°æ˜¯å› ä¸ºä»¥å‰çš„ä¸¤å¤§æµè§ˆå™¨å‚å•† Netscape å’Œ Microsoft å¯¹äº‹ä»¶æ¨¡å‹å¤„ç†æ–¹æ³•ï¼ŒMicrosoft é‡‡å–çš„ä»ç›®æ ‡å…ƒç´ (æ¯”å¦‚ç‚¹å‡» innerï¼Œinner å°±æ˜¯ç›®æ ‡å…ƒç´ )å¼€å§‹ï¼ŒæŒ‰ DOM æ ‘å‘ä¸Šå†’æ³¡ï¼›è€Œ Netscape é‡‡å–çš„æ˜¯ç›¸åçš„åŸåˆ™ï¼Œå³ä»é¡¶éƒ¨å…ƒç´ å¼€å§‹ï¼Œç›´åˆ°äº‹ä»¶ç›®æ ‡å…ƒç´ ã€‚é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥çŸ¥é“ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® addEventListener æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥è®¾ç½®æ˜¯å†’æ³¡è¿˜æ˜¯æ•è·ï¼Œå½“è®¾ç½®ä¸º true æ—¶ï¼Œæ˜¯æ•è·ï¼Œå½“è®¾ç½®ä¸º false æ—¶ï¼Œæ˜¯å†’æ³¡ï¼Œé»˜è®¤æ˜¯ falseã€‚ ç°åœ¨è€ƒè™‘ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„ DOM ç»“æ„ï¼Œå¦‚ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; .one &#123; width: 200px; height: 200px; background-color: black; margin: 100px auto; &#125; .two &#123; width: 150px; height: 150px; background-color: aliceblue; &#125; .three &#123; width: 100px; height: 100px; background-color: greenyellow; &#125; .four &#123; width: 50px; height: 50px; background-color: blueviolet; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"one\"&gt; &lt;div class=\"two\"&gt; &lt;div class=\"three\"&gt; &lt;div class=\"four\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;script&gt; let one = document.querySelector('.one'); let two = document.querySelector('.two'); let three = document.querySelector('.three'); let four = document.querySelector('.four'); one.addEventListener('click', (e) =&gt; &#123; console.log('oneè¢«ç‚¹å‡»äº†'); &#125;, true); two.addEventListener('click', (e) =&gt; &#123; console.log('twoè¢«ç‚¹å‡»äº†'); &#125;, false); three.addEventListener('click', (e) =&gt; &#123; console.log('threeè¢«ç‚¹å‡»äº†'); &#125;, true); four.addEventListener('click', (e) =&gt; &#123; console.log('fourè¢«ç‚¹å‡»äº†'); &#125;, false); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¸Šé¢å››ä¸ªç›’å­å¥—åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬ä¸ºoneå’Œthreeè®¾å®šä¸ºæ•è·æ¨¡å¼ï¼Œä¸ºtwoå’Œfourè®¾å®šä¸ºå†’æ³¡æ¨¡å¼ï¼Œå¦‚æœæˆ‘ä»¬ç‚¹å‡»fourï¼Œè¿™æ—¶çš„è¾“å‡ºä¼šæ˜¯ä»€ä¹ˆå‘¢? æˆ‘ä»¬è§‚å¯Ÿåˆ°è¾“å‡ºçš„é¡ºåºä¸ºone -&gt; three -&gt; four -&gt; twoï¼Œä»£ç æ˜¯æ€ä¹ˆæ‰§è¡Œçš„å‘¢? é¦–å…ˆäº‹ä»¶å¤„ç†å™¨ä¼šä»é¡¶éƒ¨å¼€å§‹å³ one(ä¸¥æ ¼çš„è¯´æ˜¯ä» window)ï¼Œä¸€ç›´åˆ°ç›®æ ‡å…ƒç´ ï¼Œåœ¨è¿™ä¸ªè·¯å¾„ä¸­ï¼Œå¦‚æœé‡åˆ°è®¾ç½®ä¸ºæ•è·æ¨¡å¼çš„åˆ™æ‰§è¡Œï¼Œç¢°åˆ°å†’æ³¡æ¨¡å¼çš„åˆ™è·³è¿‡ï¼Œè¾¾åˆ°ç›®æ ‡å…ƒç´ åï¼Œå¼€å§‹è½¬æ¢ä¸ºå†’æ³¡æ¨¡å¼ï¼Œå‘ä¸Šå†’æ³¡åˆ°oneï¼Œåœ¨è¿™ä¸ªè·¯å¾„ä¸­ï¼Œå¦‚æœç¢°åˆ°è®¾ç½®ä¸ºå†’æ³¡æ¨¡å¼çš„åˆ™æ‰§è¡Œï¼Œå¦åˆ™è·³è¿‡ã€‚ ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ä¸Šé¢çš„æ‰§è¡Œæµç¨‹ï¼š é¦–å…ˆä»oneå¼€å§‹å‘ä¸‹æ•è·ï¼Œoneè®¾ç½®ä¸ºæ•è·æ¨¡å¼ï¼Œæ‰§è¡Œ é‡åˆ°twoï¼Œtwoè®¾ç½®ä¸ºå†’æ³¡æ¨¡å¼ï¼Œä¸æ‰§è¡Œè·³è¿‡ é‡åˆ°threeï¼Œthreeè®¾ç½®ä¸ºæ•è·æ¨¡å¼ï¼Œæ‰§è¡Œ é‡åˆ°fourï¼Œåˆ°è¾¾ç›®æ ‡å…ƒç´ ï¼Œæ‰§è¡Œ(æ­¤æ—¶ä¸ç®¡fouræ˜¯å†’æ³¡è¿˜æ˜¯æ•è·éƒ½æ²¡æœ‰å…³ç³»ï¼Œéƒ½ä¼šæ‰§è¡Œçš„) æ¥ç€è½¬å˜ä¸ºå†’æ³¡æ¨¡å¼ï¼Œé‡åˆ°threeï¼Œthreeä¸ºæ•è·æ¨¡å¼ï¼Œè·³è¿‡ é‡åˆ°twoï¼Œtwoä¸ºå†’æ³¡æ¨¡å¼ï¼Œæ‰§è¡Œ é‡åˆ°oneï¼Œoneä¸ºæ•è·æ¨¡å¼ï¼Œä¸æ‰§è¡Œï¼Œæ­¤æ—¶å·²ç»åˆ°è¾¾é¡¶éƒ¨ï¼Œç»“æŸ é€šè¿‡ä¸Šé¢çš„æµç¨‹ï¼Œä¸éš¾çŸ¥é“è¾“å‡ºçš„é¡ºåºä¸ºä»€ä¹ˆæ˜¯one -&gt; three -&gt; four -&gt; twoã€‚ åœ¨çˆ¶å…ƒç´ ä¸Šä»£ç†äº‹ä»¶æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè¿ç”¨å†’æ³¡çš„å°ä¾‹å­ï¼Œå‡è®¾æœ‰è¿™ä¸ªä¸€ä¸ªDOMç»“æ„ &lt;ul&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt; &lt;li&gt;å…ƒç´ &lt;/li&gt;&lt;/ul&gt; æˆ‘ä»¬å¸Œæœ›å½“ç‚¹å‡» li æ ‡ç­¾æ—¶ï¼Œå°† li æ ‡ç­¾é‡Œé¢çš„æ–‡å­—å˜ä¸ºçº¢è‰²ï¼Œæ‰€ä»¥å¾ˆæœ‰å¯èƒ½ä½ ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç  document.querySelectorAll(\"ul li\").forEach(item =&gt; &#123; item.addEventListener('click', (e) =&gt; &#123; e.target.style.color = 'red'; &#125;)&#125;) è¿™æ ·å†™å½“ç„¶èƒ½è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯å¦‚æœ ul ä¸‹é¢æœ‰æˆåƒä¸Šä¸‡ä¸ª liï¼Œè¿™æ ·å†™æœªå…æ€§èƒ½å¤ªä½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å†’æ³¡çš„ç‰¹æ€§ï¼Œä¸º ul ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œå¦‚ä¸‹ document.querySelector('ul').addEventListener('click', (e) =&gt; &#123; e.target.style.color = 'red';&#125;); è¿™æ ·ä¸ç®¡ ul ä¸‹é¢æœ‰å¤šå°‘ä¸ª li éƒ½æ²¡æœ‰å…³ç³»ã€‚ è§£é‡Šï¼š è¿™é‡Œå¯èƒ½æœ‰äººä¸å¤ªæ‡‚ e.target æ˜¯ä»€ä¹ˆï¼Œe.target æ˜¯æŒ‡è§¦å‘ç‚¹å‡»äº‹ä»¶çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ ulï¼Œå› ä¸ºæˆ‘ä»¬ç‚¹å‡»çš„æ˜¯ li æ ‡ç­¾ï¼Œæ‰€ä»¥è¿™é‡Œçš„ e.target æ˜¯è¢«ç‚¹å‡»çš„ li å…ƒç´ ã€‚å¦‚æœæƒ³åœ¨ addEventListener é‡Œé¢è®¿é—® ul å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨ thisã€‚ é˜»æ­¢äº‹ä»¶å†’æ³¡æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¸å¸Œæœ›äº‹ä»¶æœ‰å†’æ³¡æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ event å¯¹è±¡çš„ stopPropagation æ–¹æ³•æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œä»¥æ–‡ç« å¼€å¤´çš„ inner å’Œ outer ä¸ºä¾‹(outer å’Œ inner éƒ½è®¾ç½®ä¸ºå†’æ³¡æ¨¡å¼)ï¼Œæˆ‘ä»¬ç»™ inner çš„ addEventListener ä¿®æ”¹ä¸º inner.addEventListener('click', (e) =&gt; &#123; e.stopPropagation(); console.log('innerè¢«ç‚¹å‡»äº†');&#125;); è¿™æ—¶æˆ‘ä»¬ç‚¹å‡»innerï¼Œè¿™æ—¶åªæœ‰innerçš„ç‚¹å‡»äº‹ä»¶è¢«æ‰§è¡Œäº†","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JavaScript/"},{"name":"å†’æ³¡ä¸æ•è·","slug":"å†’æ³¡ä¸æ•è·","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%86%92%E6%B3%A1%E4%B8%8E%E6%8D%95%E8%8E%B7/"}]},{"title":"SSMæ•´åˆ","date":"2020-03-01T16:00:00.000Z","path":"/SSMæ•´åˆ/","text":"åœ¨å­¦ä¹ å®ŒSpring, SpringMVC, MyBatisä¸‰å¤§æ¡†æ¶åï¼Œç°åœ¨å°†è®°å½•å¦‚ä½•æ•´åˆè¿™ä¸‰ä¸ªæ¡†æ¶ã€‚ å‡†å¤‡å·¥ä½œé¦–å…ˆæ–°å»ºä¸€ä¸ªMavenå·¥ç¨‹ï¼Œåœ¨pom.xmlä¸­å¯¼å…¥ä»¥ä¸‹åŒ… &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.4.5&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt; &lt;version&gt;2.0.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.mchange&lt;/groupId&gt; &lt;artifactId&gt;c3p0&lt;/artifactId&gt; &lt;version&gt;0.9.5.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;&lt;/dependency&gt; æ¥ç€åˆ›å»ºä¸€ä¸ªUserè¡¨ use mybatis;drop table if exists user;create table user(username varchar(20), age int, sex varchar(10)) character set utf8;insert into user values(\"å¼ ä¸‰\", 18, \"male\");insert into user values(\"æå››\", 19, \"male\"); æ­¤æ—¶çš„userè¡¨ä¸º +----------+------+------+| username | age | sex |+----------+------+------+| å¼ ä¸‰ | 18 | male || æå›› | 19 | male |+----------+------+------+ Springæ•´åˆDaoå±‚é¦–å…ˆåœ¨åŒ…com.pojoä¸‹æ–°å»ºå®ä½“ç±»Userå¦‚ä¸‹ package com.pojo;public class User &#123; private String userName; private Integer age; private String sex; public String getUserName() &#123; return userName; &#125; public void setUserName(String userName) &#123; this.userName = userName; &#125; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; public String getSex() &#123; return sex; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125; @Override public String toString() &#123; return \"User&#123;\" + \"userName='\" + userName + '\\'' + \", age=\" + age + \", sex='\" + sex + '\\'' + '&#125;'; &#125;&#125; æ¥ä¸‹æ¥åœ¨com.daoåŒ…ä¸‹æ–°å»ºUserDaoæ¥å£ï¼Œå¦‚ä¸‹ package com.dao;import com.pojo.User;import org.apache.ibatis.annotations.Select;import java.util.List;public interface UserDao &#123; @Select(\"select * from user\") List&lt;User&gt; findAll();&#125; æ¥ä¸‹æ¥åœ¨resourcesç›®å½•ä¸‹æ–°å»ºMyBatisçš„é…ç½®æ–‡ä»¶mybatis-config.xml &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt; &lt;typeAliases&gt; &lt;package name=\"com.pojo\"/&gt; &lt;/typeAliases&gt;&lt;/configuration&gt; åªæ˜¯åœ¨å…¶ä¸­é…ç½®äº†åˆ«åï¼Œæ•°æ®æºçš„é…ç½®ä¼šåœ¨Springé…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œç°åœ¨åœ¨resourcesä¸‹æ–°å»ºdatabase.propertiesæ–‡ä»¶ï¼Œå¦‚ä¸‹ jdbc.driver=com.mysql.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEncoding=utf8jdbc.username=rootjdbc.password=root æœ€åæ–°å»ºspring-dao.xmlæ–‡ä»¶ï¼Œè¿™æ˜¯Springæ•´åˆMyBatisçš„é…ç½®æ–‡ä»¶ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;!-- è¯»å–æ•°æ®åº“ä¿¡æ¯ --&gt; &lt;context:property-placeholder location=\"classpath:database.properties\"/&gt; &lt;!-- é…ç½®è¿æ¥æ±  --&gt; &lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"&gt; &lt;property name=\"driverClass\" value=\"$&#123;jdbc.driver&#125;\"/&gt; &lt;property name=\"jdbcUrl\" value=\"$&#123;jdbc.url&#125;\"/&gt; &lt;property name=\"user\" value=\"$&#123;jdbc.username&#125;\"/&gt; &lt;property name=\"password\" value=\"$&#123;jdbc.password&#125;\"/&gt; &lt;/bean&gt; &lt;!-- sqlSessionFactory --&gt; &lt;bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt; &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt; &lt;property name=\"configLocation\" value=\"classpath:mybatis-config.xml\"/&gt; &lt;/bean&gt; &lt;!-- æ‰«æcom.daoä¸‹çš„åŒ… åŠ¨æ€ç”Ÿæˆå®ç°ç±»æ³¨å†Œåˆ°Springä¸­ --&gt; &lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt; &lt;property name=\"sqlSessionFactoryBeanName\" value=\"sqlSessionFactory\"/&gt; &lt;property name=\"basePackage\" value=\"com.dao\"/&gt; &lt;/bean&gt;&lt;/beans&gt; åœ¨resourcesä¸‹æ–°å»ºapplicationContext.xmlé…ç½®æ–‡ä»¶ï¼Œå°†spring-dao.xmlå¯¼å…¥ï¼Œè¯¥æ–‡ä»¶æ˜¯Springçš„ä¸»é…ç½®æ–‡ä»¶ï¼Œä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å¯¼å…¥é…ç½®æ–‡ä»¶ï¼Œå¦‚spring-dao.xml, spring-service.xmlä»¥åŠspring-mvc.xmlï¼Œå¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt; &lt;import resource=\"classpath:spring-dao.xml\"/&gt;&lt;/beans&gt; ç°åœ¨ä¾¿æ˜¯åœ¨test/javaä¸‹æ–°å»ºTestSpringDaoæµ‹è¯•ç±»ï¼Œæ¥éªŒè¯Springæ˜¯å¦æ•´åˆäº†MyBatisï¼Œå¦‚ä¸‹ import com.dao.UserDao;import com.pojo.User;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;import java.util.List;@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(locations = \"classpath:applicationContext.xml\")public class TestSpringDao &#123; @Autowired private UserDao userDao; @Test public void testFindAll() &#123; List&lt;User&gt; users = userDao.findAll(); for (User user: users) &#123; System.out.println(user); &#125; &#125;&#125; è¾“å‡ºä¸º User&#123;userName='å¼ ä¸‰', age=18, sex='male'&#125;User&#123;userName='æå››', age=19, sex='male'&#125; å¯è§Springä»¥åŠæ•´åˆMyBatisæˆåŠŸäº†ã€‚ Springæ•´åˆServiceå±‚ç®€å•çš„æ¨¡æ‹Ÿä¸šåŠ¡å±‚ï¼Œåœ¨com.serviceä¸‹æ–°å»ºUserServiceæ¥å£å¦‚ä¸‹ package com.com.service;import com.pojo.User;import java.util.List;public interface UserService &#123; List&lt;User&gt; findAll();&#125; æ¥ç€å»ºç«‹å®ƒçš„å®ç°ç±»UserServiceImplï¼Œå¦‚ä¸‹ package com.com.service;import com.dao.UserDao;import com.pojo.User;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;@Servicepublic class UserServiceImpl implements UserService &#123; @Autowired private UserDao userDao; public List&lt;User&gt; findAll() &#123; return userDao.findAll(); &#125;&#125; æ¥ç€æ–°å»ºspring-service.xmlï¼Œå¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;context:component-scan base-package=\"com.service\"/&gt;&lt;/beans&gt; åœ¨applicationContext.xmlä¸­å¯¼å…¥è¯¥é…ç½®æ–‡ä»¶ &lt;import resource=\"classpath:spring-service.xml\"/&gt; æ¥ç€æ–°å»ºTestSpringServiceæµ‹è¯•ç±» import com.pojo.User;import com.service.UserService;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;import java.util.List;@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(locations = \"classpath:applicationContext.xml\")public class TestSpringService &#123; @Autowired private UserService userService; @Test public void testUserService() &#123; List&lt;User&gt; users = userService.findAll(); for (User user: users) &#123; System.out.println(user); &#125; &#125;&#125; è¾“å‡ºä¸º User&#123;userName='å¼ ä¸‰', age=18, sex='male'&#125;User&#123;userName='æå››', age=19, sex='male'&#125; Spring Serviceå±‚æ•´åˆæˆåŠŸã€‚ Springæ•´åˆControllerå±‚é¦–å…ˆç‚¹å‡»é¡¹ç›®ï¼Œå³é”®é€‰æ‹©Add Framework Supportâ€¦ï¼Œå¹¶é€‰æ‹©Web Application è¿™æ—¶çš„é¡¹ç›®å°±æˆä¸ºäº†ä¸€ä¸ªWebé¡¹ç›®ï¼Œæˆ‘ä»¬åœ¨web.xmlä¸­é…ç½®å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd\" version=\"4.0\"&gt; &lt;servlet&gt; &lt;servlet-name&gt;dispatch&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;dispatch&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;filter&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;encodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt; åœ¨resourcesä¸‹æ–°å»ºspring-mvc.xmlï¼Œå†…å®¹å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt; &lt;mvc:annotation-driven/&gt; &lt;mvc:default-servlet-handler/&gt; &lt;context:component-scan base-package=\"com.controller\"/&gt; &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt; &lt;property name=\"prefix\" value=\"/WEB-INF/jsp/\"/&gt; &lt;property name=\"suffix\" value=\".jsp\"/&gt; &lt;/bean&gt;&lt;/beans&gt; å¹¶ä¸”åœ¨applicationContext.xmlä¸­å¯¼å…¥è¯¥é…ç½®æ–‡ä»¶ &lt;import resource=\"classpath:spring-mvc.xml\"/&gt; åœ¨com.controlleråŒ…ä¸‹æ–°å»ºUserControllerç±»ï¼Œå¦‚ä¸‹ package com.controller;import com.pojo.User;import com.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.List;@RestControllerpublic class UserController &#123; @Autowired private UserService userService; @RequestMapping(value = \"/users\", produces = \"text/html;charset=utf-8\") public String getUsers() &#123; List&lt;User&gt; users = userService.findAll(); return users.toString(); &#125;&#125; æ¥ç€å¯åŠ¨Tomcat(åœ¨å¯åŠ¨Tomcatä¹‹å‰è®°å¾—æ·»åŠ ä¾èµ–çš„åŒ…)ï¼Œåœ¨åœ°å€æ åè¾“å…¥/users è‡³æ­¤ï¼ŒSSMæ•´åˆç»“æŸã€‚","tags":[{"name":"SSM Spring SpringMVC MyBatis","slug":"SSM-Spring-SpringMVC-MyBatis","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/SSM-Spring-SpringMVC-MyBatis/"}]},{"title":"Spring MVCç¬”è®°","date":"2020-02-29T16:00:00.000Z","path":"/Spring MVCç¬”è®°/","text":"æœ¬ç‰‡æ–‡ç« æ˜¯æˆ‘è®°å½•å­¦ä¹  Spring MVC çš„å­¦ä¹ ç¬”è®°ï¼Œä½œä¸ºåˆå­¦è€…ï¼Œå¯¹äºè¿™ä¸ªæ¡†æ¶çš„ç†è§£å¯èƒ½å¹¶ä¸æ·±åˆ»ï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« ä¸»è¦è®²è¿°çš„æ˜¯ Spring MVC æ¡†æ¶çš„ä½¿ç”¨ï¼Œæ‰€ä»¥å¯¹äºæœ‰äº›å†…å®¹ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œè¿™ä¹ˆåšæœ‰ä»€ä¹ˆå¥½å¤„ï¼Œç”±äºæ‰ç–å­¦æµ…ï¼Œå´ä¸æ˜¯æˆ‘èƒ½è§£é‡Šçš„ï¼Œæ‰€ä»¥æœ¬ç¯‡æ–‡ç« ä»¥ä»£ç åå¤šï¼Œæ–‡å­—è§£é‡Šåå°‘ã€‚ Hello Spring MVCå…ˆç®€å•çš„çš„æŠŠ Spring MVC ç”¨èµ·æ¥ï¼Œç„¶ååœ¨è§£é‡Šä¸€ä¸‹ Spring MVC çš„ç”¨æ³•ã€‚é¦–å…ˆåœ¨ pom.xml ä¸­å¯¼å…¥éœ€è¦çš„åŒ… &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.2.0.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;jstl&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; spring-webmvc å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„åŒ…ï¼Œè€Œ junit ä¸ç”¨è¯´ï¼Œæ˜¯ç”¨æ¥æµ‹è¯•ç”¨çš„ã€‚Java åº•å±‚å¯¹æµè§ˆå™¨åšå‡ºå“åº”æ˜¯åŸºäº Servletï¼Œæ‰€ä»¥ Spring MVC ä¹Ÿæ˜¯åŸºäº Servlet çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯¼å…¥äº† Servlet çš„åŒ…ï¼Œä»¥åŠå¯¹ JSP çš„æ”¯æŒå’Œ JSTL è¯­è¨€çš„æ”¯æŒçš„åŒ…ã€‚ ç”±äºæˆ‘ä»¬å»ºç«‹çš„åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ Maven å·¥ç¨‹ï¼Œæˆ‘ä»¬è¦å¯¹é¡¹ç›®æ·»åŠ æ”¯æŒï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ª Web é¡¹ç›®ï¼Œå•å‡»é¡¹ç›®å³é”®é€‰æ‹© Add Framework Support...ï¼Œå¦‚ä¸‹ æ¥ç€å‹¾é€‰ WebApplicationï¼Œç‚¹å‡» OK è¿™æ—¶ä¼šåœ¨ä½ çš„é¡¹ç›®ä¸­ä¸ºä½ ç”Ÿæˆä¸€ä¸ª web ç›®å½•ï¼Œå¦‚ä¸‹ è¿™æ—¶æˆ‘ä»¬é…ç½® web.xml å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd\" version=\"4.0\"&gt; &lt;servlet&gt; &lt;servlet-name&gt;dispatch&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc-config.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;dispatch&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;/web-app&gt; æˆ‘ä»¬çŸ¥é“ JavaWeb çš„å·¥ä½œæµç¨‹æ˜¯æ ¹æ®æµè§ˆå™¨çš„è¯·æ±‚åœ°å€å»æ‰¾å¯¹åº”çš„ Servlet å»åšå¤„ç†ï¼Œè¿™é‡Œæˆ‘ä»¬é…ç½®å¯¹æ‰€æœ‰çš„è¯·æ±‚(/)éƒ½ä¼šä½¿ç”¨ Spring æä¾›çš„ DispatchServlet è¿›è¡Œå¤„ç†ã€‚å…·ä½“çš„å¤„ç†æµç¨‹ç¨åä¼šä»‹ç»ï¼Œä»ä¸Šé¢çš„é…ç½®çœ‹å‡ºï¼ŒDispatchServlet è¿˜éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶åœ°å€çš„å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å†™ä¸ºäº† classpath:springmvc-config.xmlï¼Œè€Œè¿™ä¸ªæ–‡ä»¶è¿˜æ²¡æœ‰ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ src/main/resources ä¸­æ–°å»º springmvc-config.xmlï¼Œå†…å®¹å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt; &lt;mvc:annotation-driven/&gt; &lt;mvc:default-servlet-handler/&gt; &lt;context:component-scan base-package=\"com.controller\"/&gt; &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt; &lt;property name=\"prefix\" value=\"WEB-INF/jsp/\"/&gt; &lt;property name=\"suffix\" value=\".jsp\"/&gt; &lt;/bean&gt;&lt;/beans&gt; æˆ‘ä»¬åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­å¯¹ com.controller ä¸­çš„ç±»å¼€å¯äº† mvc æ³¨è§£æ”¯æŒã€‚è¿˜é…ç½®äº†ä¸€ä¸ª ServletHandler å’Œ ViewResolverï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿ä¸åé¢è®²çš„ Spring MVC æ‰§è¡Œæµç¨‹æœ‰å…³ï¼Œåé¢å†è¯´ã€‚ ç°åœ¨æ–°å»º com.controller.HandleRequest.javaï¼Œå†…å®¹å¦‚ä¸‹ package com.controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class HandleRequest &#123; @RequestMapping(\"/hello\") public String sayHello() &#123; return \"Hello Spring MVC\"; &#125;&#125; è¯¥ç±»çš„ä½œç”¨æ˜¯å½“æµè§ˆå™¨è®¿é—® /hello æ—¶ï¼Œä¼šè¿”å›æµè§ˆå™¨ä¸€ä¸ªå­—ç¬¦ä¸² &quot;Hello Spring MVC&quot;ï¼Œç°åœ¨ä½¿ç”¨ tomcat æœåŠ¡å™¨å¯åŠ¨è¯¥é¡¹ç›®ï¼Œå¹¶ä¸”åœ¨åœ°å€æ åè¾“å…¥ /helloï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯å¦‚ä¸‹ è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨é¡¹ç›®ä¸­åŠ å…¥æ‰€ä¾èµ–çš„åŒ…ï¼Œè¿™æ—¶æˆ‘ä»¬åœ¨ IDEA ä¸­çš„å·¦ä¸Šè§’æ‰¾åˆ° File å¹¶ç‚¹å‡»ï¼Œé€‰æ‹© Project Structureï¼Œæ¥ç€åœ¨ Project Structure ä¸­é€‰æ‹© Artifacts è¿™æ—¶é€‰æ‹©ä½ çš„é¡¹ç›®ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ mvc-helloï¼Œå³é”®é€‰æ‹© Put into Output Root æ¥ä¸‹æ¥é‡æ–°å¯åŠ¨ Tomcatï¼Œç„¶ååœ¨æµè§ˆå™¨åœ°å€æ åè¾“å…¥ /hello å°±å¯ä»¥çœ‹åˆ° Hello Spring MVC åœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºäº†å‡ºæ¥ã€‚ Spring MVCçš„æ‰§è¡Œæµç¨‹ ä¸Šå›¾æ¼”ç¤ºäº† Spring MVC æ‰§è¡Œçš„æµç¨‹ï¼Œåœ¨è¿™é‡Œç¨ä½œè§£é‡Š ç”¨æˆ·å‘é€è¯·æ±‚è‡³å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet DispatcherServlet æ”¶åˆ°è¯·æ±‚è°ƒç”¨å¤„ç†å™¨æ˜ å°„å™¨ HandlerMapping å¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚ url æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨æ‰§è¡Œé“¾ HandlerExecutionChain(åŒ…æ‹¬å¤„ç†å™¨å¯¹è±¡å’Œå¤„ç†å™¨æ‹¦æˆªå™¨)ä¸€å¹¶è¿”å›ç»™ DispatcherServletã€‚ DispatcherServlet æ ¹æ®å¤„ç†å™¨ Handler è·å–å¤„ç†å™¨é€‚é…å™¨ HandlerAdapterï¼Œæ‰§è¡Œ HandlerAdapter å¤„ç†ä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¦‚ï¼šå‚æ•°å°è£…ï¼Œæ•°æ®æ ¼å¼è½¬æ¢ï¼Œæ•°æ®éªŒè¯ç­‰æ“ä½œ æ‰§è¡Œå¤„ç†å™¨ Handler(Controllerï¼Œä¹Ÿå«é¡µé¢æ§åˆ¶å™¨) Handler æ‰§è¡Œå®Œæˆè¿”å› ModelAndView HandlerAdapter å°† Handler æ‰§è¡Œç»“æœ ModelAndView è¿”å›åˆ° DispatcherServlet DispatcherServlet å°† ModelAndView ä¼ ç»™ ViewReslover è§†å›¾è§£æå™¨ ViewReslover è§£æåè¿”å›å…·ä½“ View DispatcherServlet å¯¹ View è¿›è¡Œæ¸²æŸ“è§†å›¾(å³å°†æ¨¡å‹æ•°æ® model å¡«å……è‡³è§†å›¾ä¸­) DispatcherServlet å“åº”ç”¨æˆ· ç°åœ¨ç¨åŠ è§£é‡Šä¸Šé¢ç‰µæ¶‰åˆ°çš„ç»„ä»¶ï¼š DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨ï¼Œç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œå®ƒå°±ç›¸å½“äº MVC æ¨¡å¼ä¸­çš„ Cï¼ŒDispatcherServlet æ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ŒDispatcherServlet çš„å­˜åœ¨é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§,ç³»ç»Ÿæ‰©å±•æ€§æé«˜ HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨ï¼ŒHandlerMapping è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ url æ‰¾åˆ° Handler å³å¤„ç†å™¨ï¼ŒSpringMVC æä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œæ ¹æ®ä¸€å®šçš„è§„åˆ™å»æŸ¥æ‰¾,ä¾‹å¦‚ï¼šxml é…ç½®æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ Handlerï¼šå¤„ç†å™¨ï¼ŒHandler æ˜¯ç»§ DispatcherServlet å‰ç«¯æ§åˆ¶å™¨çš„åç«¯æ§åˆ¶å™¨ï¼Œåœ¨ DispatcherServlet çš„æ§åˆ¶ä¸‹ Handler å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚ç”±äº Handler æ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·ä¸šåŠ¡è¯·æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µéœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘ Handler HandlAdapterï¼šå¤„ç†å™¨é€‚é…å™¨,é€šè¿‡ HandlerAdapter å¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡æ‰©å±•é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œ ModelAndView æ˜¯ SpringMVC çš„å°è£…å¯¹è±¡ï¼Œå°† Model å’Œ View å°è£…åœ¨ä¸€èµ·ã€‚ ViewResolverï¼šè§†å›¾è§£æå™¨ï¼ŒViewResolver è´Ÿè´£å°†å¤„ç†ç»“æœç”Ÿæˆ View è§†å›¾ï¼ŒViewResolver é¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”Ÿæˆ View è§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹ View è¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚ Viewï¼šæ˜¯ SpringMVC çš„å°è£…å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªæ¥å£, SpringMVC æ¡†æ¶æä¾›äº†å¾ˆå¤šçš„ View è§†å›¾ç±»å‹ï¼ŒåŒ…æ‹¬ï¼šjspviewï¼Œpdfview,jstlViewã€freemarkerViewã€pdfView ç­‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦é€šè¿‡é¡µé¢æ ‡ç­¾æˆ–é¡µé¢æ¨¡ç‰ˆæŠ€æœ¯å°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ï¼Œéœ€è¦ç”±ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘å…·ä½“çš„é¡µé¢ã€‚ Spring MVCæ³¨è§£@Controller@Controller æ³¨è§£è¡¨æ˜äº†ä¸€ä¸ªç±»æ˜¯ä½œä¸ºæ§åˆ¶å™¨çš„è§’è‰²è€Œå­˜åœ¨çš„ã€‚Spring ä¸è¦æ±‚ä½ å»ç»§æ‰¿ä»»ä½•æ§åˆ¶å™¨åŸºç±»ï¼Œä¹Ÿä¸è¦æ±‚ä½ å»å®ç° Servlet çš„é‚£å¥— APIã€‚å½“ç„¶ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ä¹Ÿå¯ä»¥å»ä½¿ç”¨ä»»ä½•ä¸ Servlet ç›¸å…³çš„ç‰¹æ€§å’Œè®¾æ–½ã€‚ @Controller æ³¨è§£å¯ä»¥è®¤ä¸ºæ˜¯è¢«æ ‡æ³¨ç±»çš„åŸå‹(stereotype)ï¼Œè¡¨æ˜äº†è¿™ä¸ªç±»æ‰€æ‰¿æ‹…çš„è§’è‰²ã€‚åˆ†æ´¾å™¨(DispatcherServlet)ä¼šæ‰«ææ‰€æœ‰æ³¨è§£äº† @Controller çš„ç±»ï¼Œæ£€æµ‹å…¶ä¸­é€šè¿‡ @RequestMapping æ³¨è§£é…ç½®çš„æ–¹æ³•(è¯¦è§ä¸‹ä¸€å°èŠ‚)ã€‚ å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ @Controller æ³¨è§£è€Œæ˜¾å¼åœ°å»å®šä¹‰è¢«æ³¨è§£çš„ beanï¼Œè¿™ç‚¹é€šè¿‡æ ‡å‡†çš„ Spring bean çš„å®šä¹‰æ–¹å¼ï¼Œåœ¨ dispather çš„ä¸Šä¸‹æ–‡å±æ€§ä¸‹é…ç½®å³å¯åšåˆ°ã€‚ä½†æ˜¯ @Controller åŸå‹æ˜¯å¯ä»¥è¢«æ¡†æ¶è‡ªåŠ¨æ£€æµ‹çš„ï¼ŒSpring æ”¯æŒ classpath è·¯å¾„ä¸‹ç»„ä»¶ç±»çš„è‡ªåŠ¨æ£€æµ‹ï¼Œä»¥åŠå¯¹å·²å®šä¹‰ bean çš„è‡ªåŠ¨æ³¨å†Œã€‚ @RestControllerè¿™é‡Œè¯´çš„æ˜¯ä¸ @Controllerï¼Œè¢« @Controller æ³¨è§£çš„ç±»ï¼Œå¦‚æœåœ¨æ–¹æ³•ä¸­æ–¹æ³•å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šè¢«è§†å›¾è§£æå™¨è§£æï¼Œå³å¦‚ä¸‹ package com.controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;@Controllerpublic class HandleRequest &#123; @RequestMapping(\"/hello\") public String sayHello() &#123; return \"hello\"; &#125;&#125; å½“è®¿é—® /hello æ—¶ï¼Œä¼šæ‰§è¡Œ sayHello æ–¹æ³•ï¼Œè¿™æ—¶è¿”å›çš„ hello ä¼šè¢«è§†å›¾è§£æå™¨è§£æï¼Œè§†å›¾è§£æå™¨ä¼šæ ¹æ®åœ¨ springmvc-config.xml ä¸­çš„é…ç½®è¿›è¡Œæ‹¼æ¥ &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt; &lt;property name=\"prefix\" value=\"WEB-INF/jsp/\"/&gt; &lt;property name=\"suffix\" value=\".jsp\"/&gt;&lt;/bean&gt; æ‰€ä»¥ä¸Šé¢æ–¹æ³•çš„ hello ä¼šè¢«æ‹¼æ¥æˆ WEB-INF/jsp/hello.jspï¼Œæ¥ç€ä¼šè¿”å›è¯¥ jsp é¡µé¢ã€‚ è€Œä½¿ç”¨ @RestController æ³¨è§£ï¼Œåˆ™ä¸ä¼šç»è¿‡è§†å›¾è§£æå™¨ï¼Œè€Œæ˜¯ä¼šå°†è¯¥ç»“æœç›´æ¥è¿”å›ï¼Œå°±åƒåœ¨å‰ä¸€èŠ‚æ¼”ç¤ºçš„ä¾‹å­ä¸€æ ·ã€‚å› ä¸ºæœ€è¿‘æµè¡Œå‰åç«¯åˆ†ç¦»ï¼Œæ‰€ä»¥åç«¯ä¸éœ€è¦å†™é¡µé¢äº†ï¼Œåªéœ€è¦å°†å‰ç«¯è¯·æ±‚çš„æ•°æ®è¿”å›ï¼Œè€Œå‰ç«¯è´Ÿè´£æ¸²æŸ“å±•ç¤ºæ•°æ®ï¼Œæ‰€ä»¥ @RestController ç±»ç”¨çš„è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ã€‚ @RequestMappingä½ å¯ä»¥ä½¿ç”¨ @RequestMapping æ³¨è§£æ¥å°†è¯·æ±‚ URLï¼Œå¦‚ /appointments ç­‰ï¼Œæ˜ å°„åˆ°æ•´ä¸ªç±»ä¸Šæˆ–æŸä¸ªç‰¹å®šçš„å¤„ç†å™¨æ–¹æ³•ä¸Šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç±»çº§åˆ«çš„æ³¨è§£è´Ÿè´£å°†ä¸€ä¸ªç‰¹å®š(æˆ–ç¬¦åˆæŸç§æ¨¡å¼)çš„è¯·æ±‚è·¯å¾„æ˜ å°„åˆ°ä¸€ä¸ªæ§åˆ¶å™¨ä¸Šï¼ŒåŒæ—¶é€šè¿‡æ–¹æ³•çº§åˆ«çš„æ³¨è§£æ¥ç»†åŒ–æ˜ å°„ï¼Œå³æ ¹æ®ç‰¹å®šçš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆ&quot;GET&quot; &quot;POST&quot;æ–¹æ³•ç­‰ï¼‰ã€HTTP è¯·æ±‚ä¸­æ˜¯å¦æºå¸¦ç‰¹å®šå‚æ•°ç­‰æ¡ä»¶ï¼Œå°†è¯·æ±‚æ˜ å°„åˆ°åŒ¹é…çš„æ–¹æ³•ä¸Šã€‚ ç°åœ¨æ¥è®²ä¸€ä¸‹ @RequestMapping ä¸­çš„å±æ€§ï¼Œ@RequestMapping çš„æºç å¦‚ä¸‹ public @interface RequestMapping &#123; String name() default \"\"; @AliasFor(\"path\") String[] value() default &#123;&#125;; @AliasFor(\"value\") String[] path() default &#123;&#125;; RequestMethod[] method() default &#123;&#125;; String[] params() default &#123;&#125;; String[] headers() default &#123;&#125;; String[] consumes() default &#123;&#125;; String[] produces() default &#123;&#125;;&#125; name, value, pathï¼šæ˜¯ç”¨æ¥è®¾ç½®åŒ¹é…çš„ url è·¯å¾„çš„ methodï¼šæŒ‡å®šè¯·æ±‚çš„ method ç±»å‹, GETã€POSTã€PUTã€DELETE ç­‰ consumesï¼šæŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»å‹(Content-Type)ï¼Œä¾‹å¦‚ application/json, text/html producesï¼šæŒ‡å®šè¿”å›çš„å†…å®¹ç±»å‹ï¼Œä»…å½“ request è¯·æ±‚å¤´ä¸­çš„(Accept)ç±»å‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»å‹æ‰è¿”å› paramsï¼šæŒ‡å®š request ä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ—¶ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç† headersï¼šæŒ‡å®š request ä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„ header å€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ ç»™ä¸ªä¾‹å­ï¼š @RequestMapping(value=\"/hello\", method = RequestMethod.GET, params = \"myParam=myValue\", headers=\"Referer=www.baidu.com\", consumes=\"application/json\", produces=\"application/json\") é™¤äº†å¯ä»¥ä½¿ç”¨ method å±æ€§æŒ‡å®šè¯·æ±‚åŠæ³•å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ³¨è§£ï¼š @GetMapping(&quot;/hello&quot;) @PostMapping(&quot;/hello&quot;) ...... è¿™äº›æ³¨è§£ä¸ RequestMapping å…·æœ‰ç›¸åŒçš„å±æ€§ï¼Œé™¤äº† method å±æ€§ã€‚ @RequestParamè¯¥æ³¨è§£ç±»å‹ç”¨äºå°†æŒ‡å®šçš„è¯·æ±‚å‚æ•°èµ‹å€¼ç»™æ–¹æ³•ä¸­çš„å½¢å‚ï¼Œé‚£ä¹ˆ @RequestParam æ³¨è§£æœ‰ä»€ä¹ˆå±æ€§å‘¢? å®ƒæœ‰ 4 ç§å±æ€§ï¼Œä¸‹é¢å°†é€ä¸€ä»‹ç»è¿™å››ç§å±æ€§ï¼š name å±æ€§ï¼šè¯¥å±æ€§çš„ç±»å‹æ˜¯ String ç±»å‹ï¼Œå®ƒå¯ä»¥æŒ‡å®šè¯·æ±‚å¤´ç»‘å®šçš„åç§° value å±æ€§ï¼šè¯¥å±æ€§çš„ç±»å‹æ˜¯ String ç±»å‹ï¼Œå®ƒå¯ä»¥è®¾ç½®æ˜¯ name å±æ€§çš„åˆ«å required å±æ€§ï¼šè¯¥å±æ€§çš„ç±»å‹æ˜¯ boolean ç±»å‹ï¼Œå®ƒå¯ä»¥è®¾ç½®æŒ‡å®šå‚æ•°æ˜¯å¦å¿…é¡»ç»‘å®š defalutValue å±æ€§ï¼šè¯¥å±æ€§çš„ç±»å‹æ˜¯ String ç±»å‹ï¼Œå®ƒå¯ä»¥è®¾ç½®å¦‚æœæ²¡æœ‰ä¼ é€’å‚æ•°å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ @RequestMapping(value=\"/hello\")public String hello( @RequestParam(\"loginname\") String loginname, @RequestParam(\"password\") String password) &#123; return \"hello\";&#125; @PathVaribale@PathVaribale æ³¨è§£ï¼Œè¯¥æ³¨è§£ç±»å‹å¯ä»¥éå¸¸æ–¹ä¾¿çš„è·å¾—è¯·æ±‚ url ä¸­çš„åŠ¨æ€å‚æ•°ã€‚@PathVaribale æ³¨è§£åªæ”¯æŒä¸€ä¸ªå±æ€§ valueï¼Œç±»å‹ Stringï¼Œè¡¨ç¤ºç»‘å®šçš„åç§°ï¼Œå¦‚æœçœç•¥åˆ™é»˜è®¤ç»‘å®šåŒåå‚æ•° @RequestMapping(value=\"/pathVariableTest/&#123;userId&#125;\")public void pathVariableTest(@PathVaribale Integer userId) @CookieValueç»‘å®š cookie çš„å€¼åˆ° Controller æ–¹æ³•å‚æ•° @RequestMapping ( \"/hello\" )public String testCookieValue( @CookieValue(\"hello\") String cookieValue) &#123; return \"cookieValue\" ;&#125; @RequestHeader@RequestHeader æ³¨è§£ï¼Œè¯¥æ³¨è§£ç±»å‹ç”¨äºå°†è¯·æ±‚çš„å¤´çš„ä¿¡æ¯åŒºåŸŸæ•°æ®æ˜ å°„åˆ°åŠŸèƒ½å¤„ç†æ–¹æ³•çš„å‚æ•°ä¸Šã€‚é‚£ä¹ˆ@RequestHeader æ³¨è§£æœ‰ä»€ä¹ˆå±æ€§å‘¢? å®ƒå’Œ @RequestParam æ³¨è§£ä¸€æ ·ï¼Œä¹Ÿæœ‰ 4 ç§å±æ€§ï¼Œåˆ†åˆ«å¦‚ä¸‹ name å±æ€§ï¼šè¯¥å±æ€§çš„ç±»å‹æ˜¯ String ç±»å‹ï¼Œå®ƒå¯ä»¥æŒ‡å®šè¯·æ±‚å¤´ç»‘å®šçš„åç§° value å±æ€§ï¼šè¯¥å±æ€§çš„ç±»å‹æ˜¯ String ç±»å‹ï¼Œå®ƒå¯ä»¥è®¾ç½®æ˜¯ name å±æ€§çš„åˆ«å required å±æ€§ï¼šè¯¥å±æ€§çš„ç±»å‹æ˜¯ boolean ç±»å‹ï¼Œå®ƒå¯ä»¥è®¾ç½®æŒ‡å®šå‚æ•°æ˜¯å¦å¿…é¡»ç»‘å®š defalutValue å±æ€§ï¼šè¯¥å±æ€§çš„ç±»å‹æ˜¯ String ç±»å‹ï¼Œå®ƒå¯ä»¥è®¾ç½®å¦‚æœæ²¡æœ‰ä¼ é€’å‚æ•°å¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ @RequestMapping(value=\"/requestHeaderTest\")public void requestHeaderTest( @RequestHeader(\"User-Agent\") String userAgent, @RequestHeader(value=\"Accept\") String[] accepts) &#123;&#125; @RequestBody@RequestBody æ³¨è§£æ˜¯å°† HTTP è¯·æ±‚æ­£æ–‡æ’å…¥æ–¹æ³•ä¸­ @RequestMapping(value = \"/login\")public String login(@RequestBody Person person) &#123; return \"...\"; &#125; @RequestBody æ³¨è§£å¸¸ç”¨æ¥å¤„ç† Content-type ä¸æ˜¯é»˜è®¤çš„ application/x-www-form-urlcoded ç¼–ç çš„å†…å®¹ï¼Œæ¯”å¦‚è¯´ï¼šapplication/json æˆ–è€…æ˜¯ application/xml ç­‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ¥è¯´å¸¸ç”¨å…¶æ¥å¤„ç† application/json ç±»å‹ã€‚ å¯¹äºå‰ç«¯ä½¿ç”¨è€Œè¨€ï¼Œform è¡¨å•çš„ enctype å±æ€§ä¸ºç¼–ç æ–¹å¼ï¼Œå¸¸ç”¨æœ‰ä¸¤ç§ï¼šapplication/x-www-form-urlencoded å’Œ multipart/form-dataï¼Œé»˜è®¤ä¸º application/x-www-form-urlencodedï¼Œæ‰€ä»¥åœ¨å‰ç«¯ä¼ è¾“æ•°æ®æ—¶ï¼Œéœ€è¦å°† Content-type æ˜¾ç¤ºæŒ‡å®šä¸º application/jsonã€‚ æ€»ç»“ï¼š ReuqestBody ä¸»è¦æ˜¯å¤„ç† json ä¸²æ ¼å¼çš„è¯·æ±‚å‚æ•°ï¼Œè¦æ±‚ä½¿ç”¨æ–¹æŒ‡å®š header Content-type:application/json RequestBody é€šå¸¸è¦æ±‚è°ƒç”¨æ–¹ä½¿ç”¨ post è¯·æ±‚ @ResponseBody@ResponseBody æ³¨è§£çš„ä½œç”¨æ˜¯å°† Controller çš„æ–¹æ³•è¿”å›çš„å¯¹è±¡é€šè¿‡é€‚å½“çš„è½¬æ¢å™¨è½¬æ¢ä¸ºæŒ‡å®šçš„æ ¼å¼ä¹‹åï¼Œå†™å…¥åˆ° response å¯¹è±¡çš„ body åŒºï¼Œé€šå¸¸ç”¨æ¥è¿”å› JSON æ•°æ®æˆ–è€…æ˜¯ XML æ•°æ®ï¼Œéœ€è¦æ³¨æ„çš„å‘¢ï¼Œåœ¨ä½¿ç”¨æ­¤æ³¨è§£ä¹‹åä¸ä¼šå†èµ°è§†å›¾å¤„ç†å™¨ï¼Œè€Œæ˜¯ç›´æ¥å°†æ•°æ®å†™å…¥åˆ°è¾“å…¥æµä¸­ï¼Œå®ƒçš„æ•ˆæœç­‰åŒäºé€šè¿‡ response å¯¹è±¡è¾“å‡ºæŒ‡å®šæ ¼å¼çš„æ•°æ®ã€‚ @RequestMapping(\"/login\")@ResponseBodypublic User login(User user)&#123; //Userå­—æ®µï¼šuserName pwd //é‚£ä¹ˆåœ¨å‰å°æ¥æ”¶åˆ°çš„æ•°æ®ä¸ºï¼š'&#123;\"userName\":\"xxx\",\"pwd\":\"xxx\"&#125;' return user;&#125;//æ•ˆæœç­‰åŒäºå¦‚ä¸‹ä»£ç ï¼š@RequestMapping(\"/login\")public void login(User user, HttpServletResponse response)&#123; response.getWriter.write(JSONObject.fromObject(user).toString()); &#125;&#125; å‚è€ƒèµ„æ–™ SpringMVCæ‰§è¡Œæµç¨‹åŠå·¥ä½œåŸç† RequestMapping å±æ€§è§£é‡Š Springä¹‹RequestBodyçš„ä½¿ç”¨å§¿åŠ¿å°ç»“ @responseBodyæ³¨è§£çš„ä½¿ç”¨","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/SpringMVC/"}]},{"title":"Hexoä¸­æ•°å­¦å…¬å¼é—®é¢˜","date":"2020-02-29T04:23:42.000Z","path":"/hexoåšå®¢ä¸­çš„æ•°å­¦é—®é¢˜/","text":"èµ·å› ä¹‹å‰æˆ‘çš„ Hexo ä¸»é¢˜ä½¿ç”¨çš„æ˜¯ Next ä¸»é¢˜ï¼ŒNext ä¸»é¢˜å› ä¸ºå¯¹æ•°å­¦å…¬å¼æœ‰è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥åœ¨ç”¨ Next ä¸»é¢˜æ—¶å†™æ•°å­¦å…¬å¼æ˜¯ååˆ†çš„é¡ºç•…çš„ï¼Œä½†æ˜¯æœ€è¿‘è§‰å¾—Nextä¸»é¢˜é¢œè‰²å¤ªæ·¡äº†ï¼Œæ‰€ä»¥å°±æ¢äº†ä¸€ä¸ªé¢œè‰²æ¯”è¾ƒé²œè‰³çš„ Hexo ä¸»é¢˜ï¼Œä½†æ˜¯è¿™ä¸€æ¢ï¼Œæ•°å­¦å…¬å¼å°±æœ‰äº†éº»çƒ¦ã€‚ é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½è¿™ä¸ªéº»çƒ¦æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Œå› ä¸º markdown çš„è¯­æ³•è·Ÿ mathjax æœ‰é‡å ï¼Œæ¯”å¦‚ _ åœ¨ mathjax ä¸­è¡¨ç¤ºä¸‹æ ‡ï¼Œä½†æ˜¯åœ¨ markdown ä¸­ï¼Œè¢«ä¸¤ä¸ªä¸‹åˆ’çº¿ _ åŒ…è£¹èµ·æ¥çš„å†…å®¹ä¼šè¢«è½¬ä¸º &lt;em&gt; æ ‡ç­¾ï¼Œå³å…¶é—´çš„å†…å®¹ä¼šè¢«è½¬ä¸ºæ–œä½“ï¼Œè¿™å°±ä½¿å¾—æ•°å­¦å…¬å¼æ¸²æŸ“ä¸å‡ºæ¥ï¼›å¦ä¸€ä¸ªå°±æ˜¯ \\\\ åœ¨ mathjax è¡¨ç¤ºæ¢è¡Œï¼Œä½†æ˜¯åœ¨è§£æ markdown æ—¶å´ä¼šè¢«è½¬ä¹‰ã€‚ è§£å†³è¿™ä¸ªæ—¶å€™æˆ‘å°±å»ç½‘ä¸Šæœäº†è§£å†³åŠæ³•ï¼Œæœ‰å¥½å‡ ç§ï¼Œæ¯”å¦‚ç¬¬ä¸€ç§æ˜¯ä¿®æ”¹ marked.js(node_modules/marked/lib/marked.js)ï¼Œä¿®æ”¹ä¸¤ä¸ªå…³é”®å­—ä¸º excape å’Œ em çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™ä¸ªæ–¹æ³•æˆ‘è¯•äº†ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨ï¼›ç¬¬äºŒä¸ªåŠæ³•æ˜¯å¸è½½ hexo é»˜è®¤çš„ markdown è§£æ hexo-renderer-markedï¼Œç„¶åå®‰è£… hexo-renderer-pandoc(å¥½åƒ Next å°±æ˜¯è¿™ä¹ˆå¹²çš„)ï¼Œå‰ææ˜¯è¦å®‰è£… Pandocï¼Œç„¶åç”±äºæˆ‘çš„ npm ä¸çŸ¥é“å‡ºäº†ä»€ä¹ˆåŸå› ï¼Œä¸èƒ½ uninstallï¼Œåªèƒ½å¯»æ±‚å®ƒæ³•ã€‚(ä¸è¿‡ä½ ä»¬å¯ä»¥å°è¯•ï¼Œè§£å†³åŠæ³•é“¾æ¥åœ¨è¿™) ä¸è¿‡åŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œç»è¿‡å‡ ä¸ªå°æ—¶æŠ˜è…¾ï¼Œè¿˜æ˜¯è¢«æˆ‘æ‰¾åˆ°äº†è§£å†³åŠæ³•ï¼Œæˆ‘åœ¨hexoçš„issueä¸­çœ‹åˆ°ï¼Œå°†æœ‰é—®é¢˜çš„æ•°å­¦å…¬å¼å¦‚ä¸‹å¤„ç†ï¼š è¿™æ ·æ•°å­¦å…¬å¼å°±ä¸ä¼šè¢« marked è§£æï¼Œä½†æ˜¯ä¼šè¢« mathjax è§£æã€‚ ä¸Šé¢çš„åšæ³•å¯ä»¥è§£å†³å¤§éƒ¨åˆ†çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬æ•°å­¦å…¬å¼é‡Œé¢åŒ…å«ä¸€å¯¹ &lt;&gt; çš„è¯ï¼Œåˆä¼šå‡ºç°é—®é¢˜ï¼Œé€šè¿‡ F12 æ£€æŸ¥å…ƒç´ ï¼Œå‘ç°è¢« &lt;&gt; åŒ…è£¹çš„å†…å®¹è¢«è¯¯è®¤ä¸ºæ˜¯æ ‡ç­¾äº†ï¼Œå¯¼è‡´æ¸²æŸ“ä¸å‡ºæ¥ï¼Œè¦è§£å†³è¿™ä¸ªåŠæ³•ï¼ŒæŠŠå…¬å¼ä¸­æ‰€æœ‰çš„ &lt; ä½¿ç”¨ \\lt æ›¿ä»£ï¼Œæ‰€æœ‰çš„ &gt; ä½¿ç”¨ \\gt æ›¿ä»£ï¼Œè¿™æ ·å°±å¯ä»¥äº†ã€‚ Hexo çš„æ•°å­¦å…¬å¼çœŸçš„æ˜¯æŠ˜è…¾çš„æˆ‘å¤Ÿå‘›ï¼Œæ‰€ä»¥è¿™æ¬¡ç»å†å¿…é¡»è®°å½•ä¸‹æ¥ï¼Œä¸ºäº†ä¸‹æ¬¡é‡åˆ°åŒæ ·é—®é¢˜æ—¶èƒ½å¤Ÿè¿…é€Ÿè§£å†³ã€‚ å‚è€ƒèµ„æ–™ å…³äºæ•°å­¦å…¬å¼çš„æ¸²æŸ“é—®é¢˜ Hexoä¸‹mathjaxè½¬ä¹‰é—®é¢˜","tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Hexo/"}]},{"title":"Springç¬”è®°","date":"2020-02-26T16:00:00.000Z","path":"/Springç¬”è®°/","text":"æ¦‚è¿°Springæ˜¯ä¸€ä¸ªä»€ä¹ˆä¸œè¥¿? ç®€å•çš„ç†è§£å°±æ˜¯ä¸€ä¸ªå®¹å™¨ã€‚æ—¢ç„¶æ˜¯å®¹å™¨ï¼Œé‚£å°±æ˜¯è£…ä¸œè¥¿çš„ï¼Œè£…ä»€ä¹ˆçš„å‘¢? é‡Œé¢è£…çš„éƒ½æ˜¯å¯¹è±¡ã€‚ä»¥å‰å¯¹è±¡éƒ½æ˜¯ç”±æˆ‘ä»¬è‡ªå·±ç®¡ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨Userç±»ä¸­ä½¿ç”¨Studentå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šç›´æ¥newï¼Œæ¯”å¦‚ // User.javaStudent student = new Student(); é‚£å¦‚æœä½¿ç”¨Springçš„è¯ï¼Œä¼šå°†Studentå¯¹è±¡æ”¾åœ¨Springå®¹å™¨ä¸­ï¼Œå¦‚æœåœ¨Userç±»ä¸­ä½¿ç”¨Studentå¯¹è±¡ï¼Œé‚£ä¹ˆå°±å‘Springå®¹å™¨è¦ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªç§°ä¹‹ä¸ºIOC(æ§åˆ¶åè½¬)ï¼Œå³æ§åˆ¶æƒç”±ç¨‹åºå‘˜äº¤ç»™äº†Springå®¹å™¨ã€‚ æ‰€ä»¥æ¥ä¸‹æ¥å°±è¦è®²å¦‚ä½•å°†å¯¹è±¡äº¤ç»™Springå®¹å™¨ï¼Œæˆ–è€…è¯´Springå®¹å™¨å¦‚ä½•åˆ›å»ºå¯¹è±¡ï¼Œä¸»è¦æ˜¯åœ¨åˆ›å»ºå¯¹è±¡æ—¶å¦‚ä½•ä¸ºå¯¹è±¡é‡Œé¢çš„æˆå‘˜å˜é‡æ³¨å…¥å€¼ã€‚ å…¥é—¨é¦–å…ˆæ–°å»ºä¸€ä¸ªMavenå·¥ç¨‹ï¼Œåœ¨pom.xmlä¸­å¯¼å…¥ä¾èµ–ã€‚è¯´å®è¯Springæ¡†æ¶æ˜¯ä¸€ä¸ªå¤§å®¶æ—ï¼Œå®ƒæœ‰éå¸¸å¤šçš„åŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¼å…¥spring-webmvcï¼Œè¯¥åŒ…ä¾èµ–äº†å¾ˆå¤šå…¶ä»–Springçš„åŒ…ï¼Œè¿™æ ·æˆ‘ä»¬éœ€è¦çš„åŒ…éƒ½ä¼šè¢«å¯¼å…¥ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦å¯¼å…¥è¿™ä¸€ä¸ªåŒ…å°±å¯ä»¥ï¼Œå¦‚ä¸‹ &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;&lt;/dependency&gt; åœ¨src/main/javaä¸‹æ–°å»ºpojo.Hello.javaï¼Œå¦‚ä¸‹ package pojo;public class Hello &#123; private String name; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @Override public String toString() &#123; return \"Hello&#123;\" + \"name='\" + name + '\\'' + '&#125;'; &#125;&#125; ç°åœ¨æˆ‘ä»¬è¦å°†è¿™ä¸ªHelloå¯¹è±¡äº¤ç»™Springï¼Œé¦–å…ˆåœ¨resourcesä¸‹æ–°å»ºSpringçš„é…ç½®æ–‡ä»¶beans.xml(åå­—éšä¾¿ï¼Œå®˜æ–¹åå­—æ˜¯applicationContext.xml)ï¼Œå†…å®¹å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt; &lt;bean id=\"hello\" class=\"pojo.Hello\"&gt; &lt;property name=\"name\" value=\"Hello\"/&gt; &lt;/bean&gt;&lt;/beans&gt; å…¶ä¸­ &lt;bean id=\"hello\" class=\"pojo.Hello\"&gt; &lt;property name=\"name\" value=\"Hello\"/&gt;&lt;/bean&gt; å°±æ˜¯åœ¨Springå®¹å™¨ä¸­æ³¨å†ŒHelloï¼Œå…¶ä¸­idæ˜¯æˆ‘ä»¬å‘Springå®¹å™¨è·å–Helloå¯¹è±¡ç”¨çš„ï¼Œclassæ˜¯Helloç±»çš„å…¨é™å®šç±»åã€‚åœ¨beanæ ‡ç­¾ä¸­çš„peopertyæ ‡ç­¾çš„ä½œç”¨æ˜¯è®¾ç½®åœ¨åˆ›å»ºHelloå¯¹è±¡æ—¶å…¶æˆå‘˜å˜é‡çš„å€¼ã€‚ä¸Šé¢è®¾ç½®ä¸ºæˆå‘˜å˜é‡nameæ³¨å…¥å€¼Helloã€‚ ç°åœ¨åœ¨test/javaä¸‹æ–°å»ºTestHello.javaï¼Œå†…å®¹å¦‚ä¸‹ import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import pojo.Hello;public class TestHello &#123; public static void main(String[] args) &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"beans.xml\"); Hello hello = (Hello) applicationContext.getBean(\"hello\"); System.out.println(hello); &#125;&#125; è¿è¡Œç»“æœä¸º Hello&#123;name='Hello'&#125; å…¶ä¸­ ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"beans.xml\"); æ˜¯æ ¹æ®é…ç½®æ–‡ä»¶beans.xmlå¾—åˆ°Springå®¹å™¨ï¼Œæ¥ç€æˆ‘ä»¬æ ¹æ®åœ¨beans,xmlä¸­é…ç½®çš„idè·å–Helloå¯¹è±¡ Hello hello = (Hello) applicationContext.getBean(\"hello\"); æ¥ç€æˆ‘ä»¬æ‰“å°å‡ºHelloå¯¹è±¡ï¼Œå‘ç°è¿™ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡nameå·²ç»æœ‰å€¼Helloï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨beans.xmlä¸­æ³¨å…¥çš„ã€‚ IOCåˆ›å»ºå¯¹è±¡IOCåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œå…¶å®å…³é”®å°±æ˜¯å‘å¯¹è±¡çš„æˆå‘˜å˜é‡æ³¨å…¥å€¼ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªä¸œè¥¿å«åšè£…é…ï¼Œè€Œæ¥ä¸‹æ¥å°±æ˜¯ä»‹ç»å¦‚ä½•ä¸ºæˆå‘˜å˜é‡æ³¨å…¥å€¼ã€‚ æ„é€ å™¨æ³¨å…¥ç¬¬ä¸€ç§æ–¹æ³•å°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥(åˆå§‹åŒ–)ï¼Œä¸Šé¢é‚£ä¸ªä¾‹å­IOCåœ¨åˆ›å»ºå¯¹è±¡æ—¶æ˜¯è°ƒç”¨çš„æ˜¯æ— å‚æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä¸Šé¢é‚£ä¸ªä¾‹å­çš„è£…é…ä¸æ˜¯é€šè¿‡æ„é€ å‡½æ•°è£…é…çš„ï¼Œä¸ºäº†æ¼”ç¤ºæ„é€ å‡½æ•°è£…é…ï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ªUserç±» package pojo;public class User &#123; private String userName; private int age; public User(String userName, int age) &#123; this.userName = userName; this.age = age; &#125; @Override public String toString() &#123; return \"User&#123;\" + \"userName='\" + userName + '\\'' + \", age=\" + age + '&#125;'; &#125;&#125; æ¥ç€åœ¨beans.xmlæ³¨å†Œè¯¥ç±»(å°±æ˜¯å°†å®ƒäº¤ç»™Springå®¹å™¨)ï¼Œå¦‚ä¸‹ &lt;bean id=\"user\" class=\"pojo.User\"&gt; &lt;constructor-arg index=\"0\" value=\"å¥¥ç‰¹æ›¼\"/&gt; &lt;constructor-arg index=\"1\" value=\"1\"/&gt;&lt;/bean&gt; å…¶ä¸­constructor-argæ ‡ç­¾å°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥å€¼ï¼Œè¿™é‡Œæ˜¯é€šè¿‡å‚æ•°çš„ä½ç½®æ³¨å…¥å€¼çš„ï¼Œæ¯”å¦‚ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å³index = 0çš„ä½ç½®æ³¨å…¥â€å¥¥ç‰¹æ›¼â€ï¼Œä¸ºç¬¬äºŒä¸ªå‚æ•°å³index = 1çš„ä½ç½®æ³¨å…¥1ã€‚ æ¥ç€æˆ‘ä»¬å¯ä»¥åœ¨test/javaä¸­æ–°å»ºTestUserç±»ï¼Œå†…å®¹å¦‚ä¸‹ import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import pojo.User;public class TestUser &#123; public static void main(String[] args) &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"beans.xml\"); User user = (User) applicationContext.getBean(\"user\"); System.out.println(user); &#125;&#125; ä¸Šé¢çš„ä»£ç æƒ³å¿…æ— éœ€è§£é‡Šï¼Œä¸Šé¢çš„ç»“æœä¸º User&#123;userName='å¥¥ç‰¹æ›¼', age=1&#125; å¯è§æ˜¯æ³¨å…¥æˆåŠŸäº†ã€‚ é€šè¿‡æ„é€ å™¨æ³¨å…¥ï¼Œè¿˜æœ‰ä¸¤ç§æ–¹æ³•ï¼Œæ¯”å¦‚é€šè¿‡ç±»å‹æ³¨å…¥ï¼Œä¿®æ”¹ä¸Šé¢çš„constructor-argæ ‡ç­¾å¦‚ä¸‹ &lt;bean id=\"user\" class=\"pojo.User\"&gt; &lt;constructor-arg type=\"java.lang.String\" value=\"å¥¥ç‰¹æ›¼\"/&gt; &lt;constructor-arg type=\"int\" value=\"1\"/&gt;&lt;/bean&gt; ä¸Šé¢çš„é…ç½®å°±æ˜¯æ ¹æ®æ„é€ å‡½æ•°å‚æ•°ç±»å‹è¿›è¡Œé…ç½®ï¼Œå†æ¬¡è¿è¡Œä»£ç ï¼Œå¾—åˆ°çš„ç»“æœè¿˜æ˜¯ä¸€æ ·çš„ã€‚ æ³¨æ„: å¦‚æœæœ‰å¤šä¸ªæˆå‘˜å˜é‡çš„ç±»å‹æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆæ­¤æ–¹æ³•å°±ä¸é€‚ç”¨äº†ã€‚ æœ€åä¸€ç§å°±æ˜¯æ ¹æ®æˆå‘˜å˜é‡çš„åå­—è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹ &lt;bean id=\"user\" class=\"pojo.User\"&gt; &lt;constructor-arg name=\"userName\" value=\"å¥¥ç‰¹æ›¼\"/&gt; &lt;constructor-arg name=\"age\" value=\"1\"/&gt;&lt;/bean&gt; setæ–¹æ³•æ³¨å…¥setæ–¹æ³•æ³¨å…¥å°±æ˜¯æŒ‡é€šè¿‡æ— å‚æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ä»¥åï¼Œé€šè¿‡setæ–¹æ³•å°†å€¼æ³¨å…¥åˆ°æˆå‘˜å˜é‡ä¸­ï¼Œæ‰€ä»¥ä½¿ç”¨è¯¥æ–¹æ³•æ³¨å…¥å°±éœ€è¦ä¸ºæ¯ä¸ªæˆå‘˜å˜é‡å†™setæ–¹æ³•ï¼Œä¿®æ”¹ä¸Šé¢çš„Userç±»å¦‚ä¸‹ package pojo;public class User &#123; private String userName; private int age; public String getUserName() &#123; return userName; &#125; public void setUserName(String userName) &#123; this.userName = userName; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public String toString() &#123; return \"User&#123;\" + \"userName='\" + userName + '\\'' + \", age=\" + age + '&#125;'; &#125;&#125; ç°åœ¨åœ¨beans.xmlä¸­è¿›è¡Œé…ç½®å¦‚ä¸‹ &lt;bean id=\"user\" class=\"pojo.User\"&gt; &lt;property name=\"userName\" value=\"å¥¥ç‰¹æ›¼\"/&gt; &lt;property name=\"age\" value=\"1\"/&gt;&lt;/bean&gt; æˆ‘ä»¬é€šè¿‡propertyæ ‡ç­¾å‘å¯¹è±¡æ³¨å…¥å€¼ï¼Œè¿™æ˜¯é€šè¿‡æˆå‘˜å˜é‡çš„åå­—è¿›è¡Œé…ç½®çš„ã€‚ å…¶å®ƒé…ç½®æ–¹æ³•på‘½åç©ºé—´æ³¨å…¥è¦ä½¿ç”¨på‘½åç©ºé—´ï¼Œå°±å¾—å¯¼å…¥çº¦æŸï¼Œä¿®æ”¹beans.xmlçš„çº¦æŸ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:p=\"http://www.springframework.org/schema/p\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt; &lt;!-- ... ... --&gt;&lt;/beans&gt; æ‰€è°“på‘½åç©ºé—´æ³¨å…¥ä¸setæ–¹æ³•æ³¨å…¥æ˜¯ç›¸åŒçš„ï¼Œåªä¸è¿‡å†™æ³•ä¸åŒï¼Œå†™æ³•å¦‚ä¸‹ &lt;bean id=\"user\" class=\"pojo.User\" p:userName=\"å¥¥ç‰¹æ›¼\" p:age=\"1\"/&gt; cå‘½åç©ºé—´æ³¨å…¥è¦ä½¿ç”¨cå‘½åç©ºé—´åŒæ ·è¦å¯¼å…¥çº¦æŸï¼Œå†æ¬¡ä¿®æ”¹beans.xmlå¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:p=\"http://www.springframework.org/schema/p\" xmlns:c=\"http://www.springframework.org/schema/c\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd\"&gt; &lt;!-- ... ... --&gt;&lt;/beans&gt; cå‘½åç©ºé—´æ³¨å…¥ä¸æ„é€ å‡½æ•°æ³¨å…¥æ˜¯ç›¸åŒçš„ï¼Œå†™æ³•åŒpå‘½åç©ºé—´æ³¨å…¥ï¼Œå¦‚ä¸‹ &lt;bean id=\"user\" class=\"pojo.User\" c:userName=\"å¥¥ç‰¹æ›¼\" c:age=\"1\"/&gt; æˆ–è€… &lt;bean id=\"user\" class=\"pojo.User\" c:_0=\"å¥¥ç‰¹æ›¼\" c:_1=\"1\"/&gt; ä¸Šé¢çš„0å’Œ1ä»£è¡¨çš„æ˜¯æ„é€ å‡½æ•°ä¸­å‚æ•°çš„ä½ç½®ã€‚ å„ç§ç±»å‹æˆå‘˜å˜é‡çš„æ³¨å…¥è¿™é‡Œä»¥setçš„æ–¹å¼è®²è§£æ€ä¹ˆæ³¨å…¥å„ç§ç±»å‹æˆå‘˜å˜é‡ï¼Œæ¯”å¦‚å¤æ‚ç±»å‹ï¼Œæ•°ç»„ï¼ŒListç­‰é›†åˆï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ªStudentç±»å¦‚ä¸‹ package pojo;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import java.util.Arrays;import java.util.List;import java.util.Map;import java.util.Set;public class Student &#123; private String name; private Address address; private String[] hobbies; private List&lt;String&gt; games; private Set&lt;String&gt; toys; private Map&lt;String, Integer&gt; scores; private String wife; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Address getAddress() &#123; return address; &#125; public void setAddress(Address address) &#123; this.address = address; &#125; public String[] getHobbies() &#123; return hobbies; &#125; public void setHobbies(String[] hobbies) &#123; this.hobbies = hobbies; &#125; public List&lt;String&gt; getGames() &#123; return games; &#125; public void setGames(List&lt;String&gt; games) &#123; this.games = games; &#125; public Set&lt;String&gt; getToys() &#123; return toys; &#125; public void setToys(Set&lt;String&gt; toys) &#123; this.toys = toys; &#125; public Map&lt;String, Integer&gt; getScores() &#123; return scores; &#125; public void setScores(Map&lt;String, Integer&gt; scores) &#123; this.scores = scores; &#125; public String getWife() &#123; return wife; &#125; public void setWife(String wife) &#123; this.wife = wife; &#125; @Override public String toString() &#123; return \"Student&#123;\" + \"name='\" + name + '\\'' + \", address=\" + address + \", hobbies=\" + Arrays.toString(hobbies) + \", games=\" + games + \", toys=\" + toys + \", scores=\" + scores + \", wife='\" + wife + '\\'' + '&#125;'; &#125;&#125; ä¸Šé¢çš„æˆå‘˜å˜é‡ç±»å‹æœ‰Stringï¼Œå¤æ‚ç±»å‹Addressï¼Œæ•°ç»„ï¼ŒList, Map, Seté›†åˆï¼Œä»¥åŠæœ€åä¸€ä¸ªStringç±»å‹çš„wifeï¼Œæˆ‘ä»¬å°†é€šè¿‡wifeæ¼”ç¤ºå¦‚æœæ³¨å…¥nullã€‚å› ä¸ºè¿™é‡Œç”¨åˆ°äº†å¤æ‚ç±»å‹Addressï¼Œæ‰€ä»¥æ–°å»ºç±»Addresså¦‚ä¸‹ package pojo;public class Address &#123; private String address; public String getAddress() &#123; return address; &#125; public void setAddress(String address) &#123; this.address = address; &#125; @Override public String toString() &#123; return \"Address&#123;\" + \"address='\" + address + '\\'' + '&#125;'; &#125;&#125; å°†Addressæ³¨å†Œåˆ°Springå®¹å™¨ä¸­ï¼Œåœ¨beans.xmlä¸­æ·»åŠ å¦‚ä¸‹ &lt;bean id=\"address\" class=\"pojo.Address\"&gt; &lt;property name=\"address\" value=\"China\"/&gt;&lt;/bean&gt; ç°åœ¨ç›´æ¥æ¼”ç¤ºå¦‚æœä¸ºStudentä¸­çš„æˆå‘˜å˜é‡æ³¨å…¥ &lt;bean id=\"student\" class=\"pojo.Student\"&gt; &lt;property name=\"name\" value=\"å¼ ä¸‰\"/&gt; &lt;property name=\"address\" ref=\"address\"/&gt; &lt;property name=\"hobbies\"&gt; &lt;array&gt; &lt;value&gt;æ‰“çƒ&lt;/value&gt; &lt;value&gt;æ¸¸æ³³&lt;/value&gt; &lt;/array&gt; &lt;/property&gt; &lt;property name=\"games\"&gt; &lt;list&gt; &lt;value&gt;ç‹è€…è£è€€&lt;/value&gt; &lt;value&gt;åƒé¸¡&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;property name=\"toys\"&gt; &lt;set&gt; &lt;value&gt;é£æœº&lt;/value&gt; &lt;value&gt;å¤§ç‚®&lt;/value&gt; &lt;/set&gt; &lt;/property&gt; &lt;property name=\"scores\"&gt; &lt;map&gt; &lt;entry key=\"math\" value=\"20\"&gt;&lt;/entry&gt; &lt;entry key=\"english\" value=\"50\"&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;property name=\"wife\"&gt; &lt;null&gt;&lt;/null&gt; &lt;/property&gt;&lt;/bean&gt; å¯¹äºAddresså¤æ‚ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨refå±æ€§å¼•ç”¨å·²ç»åœ¨Springä¸­æ³¨å†Œè¿‡çš„ç±»ï¼Œå…¶å€¼å°±æ˜¯å®ƒæ³¨å†Œæ—¶çš„idã€‚å‰©ä¸‹çš„åº”è¯¥å¾ˆå®¹æ˜“çœ‹æ‡‚ï¼Œå°±ä¸è§£é‡Šäº†ã€‚ Springé…ç½® æ ‡ç­¾ ä½œç”¨ alias åˆ«å bean å‘Springå®¹å™¨æ³¨å†Œç±» import å¯¼å…¥å…¶å®ƒé…ç½®æ–‡ä»¶ Beançš„ä½œç”¨åŸŸbeanæ ‡ç­¾æœ‰ä¸€ä¸ªscopeå±æ€§ï¼Œå¯ä»¥è®¾ç½®ä½œç”¨åŸŸï¼Œè¿™é‡Œåªä»‹ç»ä¸¤ç§å–å€¼ singletonï¼šå•ä¾‹æ¨¡å¼ï¼Œä»Springå®¹å™¨ä¸­å¾—åˆ°çš„å¯¹è±¡æ˜¯åŒä¸€å¯¹è±¡ï¼Œé»˜è®¤å€¼ prototypeï¼šåŸå‹æ¨¡å¼ï¼Œä»Springå®¹å™¨ä¸­å¾—åˆ°çš„å¯¹è±¡æ˜¯ä¸åŒå¯¹è±¡ &lt;bean id=\"user\" class=\"pojo.User\" c:userName=\"å¥¥ç‰¹æ›¼\" c:age=\"1\" scope=\"singleton\"/&gt; æ¯”å¦‚åœ¨TestUserä¸­ä¿®æ”¹å¦‚ä¸‹ import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import pojo.User;public class TestUser &#123; public static void main(String[] args) &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"beans.xml\"); User user = (User) applicationContext.getBean(\"user\"); // ç¬¬äºŒä¸ªå‚æ•°ä¼ äº†User.classå°±ä¸ç”¨å¼ºè½¬äº† User user2 = applicationContext.getBean(\"user\", User.class); System.out.println(user == user2); // true &#125;&#125; ç°åœ¨ä¿®æ”¹scopeä¸ºprototypeï¼Œå†æ¬¡è¿è¡Œæ‰“å°å‡ºçš„ç»“æœå°±æ˜¯falseäº†ã€‚ è‡ªåŠ¨è£…é…Beané¦–å…ˆå‡†å¤‡å‡ ä¸ªç±»ï¼Œæ–°å»ºMan.java package com.pojo;public class Man &#123; private Dog dog; private Cat cat; public Dog getDog() &#123; return dog; &#125; public void setDog(Dog dog) &#123; this.dog = dog; &#125; public Cat getCat() &#123; return cat; &#125; public void setCat(Cat cat) &#123; this.cat = cat; &#125;&#125; å…¶ä¸­Manæœ‰ä¸¤ä¸ªå® ç‰©ï¼Œä¸€ä¸ªä¸ºCatï¼Œä¸€ä¸ªä¸ºDogï¼Œæ–°å»ºè¿™ä¸¤ä¸ªç±» package com.pojo;public class Cat &#123; public void shout() &#123; System.out.println(\"miao\"); &#125;&#125; package com.pojo;public class Dog &#123; public void shout() &#123; System.out.println(\"wang\"); &#125;&#125; åœ¨beans.xmlä¸­æ³¨å†ŒDogå’ŒCat &lt;bean id=\"cat\" class=\"com.pojo.Cat\"/&gt;&lt;bean id=\"dog\" class=\"com.pojo.Dog\"/&gt; ç°åœ¨è€ƒè™‘æ€ä¹ˆå‘Manä¸­æ³¨å…¥Catå’ŒDogã€‚ æŒ‰åå­—è‡ªåŠ¨æ³¨å…¥åœ¨beans.xmlæ·»åŠ å¦‚ä¸‹ &lt;bean id=\"man\" class=\"com.pojo.Man\" autowire=\"byName\"/&gt; autowireå°±æ˜¯ç”¨æ¥è®¾ç½®è‡ªåŠ¨æ³¨å…¥çš„ï¼Œè¿™é‡Œè®¾ç½®ä¸ºæŒ‰åå­—è‡ªåŠ¨æ³¨å…¥(byName)ã€‚å®ƒä¼šåœ¨Springå®¹å™¨å¯»æ‰¾åˆ°idä¸setXxxä¸­Xxxåå­—ç›¸åŒçš„ç±»æ³¨å…¥ï¼Œæ¯”å¦‚åœ¨Manä¸­æœ‰setDog()æ–¹æ³•ï¼Œå®ƒä¼šåœ¨Springå®¹å™¨ä¸­æ‰¾åˆ°idä¸ºdogçš„ç±»(åœ¨Springä¸­æ³¨å†Œçš„ç±»ï¼Œä¸€èˆ¬éƒ½ç§°ä¸ºbean)è‡ªåŠ¨ä¸ºå®ƒæ³¨å…¥ã€‚ æŒ‰ç±»å‹æ³¨å…¥ä¿®æ”¹Mançš„beanä¸º &lt;bean id=\"man\" class=\"com.pojo.Man\" autowire=\"byType\"/&gt; è¿™æ—¶ä¼šåœ¨Springå®¹å™¨ä¸­å¯»æ‰¾ç±»å‹ä¸ºDogå’ŒCatçš„beanä¸ºManä¸­çš„Dogå’ŒCatè‡ªåŠ¨æ³¨å…¥ï¼Œä½†æ˜¯å¦‚æœSpringå®¹å™¨ä¸­æœ‰å¤šä¸ªç±»å‹ç›¸åŒçš„beanï¼Œé‚£ä¹ˆå°±ä¸èƒ½æ³¨å…¥ï¼Œæ¯”å¦‚æˆ‘ä»¬å‘Springå®¹å™¨ä¸­åœ¨æ³¨å…¥ä¸€ä¸ªDogå¦‚ä¸‹ &lt;bean id=\"dog2\" class=\"com.pojo.Dog\"/&gt; è¿™æ—¶æˆ‘ä»¬å‘ç°åœ¨beans.xmlä¸­æŠ¥é”™äº† ä½¿ç”¨æ³¨è§£æ³¨å…¥ä½¿ç”¨@AutoWiredæ³¨è§£åœ¨æˆå‘˜å˜é‡ä¸Šï¼Œä¼šåœ¨Springå®¹å™¨æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ï¼Œè‡ªåŠ¨æ³¨å…¥ï¼Œé¦–å…ˆåœ¨beans.xmlä¸­æ³¨å†ŒManç±» &lt;bean id=\"man\" class=\"com.pojo.Man\"/&gt; åœ¨Man.javaä¸­ä¸ºæˆå‘˜å˜é‡åŠ ä¸Šæ³¨è§£ @Autowiredprivate Dog dog;@Autowiredprivate Cat cat; è¿™æ—¶è¿˜æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºè¦åœ¨beans.xmlä¸­å¼€å¯æ³¨è§£æ”¯æŒï¼Œé¦–å…ˆå¯¼å…¥çº¦æŸï¼Œä¿®æ”¹çº¦æŸå¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;!-- ... ... --&gt;&lt;/beans&gt; æ¥ç€å¼€å¯æ³¨è§£æ”¯æŒï¼Œåœ¨beans.xmlä¸­æ·»åŠ å¦‚ä¸‹ &lt;context:annotation-config/&gt; @AutoWiredæ³¨è§£é¦–å…ˆé€šè¿‡byTypeå³ç±»å‹å¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„beanï¼Œå¦‚æœæ‰¾åˆ°å¤šä¸ªç±»å‹ç›¸åŒçš„beanç¬¦åˆæ¡ä»¶ï¼Œé‚£ä¹ˆæ¥ç€åœ¨è¿™äº›beanä¸­byNameå¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„ã€‚ æˆ‘ä»¬å¯ä»¥ç»™æˆå‘˜å˜é‡åŠ ä¸Š@Qualifieræ³¨è§£ï¼Œè¿™æ ·å°±ä¼šæŒ‰ç…§@Qualifierè§„å®šçš„nameå–å¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„beanã€‚ @Autowired@Qualifier(\"dog\")private Dog dog;@Autowired@Qualifier(\"cat\")private Cat cat; @AutoWiredä¹Ÿå¯ä»¥åœ¨setXxxæ–¹æ³•ä¸Šä½¿ç”¨ï¼Œå¹¶ä¸”å¦‚æœåœ¨æˆå‘˜å˜é‡ä¸Šä½¿ç”¨ï¼Œåˆ™å¯ä»¥ä¸å†™setteræ–¹æ³•äº†ã€‚ é™¤äº†ä½¿ç”¨@AutoWiredæ³¨è§£ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨@Resourceæ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£ä¸æ˜¯Springçš„ï¼Œæ˜¯J2EEçš„ï¼Œæˆ‘ä»¬ä¿®æ”¹æ³¨è§£å¦‚ä¸‹ @Resourceprivate Dog dog;@Resourceprivate Cat cat; @Resourceæ˜¯é»˜è®¤byNameå»å¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„beançš„ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™byTypeã€‚ Springæ³¨è§£å¼€å‘è¦ä½¿ç”¨æ³¨è§£ï¼Œé¦–å…ˆå¯¼å…¥çº¦æŸ(åœ¨ä¸Šé¢æ¼”ç¤ºè¿‡äº†)ï¼Œå¹¶ä¸”å¼€å¯æ³¨è§£æ”¯æŒï¼Œæœ€åè®¾ç½®è¦æ‰«æçš„åŒ…(å³å“ªäº›åŒ…ä¸‹çš„ç±»æ˜¯ä½¿ç”¨æ³¨è§£çš„)ï¼Œbeans.xmlçš„å†…å®¹å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;context:annotation-config/&gt; &lt;context:component-scan base-package=\"com.pojo\"/&gt;&lt;/beans&gt; åœ¨ä¸Šé¢å®šä¹‰æ‰«æcom.pojoä¸‹çš„åŒ…ï¼Œé¦–å…ˆæ–°å»ºStudentç±»å’ŒAddressç±» package com.pojo;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;public class Student &#123; private String name; private Address address; @Override public String toString() &#123; return \"Student&#123;\" + \"name='\" + name + '\\'' + \", address=\" + address + '&#125;'; &#125;&#125; package com.pojo;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;public class Address &#123; private String address; @Override public String toString() &#123; return \"Address&#123;\" + \"address='\" + address + '\\'' + '&#125;'; &#125;&#125; @Componentæ¥ä¸‹æ¥æœ¬åº”è¯¥æ˜¯åœ¨beans.xmlä¸­æ³¨å†Œï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬ä¸ä½¿ç”¨xmlé…ç½®äº†ï¼Œè€Œæ˜¯ä½¿ç”¨æ³¨è§£ï¼Œè¦å‘Springå®¹å™¨ä¸­æ³¨å†Œï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç±»ä¸Šé¢åŠ å…¥@Componentæ³¨è§£ï¼Œè€Œæ³¨å…¥åˆ™å¯ä»¥ä½¿ç”¨æˆ‘ä»¬åœ¨ä¸Šé¢ä»‹ç»çš„@AutoWiredï¼Œå¦‚ä¸‹ package com.pojo;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;@Componentpublic class Student &#123; @Value(\"Alice\") private String name; @Autowired private Address address; @Override public String toString() &#123; return \"Student&#123;\" + \"name='\" + name + '\\'' + \", address=\" + address + '&#125;'; &#125;&#125; package com.pojo;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;@Componentpublic class Address &#123; @Value(\"American\") private String address; @Override public String toString() &#123; return \"Address&#123;\" + \"address='\" + address + '\\'' + '&#125;'; &#125;&#125; å…¶ä¸­@Valueæ³¨è§£æ˜¯å‘å…¶ä¸­æ³¨å…¥æ™®é€šå€¼çš„ï¼Œå¦‚Stringï¼Œintç­‰ç­‰ï¼Œå¯¹äºä¸€äº›å…¶ä»–ä¸€äº›å¤æ‚ç±»å‹ï¼Œå¦‚æ•°ç»„ï¼Œé›†åˆç­‰ï¼Œå»ºè®®ä½¿ç”¨xmlé…ç½®ï¼Œæ›´æ¸…æ™°ã€‚ æ¥ä¸‹æ¥åœ¨test/java/TestStudent.javaä¸­è¿›è¡Œæµ‹è¯• import com.pojo.Student;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class TestStudent &#123; public static void main(String[] args) &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"beans.xml\"); Student student = applicationContext.getBean(\"student\", Student.class); System.out.println(student); &#125;&#125; è¾“å‡ºä¸º Student&#123;name='Alice', address=Address&#123;address='American'&#125;&#125; @Componentè¡ç”Ÿçš„æ³¨è§£:ä¸‹é¢ä»‹ç»@Componentè¡ç”Ÿçš„æ³¨è§£ï¼Œè¿™äº›æ³¨è§£çš„ä½œç”¨ä¸@Componentç›¸åŒï¼Œåªä¸è¿‡è¯­ä¹‰ä¸åŒï¼Œå¦‚ @Controllerï¼šä½¿ç”¨åœ¨Webå±‚(servlet) @Serviceï¼šä½¿ç”¨åœ¨ä¸šåŠ¡å±‚(service) @Repositoryï¼šä½¿ç”¨åœ¨æŒä¹…å±‚(dao) è¿™äº›æ³¨è§£çš„åŠŸèƒ½ç›¸åŒï¼Œå°±æ˜¯å°†ç±»é…ç½®åœ¨Springå®¹å™¨ä¸­ã€‚ @Scope@Scopeæ˜¯ç”¨æ¥è®¾ç½®beançš„èŒƒå›´çš„ï¼Œä¸Šé¢æˆ‘ä»¬ä»‹ç»è¿‡ä¸¤ç§å–å€¼ï¼Œä¸€ç§æ˜¯singletonï¼Œå¦ä¸€ç§æ˜¯prototypeï¼Œå¦‚ @Component@Scope(\"singleton\") é€šè¿‡JavaConfigå®ç°é…ç½®æ–°å»ºå·¥ç¨‹å¹¶æ–°å»ºä¸€ä¸ªUserç±»ï¼Œå¦‚ä¸‹ package com.pojo;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;@Componentpublic class User &#123; @Value(\"biu\") private String name; @Value(\"1\") private int age; @Override public String toString() &#123; return \"User&#123;\" + \"name='\" + name + '\\'' + \", age=\" + age + '&#125;'; &#125;&#125; è¿™å…¶ä¸­çš„å†…å®¹éƒ½ä¸æ´—è§£é‡Šäº†ã€‚ä¹‹å‰æˆ‘ä»¬çš„é…ç½®éƒ½æ˜¯é€šè¿‡xmlæ–‡ä»¶é…ç½®çš„ï¼Œè¿™æ¬¡æˆ‘ä»¬å°†å½»åº•ä¸éœ€è¦xmlæ–‡ä»¶ï¼Œè€Œæ˜¯é€šè¿‡Javaç±»æ¥è¿›è¡Œé…ç½®ï¼Œåœ¨com.configåŒ…ä¸‹æ–°å»ºJavaConfig.javaï¼Œå†…å®¹å¦‚ä¸‹ package com.config;import com.pojo.User;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.ComponentScan;import org.springframework.context.annotation.Configuration;@Configuration@ComponentScan(\"com.pojo\")public class JavaConfig &#123; @Bean public User getUser() &#123; return new User(); &#125;&#125; åœ¨æ­¤ç±»ä¸­æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ª@Configurationæ³¨è§£ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚@ComponentScanå®šä¹‰äº†æ‰«æåŒ…çš„èŒƒå›´ã€‚@Beanæ³¨è§£å°±æ˜¯ç›¸å½“äºbeanæ ‡ç­¾ï¼Œå…¶æ–¹æ³•åå°±ç›¸å½“äºæ˜¯idï¼Œè¿”å›å€¼ç±»å‹å°±æ˜¯classã€‚ æ¥åœ¨æˆ‘ä»¬åœ¨test/java/TestUserä¸­è¿›è¡Œä½¿ç”¨å¦‚ä¸‹ import com.config.JavaConfig;import com.pojo.User;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;public class TestUser &#123; public static void main(String[] args) &#123; ApplicationContext applicationContext = new AnnotationConfigApplicationContext(JavaConfig.class); User user = applicationContext.getBean(\"getUser\", User.class); System.out.println(user); &#125;&#125; è¾“å‡ºä¸º User&#123;name='biu', age=1&#125; æˆ‘ä»¬å¯ä»¥é€šè¿‡@Beanæ³¨è§£æ¥è®¾ç½®idï¼Œæ¯”å¦‚ä¸Šé¢JavaConfigä¸­çš„@Beanä¿®æ”¹å¦‚ä¸‹ @Bean(\"user\") é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡â€userâ€å»Springå®¹å™¨ä¸­æ‹¿Userå¯¹è±¡ User user = applicationContext.getBean(\"user\", User.class); æ³¨æ„: è¿™æ—¶ä¸èƒ½é€šè¿‡æ–¹æ³•åè·å¾—å¯¹è±¡äº†ã€‚ AOPç°åœ¨å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œæœ‰ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªdaoç±»ï¼Œå¦‚ä¸‹ package com.dao;public class UserDao &#123; public void add() &#123; System.out.println(\"add\"); &#125; public void update() &#123; System.out.println(\"update\"); &#125; public void query() &#123; System.out.println(\"query\"); &#125; public void delete() &#123; System.out.println(\"delete\"); &#125;&#125; æˆ‘ä»¬å¸Œæœ›æ¯æ¬¡åœ¨è°ƒç”¨è¯¥ç±»çš„æ–¹æ³•çš„å‰åéƒ½æ‰“å°å‡ºæ—¥å¿—ï¼Œæˆ‘ä»¬å½“ç„¶ä¸èƒ½åœ¨UserDaoç±»ä¸­çš„æ¯ä¸ªæ–¹æ³•ä¸­æ‰‹åŠ¨æ‰“å°ï¼Œå¦‚ public void add() &#123; System.out.println(\"addæ–¹æ³•æ‰§è¡Œå‰\"); System.out.println(\"add\"); System.out.println(\"addæ–¹æ³•æ‰§è¡Œå\");&#125; è¿™æ ·å°†æ—¥å¿—çš„ä»£ç ä¸ä¸šåŠ¡çš„ä»£ç æ‰åœ¨ä¸€èµ·ï¼Œä¸å¥½ï¼›å¦ä¸€ä¸ªå¯¹äºæ¯ä¸ªæ–¹æ³•éƒ½è¦å†™è¿™æ ·çš„ä»£ç ï¼Œåˆç´¯åˆlowã€‚ AOPæ¦‚å¿µSpringæ¡†æ¶è‡ªè¯ç”Ÿä¹‹æ—¥å°±æ‹¯æ•‘æˆ‘ç­‰ç¨‹åºå‘˜äºæ°´ç«ä¹‹ä¸­ï¼Œå®ƒæœ‰ä¸¤å¤§æ³•å®ï¼Œä¸€ä¸ªæ˜¯IoCæ§åˆ¶åè½¬ï¼Œå¦ä¸€ä¸ªä¾¿æ˜¯AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚AOPå…¨åAspect-oriented programmingé¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚ åˆ‡é¢(Aspect)åˆ‡é¢æ˜¯ä¸€ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–ï¼Œä¸€ä¸ªåˆ‡é¢èƒ½å¤ŸåŒ…å«åŒä¸€ä¸ªç±»å‹çš„ä¸åŒå¢å¼ºæ–¹æ³•ï¼Œæ¯”å¦‚è¯´äº‹åŠ¡å¤„ç†å’Œæ—¥å¿—å¤„ç†å¯ä»¥ç†è§£ä¸ºä¸¤ä¸ªåˆ‡é¢ã€‚åˆ‡é¢ç”±åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ç»„æˆï¼Œå®ƒæ—¢åŒ…å«äº†æ¨ªåˆ‡é€»è¾‘çš„å®šä¹‰ï¼Œä¹ŸåŒ…æ‹¬äº†åˆ‡å…¥ç‚¹çš„å®šä¹‰ã€‚ Spring AOPå°±æ˜¯è´Ÿè´£å®æ–½åˆ‡é¢çš„æ¡†æ¶ï¼Œå®ƒå°†åˆ‡é¢æ‰€å®šä¹‰çš„æ¨ªåˆ‡é€»è¾‘ç»‡å…¥åˆ°åˆ‡é¢æ‰€æŒ‡å®šçš„è¿æ¥ç‚¹ä¸­ã€‚ ç›®æ ‡å¯¹è±¡(Target)ç›®æ ‡å¯¹è±¡æŒ‡å°†è¦è¢«å¢å¼ºçš„å¯¹è±¡ï¼Œå³åŒ…å«ä¸»ä¸šåŠ¡é€»è¾‘çš„ç±»å¯¹è±¡ã€‚æˆ–è€…è¯´æ˜¯è¢«ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ‡é¢æ‰€é€šçŸ¥çš„å¯¹è±¡ã€‚ è¿æ¥ç‚¹(JoinPoint)ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ˜ç¡®çš„ç‚¹ï¼Œå¦‚æ–¹æ³•çš„è°ƒç”¨æˆ–ç‰¹å®šçš„å¼‚å¸¸è¢«æŠ›å‡ºã€‚è¿æ¥ç‚¹ç”±ä¸¤ä¸ªä¿¡æ¯ç¡®å®šï¼š æ–¹æ³•(è¡¨ç¤ºç¨‹åºæ‰§è¡Œç‚¹ï¼Œå³åœ¨å“ªä¸ªç›®æ ‡æ–¹æ³•) ç›¸å¯¹ç‚¹(è¡¨ç¤ºæ–¹ä½ï¼Œå³ç›®æ ‡æ–¹æ³•çš„ä»€ä¹ˆä½ç½®ï¼Œæ¯”å¦‚è°ƒç”¨å‰ï¼Œåç­‰) ç®€å•æ¥è¯´ï¼Œè¿æ¥ç‚¹å°±æ˜¯è¢«æ‹¦æˆªåˆ°çš„ç¨‹åºæ‰§è¡Œç‚¹ï¼Œå› ä¸ºSpringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼Œæ‰€ä»¥åœ¨Springä¸­è¿æ¥ç‚¹å°±æ˜¯è¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ã€‚ åˆ‡å…¥ç‚¹(PointCut)åˆ‡å…¥ç‚¹æ˜¯å¯¹è¿æ¥ç‚¹è¿›è¡Œæ‹¦æˆªçš„æ¡ä»¶å®šä¹‰ã€‚åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å¦‚ä½•å’Œè¿æ¥ç‚¹åŒ¹é…æ˜¯AOPçš„æ ¸å¿ƒï¼ŒSpringç¼ºçœä½¿ç”¨AspectJåˆ‡å…¥ç‚¹è¯­æ³•ã€‚ ä¸€èˆ¬è®¤ä¸ºï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½å¯ä»¥è®¤ä¸ºæ˜¯è¿æ¥ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœ¨æ‰€æœ‰çš„æ–¹æ³•ä¸Šéƒ½æ·»åŠ é€šçŸ¥ï¼Œè€Œåˆ‡å…¥ç‚¹çš„ä½œç”¨å°±æ˜¯æä¾›ä¸€ç»„è§„åˆ™(ä½¿ç”¨ AspectJ pointcut expression language æ¥æè¿°) æ¥åŒ¹é…è¿æ¥ç‚¹ï¼Œç»™æ»¡è¶³è§„åˆ™çš„è¿æ¥ç‚¹æ·»åŠ é€šçŸ¥ã€‚ é€šçŸ¥(Advice)é€šçŸ¥æ˜¯æŒ‡æ‹¦æˆªåˆ°è¿æ¥ç‚¹ä¹‹åè¦æ‰§è¡Œçš„ä»£ç ï¼ŒåŒ…æ‹¬äº†â€œaroundâ€ã€â€œbeforeâ€å’Œâ€œafterâ€ç­‰ä¸åŒç±»å‹çš„é€šçŸ¥ã€‚Spring AOPæ¡†æ¶ä»¥æ‹¦æˆªå™¨æ¥å®ç°é€šçŸ¥æ¨¡å‹ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªä»¥è¿æ¥ç‚¹ä¸ºä¸­å¿ƒçš„æ‹¦æˆªå™¨é“¾ã€‚ ç»‡å…¥(Weaving)ç»‡å…¥æ˜¯å°†åˆ‡é¢å’Œä¸šåŠ¡é€»è¾‘å¯¹è±¡è¿æ¥èµ·æ¥, å¹¶åˆ›å»ºé€šçŸ¥ä»£ç†çš„è¿‡ç¨‹ã€‚ç»‡å…¥å¯ä»¥åœ¨ç¼–è¯‘æ—¶ï¼Œç±»åŠ è½½æ—¶å’Œè¿è¡Œæ—¶å®Œæˆã€‚åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç»‡å…¥å°±æ˜¯é™æ€ä»£ç†ï¼Œè€Œåœ¨è¿è¡Œæ—¶è¿›è¡Œç»‡å…¥åˆ™æ˜¯åŠ¨æ€ä»£ç†ã€‚ å¢å¼ºå™¨(Adviser)Advisoræ˜¯åˆ‡é¢çš„å¦å¤–ä¸€ç§å®ç°ï¼Œèƒ½å¤Ÿå°†é€šçŸ¥ä»¥æ›´ä¸ºå¤æ‚çš„æ–¹å¼ç»‡å…¥åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œæ˜¯å°†é€šçŸ¥åŒ…è£…ä¸ºæ›´å¤æ‚åˆ‡é¢çš„è£…é…å™¨ã€‚Advisorç”±åˆ‡å…¥ç‚¹å’ŒAdviceç»„æˆã€‚ Advisorè¿™ä¸ªæ¦‚å¿µæ¥è‡ªäºSpringå¯¹AOPçš„æ”¯æ’‘ï¼Œåœ¨AspectJä¸­æ˜¯æ²¡æœ‰ç­‰ä»·çš„æ¦‚å¿µçš„ã€‚Advisorå°±åƒæ˜¯ä¸€ä¸ªå°çš„è‡ªåŒ…å«çš„åˆ‡é¢ï¼Œè¿™ä¸ªåˆ‡é¢åªæœ‰ä¸€ä¸ªé€šçŸ¥ã€‚åˆ‡é¢è‡ªèº«é€šè¿‡ä¸€ä¸ªBeanè¡¨ç¤ºï¼Œå¹¶ä¸”å¿…é¡»å®ç°ä¸€ä¸ªé»˜è®¤æ¥å£ã€‚ Spring AOPæˆ‘ä»¬å°†ä½¿ç”¨AOPæ¥å®ç°ä¸Šé¢çš„éœ€æ±‚ï¼Œè¦ä½¿ç”¨AOPï¼Œé¦–å…ˆè¦å¯¼å…¥ä¸€ä¸ªåŒ…aspectjï¼Œå¦‚ä¸‹ &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.9.4&lt;/version&gt;&lt;/dependency&gt; ä¸¤ä¸ªæ—¥å¿—ç±»åˆ†åˆ«è¡¨ç¤ºåœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹å package com.log;import org.springframework.aop.MethodBeforeAdvice;import java.lang.reflect.Method;public class LogBefore implements MethodBeforeAdvice &#123; public void before(Method method, Object[] objects, Object o) throws Throwable &#123; System.out.println(\"åœ¨\" + method.getName() + \"ä¹‹å‰æ‰§è¡Œ\"); &#125;&#125; package com.log;import org.springframework.aop.AfterReturningAdvice;import java.lang.reflect.Method;public class LogAfter implements AfterReturningAdvice &#123; public void afterReturning(Object o, Method method, Object[] objects, Object o1) throws Throwable &#123; System.out.println(\"åœ¨\" + method.getName() + \"æ‰§è¡Œåï¼Œ è¿”å›å€¼ä¸º\" + o); &#125;&#125; æ¥ç€åœ¨beans.xmlä¸­æ³¨å†Œè¿™ä¸‰ä¸ªç±»ï¼Œä¸ºäº†ä½¿ç”¨AOPï¼Œæˆ‘ä»¬è¦å¯¼å…¥çº¦æŸï¼Œbeans.xmlå…¨éƒ¨å†…å®¹å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt; &lt;bean id=\"userDao\" class=\"com.dao.UserDao\"/&gt; &lt;bean id=\"beforeLog\" class=\"com.log.LogBefore\"/&gt; &lt;bean id=\"afterLog\" class=\"com.log.LogAfter\"/&gt; &lt;aop:config&gt; &lt;aop:pointcut id=\"pointcut\" expression=\"execution(* com.dao.*.*(..))\"/&gt; &lt;aop:advisor advice-ref=\"beforeLog\" pointcut-ref=\"pointcut\"/&gt; &lt;aop:advisor advice-ref=\"afterLog\" pointcut-ref=\"pointcut\"/&gt; &lt;/aop:config&gt;&lt;/beans&gt; ç°åœ¨åœ¨TestUserDaoä¸­è¿›è¡Œæµ‹è¯• import com.dao.UserDao;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class TestUserDao &#123; public static void main(String[] args) &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"beans.xml\"); UserDao userDao = applicationContext.getBean(\"userDao\", UserDao.class); userDao.add(); &#125;&#125; è¾“å‡ºä¸º åœ¨addä¹‹å‰æ‰§è¡Œaddåœ¨addæ‰§è¡Œåï¼Œ è¿”å›å€¼ä¸ºnull è‡ªå®šä¹‰ç±» AOPç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨å¦ä¸€ç§ç”¨æ³•å®ç°ä¸Šé¢çš„æ•ˆæœï¼Œè¿™æ¬¡æˆ‘ä»¬æ–°å»ºä¸€ä¸ªLogç±»ï¼Œå¦‚ä¸‹ package com.log;public class Log &#123; public void before() &#123; System.out.println(\"before\"); &#125; public void after() &#123; System.out.println(\"after\"); &#125;&#125; ä¿®æ”¹beans.xmlå¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd\"&gt; &lt;bean id=\"userDao\" class=\"com.dao.UserDao\"/&gt; &lt;bean id=\"log\" class=\"com.log.Log\"/&gt; &lt;aop:config&gt; &lt;aop:aspect ref=\"log\"&gt; &lt;aop:pointcut id=\"pointcut\" expression=\"execution(* com.dao.*.*(..))\"/&gt; &lt;aop:before method=\"before\" pointcut-ref=\"pointcut\"/&gt; &lt;aop:after method=\"after\" pointcut-ref=\"pointcut\"/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; å†æ¬¡è¿è¡ŒTestUserDaoç±»ï¼Œè¾“å‡ºä¸º beforeaddafter æ³¨è§£ AOPä¿®æ”¹beans.xmlä¸º &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;context:annotation-config/&gt; &lt;context:component-scan base-package=\"com\"/&gt; &lt;aop:aspectj-autoproxy/&gt;&lt;/beans&gt; ä¿®æ”¹Log.javaä¸º package com.log;import org.aspectj.lang.annotation.After;import org.aspectj.lang.annotation.Aspect;import org.aspectj.lang.annotation.Before;import org.springframework.stereotype.Component;@Aspect@Componentpublic class Log &#123; @Before(\"execution(* com.dao.*.*(..))\") public void before() &#123; System.out.println(\"before\"); &#125; @After(\"execution(* com.dao.*.*(..))\") public void after() &#123; System.out.println(\"after\"); &#125;&#125; UserDao.java package com.dao;import org.springframework.stereotype.Component;@Componentpublic class UserDao &#123; public void add() &#123; System.out.println(\"add\"); &#125; public void update() &#123; System.out.println(\"update\"); &#125; public void query() &#123; System.out.println(\"query\"); &#125; public void delete() &#123; System.out.println(\"delete\"); &#125;&#125; å†æ¬¡è¿è¡ŒTestUserDaoï¼Œè¾“å‡ºå¦‚ä¸‹ beforeaddafter","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"Spring","slug":"Spring","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Spring/"}]},{"title":"MyBatiså­¦ä¹ ç¬”è®°","date":"2020-02-13T16:00:00.000Z","path":"/MyBatiså­¦ä¹ ç¬”è®°/","text":"MyBatiså…¥é—¨æ–°å»ºMavenå·¥ç¨‹ï¼Œåœ¨å…¶ä¸­å¼•å…¥æ‰€éœ€è¦çš„åŒ…ï¼Œå¦‚mybatis, mysql-connector-java, junitã€‚é…ç½®pom.xmlå¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;xt.mybatis&lt;/groupId&gt; &lt;artifactId&gt;simple&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.38&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; åœ¨MySQLä¸­æ–°å»ºä¸€ä¸ªmybatisçš„åº“ CREATE DATABASE mybatis; ç„¶åä½¿ç”¨è¯¥æ•°æ®åº“å¹¶å»ºä¸€ä¸ªbookè¡¨ USE mybatis;CREATE TABLE BOOK(ID INT AUTO_INCREMENT PRIMARY KEY,NAME VARCHAR(20),NUMBER int );insert into BOOK(NAME,NUMBER) VALUES('Javaç¨‹åºè®¾è®¡',10),('æ•°æ®ç»“æ„',10),('è®¾è®¡æ¨¡å¼',10); å¦‚æœå‡ºç°ç”±äºä¸­æ–‡ä¸èƒ½æ’å…¥çš„é—®é¢˜ï¼Œè¾“å…¥ä»¥ä¸‹è¯­å¥ç„¶åæ’å…¥æ•°æ® alter table mybatis change name name varchar(20) character set utf8; åœ¨src/javaä¸­æ–°å»ºåŒ…com.xt.entityï¼Œæ–°å»ºBookå®ä½“ç±»ï¼Œå®ä½“ç±»æ˜¯ç”¨æ¥ä¿å­˜æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„ç»“æœï¼Œåœ¨è¿™é‡Œå®ä½“ç±»çš„å±æ€§è¦ä¿æŒå’Œæ•°æ®åº“ä¸­çš„åˆ—åä¸€è‡´(åç»­ä¼šè®²è§£ä¸ä¸€è‡´ä¼šå‡ºç°ä»€ä¹ˆä»¥åŠè§£å†³åŠæ³•) package com.xt.entity;public class Book &#123; private int id; private String name; private int number; public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getNumber() &#123; return number; &#125; public void setNumber(int number) &#123; this.number = number; &#125; @Override public String toString() &#123; return \"Book&#123;\" + \"id=\" + id + \", name='\" + name + '\\'' + \", number=\" + number + '&#125;'; &#125;&#125; åœ¨src/javaä¸­æ–°å»ºåŒ…com.xt.daoï¼Œæ–°å»ºä¸€ä¸ªæ¥å£BookDao package com.xt.dao;import com.xt.entity.Book;import java.util.List;public interface BookDao &#123; public List&lt;Book&gt; findAll();&#125; åœ¨src/resourcesä¸‹æ–°å»ºmybatis-config.xmlæ–‡ä»¶é…ç½®å¦‚ä¸‹ &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt; &lt;environments default=\"development\"&gt; &lt;environment id=\"development\"&gt; &lt;transactionManager type=\"JDBC\"&gt;&lt;/transactionManager&gt; &lt;dataSource type=\"POOLED\"&gt; &lt;property name=\"driver\" value=\"com.mysql.jdbc.Driver\"/&gt; &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatis\"/&gt; &lt;property name=\"username\" value=\"root\"/&gt; &lt;property name=\"password\" value=\"root\"/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;mappers&gt; &lt;mapper resource=\"com/xt/dao/bookDao.xml\"/&gt; &lt;/mappers&gt;&lt;/configuration&gt; mybatis-config.xmlæ˜¯mybatisçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­é…ç½®æ•°æ®æºï¼Œè¿æ¥æ•°æ®åº“çš„é©±åŠ¨ï¼Œè¿æ¥å“ªä¸ªæ•°æ®åº“ï¼Œä»¥åŠç”¨æˆ·å’Œå¯†ç ã€‚ åœ¨src/resourcesä¸‹æ–°å»ºç›®å½•ç»“æ„com/xt/daoï¼Œåœ¨daoæ–‡ä»¶å¤¹ä¸­æ–°å»ºBookDao.xml &lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"com.xt.mapper.BookMapper\"&gt; &lt;select id=\"findAll\" resultType=\"com.xt.entity.Book\"&gt; select * from book &lt;/select&gt;&lt;/mapper&gt; åœ¨test/javaä¸‹æ–°å»ºç±»MyBatisTest import com.xt.mapper.BookDao;import com.xt.entity.Book;import org.apache.ibatis.io.Resources;import org.apache.ibatis.session.SqlSession;import org.apache.ibatis.session.SqlSessionFactory;import org.apache.ibatis.session.SqlSessionFactoryBuilder;import org.junit.Test;import java.io.*;import java.util.List;public class BookMapperTest &#123; @Test public void testFindAll() &#123; SqlSession sqlSession = null; SqlSessionFactory sqlSessionFactory = null; InputStream is = null; try &#123; String resource = \"mybatis-config.xml\"; is = Resources.getResourceAsStream(resource); sqlSessionFactory = new SqlSessionFactoryBuilder().build(is); sqlSession = sqlSessionFactory.openSession(); BookMapper bookMapper = sqlSession.getMapper(BookMapper.class); List&lt;Book&gt; list = bookMapper.findAll(); System.out.println(list); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; is.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; if (sqlSession != null) &#123; sqlSession.close(); &#125; &#125; &#125;&#125; è¾“å‡ºä¸º [Book&#123;id=1, name='Javaç¨‹åºè®¾è®¡', number=10&#125;, Book&#123;id=2, name='æ•°æ®ç»“æ„', number=10&#125;, Book&#123;id=3, name='è®¾è®¡æ¨¡å¼', number=10&#125;] å¦‚æœèƒ½å¤Ÿé¡ºåˆ©è¾“å‡ºä»¥ä¸Šæ•°æ®ï¼Œè¯´æ˜é…ç½®æ²¡æœ‰é—®é¢˜äº†ã€‚ MyBatisçš„CRUDä¿å­˜æ“ä½œåœ¨BookDaoä¸­æ·»åŠ æ–¹æ³•saveBook(Book book) void saveBook(Book book); ç„¶ååœ¨BookDao.xmlä¸­æ·»åŠ ä¸‹é¢çš„è¯­å¥ &lt;insert id=\"saveBook\" parameterType=\"com.xt.entity.Book\"&gt; insert into book(name, number) values (#&#123;Book.name&#125;, #&#123;Book.number&#125;);&lt;/insert&gt; ä¸Šé¢çš„parameterTypeè¯´æ˜è¯¥æ–¹æ³•ä¼ å…¥çš„å‚æ•°ç±»å‹ï¼Œéœ€è¦å†™å…¨ç±»åã€‚æˆ‘ä»¬åœ¨ä¸‹é¢ä¸€è¡Œsqlè¯­å¥ä¸­ä½¿ç”¨äº†ä¼ å…¥Bookå¯¹è±¡çš„å±æ€§ #&#123;Book.name&#125;, #&#123;Book.number&#125; ç”±äºå·²ç»æŒ‡å®šäº†ä¼ å…¥çš„æ˜¯Bookç±»ï¼Œæ‰€ä»¥Book.å¯ä»¥ä¸å†™ï¼Œå³ &lt;insert id=\"saveBook\" parameterType=\"com.xt.entity.Book\"&gt; insert into book(name, number) values (#&#123;name&#125;, #&#123;number&#125;);&lt;/insert&gt; æ¥åœ¨åœ¨test/javaä¸‹çš„æµ‹è¯•ç±»MybatisTest.javaï¼ŒåŠ å…¥ä¸‹é¢çš„ä»£ç  private SqlSession sqlSession;private BookDao bookDao;@Beforepublic void init() throws Exception&#123; SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(Resources.getResourceAsStream(\"mybatis-config.xml\")); sqlSession = sqlSessionFactory.openSession(); bookDao = sqlSession.getMapper(BookDao.class);&#125;@Afterpublic void destroy() &#123; sqlSession.close();&#125;@Testpublic void testSaveBook() &#123; Book book = new Book(); book.setName(\"C++\"); book.setNumber(5); bookDao.saveBook(book);&#125; å¯¹ä»¥ä¸Šçš„ç¨‹åºåšå‡ ç‚¹å£°æ˜ï¼š init()æ·»åŠ äº†@Beforeæ³¨è§£ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•ä¼šåœ¨è¢«@Testæ³¨è§£çš„æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œï¼›destroy()æ·»åŠ äº†@Afteræ³¨è§£ï¼Œè¡¨ç¤ºåœ¨è¢«@Testæ³¨è§£çš„æ–¹æ³•åæ‰§è¡Œ init()ä¸­æ˜¯ä¸€äº›åˆå§‹åŒ–çš„ä»£ç ï¼Œå› ä¸ºSqlSessionå’ŒBookDaoå¯¹è±¡ä¼šåœ¨@Testæ³¨è§£çš„æ–¹æ³•ä¸­ç”¨åˆ°ï¼Œä¸ºäº†ä¸æ¯æ¬¡éƒ½åˆå§‹åŒ–ï¼Œæˆ‘ä»¬æŠŠSqlSessionå’ŒBookDaoæŠ½ç¦»å‡ºæ¥ä½œä¸ºæˆå‘˜å˜é‡ï¼Œç„¶ååœ¨init()æ–¹æ³•ä¸­åˆå§‹åŒ–ï¼›destroy()ä¸­æ˜¯é‡Šæ”¾èµ„æºçš„ä»£ç  åœ¨æ‰§è¡Œå‰æˆ‘ä»¬å…ˆçœ‹æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œä»¥è§‚å¯Ÿè¯¥ä¿å­˜æ“ä½œæ˜¯å¦æ‰§è¡ŒæˆåŠŸ +----+--------------+--------+| ID | name | NUMBER |+----+--------------+--------+| 1 | Javaç¨‹åºè®¾è®¡ | 10 || 2 | æ•°æ®ç»“æ„ | 10 || 3 | è®¾è®¡æ¨¡å¼ | 10 |+----+--------------+--------+ æ‰§è¡Œç¨‹åºä¹‹åï¼Œæ•°æ®åº“ä¸­çš„æ•°æ®ä¸º +----+--------------+--------+| ID | name | NUMBER |+----+--------------+--------+| 1 | Javaç¨‹åºè®¾è®¡ | 10 || 2 | æ•°æ®ç»“æ„ | 10 || 3 | è®¾è®¡æ¨¡å¼ | 10 |+----+--------------+--------+ å‘ç°æ•°æ®åº“ä¸­çš„æ•°æ®å¹¶æ²¡æœ‰å‘ç°æ”¹å˜ï¼Œéš¾é“æ˜¯ç¨‹åºå†™é”™äº†ã€‚å…¶å®æ˜¯å› ä¸ºautocommitè¢«è®¾ç½®ä¸ºfalseäº†ï¼Œæ‰€ä»¥è¿›è¡Œå›æ»šæ“ä½œäº†ï¼Œæˆ‘ä»¬åœ¨destroyä¸­åŠ å…¥ä¸‹é¢çš„è¯­å¥ @Afterpublic void destroy() &#123; sqlSession.commit(); sqlSession.close();&#125; å†æ¬¡æ‰§è¡Œç¨‹åºè§‚å¯Ÿæ•°æ®åº“ä¸­çš„æ•°æ® +----+--------------+--------+| ID | name | NUMBER |+----+--------------+--------+| 1 | Javaç¨‹åºè®¾è®¡ | 10 || 2 | æ•°æ®ç»“æ„ | 10 || 3 | è®¾è®¡æ¨¡å¼ | 10 || 5 | C++ | 5 |+----+--------------+--------+ æˆ‘ä»¬ä¿å­˜å¯¹è±¡æ—¶å¹¶æ²¡æœ‰è®¾ç½®idçš„å€¼ï¼Œå› ä¸ºidæ˜¯è‡ªå¢é•¿çš„ã€‚å¦‚æœæˆ‘ä»¬åœ¨ä¿å­˜æ•°æ®åå¸Œæœ›è·å¾—è‡ªå¢é•¿çš„idå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹BookDao.xmlä¸º &lt;insert id=\"saveBook\" parameterType=\"com.xt.entity.Book\"&gt; &lt;selectKey keyProperty=\"id\" keyColumn=\"id\" resultType=\"int\" order=\"AFTER\"&gt; select last_insert_id(); &lt;/selectKey&gt; insert into book(name, number) values (#&#123;name&#125;, #&#123;number&#125;);&lt;/insert&gt; æ¥ç€ä¿®æ”¹æµ‹è¯•ç±»ä¸­çš„æ–¹æ³• @Testpublic void testSaveBook() &#123; Book book = new Book(); book.setName(\"C++\"); book.setNumber(5); System.out.println(\"æ›´æ–°å‰çš„Bookå¯¹è±¡\"); System.out.println(book); bookDao.saveBook(book); System.out.println(\"æ›´æ–°åçš„Bookå¯¹è±¡\"); System.out.println(book);&#125; è¿è¡Œç»“æœä¸º æ›´æ–°å‰çš„Bookå¯¹è±¡Book&#123;id=null, name='C++', number=5&#125;æ›´æ–°åçš„Bookå¯¹è±¡Book&#123;id=6, name='C++', number=5&#125; å¯è§å·²ç»è·å¾—äº†è‡ªå¢é•¿çš„idã€‚ æ›´æ–°æ“ä½œåœ¨BookDaoä¸­æ·»åŠ updateBook(Book book)æ–¹æ³• void updateBook(Book book); ç„¶ååœ¨BookDao.xmlä¸­æ·»åŠ å¦‚ä¸‹ &lt;update id=\"updateBook\" parameterType=\"com.xt.entity.Book\"&gt; update book set name = #&#123;name&#125;, number = #&#123;number&#125; where id = #&#123;id&#125;;&lt;/update&gt; ç°åœ¨åœ¨æµ‹è¯•ç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³• @Testpublic void testUpdateBook() &#123; Book book = new Book(); book.setId(5); book.setName(\"PHP\"); book.setNumber(20); bookDao.updateBook(book);&#125; æ‰§è¡Œå¹¶è§‚å¯Ÿæ•°æ®åº“ä¸­çš„æ•°æ® +----+--------------+--------+| ID | name | NUMBER |+----+--------------+--------+| 1 | Javaç¨‹åºè®¾è®¡ | 10 || 2 | æ•°æ®ç»“æ„ | 10 || 3 | è®¾è®¡æ¨¡å¼ | 10 || 5 | PHP | 20 |+----+--------------+--------+ åˆ é™¤æ“ä½œåœ¨BookDaoä¸­æ·»åŠ deleteBook(Integer id)æ–¹æ³• void deleteBook(Integer id); åœ¨BookDao.xmlä¸­æ·»åŠ å¦‚ä¸‹ &lt;delete id=\"deleteBook\" parameterType=\"int\"&gt; delete from book where id = #&#123;id&#125;;&lt;/delete&gt; è¿™é‡Œçš„parameterTypeå†™ä¸ºäº†intï¼Œå…¶å®è¿™é‡Œå¯ä»¥å†™ä¸ºINT,integer,Integerå‡å¯ï¼Œåœ¨sqlè¯­å¥ä¸­ä½¿ç”¨äº†#{id}ï¼Œå…¶å®è¿™é‡Œå¯ä»¥éšä¾¿å†™ï¼Œå¦‚#{uid},#{bookId}ï¼Œå› ä¸ºåªä¼ å…¥ä¸€ä¸ªå€¼ï¼Œä¸ç®¡å†™ä»€ä¹ˆéƒ½ä¼šè¢«è®¤ä¸ºæ˜¯è¿™ä¸ªä¼ å…¥çš„å€¼ã€‚ç°åœ¨åœ¨æµ‹è¯•ç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³• @Testpublic void testDeleteBook() &#123; bookDao.deleteBook(5);&#125; æ‰§è¡Œå¹¶ä¸”æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ•°æ®å¦‚ä¸‹ +----+--------------+--------+| ID | name | NUMBER |+----+--------------+--------+| 1 | Javaç¨‹åºè®¾è®¡ | 10 || 2 | æ•°æ®ç»“æ„ | 10 || 3 | è®¾è®¡æ¨¡å¼ | 10 |+----+--------------+--------+ æŸ¥è¯¢æ“ä½œæŸ¥è¯¢ä¸€ä¸ªåœ¨BookDaoä¸­æ·»åŠ findById(Integer id)æ–¹æ³• Book findById(Integer id); åœ¨BookDao.xmlä¸­æ·»åŠ å¦‚ä¸‹ &lt;select id=\"findById\" parameterType=\"int\" resultType=\"com.xt.entity.Book\"&gt; select * from book where id = #&#123;id&#125;;&lt;/select&gt; ä¸Šé¢çš„resultTypeå£°æ˜äº†è¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ¥ä¸‹æ¥åœ¨æµ‹è¯•äº†ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³• @Testpublic void testFindById() &#123; Book book = bookDao.findById(1); System.out.println(book);&#125; è¾“å‡ºç»“æœä¸º Book&#123;id=1, name='Javaç¨‹åºè®¾è®¡', number=10&#125; æ¨¡ç³ŠæŸ¥è¯¢åœ¨BookDaoä¸­æ·»åŠ findByName(String name)æ–¹æ³• List&lt;Book&gt; findByName(String name); åœ¨BookDao.xmlä¸­æ·»åŠ å¦‚ä¸‹ &lt;select id=\"findByName\" parameterType=\"string\" resultType=\"com.xt.entity.Book\"&gt; select * from book where name like #&#123;name&#125;&lt;/select&gt; æ¥ä¸‹æ¥åœ¨æµ‹è¯•äº†ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³• @Testpublic void testFindByName() &#123; List&lt;Book&gt; list = bookDao.findByName(\"%è®¾è®¡%\"); for(Book book:list) &#123; System.out.println(book); &#125;&#125; è¾“å‡ºä¸º Book&#123;id=1, name='Javaç¨‹åºè®¾è®¡', number=10&#125;Book&#123;id=3, name='è®¾è®¡æ¨¡å¼', number=10&#125; å½“åˆæˆ‘åœ¨ä½¿ç”¨ä¸­æ–‡æ¨¡ç³ŠæŸ¥è¯¢æ—¶æŸ¥è¯¢ä¸å‡ºæ¥ï¼Œä½¿ç”¨è‹±æ–‡å¯ä»¥ï¼Œå»ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œè§£å†³åŠæ³•æ˜¯æ˜¯åœ¨my.iniæ–‡ä»¶çš„æœ€ååŠ ä¸Š character-set-server = utf8 collation-server = utf8_general_ci ç„¶åé‡å¯mysqlæœåŠ¡å™¨ã€‚å…·ä½“å¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æ¥ä¸­æ–‡æ¨¡ç³ŠæŸ¥è¯¢ã€‚ æŸ¥è¯¢ä¸€ä¸ªå€¼æ¯”å¦‚æˆ‘æƒ³æŸ¥è¯¢æ•°æ®åº“ä¸­æœ‰å¤šå°‘æ¡æ•°æ®ï¼Œåœ¨BookDaoä¸­æ·»åŠ findTotal()æ–¹æ³• int findTotal(); åœ¨BookDao.xmlä¸­æ·»åŠ å¦‚ä¸‹ &lt;select id=\"findTotal\" resultType=\"int\"&gt; select count(id) from book;&lt;/select&gt; æ¥ä¸‹æ¥åœ¨æµ‹è¯•äº†ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³• @Testpublic void testFindTotal() &#123; int numbers = bookDao.findTotal(); System.out.println(numbers);&#125; è¾“å‡ºä¸º 3 resultMapä¸Šé¢æˆ‘ä»¬è¦æ±‚å®ä½“ç±»Bookçš„å±æ€§è¦ä¸æ•°æ®åº“ä¸­ç±»çš„åˆ—åç›¸åŒï¼Œå¦‚æœåˆ—åä¸åŒå‘¢? æˆ‘ä»¬ä¿®æ”¹Bookçš„å®ä½“ç±» package com.xt.entity;import java.io.Serializable;public class Book implements Serializable &#123; private Integer bookId; private String bookName; private int bookNumber; //çœç•¥getterå’Œsetterä»¥åŠtoStringæ–¹æ³•&#125; ç°åœ¨ä¿®æ”¹æµ‹è¯•ç±»ä¸­çš„Setxxxæ–¹æ³•ï¼Œä»¥åŠBookDao.xmlä¸­çš„#{Xxx}ï¼Œå¦‚ä¿®æ”¹#{name}ä¸º#{bookName}ï¼Œæ¥ç€è¿è¡ŒfindAllçš„æµ‹è¯•æ–¹æ³•ï¼Œå¾—åˆ° nullnullnullnull å¯è§æ•°æ®æ²¡æœ‰å°è£…ã€‚è¿™ä¸ªæ—¶å€™æœ‰ä¸¤ç§è§£å†³åŠæ³• èµ·åˆ«å resultMap å…ˆä»‹ç»èµ·åˆ«åï¼Œæˆ‘ä»¬ä¿®æ”¹findAllçš„sqlè¯­å¥ä¸º &lt;select id=\"findAll\" resultType=\"com.xt.entity.Book\"&gt; select id bookId, name bookName, number bookNumber from book&lt;/select&gt; æ¥ç€è¿è¡ŒfindAllçš„æµ‹è¯•æ–¹æ³•ï¼Œç»“æœä¸º Book&#123;bookId=1, bookName='Javaç¨‹åºè®¾è®¡', bookNumber=10&#125;Book&#123;bookId=2, bookName='æ•°æ®ç»“æ„', bookNumber=10&#125;Book&#123;bookId=3, bookName='è®¾è®¡æ¨¡å¼', bookNumber=10&#125;Book&#123;bookId=6, bookName='C++', bookNumber=5&#125; å¯è§æ•°æ®å°è£…å¥½äº†ã€‚è¿™ç§æ–¹æ³•æ‰§è¡Œæ•ˆç‡å¾ˆé«˜ï¼Œä½†æ˜¯æ‰€æœ‰çš„selectè¯­å¥éƒ½éœ€è¦èµ·åˆ«åï¼Œè¿™é‡Œä»‹ç»resultMapï¼Œåªè¦å°†å®ä½“ç±»çš„å±æ€§åä¸æ•°æ®åº“åˆ—åå¯¹åº”å¥½ï¼Œä¸‹é¢åªéœ€è¦å¼•ç”¨å³å¯ï¼Œåªéœ€è¦å†™ä¸€æ¬¡ï¼Œåœ¨ &lt;mapper namespace=\"com.xt.dao.BookDao\"&gt; &lt;!--idæ˜¯resultMapå”¯ä¸€æ ‡è¯†ï¼Œæ–¹ä¾¿ä¸‹é¢å¼•ç”¨ typeæ˜¯è¦å¯¹åº”çš„å®ä½“ç±»åç§°--&gt; &lt;resultMap id=\"bookMap\" type=\"com.xt.entity.Book\"&gt; &lt;!--ä¸»é”®çš„å¯¹åº”è§„åˆ™ propertyæ˜¯å®ä½“ç±»çš„å±æ€§å columnæ˜¯æ•°æ®åº“çš„åˆ—å--&gt; &lt;id property=\"bookId\" column=\"id\"&gt;&lt;/id&gt; &lt;result property=\"bookName\" column=\"name\"&gt;&lt;/result&gt; &lt;result property=\"bookNumber\" column=\"number\"&gt;&lt;/result&gt; &lt;/resultMap&gt; &lt;!--è¿™é‡Œå°±ä¸éœ€è¦äº›resultTypeäº†ï¼Œç›´æ¥å¼•ç”¨ä¸Šé¢å†™çš„resultMap ä¸‹é¢åŒç†--&gt; &lt;select id=\"findAll\" resultMap=\"bookMap\"&gt; select * from book &lt;/select&gt; &lt;select id=\"findById\" parameterType=\"int\" resultMap=\"bookMap\"&gt; select * from book where id = #&#123;id&#125;; &lt;/select&gt; &lt;select id=\"findByName\" parameterType=\"string\" resultMap=\"bookMap\"&gt; select * from book where name like #&#123;bookName&#125; &lt;/select&gt; ... ...&lt;/mapper&gt; å†æ¬¡è¿è¡ŒfindAllçš„æµ‹è¯•æ–¹æ³•ï¼Œè¾“å‡ºä¸º Book&#123;bookId=1, bookName='Javaç¨‹åºè®¾è®¡', bookNumber=10&#125;Book&#123;bookId=2, bookName='æ•°æ®ç»“æ„', bookNumber=10&#125;Book&#123;bookId=3, bookName='è®¾è®¡æ¨¡å¼', bookNumber=10&#125;Book&#123;bookId=6, bookName='C++', bookNumber=5&#125; åŠ¨æ€SQLæ‰€è°“çš„åŠ¨æ€SQLæŒ‡çš„æ˜¯SQLè¯­å¥ä¸æ˜¯ä¸å˜çš„ï¼Œæ¯”å¦‚æ ¹æ®æ˜¯å¦ä¼ å…¥ageä»¥å†³å®šæ˜¯å¦åŠ å…¥ageéªŒè¯é¡¹ï¼Œä¸‹é¢ä»‹ç»ä¸‰ç§åŠ¨æ€SQLã€‚ åŠ å…¥æœ‰ä¸‹é¢Userè¡¨ +-----------+------+| user_name | age |+-----------+------+| å¼ ä¸‰ | 18 || æå›› | 19 |+-----------+------+ å®ä½“ç±»ä»¥åŠUserDaoæ¥å£å°±ä¸æ¼”ç¤ºäº†ã€‚ ifé¦–å…ˆåœ¨UserDaoä¸­åˆ›å»ºä¸‹é¢çš„æ–¹æ³• List&lt;User&gt; findByCondition(User user); è¯¥æ–¹æ³•æ ¹æ®ä¼ å…¥çš„Userå¯¹è±¡å»æŸ¥è¯¢ï¼Œä¸»è¦æ˜¯æ ¹æ®è¯¥Userå¯¹è±¡æ‰€åŒ…å«çš„userNameå’Œageå»æŸ¥è¯¢ï¼Œä½†æ˜¯è¿™ä¸ªUserå¯¹è±¡ä¸ä¸€å®šè®¾ç½®äº†è¿™ä¸¤ä¸ªå±æ€§ï¼Œå¦‚ User user = new User();user.setAge(18);userDao.findByCondition(user); ä¸Šé¢çš„Javaä»£ç åªè®¾ç½®äº†ageçš„å€¼ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬åœ¨userDao.xmlä¸­çš„selectè¯­å¥ä¸èƒ½å†™æˆè¿™æ · select user_name userName, age from user where user_name = #&#123;userName&#125; and age = #&#123;age&#125; å‡è®¾å¦‚æœuserNameæ²¡æœ‰è®¾ç½®çš„è¯ï¼Œé‚£ä¹ˆwhereåé¢çš„ç»“æœæ°¸è¿œæ˜¯falseï¼Œæ„å‘³ç€æŸ¥ä¸åˆ°ç»“æœï¼Œè€Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œå¦‚æœå­˜åœ¨ä»€ä¹ˆï¼Œåˆ™æ ¹æ®ä»€ä¹ˆæ˜¯æŸ¥ï¼Œæ¯”å¦‚å¦‚æœä¸å­˜åœ¨userNameï¼Œå­˜åœ¨ageï¼Œåˆ™ç›¸åº”çš„SQLè¯­å¥åº”è¯¥æ˜¯ select user_name userName, age from user where age = #&#123;age&#125; å¦‚æœå­˜åœ¨userNameè€Œä¸å­˜åœ¨ageï¼Œåˆ™åªæ ¹æ®userNameæŸ¥ï¼Œå¦‚æœéƒ½ä¸å­˜åœ¨ï¼Œåˆ™å¾—åˆ°æ‰€æœ‰çš„Userï¼Œå³ select user_name userName, age from user è¿™ä¸ªæ—¶å€™ä»…ä»…é æˆ‘ä»¬ä¸Šé¢çš„æ‰‹æ®µæ˜¯å¾—ä¸åˆ°çš„ï¼Œå› ä¸ºè¿™æ—¶çš„SQLè¯­å¥æ˜¯åŠ¨æ€çš„ã€‚æ˜æ˜¾ï¼Œæˆ‘ä»¬éœ€è¦å¯¹userNameå’Œageè¿›è¡Œåˆ¤æ–­ï¼Œä»¥å†³å®šæ˜¯å¦åŠ å…¥åˆ°SQLè¯­å¥ä¸­ï¼Œè€Œåˆ¤æ–­ä½¿ç”¨çš„å°±æ˜¯ifã€‚æ»¡è¶³ä¸Šé¢è¦æ±‚çš„SQLè¯­å¥å¦‚ä¸‹ &lt;select id=\"findByCondition\" parameterType=\"com.xt.domain.User\" resultType=\"com.xt.domain.User\"&gt; select user_name userName, age from user where 1 = 1 &lt;if test=\"userName != null\"&gt; and user_name = #&#123;userName&#125; &lt;/if&gt; &lt;if test=\"age != null\"&gt; and age = #&#123;age&#125; &lt;/if&gt;&lt;/select&gt; ä¸Šé¢çš„ifæ ‡ç­¾å°±æ˜¯å¯¹Userå¯¹è±¡ä¸­çš„å±æ€§è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­è¯­å¥è¦å†™åœ¨ifæ ‡ç­¾çš„testå±æ€§ä¸­ï¼Œå¦‚æœä¸ºçœŸï¼Œåˆ™ifæ ‡ç­¾åŒ…å«çš„å†…å®¹åˆ™ä¼šæ·»åŠ åˆ°SQLè¯­å¥åï¼Œå¦åˆ™ä¸ä¼šæ·»åŠ ã€‚ whereå¤§å®¶æ³¨æ„ä¸Šé¢çš„SQLè¯­å¥ä¸­æœ‰ where 1 = 1 é‚£ä¹ˆä¸ºä»€ä¹ˆè¦åŠ ä¸Š1 = 1å‘¢? å‡è®¾å¦‚æœä¸åŠ 1 = 1ï¼Œå¹¶ä¸”ä¼ è¿‡æ¥çš„Userå¯¹è±¡çš„userNameå’Œageéƒ½ä¸ºnullï¼Œé‚£ä¹ˆæœ€åçš„SQLè¯­å¥æ˜¯ä»€ä¹ˆæ ·å­? select user_name userName, age from user where è¿™æ˜æ˜¾æ˜¯ä¸€ä¸ªé”™è¯¯çš„SQLè¯­å¥ï¼Œä½†æ˜¯å¦‚æœåŠ ä¸Š1 = 1ï¼Œå³ä½¿userNameå’Œageéƒ½ä¸ºnullï¼ŒSQLä¹Ÿæ˜¯æ­£ç¡®çš„SQLè¯­å¥ select user_name userName, age from user where 1 = 1 ä½†æ˜¯è¿™æ ·æœªå…æœ‰ç‚¹hackçš„æ„å‘³ï¼Œåƒæ˜¯ä¸€ç§å¥‡æ·«æŠ€å·§ï¼Œé‚£mybatisæœ‰æ²¡æœ‰æä¾›æ¯”è¾ƒå¥½çš„å†™æ³•ï¼Œç­”æ¡ˆå°±æ˜¯whereæ ‡ç­¾äº†ï¼Œç°åœ¨æˆ‘ä»¬å°†ä¸Šé¢çš„sqlè¯­å¥æ”¹ä¸º select user_name userName, age from user&lt;where&gt; &lt;if test=\"userName != null\"&gt; and user_name = #&#123;userName&#125; &lt;/if&gt; &lt;if test=\"age != null\"&gt; and age = #&#123;age&#125; &lt;/if&gt;&lt;/where&gt; æˆ‘ä»¬å°†æ‰€æœ‰çš„ifæ ‡ç­¾éƒ½æ”¾åˆ°äº†whereæ ‡ç­¾é‡Œé¢ï¼Œå¦‚æœæ‰€æœ‰çš„iféƒ½ä¸æ»¡è¶³çš„è¯ï¼Œé‚£ä¹ˆåœ¨SQLè¯­å¥ä¸­å°±ä¸ä¼šå‡ºç°whereï¼Œå¦‚æœifè‡³å°‘æœ‰ä¸€ä¸ªæˆç«‹çš„è¯ï¼Œåˆ™ä¼šå»æ‰ç¬¬ä¸€ä¸ªæˆç«‹ifæ ‡ç­¾ä¸­åŒ…å«çš„andã€‚å‡è®¾è¯¥Userå¯¹è±¡åŒ…å«userNameä¸åŒ…å«ageï¼Œåˆ™æœ€åçš„SQLè¯­å¥æ˜¯ select user_name userName, age from user where user_name = #&#123;userName&#125; forEachç°åœ¨æœ‰ä¸€ç§çš„æ–°çš„æƒ…å†µï¼Œå¦‚æœä¼ è¿‡æ¥çš„å‚æ•°æ˜¯ä¸€ä¸ªé›†åˆæˆ–è€…æ•°ç»„ï¼Œé‚£æ€ä¹ˆå¤„ç†å‘¢? åœ¨UserDaoæ¥å£ä¸­æ·»åŠ ä¸‹é¢çš„æ–¹æ³• List&lt;User&gt; findByAges(List&lt;Integer&gt; ages); è¯¥æ–¹æ³•ä¼šæ¥æ”¶ä¸€ä¸ªListé›†åˆï¼Œæˆ‘ä»¬çš„è¦æ±‚æ˜¯å»æŸ¥è¯¢ç”¨æˆ·å¹´é¾„åœ¨agesé›†åˆä¸­çš„ç”¨æˆ·ï¼Œç›¸åº”çš„SQLè¯­å¥å¦‚ä¸‹ &lt;select id=\"findByAges\" resultType=\"com.xt.domain.User\" parameterType=\"java.util.List\"&gt; select user_name userName, age from user &lt;where&gt; &lt;if test=\"list != null\"&gt; &lt;foreach collection=\"list\" item=\"age\" open=\"and age in(\" close=\")\" separator=\",\"&gt; #&#123;age&#125; &lt;/foreach&gt; &lt;/if&gt; &lt;/where&gt;&lt;/select&gt; ä¸Šé¢çš„whereå’Œifæ ‡ç­¾æƒ³å¿…ä¸ç”¨å†è§£é‡Šäº†ï¼Œé‡ç‚¹æ˜¯forEachæ ‡ç­¾ã€‚forEachçš„ä½œç”¨å°±æ˜¯éå†é›†åˆåˆ›å»ºä¸€ä¸ªSQLè¯­å¥ã€‚forEachä¸­çš„collectionæ ‡ç­¾çš„å€¼å°±æ˜¯ä¼ è¿‡æ¥çš„listé›†åˆï¼Œitemå°±æ˜¯é›†åˆä¸­çš„å…ƒç´ ï¼ŒforEachä¼šéå†è¯¥é›†åˆæ‹¿åˆ°è¿™äº›itemï¼Œopenæ˜¯æŒ‡åˆ›å»ºçš„SQLè¯­å¥ä»¥ä»€ä¹ˆå¼€å¤´ï¼Œcloseæ˜¯ä»¥ä»€ä¹ˆç»“å°¾ï¼Œè€Œseparatoræ˜¯æŒ‡åˆ†éš”ç¬¦æ˜¯ä»€ä¹ˆï¼Œè€ŒforEachä¸­åŒ…å«çš„å†…å®¹å³æ˜¯åˆ†éš”ç¬¦åˆ†éš”çš„ä¸€ä¸ªä¸ªå…ƒç´ ã€‚æ‰€ä»¥å‡è®¾ä¼ æ¥è¿™ä¹ˆä¸€ä¸ªList List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();list.append(15);list.append(18); é‚£ä¹ˆä¸Šé¢çš„SQLè¯­å¥æœ€åä¼šè¢«ç”Ÿæˆä¸º select user_name userName, age from user where age in (15, 18) sqlç‰‡æ®µåœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬å‘ç°ä¸Šé¢çš„SQLè¯­å¥éƒ½åŒ…å«è¿™ä¹ˆä¸€æ¡SQLè¯­å¥ select user_name userName, age from user æ—¢ç„¶è¿™æ˜¯é‡å¤çš„å†…å®¹ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥å°†å…¶æŠ½ç¦»å‡ºæ¥æˆä¸€ä¸ªSQLç‰‡æ®µï¼Œç„¶ååœ¨SQLè¯­å¥ä¸­å¼•ç”¨è¯¥ç‰‡æ®µï¼Œåœ¨userDao.xmlä¸­çš„mapperæ ‡ç­¾ä¸‹ï¼Œæˆ‘ä»¬åŠ å…¥ä»¥ä¸‹å†…å®¹ &lt;sql id=\"default\"&gt; select user_name userName, age from user&lt;/sql&gt; ä¸Šé¢çš„idåå¯ä»¥ä»»æ„çš„å–ï¼Œè¿™é‡Œçš„idæ˜¯ä¸ºäº†åœ¨åé¢å¼•ç”¨è¯¥SQLç‰‡æ®µã€‚æ¥ä¸‹æ¥å°†æ‰€æœ‰selectä¸­çš„ select user_name userName, age from user æ›¿æ¢ä¸º &lt;include refid=\"default\"&gt;&lt;/include&gt; å¦‚ &lt;select id=\"findByAges\" resultType=\"com.xt.domain.User\" parameterType=\"java.util.List\"&gt; &lt;include refid=\"selectAll\"&gt;&lt;/include&gt; &lt;where&gt; &lt;if test=\"list != null\"&gt; &lt;foreach collection=\"list\" item=\"age\" open=\"and age in(\" close=\")\" separator=\",\"&gt; #&#123;age&#125; &lt;/foreach&gt; &lt;/if&gt; &lt;/where&gt;&lt;/select&gt; å¤šè¡¨æŸ¥è¯¢ä¸€å¯¹å¤šä¸å¤šå¯¹ä¸€å‡è®¾æœ‰ä¸¤å¼ è¡¨ï¼Œç”¨æˆ·è¡¨å’Œè´¦æˆ·è¡¨ï¼ŒäºŒè€…ä¹‹é—´çš„å…³ç³»ä¸º ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè´¦æˆ· ä¸€ä¸ªè´¦æˆ·å¯¹åº”ä¸€ä¸ªç”¨æˆ· ç°åœ¨æˆ‘ä»¬çš„éœ€æ±‚çš„æ˜¯å½“æˆ‘ä»¬æŸ¥è¯¢ç”¨æˆ·æ—¶ï¼ŒåŒæ—¶æŸ¥è¯¢å®ƒæ‰€åŒ…å«çš„æ‰€æœ‰è´¦æˆ·ï¼Œå½“æˆ‘ä»¬æŸ¥è¯¢è´¦æˆ·æ—¶ï¼ŒåŒæ—¶æŸ¥è¯¢å®ƒæ‰€å¯¹åº”çš„ç”¨æˆ·ã€‚ ç°åœ¨åˆ›å»ºä¸¤å¼ è¡¨userå’Œaccountã€‚ DROP TABLE IF EXISTS `user`;CREATE TABLE `user` ( `id` int(11) NOT NULL auto_increment, `username` varchar(32) NOT NULL COMMENT 'ç”¨æˆ·åç§°', `birthday` datetime default NULL COMMENT 'ç”Ÿæ—¥', `sex` char(1) default NULL COMMENT 'æ€§åˆ«', `address` varchar(256) default NULL COMMENT 'åœ°å€', PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;insert into `user`(`id`,`username`,`birthday`,`sex`,`address`) values (41,'è€ç‹','2018-02-27 17:47:08','ç”·','åŒ—äº¬'), (42,'å°ç‹','2018-03-02 15:09:37','å¥³','åŒ—äº¬é‡‘ç‡•é¾™'), (45,'å¼ ä¸‰','2018-03-07 17:37:26','ç”·','åŒ—äº¬'),(46,'è¶…çº§ç›ä¸½','2018-03-08 11:44:00','å¥³','åŒ—äº¬ä¿®æ­£');DROP TABLE IF EXISTS `account`;CREATE TABLE `account` ( `ID` int(11) NOT NULL COMMENT 'ç¼–å·', `UID` int(11) default NULL COMMENT 'ç”¨æˆ·ç¼–å·', `MONEY` double default NULL COMMENT 'é‡‘é¢', PRIMARY KEY (`ID`), KEY `FK_Reference_8` (`UID`), CONSTRAINT `FK_Reference_8` FOREIGN KEY (`UID`) REFERENCES `user` (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;insert into `account`(`ID`,`UID`,`MONEY`) values (1,46,1000),(2,45,1000),(3,46,2000); ç°åœ¨è¿™ä¸¤å¼ è¡¨çš„å†…å®¹ä¸º # user+----+----------+---------------------+------+------------+| id | username | birthday | sex | address |+----+----------+---------------------+------+------------+| 41 | è€ç‹ | 2018-02-27 17:47:08 | ç”· | åŒ—äº¬ || 42 | å°ç‹ | 2018-03-02 15:09:37 | å¥³ | åŒ—äº¬é‡‘ç‡•é¾™ || 45 | å¼ ä¸‰ | 2018-03-07 17:37:26 | ç”· | åŒ—äº¬ || 46 | è¶…çº§ç›ä¸½ | 2018-03-08 11:44:00 | å¥³ | åŒ—äº¬ä¿®æ­£ |+----+----------+---------------------+------+------------+# account+----+------+-------+| ID | UID | MONEY |+----+------+-------+| 1 | 46 | 1000 || 2 | 45 | 1000 || 3 | 46 | 2000 |+----+------+-------+ ç°åœ¨åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»ä»¥åŠå¯¹åº”çš„æ¥å£ä»¥åŠç›¸åº”çš„xmlæ–‡ä»¶ã€‚äºŒè€…çš„å®ä½“ç±»å¦‚ä¸‹ package entity;import java.util.Date;import java.util.List;public class User &#123; private Integer id; private String name; private String sex; private Date birthday; private String address; private List&lt;Account&gt; accounts; public List&lt;Account&gt; getAccounts() &#123; return accounts; &#125; public void setAccounts(List&lt;Account&gt; accounts) &#123; this.accounts = accounts; &#125; public Integer getId() &#123; return id; &#125; public void setId(Integer id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public String getSex() &#123; return sex; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125; public Date getBirthday() &#123; return birthday; &#125; public void setBirthday(Date birthday) &#123; this.birthday = birthday; &#125; public String getAddress() &#123; return address; &#125; public void setAddress(String address) &#123; this.address = address; &#125; @Override public String toString() &#123; return \"User&#123;\" + \"id=\" + id + \", name='\" + name + '\\'' + \", sex='\" + sex + '\\'' + \", birthday=\" + birthday + \", address='\" + address + '\\'' + \", accounts=\" + accounts + '&#125;'; &#125;&#125; package entity;public class Account &#123; private Integer id; private Integer uid; private Double money; private User user; public User getUser() &#123; return user; &#125; public void setUser(User user) &#123; this.user = user; &#125; public Integer getId() &#123; return id; &#125; public void setId(Integer id) &#123; this.id = id; &#125; public Integer getUid() &#123; return uid; &#125; public void setUid(Integer uid) &#123; this.uid = uid; &#125; public Double getMoney() &#123; return money; &#125; public void setMoney(Double money) &#123; this.money = money; &#125; @Override public String toString() &#123; return \"Account&#123;\" + \"id=\" + id + \", uid=\" + uid + \", money=\" + money + \", user=\" + user + '&#125;'; &#125;&#125; ä»”ç»†æ³¨æ„è¿™ä¸¤ä¸ªå®ä½“ç±»ï¼Œå‘ç°åœ¨Userå®ä½“ç±»ä¸­æœ‰ä¸€ä¸ªAccountçš„Liståˆ—è¡¨ï¼Œå› ä¸ºä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè´¦æˆ·ã€‚è€Œåœ¨Accountä¸­æœ‰ä¸€ä¸ªUserå¯¹è±¡ï¼Œå› ä¸ºä¸€ä¸ªè´¦æˆ·å¯¹åº”ä¸€ä¸ªç”¨æˆ·ã€‚ ç°åœ¨æˆ‘ä»¬æ¥å®ç°ç¬¬ä¸€ä¸ªéœ€æ±‚ï¼Œå½“æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·æ—¶ï¼ŒåŒæ—¶æ˜¾ç¤ºæ¯ä¸ªç”¨æˆ·ä¸‹çš„æ‰€æœ‰è´¦æˆ·ä¿¡æ¯ï¼Œåœ¨UserDaoä¸­åŠ å…¥ä¸‹é¢çš„æ–¹æ³• List&lt;User&gt; findAllUsers(); ä¸‹é¢åœ¨userDao.xmlä¸­åŠ å…¥ä¸‹é¢çš„æŸ¥è¯¢è¯­å¥ &lt;mapper namespace=\"dao.UserDao\"&gt; &lt;resultMap id=\"users\" type=\"entity.User\"&gt; &lt;id column=\"id\" property=\"id\"&gt;&lt;/id&gt; &lt;result column=\"username\" property=\"userName\"&gt;&lt;/result&gt; &lt;result column=\"sex\" property=\"sex\"&gt;&lt;/result&gt; &lt;result column=\"birthday\" property=\"birthday\"&gt;&lt;/result&gt; &lt;result column=\"address\" property=\"address\"&gt;&lt;/result&gt; &lt;collection property=\"accounts\" ofType=\"entity.Account\"&gt; &lt;id column=\"aid\" property=\"id\"&gt;&lt;/id&gt; &lt;result column=\"uid\" property=\"uid\"&gt;&lt;/result&gt; &lt;result column=\"money\" property=\"money\"&gt;&lt;/result&gt; &lt;/collection&gt; &lt;/resultMap&gt; &lt;select id=\"findAllUsers\" resultMap=\"users\"&gt; select user.*, account.id aid, account.uid, account.money from user, account where user.id = account.uid &lt;/select&gt;&lt;/mapper&gt; ç”±äºUserä¸­åŒ…å«ä¸€ä¸ªAccountç±»å‹çš„Listï¼Œæ‰€ä»¥è¦è®¾ç½®è¿™ä¸ªListçš„å¯¹åº”è§„åˆ™ï¼Œæ­£æ˜¯ä¸Šé¢collectionæ ‡ç­¾çš„éƒ¨åˆ†ï¼Œpropertyæ˜¯Userä¸­Listå¯¹è±¡çš„åç§°ï¼ŒofTypeæ˜¯Listé›†åˆçš„ç±»å‹ã€‚collectionåŒ…å«çš„éƒ¨åˆ†å°±æ˜¯Listå…ƒç´ å¯¹åº”çš„è§„åˆ™ã€‚ ç°åœ¨å®ç°ç¬¬äºŒä¸ªéœ€æ±‚ï¼Œå½“æŸ¥è¯¢è´¦æˆ·æ—¶ï¼ŒåŒæ—¶æŸ¥è¯¢å‡ºå¯¹åº”çš„Userä¿¡æ¯ï¼Œåœ¨AccountDaoä¸­æ·»åŠ ä¸‹é¢çš„æ–¹æ³• List&lt;Account&gt; findAllAccounts(); åœ¨accountDao.xmlæ·»åŠ å†…å®¹å¦‚ä¸‹ &lt;mapper namespace=\"dao.AccountDao\"&gt; &lt;resultMap id=\"accounts\" type=\"entity.Account\"&gt; &lt;id property=\"id\" column=\"aid\"&gt;&lt;/id&gt; &lt;result property=\"uid\" column=\"uid\"&gt;&lt;/result&gt; &lt;result property=\"money\" column=\"money\"&gt;&lt;/result&gt; &lt;association property=\"user\" javaType=\"entity.User\"&gt; &lt;id property=\"id\" column=\"id\"&gt;&lt;/id&gt; &lt;result property=\"userName\" column=\"username\"&gt;&lt;/result&gt; &lt;result property=\"sex\" column=\"sex\"&gt;&lt;/result&gt; &lt;result property=\"birthday\" column=\"birthday\"&gt;&lt;/result&gt; &lt;result property=\"address\" column=\"address\"&gt;&lt;/result&gt; &lt;/association&gt; &lt;/resultMap&gt; &lt;select id=\"findAllAccounts\" resultMap=\"accounts\"&gt; select user.*, account.id aid, account.uid, account.money from account left join user on user.id = account.uid &lt;/select&gt;&lt;/mapper&gt; åœ¨Accountä¸­æœ‰ä¸€ä¸ªUserå¯¹è±¡ï¼Œæˆ‘ä»¬è¦è®¾ç½®è¿™ä¸ªçš„å¯¹åº”è§„åˆ™ï¼Œä½¿ç”¨çš„å°±æ˜¯associationï¼Œpropertyå°±æ˜¯Accountä¸­Userå¯¹è±¡çš„åç§°ï¼ŒjavaTypeæ˜¯æŒ‡å¯¹åº”çš„å®ä½“ç±»ã€‚ å¤šå¯¹å¤šå…¶å®å¤šå¯¹å¤šæŸ¥è¯¢ä¸ä¸€å¯¹å¤šçš„æŸ¥è¯¢æ˜¯ä¸€æ ·çš„ï¼Œä¸Šè¿°æˆ‘ä»¬åœ¨Userç±»ä¸­æ·»åŠ äº†ä¸€ä¸ªç±»å‹ä¸ºAccountçš„Listé›†åˆï¼Œå·²è¡¨ç¤ºä¸€å¯¹å¤šï¼Œåœ¨Accountä¸­æœ‰ä¸€ä¸ªUserå¯¹è±¡ï¼Œå·²è¡¨ç¤ºä¸€å¯¹ä¸€ã€‚ é‚£è¦å¦‚æœè¡¨ç¤ºå¤šå¯¹å¤šï¼Œå‡è®¾ä¸€ä¸ªè´¦æˆ·å¯¹åº”å¤šä¸ªç”¨æˆ·ï¼Œé‚£ä¹ˆåªè¦åœ¨Accountä¸­å°†ä¸€ä¸ªUserå¯¹è±¡æ”¹ä¸ºä¸€ä¸ªç±»å‹ä¸ºUserçš„Liståˆ—è¡¨ã€‚ å»¶è¿ŸåŠ è½½å»¶è¿ŸåŠ è½½åˆç§°ä¸ºæ‡’åŠ è½½ï¼Œåˆç§°æŒ‰éœ€åŠ è½½ï¼ŒæŒ‡çš„å°±æ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ è½½ï¼Œæ¯”å¦‚ä¸Šé¢æŸ¥è¯¢æ‰€æœ‰çš„Userï¼Œä½†æ˜¯è¿™æ—¶ä¸éœ€è¦ç«‹å³åŠ è½½å¯¹åº”çš„è´¦æˆ·ä¿¡æ¯ï¼Œè€Œæ˜¯ç­‰æˆ‘ä»¬ä½¿ç”¨è´¦æˆ·ä¿¡æ¯æ—¶åœ¨è¿›è¡ŒåŠ è½½ï¼Œæ¯”å¦‚ user.getAccounts(); è¿™æ—¶å†å‘æ•°æ®åº“å‘èµ·æŸ¥è¯¢ã€‚ MyBatisæ ¹æ®å¯¹å…³è”å¯¹è±¡æŸ¥è¯¢çš„selectè¯­å¥çš„æ‰§è¡Œæ—¶æœºï¼Œåˆ†ä¸ºä¸‰ç§ç±»å‹ï¼šç›´æ¥åŠ è½½ã€ä¾µå…¥å¼åŠ è½½ä¸æ·±åº¦å»¶è¿ŸåŠ è½½ ç›´æ¥åŠ è½½ï¼šæ‰§è¡Œå®Œå¯¹ä¸»åŠ è½½å¯¹è±¡çš„selectè¯­å¥ï¼Œé©¬ä¸Šæ‰§è¡Œå¯¹å…³è”å¯¹è±¡çš„selectæŸ¥è¯¢ã€‚ ä¾µå…¥å¼å»¶è¿Ÿï¼šæ‰§è¡Œå¯¹ä¸»åŠ è½½å¯¹è±¡çš„æŸ¥è¯¢æ—¶ï¼Œä¸ä¼šæ‰§è¡Œå¯¹å…³è”å¯¹è±¡çš„æŸ¥è¯¢ã€‚ä½†å½“è¦è®¿é—®ä¸»åŠ è½½å¯¹è±¡çš„æŸä¸ªå±æ€§ï¼ˆè¯¥å±æ€§ä¸æ˜¯å…³è”å¯¹è±¡çš„å±æ€§ï¼‰æ—¶ï¼Œå°±ä¼šé©¬ä¸Šæ‰§è¡Œå…³è”å¯¹è±¡çš„selectæŸ¥è¯¢ã€‚ æ·±åº¦å»¶è¿Ÿï¼šæ‰§è¡Œå¯¹ä¸»åŠ è½½å¯¹è±¡çš„æŸ¥è¯¢æ—¶ï¼Œä¸ä¼šæ‰§è¡Œå¯¹å…³è”å¯¹è±¡çš„æŸ¥è¯¢ã€‚è®¿é—®ä¸»åŠ è½½å¯¹è±¡çš„è¯¦æƒ…æ—¶ä¹Ÿä¸ä¼šæ‰§è¡Œå…³è”å¯¹è±¡çš„selectæŸ¥è¯¢ã€‚åªæœ‰å½“çœŸæ­£è®¿é—®å…³è”å¯¹è±¡çš„è¯¦æƒ…æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå¯¹å…³è”å¯¹è±¡çš„selectæŸ¥è¯¢ã€‚ Mybatisçš„å»¶è¿ŸåŠ è½½ï¼Œéœ€è¦é€šè¿‡resultMapæ ‡ç­¾ä¸­çš„associationå’Œcollectionå­æ ‡ç­¾æ‰èƒ½æ¼”ç¤ºæˆåŠŸã€‚ è¦è®¾ç½®å»¶è¿ŸåŠ è½½ï¼Œéœ€è¦åœ¨mybatis-config.xmlä¸­è®¾ç½®ï¼Œå¦‚ä¸‹ &lt;configuration&gt; &lt;settings&gt; &lt;setting name=\"lazyLoadingEnabled\" value=\"true\"/&gt; &lt;setting name=\"aggressiveLazyLoading\" value=\"false\"/&gt; &lt;/settings&gt; ... ...&lt;/configuration&gt; lazyLoadingEnabledæ˜¯è®¾ç½®æ˜¯å¦æ·±åº¦å»¶è¿Ÿï¼Œå½“è®¾ç½®ä¸ºtrueï¼Œå°±æ˜¯è®¾ç½®ä¸ºæ·±åº¦å»¶è¿Ÿï¼Œå³å½“è®¿é—®å…³è”å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯æ—¶æ‰ä¼šè¿›è¡ŒæŸ¥è¯¢ã€‚aggressiveLazyLoadingæ˜¯ç”¨æ¥è®¾ç½®ä¾µå…¥å¼å»¶è¿Ÿï¼Œé»˜è®¤ä¸ºfalseï¼Œè¿™é‡Œæœ¬åº”ä¸ç”¨è®¾ç½®ï¼Œåªæ˜¯ä¸ºäº†æ¼”ç¤ºã€‚ ä¸€å¯¹ä¸€å»¶æ—¶åŠ è½½è¿™é‡Œæ¼”ç¤ºå½“æŸ¥è¯¢è´¦æˆ·æ—¶ï¼ŒåŒæ—¶æŸ¥è¯¢å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ã€‚é¦–å…ˆæˆ‘ä»¬çœ‹åŸå…ˆçš„æŸ¥è¯¢è¯­å¥ select user.*, account.id aid, account.uid, account.money from account left join user on user.id = account.uid å¦‚æœè¿™ä¹ˆå†™çš„è¯ï¼Œä¼šç«‹å³æŸ¥è¯¢ç›¸åº”Userçš„ä¿¡æ¯ï¼Œæ‰€ä»¥å¿…é¡»æ›´æ”¹ä¸Šé¢çš„sqlè¯­å¥ select * from account åŒæ—¶ä¿®æ”¹resultMapå¦‚ä¸‹ &lt;resultMap id=\"accounts\" type=\"entity.Account\"&gt; &lt;id property=\"id\" column=\"id\"&gt;&lt;/id&gt; &lt;result property=\"uid\" column=\"uid\"&gt;&lt;/result&gt; &lt;result property=\"money\" column=\"money\"&gt;&lt;/result&gt; &lt;association property=\"user\" javaType=\"entity.User\" select=\"dao.UserDao.findById\" column=\"uid\"&gt; &lt;/association&gt;&lt;/resultMap&gt; æ³¨æ„åˆ°æˆ‘ä»¬å°†associationä¸­çš„å¯¹åº”è§„åˆ™åˆ é™¤äº†ï¼Œå› ä¸ºåœ¨ä¸Šé¢çš„sqlè¯­å¥ä¸­æˆ‘ä»¬åªæŸ¥è¯¢äº†accountçš„å†…å®¹ã€‚ä½†æ˜¯æˆ‘ä»¬å¢åŠ äº†ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæ˜¯selectå±æ€§ï¼Œè¿™ä¸ªæ˜¯å½“æˆ‘ä»¬ä½¿ç”¨accountå¯¹è±¡è®¿é—®å…¶ä¸­çš„Userå±æ€§æ—¶ä¼šè°ƒç”¨çš„sqlè¯­å¥ï¼Œæ¯”å¦‚ account.getUser(); è¿™æ—¶å› ä¸ºä¼šè®¿é—®Accountå…³è”å¯¹è±¡Userçš„å…·ä½“ä¿¡æ¯ï¼Œä¼šè°ƒç”¨userDaoçš„findbyId(Integer id)è¿›è¡ŒæŸ¥è¯¢ï¼Œä»è€Œå¾—åˆ°ç›¸åº”çš„Userä¿¡æ¯ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯columnï¼Œå…¶å€¼æ˜¯ä¸Šé¢findByIdæ–¹æ³•æ‰€éœ€è¦çš„idã€‚ è¿™é‡Œå‘UserDaoä¸­å¢åŠ ä¸‹é¢çš„æ–¹æ³• User findById(Integer id); å¹¶ä¸”åœ¨userDao.xmlä¸­å¢åŠ selectæ ‡ç­¾ &lt;select id=\"findById\" resultType=\"entity.User\" parameterType=\"Integer\"&gt; select * from user where id = #&#123;id&#125;&lt;/select&gt; æ­¤åˆ»ä¸‡äº‹å¤§å‰ï¼Œè¿™é‡Œè´´å‡ºaccountDao.xmlä¸­çš„å†…å®¹ &lt;resultMap id=\"accounts\" type=\"entity.Account\"&gt; &lt;id property=\"id\" column=\"id\"&gt;&lt;/id&gt; &lt;result property=\"uid\" column=\"uid\"&gt;&lt;/result&gt; &lt;result property=\"money\" column=\"money\"&gt;&lt;/result&gt; &lt;association property=\"user\" javaType=\"entity.User\" select=\"dao.UserDao.findById\" column=\"uid\"&gt; &lt;/association&gt;&lt;/resultMap&gt;&lt;select id=\"findAllAccounts\" resultMap=\"accounts\"&gt; select * from account&lt;/select&gt; ä¸€å¯¹å¤šå»¶æ—¶åŠ è½½ä¸€å¯¹å¤šå»¶æ—¶åŠ è½½ä¸ä¸€å¯¹ä¸€å»¶æ—¶åŠ è½½æ˜¯ä¸€æ ·ï¼Œåªä¸è¿‡associationæ¢æˆäº†collectionã€‚ è¿™é‡Œæˆ‘ä»¬ä»¥æŸ¥è¯¢Userä¿¡æ¯æ—¶ï¼ŒåŒæ—¶æŸ¥è¯¢è¯¥ç”¨æˆ·åŒ…å«çš„æ‰€æœ‰è´¦æˆ·ï¼Œè¿™é‡Œä¿®æ”¹findAllUserså¯¹åº”çš„sqlè¯­å¥ä¸º &lt;select id=\"findAllUsers\" resultMap=\"users\"&gt; select * from user&lt;/select&gt; ä¿®æ”¹å¯¹åº”çš„resultMapä¸º &lt;resultMap id=\"users\" type=\"entity.User\"&gt; &lt;id column=\"id\" property=\"id\"&gt;&lt;/id&gt; &lt;result column=\"username\" property=\"userName\"&gt;&lt;/result&gt; &lt;result column=\"sex\" property=\"sex\"&gt;&lt;/result&gt; &lt;result column=\"birthday\" property=\"birthday\"&gt;&lt;/result&gt; &lt;result column=\"address\" property=\"address\"&gt;&lt;/result&gt; &lt;collection column=\"id\" property=\"accounts\" ofType=\"entity.Account\" select=\"dao.AccountDao.findByUid\"&gt; &lt;/collection&gt;&lt;/resultMap&gt; è¿™æ—¶ä¸Šé¢çš„ä»£ç å·²ç»ä¸éœ€è¦è§£é‡Šäº†ï¼Œåœ¨AccountDaoä¸­æ·»åŠ findByUidçš„æ–¹æ³• List&lt;Account&gt; findByUid(Integer uid); åŒæ—¶åœ¨accountDao.xmlä¸­æ·»åŠ å¯¹åº”çš„selectæ ‡ç­¾ &lt;select id=\"findByUid\" resultType=\"entity.Account\" parameterType=\"Integer\"&gt; select * from account where uid = #&#123;uid&#125;&lt;/select&gt; ç¼“å­˜æ‰€è°“ç¼“å­˜ï¼ŒæŒ‡çš„å°±æ˜¯å½“æˆ‘ä»¬å‘æ•°æ®åº“æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå°†æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“ç¬¬äºŒæ¬¡æŸ¥è¯¢æ—¶ï¼Œä¸å†å‘æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œæ˜¯ç›´æ¥ä»å†…å­˜æ‹¿æ•°æ®ï¼Œè¿™å°±æ˜¯ç¼“å­˜ã€‚ç”±äºæ•°æ®åœ¨å†…å­˜ä¸­ï¼Œä»å†…å­˜ä¸­æ‹¿æ•°æ®æ¯”ä»æ•°æ®åº“ä¸­æ‹¿æ•°æ®å¿«å¾ˆå¤šï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥å‡å°‘æ•°æ®åº“çš„å‹åŠ›ã€‚ ä¸€çº§ç¼“å­˜MyBatisä¸­çš„ä¸€çº§ç¼“å­˜çš„èŒƒå›´æ˜¯sqlSessionï¼Œå³ç›¸å½“äºåœ¨sqlSessionä¸­æœ‰ä¸€ä¸ªlocalCacheï¼Œå½“sqlSessionæŸ¥è¯¢æ•°æ®æ—¶ä¼šå°†æ•°æ®ä¿å­˜åœ¨è¿™ä¸ªcacheä¸­ï¼Œå½“è¯¥sqlSessionå†æ¬¡æŸ¥è¯¢æ•°æ®æ—¶ï¼Œä¼šå…ˆåœ¨è¿™ä¸ªcacheä¸­æŸ¥è¯¢æ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šç›´æ¥æ‹¿å†…å­˜ä¸­çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šå»æ•°æ®åº“æŸ¥è¯¢ã€‚ é‚£æ€ä¹ˆä¿è¯æ‹¿åˆ°çš„æ•°æ®ä¸ä¼šé”™å‘¢? æ¯”å¦‚å½“æ›´æ–°æ•°æ®åï¼Œå¦‚æœç»§ç»­ä»ç¼“å­˜ä¸­æ‹¿æ•°æ®ï¼Œè¿™æ—¶æ‹¿åˆ°çš„æ•°æ®å°±ä¼šæ˜¯é”™çš„ï¼Œæ‰€ä»¥å½“å‘ç”Ÿæ›´æ–°ã€åˆ é™¤ã€commit()ç­‰æ“ä½œæ—¶ï¼Œå°±ä¼šå°†ä¸€çº§ç¼“å­˜æ¸…ç©ºï¼Œè¿™å°±æ„å‘³ç€å½“æ›´æ–°æ•°æ®åï¼Œå°±å¾—ç›´æ¥å»æ•°æ®åº“ä¸­æ‹¿æ•°æ®äº†ã€‚å½“SqlSessionå¯¹è±¡è°ƒç”¨clearCache()ï¼Œä¹Ÿä¼šæ¸…é™¤sqlSessionçš„ç¼“å­˜ã€‚ é‚£ä¹ˆæ€ä¹ˆå¼€å¯ä¸€çº§ç¼“å­˜å‘¢? åœ¨mybatis-config.xmlä¸­æ·»åŠ ä¸‹é¢çš„setting &lt;setting name=\"localCacheScope\" value=\"SESSION\"/&gt; localCacheScopeæœ‰ä¸¤ç§å–å€¼ï¼Œä¸€ç§æ˜¯SESSIONï¼Œå³åœ¨ä¸€ä¸ªMyBatisä¼šè¯ä¸­æ‰§è¡Œçš„æ‰€æœ‰è¯­å¥ï¼Œéƒ½ä¼šå…±äº«è¿™ä¸€ä¸ªç¼“å­˜ï¼›ä¸€ç§æ˜¯STATEMENTçº§åˆ«ï¼Œå¯ä»¥ç†è§£ä¸ºç¼“å­˜åªå¯¹å½“å‰æ‰§è¡Œçš„è¿™ä¸€ä¸ªStatementæœ‰æ•ˆã€‚é»˜è®¤æ˜¯SESSIONçº§åˆ«ï¼Œè¿™å°±æ„å‘³ç€ä¸€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œä¸Šé¢çš„è®¾ç½®ä¸ç”¨å†™ã€‚ äºŒçº§ç¼“å­˜æƒ³è±¡æœ‰ä¸¤ä¸ªsqlSessionï¼Œæš‚ä¸”ç§°ä¹‹ä¸ºsqlSession1å’ŒsqlSession2ï¼ŒäºŒè€…è¿æ¥äº†åŒä¸€ä¸ªè¡¨ï¼Œå‡è®¾sqlSession1å¯¹è¡¨è¿›è¡Œäº†æ›´æ–°ï¼ŒsqlSession2å‘æ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼Œä½†æ˜¯ç”±äºä¸€çº§ç¼“å­˜çš„å­˜åœ¨ï¼Œå¹¶ä¸”sqlSession2æ²¡æœ‰è¿›è¡Œå¢åŠ ã€åˆ é™¤ç­‰ç­‰æ“ä½œï¼Œæ„å‘³ç€sqlSession2æ²¡æœ‰æ¸…æ¥šç¼“å­˜ï¼Œæ‰€ä»¥sqlSession2æ‹¿åˆ°çš„æ˜¯ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œè¿™ç§æ•°æ®ç§°ä¹‹ä¸ºè„æ•°æ®ã€‚ é‚£æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜? è¿™ä¸ªæ—¶å€™å°±è¦ä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚äºŒçº§ç¼“å­˜å¼€å¯åï¼ŒåŒä¸€ä¸ªnamespaceä¸‹çš„æ‰€æœ‰æ“ä½œè¯­å¥ï¼Œéƒ½å½±å“ç€åŒä¸€ä¸ªCacheï¼Œå³äºŒçº§ç¼“å­˜è¢«å¤šä¸ªSqlSessionå…±äº«ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€çš„å˜é‡ã€‚ å½“å¼€å¯ç¼“å­˜åï¼Œæ•°æ®çš„æŸ¥è¯¢æ‰§è¡Œçš„æµç¨‹å°±æ˜¯ äºŒçº§ç¼“å­˜ -&gt; ä¸€çº§ç¼“å­˜ -&gt; æ•°æ®åº“ã€‚ é‚£æ€ä¹ˆå¼€å¯äºŒçº§ç¼“å­˜å‘¢? é¦–å…ˆåœ¨mybatis-config.xmlåŠ å…¥ä¸‹é¢çš„è®¾ç½® &lt;setting name=\"cacheEnabled\" value=\"true\"/&gt; æ¥ç€åœ¨xxxDao.xmlä¸­çš„namespace(mapperæ ‡ç­¾å†…ä¸­)åŠ å…¥ &lt;cache/&gt; å¦‚æœå¸Œæœ›å±€éƒ¨å…³é—­äºŒçº§ç¼“å­˜æ—¶ï¼Œæ¯”å¦‚æŸæŸ¥è¯¢æ ‡ç­¾å…³é—­äºŒçº§ç¼“å­˜ï¼Œåˆ™åœ¨æ ‡ç­¾çš„å±æ€§useCacheè®¾ç½®ä¸ºfalseï¼Œå¦‚ &lt;select id=\"findAllUsers\" resultMap=\"users\" useCache=\"false\"&gt; select * from user&lt;/select&gt; äºŒçº§ç¼“å­˜å¯¹äºä¸åŒçš„å‘½åç©ºé—´namespaceçš„æ•°æ®æ˜¯äº’ä¸å¹²æ‰°çš„ï¼Œå€˜è‹¥å¤šä¸ªnamespaceä¸­å¯¹ä¸€ä¸ªè¡¨è¿›è¡Œæ“ä½œçš„è¯ï¼Œå°±ä¼šå¯¼è‡´è¿™ä¸åŒçš„namespaceä¸­çš„æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œåœ¨å•è¡¨ä¸Šä½¿ç”¨äºŒçº§ç¼“å­˜ åœ¨åšå…³è”å…³ç³»æŸ¥è¯¢æ—¶ï¼Œå°±ä¼šå‘ç”Ÿå¤šè¡¨çš„æ“ä½œï¼Œæ­¤æ—¶æœ‰å¯èƒ½è¿™äº›è¡¨å­˜åœ¨äºå¤šä¸ªnamespaceä¸­ï¼Œè¿™å°±ä¼šå‡ºç°ä¸Šé¢å‡ºç°çš„é—®é¢˜äº†ã€‚ æ€»ç»“: MyBatisçš„äºŒçº§ç¼“å­˜ç›¸å¯¹äºä¸€çº§ç¼“å­˜æ¥è¯´ï¼Œå®ç°äº†SqlSessionä¹‹é—´ç¼“å­˜æ•°æ®çš„å…±äº«ï¼ŒåŒæ—¶ç²’åº¦æ›´åŠ çš„ç»†ï¼Œèƒ½å¤Ÿåˆ°namespaceçº§åˆ«ï¼Œé€šè¿‡Cacheæ¥å£å®ç°ç±»ä¸åŒçš„ç»„åˆï¼Œå¯¹Cacheçš„å¯æ§æ€§ä¹Ÿæ›´å¼ºã€‚ MyBatisåœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œæå¤§å¯èƒ½ä¼šå‡ºç°è„æ•°æ®ï¼Œæœ‰è®¾è®¡ä¸Šçš„ç¼ºé™·ï¼Œå®‰å…¨ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ¡ä»¶æ¯”è¾ƒè‹›åˆ»ã€‚ ä½¿ç”¨æ³¨è§£å¼€å‘ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œä¸éœ€è¦å¯¹åº”çš„xxxDao.xmlæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬å°†sqlè¯­å¥å†™åœ¨XxxDaoæ¥å£çš„æ³¨è§£ä¸­ã€‚ ç®€å•ä½¿ç”¨æ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œé…ç½®å¥½pom.xmlæ–‡ä»¶ä»¥åŠmybatis-config.xmlçš„ä¸»é…ç½®æ–‡ä»¶ï¼Œåœ¨entityåŒ…ä¸‹æ–°å»ºUserå®ä½“ç±»ï¼Œåœ¨daoåŒ…ä¸‹æ–°å»ºUserDaoæ¥å£ï¼Œå†…å®¹å¦‚ä¸‹ package dao;import entity.User;import org.apache.ibatis.annotations.Select;import java.util.List;public interface UserDao &#123; @Select(\"select * from user\") List&lt;User&gt; findAll();&#125; åœ¨test/java/TestUserç±»ä¸­è¿›è¡Œå•å…ƒæµ‹è¯• import dao.UserDao;import entity.User;import org.apache.ibatis.io.Resources;import org.apache.ibatis.session.SqlSession;import org.apache.ibatis.session.SqlSessionFactory;import org.apache.ibatis.session.SqlSessionFactoryBuilder;import org.junit.After;import org.junit.Before;import org.junit.Test;import java.io.InputStream;import java.util.List;public class TestUser &#123; private UserDao userDao; private SqlSession sqlSession; private InputStream inputStream; @Before public void init() throws Exception&#123; String resource = \"mybatis-config.xml\"; inputStream = Resources.getResourceAsStream(resource); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); sqlSession = sqlSessionFactory.openSession(); userDao = sqlSession.getMapper(UserDao.class); &#125; @Test public void testFindAll() &#123; List&lt;User&gt; users = userDao.findAll(); System.out.println(users); &#125; @After public void destroy() throws Exception&#123; if (sqlSession != null) &#123; sqlSession.close(); &#125; if (inputStream != null) &#123; inputStream.close(); &#125; &#125;&#125; è¾“å‡ºä¸º [User&#123;id=41, userName='è€ç‹', sex='ç”·', birthday=Tue Feb 27 17:47:08 CST 2018, address='åŒ—äº¬'&#125;, User&#123;id=42, userName='å°ç‹', sex='å¥³', birthday=Fri Mar 02 15:09:37 CST 2018, address='åŒ—äº¬é‡‘ç‡•é¾™'&#125;, User&#123;id=45, userName='å¼ ä¸‰', sex='ç”·', birthday=Wed Mar 07 17:37:26 CST 2018, address='åŒ—äº¬'&#125;, User&#123;id=46, userName='è¶…çº§ç›ä¸½', sex='å¥³', birthday=Thu Mar 08 11:44:00 CST 2018, address='åŒ—äº¬ä¿®æ­£'&#125;] å…¶ä»–CRUDè¿™é‡Œç®€å•çš„æ¼”ç¤ºå®éªŒå…¶ä»–çš„CRUDæ“ä½œã€‚ æ›´æ–°æ“ä½œåœ¨UserDaoä¸­æ·»åŠ å¦‚ä¸‹æ–¹æ³• @Update(\"update user set username = #&#123;userName&#125; where id = #&#123;id&#125;\")void updateUser(User user); åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯• @Testpublic void testUpdateUser() &#123; User user = new User(); user.setId(45); user.setUserName(\"æå››\"); userDao.updateUser(user); System.out.println(userDao.findAll());&#125; è¾“å‡ºä¸º [User&#123;id=41, userName='è€ç‹', sex='ç”·', birthday=Tue Feb 27 17:47:08 CST 2018, address='åŒ—äº¬'&#125;, User&#123;id=42, userName='å°ç‹', sex='å¥³', birthday=Fri Mar 02 15:09:37 CST 2018, address='åŒ—äº¬é‡‘ç‡•é¾™'&#125;, User&#123;id=45, userName='æå››', sex='ç”·', birthday=Wed Mar 07 17:37:26 CST 2018, address='åŒ—äº¬'&#125;, User&#123;id=46, userName='è¶…çº§ç›ä¸½', sex='å¥³', birthday=Thu Mar 08 11:44:00 CST 2018, address='åŒ—äº¬ä¿®æ­£'&#125;] å¦‚æœå‘ç°ä¸èƒ½æ’å…¥ä¸­æ–‡ï¼Œåˆ™ä¿®æ”¹mybatis-config.xmlä¸­çš„dataSourceä¸­çš„urlä¸º &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;amp;characterEncoding=utf8\"/&gt; æ’å…¥æ“ä½œåœ¨UserDaoä¸­æ·»åŠ ä¸‹é¢çš„æ–¹æ³• @Insert(\"insert into user(username, sex, address, birthday) values(#&#123;userName&#125;, #&#123;sex&#125;, #&#123;address&#125;, #&#123;birthday&#125;)\")void insertUser(User user); åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯• @Testpublic void testInsertUser() &#123; User user = new User(); user.setUserName(\"å¥¥ç‰¹æ›¼\"); user.setSex(\"ç”·\"); user.setAddress(\"M78\"); user.setBirthday(new Date()); userDao.insertUser(user); System.out.println(userDao.findAll());&#125; åˆ é™¤æ“ä½œåœ¨UserDaoä¸­æ·»åŠ ä¸‹é¢çš„æ–¹æ³• @Delete(\"delete from user where id = #&#123;id&#125;\")void deleteUserById(Integer id); åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯• @Testpublic void testDeleteUserById() &#123; userDao.deleteUserById(48); for (User user: userDao.findAll()) &#123; System.out.println(user); &#125;&#125; åœ¨æ³¨è§£ä¸­é…ç½®resultMapå¦‚ä¸‹ @Select(\"select * from user\")@Results(value = &#123; @Result(id=true, column = \"id\", property = \"id\"), @Result(column = \"username\", property = \"userName\"), @Result(column = \"sex\", property = \"sex\"), @Result(column = \"birthday\", property = \"birthday\"), @Result(column = \"address\", property = \"address\")&#125;)List&lt;User&gt; findAll(); å¦‚æœç›´æ¥å°†Resultså†™åœ¨æ–¹æ³•ä¸Šï¼Œé‚£å°±æ„å‘³åˆ™å¦‚æœè¿˜æœ‰æ–¹æ³•éœ€è¦äº›resultMapï¼Œé‚£ä¹ˆå°±è¿˜éœ€è¦åœ¨å†™ä¸€éï¼Œæˆ‘ä»¬å¸Œæœ›å°±æ˜¯åªå†™ä¸€éresultMapï¼Œç„¶åé€šè¿‡idå¼•ç”¨å³å¯ï¼Œæˆ‘ä»¬ç»™ä¸Šé¢çš„Resultsæ·»åŠ id @Results(id = \"users\", value = &#123; @Result(id=true, column = \"id\", property = \"id\"), @Result(column = \"username\", property = \"userName\"), @Result(column = \"sex\", property = \"sex\"), @Result(column = \"birthday\", property = \"birthday\"), @Result(column = \"address\", property = \"address\")&#125;) ç„¶ååœ¨éœ€è¦resultMapçš„æ–¹æ³•ä¸Šæ·»åŠ å¦‚ä¸‹çš„æ³¨è§£ @Results(value = &#123;\"users\"&#125;) æˆ–è€…ç®€å†™ä¸º @Results(\"users\") å¤šè¡¨æŸ¥è¯¢ä¸€å¯¹ä¸€@Select(\"select * from account\")@Results(id = \"accounts\", value = &#123; @Result(id = true, column = \"id\", property = \"id\"), @Result(column = \"uid\", property = \"uid\"), @Result(column = \"money\", property = \"money\"), @Result(column = \"uid\", property = \"entity.User\", one = @One(select = \"dao.UserDao.findById\", fetchType = FetchType.EAGER)),&#125;)List&lt;Account&gt; findAll(); Resultä¸­çš„oneå°±æ˜¯ç”¨æ¥è®¾ç½®ä¸€å¯¹ä¸€æŸ¥è¯¢çš„ï¼Œå…¶å€¼æ˜¯ä¸€ä¸ªOneæ³¨è§£ï¼Œå…¶ä¸­çš„selectä¸ç”¨è§£é‡Šï¼Œä¸åœ¨xmlä¸­associationè®¾ç½®çš„selectç›¸åŒåŠŸèƒ½ fetchTypeæ˜¯ç”¨æ¥è®¾ç½®æ˜¯ç«‹å³åŠ è½½è¿˜æ˜¯å»¶è¿ŸåŠ è½½çš„ FetchType.EAGERï¼šç«‹å³åŠ è½½ FetchType.LAZYï¼šå»¶è¿ŸåŠ è½½ æ³¨æ„ï¼Œå¦‚æœè¦ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œå¾—å…ˆåœ¨mybatis-config.xmlä¸­å¼€å¯å»¶è¿ŸåŠ è½½(æ–¹æ³•åŒxmlé…ç½®æ–¹å¼)ã€‚ ä¸€å¯¹å¤š@Select(\"select * from user\")@Results(value = &#123; @Result(id=true, column = \"id\", property = \"id\"), @Result(column = \"username\", property = \"userName\"), @Result(column = \"sex\", property = \"sex\"), @Result(column = \"birthday\", property = \"birthday\"), @Result(column = \"address\", property = \"address\"), @Result(column = \"id\", property = \"accounts\", many = @Many(select = \"dao.AccountDao.findByUid\", fetchType = FetchType.LAZY))&#125;)List&lt;User&gt; findAll(); å°†oneæ¢æˆäº†manyï¼Œå¯¹åº”çš„Manyæ³¨è§£é‡Œé¢çš„å†…å®¹ä¸ç”¨å¤šåŠ è§£é‡Šã€‚ ç¼“å­˜å¦‚ä½•åœ¨æ³¨è§£ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œå¯¹äºä¸€çº§ç¼“å­˜æ¥è¯´ï¼Œä¸xmlç›¸åŒï¼Œä¸ç”¨è®¾ç½®ï¼Œé»˜è®¤æ˜¯SESSIONã€‚ å¯¹äºäºŒçº§ç¼“å­˜ï¼Œé¦–å…ˆåœ¨mybatis-config.xmlå¼€å¯ç¼“å­˜ï¼Œä¸åœ¨xmlä¸­ç›¸åŒã€‚ &lt;setting name=\"cacheEnabled\" value=\"true\"&gt;&lt;/setting&gt; åœ¨xmlä¸­ï¼Œæˆ‘ä»¬æ˜¯åœ¨namespaceä¸­è®¾ç½® &lt;cache/&gt; ä½†æ˜¯åœ¨æ³¨è§£ä¸­ï¼Œæˆ‘ä»¬åœ¨UserDaoæ¥å£ä¸Šæ·»åŠ @CacheNameSpaceæ³¨è§£ï¼Œè®¾ç½®å…¶blockingå±æ€§ä¸ºtrueï¼Œå¦‚ä¸‹ @CacheNamespace(blocking = true)public interface UserDao &#123; ...&#125; è¿™æ ·å°±å¼€å¯äºŒçº§ç¼“å­˜äº†ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"MyBatis","slug":"MyBatis","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/MyBatis/"}]},{"title":"ä½¿ç”¨Reactæ­å»ºä¸€ä¸ªåŸºäºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„åšå®¢ç³»ç»Ÿ","date":"2020-02-10T16:00:00.000Z","path":"/ä½¿ç”¨Reactæ­å»ºä¸€ä¸ªåŸºäºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„åšå®¢ç³»ç»Ÿ/","text":"æœ¬æ–‡å°†ä»0å¼€å§‹æ­å»ºä¸€ä¸ªåŸºäºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„åšå®¢ç³»ç»Ÿï¼ŒåŒ…æ‹¬çš„å†…å®¹æœ‰ Reactçš„åŸºç¡€çŸ¥è¯† å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶BraftEditorçš„ä½¿ç”¨åŠæ‰©å±• React Hooks Redux + React-Redux antdè¡¨å•çš„ä»‹ç»åŠä½¿ç”¨ ç™»å½•æƒé™æ§åˆ¶ é¡¹ç›®å‰çš„å‡†å¤‡é¦–å…ˆéœ€è¦ä¸‹è½½Node.jså’Œnpm(ä¸‹è½½Node.jsè‡ªå¸¦npm)ï¼Œä¸‹è½½å®ŒNode.jsåï¼Œç”±äºnpmçš„é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä¸‹è½½cnpm npm install cnpm -g npmæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šéœ€è¦npmï¼š æƒ³è¦çŸ¥é“npmæ˜¯ä»€ä¹ˆï¼Œé‚£å°±è¦å…ˆä»å…±äº«ä»£ç è¯´èµ·ï¼Œç¨‹åºå‘˜è‡ªå¤ä»¥æ¥å°±æœ‰ç¤¾åŒºæ–‡åŒ–ï¼ŒåŠ å…¥ç¤¾åŒºæœ€å¤§çš„å¥½å¤„ä¹‹ä¸€æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆ«äººè´¡çŒ®çš„ä»£ç ï¼Œä½ ä¹Ÿå¯ä»¥è´¡çŒ®ä»£ç ç»™åˆ«äººç”¨ã€‚ å‰ç«¯æ˜¯æ€ä¹ˆå…±äº«ä»£ç çš„å‘¢? åœ¨ GitHub è¿˜æ²¡æœ‰å…´èµ·çš„å¹´ä»£ï¼Œå‰ç«¯æ˜¯é€šè¿‡ç½‘å€æ¥å…±äº«ä»£ç ï¼Œæ¯”å¦‚ä½ æƒ³ä½¿ç”¨ jQueryï¼Œé‚£ä¹ˆä½ ç‚¹å‡» jQuery ç½‘ç«™ä¸Šæä¾›çš„é“¾æ¥å°±å¯ä»¥ä¸‹è½½ jQueryï¼Œæ”¾åˆ°è‡ªå·±çš„ç½‘ç«™ä¸Šä½¿ç”¨ï¼ŒGItHub å…´èµ·ä¹‹åï¼Œç¤¾åŒºä¸­ä¹Ÿæœ‰äººä½¿ç”¨ GitHub çš„ä¸‹è½½åŠŸèƒ½ã€‚ å½“ä¸€ä¸ªç½‘ç«™ä¾èµ–çš„ä»£ç è¶Šæ¥è¶Šå¤šï¼Œç¨‹åºå‘˜å‘ç°è¿™æ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œæ¯”å¦‚ä½ è¦ä¸‹è½½BootStrapï¼Œä½ å°±å¿…é¡»ä¸‹è½½jQueryï¼Œå› ä¸ºBootStrapä¾èµ–jQueryï¼Œæ‰€ä»¥ä½ éœ€è¦ä¸€ä¸ªç½‘ç«™ä¸€ä¸ªç½‘ç«™çš„å»ä¸‹ä»£ç ã€‚å¦‚æœé‡åˆ°ä¾èµ–æ¯”è¾ƒå¤šçš„æƒ…å†µï¼Œè¿™ä¸ªåº“ä¾èµ–å¦ä¸€ä¸ªåº“ï¼Œå¦ä¸€ä¸ªåº“åˆä¾èµ–å¦ä¸€ä¸ªåº“ï¼Œå¦‚æ­¤å½“ä¾èµ–å…³ç³»ååˆ†å¤æ‚æ—¶ï¼Œä½ æ ¹æœ¬ä¸çŸ¥é“è¦ä¸‹å“ªäº›åº“ï¼Œè¿™å¯¹ç¨‹åºå‘˜æ¥è¯´ç®€ç›´å°±æ˜¯ä¸ªç¾éš¾ã€‚ æœ‰äº›ç¨‹åºå‘˜å°±å—ä¸äº†äº†ï¼Œä¸€ä¸ªç¨‹åºå‘˜å« Isaac Z. Schlueter(ä»¥ä¸‹ç®€ç§°Isaaz)ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼šç”¨ä¸€ä¸ªå·¥å…·æŠŠè¿™äº›ä»£ç é›†ä¸­åˆ°ä¸€èµ·æ¥ç®¡ç†å§!è¿™ä¸ªå·¥å…·å°±æ˜¯ä»–ç”¨ JavaScript(è¿è¡Œåœ¨Node.jsä¸Š)å†™çš„ npmï¼Œå…¨ç§°æ˜¯ Node Package Managerã€‚ NPM çš„æ€è·¯å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š ä¹°ä¸ªæœåŠ¡å™¨ä½œä¸ºä»£ç ä»“åº“(registry)ï¼Œåœ¨é‡Œé¢æ”¾æ‰€æœ‰éœ€è¦è¢«å…±äº«çš„ä»£ç  å‘é‚®ä»¶é€šçŸ¥ jQueryã€Bootstrapã€Underscoreç­‰ä½œè€…ä½¿ç”¨npm publish æŠŠä»£ç æäº¤åˆ°registryä¸Šï¼Œåˆ†åˆ«å–å jqueryã€bootstrapå’Œunderscore(æ³¨æ„å¤§å°å†™) ç¤¾åŒºé‡Œçš„å…¶ä»–äººå¦‚æœæƒ³ä½¿ç”¨è¿™äº›ä»£ç ï¼Œå°±æŠŠjqueryã€bootstrapå’Œunderscoreå†™åˆ°package.jsoné‡Œï¼Œç„¶åè¿è¡Œ npm installï¼Œnpmå°±ä¼šå¸®ä»–ä»¬ä¸‹è½½ä»£ç  ä¸‹è½½å®Œçš„ä»£ç å‡ºç°åœ¨ node_modules ç›®å½•é‡Œï¼Œå¯ä»¥éšæ„ä½¿ç”¨äº†ã€‚ è¿™äº›å¯ä»¥è¢«ä½¿ç”¨çš„ä»£ç è¢«å«åšã€ŒåŒ…ã€(package)ï¼Œè¿™å°±æ˜¯ NPMåå­—çš„ç”±æ¥ï¼šNode Package(åŒ…) Manager(ç®¡ç†å™¨)ã€‚ ä½†æ˜¯npmå«åˆ«äººè¿™ä¹ˆå¹²ï¼Œåˆ«äººä¸ä¸€å®šä¼šè¿™ä¹ˆå¹²å•Šï¼Œæ‰€ä»¥npmæ˜¯æ€ä¹ˆç«çš„å‘¢?npmçš„å‘å±•æ˜¯è·ŸNode.jsçš„å‘å±•ç›¸è¾…ç›¸æˆçš„ã€‚Node.jsæ˜¯ç”±ä¸€ä¸ªåœ¨å¾·å›½å·¥ä½œçš„ç¾å›½ç¨‹åºå‘˜Ryan Dahlå†™çš„ã€‚ä»–å†™äº†Node.jsï¼Œä½†æ˜¯Node.jsç¼ºå°‘ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œäºæ˜¯ä»–å’Œ npmçš„ä½œè€…ä¸€æ‹å³åˆã€æŠ±å›¢å–æš–ï¼Œæœ€ç»ˆNode.jså†…ç½®äº†npmã€‚ åæ¥çš„äº‹æƒ…å¤§å®¶éƒ½çŸ¥é“ï¼ŒNode.jsç«äº†ã€‚éšç€Node.jsçš„ç«çˆ†ï¼Œå¤§å®¶å¼€å§‹ç”¨ npmæ¥å…±äº«JSä»£ç äº†ï¼Œäºæ˜¯jQueryä½œè€…ä¹Ÿå°† jQueryå‘å¸ƒåˆ°npmäº†ã€‚æ‰€ä»¥ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨npm install jqueryæ¥ä¸‹è½½jQueryä»£ç ã€‚ ç°åœ¨ç”¨npmæ¥åˆ†äº«ä»£ç å·²ç»æˆäº†å‰ç«¯çš„æ ‡é…ã€‚ æ¥ä¸‹æ¥ä¸‹è½½æ­å»ºReacté¡¹ç›®çš„è„šæ‰‹æ¶create-react-app cnpm install create-react-app -g ä»€ä¹ˆæ˜¯è„šæ‰‹æ¶ï¼šéšç€å‰ç«¯å·¥ç¨‹åŒ–çš„æ¦‚å¿µè¶Šæ¥è¶Šæ·±å…¥äººå¿ƒï¼Œè„šæ‰‹æ¶çš„å‡ºç°å°±æ˜¯ä¸ºå‡å°‘é‡å¤æ€§å·¥ä½œè€Œå¼•å…¥çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ‘†è„±ctrl + c, ctrl + vï¼Œæ­¤è¯zenjiang? ç°åœ¨æ–°å»ºä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œå·²ç»ä¸æ˜¯åœ¨htmlå¤´éƒ¨å¼•å…¥cssï¼Œå°¾éƒ¨å¼•å…¥jsé‚£ä¹ˆç®€å•çš„äº‹äº†ï¼Œcsséƒ½æ˜¯é‡‡ç”¨Sassæˆ–åˆ™Lessç¼–å†™ï¼Œåœ¨jsä¸­å¼•å…¥ï¼Œç„¶ååŠ¨æ€æ„å»ºæ³¨å…¥åˆ°htmlä¸­ï¼›é™¤äº†å­¦ä¹ åŸºæœ¬çš„jsï¼Œcssè¯­æ³•å’Œçƒ­é—¨æ¡†æ¶ï¼Œè¿˜éœ€è¦å­¦ä¹ æ„å»ºå·¥å…·webpackï¼Œbabelè¿™äº›æ€ä¹ˆé…ç½®ï¼Œæ€ä¹ˆèµ·å‰ç«¯æœåŠ¡ï¼Œæ€ä¹ˆçƒ­æ›´æ–°ï¼›ä¸ºäº†åœ¨ç¼–å†™è¿‡ç¨‹ä¸­è®©ç¼–è¾‘å™¨å¸®æˆ‘ä»¬æŸ¥é”™ä»¥åŠæ›´åŠ è§„èŒƒï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¼•å…¥ESlintï¼›ç”šè‡³ï¼Œæœ‰äº›é¡¹ç›®è¿˜éœ€è¦å¼•å…¥å•å…ƒæµ‹è¯•(Jest)ã€‚å¯¹äºä¸€ä¸ªåˆšå…¥é—¨çš„äººæ¥è¯´ï¼Œè¿™æ— ç–‘ä¼šè®©äººæœ›è€Œå´æ­¥ã€‚è€Œå‰ç«¯è„šæ‰‹æ¶çš„å‡ºç°ï¼Œå°±è®©äº‹æƒ…ç®€å•åŒ–ï¼Œä¸€é”®å‘½ä»¤ï¼Œæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œå†æ‰§è¡Œä¸¤ä¸ªnpmå‘½ä»¤ï¼Œè·‘èµ·ä¸€ä¸ªé¡¹ç›®ã€‚åœ¨å…¥é—¨æ—¶ï¼Œæ— éœ€å…³æ³¨é…ç½®ä»€ä¹ˆçš„ï¼Œåªéœ€è¦å¼€å¿ƒçš„å†™ä»£ç ï¼›å¦å¤–ï¼Œå¯¹äºå¾ˆå¤šç³»ç»Ÿï¼Œä»–ä»¬çš„é¡µé¢ç›¸ä¼¼åº¦éå¸¸é«˜ï¼Œæ‰€ä»¥å°±å¯ä»¥åŸºäºä¸€å¥—æ¨¡æ¿æ¥æ­å»ºï¼Œè™½ç„¶æ˜¯ä¸åŒçš„äººå¼€å‘ï¼Œä½†ç”¨è„šæ‰‹æ¶æ¥æ­å»ºï¼Œç›¸åŒçš„é¡¹ç›®ç»“æ„ä¸ä»£ç ä¹¦å†™è§„èŒƒï¼Œæ˜¯å¾ˆåˆ©äºé¡¹ç›®çš„åæœŸç»´æŠ¤çš„ï¼›ä»¥ä¸Šå°±æ˜¯ä¸ºä»€ä¹ˆè„šæ‰‹æ¶å­˜åœ¨çš„æ„ä¹‰ï¼Œ è®©é¡¹ç›®ä»â€æ­å»º-å¼€å‘-éƒ¨ç½²â€æ›´åŠ å¿«é€Ÿä»¥åŠè§„èŒƒã€‚ æ¥ç€ä½¿ç”¨create-react-appæ­å»ºä¸€ä¸ªReacté¡¹ç›®ï¼Œè¿™é‡Œçš„é¡¹ç›®åç§°å°±å‘½åä¸ºblog create-react-app blog ä½¿ç”¨è¯¥å‘½ä»¤ä¼šåœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¤¹blogï¼Œé‡Œé¢çš„å†…å®¹å¦‚ä¸‹ å…¶ä¸­srcå°±æ˜¯æˆ‘ä»¬å¼€å‘çš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­index.jsæ˜¯å…¥å£æ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹ä¸º import React from 'react';import ReactDOM from 'react-dom';import './index.css';import App from './App';import * as serviceWorker from './serviceWorker';ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));// If you want your app to work offline and load faster, you can change// unregister() to register() below. Note this comes with some pitfalls.// Learn more about service workers: https://bit.ly/CRA-PWAserviceWorker.unregister(); ç°åœ¨æˆ‘ä»¬å°†é‡Œé¢çš„å†…å®¹æ”¹ä¸º import React from 'react';import ReactDOM from 'react-dom';ReactDOM.render(&lt;div&gt;Hello React&lt;/div&gt;, document.getElementById('root')); ç„¶ånpm startå°±å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„é¡µé¢ è¿™æ—¶å¯ä»¥å°†srcä¸‹é™¤index.jsçš„æ–‡ä»¶å…¨éƒ¨éƒ½åˆ æ‰äº†ï¼Œå› ä¸ºæ²¡æœ‰ç”¨åˆ°ä»–ä»¬ã€‚ ReactåŸºç¡€JSXè¯­æ³•å¯èƒ½ç°åœ¨ä½ å¯¹ä¸Šé¢çš„ä»£ç ä¸å¤ªäº†è§£ï¼Œç‰¹åˆ«æ˜¯æ€ä¹ˆåœ¨JavaScrpté‡Œé¢å†™HTML ReactDOM.render(&lt;div&gt;Hello React&lt;/div&gt;, document.getElementById('root')); è¿™é‡Œçš„HTMLå°±æ˜¯JSXï¼ŒJSXçš„å…¨ç§°æ˜¯JavaScript XMLï¼ŒæŒ‡çš„å°±æ˜¯JavaScriptä¸­çš„XMLã€‚ ä¸Šé¢è¿™è¡Œè¯­å¥çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢? Reactä¼šè§£æè¿™ä¸ªJSXè¯­å¥ä¸ºä¸€ä¸ªè™šæ‹ŸDOMï¼Œè€ŒReactDOMä¼šå°†è¿™ä¸ªè™šæ‹ŸDOMè½¬å˜ä¸ºçœŸæ­£çš„DOMï¼Œç„¶åå¡åˆ°é¡µé¢æŸä¸ªç‰¹å®šçš„å…ƒç´ ä¸Šé¢ï¼Œè¿™é‡Œæ˜¯å¡åˆ°ä¸€ä¸ªidä¸ºroot(è¯¥DOMå…ƒç´ åœ¨public/index.htmlä¸­)çš„DOMå¯¹è±¡ä¸­,æˆ‘ä»¬æŸ¥çœ‹index.htmlä¸­çš„å†…å®¹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;!-- çœç•¥headä¸­çš„å†…å®¹å’Œæ‰€æœ‰æ³¨é‡Š --&gt; &lt;body&gt; &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt; &lt;div id=\"root\"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ç»è¿‡ReactDOMæ¸²æŸ“åçš„index.htmlçš„é¡µé¢åº”è¯¥ä¸ºä¸º &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;!-- çœç•¥headä¸­çš„å†…å®¹å’Œæ‰€æœ‰æ³¨é‡Š --&gt; &lt;body&gt; &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt; &lt;div id=\"root\"&gt; &lt;div&gt;Hello React&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ä¸ºäº†éªŒè¯è¿™ä¸ªæƒ³æ³•ï¼Œå¯ä»¥åœ¨åˆšæ‰çš„é¡µé¢ä¸­æŒ‰ä¸‹F12æ£€æŸ¥å…ƒç´  æ‰€ä»¥é¡µé¢æ˜¾ç¤ºå‡ºæ¥çš„å°±æ˜¯Hello Reactã€‚ ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹ŸDOMï¼š åŸå› å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯DOMå¾ˆæ…¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹ ç”¨HTMLåˆ†æå™¨ï¼Œåˆ†æHTMLå…ƒç´ ï¼Œæ„å»ºä¸€é¢—DOMæ ‘ ç”¨CSSåˆ†æå™¨ï¼Œåˆ†æCSSæ–‡ä»¶å’Œå…ƒç´ ä¸Šçš„inlineæ ·å¼ï¼Œç”Ÿæˆé¡µé¢çš„æ ·å¼è¡¨ å°†ä¸Šé¢çš„DOMæ ‘å’Œæ ·å¼è¡¨ï¼Œå…³è”èµ·æ¥ï¼Œæ„å»ºä¸€é¢—Renderæ ‘ã€‚è¿™ä¸€è¿‡ç¨‹åˆç§°ä¸ºAttachmentã€‚æ¯ä¸ªDOMèŠ‚ç‚¹éƒ½æœ‰attachæ–¹æ³•ï¼Œæ¥å—æ ·å¼ä¿¡æ¯ï¼Œè¿”å›ä¸€ä¸ªrenderå¯¹è±¡ï¼ˆåˆårendererï¼‰ã€‚è¿™äº›renderå¯¹è±¡æœ€ç»ˆä¼šè¢«æ„å»ºæˆä¸€é¢—Renderæ ‘ æœ‰äº†Renderæ ‘åï¼Œæµè§ˆå™¨å¼€å§‹å¸ƒå±€ï¼Œä¼šä¸ºæ¯ä¸ªRenderæ ‘ä¸Šçš„èŠ‚ç‚¹ç¡®å®šä¸€ä¸ªåœ¨æ˜¾ç¤ºå±ä¸Šå‡ºç°çš„ç²¾ç¡®åæ ‡å€¼ Renderæ•°æœ‰äº†ï¼ŒèŠ‚ç‚¹æ˜¾ç¤ºçš„ä½ç½®åæ ‡ä¹Ÿæœ‰äº†ï¼Œæœ€åå°±æ˜¯è°ƒç”¨æ¯ä¸ªèŠ‚ç‚¹çš„paintæ–¹æ³•ï¼Œè®©å®ƒä»¬æ˜¾ç¤ºå‡ºæ¥ å½“ä½ ç”¨ä¼ ç»Ÿçš„åŸç”Ÿapiæˆ–jQueryå»æ“ä½œDOMæ—¶ï¼Œæµè§ˆå™¨ä¼šä»æ„å»ºDOMæ ‘å¼€å§‹ä»å¤´åˆ°å°¾æ‰§è¡Œä¸€éæµç¨‹ã€‚æ¯”å¦‚å½“ä½ åœ¨ä¸€æ¬¡æ“ä½œæ—¶ï¼Œéœ€è¦æ›´æ–°10ä¸ªDOMèŠ‚ç‚¹ï¼Œç†æƒ³çŠ¶æ€æ˜¯ä¸€æ¬¡æ€§æ„å»ºå®ŒDOMæ ‘ï¼Œå†æ‰§è¡Œåç»­æ“ä½œã€‚ä½†æµè§ˆå™¨æ²¡è¿™ä¹ˆæ™ºèƒ½ï¼Œæ”¶åˆ°ç¬¬ä¸€ä¸ªæ›´æ–°DOMè¯·æ±‚åï¼Œå¹¶ä¸çŸ¥é“åç»­è¿˜æœ‰9æ¬¡æ›´æ–°æ“ä½œï¼Œå› æ­¤ä¼šé©¬ä¸Šæ‰§è¡Œæµç¨‹ï¼Œæœ€ç»ˆæ‰§è¡Œ10æ¬¡æµç¨‹ã€‚æ˜¾ç„¶ä¾‹å¦‚è®¡ç®—DOMèŠ‚ç‚¹çš„åæ ‡å€¼ç­‰éƒ½æ˜¯ç™½ç™½æµªè´¹æ€§èƒ½ï¼Œå¯èƒ½è¿™æ¬¡è®¡ç®—å®Œï¼Œç´§æ¥ç€çš„ä¸‹ä¸€ä¸ªDOMæ›´æ–°è¯·æ±‚ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„åæ ‡å€¼å°±å˜äº†ï¼Œå‰é¢çš„ä¸€æ¬¡è®¡ç®—æ˜¯æ— ç”¨åŠŸã€‚ å³ä½¿è®¡ç®—æœºç¡¬ä»¶ä¸€ç›´åœ¨æ›´æ–°è¿­ä»£ï¼Œæ“ä½œDOMçš„ä»£ä»·ä»æ—§æ˜¯æ˜‚è´µçš„ï¼Œé¢‘ç¹æ“ä½œè¿˜æ˜¯ä¼šå‡ºç°é¡µé¢å¡é¡¿ï¼Œå½±å“ç”¨æˆ·çš„ä½“éªŒã€‚ è™šæ‹ŸDOMå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªæµè§ˆå™¨æ€§èƒ½é—®é¢˜è€Œè¢«è®¾è®¡å‡ºæ¥çš„ã€‚ä¾‹å¦‚å‰é¢çš„ä¾‹å­ï¼Œå‡å¦‚ä¸€æ¬¡æ“ä½œä¸­æœ‰10æ¬¡æ›´æ–°DOMçš„åŠ¨ä½œï¼Œè™šæ‹ŸDOMä¸ä¼šç«‹å³æ“ä½œDOMï¼Œè€Œæ˜¯å°†è¿™10æ¬¡æ›´æ–°çš„diffå†…å®¹ä¿å­˜åˆ°æœ¬åœ°çš„ä¸€ä¸ªjså¯¹è±¡ä¸­ï¼Œæœ€ç»ˆå°†è¿™ä¸ªjså¯¹è±¡ä¸€æ¬¡æ€§attachåˆ°DOMæ ‘ä¸Šï¼Œé€šçŸ¥æµè§ˆå™¨å»æ‰§è¡Œç»˜åˆ¶å·¥ä½œï¼Œè¿™æ ·å¯ä»¥é¿å…å¤§é‡çš„æ— è°“çš„è®¡ç®—é‡ã€‚ æˆ‘ä»¬çŸ¥é“Reactä¸­çš„JSXä¼šè¢«è§£æä¸ºä¸€ä¸ªReactå¯¹è±¡(æˆ–è€…è¯´JavaScriptå¯¹è±¡)ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å†™JSXçš„è¿‡ç¨‹ä¸­ï¼Œå°±å¯ä»¥æŠŠJSXçœ‹åšæ˜¯ä¸€ä¸ªå¯¹è±¡(è®°ä½JSXçš„æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼Œæ¯å½“åœ¨JavaScriptä»£ç ä¸­çœ‹åˆ°è¿™ç§JSXç»“æ„çš„æ—¶å€™ï¼Œè„‘å­é‡Œé¢å°±å¯ä»¥è‡ªåŠ¨åšè½¬åŒ–ï¼Œè¿™æ ·å¯¹ä½ ç†è§£React.jsçš„ç»„ä»¶å†™æ³•å¾ˆæœ‰å¥½å¤„)ã€‚è¿™å°±æ„å‘³ç€JSXåªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œå¦‚ä¸‹é¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ &lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt; å› ä¸ºä¸Šé¢çš„ä»£ç å¹¶ä¸èƒ½è¢«è§£æä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯ &lt;div&gt; &lt;div&gt;&lt;/div&gt; &lt;div&gt;&lt;/div&gt;&lt;/div&gt; è¿™æ ·çš„JSXæ‰ä¼šè¢«è§£æä¸ºä¸€ä¸ªå¯¹è±¡ã€‚ ç°åœ¨æˆ‘ä»¬åœ¨æ¥è¯´ä¸€ä¸‹æ–‡ä»¶å¼€å¤´çš„ä¸¤è¡Œè¯­å¥ import React from 'react';import ReactDOM from 'react-dom'; åœ¨Reactä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨importæ¥å¯¼å…¥npmä¸‹è½½çš„åŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å…¥äº†Reactå’ŒReactDOMï¼Œè¿™é‡Œä½ å¯èƒ½æœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨npmä¸‹è½½reactå’Œreact-domï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿå¼•å…¥ï¼Œè¿™æ˜¯å› ä¸ºcreate-react-appä¸ºæˆ‘ä»¬åšäº†è¿™ä»¶äº‹æƒ…ï¼Œæ‰“å¼€package.jsonæˆ‘ä»¬å¯ä»¥å‘ç°å·²ç»å¸®æˆ‘ä»¬æ·»åŠ äº†reactå’Œreact-dom é‚£ä¹ˆå¼•å…¥çš„Reactæ˜¯åšä»€ä¹ˆäº‹æƒ…çš„å‘¢? é¦–å…ˆåœ¨JavaScriptä¸­æ˜¯ä¸èƒ½å†™JSXçš„ï¼Œåœ¨Reactä¸­çš„JSXä¼šè¢«è§£æä¸ºJavaScriptå¯¹è±¡ï¼Œå°±æ˜¯é€šè¿‡Reactæ¥åšåˆ°çš„ï¼Œè€ŒReactDOMæ˜¯å°†Reactæ¸²æŸ“çš„JSXå¯¹è±¡(æœ‰æ—¶æˆ‘ä»¬ä¹Ÿç§°ä¹‹ä¸ºç»„ä»¶)è½¬å˜ä¸ºçœŸæ­£çš„DOMå¯¹è±¡å¹¶å¡åˆ°æŸä¸ªç‰¹å®šçš„å…ƒç´ é‡Œé¢ã€‚æ‰€ä»¥è®°ä½åªè¦ä½ å†™React.jsç»„ä»¶ï¼Œéƒ½å¿…é¡»è¦å¼•å…¥Reactã€‚ ç»„ä»¶è¿™é‡Œååˆ†æ¨èReact.js å°ä¹¦ï¼Œé‡Œé¢å°†Reactçš„å†…å®¹è®²çš„ååˆ†çš„æ·±å…¥æµ…å‡ºï¼Œæ¯è¯»ä¸€ééƒ½æœ‰æ–°çš„æ”¶è·ã€‚ ç»„ä»¶æ˜¯ä»€ä¹ˆ? å¦‚æœä½ æ­è¿‡ç§¯æœ¨çš„è¯ï¼Œé‚£ä¹ˆé‡Œé¢çš„ç§¯æœ¨å°±æ˜¯ç»„ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ç§¯æœ¨æ­å»ºå‡ºä¸€ä¸ªä¸œè¥¿ï¼Œåœ¨Reactä¸­æˆ‘ä»¬ä½¿ç”¨ç»„ä»¶æ¥æ­å»ºä¸€ä¸ªé¡µé¢ã€‚ç»„ä»¶çš„ä½œç”¨å°±æ˜¯å¤ç”¨ï¼Œè¿™é‡Œçš„å¤ç”¨æŒ‡çš„ä¸ä»…ä»…æ˜¯é¡µé¢çš„å¤ç”¨ï¼Œè¿˜æœ‰é€»è¾‘å’Œæ ·å¼ï¼›é™¤æ­¤ä»¥å¤–ï¼Œæœ‰çš„ç»„ä»¶å¹¶ä¸æ˜¯ç”¨æ¥å±•ç°é¡µé¢çš„ï¼Œè€Œæ˜¯ç”¨æ¥åŠ è½½æ•°æ®çš„ï¼Œç„¶åå°†æ•°æ®ä¼ ç»™å­ç»„ä»¶ï¼Œè¿™æ ·ä¼šä½¿å¾—å¤„ç†æ•°æ®çš„é€»è¾‘å’Œå±•ç¤ºæ•°æ®çš„é€»è¾‘åˆ†å¼€ï¼ŒèŒè´£åˆ†æ˜ï¼Œé€»è¾‘æ¸…æ™°ï¼Œä»¥åŠä¾¿äºåæœŸçš„ç»´æŠ¤ã€‚å¦å¤–ï¼Œæœ‰çš„ç»„ä»¶æ˜¯åšæƒé™çš„è®¤è¯ï¼Œä»¥å†³å®šå±•ç¤ºæŸäº›é¡µé¢ä¸å¦ã€‚æ€»è€Œè¨€ä¹‹ï¼Œæœ‰è®¸å¤šä¸åŒçš„ç»„ä»¶ï¼Œç»„ä»¶æ ¹æ®åŠŸèƒ½æˆ–å†™æ³•æˆ–æœ‰æ— çŠ¶æ€ç­‰ç­‰å¯ä»¥è¿›è¡Œåˆ†ç±»ï¼Œåœ¨åé¢å°†è¯¦ç»†è®¨è®ºã€‚ æŒ‰ç…§ç»„ä»¶çš„å†™æ³•å¯ä»¥åˆ†ä¸ºå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ã€‚ ç±»ç»„ä»¶æˆ‘ä»¬å†™ä¸€ä¸ªç±»ç»„ä»¶HelloReact See the Pen Reactç±»ç»„ä»¶ä½¿ç”¨ by LastKnightCoder (@lastknightcoder) on CodePen. ä½¿ç”¨ç±»ç»„ä»¶ï¼Œé‡Œé¢å¿…é¡»æœ‰ä¸€ä¸ªrenderå‡½æ•°ï¼Œè¯¥æ–¹æ³•æ˜¯ç”¨æ¥è¿”å›JSXä»£ç ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªHelloWorldç»„ä»¶ ReactDOM.render(&lt;HelloReact /&gt;, document.getElementById(\"root\")) å¹¶ä¸”æˆ‘ä»¬é€šè¿‡&lt;HelloReact /&gt;çš„æ–¹å¼ä½¿ç”¨äº†ç»„ä»¶ï¼Œæ­¤æ—¶çš„&lt;HelloReact /&gt;å°±ç›¸å½“äºrenderå‡½æ•°çš„è¿”å›å€¼ &lt;div&gt;Hello React&lt;/div&gt; ä½†&lt;HelloReact /&gt;ä¸ä»…ä»…æ˜¯HTMLï¼Œè™½ç„¶åœ¨è¿™ä¸ªç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åŠ ä¸ŠJavaScriptçš„é€»è¾‘å’ŒCSSæ ·å¼ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªç»„ä»¶æ˜¯åŒ…æ‹¬è¿™äº›çš„ï¼Œä¸‹é¢æˆ‘ä»¬ä¸ºè¿™ä¸ªç±»æ·»åŠ æ ·å¼å’Œç‚¹å‡»å‡½æ•° See the Pen abOzEWb by LastKnightCoder (@lastknightcoder) on CodePen. ä¸¤ç‚¹è¯´æ˜ï¼š ç”±äºclassåœ¨Reactä¸­æ˜¯å…³é”®å­—ï¼Œæ‰€ä»¥ç±»åè¦å†™æˆclassName onClick={()=&gt; console.log(â€œclick meâ€)}ä¸ºdivæ ‡ç­¾æ·»åŠ äº†ç‚¹å‡»äº‹ä»¶ï¼ŒonClick={}å¹¶ä¸æ˜¯è¯´onClickæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ{}æ˜¯Reactçš„æ’å€¼è¯­æ³•ï¼Œä½¿ç”¨æ’å€¼è¯­æ³•å¯ä»¥å°†ç»„ä»¶çš„å±æ€§ä¸å˜é‡(è¡¨è¾¾å¼)ç»‘å®šèµ·æ¥ï¼Œè¿™æ ·å°±ä¸ä¼šå†™æ­»ï¼Œè€Œæ˜¯ä¼šæ ¹æ®å˜é‡å–ä¸åŒçš„å€¼ã€‚è¿™é‡Œå°±æ˜¯å°†onClickè¿™ä¸ªReactäº‹ä»¶ä¸{}é‡Œé¢çš„ç®­å¤´å‡½æ•°ç»‘å®šèµ·æ¥ã€‚åœ¨{}ä¸­çš„å†…å®¹åªèƒ½æ˜¯JavaScriptçš„è¡¨è¾¾å¼ï¼Œä¸èƒ½æ˜¯ifï¼Œwhileç­‰è¯­å¥ Reactäº‹ä»¶ï¼š ä½¿ç”¨åŸç”Ÿçš„JSä¸ºDOMå…ƒç´ æ·»åŠ äº‹ä»¶ï¼Œä¸»è¦æœ‰ä¸‹é¢ä¸‰ç§æ–¹æ³• åœ¨HTMLä¸­ç›´æ¥äº‹ä»¶ç»‘å®š &lt;p onclick=\"console.log('click')\"&gt;&lt;/p&gt; ç›´æ¥ç»‘å®š let divObj = document.getElementById(\"root\");divObj.onclick = function() &#123;&#125; å¯¹DOMå¯¹è±¡è¿›è¡Œäº‹ä»¶ç›‘å¬å¤„ç†,äº‹ä»¶å§”æ‰˜ç›‘å¬æ–¹å¼ let divObj = document.getElementById(\"root\");divObj.addEventListener('click', function()&#123;&#125;); è‡³äºè¿™ä¸‰ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ä¸åŠä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Œè¿™é‡Œå´ä¸åœ¨è®¨è®ºã€‚é‚£ä¹ˆReactä¸­çš„äº‹ä»¶æ˜¯å¦‚ä½•ç»‘å®šçš„å‘¢? åœ¨Reactä¸­äº‹ä»¶çš„ç»‘å®šæ˜¯ç›´æ¥å†™åœ¨JSXå…ƒç´ ä¸Šçš„,ä¸éœ€è¦é€šè¿‡addEventListeneräº‹ä»¶å§”æ‰˜çš„æ–¹å¼è¿›è¡Œç›‘å¬ï¼Œå†™æ³•ä¸Š: åœ¨JSXå…ƒç´ ä¸Šæ·»åŠ äº‹ä»¶,é€šè¿‡on*EventTypeè¿™ç§å†…è”æ–¹å¼æ·»åŠ ,å‘½åé‡‡ç”¨å°é©¼å³°å¼(camelCase)çš„å½¢å¼,è€Œä¸æ˜¯çº¯å°å†™(åŸç”ŸHTMLä¸­å¯¹DOMå…ƒç´ ç»‘å®šäº‹ä»¶,äº‹ä»¶ç±»å‹æ˜¯å°å†™çš„),æ— éœ€è°ƒç”¨addEventListenerè¿›è¡Œäº‹ä»¶ç›‘å¬,ä¹Ÿæ— éœ€è€ƒè™‘å…¼å®¹æ€§,Reactå·²ç»å°è£…å¥½äº†ä¸€äº›çš„äº‹ä»¶ç±»å‹å±æ€§(ps:onClick,onMouseMove,onChange,onFocus)ç­‰ ä½¿ç”¨JSXè¯­æ³•æ—¶,éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°,è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²,ä¹Ÿå°±æ˜¯propså€¼åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹æ•°æ®,äº‹ä»¶å‡½æ•°æ–¹æ³•å¤–é¢å¾—ç”¨ä¸€ä¸ªåŒå¤§æ‹¬å·åŒ…è£¹èµ·æ¥(ä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„æ’å€¼è¯­æ³•) on*EventTypeçš„äº‹ä»¶ç±»å‹å±æ€§,åªèƒ½ç”¨ä½œåœ¨æ™®é€šçš„åŸç”Ÿhtmlæ ‡ç­¾ä¸Š(ä¾‹å¦‚:div,input,a,pç­‰,ä¾‹å¦‚:&lt;div onClick={ äº‹ä»¶å¤„ç†å‡½æ•° }&gt;&lt;/div&gt;),æ— æ³•ç›´æ¥ç”¨åœ¨è‡ªå®šä¹‰ç»„ä»¶æ ‡ç­¾ä¸Š,ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢è¿™ä¹ˆå†™æ˜¯æ²¡æœ‰ä½œç”¨çš„ &lt;HelloReact onClick=&#123;()=&gt; console.log(\"click me\")&#125;&gt; ä¸èƒ½é€šè¿‡è¿”å›falseçš„æ–¹å¼é˜»æ­¢é»˜è®¤è¡Œä¸º,å¿…é¡»æ˜¾ç¤ºä½¿ç”¨preventDefault å…·ä½“Reactäº‹ä»¶æœ‰å“ªäº›ï¼Œå¯ä»¥å‚ç…§äº‹ä»¶ç³»ç»Ÿ|Reactã€‚ propsç»„ä»¶æœ€å¸¸ç”¨çš„ä½œç”¨å°±æ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®ï¼Œé‚£ä¹ˆä½œä¸ºå¯å¤ç”¨çš„ç»„ä»¶ï¼Œä¸åŒäººæ‹¿åˆ°è¿™ä¸ªç»„ä»¶æ‰€å±•ç¤ºçš„æ•°æ®ä¹Ÿä¸ä¼šç›¸åŒï¼Œé‚£ä¹ˆæ•°æ®ä»å“ªé‡Œæ¥? ä½¿ç”¨ç»„ä»¶çš„äººæ€ä¹ˆå°†æ•°æ®ä¼ ç»™ç»„ä»¶ï¼Œè€Œç»„ä»¶åˆæ€ä¹ˆæ‹¿åˆ°æ•°æ®ã€‚è¿™å°±è¦ç”¨åˆ°propsäº†ã€‚ å‡å¦‚æœ‰ä¸‹é¢çš„ç»„ä»¶ class DisplayData extends React.Component &#123; render() &#123; return ( &lt;div&gt;å‡è®¾è¿™é‡Œæ˜¯è¦å±•ç¤ºçš„æ•°æ®&lt;/div&gt; ) &#125;&#125; è¿™ä¸ªç»„ä»¶çš„ä½œç”¨å°±æ˜¯å±•ç¤ºæ•°æ®ï¼Œç°åœ¨æˆ‘è¦ç”¨DisplayDataç»„ä»¶ï¼Œæˆ‘æ€ä¹ˆæŠŠæ•°æ®ä¼ è¿‡å»ï¼Œå¦‚ä¸‹ &lt;DisplayData data=\"æ•°æ®\" /&gt; æˆ‘ä»¬é€šè¿‡ç»™DisplayDataç»„ä»¶åŠ ä¸Šä¸€ä¸ªdataå±æ€§ï¼Œå€¼æ˜¯â€æ•°æ®â€ï¼Œå°±å¯ä»¥å°†æ•°æ®ä¼ ç»™DisplayDataï¼Œç°åœ¨æ€ä¹ˆæ‹¿åˆ°æ•°æ®å‘¢? æ¯ä¸€ä¸ªç»„ä»¶éƒ½æœ‰propså±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ä¸Šé¢æ–¹æ³•ä¼ é€’ç»™ç»„ä»¶çš„å±æ€§éƒ½ä¼šä»¥é”®å€¼å¯¹çš„å½¢å¼æ·»åŠ åˆ°propså¯¹è±¡ä¸­ï¼Œæ‰€ä»¥åœ¨DisplayDataç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡this.props.dataæ‹¿åˆ°æ•°æ® class DisplayData extends React.Component &#123; render() &#123; return ( &lt;div&gt;&#123;this.props.data&#125;&lt;/div&gt; ) &#125;&#125; See the Pen React propsçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ® by LastKnightCoder (@lastknightcoder) on CodePen. ä»¥ä¸Šæˆ‘ä»¬æŠŠDisplayDataç§°ä¹‹ä¸ºå­ç»„ä»¶ï¼Œè€Œä½¿ç”¨DisplayDataçš„ç»„ä»¶ç§°ä¹‹ä¸ºçˆ¶ç»„ä»¶ï¼Œä¸Šé¢æ¼”ç¤ºäº†å¦‚ä½•å°†æ•°æ®ä»çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶ï¼Œç°åœ¨æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹ï¼Œå¦‚ä½•å°†å­ç»„ä»¶çš„æ•°æ®ä¼ é€’åˆ°çˆ¶ç»„ä»¶å‘¢? å®Œå…¨æ˜¯æœ‰è¿™ä¸ªéœ€è¦çš„ï¼Œæ¯”å¦‚å­ç»„ä»¶æ˜¯ä¸€ä¸ªç™»å½•ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç äº¤ç”±çˆ¶ç»„ä»¶è¿›è¡Œå¤„ç†(ä¸ºä»€ä¹ˆè¦äº¤ç»™çˆ¶ç»„ä»¶å¤„ç†ï¼Œåœ¨å­ç»„ä»¶ä¸­å¤„ç†ä¸å¯ä»¥å—?å¦‚æœä½ åœ¨å­ç»„ä»¶é‡Œé¢å¤„ç†äº†æ•°æ®ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶å°±ä¸å…·ä½“çš„ä¸šåŠ¡ç›¸å…³äº†ï¼Œå°±ä¸èƒ½å¤Ÿè¢«å¤ç”¨äº†ï¼Œæ‰€ä»¥æ•°æ®å¤„ç†çš„å·¥ä½œéœ€è¦äº¤ç”±çˆ¶ç»„ä»¶æ¥åš)ã€‚ å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬ç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆåœ¨å­ç»„ä»¶çš„æŸä¸ªæ—¶åˆ»(æ¯”å¦‚å­ç»„ä»¶çš„å€¼æ”¹å˜äº†æˆ–è€…è¯´ç‚¹å‡»æäº¤)æ—¶è°ƒç”¨æ­¤å›è°ƒå‡½æ•°å¹¶ä¼ å…¥æ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­æ‹¿åˆ°æ•°æ®äº† See the Pen Reactå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ® by LastKnightCoder (@lastknightcoder) on CodePen. ä¸Šé¢çš„é€»è¾‘ä»£ç ä¸ºå½“SonComponentä¸­çš„inputå‘ç”Ÿæ”¹å˜æ—¶(è¾“å…¥å†…å®¹æˆ–åˆ å‡å†…å®¹ç­‰ç­‰)ï¼Œä¼šè§¦å‘å­ç»„ä»¶ä¸­çš„handleValueå›è°ƒå‡½æ•°(è¯¥å›è°ƒå‡½æ•°bindäº†thisï¼Œåé¢ä¼šè¿›è¡Œè§£é‡Š)ï¼Œåœ¨å­ç»„ä»¶çš„handleValueä¸­ï¼Œæˆ‘ä»¬æ ¹æ®æµè§ˆå™¨ä¼ å…¥çš„eventè·å¾—äº†inputè¾“å…¥æ¡†çš„å€¼ï¼Œå¹¶ä¸”è°ƒç”¨ParentComponentä¼ å…¥çš„handleValueå›è°ƒå‡½æ•°å°†æ­¤å€¼ä¼ å…¥ï¼Œè¿™æ ·å°±å°†å­ç»„ä»¶çš„æ•°æ®ä¼ ç»™äº†çˆ¶ç»„ä»¶ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†è¿™ä¸ªå›è°ƒå‡½æ•°æ¥æ”¶è¿™ä¸ªå€¼ï¼Œå¹¶åœ¨æ§åˆ¶å°æ‰“å°ï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢çš„inputä¸­è¾“å…¥å€¼å¹¶åœ¨æ§åˆ¶å°è§‚å¯Ÿç»“æœã€‚ JavaScriptå‡½æ•°é‡Œé¢çš„thisæ˜¯ä»€ä¹ˆï¼š è¦æƒ³çŸ¥é“JavaScriptå‡½æ•°é‡Œé¢çš„thisæ˜¯ä»€ä¹ˆï¼Œå°±è¦çŸ¥é“å‡½æ•°è°ƒç”¨çš„4ç§æ–¹å¼ï¼š å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å‡½æ•° å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸­çš„å‡½æ•°ï¼Œæ ¹æ®æ˜¯å¦æ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthisçš„å–å€¼ä¹Ÿä¸åŒï¼Œå¦‚æœæ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œé‡Œé¢çš„thisæ˜¯undefinedï¼Œå¦‚æœæ˜¯åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œé‡Œé¢çš„thisæ˜¯window \"use strict\"function test() &#123; console.log(this); &#125;test(); //undefined function test() &#123; console.log(this); &#125;test(); //window å¯¹è±¡æ–¹æ³• å¯¹è±¡ä¸­æ–¹æ³•ä¸­çš„thiså¦‚æœæ˜¯å¯¹è±¡.çš„å½¢å¼è°ƒç”¨çš„ï¼Œé‚£ä¹ˆå¯¹è±¡æ–¹æ³•ä¸­çš„thiså°±æ˜¯è¯¥å¯¹è±¡ let obj = &#123; test: function() &#123; console.log(this); &#125;&#125;obj.test(); // obj å¦‚æœä»¥æŸç§è§’åº¦çœ‹çš„è¯ï¼Œç¬¬ä¸€ç§æƒ…å†µçš„éä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯ç¬¬äºŒç§æƒ…å†µçš„ç‰¹ä¾‹ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜çš„å˜é‡å’Œå‡½æ•°éƒ½ä¼šæˆä¸ºwindowå¯¹è±¡çš„å±æ€§ï¼Œå½“æˆ‘ä»¬åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜ä¸€ä¸ªtestå‡½æ•°ï¼Œå°±ç›¸å½“äºåœ¨windowå¯¹è±¡ä¸­æ·»åŠ äº†ä¸€ä¸ªtestæ–¹æ³•(åœ¨å¯¹è±¡ä¸­çš„å‡½æ•°æˆ‘ä»¬ä¸€èˆ¬ç§°ä¸ºæ–¹æ³•)ï¼Œè€Œè°ƒç”¨test()æ–¹æ³•å°±ç›¸å½“äºwindow.test()ï¼ŒæŒ‰ç…§ç¬¬äºŒç§æƒ…å†µï¼Œtestä¸­çš„thiså°±æ˜¯åº”è¯¥æŒ‡å‘window ä½œä¸ºæ„é€ å‡½æ•°è¢«è°ƒç”¨ å½“æˆ‘ä»¬newä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œé‡Œé¢çš„thisæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ function Dog() &#123; console.log(this)&#125;new Dog(); // &#123;&#125; ä½¿ç”¨call, apply, bindæ–¹æ³•æ”¹å˜å‡½æ•°çš„ä¸Šä¸‹æ–‡(this) ä¸Šé¢ä¸‰è€…éƒ½å¯ä»¥æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶å†…éƒ¨thisçš„æŒ‡å‘ï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸ªä¾‹å­ funtion printName(firstName, lastName) &#123; console.log(this.fullName) console.log(`$&#123;firstName&#125; $&#123;lastName&#125;`)&#125; å¦‚æœç›´æ¥æ‰§è¡Œè¿™ä¸ªå‡½æ•°çš„è¯ï¼Œé‚£ä¹ˆthis.fullNameçš„ç»“æœå°±æ˜¯undefinedï¼Œå› ä¸ºwindowå¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œä½†æ˜¯å¦‚æœæœ‰ä»¥ä¸‹å¯¹è±¡ let obj = &#123; fullName: \"David\"&#125; ä¸‹é¢æˆ‘ä»¬å°†printNameå‡½æ•°æ‰§è¡Œæ—¶å†…éƒ¨çš„thisæŒ‡å‘obj let firstName = \"firstName\"let lastName = \"lastName\"// å°†printNameå†…éƒ¨thisæŒ‡å‘objï¼Œ åé¢æ˜¯printNameéœ€è¦çš„å‚æ•°printName.apply(obj, firstName, lastName) // å°†printNameå†…éƒ¨thisæŒ‡å‘objï¼Œ åé¢æ˜¯printNameéœ€è¦çš„å‚æ•°printName.call(obj, [firstName, lastName]) è¿™æ—¶this.fullNameå°±æ˜¯objä¸­çš„fullNameäº†ï¼Œå› ä¸ºapplyå’Œcallæ–¹æ³•æ”¹å˜äº†printNameå†…çš„thisæŒ‡å‘ã€‚è¿™é‡Œæˆ‘ä»¬å‘ç°applyå’Œcallæ–¹æ³•æ˜¯æå…¶çš„ç›¸ä¼¼ï¼Œé™¤äº†ä¼ é€’å‚æ•°æ—¶æ ¼å¼ä¸ä¸€æ ·ï¼›äº‹å®ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼Œapplyå’Œcallçš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ã€‚ è¯´å®Œapplyå’Œcallï¼Œæ¥ä¸‹æ¥è®²ä¸€è®²bindï¼Œbindä¸ä¸Šé¢ä¸¤è€…ä¸åŒï¼Œä¸Šé¢æ”¹å˜å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘æ—¶æ˜¯ç«‹å³æ‰§è¡Œè¿™ä¸ªå‡½æ•°çš„ï¼Œè€Œä½¿ç”¨bindæ”¹å˜å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¸ä¼šç«‹å³çš„æ‰§è¡Œï¼Œå¦‚ printName = printName.bind(obj) printNAmeå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘å·²ç»æ”¹å˜ï¼Œå½“printNameæ‰§è¡Œæ—¶ï¼Œæ‰“å°å‡ºçš„this.fullNameå°±æ˜¯objé‡Œé¢çš„Davidã€‚ äº†è§£å®ŒJavaScriptä¸­çš„thisæ˜¯ä»€ä¹ˆï¼Œæ¥ä¸‹æ¥å°±è¦è§£é‡Š &lt;input type=\"text\" placeholder=\"Please Input\" onChange=&#123;this.handleValue.bind(this)&#125; /&gt; ä¸­onChange={this.handleValue.bind(this)}ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥çœ‹handleValueä¸­çš„ä»£ç  handleValue(event) &#123; this.props.handleValue(event.target.value)&#125; å½“inputå‘ç”Ÿæ”¹å˜æ—¶ä¾¿ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œä½†æ˜¯æ˜¯è°æ‰§è¡Œè¿™ä¸ªå‡½æ•°å‘¢? æ˜¯windowï¼Œè€ŒReactæ˜¯è¿è¡Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹çš„ï¼Œæ‰€ä»¥è¿™æ—¶çš„thiså°±æ˜¯undefinedï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„thisï¼Œè¦ä½¿å¾—æˆ‘èƒ½æ‹¿åˆ°çš„ä½¿æˆ‘ä»¬æƒ³æ‹¿åˆ°çš„thisï¼Œå°±æ˜¯æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶å†…éƒ¨çš„thisæŒ‡å‘ï¼Œè€ƒè™‘åˆ°è¿™ä¸ªå‡½æ•°æ˜¯ä½œä¸ºå›è°ƒå‡½æ•°è€Œä¸æ˜¯ç«‹å³æ‰§è¡Œï¼Œæˆ‘ä»¬ä½¿ç”¨bindæ¥ç»‘å®šthisã€‚ æœºæ™ºçš„ä½ å·²ç»å‘ç°ï¼ŒParentComponentä¸­çš„handleValueæ²¡æœ‰bind(this)ï¼Œè¿™æ˜¯å› ä¸ºå®ƒåœ¨å‡½æ•°é‡Œé¢æ²¡æœ‰ç”¨åˆ°thiså•Šï¼Œæ‰€ä»¥ä»€ä¹ˆæ—¶å€™bind(this)æ˜¯ä¸æ˜¯å·²ç»å¾ˆæ¸…æ¥šäº†å‘¢! åˆ°è¿™é‡Œä½ æœ‰æ²¡æœ‰å‘ç°æˆ‘ä»¬ä½¿ç”¨ç»„ä»¶éƒ½æ˜¯è¿™æ · &lt;HelloReact /&gt; å±…ç„¶ä¸æ˜¯ä¸€å¼€ä¸€é—­çš„æ ¼å¼ï¼Œé‚£æƒ³å¿…ä½ æœ‰ç–‘é—®ï¼Œå¯ä¸å¯ä»¥è¿™æ ·ä½¿ç”¨ &lt;HelloReact&gt;&lt;/HelloReact&gt; ç­”æ¡ˆæ˜¯å¯ä»¥ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†? äºŒè€…åˆæœ‰ä»€ä¹ˆä¸åŒ? ä½¿ç”¨åé¢çš„å†™æ³•æ„å‘³ç€å¯ä»¥åœ¨æ ‡ç­¾é‡Œé¢å†™å­å…ƒç´ ï¼Œå¦‚ &lt;HelloReact&gt; &lt;div&gt;inner&lt;/div&gt;&lt;/HelloReact&gt; å…¶å®è¿™ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ä¸€ç§ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œæ ‡ç­¾é‡Œé¢çš„å­å…ƒç´ ä¼šä¼ ç»™è¿™ä¸ªç»„ä»¶ï¼Œä¼ è¿‡å»çš„æ•°æ®ä¼šä¿å­˜åœ¨props.childrenä¸­ï¼Œåœ¨HelloReactä¸­å¯ä»¥é€šè¿‡this.props.childrenè·å¾—æ•°æ®ã€‚ è¿™ä¸¤ç§å†™æ³•éƒ½å¾ˆå¸¸è§ï¼Œåœ¨å†™å¸ƒå±€ï¼Œè·¯ç”±ï¼Œè®¤è¯ç­‰ç»„ä»¶æ—¶ç»å¸¸ä½¿ç”¨åé¢çš„å†™æ³•ï¼Œè€Œåœ¨ä¸€äº›å±•ç¤ºçš„ç»„ä»¶ä¸­ï¼Œé€šå¸¸åªéœ€è¦çˆ¶ç»„ä»¶ä¼ ä¸‹æ¥çš„æ•°æ®ï¼Œä¼šä½¿ç”¨å‰ä¸€ç§å†™æ³•ï¼Œå½“ç„¶è¿™ç§æƒ…å†µä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬äºŒç§å†™æ³•ã€‚ ä¸ºäº†ç†è§£childrençš„åº”ç”¨ï¼Œæˆ‘ä»¬æ¥å†™ç®€å•çš„Layoutç»„ä»¶ã€‚æ‰€è°“çš„Layoutï¼Œå°±æ˜¯å¸ƒå±€ æˆ‘ä»¬ç®€å•çš„æŠŠé¡µé¢ä¸Šé¢ä¸‰ä¸ªéƒ¨åˆ†ï¼Œè¿™å°±æ˜¯ä¸€ç§å¸ƒå±€ï¼Œä¸€ä¸ªå¤´éƒ¨ï¼Œä¸€ä¸ªä¾§è¾¹æ ï¼Œä¸€ä¸ªå†…å®¹åŒºã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å‘ç°ä¸€ä¸ªç½‘ç«™çš„å¤šä¸ªç½‘é¡µä¹‹é—´çš„å¸ƒå±€æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”å¾ˆæœ‰å¯èƒ½å¤´éƒ¨å’Œä¾§è¾¹æ æ˜¯ç›¸åŒï¼Œä»…ä»…æ˜¯å†…å®¹åŒºä¸åŒï¼Œä½œä¸ºä¸€åä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œå½“ç„¶è¦å°½å¯èƒ½çš„æŠ½ç¦»å‡ºè¿™äº›é‡å¤çš„ä»£ç ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå¸ƒå±€æŠ½ç¦»ä¸ºä¸€ä¸ªç»„ä»¶ See the Pen å°è¯•Layout by LastKnightCoder (@lastknightcoder) on CodePen. é¦–å…ˆå¸Œæœ›ä¸è¦å…³æ³¨æ ·å¼ï¼Œå› ä¸ºé‚£ä¸æ˜¯é‡ç‚¹ï¼Œå…³æ³¨Layoutçš„ç»“æ„ã€‚æ³¨æ„æˆ‘ä»¬å°†{this.props.children}æ”¾åœ¨äº†ç±»åä¸ºcontentçš„divä¸­ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å°†Contentå†…å®¹åŒºç»„ä»¶æ”¾åˆ°Layouté‡Œé¢ï¼ŒContentç»„ä»¶å°±ä¼šè¢«æ”¾åœ¨Layoutçš„å†…å®¹åŒºï¼Œæ”¾ç½®ä¸åŒçš„Contentç»„ä»¶ï¼Œå°±ä¼šå¾—åˆ°å¤šä¸ªå¸ƒå±€ä¸€æ ·ï¼Œå†…å®¹ä¸åŒçš„é¡µé¢ï¼Œè¿™å°±åšåˆ°äº†å¤ç”¨ã€‚ æ•´ä¸ªç½‘ç«™å½“ç„¶ä¸å¯èƒ½åªä¼šæœ‰ä¸€ç§å¸ƒå±€ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šå†™å¤šä¸ªå¸ƒå±€çš„ç»„ä»¶ï¼Œæ˜ç™½äº†å¸ƒå±€ç»„ä»¶çš„ä½œç”¨ï¼Œè¿™äº›å¯¹ä½ æ¥è¯´åº”å½“ä¸éš¾ã€‚ stateReactä¸­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ€æƒ³å°±æ•°æ®é©±åŠ¨è§†å›¾ï¼Œä¾‹å¦‚å­ç»„ä»¶æ ¹æ®propsçš„å†…å®¹è¿›è¡Œå±•ç¤ºï¼Œæ ¹æ®ä¸åŒçš„propså±•ç¤ºä¸åŒçš„å†…å®¹ï¼Œä¸åŒçš„propsä¼šå±•ç°ä¸åŒçš„UIï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæ˜¯propså†³å®šäº†è§†å›¾ï¼Œæ¯å½“propså˜åŒ–æ—¶ï¼Œéƒ½ä¼šå¼•èµ·å­ç»„ä»¶çš„æ¸²æŸ“ï¼Œå±•ç°ä¸åŒçš„è§†å›¾ï¼Œè§†å›¾çš„æ”¹å˜å®Œå…¨åœ¨äºæ•°æ®ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬æ“ä½œçš„é‡ç‚¹ä¸å†æ˜¯DOMï¼Œè€Œæ˜¯æ•°æ®ï¼Œæˆ‘ä»¬é€šè¿‡æ“ä½œæ•°æ®æ¥è¾¾åˆ°ä¸åŒçš„UIæ•ˆæœã€‚ ä½†æ˜¯ä»…ä»…é propsä¼¼ä¹æ˜¯å¤Ÿçš„ï¼Œå› ä¸ºpropsæ˜¯åªè¯»çš„ï¼Œå®ƒä¸èƒ½å¤Ÿæ›´æ”¹ã€‚è¿™æ„å‘³ç€ä»€ä¹ˆ? å‡è®¾çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„propsæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå­ç»„ä»¶çš„è§†å›¾å°±ä¸ä¼šæ”¹å˜ï¼Œå› ä¸ºæ•°æ®æ²¡æœ‰æ”¹å˜ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¦‚ä½•ä¸è¿™æ ·ä¸€ä¸ªç»„ä»¶è¿›è¡Œäº¤äº’å‘¢? è¿™æ„å‘³ç»„ä»¶çš„å†…éƒ¨éœ€è¦æ•°æ®æ¥ç®¡ç†UIçš„å˜åŒ–ï¼Œæˆ‘ä»¬å°†ç»„ä»¶å†…éƒ¨çš„æ•°æ®ç§°ä¹‹ä¸ºstateï¼Œstateå°±æ˜¯çŠ¶æ€çš„æ„æ€ã€‚æ¯”å¦‚ä½¿ç”¨visibleè¿™ä¸ªçŠ¶æ€æ¥æ§åˆ¶æŸä¸ªå¯¹è¯æ¡†æ˜¯å¦å¯è§ï¼Œç”¨æˆ·é€šè¿‡æ”¹å˜visibleè¿™ä¸ªçŠ¶æ€ä»è€Œå½±å“ç»„ä»¶UIçš„å˜åŒ–ï¼Œæ¯æ¬¡stateçš„å˜åŒ–éƒ½ä¼šå¼•èµ·ç»„ä»¶UIçš„åˆ·æ–°ï¼Œä»è€Œè¾¾åˆ°æ•°æ®é©±åŠ¨è§†å›¾çš„ç›®çš„ã€‚ä»æ­¤ï¼Œæˆ‘ä»¬å…³å¿ƒçš„å†ä¹Ÿä¸æ˜¯DOMæ“ä½œï¼Œè€Œæ˜¯props, stateè¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬æ“ä½œè¿™äº›æ•°æ®æ¥æ§åˆ¶è§†å›¾çš„æ›´æ–°ã€‚ å®šä¹‰ä¸€ä¸ªåˆé€‚çš„stateï¼Œæ˜¯æ­£ç¡®åˆ›å»ºç»„ä»¶çš„ç¬¬ä¸€æ­¥ã€‚stateå¿…é¡»èƒ½ä»£è¡¨ä¸€ä¸ªç»„ä»¶UIå‘ˆç°çš„å®Œæ•´çŠ¶æ€é›†ï¼Œå³ç»„ä»¶çš„ä»»ä½•UIæ”¹å˜ï¼Œéƒ½å¯ä»¥ä»stateçš„å˜åŒ–ä¸­åæ˜ å‡ºæ¥ï¼›åŒæ—¶ï¼Œstateè¿˜å¿…é¡»æ˜¯ä»£è¡¨ä¸€ä¸ªç»„ä»¶UIå‘ˆç°çš„æœ€å°çŠ¶æ€é›†ï¼Œå³stateä¸­çš„æ‰€æœ‰çŠ¶æ€éƒ½æ˜¯ç”¨äºåæ˜ ç»„ä»¶UIçš„å˜åŒ–ï¼Œæ²¡æœ‰ä»»ä½•å¤šä½™çš„çŠ¶æ€ï¼Œä¹Ÿä¸éœ€è¦é€šè¿‡å…¶ä»–çŠ¶æ€è®¡ç®—è€Œæ¥çš„ä¸­é—´çŠ¶æ€ã€‚ ç»„ä»¶ä¸­ç”¨åˆ°çš„ä¸€ä¸ªå˜é‡æ˜¯ä¸æ˜¯åº”è¯¥ä½œä¸ºç»„ä»¶stateï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„4æ¡ä¾æ®è¿›è¡Œåˆ¤æ–­ï¼š è¿™ä¸ªå˜é‡æ˜¯å¦æ˜¯é€šè¿‡propsä»çˆ¶ç»„ä»¶ä¸­è·å–? å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå®ƒä¸æ˜¯ä¸€ä¸ªçŠ¶æ€ã€‚ è¿™ä¸ªå˜é‡æ˜¯å¦åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ(åé¢è®²åˆ°)ä¸­éƒ½ä¿æŒä¸å˜? å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå®ƒä¸æ˜¯ä¸€ä¸ªçŠ¶æ€ã€‚ è¿™ä¸ªå˜é‡æ˜¯å¦å¯ä»¥é€šè¿‡å…¶ä»–çŠ¶æ€(state)æˆ–è€…å±æ€§(props)è®¡ç®—å¾—åˆ°?å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå®ƒä¸æ˜¯ä¸€ä¸ªçŠ¶æ€ã€‚ è¿™ä¸ªå˜é‡æ˜¯å¦åœ¨ç»„ä»¶çš„renderæ–¹æ³•ä¸­ä½¿ç”¨? å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆå®ƒä¸æ˜¯ä¸€ä¸ªçŠ¶æ€(å› ä¸ºstateæ˜¯ç”¨æ¥é©±åŠ¨è§†å›¾çš„ï¼Œå¦‚æœè¿™ä¸ªå˜é‡æ²¡æœ‰åœ¨renderæ–¹æ³•ä¸­ä½¿ç”¨ï¼Œæ„å‘³ç€è¯¥çŠ¶æ€çš„æ”¹å˜å¹¶ä¸èƒ½ä½¿å¾—è§†å›¾å‘ç”Ÿå˜åŒ–)ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå˜é‡æ›´é€‚åˆå®šä¹‰ä¸ºç»„ä»¶çš„ä¸€ä¸ªæ™®é€šå±æ€§ï¼Œä¾‹å¦‚ç»„ä»¶ä¸­ç”¨åˆ°çš„å®šæ—¶å™¨ï¼Œå°±åº”è¯¥ç›´æ¥å®šä¹‰ä¸ºthis.timerï¼Œè€Œä¸æ˜¯this.state.timerã€‚ ç°åœ¨æ¥å†™ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶é¡µé¢ä¸Šæ˜¾ç¤ºçš„æ•°å­—+1ï¼Œé¡µé¢ä¸Šçš„æ•°å­—å‘ç”Ÿæ”¹å˜æ­£æ˜¯UIçš„æ”¹å˜ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ç”¨stateæ¥ç®¡ç†é¡µé¢ä¸Šè¦å±•ç¤ºçš„æ•°æ® See the Pen Counteræ¼”ç¤ºstate by LastKnightCoder (@lastknightcoder) on CodePen. æˆ‘ä»¬åœ¨constructoræ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–stateä¸º this.state = &#123; number: 0&#125; stateä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­çš„numberå±æ€§æ­£æ˜¯æˆ‘ä»¬è¦å±•ç°çš„æ•°æ®ï¼Œæˆ‘ä»¬å°†å®ƒåˆå§‹åŒ–ä¸º0ã€‚å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè§¦å‘çŠ¶æ€çš„æ”¹å˜ increment() &#123; this.setState(&#123; number: ++this.state.number &#125;)&#125; æ³¨æ„ï¼ŒçŠ¶æ€çš„æ”¹å˜ä¸èƒ½ä½¿ç”¨this.state.number = ++this.state.numberä½¿çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œè¦ä½¿å¾—çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå¿…é¡»ä½¿ç”¨setState()æ–¹æ³•ä½¿çŠ¶æ€å‘ç”Ÿæ”¹å˜ã€‚ ä¸Šé¢çš„ä¾‹å­è¿›ä¸€æ­¥éªŒè¯äº†æ•°æ®é©±åŠ¨è§†å›¾çš„æ€æƒ³ï¼Œåœ¨è®¡æ•°å™¨çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨çš„æ›´æ”¹è§†å›¾(æ“ä½œDOM)ï¼Œè€Œæ˜¯é€šè¿‡æ”¹å˜stateæ¥ä½¿å¾—è§†å›¾å¾—åˆ°åˆ·æ–°ï¼Œå› ä¸ºæ¯æ¬¡stateçš„æ”¹å˜éƒ½ä¼šå¼•èµ·render()æ–¹æ³•çš„è°ƒç”¨ï¼Œä»è€Œä½¿å¾—è§†å›¾å¾—ä»¥åˆ·æ–°ã€‚ è¯·åŠ¡å¿…ç‰¢è®°ï¼Œå¹¶ä¸æ˜¯ç»„ä»¶ä¸­ç”¨åˆ°çš„æ‰€æœ‰å˜é‡éƒ½æ˜¯ç»„ä»¶çš„çŠ¶æ€! å½“å­˜åœ¨å¤šä¸ªç»„ä»¶å…±åŒä¾èµ–ä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯çŠ¶æ€ä¸Šç§»ï¼Œå°†è¿™ä¸ªçŠ¶æ€æ”¾åˆ°è¿™å‡ ä¸ªç»„ä»¶çš„å…¬å…±çˆ¶ç»„ä»¶ä¸­ã€‚ æ‰€è°“çŠ¶æ€ä¸Šç§»æ˜¯æ€ä¹ˆå›äº‹å‘¢? è€ƒè™‘ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªè¯„è®ºç»„ä»¶ CommentInputç”¨æ¥è¾“å…¥è¯„è®ºï¼Œå½“æäº¤ä¹‹åä¼šåœ¨CommentListä¸­æ–°å¢ä¸€ä¸ªCommentItemæ¥æ˜¾ç¤ºæ–°å¢çš„è¯„è®ºï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªcommentsæ•°ç»„ï¼Œå½“CommentInputæäº¤è¯„è®ºæ—¶ï¼Œå°†commentæ·»åŠ åˆ°commentsæ•°ç»„ä¸­ï¼ŒCommentListæ‹¿åˆ°commentsæ•°ç»„ï¼Œcommentsä¸­çš„å…ƒç´ ä¼šäº¤ç»™å…¶ä¸­çš„CommentItemæ˜¾ç¤ºã€‚è€Œä½œä¸ºå…³é”®çš„commentsæ•°ç»„ï¼Œå®ƒæ˜¯å¤šä¸ªç»„ä»¶éƒ½ä¼šç”¨åˆ°çš„ï¼Œæ‰€ä»¥å®ƒåº”è¯¥ä½œä¸ºstateä¿å­˜åœ¨å…¬å…±çš„çˆ¶ç»„ä»¶ä¸­ï¼Œå³Commentç»„ä»¶ä¸­ã€‚è¿™å°±æ˜¯çŠ¶æ€ä¸Šç§»ï¼Œå°†å¤šä¸ªç»„ä»¶éƒ½ä¼šç”¨åˆ°çš„æ•°æ®ä¸Šç§»åˆ°å…±åŒçˆ¶ç»„ä»¶çš„stateä¸­ï¼Œå½“æ›´æ–°çˆ¶ç»„ä»¶çš„stateçš„æ—¶ï¼Œä¼šä½¿å¾—ä¼ åˆ°å­ç»„ä»¶çš„propsç›¸åº”çš„æ›´æ–°ï¼Œä»è€Œè¾¾åˆ°è§†å›¾ æ›´æ–°çš„ç›®çš„ ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸€ä¸ªäººä»å‡ºç”Ÿåˆ°æ­»äº¡ä¼šç»å†ä¸€äº›äººç”ŸèŠ‚ç‚¹ï¼Œå­©ç«¥ã€é’å¹´ã€ä¸­å¹´ã€è€å¹´ã€‚è€Œä¸€ä¸ªç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯ä¹Ÿè¦ç»å†ç‰¹æ®Šçš„èŠ‚ç‚¹ï¼Œåœ¨è¿™äº›èŠ‚ç‚¹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›æ“ä½œï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°†å®ƒä»¬ç§°ä¸ºç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚ é‚£Reactæœ‰å“ªäº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¯¹åº”çš„èŠ‚ç‚¹æ˜¯ä»€ä¹ˆå‘¢? æˆ–è€…è¯´è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°åœ¨Reactä»åˆ›å»ºåˆ°é”€æ¯çš„å“ªä¸€ä¸ªè¿‡ç¨‹ä¼šè¢«æ‰§è¡Œå‘¢? è¿™é‡Œæˆ‘ä»¬å°†ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š åˆ›å»ºé˜¶æ®µ æ›´æ–°é˜¶æ®µ å¸è½½é˜¶æ®µ åœ¨æ¯ä¸€ä¸ªé˜¶æ®µéƒ½åŒ…å«æ•°ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚ åˆ›å»ºé˜¶æ®µconstructor(props)æˆ‘ä»¬ä¸€èˆ¬åœ¨æ„é€ å‡½æ•°ä¸­å¹²ä¸¤ä»¶äº‹æƒ…ï¼š åˆå§‹åŒ–çŠ¶æ€ ä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ç»‘å®šthis æ³¨æ„ï¼š ES6å­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ‰§è¡Œä¸€æ¬¡super()ã€‚Reactå¦‚æœæ„é€ å‡½æ•°ä¸­è¦ä½¿ç”¨this.propsï¼Œå¿…é¡»å…ˆæ‰§è¡Œsuper(props)ã€‚ static getDerivedStateFromProps(nextProps, prevState)å½“åˆ›å»ºæ—¶ã€æ¥æ”¶æ–°çš„ props æ—¶ã€setStateæ—¶ã€forceUpdateæ—¶ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå‚æ•°nextPropsæ˜¯æ–°æ¥æ”¶çš„propsï¼ŒprevStateæ˜¯å½“å‰çš„stateã€‚è¿”å›å€¼(å¯¹è±¡)å°†ç”¨äºæ›´æ–°stateï¼Œå¦‚æœä¸éœ€è¦æ›´æ–°åˆ™éœ€è¦è¿”å›nullã€‚ è¿™ä¸ªæ–¹æ³•åœ¨å»ºè®®å°½é‡å°‘ç”¨ï¼Œåªåœ¨å¿…è¦çš„åœºæ™¯ä¸­ä½¿ç”¨ï¼Œä¸€èˆ¬ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š æ— æ¡ä»¶çš„æ ¹æ®propsæ›´æ–°state å½“propså’Œstateçš„ä¸åŒ¹é…æƒ…å†µæ›´æ–°state componentWillMount()è¿™ä¸ªæ–¹æ³•å·²ç»ä¸æ¨èä½¿ç”¨ã€‚å› ä¸ºåœ¨æœªæ¥å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ä¸‹ï¼Œè¯¥æ–¹æ³•å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨ã€‚å®ƒæ‰€è¡Œä½¿çš„åŠŸèƒ½ä¹Ÿå¯ä»¥ç”± componentDidMount() å’Œ constructor() ä»£æ›¿ï¼š ä¹‹å‰æœ‰äº›äººä¼šæŠŠå¼‚æ­¥è¯·æ±‚æ”¾åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå…¶å®å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ¨èæŠŠå¼‚æ­¥æ•°æ®è¯·æ±‚æ”¾åœ¨ componentDidMount() ä¸­ã€‚ åœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶ï¼Œé€šå¸¸ä½¿ç”¨ componentWillMount() è·å–å¿…è¦çš„åŒæ­¥æ•°æ®ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ constructor() ä»£æ›¿å®ƒã€‚ æœ‰å®šä¹‰getDerivedStateFromPropsæ—¶ï¼Œä¼šå¿½ç•¥componentWillMount() render()æ¯ä¸ªç±»ç»„ä»¶ä¸­ï¼Œrender() å”¯ä¸€å¿…é¡»çš„æ–¹æ³•ã€‚render() æ­£å¦‚å…¶åï¼Œä½œä¸ºæ¸²æŸ“ç”¨ï¼Œå¯ä»¥è¿”å›ä¸‹é¢å‡ ç§ç±»å‹ï¼š React å…ƒç´ ï¼ˆReact elementsï¼‰ æ•°ç»„ï¼ˆArraysï¼‰ ç‰‡æ®µï¼ˆfragmentsï¼‰ æ’æ§½ï¼ˆPortalsï¼‰ å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼ˆString and numbersï¼‰ å¸ƒå°”å€¼æˆ– nullï¼ˆBooleans or nullï¼‰ é‡Œé¢ä¸åº”è¯¥åŒ…å«å‰¯ä½œç”¨ï¼Œåº”è¯¥ä½œä¸ºçº¯å‡½æ•°ã€‚ä¸èƒ½ä½¿ç”¨ setStateã€‚ componentDidMount()ç»„ä»¶å®Œæˆè£…è½½ï¼ˆå·²ç»æ’å…¥ DOM æ ‘ï¼‰æ—¶ï¼Œè§¦å‘è¯¥æ–¹æ³•ã€‚è¿™ä¸ªé˜¶æ®µå·²ç»è·å–åˆ°çœŸå®çš„ DOMã€‚ä¸€èˆ¬ç”¨äºä¸‹é¢çš„åœºæ™¯ï¼š å¼‚æ­¥è¯·æ±‚ ajax æ·»åŠ äº‹ä»¶ç»‘å®š(æ³¨æ„åœ¨componentWillUnmountä¸­å–æ¶ˆï¼Œä»¥å…é€ æˆå†…å­˜æ³„æ¼) æ›´æ–°é˜¶æ®µcomponentWillReceiveProps()è¿™ä¸ªæ–¹æ³•åœ¨æ¥æ”¶æ–°çš„ props æ—¶è§¦å‘ï¼Œå³ä½¿ props æ²¡æœ‰å˜åŒ–ä¹Ÿä¼šè§¦å‘ã€‚ä¸€èˆ¬ç”¨è¿™ä¸ªæ–¹æ³•æ¥åˆ¤æ–­ props çš„å‰åå˜åŒ–æ¥æ›´æ–° stateï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼š class ExampleComponent extends React.Component &#123; state = &#123; isScrollingDown: false, &#125;; componentWillReceiveProps(nextProps) &#123; if (this.props.currentRow !== nextProps.currentRow) &#123; this.setState(&#123; isScrollingDown: nextProps.currentRow &gt; this.props.currentRow, &#125;); &#125; &#125;&#125; è¿™ä¸ªæ–¹æ³•å°†è¢«å¼ƒç”¨ï¼Œæ¨èä½¿ç”¨ getDerivedStateFromProps ä»£æ›¿ã€‚ static getDerivedStateFromProps()è§åˆ›å»ºé˜¶æ®µçš„æè¿° shouldComponentUpdate()åœ¨æ¥æ”¶æ–°çš„ props æˆ–æ–°çš„ state æ—¶ï¼Œåœ¨æ¸²æŸ“å‰ä¼šè§¦å‘è¯¥æ–¹æ³•ã€‚è¯¥æ–¹æ³•é€šè¿‡è¿”å› true æˆ–è€… false æ¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘æ–°çš„æ¸²æŸ“ã€‚è¿”å› falseï¼Œ åˆ™ä¸ä¼šè§¦å‘åç»­çš„ componentWillUpdate()ã€render() å’Œ componentDidUpdate()ï¼ˆä½†æ˜¯ state å˜åŒ–è¿˜æ˜¯å¯èƒ½å¼•èµ·å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼‰ã€‚ æ‰€ä»¥é€šå¸¸é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯¹ props å’Œ state åšæ¯”è¾ƒï¼Œä»è€Œé¿å…ä¸€äº›ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ componentWillUpdate()å½“æ¥æ”¶åˆ°æ–°çš„ props æˆ– state æ—¶ï¼Œåœ¨æ¸²æŸ“å‰æ‰§è¡Œè¯¥æ–¹æ³•ã€‚åœ¨ä»¥åå¼‚æ­¥æ¸²æŸ“æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æŸäº›ç»„ä»¶æš‚ç¼“æ›´æ–°ï¼Œå¯¼è‡´ componentWillUpdate å’Œ componentDidUpdate ä¹‹é—´çš„æ—¶é—´å˜é•¿ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½å‘ç”Ÿä¸€äº›å˜åŒ–ï¼Œæ¯”å¦‚ç”¨æˆ·è¡Œä¸ºå¯¼è‡´ DOM å‘ç”Ÿäº†æ–°çš„å˜åŒ–ï¼Œè¿™æ—¶åœ¨ componentWillUpdate è·å–çš„ä¿¡æ¯å¯èƒ½å°±ä¸å¯é äº†ã€‚è¿™ä¸ªæ–¹æ³•å°†è¦å¼ƒç”¨ã€‚ render()è§åˆ›å»ºé˜¶æ®µçš„æè¿° getSnapshotBeforeUpdate()è¿™ä¸ªæ–¹æ³•åœ¨ render() ä¹‹åï¼ŒcomponentDidUpdate() ä¹‹å‰è°ƒç”¨ã€‚ä¸¤ä¸ªå‚æ•° prevProps è¡¨ç¤ºæ›´æ–°å‰çš„ propsï¼ŒprevState è¡¨ç¤ºæ›´æ–°å‰çš„ stateã€‚è¿”å›å€¼ç§°ä¸ºä¸€ä¸ªå¿«ç…§ï¼ˆsnapshotï¼‰ï¼Œå¦‚æœä¸éœ€è¦ snapshotï¼Œåˆ™å¿…é¡»æ˜¾ç¤ºçš„è¿”å› null â€”â€” å› ä¸ºè¿”å›å€¼å°†ä½œä¸º componentDidUpdate() çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä½¿ç”¨ã€‚æ‰€ä»¥è¿™ä¸ªå‡½æ•°å¿…é¡»è¦é…åˆ componentDidUpdate() ä¸€èµ·ä½¿ç”¨ã€‚ è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åœ¨çœŸå® DOM æ›´æ–°ï¼ˆcomponentDidUpdateï¼‰å‰ï¼Œè·å–ä¸€äº›éœ€è¦çš„ä¿¡æ¯ï¼ˆç±»ä¼¼å¿«ç…§åŠŸèƒ½ï¼‰ï¼Œç„¶åä½œä¸ºå‚æ•°ä¼ ç»™ componentDidUpdateã€‚ä¾‹å¦‚ï¼šåœ¨ getSnapShotBeforeUpdate ä¸­è·å–æ»šåŠ¨ä½ç½®ï¼Œç„¶åä½œä¸ºå‚æ•°ä¼ ç»™ componentDidUpdateï¼Œå°±å¯ä»¥ç›´æ¥åœ¨æ¸²æŸ“çœŸå®çš„ DOM æ—¶å°±æ»šåŠ¨åˆ°éœ€è¦çš„ä½ç½®ã€‚ ä¸‹é¢æ˜¯å®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„ä¾‹å­ï¼š class ScrollingList extends React.Component &#123; constructor(props) &#123; super(props); this.listRef = React.createRef(); &#125; getSnapshotBeforeUpdate(prevProps, prevState) &#123; // Are we adding new items to the list? // Capture the scroll position so we can adjust scroll later. if (prevProps.list.length &lt; this.props.list.length) &#123; const list = this.listRef.current; return list.scrollHeight - list.scrollTop; &#125; return null; &#125; componentDidUpdate(prevProps, prevState, snapshot) &#123; // If we have a snapshot value, we've just added new items. // Adjust scroll so these new items don't push the old ones out of view. // (snapshot here is the value returned from getSnapshotBeforeUpdate) if (snapshot !== null) &#123; const list = this.listRef.current; list.scrollTop = list.scrollHeight - snapshot; &#125; &#125; render() &#123; return ( &lt;div ref=&#123;this.listRef&#125;&gt;&#123;/* ...contents... */&#125;&lt;/div&gt; ); &#125;&#125; componentDidUpdate()è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨æ›´æ–°å®Œæˆä¹‹åè°ƒç”¨ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° snapshot å°±æ˜¯ getSnapshotBeforeUpdate çš„è¿”å›å€¼ã€‚ æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œæœ‰ getSnapshotBeforeUpdate æ—¶ï¼Œå¿…é¡»è¦æœ‰ componentDidUpdateã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ³•çš„ä¸€ä¸ªåº”ç”¨åœºæ™¯å°±æ˜¯ä¸Šé¢çœ‹åˆ°çš„ä¾‹å­ï¼Œé…åˆ getSnapshotBeforeUpdate ä½¿ç”¨ã€‚ å¸è½½é˜¶æ®µcomponentWillUnmount() åœ¨ç»„ä»¶å¸è½½æˆ–è€…é”€æ¯å‰è°ƒç”¨ã€‚è¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨æ¥åšä¸€äº›æ¸…ç†å·¥ä½œï¼Œä¾‹å¦‚ï¼š å–æ¶ˆå®šæ—¶å™¨ å–æ¶ˆäº‹ä»¶ç»‘å®š å–æ¶ˆç½‘ç»œè¯·æ±‚ ä¸Šé¢ä¸‰ä¸ªé˜¶æ®µæ˜¯æ­£å¸¸çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯å¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œå°±éœ€è¦è¿›è¡Œé”™è¯¯å¤„ç†ï¼Œæ‰€ä»¥Reactä¹Ÿæä¾›äº†å‘ç”Ÿå¼‚å¸¸æ—¶çš„å‡½æ•° å‘ç”Ÿå¼‚å¸¸componentDidCatch(err, info) ä»»ä½•å­ç»„ä»¶åœ¨æ¸²æŸ“æœŸé—´ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­æˆ–è€…æ„é€ å‡½æ•° constructor å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨ã€‚ é”™è¯¯è¾¹ç•Œä¸ä¼šæ•è·ä¸‹é¢çš„é”™è¯¯ï¼š äº‹ä»¶å¤„ç†(Event handlers)(å› ä¸ºäº‹ä»¶å¤„ç†ä¸å‘ç”Ÿåœ¨ React æ¸²æŸ“æ—¶ï¼ŒæŠ¥é”™ä¸å½±å“æ¸²æŸ“) å¼‚æ­¥ä»£ç (Asynchronous code)(e.g. setTimeout or requestAnimationFrame callbacks) æœåŠ¡ç«¯æ¸²æŸ“(Server side rendering) é”™è¯¯è¾¹ç•Œæœ¬èº«(è€Œä¸æ˜¯å­ç»„ä»¶)æŠ›å‡ºçš„é”™è¯¯ ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€å¼ ç”Ÿå‘½å‘¨æœŸå‡½æ•°å›¾æ¥åŠ æ·±å¯¹ä¸Šé¢æè¿°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ç†è§£ è™½ç„¶Reactæœ‰åšå‘ä¸‹å…¼å®¹ï¼Œä½†æ˜¯æ¨èå°½é‡é¿å…ä½¿ç”¨åºŸå¼ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œæ˜¯æ‹¥æŠ±æœªæ¥ï¼Œç”¨æ–°çš„ç”Ÿå‘½å‘¨æœŸæ›¿æ¢å®ƒä»¬ã€‚ å‡½æ•°å¼ç»„ä»¶ç°åœ¨æˆ‘ä»¬ç”¨å‡½æ•°å¼ç»„ä»¶å†™ä¸€ä¸ªHelloReactç»„ä»¶ See the Pen å‡½æ•°å¼ç»„ä»¶ç¤ºä¾‹ by LastKnightCoder (@lastknightcoder) on CodePen. å…¶ä¸­å‡½æ•°å¼ç»„ä»¶æ¥æ”¶ä¸€ä¸ªå‚æ•°propsï¼Œé€šæˆ‘ä»¬åœ¨ç±»ç»„ä»¶ä¸­ä»‹ç»çš„propsç›¸åŒã€‚å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶ä¸åŒçš„æ˜¯ï¼Œå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰stateå’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ‰€ä»¥å‡½æ•°å¼ç»„ä»¶åˆè¢«ç§°ä¸ºæ— çŠ¶æ€ç»„ä»¶ï¼Œä»æŸç§æ„ä¹‰ä¸Šè¯´ç±»ç»„ä»¶å…·æœ‰æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ã€‚ ä¸ºäº†åˆ›å»ºçº¯å±•ç¤ºç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶åªè´Ÿè´£æ ¹æ®ä¼ å…¥çš„propsæ¥å±•ç¤ºï¼Œä¸æ¶‰åŠåˆ°è¦stateçŠ¶æ€çš„æ“ä½œã€‚å…¶å®˜æ–¹æŒ‡å‡ºï¼šåœ¨å¤§éƒ¨åˆ†Reactä»£ç ä¸­ï¼Œå¤§å¤šæ•°ç»„ä»¶è¢«å†™æˆæ— çŠ¶æ€çš„ç»„ä»¶ï¼Œé€šè¿‡ç®€å•ç»„åˆå¯ä»¥æ„å»ºæˆå…¶ä»–çš„ç»„ä»¶ç­‰ï¼›è¿™ç§é€šè¿‡å¤šä¸ªç®€å•ç„¶ååˆå¹¶æˆä¸€ä¸ªå¤§åº”ç”¨çš„è®¾è®¡æ¨¡å¼è¢«æå€¡ã€‚ æ— çŠ¶æ€ç»„ä»¶çš„åˆ›å»ºå½¢å¼ä½¿ä»£ç çš„å¯è¯»æ€§æ›´å¥½ï¼Œå¹¶ä¸”å‡å°‘äº†å¤§é‡å†—ä½™çš„ä»£ç ï¼Œç²¾ç®€è‡³åªæœ‰ä¸€ä¸ªrenderæ–¹æ³•ï¼Œå¤§å¤§çš„å¢å¼ºäº†ç¼–å†™ä¸€ä¸ªç»„ä»¶çš„ä¾¿åˆ©ï¼Œé™¤æ­¤ä¹‹å¤–æ— çŠ¶æ€ç»„ä»¶è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼š ç»„ä»¶ä¸ä¼šè¢«å®ä¾‹åŒ–ï¼Œæ•´ä½“æ¸²æŸ“æ€§èƒ½å¾—åˆ°æå‡ å› ä¸ºç»„ä»¶è¢«ç²¾ç®€æˆä¸€ä¸ªrenderæ–¹æ³•çš„å‡½æ•°æ¥å®ç°çš„ï¼Œç”±äºæ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œæ‰€ä»¥æ— çŠ¶æ€ç»„ä»¶å°±ä¸ä¼šåœ¨æœ‰ç»„ä»¶å®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œæ— å®ä¾‹åŒ–è¿‡ç¨‹ä¹Ÿå°±ä¸éœ€è¦åˆ†é…å¤šä½™çš„å†…å­˜ï¼Œä»è€Œæ€§èƒ½å¾—åˆ°ä¸€å®šçš„æå‡ã€‚ ç»„ä»¶ä¸èƒ½è®¿é—®thiså¯¹è±¡ æ— çŠ¶æ€ç»„ä»¶ç”±äºæ²¡æœ‰å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®ç»„ä»¶thisä¸­çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šthis.refã€this.stateç­‰å‡ä¸èƒ½è®¿é—®ã€‚è‹¥æƒ³è®¿é—®å°±ä¸èƒ½ä½¿ç”¨è¿™ç§å½¢å¼æ¥åˆ›å»ºç»„ä»¶ ç»„ä»¶æ— æ³•è®¿é—®ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³• å› ä¸ºæ— çŠ¶æ€ç»„ä»¶æ˜¯ä¸éœ€è¦ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒçŠ¶æ€ç®¡ç†ï¼Œæ‰€ä»¥åº•å±‚å®ç°è¿™ç§å½¢å¼çš„ç»„ä»¶æ—¶æ˜¯ä¸ä¼šå®ç°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚æ‰€ä»¥æ— çŠ¶æ€ç»„ä»¶æ˜¯ä¸èƒ½å‚ä¸ç»„ä»¶çš„å„ä¸ªç”Ÿå‘½å‘¨æœŸç®¡ç†çš„ã€‚ æ— çŠ¶æ€ç»„ä»¶åªèƒ½è®¿é—®è¾“å…¥çš„propsï¼ŒåŒæ ·çš„propsä¼šå¾—åˆ°åŒæ ·çš„æ¸²æŸ“ç»“æœï¼Œä¸ä¼šæœ‰å‰¯ä½œç”¨ æ— çŠ¶æ€ç»„ä»¶è¢«é¼“åŠ±åœ¨å¤§å‹é¡¹ç›®ä¸­å°½å¯èƒ½ä»¥ç®€å•çš„å†™æ³•æ¥åˆ†å‰²åŸæœ¬åºå¤§çš„ç»„ä»¶ï¼Œæœªæ¥Reactä¹Ÿä¼šè¿™ç§é¢å‘æ— çŠ¶æ€ç»„ä»¶åœ¨è­¬å¦‚æ— æ„ä¹‰çš„æ£€æŸ¥å’Œå†…å­˜åˆ†é…é¢†åŸŸè¿›è¡Œä¸€ç³»åˆ—ä¼˜åŒ–ï¼Œæ‰€ä»¥åªè¦æœ‰å¯èƒ½ï¼Œå°½é‡ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ã€‚ ç»„ä»¶åˆ†ç±»ç»„ä»¶æŒ‰å†™æ³•åˆ†å¯ä»¥åˆ†ä¸ºç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶ï¼Œåœ¨ä¸Šé¢å·²ç»è¯¦ç»†ä»‹ç»è¿‡ã€‚æŒ‰ç…§ç»„ä»¶æœ‰æ— çŠ¶æ€åˆå¯ä»¥å°†ç»„ä»·åˆ†ä¸ºæœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ã€‚æŒ‰ç…§ç»„ä»¶çš„åŠŸèƒ½åˆ†åˆå¯ä»¥å°†ç»„ä»¶åˆ†ä¸ºå®¹å™¨ç»„ä»¶å’Œå±•ç¤ºç»„ä»¶ï¼Œåˆæˆ–è€…ç§°ä¸ºSmartç»„ä»¶å’ŒDumbç»„ä»¶ã€‚è¿™é‡Œä¸»è¦ä»‹ç»å®¹å™¨ç»„ä»¶å’Œå±•ç¤ºç»„ä»¶ã€‚ å±•ç¤ºç»„ä»¶ï¼š åªå…³æ³¨çœ‹èµ·æ¥æ€ä¹ˆæ · å†…éƒ¨å¯èƒ½åŒ…å«æœ‰å±•ç¤ºç»„ä»¶æˆ–å®¹å™¨ç»„ä»¶ï¼Œå¹¶ä¸”é€šå¸¸æœ‰DOMæ ‡ç­¾å’Œæ ·å¼ ä¸ç”¨æŒ‡æ˜æ•°æ®æ˜¯å¦‚ä½•åŠ è½½æˆ–è€…å˜åŒ–çš„ åªé€šè¿‡propsæ¥æ”¶æ•°æ®å’Œå›è°ƒå‡½æ•° ä¸€èˆ¬å†™ä¸ºå‡½æ•°å¼ç»„ä»¶ï¼Œé™¤éå®ƒä»¬éœ€è¦çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°æˆ–è€…æ€§èƒ½ä¼˜åŒ– å®¹å™¨ç»„ä»¶ï¼š åªå…³æ³¨å¦‚ä½•å·¥ä½œçš„ å†…éƒ¨ä¹Ÿè®¸åŒ…å«å±•ç¤ºç»„ä»¶æˆ–å®¹å™¨ç»„ä»¶ï¼Œä½†ä¸€èˆ¬ä¸ä¼šæœ‰DOMæ ‡ç­¾é™¤éä¸€ä¸ªåŒ…è£…çš„divï¼Œä¸å¯èƒ½ä¼šæœ‰æ ·å¼ ä¸ºå±•ç¤ºç»„ä»¶æˆ–å…¶ä»–å®¹å™¨ç»„ä»¶æä¾›æ•°æ®å’Œå›è°ƒå‡½æ•° ä¸€èˆ¬æ˜¯æœ‰çŠ¶æ€çš„ï¼Œè¢«è®¤ä¸ºæ˜¯æ•°æ®æº ä¸€èˆ¬æ˜¯ä»é«˜é˜¶ç»„ä»¶ç”Ÿæˆçš„ é€šè¿‡å°†ç»„ä»¶åˆ†ä¸ºè¿™ä¸¤ç§ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š å…³æ³¨ç‚¹æ›´å¥½çš„åˆ†ç¦» æ›´å¥½çš„å¤ç”¨æ€§ é«˜é˜¶ç»„ä»¶é«˜é˜¶ç»„ä»¶æŒ‡çš„ä¸æ˜¯ç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥å¢å¼ºç»„ä»¶ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ï¼Œè¿™ä¸ªæ–°ç»„ä»¶æ˜¯æ¥æ”¶ç»„ä»¶çš„åŠ å¼ºç‰ˆã€‚å‡è®¾æœ‰è¿™æ ·ä¸‰ä¸ªç»„ä»¶ class App1 extends React.Component &#123; state = &#123; data: null &#125;; componnetDidMount() &#123; const data = localStorage.getItem(\"data\"); this.setState(&#123; data &#125;); &#125; render() &#123; return &lt;div&gt;&#123;this.state.data&#125;&lt;/div&gt;; &#125;&#125;class App2 extends React.Component &#123; state = &#123; data: null &#125;; componnetDidMount() &#123; const data = localStorage.getItem(\"data\"); this.setState(&#123; data &#125;); &#125; render() &#123; return &lt;div&gt;&#123;this.state.data&#125;&lt;/div&gt;; &#125;&#125;class App3 extends React.Component &#123; state = &#123; data: null &#125;; componnetDidMount() &#123; const data = localStorage.getItem(\"data\"); this.setState(&#123; data &#125;); &#125; render() &#123; return &lt;div&gt;&#123;this.state.data&#125;&lt;/div&gt;; &#125;&#125; è§‚å¯Ÿè¿™ä¸‰ä¸ªç»„ä»¶ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯å®ƒä»¬åœ¨æŒ‚è½½åéƒ½è¦ä»localStorageä¸­è·å–æ•°æ®ï¼Œå¯è§è¿™æ ·çš„ä»£ç æ˜¯é‡å¤äº†çš„ï¼Œæˆ‘ä»¬å¦‚æœæ¯æ¬¡è¦ä»localStorageè·å–æ•°æ®ï¼Œéƒ½è¦å†™ä¸€éè¿™æ ·çš„ä»£ç ï¼Œé‚£æ€ä¹ˆå¯ä»¥è®©è¿™æ ·çš„é€»è¾‘å¤ç”¨å‘¢? è¿™å°±æ˜¯é«˜é˜¶ç»„ä»¶çš„ä½œç”¨ï¼Œè€ƒè™‘ä¸‹é¢è¿™æ ·çš„ä¸€ä¸ªå‡½æ•° function getDataFromLocalStorage(WrapComponent) &#123; class NewComponent extends React.Component &#123; state = &#123; data: null &#125;; componentDidComponent() &#123; const data = localStorage.getItem(\"data\"); this.setState(&#123; data &#125;); &#125; render() &#123; return &lt;WrapComponent data=&#123;this.state.data&#125; /&gt; &#125; &#125; return NewComponent&#125; è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ã€‚è¿™ä¸ªæ–°ç»„ä»¶åœ¨æŒ‚è½½åä¼šç”¨localStorageè¯»å–æ•°æ®ï¼Œå¹¶æ³¨å…¥åˆ°ä¼ å…¥çš„ç»„ä»¶çš„props.dataä¸­ã€‚è€Œè¿™ä¸ªä¼ å…¥çš„ç»„ä»¶ä¼šä½œä¸ºæ–°ç»„ä»¶renderå‡½æ•°çš„è¿”å›å€¼ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ–°ç»„ä»¶æ—¶ï¼Œä¸ä½¿ç”¨ä¼ å…¥çš„ç»„ä»¶ä¸€è‡´ï¼Œä¸è¿‡æ­¤æ—¶æ–°ç»„ä»¶çš„propsä¸­å·²ç»æœ‰äº†ä»localStorageè¯»å–çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ä¸‰ä¸ªç»„ä»¶éƒ½å¯ä»¥æ”¹é€ ä¸º class App1 extends React.Component &#123; render() &#123; return &lt;div&gt;&#123;this.props.data&#125;&lt;/div&gt; &#125; App1 = getDataFromLocalStorage(App1)&#125; class App2 extends React.Component &#123; render() &#123; return &lt;div&gt;&#123;this.props.data&#125;&lt;/div&gt; &#125; App2 = getDataFromLocalStorage(App2)&#125;class App3 extends React.Component &#123; render() &#123; return &lt;div&gt;&#123;this.props.data&#125;&lt;/div&gt; &#125; App3 = getDataFromLocalStorage(App3)&#125; æˆ‘ä»¬ä½¿ç”¨é«˜é˜¶å‡½æ•°ä¸ºä¸‰ä¸ªç»„ä»¶çš„props.dataä¸­æ³¨å…¥äº†æ•°æ®ï¼Œè¿™æ ·ä¸‰ä¸ªç»„ä»¶åªè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°±å¯ä»¥è‡ªåŠ¨å¯ä»¥åœ¨propsä¸­è·å–åˆ°æ•°æ®ï¼Œä»è€Œè¾¾åˆ°äº†ä»£ç çš„å¤ç”¨ã€‚å¯èƒ½è¯»åˆ°è¿™é‡Œä½ è¿˜ä¸èƒ½ç†è§£ï¼Œæ²¡å…³ç³»ï¼Œå¤šè¯»å‡ éå¥½å¥½æ¶ˆåŒ–ï¼Œæˆ–è€…å†™ä¸ªå‡ éå°±ä¹ æƒ¯äº†ã€‚ render propsrender propsçš„ç›®çš„åŒæ ·ä¹Ÿæ˜¯è¿›è¡Œä»£ç çš„å¤ç”¨ã€‚å†æ¬¡è€ƒè™‘ä¸Šé¢ä»£ç çš„å¤ç”¨ï¼Œä¸è¿‡è¿™æ¬¡ä½¿ç”¨render propså®ç°ä»£ç çš„å¤ç”¨ class GetDataFromLocalStorage extends React.Component &#123; state = &#123;data: null&#125; componentDidMount() &#123; this.setState(localStorage.getItem(\"data\")) &#125; render() &#123; return &#123;this.props.render(this.state)&#125; &#125;&#125;class App extends React.Component &#123; render() &#123; return ( &lt;GetDataFromLocalStorage render = &#123;(&#123;data&#125;) =&gt; &#123; return &lt;div&gt;data&lt;/div&gt; &#125;&#125; /&gt; ) &#125;&#125; ä»”ç»†é˜…è¯»ä¸Šé¢çš„ä»£ç ï¼Œæƒ³å¿…è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“è¯»æ‡‚çš„ã€‚Render Propsçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œé€šè¿‡ä¸€ä¸ªå‡½æ•°å°†classç»„ä»¶çš„stateä½œä¸ºpropsä¼ é€’ç»™çº¯å‡½æ•°ç»„ä»¶ã€‚ React Reduxå‡è®¾æœ‰è¿™ä¹ˆä¸€æ£µç»„ä»¶æ ‘ Com4ä»Appä¸­è·å–æ•°æ®ï¼Œéœ€è¦ä¸€å±‚ä¸€å±‚çš„ä¼ ä¸‹æ¥ï¼Œæœ‰çš„ä¸­é—´ç»„ä»¶å¯èƒ½åªæ˜¯ç”¨æ¥ä¼ é€’æ•°æ®ç”¨ï¼ŒåŒç†ï¼ŒCom4å‘Appä¼ é€’æ•°æ®ï¼Œä¹Ÿè¦é€šè¿‡å›è°ƒå‡½æ•°ä¸€å±‚å±‚å¾€ä¸Šä¼ ï¼Œå†è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œä»£ç å®åœ¨æ˜¯æ¯”è¾ƒè‡ƒè‚¿ï¼Œä¸ä»…å†™å‡ºäº†å¾ˆå¤šä¸å¿…è¦çš„ä»£ç ï¼Œè€Œä¸”ä½¿å¾—æ•°æ®ä¹Ÿæ¯”è¾ƒéš¾ä»¥ç†è§£ã€‚ å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªä¸­å¤®ä»“åº“ï¼Œä»»ä½•ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥å­˜å‚¨å’Œæ›´æ”¹æ•°æ®ï¼Œè€Œä¸éœ€è¦ä¸€å±‚å±‚çš„ä¼ é€’ ä¸ç®¡ç»„ä»¶å¤„äºå¤šæ·±çš„å±‚æ¬¡ï¼Œéƒ½å¯ä»¥ä»storeä¸­ç›´æ¥æ‹¿å–æ•°æ®ã€‚æ‰€ä»¥è¿™ä¸ªæƒ³æ³•æ€ä¹ˆåšåˆ°å‘¢? Contexté¦–å…ˆæ¥ä»‹ç»Reactä¸­ä½ å¯èƒ½æ°¸è¿œä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§contextã€‚æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¸­å®ƒä¸‹é¢çš„å­ç»„ä»¶é€šè¿‡contextçš„æ–¹å¼æä¾›æ•°æ®ï¼Œå…¶ä¸­çš„ä»»æ„å­ç»„ä»¶å‡å¯ä»¥é€šè¿‡contextè®¿é—®æ•°æ®ï¼Œè¿™å°±ä½¿å¾—contextç›¸å½“äºä¸­å¤®ä»“åº“ï¼Œé‚£æ€ä¹ˆç”¨å‘¢(ä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œå°±å†™çˆ¶å­ä¸¤å±‚)? See the Pen Contextçš„ä½¿ç”¨ by LastKnightCoder (@lastknightcoder) on CodePen. åœ¨ä¸Šé¢ç”¨åˆ°äº†PropTypesï¼Œæ‰€ä»¥éœ€è¦ä¸‹è½½prop-typesï¼Œä½¿ç”¨npmä¸‹è½½ cnpm install prop-types --save é¦–å…ˆçˆ¶ç»„ä»¶æä¾›contextè¦å£°æ˜æä¾›çš„æ•°æ®åç§°ä»¥åŠå¯¹åº”çš„ç±»å‹ static childContextTypes = &#123; data: PropTypes.string&#125; ç„¶ååœ¨getChildContextä¸­è¿”å›æ•°æ® getChildContext () &#123; return &#123; data: \"data\" &#125;&#125; è€Œå­ç»„ä»¶è¦ä½¿ç”¨çˆ¶ç»„ä»¶æä¾›çš„æ•°æ®ï¼Œé¦–å…ˆè¦å£°æ˜è¦ä½¿ç”¨çš„æ•°æ®æ˜¯ä»€ä¹ˆä»¥åŠç±»å‹ static contextTypes = &#123; data: PropTypes.string&#125; åªæœ‰è¿™æ ·æ‰å¯ä»¥é€šè¿‡this.contextè·å–æƒ³è¦çš„æ•°æ® &lt;div&gt;Childä¸­è·å–Contextï¼š&#123;this.context.data&#125;&lt;/div&gt; context æ‰“ç ´äº†ç»„ä»¶å’Œç»„ä»¶ä¹‹é—´é€šè¿‡ props ä¼ é€’æ•°æ®çš„è§„èŒƒï¼Œæå¤§åœ°å¢å¼ºäº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ã€‚è€Œä¸”ï¼Œå°±å¦‚å…¨å±€å˜é‡ä¸€æ ·ï¼Œcontext é‡Œé¢çš„æ•°æ®èƒ½è¢«éšæ„æ¥è§¦å°±èƒ½è¢«éšæ„ä¿®æ”¹ï¼Œæ¯ä¸ªç»„ä»¶éƒ½èƒ½å¤Ÿæ”¹ context é‡Œé¢çš„å†…å®¹ä¼šå¯¼è‡´ç¨‹åºçš„è¿è¡Œä¸å¯é¢„æ–™ã€‚ ä½†æ˜¯è¿™ç§æœºåˆ¶å¯¹äºå‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç†æ¥è¯´æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºæ¯•ç«Ÿå¾ˆå¤šçŠ¶æ€éƒ½ä¼šåœ¨ç»„ä»¶ä¹‹é—´è¿›è¡Œå…±äº«ï¼Œcontext ä¼šç»™æˆ‘ä»¬å¸¦æ¥å¾ˆå¤§çš„æ–¹ä¾¿ã€‚ä¸€äº›ç¬¬ä¸‰æ–¹çš„å‰ç«¯åº”ç”¨çŠ¶æ€ç®¡ç†çš„åº“ï¼ˆä¾‹å¦‚ Reduxï¼‰å°±æ˜¯å……åˆ†åœ°åˆ©ç”¨äº†è¿™ç§æœºåˆ¶ç»™æˆ‘ä»¬æä¾›ä¾¿åˆ©çš„çŠ¶æ€ç®¡ç†æœåŠ¡ã€‚ä½†æˆ‘ä»¬ä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨å†™ contextï¼Œä¹Ÿä¸è¦ç”¨å®ƒï¼Œåªéœ€è¦ç”¨å¥½è¿™äº›ç¬¬ä¸‰æ–¹çš„åº”ç”¨çŠ¶æ€ç®¡ç†åº“å°±è¡Œäº†ã€‚ Redux + React Reduxæœ¬æ¥è¿˜æƒ³ç»§ç»­å†™Reduxï¼ŒReact-Reduxçš„ï¼Œä½†æ˜¯æˆ‘å‘ç°React.js å°ä¹¦å†™çš„å®åœ¨æ˜¯å¤ªå¥½äº†ï¼Œæ¨èä»”ç»†é˜…è¯»å…¶ä¸­çš„Reduxå’ŒReact-Reduxçš„éƒ¨åˆ†ã€‚ React Hooksä½¿ç”¨React Hooksï¼Œä½¿å¾—åœ¨å‡½æ•°å¼ç»„ä»¶å¯ä»¥æœ‰çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ä»¿ç…§ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œç”šè‡³å¯ä»¥æ›¿ä»£React Reduxã€‚æ‰€è°“çš„Hooksï¼Œå°±æ˜¯æŒ‡ä¸€äº›å‡½æ•°ï¼Œé€šè¿‡è¿™äº›å‡½æ•°å¯ä»¥åœ¨å‡½æ•°å¼ç»„å»ºä¸­å®ç°ç±»ç»„ä»¶çš„åŠŸèƒ½ã€‚ é’©å­å‡½æ•°ä¸€èˆ¬æ˜¯useXxxçš„å½¢å¼ï¼Œæ‰€æœ‰çš„é’©å­å‡½æ•°éƒ½åªèƒ½å†™åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ã€‚ useStateæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨state See the Pen useStateçš„ä½¿ç”¨ by LastKnightCoder (@lastknightcoder) on CodePen. é€šè¿‡useStateæ¥åˆ›å»ºä¸€ä¸ªçŠ¶æ€ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯çŠ¶æ€çš„åˆå§‹å€¼ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯çŠ¶æ€ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥è®¾ç½®çŠ¶æ€çš„ï¼Œå¦‚ä¸Šé¢ const [number, setNumber] = useState(0) å…¶ä¸­numberå°±æ˜¯çŠ¶æ€ï¼Œåˆå§‹å€¼ä¸º0ï¼Œè€ŒsetNumberæ˜¯ç”¨æ¥è®¾ç½®numberçš„(äºŒè€…çš„åå­—å¯ä»¥éšä¾¿èµ·ï¼Œä»€ä¹ˆchangeNumberéšæ„)ï¼Œæ¯å½“æˆ‘ä»¬ç‚¹å‡»+1æŒ‰é’®ï¼Œéƒ½ä¼šå°†å½“å‰çš„numberåŠ ä¸€ã€‚ useEffectuseEffectä¸»è¦æ˜¯ç”¨æ¥æ‰§è¡Œä¸€äº›å‰¯ä½œç”¨çš„ä»£ç ï¼Œæ¯”å¦‚æ‹¿æ•°æ® See the Pen useEffect by LastKnightCoder (@lastknightcoder) on CodePen. useEffectæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä¼šç›‘è§†æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå½“æ•°ç»„ä¸­çš„å…ƒç´ å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ”¹å˜dataæ—¶ï¼Œç”±äºdataå‘ç”Ÿæ”¹å˜ï¼ŒuseEffectä¸­çš„å›è°ƒå‡½æ•°ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœå¸Œæœ›æ˜¯componentDidMountç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ç‰¹ç‚¹ï¼Œå³åªåœ¨ç»„ä»¶æŒ‚è½½æ˜¯æ‰§è¡Œä¸€æ¬¡ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ã€‚ useContextuseContextçš„ä½œç”¨æ­£å¦‚åœ¨React Reduxä¸­ä»‹ç»çš„Contextä¸­ä¸€æ ·ï¼Œå¯ä»¥ä½¿å¾—å­ç»„ä»¶æ— è®ºåœ¨ä»€ä¹ˆæ·±åº¦éƒ½å¯ä»¥ç›´æ¥è®¿é—®çˆ¶ç»„ä»¶æä¾›çš„Contextï¼Œè¿™ä¸ªç»™ä¸ªä¾‹å­å¤§å®¶å°±å¯ä»¥æ˜ç™½ See the Pen useContextçš„ä½¿ç”¨ by LastKnightCoder (@lastknightcoder) on CodePen. ## useReducer å¦‚ä½•ä»”ç»†é˜…è¯»è¿‡React.jså°ä¹¦ï¼Œé‚£ä¹ˆæƒ³å¿…ä½ å·²ç»ç†è§£äº†reducerçš„ä½œç”¨ï¼ŒuseReduceræ¥æ”¶ä¸€ä¸ªreducerå’Œåˆå§‹çŠ¶æ€initStateï¼Œè¿”å›stateå’Œdispatchï¼Œå¦‚ä¸‹ See the Pen useReducer by LastKnightCoder (@lastknightcoder) on CodePen. ç»“åˆuseContextå’ŒuseReduceræˆ‘ä»¬å¯ä»¥å°†useContextå’ŒuseReducerç»“åˆï¼Œæ¥è¾¾åˆ°React-Reduxçš„æ•ˆæœï¼Œå…·ä½“å°±æ˜¯å°†useReduceräº§ç”Ÿçš„stateå’Œdispatchä½œä¸ºContextä¼ ä¸‹å»ï¼Œå¦‚ä¸‹ See the Pen useContextä¸useReducerç»“åˆ by LastKnightCoder (@lastknightcoder) on CodePen. å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ—¢ç„¶æ˜¯æ­å»ºä¸€ä¸ªåŸºäºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„åšå®¢ç³»ç»Ÿï¼Œé‚£ä¹ˆå°±è¦ç”¨åˆ°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç»„ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©BraftEditorã€‚ ä½¿ç”¨npmå®‰è£…åˆ°ä½ çš„é¡¹ç›® cnpm install braft-editor --save æ–°å»ºpagesæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åœ¨pagesä¸­æ–°å»ºæ–‡ä»¶å¤¹RichTextï¼Œåœ¨RichTextä¸­æ–°å»ºindex.jsxï¼Œå†…å®¹å¦‚ä¸‹ import React, &#123;useState&#125; from 'react'import BraftEditor from 'braft-editor'import 'braft-editor/dist/index.css'function RichText(props) &#123; const [editorState, setEditorState] = useState(BraftEditor.createEditorState(\"&lt;p&gt;123&lt;/p&gt;\")) const handleEditorChange = (editorState) =&gt; &#123; &#125; const handleEditorSave = (editorState) =&gt; &#123; &#125; return ( &lt;BraftEditor value=&#123;editorState&#125; onChange=&#123;handleEditorChange&#125; onSave=&#123;handleEditorSave&#125; /&gt; )&#125;export default RichText æˆ‘ä»¬åœ¨srcä¸‹çš„index.jsä¸­å¼•å…¥è¯¥ç»„ä»¶ï¼Œå¹¶æ¸²æŸ“åˆ°domä¸­ import React from 'react';import ReactDOM from 'react-dom';import RichText from './pages/RichText';ReactDOM.render(&lt;RichText /&gt;, document.getElementById(\"root\")); è¿™æ—¶ä½ ä½¿ç”¨yarn startæˆ–è€…npm startå¯åŠ¨é¡¹ç›®ï¼Œåœ¨ç«¯å£3000çœ‹åˆ°çš„é¡µé¢åº”è¯¥æ˜¯è¿™æ ·çš„ ç°åœ¨æˆ‘ä»¬æ¥çœ‹BraftEditorç»„ä»¶æ¥æ”¶çš„ä¸‰ä¸ªpropsï¼Œåˆ†åˆ«æ˜¯ value onChange onSave æˆ‘ä»¬ä¸€ä¸ªä¸ªæ¥çœ‹ã€‚ é¦–å…ˆçœ‹valueï¼Œå®ƒæ˜¯BraftEditorç»„ä»¶è¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ªeditorStateå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡BraftEditor.createEditorState()åˆ›å»ºeditorStateå¯¹è±¡ï¼Œå®ƒæ¥æ”¶htmlå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªrawå¯¹è±¡(rawå¯¹è±¡æ˜¯å®ƒè‡ªå®šä¹‰çš„å¯¹è±¡ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¿å­˜å¯Œæ–‡æœ¬çš„å†…å®¹å°±æ˜¯ä¿å­˜rawå¯¹è±¡)ï¼Œä¹Ÿå¯ä»¥é€šè¿‡editorStateå®ä¾‹è½¬åŒ–ä¸ºhtmlå­—ç¬¦ä¸²æˆ–è€…rawå¯¹è±¡ï¼Œå¦‚ // åˆ›å»ºedirorStateå¯¹è±¡const editorState = BraftEditor.createEditor(\"&lt;p&gt;123&lt;/p&gt;\");const htmlContent = editorState.toHTML();const rawContent = editorState.toRAW(); å†è€…æ¥çœ‹onChangeï¼Œå®ƒæ˜¯å½“BraftEditorå‘ç”Ÿæ”¹å˜æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ï¼Œå®ƒä¼šä¼ å…¥ä¸€ä¸ªeditorStateå¯¹è±¡ï¼Œè¿™ä¸ªeditorStateå¯¹è±¡ä»£è¡¨çš„å°±æ˜¯å½“å‰çš„æ–‡æœ¬å†…å®¹ã€‚ æœ€åçœ‹onSaveï¼Œå®ƒæ˜¯å½“æŒ‰ä¸‹Ctrl + Sä¿å­˜æ—¶ä¼šè°ƒç”¨çš„æ–¹æ³•ï¼Œä¹Ÿä¼šå°†ä»£è¡¨å½“å‰æ–‡æœ¬å†…å®¹çš„editorStateä¼ å…¥ã€‚ æˆ‘ä»¬æ¥åšä¸€ä¸ªç®€å•çš„æ¡ˆä¾‹ï¼Œå½“æŒ‰ä¸‹Ctrl + Sæ—¶ï¼Œå°†æ•°æ®ä»¥rawå¯¹è±¡çš„æ ¼å¼ä¿å­˜åœ¨localStorageä¸­ï¼Œå½“å¯Œæ–‡æœ¬åŠ è½½æ—¶ï¼Œä»localStorageä¸­è¯»å–æ•°æ® import React, &#123;useState, useEffect&#125; from 'react'import BraftEditor from 'braft-editor'import 'braft-editor/dist/index.css'function RichText(props) &#123; const [editorState, setEditorState] = useState(BraftEditor.createEditorState(null)) useEffect(() =&gt; &#123; const rawContent = localStorage.getItem(\"rawContent\") || null; setEditorState(BraftEditor.createEditorState(rawContent)) &#125;, []) const handleEditorChange = (editorState) =&gt; &#123; &#125; const handleEditorSave = (editorState) =&gt; &#123; const rawContent = editorState.toRAW(); localStorage.setItem(\"rawContent\", rawContent) &#125; return ( &lt;BraftEditor value=&#123;editorState&#125; onChange=&#123;handleEditorChange&#125; onSave=&#123;handleEditorSave&#125; /&gt; )&#125;export default RichText è¿™é‡Œå°±å¢åŠ äº†ä¸¤ä¸ªåœ°æ–¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¢åŠ äº†useEffectï¼Œä½œç”¨æ˜¯å½“ç»„ä»¶æŒ‚è½½åä»localStorageä¸­è¯»å–æ•°æ®(æ—¢ç„¶ä»localStorageåˆå§‹åŒ–ï¼Œé‚£ä¹ˆåŸæ¥çš„â€&lt;p&gt;123&lt;/p&gt;â€œå°±æ¢ä¸ºäº†null)ï¼Œç¬¬äºŒä¸ªæ˜¯æ›´æ”¹äº†handleEditorSaveï¼Œå½“ä¿å­˜æ—¶å°†æ•°æ®ä¿å­˜åœ¨localStorageä¸­ï¼Œä¸Šé¢çš„ä»£ç éƒ½å¾ˆå®¹æ˜“ç†è§£ï¼Œä¸å†è§£é‡Šã€‚å¦‚æœæˆåŠŸäº†çš„è¯ï¼Œåœ¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­è¾“å…¥å¹¶æŒ‰Ctrl + Sä¿å­˜ï¼Œç„¶ååˆ·æ–°ï¼Œæ•°æ®ä¼šåŸæ ·çš„é‡ç°ã€‚ é¡µé¢å¸ƒå±€æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é¡¹ç›®çš„æ¯ä¸ªé¡µé¢çš„å¸ƒå±€ Home Edit Display Login å…¶ä¸­Home, Display, Editéƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„å¸ƒå±€ è€ŒLoginçš„å¸ƒå±€æ˜¯ æ‰€ä»¥æˆ‘ä»¬æŠ½ç¦»å‡ºå¸ƒå±€ç»„ä»¶ï¼ŒHomeï¼ŒEdit,Displayä¸‰è€…çš„å¸ƒå±€æŠ½ç¦»ä¸ºBasicLayoutï¼Œè€ŒLoginçš„å¸ƒå±€æŠ½ç¦»ä¸ºLoginLayoutç»„ä»¶ï¼Œæ³¨æ„åˆ°ä»–ä»¬çš„Hederéƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠHeaderæŠ½ç¦»ä¸ºä¸€ä¸ªå…¬å…±çš„ç»„ä»¶ã€‚ Headeråœ¨srcä¸‹æ–°å»ºcomponentsç›®å½•ï¼Œåœ¨å…¶ä¸­æ–°å»ºHeaderæ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­æ–°å»ºindex.jsxå’Œindex.module.cssã€‚index.jsxçš„å†…å®¹å¦‚ä¸‹ import React from 'react'import styles from './index.module.css'function Header(props) &#123; const toEdit = (e) =&gt; &#123; e.preventDefault() &#125; const toHome = (e) =&gt; &#123; e.preventDefault() &#125; return ( &lt;div className=&#123;styles.header&#125;&gt; &lt;div className=&#123;styles.nav&#125;&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=\"/home\" onClick=&#123;toHome&#125;&gt;é¦–é¡µ&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"/edit\" onClick=&#123;toEdit&#125;&gt;å†™åšå®¢&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;div className=&#123;styles.desc&#125;&gt; Coder &lt;/div&gt; &lt;/div&gt; )&#125;export default Header index.module.cssä¸­çš„å†…å®¹ä¸º .nav &#123; width: 100%; height: 100px; position: relative;&#125;.nav ul &#123; position: absolute; top: 0; right: 0; padding: 0; margin: 0;&#125;.nav ul li &#123; list-style: none; float: left; width: 80px; height: 30px; line-height: 30px; text-align: center; padding-top: 5px;&#125;.nav ul li a &#123; text-decoration: none; color: white; font-family: Consolas, \"æ¥·ä½“\";&#125;.nav ul li:hover &#123; border-bottom: 1px solid #FFF; box-shadow: 0 0 10px #FFF inset;&#125;.desc &#123; width: 100%; height: 100px; font-size: 40px; line-height: 100px; color: white; font-family: Consolas, \"æ¥·ä½“\";&#125; ä¸Šé¢çš„å†…å®¹æƒ³å¿…è¿˜æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ï¼Œå…¶ä¸­Headerä¸­çš„ä¸¤ä¸ªaæ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶å‡æ²¡æœ‰å¤„ç†ï¼Œè¿™ä¸¤ä¸ªaæ ‡ç­¾æ˜¯ç”¨äºåšè·¯ç”±è·³è½¬ç”¨çš„ï¼Œç­‰ç”¨åˆ°åœ¨å›è¿‡å¤´æ¥è¡¥å……ã€‚ BasicLayoutåœ¨srcä¸‹æ–°å»ºlayoutsæ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­æ–°å»ºæ–‡ä»¶å¤¹BasicLayoutï¼Œåœ¨BasicLayoutä¸­æ–°å»ºindex.jsxå’Œindex.module.cssï¼Œå…¶ä¸­index.jsxçš„å†…å®¹ä¸º import React from 'react'import styles from './index.module.css'import Header from './../../components/Header'function BasicLayout(props) &#123; const &#123; children &#125; = props; return ( &lt;div className=&#123;styles.box&#125;&gt; &lt;div className=&#123;styles.container&#125;&gt; &lt;Header /&gt; &lt;div className=&#123;styles.main&#125;&gt; &lt;div className=&#123;styles.content&#125;&gt; &#123;children&#125; &lt;/div&gt; &lt;div className=&#123;styles.aside&#125;&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; )&#125;export default BasicLayout å…¶ä¸­index.module.cssä¸­çš„å†…å®¹ä¸º .box &#123; width: 100%; background: #d8e2eb url(./../../assets/img/bg.jpg) no-repeat top center; min-height: 100vh;&#125;.container &#123; max-width: 1200px; margin: 0 auto; padding: 0 50px;&#125;.main &#123; display: flex;&#125;.content &#123; flex: 3; margin-right: 20px;&#125;.aside &#123; flex: 1;&#125; è¿™é‡Œè¦ç”¨åˆ°èƒŒæ™¯å›¾ç‰‡ï¼Œæˆ‘ä»¬åœ¨srcä¸‹æ–°å»ºassetsæ–‡ä»¶å¤¹ï¼Œç„¶åæ–°å»ºimgï¼Œåœ¨å…¶ä¸­æ”¾å…¥èƒŒæ™¯å›¾ç‰‡ï¼ŒèƒŒæ™¯å›¾ç‰‡åœ¨è¿™é‡Œ æ¥åœ¨srcä¸‹æ–°å»ºcommon.cssï¼Œä»¥æ¶ˆé™¤å†…å¤–è¾¹è·ï¼Œè®¾ç½®å­—ä½“ * &#123; margin: 0; padding: 0;&#125;div &#123; font-family: Consolas, \"æ¥·ä½“\"; box-sizing: border-box;&#125; ç°åœ¨æˆ‘ä»¬åœ¨src/index.jsä¸­å¼•ç”¨è¯¥å¸ƒå±€çœ‹çœ‹æ•ˆæœ import React from 'react';import ReactDOM from 'react-dom';import RichText from './pages/RichText';import BasicLayout from './layouts/BasicLayout'import './common.css'ReactDOM.render(&lt;BasicLayout&gt; &lt;RichText /&gt; &lt;/BasicLayout&gt;, document.getElementById(\"root\")); å¦‚ä¸‹ï¼š LoginLayoutåœ¨layoutsä¸‹æ–°å»ºLoginLayoutæ–‡ä»¶å¤¹ï¼Œåœ¨LoginLayoutä¸­æ–°å»ºindex.jsxå’Œindex.module.cssã€‚æœ‰äº†BasicLayoutçš„ç»éªŒï¼Œä»£ç çš„å†…å®¹ä¸å¿…è§£é‡Šï¼Œç›´æ¥ä¸Šä»£ç ã€‚index.jsx import React from 'react'import styles from './index.module.css'import Header from './../../components/Header'function LoginLayout(props) &#123; const &#123; children &#125; = props; return ( &lt;div className=&#123;styles.box&#125;&gt; &lt;div className=&#123;styles.container&#125;&gt; &lt;Header /&gt; &lt;div className=&#123;styles.main&#125;&gt; &#123;children&#125; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; )&#125;export default LoginLayout index.module.css .box &#123; width: 100%; background: #d8e2eb url(./../../assets/img/bg.jpg) no-repeat top center; min-height: 100vh;&#125;.container &#123; max-width: 1200px; margin: 0 auto; padding: 0 50px;&#125;.main &#123; width : 300px; margin: 0 auto;&#125; é¡µé¢è·¯ç”±ä¸ºäº†ä½¿ç”¨è·¯ç”±ï¼Œå…ˆä¸‹å¥½react-router-dom cnpm install react-router-dom --save è¯¥blogé¡¹ç›®æ€»å…±æœ‰å››ä¸ªé¡µé¢ Homeï¼šé¡µé¢ä¸»é¡µ Displayï¼šé˜…è¯»æ–‡ç« çš„é¡µé¢ Editï¼šç¼–è¾‘æ–‡ç« çš„é¡µé¢ Loginï¼šç™»å½•é¡µé¢ ä¸ºäº†æ¼”ç¤ºè·¯ç”±ï¼Œåœ¨pagesä¸­åˆ†åˆ«æ–°å»ºHome, Display, Edit, Loginå››ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶å¤¹ä¸­æ–°å»ºindex.jsxï¼ŒåŒæ—¶åœ¨Editæ–‡ä»¶å¤¹äº†æ–°å»ºcomponentsæ–‡ä»¶å¤¹ï¼Œå°†RichTextæ–‡ä»¶å¤¹å…¨éƒ¨ç§»å…¥åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­(å› ä¸ºRichTextå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å±äºç¼–è¾‘æ–‡ç« é¡µé¢çš„ä¸€éƒ¨åˆ†)ï¼Œç®€å•çš„åœ¨æ¯ä¸ªæ–‡ä»¶çš„index.jsxå†™ä¸‹ä¸€äº›å†…å®¹ï¼Œå…·ä½“çš„å†…å®¹åœ¨åé¢æ·»åŠ ã€‚ // Home/index.jsximport React from 'react'import BasicLayout from './../../layouts/BasicLayout'import &#123;withRouter&#125; from 'react-router-dom'function Home(props) &#123; return ( &lt;BasicLayout&gt; Home &lt;/BasicLayout&gt; )&#125;export default withRouter(Home) // Display/index.jsximport React from 'react'import BasicLayout from './../../layouts/BasicLayout'import &#123;withRouter&#125; from 'react-router-dom'function Display(props) &#123; return ( &lt;BasicLayout&gt; Display &lt;/BasicLayout&gt; )&#125;export default withRouter(Display) // Edit/index.jsximport React from 'react'import BasicLayout from './../../layouts/BasicLayout'import &#123;withRouter&#125; from 'react-router-dom'import RichText from './components/RichText'function Edit() &#123; return ( &lt;BasicLayout&gt; &lt;RichText /&gt; &lt;/BasicLayout&gt; )&#125;export default withRouter(Edit) // Login/index.jsximport React from 'react'import &#123;withRouter&#125; from 'react-router-dom'import LoginLayout from './../../layouts/LoginLayout'function Login(props) &#123; return ( &lt;LoginLayout&gt; login &lt;/LoginLayout&gt; )&#125;export default withRouter(Login) è®¾è®¡é¡µé¢è·¯ç”±å¦‚ä¸‹ path component redirect /home Home /display/:id Display /edit Edit /edit:id Edit /login Login / /home æ³¨æ„åˆ°Editç»„ä»¶å¯¹åº”ä¸¤ä¸ªè·¯å¾„ï¼Œå› ä¸ºç¼–è¾‘æ–‡ç« æœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æ˜¯æ·»åŠ æ–‡ç« ï¼Œè¿™æ—¶æ˜¯/editè·¯å¾„ï¼Œç¬¬äºŒç§æ˜¯ç¼–è¾‘æ–‡ç« ï¼Œè¿™æ—¶éœ€è¦ä¼ å…¥æ–‡ç« çš„idï¼Œæ‰€ä»¥è¿™æ—¶æ˜¯/edit/:idè·¯å¾„ã€‚ åœ¨srcä¸‹æ–°å»ºæ–‡ä»¶å¤¹configï¼Œåœ¨configæ–°å»ºroutes.jsï¼Œé‡Œé¢è®¾ç½®è·¯ç”±ä¿¡æ¯ï¼Œå¦‚ä¸‹ import Home from './../pages/Home/index'import Display from './../pages/Display/index'import Edit from './../pages/Edit/index'import Login from './../pages/Login/index'export default [ &#123; path: \"/login\", component: Login &#125;, &#123; path: \"/home\", component: Home &#125;, &#123; path: \"/display/:id\", component: Display &#125;, &#123; path: \"/edit\", component: Edit &#125;, &#123; path: \"/edit/:id\", component: Edit &#125;, &#123; path: \"/\", redirect: \"/home\", exact: true &#125;,] åœ¨srcä¸‹æ–°å»ºrouter.jsï¼Œç”¨æ¥æ¸²æŸ“è·¯ç”±ï¼Œå†…å®¹å¦‚ä¸‹ import React from 'react'import routes from './config/routes'import &#123;Switch, BrowserRouter as Router, Route, Redirect &#125; from 'react-router-dom'import &#123; createBrowserHistory &#125; from 'history';const history = createBrowserHistory();// è¿”å›å¯èƒ½æ˜¯Redirect ä¹Ÿå¯èƒ½æ˜¯Route æ‰€ä»¥ä½¿ç”¨RouteItemå°è£…const RouteItem = (props) =&gt; &#123; const &#123; path, component: Component, redirect, key, exact &#125; = props; if (redirect) &#123; return &lt;Redirect from=&#123;path&#125; to=&#123;redirect&#125; key=&#123;key&#125; /&gt; &#125; return ( &lt;Route key=&#123;key&#125; exact=&#123;exact&#125; path=&#123;path&#125; render=&#123;componentProps =&gt; &#123; return ( &lt;Component &#123;...componentProps&#125; /&gt; ) &#125;&#125; /&gt; );&#125;;const router = () =&gt; &#123; return ( &lt;Router&gt; &#123;/* Switch å”¯ä¸€åŒ¹é… */&#125; &lt;Switch&gt; &#123;routes.map((item, id) =&gt; &#123; return RouteItem(&#123; key: id, ...item &#125;) &#125;)&#125; &lt;/Switch&gt; &lt;/Router&gt; );&#125;;export default router; æ¥ç€åœ¨src/index.jsä¸­æ¸²æŸ“å‡ºæ¥ import ReactDOM from 'react-dom';import router from './router'import './common.css';ReactDOM.render(router(), document.getElementById(\"root\")); æ¥ç€å¯åŠ¨é¡¹ç›®(npm startæˆ–yarn start)ï¼Œæ”¹å˜æµè§ˆçš„url(å¦‚localhost:3000/display)çœ‹çœ‹é¡µé¢æ˜¯å¦èƒ½æˆåŠŸè·³è½¬(æˆ‘è¿™é‡Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¦‚æœä½ ä¸èƒ½çš„è¯ï¼Œå›è¿‡å¤´ä»”ç»†çœ‹çœ‹å§)ã€‚ é¡µé¢ç¼–å†™antdè¡¨å•çš„ä½¿ç”¨è¦ä½¿ç”¨antdï¼Œå…ˆä¸‹è½½antd cnpm install antd --save é¦–å…ˆçœ‹ä¸€ä¸ªè¡¨å•çš„ä¾‹å­ï¼Œåœ¨srcä¸‹æ–°å»ºä¸€ä¸ªtestæ–‡ä»¶å¤¹ï¼Œæ–°å»ºTextAntdForm.jsxï¼Œå†…å®¹å¦‚ä¸‹(å…ˆä¸ç®¡çœ‹å¾—æ‡‚çœ‹ä¸æ‡‚ï¼Œåé¢è§£é‡Š) import React from 'react'import &#123;Form, Input, Button&#125; from 'antd'function TextAntdForm(props) &#123; const &#123;getFieldDecorator, validateFields&#125; = props.form const handleSubmit = (event) =&gt; &#123; event.preventDefault(); validateFields((error, values) =&gt; &#123; if (!error) &#123; console.log(values); &#125; &#125;) &#125; return( &lt;div style=&#123;&#123;width: \"300px\", margin: \"100px auto\", fontFamily: \"Consolas, 'æ¥·ä½“'\"&#125;&#125;&gt; &lt;Form onSubmit=&#123;handleSubmit&#125;&gt; &lt;Form.Item label=\"ç”¨æˆ·å\"&gt; &#123;getFieldDecorator('title', &#123; rules: [&#123; required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', &#125;], &#125;)( &lt;Input size=\"large\" placeholder=\"è¯·è¾“å…¥ç”¨æˆ·å\"/&gt; )&#125; &lt;/Form.Item&gt; &lt;Form.Item label=\"å¯†ç \"&gt; &#123;getFieldDecorator('password', &#123; rules: [&#123; required: true, message: 'è¯·è¾“å…¥å¯†ç ', &#125;], &#125;)( &lt;Input.Password size=\"large\" placeholder=\"è¯·è¾“å…¥å¯†ç \"/&gt; )&#125; &lt;/Form.Item&gt; &lt;Form.Item&gt; &lt;Button size=\"large\" type=\"primary\" htmlType=\"submit\"&gt;æäº¤&lt;/Button&gt; &lt;/Form.Item&gt; &lt;/Form&gt; &lt;/div&gt; )&#125;export default Form.create()(TextAntdForm) ä¿®æ”¹src/index.jsæ¸²æŸ“è¯¥ç»„ä»¶(è®°å¾—å¼•å…¥antd/dits/antd.cssï¼Œå¦åˆ™antdç»„ä»¶æ²¡æœ‰æ ·å¼) import React from 'react'import ReactDOM from 'react-dom';// import router from './router'import TestAntdForm from './test/TestAntdForm'import 'antd/dist/antd.css'import './common.css';// ReactDOM.render(router(), document.getElementById(\"root\"));ReactDOM.render(&lt;TestAntdForm /&gt;, document.getElementById(\"root\")); ç°åœ¨æ¥è§£é‡Šä¸Šé¢çš„ä»£ç ï¼Œé¦–å…ˆçœ‹æœ€åä¸€è¡Œ Form.create()(TextAntdForm) è¿˜è®°å¾—é«˜é˜¶ç»„ä»¶å—ï¼ŒForm.create()å°±æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œä»–ä¼šå‘ç»„ä»¶çš„propsä¸­æ³¨å…¥formï¼Œformæä¾›äº†ä¸€äº›APIï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªï¼š getFieldDecoratorï¼šç”¨äºå’Œè¡¨å•è¿›è¡ŒåŒå‘ç»‘å®š getFieldDecorator('title', &#123; rules: [&#123; required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', &#125;],&#125;)( &lt;Input size=\"large\" placeholder=\"è¯·è¾“å…¥ç”¨æˆ·å\"/&gt;) ä¸Šé¢å°†Inputä¸è¡¨å•é¡¹è¿›è¡Œäº†ç»‘å®šï¼ŒgetFieldDecoratoræ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯idï¼Œæ ¹æ®å®ƒå¯ä»¥è·å–è¾“å…¥æ§ä»¶çš„å€¼æˆ–è€…è®¾ç½®è¾“å…¥æ§ä»¶çš„å€¼ï¼Œæ˜¯å¿…å¡«é¡¹ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯optionsï¼Œé‡Œé¢å¯ä»¥æœ‰å¾ˆå¤šå±æ€§ï¼Œè¿™é‡Œä½¿ç”¨äº†rulesï¼Œå®šä¹‰äº†æ ¡éªŒçš„è§„åˆ™ï¼Œrequiredè¡¨ç¤ºæ˜¯å¦å¿…å¡«ï¼Œmessageè¡¨ç¤ºæœªå¡«æ—¶æ˜¾ç¤ºçš„æ¶ˆæ¯æ–‡å­—ã€‚ validateFieldsï¼šæ ¡éªŒ é‡Œé¢æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºerrorï¼Œå½“ä¸æ»¡è¶³æ ¡éªŒè§„åˆ™æ—¶errorçš„å€¼éç©ºï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯valuesï¼Œä¼šå°†ç»‘å®šè¡¨å•çš„å€¼ä»¥å¯¹è±¡çš„å½¢å¼ä¼ ç»™valuesï¼Œé”®å°±æ˜¯åœ¨getFieldDecoratorä¼ å…¥çš„idã€‚ ä¸Šé¢åœ¨æäº¤è¡¨å•åï¼Œä¼šè°ƒç”¨Formçš„onSubmitå›è°ƒå‡½æ•°ï¼Œåœ¨å›è°ƒå‡½æ•°ï¼Œæˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œäº†æ ¡éªŒï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¾“å…¥è¡¨å•çš„é”®å€¼å¯¹ä»¥å¯¹è±¡çš„å½¢å¼è·å–åˆ°valuesï¼Œå¹¶æ‰“å°å‡ºæ¥ é¡µé¢æ•°æ®æˆ‘ä»¬å°†æ•°æ®è®¾ç½®ä¸ºä¸€ä¸ªæ•°ç»„datasï¼Œå®ƒçš„æ ¼å¼å¦‚ä¸‹ datas = [ &#123;title: , brief: , isTop: , content: &#125; &#123;title: , brief: , isTop: , content: &#125;] Homeç»„ä»¶æ ¹æ®dataså±•ç¤ºæ•°æ®ï¼ŒEditå’ŒDisplayç»„ä»¶æ ¹æ®idå’Œdatasè·å–è¦å±•ç¤ºçš„æ•°æ®ï¼Œç”±äºå¤šä¸ªç»„ä»¶éƒ½è¦ç”¨åˆ°æ•°æ®ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨useContextå’ŒuseReduceræ¥åˆ†å‘æ•°æ®ã€‚ åœ¨srcä¸‹æ–°å»ºProvider.jsxï¼Œç”¨æ¥æä¾›stateå’Œdispatchï¼Œå†…å®¹å¦‚ä¸‹ import React, &#123;useReducer&#125; from 'react'export const Context = React.createContext();const reducer = (state, action) =&gt; &#123; const tempDatas = state.datas // æŒ‰é“ç†caseåé¢è·Ÿçš„éƒ½æ˜¯å¸¸é‡ï¼Œæˆ‘è¿™é‡Œä¸ºäº†ç®€å• switch(action.type) &#123; case 'insertData': tempDatas[tempDatas.length] = action.data; return &#123;...state, datas: tempDatas&#125; case 'updateData': tempDatas[action.id] = action.data return &#123;...state, datas: tempDatas&#125; case 'deleteData': tempDatas.splice(action.id, 1) return &#123;...state, datas: tempDatas&#125; case 'changeOperation': return &#123;...state, operation: action.operation&#125; default: return state &#125;&#125;const initState = &#123; // éšä¾¿å†™çš„æ•°æ®ç”¨æ¥å®éªŒ éšåä¼šåˆ æ‰ datas: [&#123;title: 'aaa', isTop: true, brief: 'hahah'&#125;, content: '&lt;p&gt;123&lt;/p&gt;'], // ç”¨æ¥åˆ¤æ–­æ˜¯æ·»åŠ æ–‡ç« è¿˜æ˜¯ç¼–è¾‘æ–‡ç«  operation: 'ADD'&#125;function Provider(props) &#123; const [state, dispatch] = useReducer(reducer, initState) const &#123;children&#125; = props return ( &lt;Context.Provider value=&#123;&#123;state, dispatch&#125;&#125;&gt; &#123;children&#125; &lt;/Context.Provider&gt; )&#125;export default Provider æ›´æ”¹router.jsï¼Œåœ¨æœ€ä¸Šé¢åŠ ä¸ŠProvider import Provider from './Provider'// ä¸Šé¢æ²¡æœ‰å˜åŒ–ï¼Œé™¤äº†import Providerï¼Œæ•…æ­¤çœç•¥const router = () =&gt; &#123; return ( &lt;Provider&gt; &lt;Router history=&#123;history&#125;&gt; &lt;Switch&gt; &#123;routes.map((item, id) =&gt; &#123; return RouteItem(&#123; key: id, ...item, history: history &#125;) &#125;)&#125; &lt;/Switch&gt; &lt;/Router&gt; &lt;/Provider&gt; );&#125;;export default router Homeè§‚å¯ŸHomeé¡µé¢ å‘ç°Homeæ˜¯ç”±è¿™ä¸€ä¸ªä¸ªItemç»„æˆï¼ŒItemä¸­çš„æ•°æ®æ­£æ˜¯datasæ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„å†…å®¹ï¼Œåœ¨Homeä¸­æ–°å»ºæ–‡ä»¶å¤¹Itemï¼Œå¹¶åœ¨Itemä¸­æ–°å»ºindex.jsxå’Œindex.module.cssã€‚index.jsx: import React from 'react'import styles from './index.module.css'import &#123;Modal&#125; from 'antd'const &#123;confirm&#125; = Modalfunction Item(props) &#123; const &#123; data, login, handleDelete, index, handleToEdit, handleToDisplay &#125; = props; const toDisplay = (event) =&gt; &#123; event.preventDefault(); handleToDisplay(index) &#125; const toEdit = (event) =&gt; &#123; event.preventDefault(); handleToEdit(index) &#125; const toDelete = (event) =&gt; &#123; event.preventDefault(); confirm(&#123; title: `ä½ ç¡®å®šè¦åˆ é™¤$&#123;data.title&#125;`, content: 'åˆ é™¤åå†…å®¹ä¸å¯æ¢å¤', onOk() &#123; handleDelete(index) &#125;, onCancel() &#123; &#125;, &#125;); &#125; return ( &lt;div className=&#123;styles.item&#125;&gt; &lt;h2&gt;&lt;a href=&#123;`/display/$&#123;data.id&#125;`&#125; onClick=&#123;toDisplay&#125;&gt;&#123;data.title&#125;&lt;/a&gt;&lt;/h2&gt; &lt;hr /&gt; &lt;div className=&#123;styles.abstract&#125;&gt; &#123;data.brief&#125; &lt;/div&gt; &lt;div className=&#123;styles.readmore&#125;&gt; &lt;a href=&#123;`/display/$&#123;data.id&#125;`&#125; onClick=&#123;toDisplay&#125;&gt;é˜…è¯»æ›´å¤š&lt;/a&gt; &lt;/div&gt; &#123;/* å½“ç™»å½•å¤±æ˜¾ç¤ºç¼–è¾‘æœ¬æ–‡å’Œåˆ é™¤æœ¬æ–‡ */&#125; &#123;login ? &lt;div className=&#123;styles.edit&#125;&gt; &lt;a href=&#123;`/edit/$&#123;data.id&#125;`&#125; onClick=&#123;toEdit&#125;&gt;ç¼–è¾‘æœ¬æ–‡&lt;/a&gt; &lt;/div&gt; : \"\"&#125; &#123;login ? &lt;div className=&#123;styles.delete&#125;&gt; &lt;a href=\"/delete\" onClick=&#123;toDelete&#125;&gt;åˆ é™¤æœ¬æ–‡&lt;/a&gt; &lt;/div&gt;: \"\"&#125; &#123;/* å½“isTopä¸º1æ—¶æ˜¾ç¤ºç½®é¡¶å›¾æ ‡ */&#125; &#123;data.isTop ? &lt;div className=&#123;styles.isTop&#125;&gt; &lt;svg viewBox=\"0 0 1024 1024\"&gt; &lt;path d=\"M0 0h1024v1024z\" fill=\"#7ED321\"&gt;&lt;/path&gt; &lt;path d=\"M571.733333 157.866667l17.066667-12.8-83.2-83.2L552.533333 14.933333l183.466667 183.466667-46.933333 46.933333-81.066667-81.066666-17.066667 12.8 100.266667 100.266666-14.933333 14.933334-102.4-102.4c-6.4 4.266667-10.666667 8.533333-17.066667 10.666666l72.533333 72.533334-110.933333 110.933333 36.266667 36.266667-14.933334 14.933333L313.6 209.066667l14.933333-14.933334 36.266667 36.266667 110.933333-110.933333 61.866667 61.866666c6.4-4.266667 10.666667-8.533333 17.066667-10.666666l-96-96 14.933333-14.933334 98.133333 98.133334z m-72.533333 209.066666l17.066667-17.066666-117.333334-117.333334-17.066666 17.066667 117.333333 117.333333z m27.733333-29.866666l14.933334-14.933334L426.666667 204.8l-14.933334 14.933333 115.2 117.333334z m27.733334-27.733334l17.066666-14.933333-117.333333-117.333333-17.066667 14.933333 117.333334 117.333333z m27.733333-25.6l14.933333-14.933333L482.133333 149.333333l-14.933333 14.933334 115.2 119.466666z m10.666667-202.666666L554.666667 44.8l-21.333334 21.333333 38.4 38.4 21.333334-23.466666z m57.6 57.6l-40.533334-40.533334-21.333333 21.333334 40.533333 40.533333 21.333334-21.333333zM704 192l-38.4-38.4-21.333333 21.333333L682.666667 213.333333l21.333333-21.333333zM571.733333 471.466667l12.8-21.333334c8.533333 10.666667 17.066667 19.2 25.6 27.733334 6.4 6.4 12.8 6.4 21.333334-2.133334l172.8-172.8-38.4-38.4 17.066666-17.066666 87.466667 87.466666-17.066667 17.066667-29.866666-29.866667-177.066667 177.066667c-14.933333 14.933333-29.866667 14.933333-44.8 0l-29.866667-27.733333z m302.933334 21.333333l-44.8 44.8c-27.733333 25.6-55.466667 40.533333-83.2 44.8-27.733333 2.133333-59.733333-6.4-96-25.6l6.4-25.6c34.133333 19.2 64 27.733333 87.466666 25.6 23.466667-4.266667 46.933333-14.933333 68.266667-36.266667l44.8-44.8 17.066667 17.066667z m132.266666-21.333333l-17.066666 19.2-55.466667-55.466667c-10.666667 8.533333-19.2 17.066667-29.866667 23.466667l51.2 51.2-119.466666 119.466666-17.066667-17.066666 102.4-102.4-76.8-76.8-104.533333 100.266666-17.066667-17.066666 121.6-121.6 42.666667 42.666666c10.666667-6.4 19.2-14.933333 29.866666-23.466666L861.866667 362.666667l17.066666-17.066667 128 125.866667zM802.133333 682.666667h-25.6c2.133333-25.6 2.133333-55.466667-2.133333-89.6h23.466667c4.266667 34.133333 4.266667 64 4.266666 89.6z\" fill=\"#FFFFFF\"&gt;&lt;/path&gt; &lt;/svg&gt; &lt;/div&gt; : \"\"&#125; &lt;/div&gt; )&#125;export default Item æ³¨æ„åˆ°Itemä¸ºå±•ç¤ºç»„ä»¶ï¼Œåªè´Ÿè´£æ•°æ®çš„å±•ç¤ºï¼Œè€Œä¸è´Ÿè´£æ•°æ®çš„å¤„ç†ã€è·å–ï¼ŒItemçš„æ•°æ®ã€æ•°æ®çš„æ“ä½œéƒ½æ˜¯ä»propsä¸­è·å–çš„ï¼Œè¿™äº›æ“ä½œéƒ½ç”±Itemçš„å®¹å™¨ç»„ä»¶Homeæ¥å®Œæˆã€‚ æˆ‘ä»¬ä¼šå°†loginä¿å­˜åœ¨sessionStorageï¼Œloginæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä¿å­˜äº†æ˜¯å¦ç™»å½•çš„ä¿¡æ¯ï¼Œtrueè¡¨ç¤ºç™»å½•ï¼Œfalseè¡¨ç¤ºæœªç™»å½•ï¼Œæ ¹æ®æ˜¯å¦ç™»å½•ï¼Œå†³å®šæ˜¯å¦å°†åˆ é™¤å’Œç¼–è¾‘çš„æ“ä½œæš´éœ²å‡ºæ¥ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿå°†æ ¹æ®dataçš„isTopæ˜¯å¦ä¸ºtrueæ¥æ˜¾ç¤ºæ˜¯å¦ç½®é¡¶çš„svgå›¾æ ·(è¯¥å›¾æ ·æ¥è‡ªCSDNçš„ç½®é¡¶å›¾æ ·)ã€‚ index.module.css .item &#123; width: 100%; height: 150px; background-color: white; margin-bottom: 40px; border-radius: 4px; padding-left: 25px; padding-right: 20px; padding-top: 20px; position: relative; box-shadow:0px 0px 6px 6px #FFF;&#125;.item a &#123; text-decoration: none; color: #40759b;&#125;.item a:hover &#123; text-decoration: underline;&#125;.abstract &#123; width: 100%; padding-top: 30px;&#125;.readmore &#123; position: absolute; font-size: 14px; bottom: 10px; right: 10px;&#125;.edit &#123; position: absolute; font-size: 14px; bottom: 10px; right: 75px;&#125;.delete &#123; position: absolute; font-size: 14px; bottom: 10px; right: 140px;&#125;.isTop &#123; position: absolute; width: 50px; top: 0; right: 0;&#125; ç°åœ¨è¿›å…¥Homeç»„ä»¶ï¼Œä¿®æ”¹Home/index.jsxå¦‚ä¸‹ import React, &#123; useContext &#125; from 'react'import BasicLayout from './../../layouts/BasicLayout'import Item from './components/Item'import &#123;withRouter&#125; from 'react-router-dom'import &#123;Context&#125; from './../../router'import &#123; message &#125; from 'antd'function Home(props) &#123; const &#123;history&#125; = props // ä½¿ç”¨useContextè·å–Provideræä¾›çš„æ•°æ® const &#123;state, dispatch&#125; = useContext(Context); const login = sessionStorage.getItem(\"login\"); const datas = state.datas; const handleDelete = (id) =&gt; &#123; dispatch(&#123;type: \"deleteData\", id&#125;); message.success('åˆ é™¤æˆåŠŸ'); &#125; const handleToEdit = (id) =&gt; &#123; dispatch(&#123;type: \"changeOperation\", operation: \"EDIT\"&#125;) history.push(`/edit/$&#123;id&#125;`); &#125; const handleToDisplay = (id) =&gt; &#123; history.push(`display/$&#123;id&#125;`); &#125; return ( &lt;div&gt; &lt;BasicLayout&gt; &#123;datas.map((data, index) =&gt; &#123; return &lt;Item index=&#123;index&#125; data=&#123;data&#125; key=&#123;index&#125; login=&#123;login&#125; handleDelete=&#123;handleDelete&#125; handleToEdit=&#123;handleToEdit&#125; handleToDisplay=&#123;handleToDisplay&#125; /&gt; &#125;)&#125; &lt;/BasicLayout&gt; &lt;/div&gt; )&#125;export default withRouter(Home) ç°åœ¨å¯åŠ¨é¡¹ç›®(npm start)ï¼Œè§‚å¯Ÿåˆ°é¡µé¢å¦‚ä¸‹ è¯´æ˜Homeé¡µé¢å·²ç»æˆåŠŸäº†(ç”±äºåœ¨sessionStorageä¸­æ²¡æœ‰loginï¼Œæ‰€ä»¥åˆ é™¤æœ¬æ–‡å’Œç¼–è¾‘æœ¬æ–‡å‡æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå½“ç‚¹å‡»é˜…è¯»æ›´å¤šæ—¶ï¼Œä¼šè·³è½¬åˆ°Displayçš„é¡µé¢)ã€‚ Displayæˆ‘ä»¬æ¥è§‚å¯ŸDisplayçš„é¡µé¢ å‘ç°Displayé¡µé¢æœ‰ä¸€ä¸ªèƒŒæ™¯ä¸ºç™½è‰²çš„å†…å®¹åŒºå’Œä¸€ä¸ªæŒ‰é’®ï¼Œè¿™ä¸ªæŒ‰é’®æ ¹æ®æ˜¯å¦æœ‰ç™»å½•æ¥å†³å®šæ˜¯å¦æš´éœ²å‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨Displayä¸­æ–°å»ºä¸€ä¸ªcomponentsæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªContentæ–‡ä»¶å¤¹ï¼Œåœ¨Contentæ–‡ä»¶å¤¹ä¸­æ–°å»ºindex.jsxå’Œindex.module.cssã€‚é¦–å…ˆContentæ˜¯ä¸€ä¸ªå±•ç¤ºç»„ä»¶ï¼Œæ‰€ä»¥å®ƒçš„æ•°æ®å…¨éƒ¨éƒ½ç”±Displayæä¾›ï¼Œæ‰€æœ‰çš„æ•°æ®æ“ä½œä¹Ÿç”±Displayä¼ å…¥å›è°ƒå‡½æ•°è¿›è¡Œå¤„ç†ã€‚ index.jsxå¦‚ä¸‹ import React from 'react'import &#123; Button &#125; from 'antd'import styles from './index.module.css'function Content(props) &#123; const &#123;login, htmlContent, handleToEdit&#125; = props const toEdit = () =&gt; &#123; handleToEdit(); &#125; return( &lt;div className=&#123;styles.display&#125;&gt; &lt;div className=\"braft-output-content\" style=&#123;&#123;minHeight: \"425px\", backgroundColor: \"#FFF\", padding: \"50px 25px\", fontSize: \"16px\", maxWidth: \"850px\"&#125;&#125; dangerouslySetInnerHTML=&#123;&#123;__html: htmlContent&#125;&#125; &gt; &lt;/div&gt; &#123;login &amp;&amp; &lt;div className=&#123;styles.edit&#125;&gt; &lt;Button type=\"primary\" onClick=&#123;toEdit&#125;&gt;ç¼–è¾‘æ–‡ç« &lt;/Button&gt; &lt;/div&gt; &#125; &lt;/div&gt; )&#125;export default Content æƒ³å¿…ä¸Šé¢çš„ä»£ç è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ï¼Œindex.module.cssçš„å†…å®¹å¦‚ä¸‹ .display &#123; position: relative;&#125;.display ul, .display ol &#123; padding-left: 30px;&#125;.edit &#123; position: absolute; top: 10px; right: 10px;&#125; æ‰€ä»¥Displayä¸­çš„å†…å®¹å¦‚ä¸‹ import React, &#123;useContext&#125; from 'react'import BasicLayout from './../../layouts/BasicLayout'import &#123;withRouter&#125; from 'react-router-dom'import Content from './components/Content'import &#123;Context&#125; from './../../Provider'import BraftEditor from 'braft-editor'function Display(props) &#123; const &#123;history&#125; = props // è·å–ä¼ è¿‡æ¥çš„id const index = Number(history.location.pathname.split(\"/\")[2]) const &#123;state, dispatch&#125; = useContext(Context) const htmlContent = BraftEditor.createEditorState(state.datas[index].content).toHTML() const login = sessionStorage.getItem(\"login\") const handleToEdit = () =&gt; &#123; dispatch(&#123;type: \"changeOperation\", operation: \"EDIT\"&#125;); history.push(`/edit/$&#123;index&#125;`); &#125; return ( &lt;BasicLayout&gt; &lt;Content htmlContent=&#123;htmlContent&#125; login = &#123;login&#125; handleToEdit = &#123;handleToEdit&#125; /&gt; &lt;/BasicLayout&gt; )&#125;export default withRouter(Display) è‡³æ­¤Displayé¡µé¢è®¾è®¡å®Œæ¯•ã€‚ Editåœ¨å†™Edité¡µé¢ä¹‹å‰ï¼Œæ¥æ”¹é€ ä¸€ä¸‹RichTextç»„ä»¶ï¼Œæˆ‘ä»¬è¦å°†RichTextåšæˆå±•ç¤ºç»„ä»¶ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½ç”±Editæä¾›ï¼Œæ‰€æœ‰çš„æ•°æ®å¤„ç†ä¹Ÿç”±Editå¤„ç†ï¼Œä¿®æ”¹å¦‚ä¸‹ import React from 'react'import BraftEditor from 'braft-editor'import 'braft-editor/dist/index.css'function RichText(props) &#123; const &#123;value, onChange&#125; = props const handleEditorChange = (editorState) =&gt; &#123; onChange(editorState) &#125; return ( &lt;BraftEditor value=&#123;value&#125; onChange=&#123;handleEditorChange&#125; /&gt; )&#125;export default RichText ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Edité¡µé¢çš„ç»“æ„ æˆ‘ä»¬ä½¿ç”¨antdçš„è¡¨å•æ¥åšæˆè¿™ä»¶äº‹æƒ…ï¼Œåœ¨å‰é¢å·²ç»ä»‹ç»è¿‡antdè¡¨å•çš„ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œä¸å¤šåŠ ä»‹ç»ï¼Œç›´æ¥ä¸Šä»£ç  import React, &#123;useEffect, useContext&#125; from 'react'import RichText from './components/RichText'import &#123; withRouter &#125; from 'react-router-dom'import &#123; Form, Input, Button, message, Checkbox &#125; from 'antd'import BasicLayout from './../../layouts/BasicLayout'import BraftEditor from 'braft-editor'import &#123;Context&#125; from './../../Provider'function Edit(props) &#123; const &#123;history&#125; = props const FormItem = Form.Item; const &#123; getFieldDecorator, validateFieldsAndScroll &#125; = props.form; const &#123;state, dispatch&#125; = useContext(Context) useEffect(() =&gt; &#123; // å½“ç»„ä»¶åŠ è½½å å¦‚æœæ˜¯ç¼–è¾‘æ–‡ç«  æ ¹æ®idè·å–æ•°æ® ç„¶åæ˜¾ç¤º // å¦‚æœæ˜¯æ·»åŠ æ“ä½œï¼Œåˆ™ä¸åŠ è½½æ•°æ® ç›´æ¥æ˜¾ç¤ºç©ºç™½å†…å®¹ if(state.operation === 'EDIT') &#123; const index = Number(history.location.pathname.split(\"/\")[2]) const data = state.datas[index] // setFieldsValueä¸ºè¡¨å•è®¾ç½®å†…å®¹ props.form.setFieldsValue(&#123; ...data, content: BraftEditor.createEditorState(data.content) &#125;) &#125; &#125;, []) const handleSubmit = (event) =&gt; &#123; event.preventDefault(); validateFieldsAndScroll((err, values) =&gt; &#123; if(!err) &#123; // å¦‚æœæ˜¯é€šè¿‡æ·»åŠ æŒ‰é’®è¿›æ¥çš„ é‚£ä¹ˆæ‹¿åˆ°æ•°æ®ä¿å­˜ ç„¶åè·³è½¬åˆ°homeé¡µé¢ if(state.operation === 'ADD') &#123; dispatch(&#123;type: 'insertData', data: &#123; ...values, content: values.content.toRAW() &#125;&#125;); message.success(\"æ·»åŠ æˆåŠŸ\"); history.push(\"/home\"); //å¦‚æœæ˜¯ç¼–è¾‘æ–‡ç« è¿›æ¥çš„ï¼Œæ›´æ–°æ•°æ® ç„¶åè·³è½¬åˆ°home &#125; else if (state.operation === \"EDIT\") &#123; const id = Number(history.location.pathname.split(\"/\")[2]); dispatch(&#123;type: \"updateData\", id, data: &#123; ...values, content: values.content.toRAW(), &#125;&#125;); message.success(\"æ›´æ–°æˆåŠŸ\"); history.push(\"/home\"); &#125; &#125; &#125;) &#125; return ( &lt;BasicLayout&gt; &lt;div&gt; &lt;Form onSubmit=&#123;handleSubmit&#125;&gt; &lt;FormItem labelAlign=\"left\" label=\"æ–‡ç« æ ‡é¢˜\"&gt; &#123;getFieldDecorator('title', &#123; rules: [&#123; required: true, message: 'è¯·è¾“å…¥æ ‡é¢˜', &#125;], &#125;)( &lt;Input size=\"large\" placeholder=\"è¯·è¾“å…¥æ ‡é¢˜\"/&gt; )&#125; &lt;/FormItem&gt; &lt;FormItem size=\"large\" label=\"æ–‡ç« æ‘˜è¦\"&gt; &#123;getFieldDecorator('brief', &#123; rules: [&#123; required: true, message: 'è¯·è¾“å…¥æ‘˜è¦', &#125;], &#125;)( &lt;Input.TextArea style=&#123;&#123;fontSize: \"16px\"&#125;&#125; placeholder=\"è¯·è¾“å…¥æ‘˜è¦\"/&gt; )&#125; &lt;/FormItem&gt; &lt;FormItem&gt; &#123;getFieldDecorator('isTop', &#123; valuePropName: 'checked', &#125;)( &lt;Checkbox&gt; æ˜¯å¦ç½®é¡¶ &lt;/Checkbox&gt;, )&#125; &lt;/FormItem&gt; &lt;FormItem label=\"æ–‡ç« æ­£æ–‡\"&gt; &#123;getFieldDecorator('content', &#123; validateTrigger: 'onBlur', rules: [&#123; required: true, message: \"è¯·è¾“å…¥æ­£æ–‡\" &#125;], &#125;)( &lt;RichText /&gt; )&#125; &lt;/FormItem&gt; &lt;FormItem&gt; &lt;Button size=\"large\" type=\"primary\" htmlType=\"submit\"&gt;æäº¤&lt;/Button&gt; &lt;/FormItem&gt; &lt;/Form&gt; &lt;/div&gt; &lt;/BasicLayout&gt; )&#125;// ä¸ºEditæ³¨å…¥formexport default withRouter(Form.create()(Edit)) ä¸Šé¢çš„ä»£ç è™½ç„¶æœ‰ç‚¹é•¿ï¼Œä½†æ˜¯éƒ½æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ã€‚æ³¨æ„ï¼Œè™½ç„¶æˆ‘ä»¬æ²¡æœ‰ä¸ºRichTextä¼ å…¥valueå’ŒonChangeï¼Œä½†æ˜¯ç”±äºRichTextå’Œè¡¨å•é¡¹è¿›è¡Œäº†åŒå‘ç»‘å®šï¼Œæ‰€ä»¥è¡¨å•ä¼šæ³¨å…¥valueå’ŒonChangeã€‚ LoginLoginé¡µé¢åº”è¯¥æ˜¯æœ€ç®€å•çš„ï¼Œåªè¦ç”¨æˆ‘ä»¬åœ¨å‰é¢antdè¡¨å•ç¤ºä¾‹é‡Œé¢çš„è¡¨å•å°±å¯ä»¥å®Œæˆï¼Œæ‰€ä»¥ç›´æ¥ä¸Šä»£ç å¦‚ä¸‹ import React from 'react'import &#123;withRouter&#125; from 'react-router-dom'import &#123;Form, Button, Input, message &#125; from 'antd'import LoginLayout from './../../layouts/LoginLayout'function Login(props) &#123; const &#123; form, history &#125; = props; const FormItem = Form.Item; const &#123;getFieldDecorator, validateFields&#125; = form const handleSubmit = (event) =&gt; &#123; event.preventDefault(); validateFields((err, values) =&gt; &#123; if (!err) &#123; if (values.adminId === \"123\" &amp;&amp; values.password === \"123\") &#123; sessionStorage.setItem(\"login\", true); message.success(\"ç™»å½•æˆåŠŸ\"); history.push(\"/home\") &#125; else &#123; message.error(\"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯\") &#125; &#125; &#125;) &#125; return ( &lt;LoginLayout&gt; &lt;Form onSubmit=&#123;handleSubmit&#125;&gt; &lt;FormItem labelAlign=\"left\" label=\"ç”¨æˆ·å\"&gt; &#123;getFieldDecorator('adminId', &#123; rules: [&#123; required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', &#125;], &#125;)( &lt;Input size=\"large\" placeholder=\"è¯·è¾“å…¥ç”¨æˆ·å\"/&gt; )&#125; &lt;/FormItem&gt; &lt;FormItem size=\"large\" label=\"å¯†ç \"&gt; &#123;getFieldDecorator('password', &#123; rules: [&#123; required: true, message: 'è¯·è¾“å…¥å¯†ç ', &#125;], &#125;)( &lt;Input.Password size=\"large\" placeholder=\"è¯·è¾“å…¥å¯†ç \"/&gt; )&#125; &lt;/FormItem&gt; &lt;FormItem&gt; &lt;Button size=\"large\" type=\"primary\" htmlType=\"submit\"&gt;æäº¤&lt;/Button&gt; &lt;/FormItem&gt; &lt;/Form&gt; &lt;/LoginLayout&gt; )&#125;export default withRouter(Form.create()(Login)) æ”¶å°¾åœ¨è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå°åœ°æ–¹æ²¡æœ‰å¤„ç†ï¼Œé‚£å°±æ˜¯Headerï¼Œé‡Œé¢çš„aæ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶æ²¡æœ‰å¤„ç†ï¼Œå¹¶ä¸”æˆ‘ä»¬å¸Œæœ›åœ¨ç™»å½•çš„æƒ…å†µä¸‹æ˜¾ç¤ºâ€å†™åšå®¢â€ï¼Œä»¥åŠåœ¨ç™»å½•çš„æƒ…å†µä¸‹æ˜¾ç¤ºâ€é€€å‡ºç™»å½•â€ï¼Œåœ¨æœªç™»å½•çš„æƒ…å†µä¸‹æ˜¾ç¤ºâ€ç™»å½•â€ï¼Œæ‰€ä»¥ä¿®æ”¹Headerå¦‚ä¸‹(ç”±äºè¦ç”¨åˆ°historyï¼Œæ‰€ä»¥è¦åœ¨Layouté‡Œç»™Headerä¼ å…¥historyï¼Œä½†æ˜¯Layoutä¹Ÿæ²¡æœ‰historyï¼Œæ‰€ä»¥è¦åœ¨Home, Edit, Display, Loginä¸­ç»™ç”¨åˆ°çš„Layoutä¼ å…¥historyï¼Œè¿™é‡Œçš„ä»£ç å°±ä¸è´´å‡ºäº†ï¼Œæƒ³å¿…è¿™æ ·çš„äº‹æƒ…å¯¹ç°åœ¨çš„ä½ åº”è¯¥å·²ç»å¾ˆç®€å•äº†) import React, &#123;useContext&#125; from 'react'import styles from './index.module.css'import &#123;Context&#125; from './../../Provider'function Header(props) &#123; const &#123;history&#125; = props; const &#123;dispatch&#125; = useContext(Context); const login = sessionStorage.getItem(\"login\"); const toEdit = (e) =&gt; &#123; e.preventDefault(); dispatch(&#123;type: \"changeOperation\", operation: \"ADD\"&#125;); history.push(\"/edit\"); &#125; const toHome = (e) =&gt; &#123; e.preventDefault() history.push(\"/home\") &#125; const logout = (e) =&gt; &#123; e.preventDefault() sessionStorage.removeItem(\"login\"); history.push(\"/login\"); &#125; const login_ = (e) =&gt; &#123; e.preventDefault() history.push(\"/login\"); &#125; return ( &lt;div className=&#123;styles.header&#125;&gt; &lt;div className=&#123;styles.nav&#125;&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=\"/home\" onClick=&#123;toHome&#125;&gt;é¦–é¡µ&lt;/a&gt;&lt;/li&gt; &#123;login &amp;&amp; &lt;li&gt;&lt;a href=\"/edit\" onClick=&#123;toEdit&#125;&gt;å†™åšå®¢&lt;/a&gt;&lt;/li&gt;&#125; &#123;login ? &lt;li&gt;&lt;a href=\"/login\" onClick=&#123;logout&#125;&gt;é€€å‡ºç™»å½•&lt;/a&gt;&lt;/li&gt; : &lt;li&gt;&lt;a href=\"/login\" onClick=&#123;login_&#125;&gt;ç™»å½•&lt;/a&gt;&lt;/li&gt;&#125; &lt;/ul&gt; &lt;/div&gt; &lt;div className=&#123;styles.desc&#125;&gt; Coder &lt;/div&gt; &lt;/div&gt; )&#125;export default Header æ¥ä¸‹æ¥å°±æ˜¯æ•°æ®çš„æŒä¹…åŒ–ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ•°æ®èƒ½å¤Ÿä¿å­˜åˆ°localStorageï¼Œè¿™æ ·å½“é¡µé¢åˆ·æ–°ï¼Œå…³é—­é¡µé¢ã€æµè§ˆå™¨,å…³æœºæ•°æ®éƒ½èƒ½å¤Ÿä¿å­˜ã€‚ä¿®æ”¹Provider.jsx import React, &#123;useReducer&#125; from 'react'export const Context = React.createContext();const saveData = (datas) =&gt; &#123; localStorage.setItem(\"datas\",JSON.stringify(datas) || [])&#125;const loadData = () =&gt; &#123; // å¦‚æœdatasæ²¡æœ‰å†…å®¹ï¼Œåˆ™ä¸ºç©ºæ•°ç»„ï¼Œå› ä¸ºåé¢ç”¨åˆ°datas.mapï¼Œæ”¾æ­¢æŠ¥é”™ return JSON.parse(localStorage.getItem(\"datas\")) || []&#125;const reducer = (state, action) =&gt; &#123; const tempDatas = state.datas // æ¯æ¬¡å¯¹æ•°æ®è¿›è¡Œæ“ä½œåéƒ½ä¿å­˜æ•°æ® switch(action.type) &#123; case 'insertData': tempDatas[tempDatas.length] = action.data; saveData(tempDatas) return &#123;...state, datas: tempDatas&#125; case 'updateData': tempDatas[action.id] = action.data saveData(tempDatas) return &#123;...state, datas: tempDatas&#125; case 'deleteData': tempDatas.splice(action.id, 1) saveData(tempDatas) return &#123;...state, datas: tempDatas&#125; case 'changeOperation': return &#123;...state, operation: action.operation&#125; default: return state &#125;&#125;const initState = &#123; // åˆå§‹åŒ–ä»localStorageä¸­è¯»å–æ•°æ® datas: loadData(), operation: 'ADD'&#125;function Provider(props) &#123; const [state, dispatch] = useReducer(reducer, initState) const &#123;children&#125; = props return ( &lt;Context.Provider value=&#123;&#123;state, dispatch&#125;&#125;&gt; &#123;children&#125; &lt;/Context.Provider&gt; )&#125;export default Provider ç™»å½•æƒé™æ§åˆ¶å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•çš„è¯ï¼Œæ˜¯æ²¡æœ‰æƒåˆ©è®¿é—®æŸäº›é¡µé¢çš„ï¼Œæ¯”å¦‚ç¼–è¾‘é¡µé¢ï¼Œå®ƒä¸èƒ½å¤Ÿæ·»åŠ æ–‡ç« ï¼Œä¹Ÿä¸èƒ½å¤Ÿç¼–è¾‘æ–‡ç« (è™½ç„¶æˆ‘ä»¬åœ¨æœªç™»å½•çš„æƒ…å†µä¸‹æ²¡æœ‰æš´éœ²è¿™æ ·çš„é€”å¾„ï¼Œå¦‚Displayé¡µé¢æœªç™»å½•æ²¡æœ‰ç¼–è¾‘æ–‡ç« çš„æŒ‰é’®ï¼ŒHeaderæœªç™»å½•æ²¡æœ‰å†™æ–‡ç« çš„è¿æ¥ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡urlç›´æ¥è®¿é—®)ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšä¸€äº›æƒé™æ§åˆ¶ã€‚ æ‰€ä»¥åœ¨è®¿é—®è·¯ç”±æ—¶ï¼Œæˆ‘ä»¬è¦åšæƒé™çš„æ£€æŸ¥ï¼Œä¿®æ”¹router.jsä¸­çš„RouteItemæ–¹æ³•ï¼Œä¸èƒ½ç›´æ¥çš„è¿”å›Routeï¼Œè€Œæ˜¯è¦ç»™RouteåŠ ä¸€å±‚éªŒè¯ï¼Œä»¥å†³å®šæ˜¯å¦è¿”å›ï¼Œå¦‚ä¸‹ import Auth from './components/Auth'// ...const RouteItem = (props) =&gt; &#123; const &#123; path, component: Component, redirect, key, exact &#125; = props; if (redirect) &#123; return &lt;Redirect from=&#123;path&#125; to=&#123;redirect&#125; key=&#123;key&#125; /&gt; &#125; return ( &lt;Route key=&#123;key&#125; exact=&#123;exact&#125; path=&#123;path&#125; render=&#123;componentProps =&gt; &#123; return ( // å¯¹ComponentåŠ ä»¥éªŒè¯ &lt;Auth history=&#123;history&#125;&gt; &lt;Component &#123;...componentProps&#125; /&gt; &lt;/Auth&gt; ) &#125;&#125; /&gt; );&#125;;// ... Authç»„ä»¶æ­£æ˜¯ç”¨æ¥åšæƒé™æ§åˆ¶çš„ï¼Œåœ¨src/componentsä¸‹æ–°å»ºAuthæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­æ–°å»ºindex.jsxï¼Œå¦‚ä¸‹ function Auth(props) &#123; const &#123;children, history&#125; = props const login = sessionStorage.getItem(\"login\") // Edité¡µé¢ä¸èƒ½ç›´æ¥è®¿é—® éœ€è¦ç™»å½• if (children.type.WrappedComponent.name !== \"Edit\") &#123; return children &#125; else &#123; if (login) &#123; return children &#125; history.replace(\"/login\") return null &#125;&#125;export default Auth éªŒè¯çš„é€»è¾‘ä¹Ÿæ˜¯ååˆ†çš„ç®€å•ï¼Œå¦‚æœä¸æ˜¯Editç»„ä»¶ï¼Œåˆ™å¯ä»¥è®¿é—®ç›´æ¥è¿”å›ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›ä¸€æ­¥åˆ¤æ–­æ˜¯å¦ç™»å½•ï¼Œå¦‚æœç™»å½•ï¼Œåˆ™å¯ä»¥è®¿é—®ï¼Œå¦åˆ™æ¥åˆ°ç™»å½•é¡µé¢ã€‚ è‡³æ­¤ï¼Œæ•´ä¸ªé¡¹ç›®çš„å·¥ä½œå·²ç»å¤§è‡´å®Œæˆäº†ï¼Œå¯èƒ½æœ‰çš„åœ°æ–¹è¿˜éœ€è¦ç¾åŒ–ï¼Œæ¯”å¦‚å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„ä»£ç ç¾åŒ–ï¼Œæˆ–è€…å°†æ•°æ®ä¿å­˜åœ¨åå°æœåŠ¡å™¨ç­‰ç­‰ã€‚è¿™ä¸€è·¯èµ°æ¥å¯èƒ½ä½ ä¼šæ„Ÿåˆ°æœ‰ç‚¹ä¸è½»æ¾ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ è·å¾—äº†è¿›æ­¥ï¼Œå¦‚æœä½ ååˆ†çš„è½»æ¾ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡¹ç›®å¯¹ä½ æ¥è¯´è¿˜æ˜¯æœ‰ç‚¹å®¹æ˜“ã€‚ä¸è¿‡ä¸ç®¡æ€ä¹ˆæ ·ï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿå®Œå…¨é è‡ªå·±åšä¸€éï¼Œä¹Ÿè®¸ä½ è·Ÿç€æˆ‘ä¸€è·¯èµ°æ¥ååˆ†çš„é¡ºåˆ©ï¼Œè¿™æ˜¯å› ä¸ºä¸€äº›å‘æˆ‘ç»™ä½ è·³è¿‡å»äº†ï¼Œè¯´å®è¯ï¼Œåœ¨æˆ‘ç¬¬ä¸€æ¬¡åšæ—¶ï¼Œé‡åˆ°åˆ°è®¸è®¸å¤šå¤šçš„å‘ï¼Œæœ‰å¾ˆå¤šä¸æ˜ç™½çš„ç‚¹ï¼Œæœ‰çš„åœ°æ–¹æ˜æ˜ååˆ†çš„ç®€å•ï¼Œå¯æ˜¯æˆ‘èƒ½å¡å‡ ä¸ªå°æ—¶ç”šè‡³ä¸€ä¸¤å¤©ï¼Œè™½ç„¶è¾›è‹¦ï¼Œä½†æ˜¯æ”¶è·ååˆ†çš„å·¨å¤§ã€‚æ‰€ä»¥æˆ‘å¸Œæœ›ä½ èƒ½å¤Ÿç‹¬ç«‹çš„å®Œæˆï¼Œå»é‡åˆ°ä¸€äº›å‘ï¼Œç„¶åå»æ‰¾è§£å†³åŠæ³•ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä½ ä¼šæ”¶è·å·¨å¤§ï¼Œç´¢æ€§ä½ å·²ç»å®Œæˆäº†è¿™ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥å¯¹äºè¿™ä¸ªé¡¹ç›®è¦åšå‡ºä»€ä¹ˆæ ·çš„æ•ˆæœä»¥åŠåŠŸèƒ½å·²ç»æœ‰äº†æŠŠæ¡ï¼Œæ‰€ä»¥åœ¨åšä¸€éä¼šç®€å•å¾ˆå¤šï¼Œæ€»ä¹‹ï¼ŒåŠ æ²¹ã€‚ å‚è€ƒèµ„æ–™ npmæ˜¯å¹²ä»€ä¹ˆçš„? å‰ç«¯è„šæ‰‹æ¶ï¼Œå¬èµ·æ¥ç„ä¹ï¼Œå®é™…å‘¢? è™šæ‹ŸDOMä»‹ç» React.js å°ä¹¦ Reactä¸­çš„äº‹ä»¶å¤„ç† æ·±å…¥ç†è§£Reactç»„ä»¶çŠ¶æ€(State) é‡æ–°è®¤è¯†ç”Ÿå‘½å‘¨æœŸå‡½æ•° Reactä¸­ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶ Presentational and Container Components ä½¿ç”¨Render Propså§ Hook BraftEditor","tags":[{"name":"React","slug":"React","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/React/"},{"name":"antd","slug":"antd","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/antd/"},{"name":"React-Hooks","slug":"React-Hooks","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/React-Hooks/"}]},{"title":"CSS3 æ–°ç‰¹æ€§","date":"2019-12-24T16:00:00.000Z","path":"/CSS3/","text":"CSS3æ–°ç‰¹æ€§æ ·å¼èƒŒæ™¯background-originæˆ‘ä»¬çŸ¥é“ç›’å­çš„å¤§å°æœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼šborder, padding, contentï¼Œå½“æˆ‘ä»¬è®¾ç½®èƒŒæ™¯å›¾ç‰‡æ—¶ï¼Œå›¾ç‰‡æ˜¯ä¼šä»¥å·¦ä¸Šè§’å¯¹é½ï¼Œä½†æ˜¯æ˜¯ä»¥borderçš„å·¦ä¸Šè§’å¯¹é½è¿˜æ˜¯ä»¥paddingçš„å·¦ä¸Šè§’æˆ–è€…contentçš„å·¦ä¸Šè§’å¯¹é½? border-originæ­£æ˜¯ç”¨æ¥è®¾ç½®è¿™ä¸ªçš„ï¼Œå®ƒæœ‰ä¸‰ä¸ªå¯é€‰å€¼ border-box padding-box content-box å…¶ä¸­æ„æ€ä¸å¿…è§£é‡Šå°±å¯ä»¥æ˜ç™½ã€‚å¦‚æœä¸è¿›è¡Œè®¾ç½®çš„è¯ï¼Œé»˜è®¤æ˜¯padding-boxï¼Œå³ä»¥paddingçš„å·¦ä¸Šè§’ä¸ºåŸç‚¹ã€‚ background-clipè¯¥å±æ€§æ˜¯ç”¨æ¥è®¾ç½®èƒŒæ™¯(èƒŒæ™¯å›¾ç‰‡ã€èƒŒæ™¯é¢œè‰²)å»¶ä¼¸çš„èŒƒå›´ï¼Œæœ‰4ä¸ªå€¼å¯é€‰ border-boxï¼šèƒŒæ™¯å»¶ä¼¸è‡³è¾¹æ¡†å¤–æ²¿(ä½†æ˜¯åœ¨è¾¹æ¡†ä¸‹å±‚) padding-boxï¼šèƒŒæ™¯å»¶ä¼¸è‡³å†…è¾¹è·(padding)å¤–æ²¿,ä¸ä¼šç»˜åˆ¶åˆ°è¾¹æ¡†å¤„ content-boxï¼šèƒŒæ™¯è¢«è£å‰ªè‡³å†…å®¹åŒº(content box)å¤–æ²¿ textï¼šèƒŒæ™¯è¢«è£å‰ªæˆæ–‡å­—çš„å‰æ™¯è‰² å…·ä½“å¯ä»¥å‚è€ƒç½‘ç«™background-clipï¼Œè¿™é‡Œæ¼”ç¤ºä¸€ä¸‹ä¸Šé¢çš„æ•ˆæœ background-sizebackground-sizeç”¨ä»¥è®¾ç½®èƒŒæ™¯å›¾ç‰‡å¤§å°ã€‚å•å¼ å›¾ç‰‡çš„èƒŒæ™¯å¤§å°å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¸­çš„ä¸€ç§æ¥è§„å®šï¼š ä½¿ç”¨å…³é”®è¯ contain ä½¿ç”¨å…³é”®è¯ cover è®¾å®šå®½åº¦å’Œé«˜åº¦å€¼ è®¾å®šæŒ‡å®šçš„å®½åº¦å’Œé«˜åº¦å€¼æƒ³å¿…ä¸ç”¨å¤šåŠ ä»‹ç»ã€‚containå’Œcoverä¼šç­‰æ¯”ä¾‹çš„ç¼©æ”¾å›¾ç‰‡ï¼Œä»¥ä½¿å¾—å›¾ç‰‡èƒ½å¤Ÿæœ€å¤§çš„è¢«å®Œæ•´åŒ…å«æˆ–è€…æœ€å°çš„è¦†ç›–èƒŒæ™¯åŒºã€‚ å¦‚æœèƒŒæ™¯åŒº(ç”±background-originå†³å®š)çš„å®½é«˜æ¯”å’Œå›¾ç‰‡çš„å®½é«˜æ¯”æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆcoverå’Œcontainçš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¼šå®Œå…¨çš„è¦†ç›–èƒŒæ™¯åŒºå¹¶å®Œæ•´çš„æ˜¾ç¤ºã€‚ è¾¹æ¡†è¾¹æ¡†åœ†è§’ä½¿ç”¨border-radiuså¯ä»¥è®¾ç½®è¾¹æ¡†ä¸ºåœ†è§’çš„ï¼Œborder-radiusçš„å€¼å°±æ˜¯åœ†è§’è¾¹æ¡†çš„åŠå¾„ã€‚ width: 100px;height: 100px;margin: 0 auto;border-radius: 20px;background-color: pink; ä¸paddingä¸€æ ·ï¼Œå–ä¸åŒä¸ªæ•°çš„å€¼ï¼Œä»£è¡¨è®¾ç½®ä¸åŒåœ°æ–¹çš„åœ†è§’åŠå¾„ï¼Œå¦‚ å–å€¼ä¸ªæ•° è®¾ç½® 1ä¸ªï¼Œå¦‚border-radius: 20px è®¾ç½®å››ä¸ªè§’çš„åœ†è§’åŠå¾„éƒ½ä¸º20px 2ä¸ªï¼Œå¦‚border-radius: 10px 20px è®¾ç½®å·¦ä¸Šè§’å’Œå³ä¸‹è§’è¿™æ¡å¯¹è§’çº¿ä¸º10px,å¦ä¸€æ¡å¯¹è§’çº¿ä¸º20px 3ä¸ªï¼Œå¦‚border-radius: 10px 20px 30px è®¾ç½®å·¦ä¸Šè§’ä¸º10px,å³ä¸Šè§’å’Œå·¦ä¸‹è§’è¿™æ¡å¯¹è§’çº¿ä¸º20px,å³ä¸‹è§’ä¸º30px 4ä¸ªï¼Œå¦‚border-radius: 5px 10px 15px 20px ä»å·¦ä¸Šè§’å¼€å§‹è®¾ç½®ï¼ŒæŒ‰é¡ºæ—¶é’ˆæ¥ï¼Œå³å·¦ä¸Šè§’ä¸º5px,å³ä¸Šè§’ä¸º10px, â€¦ ç”±ç¬¬ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å‘ç°åŠå¾„ä¹Ÿåˆ†ä¸ºæ°´å¹³åŠå¾„å’Œå‚ç›´åŠå¾„ï¼Œè¿™ä¸¤ä¸ªä¹Ÿå¯ä»¥åˆ†åˆ«è®¾ç½®ï¼Œç”¨/åˆ†å¼€å½“åšä¸¤ç»„ï¼Œç¬¬ä¸€ä¸ªç”¨æ¥è®¾ç½®æ°´å¹³åŠå¾„ï¼Œç¬¬äºŒä¸ªè®¾ç½®å‚ç›´åŠå¾„ï¼Œå¦‚ width: 100px;height: 120px;margin: 0 auto;border-radius: 50px / 60px; background-color: pink; æˆ‘ä»¬è®¾ç½®å››ä¸ªè§’çš„æ°´å¹³åŠå¾„ä¸º50px,å››ä¸ªè§’çš„æ°´å¹³åŠå¾„ä¸º60px,å¾—åˆ°æ•ˆæœå¦‚ä¸‹ å¦‚æœä¸åˆ†å¼€è®¾ç½®ï¼Œåˆ™é»˜è®¤æ°´å¹³åŠå¾„å’Œå‚ç›´åŠå¾„æ˜¯ç›¸åŒçš„ã€‚ å¦‚æœæƒ³è¦æ›´åŠ è¯¦ç»†çš„äº†è§£ï¼Œè¿™é‡Œæ¨èä¸€ç¯‡é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—CSS3åœ†è§’è¾¹æ¡†ã€‚ è¾¹æ¡†å›¾ç‰‡æ‰¾åˆ°ä¸€ç¯‡å†™çš„å¾ˆå¥½çš„åšæ–‡border-imageçš„æ­£ç¡®ç”¨æ³•ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸è‡ªå·±å†™äº†ã€‚ é˜´å½±ç›’å­é˜´å½±ä¸ºäº†çŸ¥é“ä»€ä¹ˆæ˜¯ç›’å­é˜´å½±ï¼Œè§‚çœ‹å¦‚ä¸‹æ•ˆæœ è¿™é‡Œé€‰å–äº†å°ç±³çš„åšæ³•ï¼Œç”±äºè®¾ç½®é˜´å½±çš„é¢œè‰²æ¯”è¾ƒæ·¡ï¼Œæ‰€ä»¥å¯èƒ½æ¯”è¾ƒéš¾çœ‹å‡ºæ¥ã€‚ ç”¨ä»¥è®¾ç½®ç›’å­é˜´å½±çš„å±æ€§æ˜¯box-shadow,å®ƒçš„å€¼æ¯”è¾ƒå¤šï¼Œéœ€è¦è®¾ç½®çš„å€¼å¦‚ä¸‹ï¼Œ æ°´å¹³é˜´å½± å‚ç›´é˜´å½± æ¨¡ç³Šè·ç¦»(è™šå®) é˜´å½±å°ºå¯¸(å½±å­å¤§å°) é˜´å½±é¢œè‰² å†…/å¤–é˜´å½±(è¿™ä¸ªæˆ‘ä¹Ÿä¸æ‡‚ï¼Œä¸åšä»‹ç») å…¶ä¸­æ°´å¹³é˜´å½±h-shadowå’Œå‚ç›´é˜´å½±v-shadowæ˜¯å¿…é¡»è®¾ç½®çš„ã€‚ ä¸ºäº†è§‚çœ‹è®¾ç½®è¿™äº›å€¼çš„æ•ˆæœï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªç›’å­ width: 200px;height: 200px;border: 1px solid #CCC;margin: 100px auto; ä¸ºç›’å­æ·»åŠ é˜´å½± box-shadow: 1px 1px 1px 1px red; æ°´å¹³é˜´å½±å¤§å°çš„å½±å“(æ­£å€¼ï¼Œé˜´å½±å‘å³ç§»åŠ¨ï¼Œè´Ÿå€¼ï¼Œé˜´å½±å‘å·¦ç§»åŠ¨) å‚ç›´é˜´å½±å¤§å°çš„å½±å“(æ­£å€¼ï¼Œé˜´å½±å‘ä¸‹ç§»åŠ¨ï¼Œè´Ÿå€¼ï¼Œé˜´å½±å‘ä¸Šç§»åŠ¨) æ¨¡ç³Šè·ç¦»å¤§å°çš„å½±å“ é˜´å½±å°ºå¯¸å¤§å°çš„å½±å“ æ–‡æœ¬é˜´å½±ä½¿ç”¨text-shadowæ¥è®¾ç½®æ–‡æœ¬é˜´å½±ã€‚ä½¿ç”¨ä¸box-shadowå·®ä¸å¤šï¼Œå…·ä½“å¯ä»¥å‚ç…§text-shadowã€‚ CSS3é€‰æ‹©å™¨CSS3æ–°å¢äº†è®¸å¤šçš„é€‰æ‹©å™¨ï¼Œä¸ºæˆ‘ä»¬é€‰æ‹©å…ƒç´ æä¾›äº†æ›´åŠ çµæ´»çš„é€‰æ‹©ã€‚ å±æ€§é€‰æ‹©å™¨ [attr]ï¼šé€‰æ‹©åŒ…å«attrå±æ€§çš„æ ‡ç­¾ [attr=value]ï¼šé€‰æ‹©attrå±æ€§å€¼ä¸ºvalueçš„æ ‡ç­¾ [attr^=value]ï¼šé€‰æ‹©attrå±æ€§å€¼ä»¥valueå¼€å¤´çš„æ ‡ç­¾ [attr*=value]ï¼šé€‰æ‹©attrå±æ€§å€¼åŒ…å«valueçš„æ ‡ç­¾ [attr$=value]ï¼šé€‰æ‹©attrå±æ€§å€¼ä»¥valueçš„æ ‡ç­¾ å¦‚ div[class] &#123; /* ä¼šé€‰æ‹©åŒ…å«classå±æ€§çš„divæ ‡ç­¾ */&#125;div[class=\"active\"] &#123; /* ä¼šé€‰æ‹©classå±æ€§å€¼ä¸ºactiveçš„divæ ‡ç­¾ */&#125;div[class^=\"header\"] &#123; /* ä¼šé€‰æ‹©classå±æ€§ä»¥headerå¼€å¤´çš„divæ ‡ç­¾ */&#125;... ... ç»“æ„ä¼ªç±»é€‰æ‹©å™¨ E:first-child E:last-child E:nth-child(n) E:nth-last-child(n) E:first-of-type E:last-of-type E:nth-of-type(n) E:nth-last-of-type(n) ä¸Šé¢çš„é€‰æ‹©å™¨æ˜¯æ¯”è¾ƒå¸¸è§çš„ç»“æ„ä¼ªç±»é€‰æ‹©å™¨ï¼Œä¸‹é¢å…·ä½“è®²è§£å…¶è¡¨è¾¾çš„æ„æ€ã€‚ E:first-childæŒ‡çš„æ˜¯ï¼Œé€‰æ‹©Eï¼Œè¿™ä¸ªEæ»¡è¶³çš„æ¡ä»¶æ˜¯ï¼šå®ƒæ˜¯å…¶çˆ¶å…ƒç´ ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œæ¥çœ‹ä¸€ä¸ªä¾‹å­ &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;h1&gt;&lt;/h1&gt; &lt;p&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt; &lt;i&gt;&lt;/i&gt; &lt;span&gt;&lt;/span&gt; &lt;h1&gt;&lt;/h1&gt; &lt;p&gt;&lt;/p&gt;&lt;/div&gt; span:first-child &#123; /* å®ƒä¼šé€‰æ‹©spanï¼Œæ¡ä»¶æ˜¯è¿™ä¸ªspanå¿…é¡»æ˜¯å®ƒçˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´  */&#125; ç”±äºç¬¬ä¸€ä¸ªdivé‡Œé¢çš„spanæ˜¯å…¶çˆ¶å…ƒç´ (ç¬¬ä¸€ä¸ªdiv)çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªdivé‡Œé¢çš„spanä¼šè¢«é€‰ä¸­ã€‚è€Œç¬¬äºŒä¸ªdivé‡Œé¢çš„spanä¸æ˜¯å…¶çˆ¶å…ƒç´ (ç¬¬äºŒä¸ªdiv)çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ï¼Œæ‰€ä»¥è¿™ä¸ªspanä¸ä¼šè¢«é€‰ä¸­ã€‚ E:last-childçš„ä¸E:first-childç›¸ä¼¼ï¼Œä¸è¿‡ç¬¬ä¸€ä¸ªæ”¹ä¸ºæœ€åä¸€ä¸ªã€‚ E:nth-child(n)æŒ‡çš„æ˜¯é€‰æ‹©Eï¼ŒEéœ€è¦æ»¡è¶³æ¡ä»¶ï¼Œæ˜¯å…¶çˆ¶å…ƒç´ çš„ç¬¬nä¸ªå…ƒç´ (næ˜¯ä»1å¼€å§‹çš„)ï¼ŒE:first-childå°±ç›¸å½“äºæ˜¯E:nth-child(1)ã€‚E:nth-child(n)ä¸­è¿™ä¸ªâ€nâ€é™¤äº†å¯ä»¥æ˜¯å…·ä½“çš„æ•°å­—ä»¥å¤–ï¼Œè¿˜å¯ä»¥æ˜¯oddå’Œevenï¼Œè¡¨ç¤ºé€‰æ‹©æ‰€æœ‰çš„Eï¼Œè¿™äº›Eæ˜¯å…¶çˆ¶å…ƒç´ çš„ç¬¬å¥‡æ•°æˆ–ç¬¬å¶æ•°ä¸ªã€‚é™¤æ­¤ä¹‹å¤–â€nâ€è¿˜å¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå¦‚2n+1, 3n(nä»1å¼€å§‹)ã€‚ è€ŒE:nth-last-child(n)åˆ™æ˜¯å€’ç€æ•°çš„ï¼Œç”¨æ³•åŒE:nth-child(n)ç›¸ä¼¼ï¼Œè¿™é‡Œä¸å¤šä»‹ç»ã€‚ E:first-of-typeä¸E:first-childä¸åŒï¼Œå…¶æ„æ€æ˜¯é€‰æ‹©å™¨çˆ¶å…ƒç´ ä¸‹çš„ç¬¬ä¸€ä¸ªEå…ƒç´ ã€‚è¿˜æ˜¯ä»¥ä¸Šé¢ä¸¤ä¸ªdivä¸ºä¾‹ &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;h1&gt;&lt;/h1&gt; &lt;p&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt; &lt;i&gt;&lt;/i&gt; &lt;span&gt;&lt;/span&gt; &lt;h1&gt;&lt;/h1&gt; &lt;p&gt;&lt;/p&gt;&lt;/div&gt; span:first-of-type &#123; /* é€‰æ‹©spançˆ¶å…ƒç´ ä¸‹çš„ç¬¬ä¸€ä¸ªspanå…ƒç´  */&#125; è¿™ä¸ªæ—¶å€™ä¸¤ä¸ªspanéƒ½å¯ä»¥è¢«é€‰æ‹©åˆ°ï¼Œfirst-of-typeç›¸å½“äºåªæ˜¯å°†Eçš„çˆ¶å…ƒç´ æ‰€åŒ…å«çš„Eå…¨éƒ¨æŠ½ç¦»å‡ºæ¥ï¼Œç„¶åè¿›è¡Œé€‰æ‹©ã€‚ç°åœ¨æˆ‘ä»¬å°†divåŒ…å«çš„spanå…¨éƒ¨æŠ½ç¦»å‡ºæ¥ï¼Œç›¸å½“äº &lt;div&gt; &lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt; &lt;span&gt;&lt;/span&gt;&lt;/div&gt; ç„¶åé€‰æ‹©ç¬¬ä¸€ä¸ªspanï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªspanéƒ½å¯ä»¥è¢«é€‰æ‹©åˆ°ã€‚å…¶ä½™çš„first-last-type, nth-of-type(n), nth-last-of-typeåŒä¸Šé¢ä»‹ç»çš„last-child, â€¦ç›¸ä¼¼ï¼Œå…¶ä¸åŒä¹‹å¤„åœ¨fitst-childä¸first-of-typeå¤„å·²è¯¦ç»†é˜è¿°ã€‚ CSS3é¢œè‰²æ¸å˜é¢œè‰²æ¸å˜æ˜¯æŒ‡åœ¨ä¸¤ä¸ªé¢œè‰²ä¹‹é—´å¹³ç¨³çš„è¿‡æ¸¡ã€‚ä»¥å¾€æˆ‘ä»¬å¦‚æœå¸Œæœ›æœ‰é¢œè‰²æ¸å˜çš„æ•ˆæœï¼Œä¼šåœ¨ç»˜å›¾å·¥å…·(å¦‚PS)è®¾è®¡å‡ºå¸Œæœ›çš„æ•ˆæœï¼Œç„¶åä½œä¸ºå›¾ç‰‡æ¥å®ç°è¿™ç§æ•ˆæœã€‚ç°åœ¨é€šè¿‡æµè§ˆå™¨å¯ä»¥æ¸²æŸ“è€Œæˆï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸‹è½½çš„æ—¶é—´å’Œå¸¦å®½çš„ä½¿ç”¨ï¼Œä»¥åŠåœ¨æ”¾å¤§æ—¶çœ‹èµ·æ¥æ•ˆæœæ›´å¥½ï¼Œå› ä¸ºè¿™æ˜¯æµè§ˆå™¨è‡ªåŠ¨ç”Ÿæˆçš„ã€‚ çº¿æ€§æ¸å˜çº¿æ€§æ¸å˜æŒ‡çš„æ˜¯é¢œè‰²åœ¨ä¸€æ¡çº¿ä¸Šå¹³ç¨³çš„å˜åŒ–ï¼Œä¸ºäº†å®ç°çº¿æ€§æ¸å˜ï¼Œæˆ‘ä»¬è¦è§„å®šçº¿çš„æ–¹å‘ï¼Œèµ·ç‚¹é¢œè‰²å’Œç»ˆæ­¢é¢œè‰²ã€‚å®ƒçš„è¯­æ³•ä¸º background-image: linear-gradient(direction, color-stop1, color-stop2, ...); å¦‚ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; .box &#123; width:100%; height:100px; background-image: linear-gradient(to right, red, green); &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"box\"&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æ•ˆæœä¸º å…¶ä¸­ linear-gradient(to right, red, green); å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°to rightæ˜¯ç”¨æ¥è®¾ç½®æ–¹å‘çš„ï¼Œè®¾ç½®æ–¹å‘çš„å€¼æœ‰ to rightï¼šä»å·¦å¾€å³ to leftï¼šä»å³å¾€å·¦ to topï¼šä»ä¸‹å¾€ä¸Š to bottomï¼šä»ä¸Šå¾€ä¸‹ï¼Œé»˜è®¤å€¼ to right bottomï¼šä»å·¦ä¸Šè§’å¾€å³ä¸‹è§’ â€¦ â€¦ é™¤äº†å¯ä»¥è®¾ç½®è¿™äº›å€¼ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®è§’åº¦ï¼Œå¦‚ linear-gradient(0deg, red, green); å…¶ä¸­è§’åº¦æ‰€ä»£è¡¨çš„çš„æ–¹å‘å¦‚ä¸‹æ‰€ç¤º å³0degä»£è¡¨çš„æ–¹å‘æ˜¯ä»ä¸‹å¾€ä¸Šã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œé™¤äº†è®¾ç½®èµ·ç‚¹é¢œè‰²å’Œç»ˆç‚¹é¢œè‰²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨ä¹‹é—´è®¾ç½®å¤šä¸ªé¢œè‰²èŠ‚ç‚¹ï¼Œå¦‚ä¸‹é¢è®¾ç½®äº†ä¸€ä¸ªå½©è™¹æ¸å˜è‰² background-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet); é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨é¢œè‰²åé¢åŠ ä¸Šæ•°å€¼æˆ–è€…ç™¾åˆ†æ¯”ï¼Œå¦‚ background-image: linear-gradient(to right, red, blue 10%, violet); blue 10%è¡¨ç¤ºblueé¢œè‰²èŠ‚ç‚¹åœ¨è¯¥çº¿æ€§æ–¹å‘10%çš„ä½ç½®ï¼Œæ‰€ä»¥ä»0%-10%æ˜¯çº¢è‰²åˆ°è“è‰²çš„æ¸å˜ï¼Œ10%-100%æ˜¯è“è‰²åˆ°ç´«è‰²çš„æ¸å˜ã€‚ æ¥ä¸‹æ¥ä»‹ç»æ¸å˜çš„æœ€åä¸€ä¸ªç‰¹æ€§ï¼šæ¸å˜é‡å¤ã€‚çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ /* è®¾ç½®ä¸º23%è€Œæ²¡æœ‰è®¾ç½®ä¸ºèƒ½è¢«100%æ•´é™¤çš„æ•° å°±æ˜¯æƒ³çœ‹ä¸€ä¸‹è¿™ç§æƒ…å†µæ˜¯æ€ä¹ˆå¤„ç†çš„ */repeating-linear-gradient(to right, red,yellow 23%); ä¸Šé¢çš„æ„æ€æ˜¯ä»0%-23%å®ç°çº¢è‰²åˆ°é»„è‰²çš„æ¸å˜ï¼Œç„¶åé‡å¤ç›´è‡³100%ã€‚ å¾„å‘æ¸å˜å¾„å‘æ¸å˜æ˜¯æŒ‡ä»¥æŸç‚¹ä¸ºåœ†å¿ƒï¼Œå‘å¤–è¿›è¡Œé¢œè‰²æ¸å˜ã€‚æ‰€ä»¥ä¸ºäº†å®ç°å¾„å‘æ¸å˜ï¼Œæˆ‘ä»¬è¦è§„å®šåœ†å¿ƒçš„ä½ç½®å’Œèµ·ç‚¹é¢œè‰²å’Œç»ˆç‚¹é¢œè‰²ã€‚å¾„å‘æ¸å˜çš„è¯­æ³•ä¸º background-image: radial-gradient(shape size at position, start-color, ..., last-color); å…¶ä¸­shapeä¸ºæ¸å˜çš„å½¢çŠ¶ï¼Œæœ‰ä¸¤ç§å–å€¼ circle(åœ†å½¢) ellipse(æ¤­åœ†, é»˜è®¤å€¼) sizeæ˜¯æŒ‡100%æ‰€ä»£è¡¨çš„çš„é•¿åº¦ï¼Œæœ‰å››ç§å–å€¼ closest-side(ç¦»æœ€è¿‘çš„è¾¹çš„è·ç¦») farthest-side(ç¦»æœ€è¿œçš„è¾¹çš„è·ç¦») cloest-corner(ç¦»æœ€è¿‘çš„è§’çš„è·ç¦») farthest-corber(ç¦»æœ€è¿œçš„è§’çš„è·ç¦»ï¼Œé»˜è®¤å€¼) positionæ˜¯æŒ‡åœ†å¿ƒçš„ä½ç½®ï¼Œé»˜è®¤ä¸ºcenterï¼Œå³ä¸­å¿ƒä½ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡at 100px 100pxå½¢å¼è¿›è¡Œè®¾ç½®ï¼Œå·¦ä¸Šè§’çš„åæ ‡çš„ä¸º(0px, 0px)ã€‚ .box &#123; width:400px; height:200px; /* è®¾ç½®sizeå¤§å°ä¸ºç¦»æœ€è¿‘çš„è¾¹çš„è·ç¦» */ background-image: repeating-radial-gradient(circle closest-side at 200px 100px, red, red 10%,green 12.5%, green 25%)&#125; å¯è§ç¦»æœ€è¿‘çš„è¾¹æœ‰4ä¸ªå®Œæ•´çš„é‡å¤ã€‚ /* è®¾ç½®sizeå¤§å°ä¸ºç¦»æœ€è¿œçš„è¾¹çš„è·ç¦» */background-image: repeating-radial-gradient(circle farthest-side at 200px 100px, red, red 10%,green 12.5%, green 25%) å¯è§ç¦»æœ€è¿œçš„è¾¹æœ‰4ä¸ªå®Œæ•´çš„é‡å¤ã€‚ /*ä¸ºäº†ä½¿æœ€è¿œçš„è§’å’Œæœ€è¿‘çš„è§’çš„è·ç¦»ä¸åŒ positionä¸èƒ½è®¾ç½®åœ¨ä¸­å¿ƒ *//* è®¾ç½®sizeå¤§å°ä¸ºç¦»æœ€è¿‘çš„è§’çš„è·ç¦» */background-image: repeating-radial-gradient(circle closest-corner at 100px 100px, red, red 10%,green 12.5%, green 25%) å¯è§ç¦»æœ€è¿‘çš„è§’æœ‰4ä¸ªå®Œæ•´çš„é‡å¤ã€‚ /* è®¾ç½®sizeå¤§å°ä¸ºç¦»æœ€è¿œçš„è§’çš„è·ç¦» */background-image: repeating-radial-gradient(circle farthest-corner at 100px 100px, red, red 10%,green 12.5%, green 25%) å¯è§ç¦»æœ€è¿œçš„è§’æœ‰4ä¸ªå®Œæ•´çš„é‡å¤ã€‚ CSS3 2Då˜æ¢CSS3 2Då˜æ¢åŒ…æ‹¬å¯¹å…ƒç´ è¿›è¡Œç§»åŠ¨ã€ç¼©æ”¾ã€è½¬åŠ¨ã€æ‹‰é•¿æˆ–æ‹‰ä¼¸ã€‚ translate()ï¼šå¯¹å…ƒç´ è¿›è¡Œè¿›è¡Œç§»åŠ¨ translate(100px)ï¼šå¯¹å…ƒç´ å‘xæ­£æ–¹å‘ç§»åŠ¨100px(è´Ÿå€¼å‘è´Ÿæ–¹å‘ç§»åŠ¨) translate(100px, 100px)ï¼šå¯¹å…ƒç´ å‘x, yæ­£æ–¹å‘æ–¹å‘ç§»åŠ¨100px scale()ï¼šå¯¹å…ƒç´ è¿›è¡Œç¼©æ”¾ scale(n)ï¼šå¯¹å…ƒç´ è¿›è¡Œç¼©æ”¾ï¼Œä¼ å…¥çš„å‚æ•°å¤§äº1ï¼Œè¿›è¡Œæ”¾å¤§ï¼Œå°äº1ï¼Œè¿›è¡Œç¼©å° scale(x, y)ï¼šç¬¬ä¸€ä¸ªå‚æ•°å¯¹å®½åº¦è¿›è¡Œç¼©æ”¾ï¼Œç¬¬äºŒä¸ªå€¼å¯¹é«˜åº¦è¿›è¡Œç¼©æ”¾ rotate()ï¼šå›´ç»•ä¸­å¿ƒæ—‹è½¬ï¼Œæ­£å€¼é¡ºæ—¶é’ˆï¼Œè´Ÿå€¼é€†æ—¶é’ˆ transform-originï¼šå¯ä»¥æ”¹å˜æ—‹è½¬çš„ä¸­å¿ƒï¼Œå¦‚ /* å›´ç»•å·¦ä¸Šè§’è¿›è¡Œæ—‹è½¬ */transform-origin: left top; /* å›´ç»•ä¸­å¿ƒæ—‹è½¬ ä¸ºé»˜è®¤å€¼ */transform-origin: 50% 50%; skew()ï¼šå¯¹å…ƒç´ è¿›è¡Œå€¾æ–œ skew(angle)ï¼šå‘xè½´è´Ÿæ–¹å‘å€¾æ–œangle(è´Ÿå€¼æ²¿æ­£æ–¹å‘) skew(anglex, angley)ï¼šç¬¬ä¸€ä¸ªå‚æ•°å¯¹xæ–¹å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯¹yæ–¹å‘ é™¤äº†å¯ä»¥ä½¿ç”¨ä¸Šè¿°å±æ€§è¿›è¡Œè®¾ç½®ï¼Œè¿˜å¯ä»¥ä½¿ç”¨translateX(), translateY()ç­‰è¿›è¡Œè®¾ç½®ã€‚ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; div &#123; width: 100px; height: 100px; &#125; /* ä¸ºæ¯ä¸ªdivè®¾ç½®é¢œè‰² */ .box1 &#123; background-color: red; &#125; .box2 &#123; background-color: aqua; &#125; .box3 &#123; background-color: chocolate; &#125; .box4 &#123; background-color: darkcyan; &#125; /* ä¸ºæ¯ä¸ªç›’å­è®¾ç½®ä¸åŒçš„2Då˜æ¢æ•ˆæœ */ .box1:hover &#123; transform: translateX(100px); &#125; .box2:hover &#123; transform: scale(0.5); &#125; .box3:hover &#123; transform: rotate(-30deg); &#125; .box4:hover &#123; transform: skew(30deg); &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"box1\"&gt;&lt;/div&gt; &lt;div class=\"box2\"&gt;&lt;/div&gt; &lt;div class=\"box3\"&gt;&lt;/div&gt; &lt;div class=\"box4\"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; CSS3 3D3Då˜æ¢çš„æ“ä½œåŒ2Dç›¸åŒï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªå¯¹Zè½´çš„æ“ä½œï¼Œå¦‚translateZ()ï¼Œè€Œrotateä¹Ÿåˆ†ä¸ºrotateX(), rotateY(), rotateZ()ï¼Œåˆ†åˆ«è¡¨ç¤ºç»•ç€Xè½´ï¼ŒYè½´ï¼ŒZè½´æ—‹è½¬ã€‚2Då˜æ¢çš„rotate()å…¶å®å°±ç›¸å½“äºrotateZ()ã€‚ CSS3åŠ¨ç”»transitioné¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ .box &#123; height: 100px; width: 100px; background-color: black;&#125;.box:hover &#123; transform: translateX(600px);&#125; å½“æˆ‘ä»¬æŠŠé¼ æ ‡æ”¾åœ¨ç›’å­ä¸Šæ—¶ï¼Œç›’å­å‘å³ç§»åŠ¨äº†600pxï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨ç¬é—´å®Œæˆçš„ï¼Œååˆ†çš„çªå…€ï¼Œæˆ‘ä»¬å¸Œæœ›æ˜¯ç¼“æ…¢ç”±ä¸€ä¸ªè½¬æ€è½¬å˜åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„ï¼Œè¿™ç§æ•ˆæœåˆå«åšè¿‡æ¸¡ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°transitionå±æ€§äº†ã€‚ ä¸ºæŸä¸ªå…ƒç´ æ·»åŠ è¿‡æ¸¡æ•ˆæœï¼Œå¿…é¡»è§„å®šä¸¤é¡¹å†…å®¹ï¼š transition-propertyï¼šæŒ‡å®šè¦æ·»åŠ æ•ˆæœçš„CSSå±æ€§ ä¾‹å¦‚ä¸Šé¢å°±è¦ä¸ºtransformæ·»åŠ è¿‡æ¸¡æ•ˆæœï¼Œæ‰€ä»¥å°±å¯ä»¥å†™ä¸º /* å€¼å¯ä»¥ä¸ºall è¡¨ç¤ºä¸ºæ‰€æœ‰çš„å±æ€§æ·»åŠ è¿‡æ¸¡æ•ˆæœ é»˜è®¤å€¼ä¸ºall*/transition-property: transform; transition-durationï¼šæ·»åŠ è¿‡æ¸¡çš„æ€»æ—¶é—´ /* é»˜è®¤å€¼ä¸º0s */transition-duration: 1s; /* å•ä½å¯ä»¥ä¸ºs */transition-duration: 100ms; /* å•ä½ä¹Ÿå¯ä»¥ä¸ºms */ é™¤äº†ä¸Šé¢å¿…é¡»è®¾ç½®çš„ä¸¤ä¸ªå±æ€§ï¼Œè¿˜å¯ä»¥è®¾ç½®ä¸‹é¢çš„å±æ€§ transition-timing-functionï¼šæ—¶é—´å‡½æ•°ï¼Œè®¾ç½®è¿‡æ¸¡çš„å˜åŒ–é€Ÿåº¦ easeï¼šå¼€å§‹å’Œç»“æŸæ…¢ï¼Œä¸­é—´å¿«ï¼Œé»˜è®¤å€¼ã€‚ linearï¼šåŒ€é€Ÿã€‚ ease-inï¼šå¼€å§‹æ…¢ã€‚ ease-outï¼šç»“æŸæ…¢ã€‚ ease-in-outï¼šå’Œeaseç±»ä¼¼ï¼Œä½†æ¯”easeå¹…åº¦å¤§ã€‚ é™¤äº†å¯ä»¥è®¾ç½®ä»¥ä¸Šå…³é”®å­—ï¼Œè¿˜å¯ä»¥è®¾ç½®steps()å‡½æ•°ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š steps(&lt;integer&gt;[,start | end]?) ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªæ•´æ•°å€¼ï¼Œstepsæ­¥è¿›å‡½æ•°å°†è¿‡æ¸¡æ—¶é—´åˆ’åˆ†æˆå¤§å°ç›¸ç­‰çš„æ—¶é—´æ—¶éš”æ¥è¿è¡Œï¼Œè¿™ä¸ªæ•´æ•°å€¼å°±æ˜¯åˆ†æˆçš„ä»½æ•°ã€‚ç¬¬äºŒä¸ªå€¼æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤å€¼ä¸ºendã€‚å¦‚æœæ˜¯startï¼Œåˆ™ä¸ä¿ç•™å¼€å§‹å€¼ï¼Œå¦‚æœæ˜¯endï¼Œåˆ™ä¿ç•™å¼€å§‹å€¼ã€‚ è¿™é‡Œç»™å‡ºä¸€ä¸ªåˆ©ç”¨steps()å‡½æ•°åšåŠ¨ç”»æ•ˆæœçš„ä¾‹å­ã€‚ transition-delayï¼šå»¶æ—¶æ—¶é—´ï¼Œé»˜è®¤å€¼ä¸º0s animationä¸transitionä¸€æ ·ï¼Œanimationä¹Ÿæœ‰å¾ˆå¤šçš„å±æ€§ animation-nameï¼šåŠ¨ç”»åç§° animation-durationï¼šåŠ¨ç”»æŒç»­æ—¶é—´ animation-timing-functionï¼šåŠ¨ç”»æ—¶é—´å‡½æ•° animation-delayï¼šåŠ¨ç”»å»¶è¿Ÿæ—¶é—´ animation-iteration-countï¼šåŠ¨ç”»æ‰§è¡Œæ¬¡æ•°ï¼Œå¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºinfiniteï¼Œæ„æ€æ˜¯æ— é™å¾ªç¯ animation-directionï¼šåŠ¨ç”»æ‰§è¡Œæ–¹å‘ animation-paly-stateï¼šåŠ¨ç”»æ’­æ”¾çŠ¶æ€ animation-fill-modeï¼šåŠ¨ç”»å¡«å……æ¨¡å¼ è¿‡æ¸¡æ˜¯æŒ‡åœ¨ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´ï¼Œè€ŒåŠ¨ç”»åˆ™æ˜¯æŒ‡åœ¨å¤šä¸ªçŠ¶æ€ä¹‹é—´å˜åŒ–ï¼Œè¿™äº›çŠ¶æ€æˆ‘ä»¬ç§°ä¹‹ä¸ºå…³é”®å¸§ï¼Œå› æ­¤åŠ¨ç”»åˆç§°ä¹‹ä¸ºå…³é”®å¸§åŠ¨ç”»ã€‚ä½¿ç”¨åŠ¨ç”»é¦–å…ˆè¦åˆ›å»ºå…³é”®å¸§ï¼Œç„¶åä½¿ç”¨animation-nameå»è°ƒç”¨è¯¥åŠ¨ç”»ï¼Œå¦‚ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; .box &#123; width: 100px; height: 100px; background-color: aqua; &#125; .box:hover &#123; animation-name: move; animation-duration: 1s; &#125; /* åˆ›å»ºä¸€ä¸ªå…³é”®å¸§åŠ¨ç”» åŠ¨ç”»åä¸ºmove */ /* è°ƒç”¨æ—¶ä½¿ç”¨animation-name: moveè°ƒç”¨ */ @keyframes move &#123; /* ç¬¬ä¸€ä¸ªçŠ¶æ€ 0% æ—¶çš„çŠ¶æ€ å¯ä»¥ä½¿ç”¨fromä»£æ›¿ */ /* è¿™é‡Œçš„ç™¾åˆ†æ¯”æ˜¯æŒ‡ æ€»æ—¶é—´ * ç™¾åˆ†æ¯” å¾—åˆ°çš„æŸä¸ªæ—¶åˆ»çš„çŠ¶æ€*/ 0% &#123; transform: translateX(0px); &#125; 50% &#123; transform: translateX(100px); &#125; /* 100% å¯ä»¥ä½¿ç”¨ to ä»£æ›¿ */ 100% &#123; transform: translateY(100px); &#125; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"box\"&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®åŠ¨ç”»çš„æ‰§è¡Œæ¬¡æ•°ï¼Œä¿®æ”¹ä¸Šé¢çš„æ ·å¼ä¸º .box &#123; width: 100px; height: 100px; background-color: aqua; animation-name: move; animation-duration: 1s; /* æ’­æ”¾æ¬¡æ•°é»˜è®¤å€¼ä¸º 1 */ animation-iteration-count: infinite;&#125; æˆ‘ä»¬å‘ç°åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œç›’å­çªç„¶å°±å›åˆ°äº†åŸä½ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹çªå…€ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯æ…¢æ…¢è¿‡æ¸¡çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¾ç½®animation-directionï¼Œanimation-directionæœ‰å››ç§å–å€¼ normalï¼šé»˜è®¤å€¼ï¼Œæ­£å¸¸æ’­æ”¾ reverseï¼šåå‘æ’­æ”¾ alternateï¼šå¦‚æœåŠ¨ç”»æ¬¡æ•°åœ¨ä¸¤æ¬¡æˆ–ä¸¤æ¬¡ä»¥ä¸Šï¼Œé‚£ä¹ˆç¬¬å¶æ•°æ¬¡ä¸ºåå‘æ’­æ”¾ï¼Œå°±å¯ä»¥è¾¾åˆ°å›åˆ°åŸä½ç½®æ—¶ä¹Ÿæœ‰è¿‡æ¸¡çš„æ•ˆæœã€‚è‹¥åŠ¨ç”»åªæ’­æ”¾ä¸€æ¬¡ï¼Œåˆ™å’Œæ­£å‘æ’­æ”¾ä¸€æ ·ã€‚ alternate-reverseï¼šè‹¥åŠ¨ç”»åªæ’­æ”¾ä¸€æ¬¡ï¼Œåˆ™å’Œåå‘æ’­æ”¾ä¸€æ ·ã€‚è‹¥æ’­æ”¾ä¸¤æ¬¡ä»¥ä¸Šï¼Œå¶æ•°æ¬¡æ•ˆæœä¸ºæ­£å‘æ’­æ”¾ .box:hover &#123; animation-name: move; animation-duration: 1s; animation-iteration-count: 2; animation-direction: alternate;&#125; animation-play-stateç”¨æ¥è®¾ç½®åŠ¨ç”»çš„æ’­æ”¾çŠ¶æ€ï¼Œæœ‰ä¸¤ç§å–å€¼ runningï¼šé»˜è®¤å€¼ï¼ŒåŠ¨ç”»è¿è¡Œ pausedï¼šåŠ¨ç”»æš‚åœ å°†æ ·å¼ä¿®æ”¹ä¸º .box &#123; width: 100px; height: 100px; background-color: aqua; animation-name: move; animation-duration: 1s; animation-iteration-count: infinite; animation-direction: alternate;&#125; .box:hover &#123; /* å½“é¼ æ ‡æ”¾ä¸Šå»æ—¶ åŠ¨ç”»æš‚åœ */ animation-play-state: paused;&#125; animation-fill-modeç”¨æ¥å®šä¹‰åŠ¨ç”»å¼€å§‹å¸§ä¹‹å‰å’Œç»“æŸå¸§ä¹‹åçš„åŠ¨ä½œï¼Œæœ‰ä»¥ä¸‹å››ç§å–å€¼ noneï¼šé»˜è®¤å€¼ã€‚åŠ¨ç”»ç»“æŸåï¼Œå…ƒç´ ç§»åŠ¨åˆ°åˆå§‹çŠ¶æ€(ä¸ä¸€å®š0%çš„çŠ¶æ€ï¼Œæ˜¯å…ƒç´ è‡ªèº«çš„å±æ€§å€¼) forwardsï¼šå…ƒç´ åœåœ¨åŠ¨ç”»ç»“æŸæ—¶çš„ä½ç½®(ä¸ä¸€å®šæ˜¯100%çš„ä½ç½®ï¼Œæœ‰å¯èƒ½åå‘è¿åŠ¨) backwardsï¼šåœ¨animation-delayçš„æ—¶é—´å†…ï¼Œå…ƒç´ ç«‹åˆ»ç§»åŠ¨åˆ°åŠ¨ç”»å¼€å§‹æ—¶(ä¸ä¸€å®šæ˜¯0%ï¼Œæœ‰å¯èƒ½åå‘è¿åŠ¨)çš„ä½ç½®ã€‚è‹¥å…ƒç´ æ— animation-delayæ—¶ï¼Œä¸noneçš„æ•ˆæœç›¸åŒ bothï¼šåŒæ—¶å…·æœ‰forwardså’Œbackwards ä¿®æ”¹æ ·å¼å¦‚ä¸‹ .box &#123; width: 100px; height: 100px; background-color: aqua;&#125; .box:hover &#123; animation-name: move; animation-duration: 1s; /* åŠ¨ç”»ç»“æŸåï¼Œåœç•™åœ¨åŠ¨ç”»ç»“æŸçš„ä½ç½® */ animation-fill-mode: forwards;&#125; CSS3 flexå¸ƒå±€å½“ä¸€ä¸ªçˆ¶å…ƒç´ è¢«è®¾ç½®ä¸ºdisplay:flexæ—¶ï¼Œå®ƒå°±æ˜¯å¼¹æ€§å¸ƒå±€ï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚æ­¤æ—¶æˆ‘ä»¬æŠŠçˆ¶å…ƒç´ ç§°ä¹‹ä¸ºcontainer(å®¹å™¨)ï¼ŒæŠŠå­å…ƒç´ ç§°ä¹‹ä¸ºitem(é¡¹ç›®)ã€‚å½“çˆ¶å…ƒç´ è¢«è®¾ç½®ä¸ºå¼¹æ€§å¸ƒå±€åï¼Œå¯¹å­å…ƒç´ æœ‰ä»€ä¹ˆå½±å“? å…ˆæ¥æ„Ÿå—ä¸€ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; .container &#123; display: flex; width: 500px; height: 400px; background-color: crimson; &#125; .item &#123; width: 100px; height: 100px; background-color: aqua; position: relative; &#125; /* è¿™ä¸ªæ˜¯ä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ æ ·å¼ä¸é‡è¦ ä¸å¿…ç»†çœ‹ */ .item div&#123; width: 50%; height: 50%; position: absolute; /* ä¸‹é¢ä¸‰è¡Œè¯­å¥æ˜¯ä¸ºäº†è®¾ç½®å±…ä¸­å¯¹é½ */ top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: brown; /* åœ†è§’è¾¹æ¡† */ border-radius: 50%; /* ä¸‹é¢ä¸¤è¡Œè®¾ç½®æ–‡å­—å±…ä¸­å¯¹é½ */ text-align: center; line-height: 50px; /* è®¾ç½®å­—ä½“æ ·å¼ */ font-size: 30px; font-weight: 700; color: white; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"container\"&gt; &lt;div class=\"item\"&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å½“çˆ¶å…ƒç´ è®¾ç½®ä¸ºflexå¸ƒå±€åï¼Œå…¶å­å…ƒç´ itemä¼šåœ¨çˆ¶å…ƒç´ containerçš„ä¸»è½´ä¸Šæ’åˆ—ã€‚ è¿™é‡Œåˆç‰µæ¶‰åˆ°æ–°çš„æ¦‚å¿µï¼Œä¸»è½´(main axis)ï¼Œflexå®¹å™¨çš„ä¸»è½´é»˜è®¤ä¸ºXè½´ï¼Œå³ä»å·¦å‘å³ï¼Œæ—¢ç„¶æœ‰ä¸»è½´ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰ä¾§è½´(cross axis)ï¼Œé»˜è®¤çš„ä¾§è½´ä¸ºYè½´ï¼Œå³ä»ä¸Šå¾€ä¸‹ã€‚ containerä¸Šçš„å±æ€§ç›´è§‚çš„æ„Ÿå—äº†ä¸€ä¸‹flexçš„æ•ˆæœï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹flexè¦è®¾ç½®å“ªäº›å±æ€§ï¼Œé¦–å…ˆè®¾ç½®åœ¨containerçš„flexå±æ€§æœ‰ flex-direction flex-wrap flex-flow justify-content align-items align-content ä¸‹é¢æ¥ä¸€ä¸€ä»‹ç»ã€‚ flex-directionæ˜¯ç”¨æ¥è®¾ç½®ä¸»è½´çš„ï¼Œå®ƒæœ‰ä»¥ä¸‹å››ä¸ªå€¼å¯é€‰ rowï¼šé»˜è®¤å€¼ï¼Œä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å·¦ç«¯ã€‚ row-reverseï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯ã€‚ columnï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸Šæ²¿ã€‚ column-reverseï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸‹æ²¿ã€‚ ç°åœ¨æˆ‘ä»¬åˆ†åˆ«ä¿®æ”¹containeré‡Œé¢çš„æ ·å¼ flex-direction: row-reverse; flex-direction: column; flex-direction: column-reverse; ä¸ºäº†æ¼”ç¤ºflex-wrapï¼Œæˆ‘ä»¬æ·»åŠ 9ä¸ªitem(æ­¤æ—¶flex-directionä¸ºé»˜è®¤å€¼rowï¼Œé™¤éç‰¹åˆ«å£°æ˜ï¼Œå¦åˆ™æˆ‘ä»¬åœ¨æ¼”ç¤ºå…¶ä¸€ä¸ªflexå±æ€§æ—¶ï¼Œä¼šå°†å…¶ä»–flexå±æ€§è®¾ç½®ä¸ºé»˜è®¤å€¼) &lt;div class=\"container\"&gt; &lt;div class=\"item\"&gt;&lt;div&gt;1&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;2&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;3&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;4&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;5&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;6&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;7&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;8&lt;/div&gt;&lt;/div&gt; &lt;div class=\"item\"&gt;&lt;div&gt;9&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; æ•ˆæœä¸º æˆ‘ä»¬å‘ç°9ä¸ªitemæ’æˆäº†ä¸€æ’ï¼Œæ²¡æœ‰æ¢è¡Œã€‚ä¸ºäº†ä½¿å¾—itemèƒ½å¤Ÿæ¢è¡Œï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®flex-wrapï¼Œå®ƒæœ‰ä¸‰ä¸ªå€¼å¯é€‰ nowrapï¼šé»˜è®¤å€¼ï¼Œä¸æ¢è¡Œ wrapï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹ wrap-reverseï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹ flex-wrap: wrap; flex-wrap: wrap-reverse; flex-flowæ˜¯flex-directionå’Œflex-wrapä¸¤ä¸ªå±æ€§çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸ºrow wrap flex-flow: &lt;flex-direction&gt; || &lt;flex-wrap&gt;; justify-contentæ˜¯ç”¨æ¥è®¾ç½®itemåœ¨containeråœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼çš„ï¼Œå…·ä½“å¯¹é½æ–¹å¼ä¸è½´çš„æ–¹å‘æœ‰å…³,ä¸‹é¢å‡è®¾ä¸»è½´ä¸ºä»å·¦åˆ°å³(row)ã€‚æœ‰ä¸‹é¢å‡ ç§å€¼å¯é€‰ flex-startï¼šå·¦å¯¹é½ flex-endï¼šå³å¯¹é½ centerï¼šå±…ä¸­å¯¹é½ space-betweenï¼šä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´é—´éš”ç›¸ç­‰ space-aroundï¼šæ¯ä¸ªé¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚ è¿™é‡Œæ¼”ç¤ºä¸€ä¸‹space-betweenå’Œspace-around justify-content: space-between; justify-content: space-around; align-itemså®šä¹‰äº†åœ¨ä¾§è½´ä¸Šçš„å¯¹é½æ–¹å¼(ä»¥ä»ä¸Šå¾€ä¸‹çš„ä¾§è½´ä¸ºä¾‹) first-startï¼šå¾€ä¸Šå¯¹é½ first-endï¼šå¾€ä¸‹å¯¹é½ centerï¼šå±…ä¸­å¯¹é½ baselineï¼šitemçš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ã€‚ stretchï¼šé»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®heightæˆ–è€…heightè®¾ç½®ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ è¿™é‡Œæ¼”ç¤ºä¸€ä¸‹stretchï¼Œä¸è®¾ç½®height .container &#123; display: flex; width: 500px; height: 400px; background-color: crimson; align-items: stretch;&#125;.item &#123; width: 100px; /* height: 100px; */ background-color: aqua; position: relative;&#125;.item div &#123; /* ä¿®æ”¹line-heightä¸º200pxä½¿æ–‡å­—å±…ä¸­ */&#125; align-contentï¼Œå½“æˆ‘ä»¬è®¾ç½®flex-wrapä¸ºwrapæˆ–è€…wrap-reverseæ—¶ï¼Œitemä¼šå æ®å¤šè¡Œï¼Œè¿™ä¸ªå±æ€§æ˜¯ç”¨æ¥è®¾ç½®å æ®å¤šè¡Œitemåœ¨ä¾§è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰å¤šè¡Œï¼Œè¿™ä¸ªå±æ€§æ— æ•ˆã€‚æœ‰ä¸‹åˆ—å€¼å¯é€‰(ä»¥ä¾§è½´ä¸ºä»ä¸Šå¾€ä¸‹ä¸ºä¾‹) first-startï¼šå¾€ä¸Šå¯¹é½ first-endï¼šå¾€ä¸‹å¯¹é½ centerï¼šå±…ä¸­å¯¹é½ stretchï¼šé»˜è®¤å€¼ï¼Œè½´çº¿å æ®æ•´ä¸ªä¾§è½´ space-betweenï¼šä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´å¹³å‡åˆ†å¸ƒ space-around itemä¸Šçš„å±æ€§ä¸‹é¢6ä¸ªå±æ€§æ˜¯è®¾ç½®åœ¨itemä¸Šçš„ order flex-grow flex-shrink flex-basis flex self-align orderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ï¼Œç°åœ¨è®¾ç½®ç¬¬2ä¸ªitemçš„orderä¸º1 .item:nth-child(2)&#123; order: 1;&#125; å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œé‚£ä¹ˆflex-growå¯ä»¥ç”¨æ¥è®¾ç½®itemå æ®å‰©ä½™ç©ºé—´çš„ä»½æ•°(è¿™ä¼šå¯¼è‡´itemå¢å¤§)ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œæ„å‘³ç€å³ä½¿æœ‰å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸å¢å¤§ï¼Œç°åœ¨è®¾ç½®å„è‡ªçš„flex-grow .item:first-child &#123; /* ç¬¬ä¸€ä¸ªitemå  1 / (1 + 2 + 1) = 1/4 çš„å‰©ä½™é—´ */ flex-grow: 1;&#125;.item:nth-child(2) &#123; /* ç¬¬äºŒä¸ªitemå  2/4 çš„å‰©ä½™ç©ºé—´*/ flex-grow: 2;&#125;.item:last-child &#123; /* ç¬¬ä¸‰ä¸ªitemå  1/4 çš„å‰©ä½™ç©ºé—´ */ flex-grow: 1;&#125; flex-shrinkä¸flex-growç›¸åï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œitemç¼©å°çš„ä»¥ä½¿å¾—æ‰€æœ‰itemè¢«åŒ…å«åœ¨containerä¸­ã€‚é»˜è®¤å€¼æ˜¯1ï¼Œå³æ¯ä¸ªitemä¼šç­‰æ¯”ä¾‹ç¼©å° .item:first-child &#123; flex-shrink: 2;&#125;.item:nth-child(2) &#123; flex-shrink: 2;&#125;.item:last-child &#123; flex-shrink: 2;&#125; å¯è§ç¬¬ä¸€ä¸ªã€ç¬¬äºŒä¸ªå’Œæœ€åä¸€ä¸ªç¼©å°çš„æ›´å¤šã€‚ flex-basisçš„å«ä¹‰æ˜¯itemåœ¨è¢«æ”¾è¿›containerä¹‹å‰çš„å¤§å°ã€‚ä¹Ÿå°±æ˜¯itemç†æƒ³æˆ–å‡è®¾çš„å¤§å°ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œå¦‚æœä¸è®¾ç½®è¿™ä¸ªå€¼ï¼Œå¹¶ä¸”ä¸»è½´æ˜¯rowçš„è¯ï¼Œé‚£ä¹ˆflex-basiså°±æ˜¯widthçš„å¤§å°ï¼Œå¦‚æœä¸»è½´æ˜¯columnçš„è¯ï¼Œé‚£ä¹ˆflex-basiså°±æ˜¯heightçš„å¤§å°ï¼Œå¦‚æœwidthæˆ–heightä¹Ÿæ²¡æœ‰è®¾ç½®çš„è¯ï¼Œflex-basisæ˜¯contentçš„å¤§å°ã€‚itemçš„å®½åº¦æ˜¯æœ€ç»ˆçš„flex-basisï¼Œæœ€ä½³çš„æ–¹æ³•æ˜¯åªä½¿ç”¨flex-basisè€Œä¸æ˜¯widthæˆ–heightå±æ€§ã€‚ ä½†æ˜¯flex-basisä¸èƒ½ä¿è¯å…¶å¤§å°! ä¸€æ—¦å°†itemsæ”¾å…¥flexå®¹å™¨ä¸­ï¼Œflex-basisçš„å€¼å°±æ— æ³•ä¿è¯äº†ã€‚è¿™æ˜¯å› ä¸ºæœ‰flex-growå’Œflex-shrinkï¼Œå¯èƒ½ä¼šè¢«æ”¾å¤§æˆ–è€…ç¼©å°itemçš„å¤§å°ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œflex-basisè¿˜å—åˆ°min-width, max-width, min-height, max-heightçš„çº¦æŸã€‚å…·ä½“è§The Difference Between Width and Flex Basisè¿™ç¯‡æ–‡ç« ï¼Œæœ‰ç€ååˆ†è¯¦ç»†çš„é˜è¿°ï¼Œç»å¯¹è®©ä½ ç‰©è¶…æ‰€å€¼ã€‚ slef-alignå±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemså±æ€§ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„align-itemså±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäºstretchã€‚ .container &#123; ... ... align-items: center; flex-wrap: wrap;&#125;.item:first-child &#123; align-self: flex-start;&#125;","tags":[{"name":"CSS3","slug":"CSS3","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/CSS3/"}]},{"title":"HTML5è¶…è¯¦ç»†äº†è§£","date":"2019-12-22T16:00:00.000Z","path":"/HTML5å…¥é—¨/","text":"HTML5å±äºä¸Šä¸€ä»£HTMLçš„æ–°è¿­ä»£è¯­è¨€ï¼Œè®¾è®¡HTML5æœ€ä¸»è¦çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ”¯æŒå¤šåª’ä½“ï¼Œä¾‹å¦‚ï¼švideoæ ‡ç­¾å’ŒaudioåŠcanvasæ ‡è®°ã€‚ HTML5ä¸­è¯­ä¹‰åŒ–æ ‡ç­¾åœ¨HTML5ä¸­æ–°å¢äº†å¾ˆå¤šçš„è¯­ä¹‰æ ‡ç­¾ï¼Œå¦‚ header footer nav article aside section â€¦ â€¦ æ¯”å¦‚ä»¥å‰æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ¥å¸ƒå±€ &lt;div class=\"header\"&gt;&lt;/div&gt; ç°åœ¨å¯ä»¥æ›¿æ¢ä¸º &lt;header&gt;&lt;/header&gt; HTML5å¯ä»¥è®©å¾ˆå¤šæ›´è¯­ä¹‰åŒ–çš„ç»“æ„åŒ–ä»£ç æ ‡ç­¾ä»£æ›¿å¤§é‡æ— æ„ä¹‰çš„divæ ‡ç­¾ è¿™ç§è¯­ä¹‰åŒ–çš„ç‰¹æ€§æå‡äº†ç½‘é¡µçš„è´¨é‡å’Œè¯­ä¹‰ å‡å°‘äº†ä»¥å‰ç”¨äºCSS è°ƒç”¨çš„classå’Œidå±æ€§ å¹¶ä¸”å¯¹æœç´¢å¼•æ“çš„å‹å¥½ï¼Œæ–°çš„ç»“æ„æ ‡ç­¾å¸¦æ¥çš„æ˜¯ç½‘é¡µå¸ƒå±€çš„æ”¹å˜åŠæå‡å¯¹æœç´¢å¼•æ“çš„å‹å¥½ã€‚ ä½†æ˜¯ç°åœ¨ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œç”±äºè¿™äº›å…·æœ‰è¯­ä¹‰çš„æ ‡ç­¾æ˜¯HTML5æ–°å¢çš„ï¼Œè¿™å°±æ„å‘³ç€åœ¨IE8åŠä»¥ä¸‹ç‰ˆæœ¬çš„IEæµè§ˆå™¨ä¸­ä¸æ”¯æŒï¼Œå¦‚ä¸‹é¢çš„æ ·å¼åœ¨IE8ä¸­å°±ä¸èƒ½å¤Ÿæ­£å¸¸çš„æ˜¾ç¤º &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; header &#123; background-color: red; height: 400px; width: 100%; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;header&gt;&lt;/header&gt;&lt;/body&gt;&lt;/html&gt; è§£å†³åŠæ³•ï¼š åœ¨scriptä¸­åˆ›å»ºè¯­ä¹‰æ ‡ç­¾headerï¼Œå¹¶ä¸”å°†headerçš„displayè®¾ç½®ä¸ºblock &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; header &#123; background-color: red; height: 400px; width: 100%; display: block; &#125; &lt;/style&gt; &lt;script&gt; document.createElement(\"header\"); &lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;header&gt;&lt;/header&gt;&lt;/body&gt;&lt;/html&gt; ä½¿ç”¨1çš„æ–¹æ³•ï¼Œæ„å‘³ç€å¯¹æ¯ä¸ªè¯­ä¹‰æ ‡ç­¾éƒ½è¦åˆ›å»ºå…ƒç´ ï¼Œè¿™æ ·æœªå…æ¯”è¾ƒéº»çƒ¦ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨æ’ä»¶ï¼Œå¼•å…¥html5shiv.jsæ–‡ä»¶ï¼Œè¯¥æ’ä»¶çš„å®è´¨è¿˜æ˜¯åˆ›å»ºäº†è¯­ä¹‰å…ƒç´  &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; header &#123; background-color: red; height: 400px; width: 100%; &#125; &lt;/style&gt; &lt;script src=\"html5shiv.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;header&gt;&lt;/header&gt;&lt;/body&gt;&lt;/html&gt; ä¸Šé¢çš„æ–¹æ³•è¿˜æœ‰éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œæ¯”å¦‚åœ¨è°·æ­Œæµè§ˆå™¨ä¸­å®Œå…¨æ”¯æŒHTML5ï¼Œè¿™å°±æ„å‘³ç€åœ¨æ¸²æŸ“HTMLç½‘é¡µæ—¶ä¸éœ€è¦ä¸‹è½½html5shiv.jsæ–‡ä»¶ï¼Œä½†æ˜¯ä¸Šé¢çš„æ–¹æ³•æ˜¯åœ¨ä»»ä½•çš„æµè§ˆå™¨ä¸­éƒ½ä¼šä¸‹è½½çš„ï¼Œæ‰€ä»¥å†æ¬¡æ”¹è¿›å¦‚ä¸‹ &lt;!--[if lte IE 8]&gt; &lt;script src=\"html5shiv.js\"&gt;&lt;/script&gt;&lt;![endif]--&gt; ä¸Šé¢çš„ä»£ç åªæœ‰IEæµè§ˆå™¨æ‰ä¼šè¯†åˆ«ï¼Œæ„æ€æ˜¯å¦‚æœIEæµè§ˆå™¨çš„ç‰ˆæœ¬æ˜¯IE8åŠä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œæ‰ä¼šä¸‹è½½è¿™ä¸ªjsæ–‡ä»¶ï¼Œåœ¨å…¶ä»–æµè§ˆå™¨ä¸­ä¼šè®¤ä¸ºè¿™æ—¶æ³¨é‡Šï¼Œè‡ªåŠ¨å¿½ç•¥ã€‚ videoå’Œaudioåœ¨æµè§ˆå™¨ä¸­æ’å…¥è§†é¢‘å’ŒéŸ³é¢‘æ–‡ä»¶ï¼Œä»¥å¾€æ˜¯ä½¿ç”¨flashæ¥å®ç°ï¼Œä½†æ˜¯åœ¨ç§»åŠ¨ç«¯ä½¿ç”¨flashå°±ä¼šæ¯”è¾ƒæ…¢ï¼ŒHTML5ç»™äº†ä¸¤ä¸ªæ–°çš„æ ‡ç­¾ï¼Œç”¨æ¥æ’å…¥è§†é¢‘å’ŒéŸ³é¢‘æ–‡ä»¶ã€‚äºŒè€…çš„ä½¿ç”¨ç›¸ä¼¼ï¼Œç°ä»¥videoä¸ºä¾‹ä»‹ç»è¯¥æ ‡ç­¾çš„å±æ€§ å±æ€§ ä½œç”¨ src å€¼ä¸ºè§†é¢‘æ–‡ä»¶çš„è·¯å¾„ controls æ˜¾ç¤ºæ§åˆ¶å° autoplay è‡ªåŠ¨æ’­æ”¾ loop å¾ªç¯æ’­æ”¾ â€¦ â€¦ â€¦ â€¦ è¿˜æœ‰ä¸€äº›å±æ€§æ²¡æœ‰ä»‹ç»ï¼Œä»¥ä¸Šæ˜¯è¾ƒä¸ºå¸¸ç”¨çš„ï¼Œå‰©ä½™çš„è¯·å‚è€ƒç½‘ç«™HTML5è§†é¢‘ã€‚è¿™é‡Œç»™å‡ºä¸€ä¸ªå®ä¾‹ &lt;video src=\"resources/video.mp4\" controls autoplay loop&gt;&lt;/video&gt; å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›®å‰åªæ”¯æŒä¸‰ç§æ ¼å¼çš„è§†é¢‘ Ogg MPEG 4(mp4) WebM å¹¶ä¸”ä¸åŒçš„æµè§ˆå™¨æ”¯æŒçš„ç¨‹åº¦ä¹Ÿä¸ä¸€æ ·ï¼Œå…·ä½“çš„å¯ä»¥å‚è€ƒä¸Šé¢çš„é“¾æ¥ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æ€ä¹ˆåŠ? æˆ‘ä»¬ä¸èƒ½è¿™ä¹ˆå†™ &lt;video src=\"test.mp4\"&gt;&lt;/video&gt;&lt;video src=\"test.ogg\"&gt;&lt;/video&gt;&lt;video src=\"test.WebM\"&gt;&lt;/video&gt; è™½ç„¶æˆ‘ä»¬çš„æœ¬æ„æ˜¯ï¼šå¦‚æœæ”¯æŒ.mp4ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨.mp4ï¼Œå¦åˆ™å¦‚æœæ”¯æŒ.oggï¼Œåˆ™ç”¨.oggï¼Œä»¥æ­¤ç±»æ¨ã€‚ä½†æ˜¯ä¸Šé¢çš„æ•ˆæœæ˜¯å‡ºç°3ä¸ªvideoï¼Œè€Œä¸æ˜¯ä¸€ä¸ªï¼Œè¿™ä¸ªæ—¶å€™çš„è§£å†³åŠæ³•æ˜¯ä½¿ç”¨sourceæ ‡ç­¾ï¼Œå¦‚ä¸‹ &lt;video&gt; &lt;source src=\"test.mp4\"&gt; &lt;source src=\"test.ogg\"&gt; &lt;source src=\"test.WebM\"&gt;&lt;/video&gt; è¿™ä¸ªæ—¶å€™è¾¾åˆ°çš„æ•ˆæœå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ è¡¨å•HTML5åœ¨è¡¨å•è¿™é‡Œä¹Ÿåšäº†å¾ˆå¤šçš„æ”¹è¿›ï¼Œæ¯”å¦‚æ–°å¢äº†ä¸€äº›å±æ€§ä»¥è¿›è¡Œè¡¨å•éªŒè¯(ä»¥å¾€è¿™äº›å·¥ä½œæˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨JavaScriptè¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼çš„éªŒè¯)ï¼Œä»¥åŠæ–°çš„æ ‡ç­¾å’Œæ–¹æ³•ã€‚ æ™ºèƒ½è¡¨å•æ§ä»¶ emial url number range color date month week time é¦–å…ˆç”¨æ³•å¦‚ä¸‹ &lt;form action=\"test\" method=\"get\"&gt; email: &lt;input type=\"email\"&gt; &lt;br&gt; url: &lt;input type=\"url\"&gt; &lt;br&gt; number: &lt;input type=\"number\"&gt; &lt;br&gt; range: &lt;input type=\"range\"&gt; &lt;br&gt; color: &lt;input type=\"color\"&gt; &lt;br&gt; date: &lt;input type=\"date\"&gt; &lt;br&gt; week: &lt;input type=\"week\"&gt; &lt;br&gt; time: &lt;input type=\"time\"&gt; &lt;br&gt; &lt;button type=\"submit\"&gt;æäº¤&lt;/button&gt;&lt;/form&gt; å½“typeè®¾ç½®ä¸ºemialæ—¶ï¼Œå¦‚æœè¾“å…¥çš„ä¸æ˜¯ç”µå­é‚®ç®±ï¼Œå½“ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼Œä¸èƒ½æäº¤æˆåŠŸï¼Œå¹¶ç»™å‡ºæç¤ºä¿¡æ¯ å½“typeè®¾ç½®ä¸ºurlæ—¶ï¼Œå¦‚æœè¾“å…¥çš„ä¸æ˜¯urlåœ°å€ï¼Œé‚£ä¹ˆå½“ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼Œä¹Ÿä¸èƒ½æäº¤æˆåŠŸï¼Œå¹¶ç»™å‡ºæç¤ºä¿¡æ¯ æ­£ç¡®çš„urlåœ°å€åº”è¯¥ä»¥httpæˆ–è€…httpså¼€å¤´ï¼Œå¦‚http://www.baidu.comã€‚ å½“typeè®¾ç½®ä¸ºnumberæ—¶ï¼Œè¿™æ—¶åœ¨æ§ä»¶é‡Œé¢åªèƒ½è¾“å…¥æ•°å­—ï¼Œå½“ä½ æŒ‰å…¶ä»–é”®æ—¶æ²¡æœ‰ååº”ï¼Œå¯ä»¥è‡ªè¡Œå®éªŒçœ‹çœ‹æ•ˆæœã€‚ å½“typeè®¾ç½®ä¸ºcoloræ—¶ï¼Œç‚¹å‡»coloråçš„é¢œè‰²ï¼Œä¼šå‡ºç°æ‹¾è‰²å™¨ï¼Œå¯ä»¥é€‰æ‹©é¢œè‰²ï¼Œå¦‚ä¸‹ è®¾ç½®typeè®¾ç½®ä¸ºdate, week, timeæ—¶ï¼Œæ˜¾ç¤ºçš„æ˜¯å„ç§æ ¼å¼çš„æ—¶é—´ï¼Œè¿™é‡Œä¸å¤šåŠ è§£é‡Šæƒ³å¿…å¯ä»¥æ˜ç™½ã€‚ è¡¨å•å±æ€§formè¡¨å•çš„å±æ€§ autocomplete ç›´è¯‘è¿‡æ¥å°±æ˜¯è‡ªåŠ¨å®Œæˆï¼Œå½“æˆ‘ä»¬æäº¤è¡¨å•åï¼Œè¡¨å•ä¼šè®°å½•æˆ‘ä»¬æäº¤çš„å†…å®¹ï¼Œå½“æˆ‘ä»¬å†æ¬¡å¡«å†™æ—¶ï¼Œå®ƒä¼šç»™å‡ºæˆ‘ä»¬å·²ç»æäº¤è¿‡çš„å†…å®¹ä½œä¸ºæç¤ºä¿¡æ¯ã€‚æœ‰æ—¶è¿™ç§æƒ…å†µä¸‹å¯èƒ½ä¼šé€ æˆä¿¡æ¯çš„æ³„æ¼ï¼Œä¸å®‰å…¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†autocompleteè®¾ç½®ä¸ºoffï¼Œè¿™æ—¶å°±ä¸ä¼šå‡ºç°ä¸Šé¢çš„æƒ…å†µã€‚é»˜è®¤æƒ…å†µä¸‹autocompleteä¸ºon &lt;form action=\"test\" method=\"get\" autocomplete=\"off\"&gt; ... ...&lt;/form&gt; novadilate ä¸Šé¢æˆ‘ä»¬æåˆ°ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨æ™ºèƒ½è¡¨å•æ§ä»¶æ—¶ï¼Œå¦‚æœä¸èƒ½æ»¡è¶³æ ¼å¼çš„è¦æ±‚ï¼Œå¦‚emailï¼Œåˆ™ä¸èƒ½æäº¤æˆåŠŸï¼Œå½“è¡¨å•æ·»åŠ novadilateå±æ€§æ—¶ï¼Œé‚£ä¹ˆè¿™æ—¶å³ä½¿æ‰€å¡«å†™çš„æ ¼å¼ä¸æ»¡è¶³è¦æ±‚ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥æäº¤æˆåŠŸã€‚ &lt;form action=\"test\" method=\"get\" autocomplete=\"off\" novalidate&gt; ... ...&lt;/form&gt; inputçš„å±æ€§ autofocus è‡ªåŠ¨è·å¾—ç„¦ç‚¹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæ·˜å®çš„æ¡ˆä¾‹ å½“æˆ‘ä»¬è¿›å…¥æ·˜å®ï¼Œæœç´¢æ¡†ä¼šè‡ªåŠ¨çš„è·å¾—ç„¦ç‚¹ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥è¾“å…¥ï¼Œä¸éœ€è¦ç”¨é¼ æ ‡å…ˆç‚¹å‡»æœç´¢æ¡†è·å¾—ç„¦ç‚¹æ‰èƒ½è¾“å…¥ã€‚inputæ·»åŠ autofocusçš„å±æ€§å³å¯æœ‰è¿™ç§æ•ˆæœã€‚ form å…ˆæ¥çœ‹è¿™ä¹ˆä¸€ä¸ªç»“æ„ &lt;form action=\"test\" method=\"get\"&gt; &lt;input type=\"text\" name=\"one\"&gt; &lt;button type=\"submit\"&gt;æäº¤&lt;/button&gt;&lt;/form&gt;&lt;input type=\"text\" name=\"two\"&gt; æˆ‘ä»¬å¯ä»¥çŸ¥é“å½“æäº¤formè¡¨å•æ—¶ï¼Œåªä¼šæäº¤è¡¨å•åŸŸé‡Œé¢çš„è¡¨å•ï¼Œè¡¨å•åŸŸå¤–çš„è¡¨å•ä¸ä¼šæäº¤ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æäº¤æ—¶ï¼Œåªä¼šæœ‰oneçš„æ•°æ®æ‰ä¼šæäº¤ ä½†æ˜¯å¦‚æœå¸Œæœ›å½“æäº¤æ—¶ï¼Œtwoçš„æ•°æ®ä¹Ÿèƒ½è¿›è¡Œæäº¤(åˆ«å¥‡æ€ªï¼ŒçœŸçš„æœ‰è¿™ç§éœ€æ±‚)ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°formå±æ€§äº† &lt;form id=\"data\" action=\"test\" method=\"get\"&gt; &lt;input type=\"text\" name=\"one\"&gt; &lt;button type=\"submit\"&gt;æäº¤&lt;/button&gt;&lt;/form&gt;&lt;input type=\"text\" name=\"two\" form=\"data\"&gt; formå±æ€§çš„å€¼ä¸ºformè¡¨å•çš„idå€¼ã€‚è¿™æ—¶å†æ¬¡è¿›è¡Œæäº¤ è¿™æ—¶twoçš„æ•°æ®ä¹Ÿå¾—åˆ°äº†æäº¤ã€‚ list listå±æ€§è¦é…åˆHTML5æ–°æ·»åŠ çš„è¡¨å•æ ‡ç­¾&lt;datalist&gt;ä½¿ç”¨ï¼Œå¦‚ä¸‹ &lt;input type=\"text\" list=\"list\"&gt;&lt;datalist id=\"list\"&gt; &lt;option value=\"One\"&gt;&lt;/option&gt; &lt;option value=\"Two\"&gt;&lt;/option&gt; &lt;option value=\"Three\"&gt;&lt;/option&gt;&lt;/datalist&gt; listå±æ€§çš„å€¼ä¸ºdatalistæ ‡ç­¾çš„idå€¼ã€‚å½“æˆ‘ä»¬åœ¨textä¸­è¾“å…¥æ—¶ï¼Œä¼šæœ‰datalistä¸­optionå€¼çš„æç¤º multiple multipleå¯ä»¥å®ç°å¤šé€‰çš„æ•ˆæœï¼Œæ¯”å¦‚é€‰æ‹©å¤šä¸ªæ–‡ä»¶ï¼Œå‡è®¾æœ‰ä¸‹é¢çš„inputæ ‡ç­¾ &lt;input type=\"file\"&gt; è¿™æ—¶åªèƒ½é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ºäº†é€‰æ‹©å¤šä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸ºinputæ ‡ç­¾æ·»åŠ multipleå±æ€§ &lt;input type=\"file\" multiple&gt; è¿™æ—¶å°±å¯ä»¥é€‰æ‹©å¤šä¸ªæ–‡ä»¶äº†ã€‚ placeholder ä½¿ç”¨placeholderä½œä¸ºæç¤ºä¿¡æ¯ï¼Œå‡è®¾æœ‰å¦‚ä¸‹æ ‡ç­¾ &lt;input type=\"text\" placeholder=\"è¯·è¾“å…¥ä¿¡æ¯\"&gt; å½“æˆ‘ä»¬è¾“å…¥æ–‡å­—æ—¶ï¼Œæç¤ºä¿¡æ¯ä¼šæ¶ˆå¤±ï¼Œå½“æˆ‘ä»¬å°†æ–‡å­—æ¶ˆå¤±æ—¶ï¼Œæ–‡å­—åˆä¼šå‡ºç°ã€‚ required å½“inputä½¿ç”¨è¯¥å±æ€§æ—¶ï¼Œè¡¨ç¤ºè¯¥inputæ§ä»¶æ˜¯å¿…å¡«é¡¹ï¼Œå¦åˆ™æ— æ³•æäº¤ï¼Œå…·ä½“å¯ä»¥è‡ªå·±è¯•éªŒä¸€ä¸‹ï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ã€‚ HTML5 APIè·å–DOMå…ƒç´ å‡è®¾æœ‰å¦‚ä¸‹çš„htmlç»“æ„ &lt;ul&gt; &lt;li&gt; &lt;span&gt;span1&lt;/span&gt; &lt;/li&gt; &lt;li&gt; &lt;a href=\"#\"&gt;&lt;span&gt;span2&lt;/span&gt;&lt;/a&gt; &lt;/li&gt;&lt;/ul&gt; å¦‚æœæˆ‘ä»¬è¦æ”¹å˜spançš„æ ·å¼(é€šè¿‡JS)ï¼Œæˆ‘ä»¬æˆ‘ä»¬ä¸€èˆ¬è¦ä¸ºspanæ ‡ç­¾æ·»åŠ idå±æ€§æˆ–è€…classå±æ€§ï¼Œè¿™æ ·æ‰èƒ½è·å–è¦å¯¹åº”çš„DOMå…ƒç´ ï¼ŒHTML5æ–°å¢äº†ä¸¤ä¸ªæ–¹æ³• querySelector()ï¼šåªèƒ½é€‰æ‹©ä¸€ä¸ªå…ƒç´  querySelectorAll()ï¼šå¯ä»¥é€‰æ‹©æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´  å¯ä»¥å‘å…¶ä¸­ä¼ å…¥é€‰æ‹©å™¨(ä»»ä½•CSSæ”¯æŒçš„é€‰æ‹©å™¨)ï¼Œä»è€Œæ¥é€‰æ‹©DOMå…ƒç´ ï¼Œå¦‚ //ä½¿ç”¨å­ä»£é€‰æ‹©å™¨é€‰æ‹©spanå…ƒç´ document.querySelector(\"li&gt;span\").style.color = \"red\"; ç±»åæ“ä½œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸ºæŸä¸ªæ ‡ç­¾æ·»åŠ æˆ–è€…ç§»é™¤ç±»æ ·å¼ï¼ŒHTML5ä¸ºæˆ‘ä»¬æä¾›äº†APIæ¥å£ classList.add()ï¼šä¸ºDOMå…ƒç´ æ·»åŠ æŒ‡å®šçš„ç±»æ ·å¼ classList.remove()ï¼šä¸ºDOMå…ƒç´ ç§»é™¤æŒ‡å®šçš„ç±»æ ·å¼ classList.toggle()ï¼šåˆ‡æ¢ï¼Œæ„æ€å³å¦‚æœDOMå…ƒç´ æœ‰è¿™ä¸ªç±»æ ·å¼ï¼Œåˆ™ç§»é™¤è¿™ä¸ªç±»æ ·å¼ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªç±»æ ·å¼ï¼Œè¿™æ·»åŠ è¿™ä¸ªç±»æ ·å¼ classList.contains()ï¼šåˆ¤æ–­è¯¥DOMå…ƒç´ æ˜¯å¦åŒ…å«è¿™ä¸ªç±»æ ·å¼ï¼ŒåŒ…å«åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; .active &#123; width: 100%; height: 100px; background-color: darkred; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt;&lt;/div&gt; &lt;button class=\"add\"&gt;æ·»åŠ ç±»å&lt;/button&gt; &lt;button class=\"remove\"&gt;ç§»é™¤ç±»å&lt;/button&gt; &lt;button class=\"toggle\"&gt;åˆ‡æ¢ç±»å&lt;/button&gt; &lt;button class=\"contains\"&gt;æ˜¯å¦åŒ…å«ç±»å&lt;/button&gt; &lt;script&gt; document.querySelector(\".add\").onclick = function () &#123; document.querySelector(\"div\").classList.add(\"active\"); &#125; document.querySelector(\".remove\").onclick = function () &#123; document.querySelector(\"div\").classList.remove(\"active\"); &#125; document.querySelector(\".toggle\").onclick = function () &#123; document.querySelector(\"div\").classList.toggle(\"active\"); &#125; document.querySelector(\".contains\").onclick = function () &#123; console.log(document.querySelector(\"div\").classList.contains(\"active\")); &#125; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; è‡ªå®šä¹‰å±æ€§HTML5è§„å®šè‡ªå®šä¹‰å±æ€§éœ€è¦ä»¥data-å¼€å¤´ï¼Œå¦‚ &lt;div data-test=\"one\"&gt;&lt;/div&gt; ä¸Šé¢è‡ªå®šä¹‰äº†ä¸€ä¸ªå«testçš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡DOMå…ƒç´ çš„datasetæ¥è®¿é—®æˆ–è€…ä¿®æ”¹è‡ªå®šä¹‰å±æ€§çš„å€¼ï¼Œæœ‰ä¸¤ç§æ–¹å¼ dataset.å±æ€§å dataset[â€œå±æ€§åâ€] &lt;div data-test=\"one\"&gt;&lt;/div&gt;&lt;script&gt; console.log(document.querySelector(\"div\").dataset.test); document.querySelector(\"div\").dataset[\"test\"] = \"two\";&lt;/script&gt; å¦‚æœå±æ€§åä¹‹é—´ä½¿ç”¨-ä¹‹é—´è¿æ¥ï¼Œå¦‚ä¸‹ &lt;div data-test-name=\"one\"&gt;&lt;/div&gt; é‚£ä¹ˆä½¿ç”¨datasetè®¿é—®æˆ–ä¿®æ”¹æ—¶è¦ä½¿ç”¨é©¼å³°å‘½åæ³•è·å–ï¼Œå¦‚ä¸‹ console.log(document.querySelector(\"div\").dataset.testName);document.querySelector(\"div\").dataset[\"testName\"] = \"two\"; æ–‡ä»¶è¯»å–FileReaderæ˜¯ç”¨æ¥è¯»å–ä¸Šä¼ çš„æ–‡ä»¶çš„ï¼Œå®ƒæœ‰3ä¸ªè¯»å–çš„æ–¹æ³• readAsText()ï¼šè¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œè¿”å›æ–‡æœ¬å­—ç¬¦ä¸²(utf-8) readAsBinaryString()ï¼šè¯»å–ä»»æ„æ–‡ä»¶ï¼Œè¿”å›äºŒè¿›åˆ¶æ–‡ä»¶ readAsDataURL()ï¼šè¯»å–ä»»æ„æ–‡ä»¶ï¼Œå¾—åˆ°åŒ…å«ä¸€ä¸ªdata:URLæ ¼å¼çš„å­—ç¬¦ä¸²(base64ç¼–ç )ï¼Œä»¥è¡¨ç¤ºæ‰€è¯»å–æ–‡ä»¶çš„å†…å®¹ ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•è¯»å–çš„å†…å®¹éƒ½ä¼šæ”¾åœ¨FileReaderå¯¹è±¡çš„resultå±æ€§ä¸­ã€‚ ç°åœ¨æ¼”ç¤ºä¸€ä¸ªæ¡ˆä¾‹ï¼Œé€‰æ‹©ä¸Šä¼ çš„å›¾ç‰‡ï¼Œåœ¨ä¸Šä¼ ä¹‹åå¸Œæœ›æœ‰é¢„è§ˆçš„æ•ˆæœ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;input type=\"file\"&gt;&lt;br&gt; &lt;br&gt; &lt;img src=\"\" width=\"800\"&gt;&lt;/img&gt; &lt;script&gt; //è·å¾—input DOMå…ƒç´  let input = document.querySelector(\"input\"); //è·å¾—img DOMå…ƒç´  let image = document.querySelector(\"img\"); //å½“inputå‘ç”Ÿæ”¹å˜æ—¶å³æœ‰æ–‡ä»¶ä¸Šä¼ æ—¶è§¦å‘è¯¥äº‹ä»¶ input.onchange = function () &#123; //è·å¾—ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡ let file = input.files[0]; //è·å¾—FileReaderå¯¹è±¡ let reader = new FileReader(); //ä½¿ç”¨FileReaderè¯»å–è¯¥å›¾ç‰‡ï¼Œå¾—åˆ°ä¸€ä¸ªbase64æ ¼å¼çš„ç¼–ç  reader.readAsDataURL(file); //readerè¯»å–å®Œæ¯•åè§¦å‘è¯¥äº‹ä»¶ reader.onload = function() &#123; //å°†è¯»å–åˆ°çš„base64ç¼–ç æ ¼å¼çš„URLèµ‹å€¼ç»™imgæ ‡ç­¾çš„srcå±æ€§ image.src = reader.result; &#125; &#125; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†FileReaderå¯¹è±¡çš„onloadäº‹ä»¶ï¼Œè¿™é‡Œåˆ—å‡ºFileReaderæä¾›çš„äº‹ä»¶ onabortï¼šä¸­æ–­æ—¶è§¦å‘ onerrorï¼šå‡ºé”™æ—¶è§¦å‘ onloadï¼šæ–‡ä»¶è¯»å–æˆåŠŸå®Œæˆæ—¶è§¦å‘ onloadendï¼šè¯»å–å®Œæˆè§¦å‘ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥ onloadstartï¼šè¯»å–å¼€å§‹æ—¶è§¦å‘ onprogressï¼šåœ¨è¯»å–è¿‡ç¨‹ä¸­æŒç»­è§¦å‘ è·å–ç½‘ç»œçŠ¶æ€HTML5æä¾›äº†æœ‰å…³ç½‘ç»œçŠ¶æ€çš„APIï¼Œä½¿ç”¨window.navigator.onLineå¯ä»¥è·å–å½“å‰çš„ç½‘ç»œçŠ¶æ€ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ä¸¤ä¸ªç½‘ç»œäº‹ä»¶ ononline()ï¼šè¿ä¸Šç½‘ç»œçš„æ—¶å€™è§¦å‘ onoffline()ï¼šæ–­å¼€ç½‘ç»œçš„æ—¶å€™è§¦å‘ window.ononline = function () &#123; console.log(\"online\");&#125;window.onoffline = function () &#123; console.log(\"offline\");&#125; æœ¬åœ°å­˜å‚¨éšç€äº’è”ç½‘çš„å¿«é€Ÿå‘å±•ï¼ŒåŸºäºç½‘é¡µçš„åº”ç”¨è¶Šæ¥è¶Šæ™®éï¼ŒåŒæ—¶ä¹Ÿå˜çš„è¶Šæ¥è¶Šå¤æ‚ï¼Œä¸ºäº†æ»¡è¶³å„ç§å„æ ·çš„éœ€æ±‚ï¼Œä¼šç»å¸¸æ€§åœ¨æœ¬åœ°å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œä¼ ç»Ÿæ–¹å¼æˆ‘ä»¬ä»¥document.cookieæ¥è¿›è¡Œå­˜å‚¨çš„ï¼Œä½†æ˜¯ç”±äºå…¶å­˜å‚¨å¤§å°åªæœ‰4kå·¦å³ï¼Œå¹¶ä¸”è§£æä¹Ÿç›¸å½“çš„å¤æ‚ï¼Œç»™å¼€å‘å¸¦æ¥è¯¸å¤šä¸ä¾¿ï¼ŒHTML5è§„èŒƒåˆ™æå‡ºè§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨sessionStorageå’ŒlocalStorageå­˜å‚¨æ•°æ®ã€‚ sessionStorageçš„å¤§å°å¤§çº¦ä¸º5Må·¦å³ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ºå½“å‰é¡µé¢ï¼Œå³å½“å…³é—­å½“å‰é¡µé¢æ—¶ï¼Œå­˜å‚¨åœ¨æœ¬åœ°çš„æ•°æ®ä¼šè¢«æ¸…é™¤ã€‚å¹¶ä¸”ä¸åŒé¡µé¢ä¹‹é—´çš„sessionStorageæ˜¯ç‹¬ç«‹çš„ï¼Œä¸èƒ½äº’ç›¸è®¿é—®ã€‚sessionStorageçš„æ–¹æ³•æœ‰ setItem(key, value)ï¼šå­˜å‚¨é”®å€¼å¯¹ getItem(key)ï¼šæ ¹æ®keyè·å–å¯¹åº”çš„value removeItem(key)ï¼šåˆ é™¤keyæ‰€å¯¹åº”çš„é”®å€¼å¯¹ clear()ï¼šæ¸…é™¤sessionStorageæœ¬åœ°ç¼“å­˜ localStorageçš„å¤§å°ä¸º20Må·¦å³ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ºå½“å‰æµè§ˆå™¨ã€‚å…³é—­æµè§ˆå™¨ä¸ä¼šæ¸…é™¤æ•°æ®ï¼Œæ•°æ®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼Œåªèƒ½æ‰‹åŠ¨æ¸…é™¤ã€‚localStorageçš„æ–¹æ³•åŒsessionStorageã€‚","tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"},{"name":"HTML5","slug":"HTML5","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/HTML5/"}]},{"title":"å²çº²","date":"2019-10-21T16:00:00.000Z","path":"/å²çº²/","text":"åä¾µç•¥æ–—äº‰é¸¦ç‰‡æˆ˜äº‰ ä¸­è‹±â€“å—äº¬æ¡çº¦ ä¸­è‹±â€“è™é—¨æ¡çº¦ ä¸­ç¾â€“æœ›å¦æ¡çº¦ ä¸­æ³•â€“é»„åŸ”æ¡çº¦ ä¸§å¤±äº†å¾ˆå¤šçš„ä¸»æƒ(é¢†åœŸï¼Œé¢†æµ·ï¼Œå¸æ³•ï¼Œå…³ç¨)ï¼Œç¤¾ä¼šæ€§è´¨å‘ç”Ÿå˜åŒ–ï¼Œé€æ­¥æˆä¸ºåŠæ®–æ°‘åŠå°å»ºç¤¾ä¼šã€‚(è¾›ä¸‘æ¡çº¦ï¼Œæ­£å¼æ²¦ä¸ºä¸¤åŠç¤¾ä¼š) ä¸¤åŠç¤¾ä¼š åŸå›  å·²ç»ä¸§å¤±äº†ç‹¬ç«‹çš„åœ°ä½(æ®–æ°‘åœ°)ï¼Œä»ç„¶ç»´æŒç€ç‹¬ç«‹å›½å®¶å’Œæ”¿åºœçš„åä¹‰(åŠ) ä¸­å›½å·å…¥ä¸–ç•Œèµ„æœ¬ä¸»ä¹‰ç»æµä½“ç³»ï¼Œè¥¿æ–¹åˆ—å¼ºä¸æ„¿ä¸­å›½æˆä¸ºç‹¬ç«‹çš„èµ„æœ¬ä¸»ä¹‰å›½å®¶(åŠå°å»º) ç‰¹å¾ å¸å›½ä¸»ä¹‰æˆä¸ºå†³å®šæ€§åŠ›é‡ ä¸­å›½å°å»ºåŠ¿åŠ›æˆä¸ºç»Ÿæ²»å·¥å…· å°å»ºåœŸåœ°æ‰€æœ‰åˆ¶è¿˜ä¿ç•™ç€ æ°‘æ—èµ„æœ¬ä¸»ä¹‰å‘å±•ç¼“æ…¢ï¼ŒåŠ›é‡è½¯å¼± æ”¿æ²»ã€ç»æµå’Œæ–‡åŒ–å‘å±•æä¸å¹³è¡¡(é«˜åº¦æ¦‚æ‹¬ï¼Œå•é€‰å°±é€‰è¿™ä¸ª) å¹¿å¤§äººæ°‘æ°´æ·±ç«çƒ­ é˜¶çº§å…³ç³»å˜åŒ– åœ°ä¸» å†œæ°‘ å·¥äººé˜¶çº§(æ–°å…´é˜¶çº§)ï¼šæœ€æ—©å‡ºç°çš„æ–°é˜¶çº§ èµ„äº§é˜¶çº§ å®˜åƒšä¹°åŠï¼šè·Ÿå°å»ºåŠ¿åŠ›å‹¾ç»“(å®˜åƒš)ï¼Œè·Ÿå¸å›½ä¸»ä¹‰å‹¾ç»“(ä¹°åŠ) æ°‘æ—èµ„æœ¬ï¼šæœ¬åœŸæˆé•¿èµ·æ¥çš„ (å°èµ„äº§é˜¶çº§)ï¼šä¸æ˜¯èµ„äº§é˜¶çº§ï¼Œæ˜¯åŠ³åŠ¨äººæ°‘ï¼Œè™½ç„¶å°æœ‰èµ„äº§ï¼Œä½†æ˜¯ä¸å‰¥å‰Šåˆ«äºº ä¸»è¦çŸ›ç›¾ å¸å›½ä¸»ä¹‰å’Œä¸­åæ°‘æ—çš„çŸ›ç›¾(ä¸»è¦ä¸­çš„ä¸»è¦) å°å»ºä¸»ä¹‰å’Œäººæ°‘å¤§ä¼—çš„çŸ›ç›¾ è¿‘ä»£ä»¥æ¥å†å²ä»»åŠ¡ äº‰å–æ°‘æ—ç‹¬ç«‹ã€äººæ°‘è§£æ”¾(åå¸åå°å»º) å®ç°å›½å®¶å¯Œå¼ºã€äººæ°‘å¯Œè£• æ—¶é—´ å›½æƒ… çŸ›ç›¾ ä»»åŠ¡ é“è·¯ 1840-1949 åŠæ®–æ°‘åœ°åŠå°å»º å¸å›½ä¸»ä¹‰å’Œä¸­åæ°‘æ—çš„çŸ›ç›¾ï¼Œå°å»ºä¸»ä¹‰å’Œäººæ°‘å¤§ä¼—çš„çŸ›ç›¾ åå¸åå°å»º å†œæ‘åŒ…å›´åŸå¸‚ï¼Œæ­¦è£…å¤ºå–æ”¿æƒ ç°ä»£ ç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µ æ—¥ç›Šå¢é•¿çš„ç”Ÿæ´»éœ€è¦ä¸å‘å±•ä¸å¹³è¡¡ä¸å……åˆ†çš„çŸ›ç›¾ è§£æ”¾å‘å±•åŠ› ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰é“è·¯ æ–—äº‰å†ç¨‹ äººæ°‘ç¾¤ä¼— ä¸‰å…ƒé‡Œäººæ°‘çš„æŠ—è‹±æ–—äº‰ï¼Œç¬¬ä¸€æ¬¡ä¸­å›½äººæ°‘ç¬¬ä¸€æ¬¡å¤§è§„æ¨¡åä¾µç•¥ çˆ±å›½å®˜å…µ é¸¦ç‰‡æˆ˜äº‰æ—¶æœŸï¼šå…³å¤©åŸ¹ï¼Œé™ˆåŒ–æˆï¼Œæµ·å²­ ä¸­æ—¥ç”²åˆï¼šé‚“ä¸–æ˜Œ ç²‰ç¢ç“œåˆ†ä¸­å›½çš„é˜´è°‹ä¸­æ—¥ç”²åˆæˆ˜äº‰çˆ†å‘åè¾¾åˆ°ç“œåˆ†é«˜æ½®ï¼Œé©¬å…³æ¡çº¦ å°æ¹¾ã€æ¾æ¹–åˆ—å²›å‰²ç»™æ—¥æœ¬ ä¿„ã€å¾·ã€æ³•å¹²æ¶‰è¿˜è¾½ ç ´äº§çš„åŸå›  åˆ—å¼ºä¹‹é—´çš„çŸ›ç›¾ï¼Œç›¸äº’åˆ¶çº¦(é‡è¦åŸå› ) ä¸­åæ°‘æ—è¿›è¡Œä¸å±ˆä¸æŒ çš„åä¾µç•¥æ–—äº‰(æ ¹æœ¬åŸå› ) ä¹‰å’Œå›¢çš„å±€é™æ€§ ç¬¼ç»Ÿçš„æ’å¤–(åªè¦è·Ÿå¤–å›½äººæœ‰å…³çš„å°±æ€) å—åˆ°å°å»ºç»Ÿæ²»è€…çš„æ¬ºéª— å­˜åœ¨è¿·ä¿¡ã€è½åçš„å€¾å‘ ä¹‰å’Œå›¢çš„ä½œç”¨ åœ¨ç²‰ç¢åˆ—å¼ºç“œåˆ†ä¸­å›½çš„æ–—äº‰ä¸­ï¼Œå‘æŒ¥äº†é‡å¤§çš„å†å²ä½œç”¨ åä¾µç•¥å¤±è´¥åŸå›  åˆ¶åº¦è…è´¥(æ ¹æœ¬åŸå› ) ç»æµæŠ€æœ¯è½å(é‡è¦åŸå› ) æ°‘æ—æ„è¯†çš„è§‰é†’ é¸¦ç‰‡æˆ˜äº‰ï¼šå…ˆè¿›çš„ä¸­å›½äººççœ¼çœ‹ä¸–ç•Œ ä¸­æ—¥ç”²åˆæˆ˜äº‰ï¼šæ°‘æ—æ„è¯†æ™®éè§‰é†’ æ—åˆ™å¾ï¼šè¿‘ä»£ä¸­å›½ççœ¼çœ‹ä¸–ç•Œçš„ç¬¬ä¸€äºº é­æºï¼šã€Šæµ·å›½å›¾å¿—ã€‹â€”â€” å¸ˆå¤·é•¿æŠ€ä»¥åˆ¶å¤· ä¸¥å¤ï¼šã€Šæ•‘äº¡å†³è®ºã€‹ï¼Œç¿»è¯‘äº†ã€Šå¤©æ¼”è®ºã€‹(ç‰©ç«å¤©æ‹©) å­™ä¸­å±±ï¼šæŒ¯å…´ä¸­å å„é˜¶å±‚çš„æ¢ç´¢ å†œæ°‘é˜¶çº§ å°å»ºé˜¶çº§ èµ„äº§é˜¶çº§ ç»´æ–°æ´¾ é©å‘½æ´¾ æ— äº§é˜¶çº§ å¤ªå¹³å¤©å›½åŸå›  èµ‹ç¨å¢åŠ ï¼Œå†œæ°‘è´Ÿæ‹…åŠ é‡ è‡ªç„¶ç»æµè§£ä½“(ç¤¾ä¼šä¸ç¨³å®š) è¯„ä»·ï¼šåå¯¹æ¸…æ”¿åºœè…æœ½ç»Ÿæ²»å’Œåœ°ä¸»é˜¶çº§å‹è¿«ã€å‰¥å‰Šçš„æ­£ä¹‰æˆ˜äº‰ ç»“å±€ï¼šå¤©äº¬äº‹å˜ï¼Œå¤©å¹³å¤©å›½ç”±ç››è½¬è¡° ã€Šå¤©æœç”°äº©åˆ¶åº¦ã€‹å†…å®¹ ä½“ç°å¤ªå¹³å¤©å›½çš„çº²é¢†æ€§æ–‡ä»¶ ç¡®ç«‹äº†å¹³å‡åˆ†é…åœŸåœ°çš„æ–¹æ¡ˆï¼Œè€•è€…æœ‰å…¶ç”° å®é™…ä¸Šæ˜¯èµ·ä¹‰å†œæ°‘æå‡ºçš„ä¸€ä¸ªä»¥è§£å†³åœŸåœ°é—®é¢˜ä¸ºä¸­å¿ƒæ¯”è¾ƒå®Œæ•´çš„ç¤¾ä¼šæ”¹é©æ–¹æ¡ˆ è¯„ä»· è¿›æ­¥æ€§ï¼šä¸»å¼ ä¸Šå¦å®šäº†å°å»ºç¤¾ä¼šçš„åŸºç¡€å³å°å»ºåœ°ä¸»çš„åœŸåœ°æ‰€æœ‰åˆ¶(å®é™…ä¸Šæ²¡æœ‰å¦å®š) å±€é™æ€§ï¼š æ²¡æœ‰è¶…å‡ºå†œæ°‘å°ç”Ÿäº§è€…çš„ç‹­éš˜æ€æƒ³ å…·æœ‰ä¸åˆ‡å®é™…çš„ç©ºæƒ³æ€§è´¨ æœªä»˜è¯¸å®æ–½ ã€Šèµ„æ”¿æ–°ç¯‡ã€‹å†…å®¹ å¼€å§‹æå€¡èµ„æœ¬ä¸»ä¹‰çš„é›‡ä½£åŠ³åŠ¨åˆ¶ è¯„ä»· è¿›æ­¥æ€§ï¼šå…·æœ‰èµ„æœ¬ä¸»ä¹‰è‰²å½© å±€é™æ€§ï¼šæœªèƒ½ä»˜è¯¸å®æ–½ å¤©å¹³å¤©å›½è¿åŠ¨çš„æ„ä¹‰åŠå±€é™æ„ä¹‰ æ²‰é‡æ‰“å‡»äº†å°å»ºç»Ÿæ²» ä¸­å›½æ—§å¼å†œæ°‘æˆ˜äº‰çš„æœ€é«˜å³° å†²å‡»äº†å­”å­å’Œå„’å®¶ç»å…¸çš„æ­£ç»Ÿæƒå¨ æœ‰åŠ›æ‰“å‡»äº†å¤–å›½ä¾µç•¥åŠ¿åŠ› 19ä¸–çºªä¸­å¶äºšæ´²æ°‘æ—è§£æ”¾è¿åŠ¨ä¸­ï¼Œæ—¶é—´æœ€ä¹…ã€è§„æ¨¡æœ€å¤§ã€å½±å“æœ€æ·±çš„æˆ˜äº‰ å¤±è´¥çš„åŸå› (é‡è¦) é˜¶çº§å±€é™æ€§(æ ¹æœ¬åŸå› ) æ— æ³•ä»æ ¹æœ¬ä¸Šæå‡ºå®Œæ•´çš„ã€æ­£ç¡®çš„æ”¿æ²»çº²é¢†å’Œç¤¾ä¼šæ”¹é©æ–¹æ¡ˆ æ— æ³•åˆ¶æ­¢é¢†å¯¼é›†å›¢è…è´¥ç°è±¡çš„æ»‹é•¿ æ— æ³•é•¿æœŸä¿æŒé¢†å¯¼é›†å›¢çš„å›¢ç»“ æ²¡æœ‰ç§‘å­¦ç†è®ºçš„æŒ‡å¯¼ æœªèƒ½æ­£ç¡®åœ°å¯¹å¾…å„’å­¦ å¯¹è¥¿æ–¹èµ„æœ¬ä¸»ä¹‰ä¾µç•¥è€…è¿˜ç¼ºä¹ç†æ€§çš„è®¤è¯† æ•™è®­ï¼šå†œæ°‘ä¸èƒ½ä¸ºä¸­å›½æ‰¾åˆ°å‡ºè·¯ã€‚ æ´‹åŠ¡è¿åŠ¨(å°å»ºåœ°ä¸»é˜¶çº§)åŸå›  é¦–å…ˆæ˜¯ä¸ºäº†è´­ä¹°æ´‹æªæ´‹ç‚®é•‡å‹å†œæ°‘èµ·ä¹‰ åŒæ—¶ä¹ŸåŠ å¼ºæµ·é˜²ã€è¾¹é˜² æŒ‡å¯¼æ€æƒ³(çº²é¢†)ï¼šä¸­ä½“è¥¿ç”¨ ä¸­å›½çš„åˆ¶åº¦ï¼Œè¥¿æ–¹çš„æŠ€æœ¯ æ´‹åŠ¡äº‹ä¸š å…´åŠè¿‘ä»£ä¼ä¸š å†›ç”¨ä¼ä¸š æ°‘ç”¨ä¼ä¸š(å®˜ç£å•†åŠ) å»ºç«‹æ–°å¼æµ·é™†å†›ï¼šåŒ—æ´‹æ°´å¸ˆ åˆ›åŠæ–°å¼å­¦å ‚ï¼Œæ´¾é£ç•™å­¦ç”Ÿ(æ¨èå¤®è§†çºªå½•ç‰‡ã€Šå¹¼ç«¥ã€‹) ç¿»è¯‘å­¦å ‚ å·¥è‰ºå­¦å ‚ å†›äº‹å­¦å ‚ å†å²ä½œç”¨ å¯¹ä¸­å›½æ—©æœŸå·¥ä¸šå‘å±•æœ‰ä¿ƒè¿›ä½œç”¨ ç»™ä¸­å›½å¸¦æ¥äº†æ–°çŸ¥è¯†ï¼Œæ‰“å¼€äº†çœ¼ç•Œ å·¥å•†ä¸šè€…çš„åœ°ä½ä¸Šå‡(å¤ä»£å•†äººçš„æ”¿æ²»åœ°ä½æä½) å¤±è´¥çš„åŸå› (é‡è¦)ç”²åˆæˆ˜äº‰åŒ—æ´‹æµ·å†›å…¨å†›è¦†æ²¡ï¼Œæ ‡å¿—ç€æ´‹åŠ¡è¿åŠ¨å¤±è´¥ã€‚å¤±è´¥çš„åŸå› æ˜¯ å°å»ºæ€§(æ ¹æœ¬åŸå› ) å¯¹å¤–å›½å…·æœ‰ä¾èµ–æ€§ æ´‹åŠ¡ä¼ä¸šçš„ç®¡ç†å…·æœ‰è…æœ½æ€§ æ•™è®­ï¼šåœ°ä¸»ä¸èƒ½ä¸ºä¸­å›½æ‰¾åˆ°å‡ºè·¯ æ€»ç»“ï¼šç”²åˆæˆ˜äº‰çš„å¤±è´¥æ ‡å¿—ç€ æ°‘æ—æ„è¯†æ™®éè§‰é†’ åˆ—å¼ºç“œåˆ†ä¸­å›½è¾¾åˆ°é«˜æ½® æ´‹åŠ¡è¿åŠ¨å¤±è´¥ æˆŠæˆŒç»´æ–°åŸå›  ä¸­å›½æ°‘æ—èµ„æœ¬æœ‰äº†åˆæ­¥å‘å±• äººæ°‘å½¢æˆå…±è¯†ï¼šè¦æ•‘å›½ï¼Œåªæœ‰ç»´æ–°ï¼Œè¦ç»´æ–°ï¼Œåªæœ‰å­¦å¤–å›½(ä¸»è¦æ˜¯æ—¥æœ¬) æ´»åŠ¨ å…¬è½¦ä¸Šä¹¦ è‘—ä¹¦ç«‹è¯´ ä»‹ç»å¤–å›½å˜æ³•çš„ç»éªŒæ•™è®­ åŠå­¦ä¼š è®¾å­¦å ‚ åŠæŠ¥çº¸ ç»´æ–°æ´¾ä¸å®ˆæ—§æ´¾(æ´‹åŠ¡æ´¾)çš„è®ºæˆ˜ä¸‰ä¸ªé—®é¢˜ è¦ä¸è¦å˜æ³• è¦ä¸è¦å®è¡Œå›ä¸»ç«‹å®ª è¦ä¸è¦åºŸå…«è‚¡ã€æ”¹ç§‘ä¸¾(æ¸…æœ«æ–°æ”¿åºŸç§‘ä¸¾)å’Œå…´è¥¿å­¦ æ„ä¹‰ èµ„äº§é˜¶çº§æ€æƒ³ä¸å°å»ºä¸»ä¹‰æ€æƒ³çš„æ­£é¢äº¤é”‹ è¿›ä¸€æ­¥å¼€é˜”äº†æ–°å‹çŸ¥è¯†åˆ†å­çš„çœ¼ç•Œ ä½¿è¥¿æ–¹èµ„äº§é˜¶çº§ç¤¾ä¼šæ”¿æ²»å­¦è¯´åœ¨ä¸­å›½å¾—åˆ°è¿›ä¸€æ­¥çš„ä¼ æ’­ ç™¾æ—¥ç»´æ–° æ”¿æ²»æ–¹é¢ï¼šæ”¹é©è¡Œæ”¿æœºæ„ï¼Œè£æ’¤é—²æ•£ã€é‡å æœºæ„ ç»æµæ–¹é¢ï¼šä¿æŠ¤ã€å¥–åŠ±å†œå·¥å•†ä¸š å†›äº‹æ–¹é¢ï¼šè£å‰ªæ—§å¼ç»¿è¥å†›ï¼Œæ”¹ç»ƒæ–°å¼é™†å†› æ–‡åŒ–æ•™è‚²ï¼šäº¬å¸ˆå¤§å­¦å ‚(åæ¥çš„åŒ—å¤§)ï¼ŒåºŸå…«è‚¡ è¿›æ­¥æ€§ï¼šæ˜¯èµ„äº§é˜¶çº§æ€§è´¨çš„æ”¹è‰¯è¿åŠ¨ å±€é™æ€§ï¼šæœªè§¦åŠ¨å°å»ºåˆ¶åº¦çš„æ ¹æœ¬ï¼Œæ˜¯ååˆ†æ¸©å’Œçš„æ”¹è‰¯æ–¹æ¡ˆ(è¦æš´åŠ›é©å‘½) ç»“æœï¼š æˆŠæˆŒå…­å›å­è¢«æ€ é™¤äº¬å¸ˆå¤§å­¦å ‚è¢«ä¿ç•™ï¼Œå…¶ä½™å…¨éƒ¨è¢«åºŸé™¤ æ„ä¹‰å’Œæ•™è®­æ„ä¹‰ çˆ±å›½æ•‘äº¡è¿åŠ¨ èµ„äº§é˜¶çº§æ€§è´¨çš„æ”¿æ²»æ”¹è‰¯è¿åŠ¨ æ€æƒ³å¯è’™è¿åŠ¨ï¼Œäº¬å¸ˆå¤§å­¦å ‚æˆä¸ºä¸­å›½è¿‘ä»£å›½ç«‹é«˜ç­‰æ•™è‚²çš„å‘ç«¯ å¤±è´¥çš„åŸå›  æ°‘æ—èµ„äº§é˜¶çº§åŠ›é‡å¼±å°(å®¢è§‚åŸå› ï¼ŒåŠ›é‡å¼±å°ä¸å±äºé˜¶çº§å±€é™æ€§) å”¯æ–°æ´¾çš„å±€é™æ€§(ä¸»è§‚åŸå› ) ä¸æ•¢å¦å®šå°å»ºä¸»ä¹‰ å¯¹å¸å›½ä¸»ä¹‰æŠ±æœ‰å¹»æƒ³ æƒ§æ€•äººæ°‘ç¾¤ä¼—(æ²¡æœ‰å‘åŠ¨ç¾¤ä¼—ï¼Œæ˜¯ç²¾è‹±è¿åŠ¨) æ•™è®­ï¼šèµ„äº§é˜¶çº§ç»´æ–°æ´¾ä¸èƒ½ä¸ºä¸­å›½æ‰¾åˆ°å‡ºè·¯ã€‚ è¾›äº¥é©å‘½å†å²æ¡ä»¶ æ°‘æ—å±æœºåŠ æ·± è¾›ä¸‘æ¡çº¦ï¼šæ ‡å¿—ç€ä¸­å›½æ­£å¼æ²¦ä¸ºä¸¤åŠç¤¾ä¼š æ¸…æœ«â€œæ–°æ”¿â€ç ´äº§ åºŸé™¤ç§‘ä¸¾ é¢„å¤‡ä»¿è¡Œå®ªæ”¿(å›ä¸»ç«‹å®ª) é¢å¸ƒã€Šé’¦å®šå®ªæ³•å¤§çº²ã€‹(è¿‘ä»£ä¸­å›½çš„ç¬¬ä¸€éƒ¨å®ªæ³•) èµ„äº§é˜¶çº§é©å‘½æ´¾çš„é˜¶çº§åŸºç¡€å’Œéª¨å¹²åŠ›é‡å¼€å§‹æˆç†Ÿ èµ„äº§é˜¶çº§ã€å°èµ„äº§é˜¶çº§çŸ¥è¯†åˆ†å­(ç²¾è‹±è¿åŠ¨ï¼Œæ²¡æœ‰å‘åŠ¨ç¾¤ä¼—) å‡†å¤‡å·¥ä½œ å­™ä¸­å±±ç»„å»ºç¬¬ä¸€ä¸ªé©å‘½å›¢ä½“å…´ä¸­ä¼š â€¦ â€¦ åœ¨æ—¥æœ¬æˆç«‹ä¸­å›½åŒç›Ÿä¼š(ç¬¬ä¸€ä¸ªå…¨å›½æ€§æ”¿å…š) é©å‘½çš„çº²é¢†ï¼šä¸‰æ°‘ä¸»ä¹‰å­¦è¯´åŒç›Ÿä¼šçš„æ”¿æ²»çº²é¢†ï¼šâ€œé©±é™¤é‘è™ï¼Œæ¢å¤ä¸­åï¼Œåˆ›ç«‹æ°‘å›½ï¼Œå¹³å‡åœ°æƒâ€ã€‚å­™ä¸­å±±æ¦‚æ‹¬ä¸ºä¸‰å¤§ä¸»ä¹‰ï¼šæ°‘æ—ä¸»ä¹‰ï¼Œæ°‘æƒä¸»ä¹‰ï¼Œæ°‘ç”Ÿä¸»ä¹‰ æ°‘æ—ä¸»ä¹‰ï¼Œå³æ°‘æ—é©å‘½ æ¨ç¿»æ¸…æœæ”¿åºœ è¿½æ±‚ç‹¬ç«‹ å±€é™æ€§(ä¸åå¸ï¼Œåå°ä¸å½»åº•)ï¼š æ²¡æœ‰æ˜ç¡®çš„åå¸çº²é¢† æ”¾æ¾äº†æ±‰æ—å°å»ºåŠ¿åŠ›ï¼Œç»“æœå°±ä¿ç•™äº†å°å»ºåŠ¿åŠ›ï¼Œå¯¼è‡´è¾›äº¥é©å‘½åå°å»ºåŠ¿åŠ›çš„åæ‰‘(è¢ä¸–å‡¯) æ°‘æƒä¸»ä¹‰ï¼Œå³æ”¿æ²»é©å‘½ åˆ›ç«‹æ°‘å›½ï¼Œæ¨ç¿»å°å»ºå›ä¸»ä¸“åˆ¶åˆ¶åº¦ å»ºç«‹èµ„äº§é˜¶çº§æ°‘ä¸»å…±å’Œå›½ å±€é™æ€§ï¼š å½’æ ¹åˆ°åº•å»ºç«‹èµ„äº§é˜¶çº§ä¸“æ”¿å›½å®¶ï¼Œå¹¿å¤§äººæ°‘ç¾¤ä¼—çš„æ°‘ä¸»æƒåˆ©å¾ˆéš¾å¾—åˆ°ä¿è¯ æ°‘ç”Ÿä¸»ä¹‰(è€ƒçš„å¤š)ï¼Œå³ç¤¾ä¼šé©å‘½ï¼ŒæŒ‡çš„æ˜¯å¹³å‡åœ°æƒ ç°æœ‰åœ°ä»·å½’åŸä¸» å¢ä»·å½’å›½å®¶ï¼Œä¸ºå›½æ°‘å…±äº« å±€é™æ€§ï¼šå¹¶éå°†åœŸåœ°æ‰€æœ‰æƒç»™å†œæ°‘ï¼Œæ²¡æœ‰çœŸæ­£è§¦åŠå°å»ºåœŸåœ°æ‰€æœ‰åˆ¶ï¼Œä¸èƒ½æ»¡è¶³å¹¿å¤§å†œæ°‘çš„åœŸåœ°è¦æ±‚ï¼Œé©å‘½ä¸­éš¾ä»¥æˆä¸ºå‘åŠ¨å¹¿å¤§å·¥å†œç¾¤ä¼—çš„ç†è®ºæ­¦å™¨ã€‚(æ²¡åœ°çš„è¿˜æ˜¯æ²¡åœ°ï¼Œä¸æ˜¯è€•è€…æœ‰å…¶ç”°) ä¸æ”¹è‰¯æ´¾(ç»´æ–°æ´¾)çš„è¾©è®ºèˆ†è®ºé˜µåœ° ã€Šæ°‘æŠ¥ã€‹ ã€Šæ–°æ°‘ä¸›æŠ¥ã€‹ ä¸»è¦é—®é¢˜æœ‰ä¸‰ä¸ª è¦ä¸è¦ä»¥é©å‘½çš„æ‰‹æ®µæ¨ç¿»æ¸…ç‹æœ(è®ºæˆ˜çš„ç„¦ç‚¹) è¦ä¸è¦æ¨ç¿»å¸åˆ¶ï¼Œå®è¡Œå…±å’Œ è¦ä¸è¦è¿›è¡Œç¤¾ä¼šé©å‘½ æ„ä¹‰ åˆ’æ¸…äº†é©å‘½ä¸æ”¹è‰¯çš„ç•Œé™ ä¼ æ’­äº†æ°‘ä¸»é©å‘½æ€æƒ³ï¼Œä¿ƒè¿›äº†é©å‘½å½¢åŠ¿çš„å‘å±• ä½†ä¹Ÿæš´éœ²äº†é©å‘½æ´¾åœ¨æ€æƒ³ç†è®ºæ–¹é¢çš„å¼±ç‚¹ èµ°ç²¾è‹±è·¯çº¿ ä¸åå¸ï¼Œåå°ä¸å½»åº• ä¸åˆ†åœ° æ€»ç»“ï¼š æ´‹åŠ¡æ´¾ï¼šå›ä¸»ä¸“åˆ¶ ç»´æ–°æ´¾ï¼šå›ä¸»ç«‹å®ª é©å‘½æ´¾ï¼šå®è¡Œå…±å’Œ æ­¦æ˜Œèµ·ä¹‰ä¸å°å»ºå¸åˆ¶çš„è¦†ç­ ç¬¬ä¸€æ¬¡æ­¦è£…èµ·ä¹‰æ˜¯èã€æµã€é†´èµ·ä¹‰(åŒç›Ÿä¼š) é»„èŠ±å²—èµ·ä¹‰(ä¹Ÿç§°å¹¿å·èµ·ä¹‰) å…±è¿›ä¼šå’Œæ–‡å­¦ç¤¾åœ¨æ­¦æ˜Œä¸¾è¡Œæ­¦è£…èµ·ä¹‰(è¾›äº¥é©å‘½) ä¸­åæ°‘å›½çš„å»ºç«‹1912å¹´1æœˆ1æ—¥ï¼Œå­™ä¸­å±±åœ¨å—äº¬å°±èŒæ”¹å›½å·ä¸ºä¸­åæ°‘å›½ï¼Œæˆç«‹ä¸­åæ°‘å›½ä¸´æ—¶æ”¿åºœã€‚å—äº¬ä¸´æ—¶æ”¿åºœæ˜¯ä¸€ä¸ªèµ„äº§é˜¶çº§å…±å’Œå›½æ€§è´¨çš„é©å‘½æ”¿æƒ æ”¿æƒç»„æˆäººå‘˜ä¸Šçœ‹ï¼Œèµ„äº§é˜¶çº§é©å‘½æ´¾å ä¸»ä½“åœ°ä½ ä»å—äº¬ä¸´æ—¶æ”¿åºœåˆ¶å®šçš„æ”¿ç­–çœ‹ï¼Œåæ˜ äº†ä¸­å›½æ°‘æ—èµ„äº§é˜¶çº§çš„æ„¿æœ›å’Œåˆ©ç›Š ä¸´æ—¶å‚è®®é™¢é¢å¸ƒã€Šä¸­åæ°‘å›½ä¸´æ—¶çº¦æ³•ã€‹(ç¬¬äºŒéƒ¨å®ªæ³•) ä¸­å›½å†å²ä¸Šç¬¬ä¸€éƒ¨å…·æœ‰èµ„äº§é˜¶çº§å…±å’Œå›½å®ªæ³•æ€§è´¨çš„æ³•å…¸ è§„å®šï¼šä¸­åæ°‘å›½ä¹‹ä¸»æƒå±äºå›½æ°‘å…¨ä½“ è¯„ä»· è¿›æ­¥æ€§ æ˜¯é©å‘½çš„äº§ç‰©ï¼Œå…·æœ‰é©å‘½æ€§ï¼Œæ°‘ä¸»æ€§ ä¸ä»…å…·æœ‰ç°å®çš„è¿›æ­¥æ„ä¹‰ï¼Œåœ¨ä¸­å›½å®ªæ”¿å²ä¸Šä¹Ÿå æœ‰é‡è¦åœ°ä½ å±€é™æ€§ ä¼å›¾æ‰¿è®¤æ¸…æ”¿åºœç­¾è®¢çš„æ¡çº¦ æ²¡æœ‰æå‡ºæ»¡è¶³å†œæ°‘è¦æ±‚çš„æ”¿ç­–ï¼Œåè€Œç»´æŠ¤å°å»ºåœŸåœ°åˆ¶åº¦ å†å²æ„ä¹‰ æ¨ç¿»äº†æ¸…ç‹æœçš„ç»Ÿæ²»ï¼Œæ‰“å‡»äº†ä¸­å¤–ååŠ¨åŠ¿åŠ› å»ºç«‹äº†ä¸­å›½å†å²ä¸Šç¬¬ä¸€ä¸ªèµ„äº§é˜¶çº§å…±å’Œæ”¿åºœï¼Œä½¿æ°‘ä¸»å…±å’Œè§‚å¿µæ·±å…¥äººå¿ƒ å¸¦æ¥äº†æ€æƒ³ä¸Šçš„è§£æ”¾ ä¿ƒä½¿ç¤¾ä¼šç»æµã€æ€æƒ³ä¹ æƒ¯å’Œç¤¾ä¼šé£ä¿—å‘ç”Ÿäº†ç§¯æå˜åŒ–(å‰ªè¾«) ä¸ä»…åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ‰“å‡»äº†å¸å›½ä¸»ä¹‰çš„ä¾µç•¥ï¼Œè€Œä¸”æ¨åŠ¨äº†äºšæ´²å„å›½æ°‘æ—è§£æ”¾è¿åŠ¨çš„é«˜æ¶¨ å°å»ºå†›é˜€ä¸“åˆ¶ç»Ÿæ²»çš„å½¢æˆ åœ¨æ”¿æ²»ä¸Šï¼šåŒ—æ´‹æ”¿åºœå®è¡Œå†›é˜€å®˜åƒšçš„ä¸“åˆ¶ç»Ÿæ²» åœ¨ç»æµä¸Šï¼šåŒ—æ´‹æ”¿åºœç«­åŠ›ç»´æŠ¤å¸å›½ä¸»ä¹‰(æ—¥æœ¬)ã€åœ°ä¸»é˜¶çº§å’Œä¹°åŠèµ„äº§é˜¶çº§çš„åˆ©ç›Š åœ¨æ–‡åŒ–æ€æƒ³ï¼šå°Šå­”å¤å¤æ€æƒ³çŒ–ç—ä¸€æ—¶(å› ä¸ºè¢ä¸–å‡¯æƒ³å½“çš‡å¸) è¢ä¸–å‡¯æ­»åï¼Œä¸­å›½é™·å…¥å†›é˜€å‰²æ®ï¼ŒåŸå› æ˜¯ ä¸­å›½æ˜¯åœ°æ–¹æ€§å†œä¸šç»æµï¼Œæ²¡æœ‰å½¢æˆç»Ÿä¸€çš„èµ„æœ¬ä¸»ä¹‰å¸‚åœº å¸å›½ä¸»ä¹‰å›½å®¶åœ¨ä¸­å›½é‡‡å–åˆ’åˆ†åŠ¿åŠ›èŒƒå›´çš„åˆ†è£‚å‰¥å‰Šæ”¿ç­– å¤±è´¥çš„åŸå› åŠæ•™è®­å®‹æ•™ä»è¢«æš—æ€ &lt;â€“ äºŒæ¬¡é©å‘½(å­™ä¸­å±±é’ˆå¯¹å®‹æ•™ä»è¢«æ€å‘åŠ¨çš„) è¢ä¸–å‡¯å¤è¾Ÿ &lt;â€“ æŠ¤å›½è¿åŠ¨(å­™ä¸­å±±é’ˆå¯¹è¢ä¸–å‡¯å¤è¾Ÿå‘åŠ¨çš„) æ®µç¥ºç‘æ‹’ç»æ¢å¤ä¸´æ—¶çº¦æ³• &lt;â€“ æŠ¤æ³•è¿åŠ¨(å›½æ°‘å…šè¦æ±‚æ®µç¥ºç‘æ¢å¤ä¸´æ—¶çº¦æ³•ï¼Œå­™ä¸­å±±å‘åŠ¨)ï¼ŒæŠ¤æ³•è¿åŠ¨çš„å¤±è´¥ä¹Ÿæ ‡å¿—ç€æ•´ä¸ªä¸­å›½æ°‘æ—èµ„äº§é˜¶çº§é¢†å¯¼çš„æ—§æ°‘ä¸»ä¸»ä¹‰é©å‘½çš„ç»ˆç»“ã€‚ æ•™è®­ï¼šä¸­å›½æ°‘æ—èµ„æœ¬é˜¶çº§å†ä¹Ÿä¸èƒ½é¢†å¯¼ä¸­å›½é©å‘½å‰è¿›äº†ã€‚ å¤±è´¥çš„åŸå›  å®¢è§‚ä¸Šï¼Œåœ¨å¸å›½ä¸»ä¹‰æ—¶ä»£ï¼Œåœ¨ä¸¤åŠçš„ä¸­å›½ï¼Œèµ„æœ¬ä¸»ä¹‰å»ºå›½çš„æ–¹æ¡ˆè¡Œä¸é€š ä¸»è§‚ä¸Šï¼Œé¢†å¯¼è€…èµ„äº§é˜¶çº§é©å‘½æ´¾æœ¬èº«å­˜åœ¨è®¸å¤šå¼±ç‚¹å’Œé”™è¯¯(é˜¶çº§å±€é™æ€§) æ²¡æœ‰æå‡ºå½»åº•çš„åå¸åå°å»ºçš„é©å‘½çº²é¢† ä¸èƒ½å‘åŠ¨ç¾¤ä¼— ä¸èƒ½å»ºç«‹åšå¼ºçš„é©å‘½æ”¿å…š æ€»ç»“: ä¸­å…± æˆåŠŸï¼šæ‡‚å¾—å°†é©¬å…‹æ€ä¸»ä¹‰ä¸ä¸­å›½çš„å®é™…ç›¸ç»“åˆ å¤±è´¥ï¼šä¸èƒ½å°†é©¬å…‹æ€ä¸»ä¹‰ä¸ä¸­å›½çš„å®é™…ç›¸ç»“åˆ éä¸­å…± æˆåŠŸï¼šä¸å¯èƒ½ å¤±è´¥ï¼šé˜¶çº§å±€é™æ€§(ä¸»è§‚) èµ„äº§é˜¶çº§é©å‘½æ´¾çš„è¿™äº›å¼±ç‚¹ã€é”™è¯¯ï¼Œæ ¹æºäºä¸­å›½æ°‘æ—èµ„äº§é˜¶çº§çš„è½¯å¼±æ€§å’Œå¦¥åæ€§ ä¸­å›½å…±äº§å…šæ˜¯å­™ä¸­å±±å…ˆç”Ÿå¼€åˆ›çš„é©å‘½äº‹ä¸šæœ€åšå®šçš„æ”¯æŒè€…ã€æœ€äº²å¯†çš„åˆä½œè€…ã€æœ€å¿ å®çš„ç»§æ‰¿è€… æ€»ç»“ï¼š æ°‘èµ„çš„ä¸¤é¢æ€§ å¦¥åæ€§ é©å‘½æ€§ é©¬å…‹æ€ä¸»ä¹‰çš„ä¼ æ’­æ–°æ–‡åŒ–è¿åŠ¨ä¸æ€æƒ³è§£æ”¾çš„æ½®æµ 1915å¹´9æœˆé™ˆç‹¬ç§€åœ¨ä¸Šæµ·åˆ›åŠã€Šé’å¹´ã€‹æ‚å¿—å¼€å§‹çš„(åæ”¹ä¸ºã€Šæ–°é’å¹´ã€‹) è”¡å…ƒåŸ¹å‡ºä»»åŒ—äº¬å¤§å­¦æ ¡é•¿ï¼Œè˜è¯·é™ˆç‹¬ç§€ä¸ºåŒ—å¤§æ–‡ç§‘å­¦é•¿ ã€Šæ–°é’å¹´ã€‹æ‚å¿—å’ŒåŒ—äº¬å¤§å­¦æˆä¸ºäº†æ–°æ–‡åŒ–è¿åŠ¨çš„ä¸»è¦é˜µåœ° åˆæœŸæ–°æ–‡åŒ–è¿åŠ¨çš„åŸºæœ¬å†…å®¹ æå€¡æ°‘ä¸»å’Œç§‘å­¦ æå€¡ä¸ªæ€§è§£æ”¾ æå€¡æ–°æ–‡å­¦ æ–°æ–‡åŒ–æå‡ºçš„åŸºæœ¬å£å·ï¼šæ°‘ä¸»å’Œç§‘å­¦ï¼Œå³å¾·å…ˆç”Ÿ(Democracy)å’Œèµ›å…ˆç”Ÿ(Science) äº”å››ä»¥å‰æ–°æ–‡åŒ–è¿åŠ¨çš„å†å²æ„ä¹‰ ä¸­å›½å†å²ä¸Šå‰æ‰€æœªæœ‰çš„å¯è’™è¿åŠ¨å’Œæ€æƒ³è§£æ”¾è¿åŠ¨ ä¸ºé©¬å…‹æ€ä¸»ä¹‰åœ¨ä¸­å›½ä¼ æ’­å‡†å¤‡äº†æ¡ä»¶ äº”å››ä»¥å‰æ–°æ–‡åŒ–è¿åŠ¨çš„å±€é™æ€§ å¹¶ä¸èƒ½ä¸ºäººä»¬æä¾›ä¸€ç§æ€æƒ³æ­¦å™¨å»è®¤è¯†ä¸­å›½ ä»…ä»…ä¾é å°‘æ•°äººçš„å‘å–Š(ç²¾è‹±è·¯çº¿) è®¸å¤šé¢†å¯¼äººç‰©ï¼Œè¿˜æ²¡æœ‰é©¬å…‹æ€ä¸»ä¹‰çš„æ‰¹åˆ¤ç²¾ç¥(è¾©è¯æ³•)ï¼Œä¸€èˆ¬è¿˜æ˜¯èµ„æœ¬é˜¶çº§çš„æ–¹æ³•(å½¢è€Œä¸Š) åæœˆé©å‘½å¯¹ä¸­å›½çš„å½±å“ ç»æµæ–‡åŒ–è½åçš„å›½å®¶ä¹Ÿå¯ä»¥ç”¨ç¤¾ä¼šä¸»ä¹‰æ€æƒ³æŒ‡å¼•è‡ªå·±èµ°å‘è§£æ”¾ä¹‹è·¯ æœ‰åŠ›çš„æ¨åŠ¨äº†ç¤¾ä¼šä¸»ä¹‰æ€æƒ³åœ¨ä¸­å›½çš„ä¼ æ’­ ç»™äºˆä¸­å›½å…ˆè¿›åˆ†å­ä»¥æ–°çš„é©å‘½æ–¹æ³•(ç¾¤ä¼—è·¯çº¿) æå¤§é’Šã€Šæˆ‘çš„é©¬å…‹æ€ä¸»ä¹‰è§‚ã€‹ï¼šæå¤§é’Šæ˜¯ä¸­å›½ç¬¬ä¸€ä¸ªé©¬å…‹æ€ä¸»ä¹‰è€…ã€‚ åœ¨äº”å››è¿åŠ¨å‰ï¼Œä¿¡ä»°é©¬å…‹æ€ä¸»ä¹‰çš„ï¼Œåªæ˜¯æå¤§é’Šè¿™æ ·çš„ä¸ªåˆ«äººç‰©ã€‚ äº”å››è¿åŠ¨çš„å‘ç”Ÿå’Œå‘å±•ç¤¾ä¼šå†å²æ¡ä»¶ï¼š æ–°çš„ç¤¾ä¼šåŠ›é‡çš„æˆé•¿ã€å£®å¤§ æ–°æ–‡åŒ–æ€èµ·æ€æƒ³è§£æ”¾çš„æ½®æµ ä¿„å›½åæœˆé©å‘½å¯¹ä¸­å›½çš„å½±å“ äº”å››è¿åŠ¨çš„ç›´æ¥å¯¼ç«çº¿ï¼Œæ˜¯å·´é»å’Œä¼šä¸Šä¸­å›½å¤–äº¤çš„å¤±è´¥ã€‚ å·´é»å’Œä¼š(ä¸€æˆ˜æˆ˜èƒœå›½å¯¹æˆ˜è´¥å›½çš„å®¡åˆ¤ä¼š) ä¸­å›½æ˜¯æˆ˜èƒœå›½ï¼Œæ—¥æœ¬ä¹Ÿæ˜¯æˆ˜èƒœå›½(æ—¥æœ¬åœ¨ä¸­å›½å±±ä¸œé’å²›æ‰“äº†å¾·å›½)ï¼Œå›½é™…ç¤¾ä¼šè¦æ±‚å°†å±±ä¸œäº¤ç»™æ—¥æœ¬ æ¶ˆæ¯ä¼ å›å›½å†…ï¼Œçˆ†å‘äº”å››è¿åŠ¨ã€‚å¯ä»¥å‚è€ƒç”µå½±ã€Šæˆ‘çš„1919ã€‹(å¤–äº¤å®˜é¡¾ç»´é’§) æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½çš„å¼€ç«¯(è¶…çº§é‡è¦)äº”å››è¿åŠ¨çš„æ–°ç‰¹ç‚¹ï¼š è¡¨ç°äº†åå¸åå°å»ºçš„å½»åº•æ€§ æ˜¯ä¸€æ¬¡çœŸæ­£çš„ç¾¤ä¼—è¿åŠ¨ ä¿ƒè¿›äº†é©¬å…‹æ€ä¸»ä¹‰åœ¨ä¸­å›½çš„ä¼ æ’­ä¸ä¸­å›½å·¥äººè¿åŠ¨çš„ç»“åˆ å‘ç”Ÿåœ¨ä¿„å›½åæœˆé©å‘½ä¹‹åï¼Œå‘ç”Ÿåœ¨æ— äº§é˜¶çº§ç¤¾ä¼šä¸»ä¹‰é©å‘½çš„æ–°æ—¶ä»£ ç»“è®ºï¼šä¸­å›½çš„æ°‘æ—æ°‘ä¸»é©å‘½ï¼Œåœ¨åæœˆé©å‘½åå°±å±äºä¸–ç•Œæ— äº§é˜¶çº§ç¤¾ä¼šä¸»ä¹‰é©å‘½çš„ä¸€éƒ¨åˆ†äº†ã€‚ é©å‘½çš„æ‰€å±èŒƒå›´(ä¸­å›½é©å‘½ä¸ä¸–ç•Œé©å‘½çš„å…³ç³») æ—§æ°‘ä¸»ä¸»ä¹‰é©å‘½ï¼šä¸–ç•Œèµ„äº§é˜¶çº§é©å‘½ æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½(è‡ªå·±æ˜¯èµ„äº§é˜¶çº§é©å‘½)ï¼šå±äºä¸–ç•Œæ— äº§é˜¶çº§ç¤¾ä¼šä¸»ä¹‰é©å‘½çš„ä¸€éƒ¨åˆ† é¢†å¯¼é˜¶çº§ å¯¹è±¡(ä»»åŠ¡) æ€§è´¨ æ‰€å±èŒƒå›´ æ—§æ°‘ä¸»ä¸»ä¹‰é©å‘½ èµ„äº§é˜¶çº§ åå¸åå°å»º èµ„äº§é˜¶çº§é©å‘½ ä¸–ç•Œèµ„äº§é˜¶çº§é©å‘½çš„ä¸€éƒ¨åˆ† æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½ æ— äº§é˜¶çº§ åå¸åå°å»º èµ„äº§é˜¶çº§é©å‘½ ä¸–ç•Œæ— äº§é˜¶çº§é©å‘½çš„ä¸€éƒ¨åˆ† ç¤¾ä¼šä¸»ä¹‰é©å‘½ æ— äº§é˜¶çº§ åèµ„ æ— äº§é˜¶çº§é©å‘½ ä¸–ç•Œæ— äº§é˜¶çº§é©å‘½çš„ä¸€éƒ¨åˆ† äº”å››è¿åŠ¨æˆä¸ºäº†æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½çš„å¼€ç«¯ã€‚ ä¸­å›½å…±äº§å…šçš„è¯ç”Ÿ æ—©æœŸâ€œé©¬å…‹æ€ä¸»ä¹‰â€é˜Ÿä¼ å…šå°ç»„ ä¸­å›½å…±äº§å…š æ—©æœŸé©¬å…‹æ€ä¸»ä¹‰è¿åŠ¨é˜Ÿä¼ï¼š äº”å››ä»¥å‰æ–°æ–‡åŒ–çš„ç²¾ç¥é¢†è¢–ï¼šæå¤§é’Šï¼Œé™ˆç‹¬ç§€ äº”å››çˆ±å›½è¿åŠ¨çš„å·¦ç¿¼éª¨å¹²ï¼šæ¯›æ³½ä¸œï¼Œå‘¨æ©æ¥ åŸä¸­å›½åŒç›Ÿä¼šä¼šå‘˜ï¼šè‘£å¿…æ­¦ â€¦ ç‰¹ç‚¹ï¼š é‡è§†é©¬å…‹æ€ä¸»ä¹‰åŸºæœ¬ç†è®ºçš„å­¦ä¹ (å¼ºè°ƒæš´åŠ›é©å‘½)ï¼Œä¸ç¬¬äºŒå›½é™…(å¼ºè°ƒæ”¹è‰¯ï¼Œä¿®æ­£ä¸»ä¹‰ï¼Œè¢«é˜‰å‰²è¿‡çš„é©¬å…‹æ€ä¸»ä¹‰)çš„ç¤¾ä¼šæ°‘ä¸»ä¸»ä¹‰åˆ’æ¸…ç•Œé™ æ³¨æ„ä»ä¸­å›½çš„å®é™…å‡ºå‘ å¼€å§‹æå‡ºçŸ¥è¯†åˆ†å­ä¸åŠ³åŠ¨ç¾¤ä¼—ç›¸ç»“åˆ ä¸ä¸­å›½å·¥äººçš„ç»“åˆ 1920å¹´8æœˆï¼Œç¬¬ä¸€ä¸ªå…±äº§å…šç»„ç»‡åœ¨ä¸Šæµ·å»ºç«‹ ä¸»è¦å·¥ä½œ åŠ å¼ºå¯¹é©¬å…‹æ€ä¸»ä¹‰çš„ç ”ç©¶å’Œå®£ä¼  åœ¨å·¥äººä¸­è¿›è¡Œå®£ä¼ å’Œç»„ç»‡å·¥ä½œ å»ºç«‹ç¤¾ä¼šä¸»ä¹‰é’å¹´å›¢(åé¢ä¹Ÿå«å…±é’å›¢) è¿›è¡Œæœ‰å…³å»ºå…šé—®é¢˜çš„ç ”ç©¶å’Œè®¨è®º ä¸­å›½å…±äº§å…šè¯ç”Ÿ(èƒŒ)ä¸­å›½å…±äº§å…šè¯ç”Ÿçš„å†å²å¿…ç„¶æ€§(ä¸ºä»€ä¹ˆå†å²é€‰æ‹©äº†å…š)ï¼š è¿‘ä»£ä»¥æ¥ï¼Œä¸ºæ”¹å˜ä¸­åæ°‘æ—çš„å‘½è¿ï¼Œä¸­å›½äººæ°‘å’Œæ— æ•°ä»äººå¿—åœŸè¿›è¡Œäº†å¹²è¾›ä¸‡è‹¦çš„æ¢ç´¢å’Œä¸å±ˆä¸æŒ çš„æ–—äº‰ã€‚ç„¶è€Œä¸è§¦åŠ¨å°å»ºæ ¹åŸºçš„è‡ªå¼ºè¿åŠ¨å’Œæ”¹è‰¯ä¸»ä¹‰ï¼Œæ—§å¼çš„å†œæ°‘æˆ˜äº‰ï¼Œèµ„äº§é˜¶çº§é©å‘½æ´¾é¢†å¯¼çš„é©å‘½ï¼Œç…§æ¬è¥¿æ–¹èµ„æœ¬ä¸»ä¹‰çš„å…¶ä»–ç§ç§æ–¹æ¡ˆï¼Œéƒ½ä¸èƒ½å®Œæˆä¸­åæ°‘æ—æ•‘äº¡å›¾å­˜çš„æ°‘æ—ä½¿å‘½å’Œåå¸åå°å»ºçš„å†å²ä»»åŠ¡ã€‚ä¸­å›½çš„å‘å±•è¿›æ­¥ï¼Œå®¢è§‚ä¸Šè¦æ±‚æœ‰èƒ½å¤ŸæŒ‡å¯¼ä¸­å›½äººæ°‘è¿›è¡Œåå¸åå°å»ºé©å‘½çš„å…ˆè¿›ç†è®ºï¼Œæœ‰èƒ½å¤Ÿé¢†å¯¼ä¸­å›½ç¤¾ä¼šå˜é©çš„å…ˆè¿›ç¤¾ä¼šåŠ›é‡ã€‚ä¸­å›½å…±äº§å…šçš„è¯ç”Ÿæˆä¸ºå†å²å‘å±•çš„å¿…ç„¶ã€‚(ä¸­å›½å¾ˆæƒ¨ï¼Œä»–ä»¬ä¸è¡Œï¼Œéœ€è¦æˆ‘æ¥) 1921å¹´7æœˆ23æ—¥ï¼Œä¸­å›½å…±äº§å…šç¬¬ä¸€æ¬¡å…¨å›½ä»£è¡¨å¤§ä¼šäºåœ¨ä¸Šæµ·ä¸¾è¡Œã€‚å¤§ä¼šç¡®å®šå…šçš„åç§°ä¸ºä¸­å›½å…±äº§å…šã€‚ æˆç«‹æ—¶çš„å†å²ç‰¹ç‚¹ï¼š åæœˆé©å‘½åï¼Œç¬¬äºŒå›½é™…ä¸»ä¹‰ã€ä¿®æ­£ä¸»ä¹‰é­åˆ°ç ´äº§å ä¸­å›½å·¥äººå—ä¸‰é‡å‹è¿«ï¼Œå…·æœ‰åšå®šçš„é©å‘½æ€§ å½“æ—¶ä¸­å›½å…±äº§å…šè¦åŠ å¼ºè‡ªèº«å»ºè®¾çš„åŸå› ï¼š å·¥äººé˜¶çº§çš„äººæ•°ä¸å¤šï¼Œå‡ºèº«å°èµ„äº§é˜¶çº§çš„å…šå‘˜å æœ‰ç›¸å½“å¤§çš„æ•°é‡ï¼Œæ–°ç”Ÿä¸­å›½å…±äº§å…šå—åˆ°ä¸¥é‡å½±å“ å¹…å‘˜è¾½é˜”ã€äººå£ä¼—å¤šã€æƒ…å†µå¤æ‚ ä¼Ÿå¤§æ„ä¹‰ï¼š æœ‰äº†å…šï¼Œä¸­å›½é©å‘½æœ‰äº†åšå¼ºçš„é¢†å¯¼åŠ›é‡ ä½¿ä¸­å›½æœ‰äº†ç§‘å­¦çš„æŒ‡å¯¼æ€æƒ³ æœ‰äº†å´­æ–°çš„å¥‹æ–—ç›®æ ‡å’Œçº²é¢† æœ‰äº†æ–°çš„é©å‘½æ–¹æ³•(ç¾¤ä¼—è·¯çº¿) åˆ¶å®šé©å‘½çº²é¢†ï¼Œå‘åŠ¨å·¥å†œè¿åŠ¨åˆ†æ¸…æ•Œå‹æ˜¯é©å‘½çš„é¦–è¦é—®é¢˜ã€‚ ä¸­å…±äºŒå¤§ï¼š åå¸åå°å»ºçš„æ°‘ä¸»é©å‘½çš„çº²é¢† å¼€å§‹é‡‡å–æ°‘æ—èµ„äº§é˜¶çº§ã€å°èµ„äº§é˜¶çº§çš„æ”¿å…šå’Œæ”¿æ²»æ´¾åˆ«ã€‚é‡‡å–ç¾¤ä¼—è·¯çº¿ å‘åŠ¨å·¥å†œç¾¤ä¼—å¼€å±•é©å‘½æ–—äº‰ï¼š å·¥äººç½¢å·¥ â€¦ â€¦ å›½å…±åˆä½œç¬¬ä¸€æ¬¡åˆä½œ â€œæ‰“å€’åˆ—å¼ºï¼Œé™¤å†›é˜€â€æˆä¸ºäººæ°‘çš„å¼ºçƒˆæ„¿æœ› ä¸­å…±ä¸‰å¤§å†³å®šå…¨ä½“å…±äº§å…šä»¥ä¸ªäººæ°‘ä¹‰åŠ å…¥å›½æ°‘å…š(å…šå†…åˆä½œ)ï¼ŒåŒå›½æ°‘å…šå»ºç«‹ç»Ÿä¸€æˆ˜çº¿ æ–°ä¸‰æ°‘ä¸»ä¹‰ï¼š åœ¨æ°‘æ—ä¸»ä¹‰ä¸­çªå‡ºåå¸çš„å†…å®¹ åœ¨æ°‘æƒä¸»ä¹‰ä¸­å¼ºè°ƒæ°‘ä¸»æƒåˆ©åº”â€œä¸ºä¸€èˆ¬å¹³æ°‘æ‰€å…±æœ‰â€ åœ¨æ°‘ç”Ÿä¸»ä¹‰æ¦‚æ‹¬ä¸ºâ€œå¹³å‡åœ°æƒâ€å’Œâ€œèŠ‚åˆ¶ä¸»å¼ â€ä¸¤å¤§åŸåˆ™(åæ¥åˆæå‡ºäº†â€œè€•è€…æœ‰å…¶ç”°â€) ç»“è®ºï¼šå› ä¸ºæ–°ä¸‰æ°‘ä¸»ä¹‰åŒä¸­å›½å…±äº§å…šåœ¨æ°‘ä¸»é©å‘½é˜¶æ®µçš„çº²é¢†ä¸€è‡´ï¼Œå› æ­¤æ–°ä¸‰æ°‘ä¸»ä¹‰æ˜¯å›½å…±åˆä½œçš„å…±åŒçº²é¢†ï¼Œå›½å…±ä¸€å¤§çš„å¬å¼€æ ‡å¿—ç€ç¬¬ä¸€æ¬¡å›½å…±åˆä½œçš„æ­£å¼å½¢æˆã€‚ æ—¶æœŸ æ ‡å¿—æ€§äº‹ä»¶ ç»Ÿä¸€æˆ˜çº¿ 1925-1927 å¤§é©å‘½æ—¶æœŸ(åŒ—ä¼) äº”å…(sa)è¿åŠ¨ å›½æ°‘é©å‘½ç»Ÿä¸€æˆ˜çº¿(å›½å…±åˆä½œç»Ÿä¸€æˆ˜çº¿) 1927-1937 åœŸåœ°é©å‘½æˆ˜äº‰æ—¶æœŸ å…«ä¸ƒä¼šè®® å·¥å†œæ°‘ä¸»ç»Ÿä¸€æˆ˜çº¿ 1937-1945 æŠ—æ—¥æˆ˜äº‰æ—¶æœŸ è¥¿å®‰äº‹å˜ æŠ—æ—¥æ°‘æ—ç»Ÿä¸€æˆ˜çº¿ 1945-1949 è§£æ”¾æˆ˜äº‰æ—¶æœŸ å›½æ°‘å…šè¿›æ”»ä¸­åŸè§£æ”¾åŒº äººæ°‘æ°‘ä¸»ç»Ÿä¸€æˆ˜çº¿ æ¯›æ³½ä¸œå‘è¡¨ã€Šå›½æ°‘é©å‘½ä¸å†œæ°‘é—®é¢˜ã€‹ï¼šå†œæ°‘é—®é¢˜æ˜¯å›½æ°‘é©å‘½çš„ä¸­å¿ƒé—®é¢˜ã€‚ å›½æ°‘åˆä½œå…¨é¢ç ´è£‚ï¼Œå››ä¸€äºŒåé©å‘½æ”¿å˜å’Œä¸ƒä¸€äº”åé©å‘½æˆä¸ºå¤§é©å‘½å¤±è´¥çš„æ ‡å¿—ã€‚ å¤§é©å‘½çš„æ„ä¹‰ï¼š åŸºæœ¬æ¨ç¿»äº†åŒ—æ´‹å†›é˜€ æ•™è‚²å’Œé”»ç‚¼äº†å„é©å‘½é˜¶çº§ æé«˜äº†ä¸­å›½å…±äº§å…šåœ¨å…¨å›½äººæ°‘çš„æ”¿æ²»å¨æœ› å¤±è´¥çš„åŸå› ï¼š å®¢è§‚ï¼šåé©å‘½åŠ›é‡å¼ºå¤§ ä¸»è§‚ï¼š çŠ¯äº†ä»¥é™ˆç‹¬ç§€ä¸ºä»£è¡¨çš„å³å€¾æœºä¼šä¸»ä¹‰é”™è¯¯ï¼Œæ”¾å¼ƒäº†é¢†å¯¼æƒ(ç‰¹åˆ«æ˜¯æ­¦è£…) ä¸å–„äºå°†é©¬åˆ—ä¸»ä¹‰çš„åŸºæœ¬åŸç†å’Œä¸­å›½é©å‘½çš„å®è·µç›¸ç»“åˆ(æ ¹æœ¬åŸå› ) å…±äº§å›½é™…ä¸äº†è§£ä¸­å›½å®é™…æƒ…å†µï¼ŒçæŒ‡æŒ¥(éµä¹‰ä¼šè®®ä»¥å‰åªè¦å¤±è´¥äº†å°±ä¼šæœ‰è¿™ä¸ªåŸå› ) ç»éªŒæ•™è®­ï¼š å¿…é¡»å»ºç«‹å·¥ã€å†œã€å°èµ„å’Œæ°‘èµ„åœ¨å†…çš„é©å‘½ç»Ÿä¸€æˆ˜çº¿(æœ‹å‹è¿˜å¾—è¦) æ— äº§é˜¶çº§é¢†å¯¼æƒçš„ä¸­å¿ƒé—®é¢˜æ˜¯å†œæ°‘é—®é¢˜ å¿…é¡»è¦æœ‰å†›é˜Ÿ(å›½å…±ç¬¬ä¸€æ¬¡åˆä½œæ—¶æ²¡æœ‰å†›é˜Ÿ) åŠ å¼ºæ€æƒ³ã€æ”¿æ²»ã€ç»„ç»‡å»ºè®¾ï¼Œå°†é©¬åˆ—ä¸»ä¹‰åŒä¸­å›½å®é™…æƒ…å†µç»“åˆ å¤§é©å‘½çš„å¤±è´¥ä¸åœŸåœ°é©å‘½çš„å…´èµ·å›½æ°‘å…šç»Ÿæ²»å…¨å›½ å¼ å­¦è‰¯æ”¹æ˜“æ——å¸œï¼Œæœä»å›½æ°‘å…šçš„é¢†å¯¼ å›½æ°‘å…šå®è¡Œæ¸…å…šåˆ†å…±æ”¿ç­– å›½æ°‘å…šé€€åŒ–äº†ï¼ŒåŒåŒ—æ´‹å†›é˜€æ²¡æœ‰æœ¬è´¨åŒºåˆ« å›½æƒ…æ²¡å˜ï¼Œé©å‘½å¯¹è±¡æ²¡å˜ï¼Œé©å‘½æ€§è´¨ä¹Ÿæ²¡æœ‰å˜ åœŸåœ°é©å‘½å…´èµ·å…«ä¸ƒä¼šè®®ï¼š å½»åº•æ¸…ç®—é™ˆç‹¬ç§€å³å€¾æœºä¼šä¸»ä¹‰é”™è¯¯ æå‡ºåœŸåœ°é©å‘½æ˜¯ä¸­å›½èµ„äº§é˜¶çº§æ°‘ä¸»é©å‘½çš„ä¸­å¿ƒé—®é¢˜ æ¯›æ³½ä¸œï¼šæ”¿æƒæ˜¯ç”±æªæ†å­ä¸­å–å¾—çš„ è¯„ä»·ï¼šæŒ½æ•‘å…šå’Œé©å‘½ æ€»ç»“ï¼šç‰¹åˆ«é‡è¦çš„ä¼šè®® å…«ä¸ƒä¼šè®® éµä¹‰ä¼šè®® åä¸€å±Šä¸‰ä¸­å…¨ä¼š å—æ˜Œèµ·ä¹‰æ˜¯ä¸­å›½å…±äº§å…šé¢†å¯¼é©å‘½æˆ˜äº‰ã€åˆ›å»ºäººæ°‘å†›é˜Ÿå’Œæ­¦è£…å¤ºå–æ”¿æƒçš„å¼€ç«¯ã€‚(å—æ˜Œèµ·ä¹‰å¼€å§‹æœ‰äº†è‡ªå·±çš„å†›é˜Ÿ) å—æ˜Œèµ·ä¹‰ ç§‹æ”¶èµ·ä¹‰ å¹¿å·èµ·ä¹‰ å†œæ‘åŒ…å›´åŸå¸‚ã€æ­¦è£…å¤ºå–æ”¿æƒçš„é“è·¯ ã€Šä¸­å›½çš„çº¢è‰²æ”¿æƒä¸ºä»€ä¹ˆèƒ½å¤Ÿå­˜åœ¨?ã€‹å’Œã€Šäº•å†ˆå±±çš„æ–—äº‰ã€‹ï¼šè®ºè¯äº†çº¢è‰²æ”¿æƒèƒ½å¤Ÿé•¿æœŸå­˜åœ¨å¹¶å‘å±•çš„ä¸»å®¢è§‚æ¡ä»¶ ã€Šæ˜Ÿæ˜Ÿä¹‹ç«ï¼Œå¯ä»¥ç‡åŸã€‹ï¼šå†œæ‘åŒ…å›´åŸå¸‚ã€æ­¦è£…å¤ºå–æ”¿æƒçš„é“è·¯ ã€Šåå¯¹æœ¬æœ¬ä¸»ä¹‰ã€‹ï¼š æ²¡æœ‰è°ƒæŸ¥ï¼Œæ²¡æœ‰å‘è¨€æƒ ä¸­å›½é©å‘½æ–—äº‰çš„èƒœåˆ©è¦é ä¸­å›½åŒå¿—äº†è§£ä¸­å›½æƒ…å†µ ç»“è®ºï¼šå†œæ‘åŒ…å›´åŸå¸‚ã€æ­¦è£…å¤ºå–æ”¿æƒçš„é“è·¯ç†è®ºçš„æå‡ºï¼Œæ ‡å¿—ç€æ¯›æ³½ä¸œæ€æƒ³çš„åˆæ­¥å½¢æˆã€‚ åœŸåœ°æ”¿ç­–ï¼š æ¶ˆç­å°å»ºåœ°ä¸»çš„åœŸåœ°ç§æœ‰åˆ¶ï¼Œå®ç°å†œæ°‘çš„åœŸåœ°ç§æœ‰åˆ¶ äº•å†ˆå±±åœŸåœ°æ³•(ç¬¬ä¸€ä¸ªåœŸåœ°æ³•)ï¼Œå¯ä»¥æŠ¢åœ° å…´å›½åœŸåœ°æ³•(ç¬¬äºŒä¸ªåœŸåœ°æ³•)ï¼Œæ²¡æ”¶å…¬å…±çš„åœ°å’Œåœ°ä¸»çš„åœ° ä¾é è´«å†œã€é›‡å†œï¼Œè”åˆä¸­å†œï¼Œé™åˆ¶å¯Œå†œï¼Œä¿æŠ¤ä¸­å°å·¥å•†ä¸šè€…ï¼Œæ¶ˆç­åœ°ä¸» æŒ‰äººå£å¹³åˆ†åœŸåœ°(è€•è€…æœ‰å…¶ç”°) ç¬¬ä¸€ä¸ªå¯ä»¥ä»˜è¯¸å®æ–½çš„æ¯”è¾ƒå®Œæ•´çš„åœŸåœ°é©å‘½çº²é¢†å’Œè·¯çº¿ã€‚ å†œæ‘é©å‘½æ ¹æ®åœ°çš„å»ºè®¾ï¼š ç¬¬ä¸€æ¬¡å…¨å›½å·¥å†œä»£è¡¨å¤§ä¼šåœ¨æ±Ÿè¥¿çœç‘é‡‘å¿å¶åªæ‘ä¸¾è¡Œ(ä»æ­¤æœ‰äº†è‡ªå·±çš„æ”¿æƒ) é€šè¿‡äº†ã€Šä¸­åè‹ç»´åŸƒå…±å’Œå›½å®ªæ³•å¤§çº²ã€‹(ç¬¬ä¸‰éƒ¨å®ªæ³•)ï¼Œæˆç«‹xxxä¸­å¤®æ”¿åºœï¼Œæ¯›æ³½ä¸œä»»ä¸»å¸­ å®ç°å·¥å†œå…µä»£è¡¨å¤§ä¼šåˆ¶åº¦ åœŸåœ°é©å‘½çš„ä¸¥é‡é”™è¯¯ï¼š ç¬¬ä¸€æ¬¡æ˜¯å·¦å€¾ç›²åŠ¨é”™è¯¯ ç¬¬äºŒåƒæ˜¯å·¦å€¾å†’é™©é”™è¯¯ ç¬¬ä¸‰æ¬¡æ˜¯ä»¥ç‹æ˜ä¸ºä»£è¡¨çš„å·¦å€¾æ•™æ¡ä¸»ä¹‰(å¯¼è‡´ç¬¬äº”æ¬¡åå›´å‰¿æˆ˜äº‰å¤±è´¥) æ··æ·†äº†æ°‘ä¸»é©å‘½ä¸ç¤¾ä¼šä¸»ä¹‰é©å‘½çš„ç•Œé™(åèµ„äº†) åšæŒä»¥åŸå¸‚ä¸ºä¸­å¿ƒ æå‡ºåšå†³æ‰“å‡»å¯Œå†œ å®è¡Œè¿›æ”»ä¸­çš„å†’é™©ä¸»ä¹‰ã€é˜²å¾¡ä¸­çš„ä¿å®ˆä¸»ä¹‰ã€é€€å´ä¸­çš„é€ƒè·‘ä¸»ä¹‰ æ‹‰å¸®ç»“æ´¾ï¼Œæ’é™¤å¼‚å·±(æ¯›æ³½ä¸œè¿™æ—¶å¾ˆæƒ¨) ä¸ºä»€ä¹ˆä¼šçŠ¯é”™ï¼š å…«ä¸ƒä¼šè®®åä¸€ç›´å­˜åœ¨ç€æµ“åšçš„å·¦å€¾æƒ…ç»ª å…±äº§å›½é™…çæŒ‡æŒ¥ ä¸æ‡‚å¾—å°†é©¬åˆ—åŒä¸­å›½å®é™…æƒ…å†µç›¸ç»“åˆ(æ ¹æœ¬åŸå› ) éµä¹‰ä¼šè®®éµä¹‰ä¼šè®®è§£å†³äº†å†›äº‹é—®é¢˜å’Œç»„ç»‡é—®é¢˜ æ”¿æ²»é—®é¢˜ï¼šç“¦çª‘å ¡(bu)ä¼šè®® æ€æƒ³é—®é¢˜ï¼šå»¶å®‰æ•´é£è¿åŠ¨ éµä¹‰ä¼šè®®ï¼šæŒ½æ•‘å…šçš„å‘½è¿ï¼Œä¸­å›½å…±äº§å…šåœ¨æ”¿æ²»ä¸Šèµ°å‘æˆç†Ÿã€‚(ä¸å¬å…±äº§å›½é™…çš„äº†) æ€»ç»“å†å²ç»éªŒ ã€Šè®ºåå¯¹æ—¥æœ¬å¸å›½ä¸»ä¹‰çš„ç­–ç•¥ã€‹ï¼šç³»ç»Ÿè§£å†³äº†å…šçš„æ”¿æ²»è·¯çº¿é—®é¢˜ ã€Šä¸­å›½é©å‘½æˆ˜äº‰çš„æˆ˜ç•¥é—®é¢˜ã€‹ï¼šç³»ç»Ÿè¯´æ˜äº†ä¸­å›½é©å‘½æˆ˜äº‰æˆ˜ç•¥æ–¹é¢çš„è¯¸é—®é¢˜ ã€ŠçŸ›ç›¾è®ºã€‹ã€Šå®è·µè®ºã€‹ï¼šæ­éœ²äº†å…šå†…çš„ä¸»è§‚ä¸»ä¹‰å°¤å…¶æ˜¯æ•™æ¡ä¸»ä¹‰çš„é”™è¯¯ï¼Œé©¬åˆ—åŸç†è¦ä¸å®é™…ç›¸ç»“åˆï¼Œé˜æ˜äº†å…šçš„é©¬å…‹æ€ä¸»ä¹‰æ€æƒ³è·¯çº¿ æŠ—æ—¥æˆ˜äº‰æ—¥æœ¬ç­äº¡ä¸­å›½çš„è®¡åˆ’ å ä¸œåŒ— 1931å¹´9æœˆ18æ—¥ï¼Œæ—¥æœ¬å‘åŠ¨ä¹ä¸€å…«äº‹å˜(æŠ—æ—¥æˆ˜äº‰çš„èµ·ç‚¹) å›¾ååŒ— å…¨é¢æŠ—æˆ˜ 1937å¹´7æœˆ7æ—¥çˆ†å‘å¢æ²Ÿæ¡¥äº‹å˜ï¼Œæ—¥æœ¬å…¨é¢ä¾µå ä¸­å›½å…±äº§å…šä¸¾èµ·æ­¦è£…æŠ—æ—¥çš„æ——å¸œ 1931å¹´ä¹ä¸€å…«äº‹å˜æ˜¯ä¸­å›½æŠ—æ—¥æˆ˜äº‰çš„èµ·ç‚¹ï¼Œå±€éƒ¨æŠ—æˆ˜æ­å¼€äº†åæ³•è¥¿æ–¯æˆ˜äº‰çš„åºå¹• å…«ä¸€å®£è¨€ï¼Œå‘¼ååœæ­¢å†…æˆ˜ï¼Œä¸€è‡´æŠ—æ—¥ ä¸€äºŒä¹è¿åŠ¨ï¼Œæ ‡å¿—ç€ä¸­å›½äººæŠ—æ—¥æ•‘äº¡è¿åŠ¨æ–°é«˜æ½®çš„åˆ°æ¥ ç“¦çª‘å ¡ä¼šè®®(æ ¸å¿ƒè¯ï¼šæŠ—æ—¥æ°‘æ—ç»Ÿä¸€æˆ˜çº¿) è¥¿å®‰äº‹å˜ è¥¿å®‰äº‹å˜ï¼šåå¹´å†…æˆ˜ç”±æ­¤ç»“æŸ æŠ—æ—¥æ°‘æ—ç»Ÿä¸€æˆ˜çº¿çš„å½¢æˆç“¦çª‘å ¡ä¼šè®®(æŠ—æ—¥æ°‘æ—ç»Ÿä¸€æˆ˜çº¿)ï¼š é˜æ˜äº†æŠ—æ—¥æ°‘æ—ç»Ÿä¸€æˆ˜çº¿çš„å¯èƒ½æ€§ å·¥äººã€å†œæ°‘ã€å°èµ„æ˜¯æŠ—æ—¥çš„ æ°‘èµ„çš„ä¸¤é¢æ€§ï¼Œæ˜¯å¯èƒ½æŠ—æ—¥çš„ åœ°ä¸»æœ‰çš„æ˜¯å¯ä»¥è”åˆçš„ æ‰¹åˆ¤äº†å·¦å€¾å…³é—¨ä¸»ä¹‰é”™è¯¯ï¼Œå¼ºè°ƒä¸­å›½å…±äº§å…šçš„é¢†å¯¼ä½œç”¨ â€œäººæ°‘å…±å’Œå›½â€ä»£æ›¿â€œå·¥å†œå…±å’Œå›½â€ å…¨é¢æ€§æŠ—æˆ˜çš„å¼€å§‹å›½æ°‘å…šã€Šä¸­å›½å…±äº§å…šä¸ºå…¬å¸ƒå›½å…±åˆä½œå®£è¨€ã€‹ï¼Œè’‹ä»‹çŸ³å®é™…æ‰¿è®¤å…±äº§å…šåˆæ³•åœ°ä½çš„è°ˆè¯æ ‡å¿—ç€å›½å…±ç¬¬äºŒæ¬¡åˆä½œï¼š ä¸ä»…åŒ…æ‹¬å·¥äººã€å†œæ°‘ã€å°èµ„ã€æ°‘èµ„ï¼Œè¿˜åŒ…æ‹¬ä»¥è’‹ä»‹çŸ³ä¸ºä»£è¡¨çš„äº²è‹±ç¾æ´¾å¤§åœ°ä¸»å¤§èµ„äº§é˜¶çº§ æœ‰æ”¿æƒæœ‰å†›é˜Ÿçš„åˆä½œ(ç¬¬ä¸€æ¬¡æ²¡æœ‰) æ²¡æœ‰å…±åŒçº²é¢†(ç¬¬ä¸€æ¬¡åˆä½œæœ‰å…±åŒçº²é¢†ï¼šæ–°ä¸‰æ°‘ä¸»ä¹‰) æˆ˜ç•¥é˜²å¾¡é˜¶æ®µå’Œç›¸æŒé˜¶æ®µçš„æ­£é¢æˆ˜åœºå¹¿å·ã€æ­¦æ±‰å¤±å®ˆï¼Œæ ‡å¿—ç€è¿›å…¥äº†æˆ˜ç•¥ç›¸æŒé˜¶æ®µ æˆ˜ç•¥é˜²å¾¡(æ•Œè¿›æˆ‘é€€) æˆ˜ç•¥ç›¸æŒ(é€€æ— å¯é€€) æˆ˜ç•¥åæ”»(ä¼°è®¡å°±é‚£ä¹ˆ) æ­£é¢æˆ˜åœºï¼šå°å„¿åº„æˆ˜å½¹å¤§æ·ï¼Œå…¶ä»–å…¨éƒ¨éƒ½æ˜¯å¤±è´¥ å®¢è§‚åŸå› ï¼šæ•Œæˆ‘åŠ›é‡æ‚¬æ®Š ä¸»è§‚åŸå› ï¼šå›½æ°‘å…šæˆ˜ç•¥æŒ‡å¯¼æ–¹é’ˆçš„å¤±è¯¯ å®è¡Œç‰‡é¢æŠ—æˆ˜ ä¸æ•¢æ”¾æ‰‹å‘åŠ¨ç¾¤ä¼—ï¼Œåªå¯„å­˜ä¸æ­£è§„å†› æ—¥æœ¬å¯¹å›½æ°‘å…šï¼šæ”¿æ²»è¯±é™ä¸ºä¸»ï¼Œå†›äº‹æ‰“å‡»ä¸ºè¾… å›½æ°‘å…šå¯¹ä¸­å›½å…±äº§å…šæ€åº¦ï¼šé˜²å…±ã€åå…± å…¨é¢æŠ—æˆ˜çš„è·¯çº¿å’ŒæŒä¹…æˆ˜çš„æ–¹é’ˆ å®è¡Œå…¨é¢æŠ—æˆ˜(æ´›å·ä¼šè®®) äººæ°‘æˆ˜äº‰è·¯çº¿ï¼Œå‘åŠ¨äººæ°‘ç¾¤ä¼— å¿…é¡»åšæŒæ— äº§é˜¶çº§çš„é¢†å¯¼æƒ é‡‡å–æŒä¹…æˆ˜çš„æˆ˜ç•¥æ–¹é’ˆ(ã€Šè®ºæŒä¹…æˆ˜ã€‹) æ—¥æœ¬æ˜¯å¼ºå›½ï¼Œä¸­å›½æ˜¯å¼±å›½ï¼Œåªèƒ½æŒä¹…æˆ˜ æ—¥æœ¬æ˜¯å°å›½ï¼Œå‘åŠ¨æˆ˜äº‰ï¼Œå›½é™…ä¸Šå¤±é“å¯¡åŠ©ï¼Œä¸­å›½æ˜¯å¤§å›½ï¼Œè¿›è¡Œåä¾µç•¥æˆ˜äº‰ï¼Œå›½é™…ä¸Šå¾—é“å¤šåŠ© æ•Œåæˆ˜åœº å¹³å‹å…³å¤§æ·æ˜¯ä¸­å›½å†›é˜Ÿå–å¾—çš„ç¬¬ä¸€æ¬¡é‡å¤§èƒœåˆ©ï¼Œç²‰ç¢äº†æ—¥å†›ä¸å¯æˆ˜èƒœçš„ç¥è¯ æ¸¸å‡»æˆ˜è¢«æåˆ°äº†æˆ˜ç•¥çš„åœ°ä½ï¼Œå…·æœ‰å…¨å±€æ€§çš„æ„ä¹‰ åœ¨æˆ˜ç•¥é˜²å¾¡é˜¶æ®µï¼Œæ­£é¢æˆ˜åœºæ˜¯ä¸»è¦çš„ åœ¨æˆ˜ç•¥ç›¸æŒé˜¶æ®µï¼Œæ•Œåæ¸¸å‡»æˆ˜æˆä¸ºä¸»è¦çš„æŠ—æ—¥ä½œæˆ˜æ–¹å¼ æ¸¸å‡»æˆ˜ä¸ºäººæ°‘å†›é˜Ÿè¿›è¡Œæˆ˜ç•¥åæ”»å‡†å¤‡äº†æ¡ä»¶ åšæŒæŠ—æˆ˜ã€å›¢ç»“ã€è¿›æ­¥çš„æ–¹é’ˆ ç»Ÿä¸€æˆ˜çº¿ä¸­çš„ç‹¬ç«‹è‡ªä¸»åŸåˆ™(é¢†å¯¼æƒ) åšæŒæŠ—æˆ˜ã€å›¢ç»“ã€è¿›æ­¥ å·©å›ºæŠ—æ—¥æ°‘æ—ç»Ÿä¸€æˆ˜çº¿çš„ç­–ç•¥æ€»æ–¹é’ˆ å‘å±•è¿›æ­¥åŠ¿åŠ›ï¼Œäº‰å–ä¸­é—´åŠ¿åŠ›ï¼Œå­¤ç«‹é¡½å›ºåŠ¿åŠ› è¿›æ­¥åŠ¿åŠ›ï¼šå·¥å†œå°èµ„ ä¸­é—´åŠ¿åŠ›ï¼šæ°‘èµ„ï¼Œæ¡ä»¶ï¼š ä¸­å›½å…±äº§å…šæœ‰å……è¶³çš„åŠ›é‡ å°Šé‡å®ƒä»¬çš„åˆ©ç›Š åŒé¡½å›ºåŠ¿åŠ›æ–—äº‰ï¼Œå¹¶èƒ½å–å¾—èƒœåˆ© é¡½å›ºåŠ¿åŠ›ï¼šå¤§åœ°ä¸»ã€å¤§èµ„äº§é˜¶çº§çš„æŠ—æ—¥æ´¾(è’‹ä»‹çŸ³çš„å›½æ°‘å…š)ï¼ŒåŸåˆ™ï¼šæœ‰ç†ã€æœ‰åˆ©ã€æœ‰èŠ‚ æŠ—æ—¥æ°‘ä¸»æ ¹æ®åœ°å»ºè®¾ æ”¿æ²»ï¼šä¸‰ä¸‰åˆ¶çš„æ°‘ä¸»æ”¿æƒå»ºè®¾ å…±äº§å…š1/3ï¼Œéå…šçš„å·¦æ´¾è¿›æ­¥åˆ†å­å’Œä¸å·¦ä¸å³çš„ä¸­é—´æ´¾å„å 1/3 ç»æµï¼šå‡ç§Ÿå‡æ¯ï¼Œå‘å±•ç”Ÿäº§ åœ°ä¸»è¦å‡ç§Ÿå‡æ¯æ”¹å–„å†œæ°‘ç”Ÿæ´» å†œæ°‘è¦äº¤ç§Ÿäº¤æ¯ç…§é¡¾åœ°ä¸»å¯Œå†œçš„åˆ©ç›Š æ–‡åŒ– æŠ—æ—¥å†›äº‹æ”¿æ²»å¤§å­¦ã€é²è¿…è‰ºæœ¯å­¦é™¢ã€å»¶å®‰è‡ªç„¶ç§‘å­¦é™¢ å¤§åæ–¹çš„æŠ—æ—¥æ°‘ä¸»è¿åŠ¨å„ç•Œäººå£«è¦æ±‚å›½æ°‘å…šå®è¡ŒæŠ—æˆ˜æ°‘ä¸» å®ªæ”¿è¿åŠ¨ ã€Šå…‰æ˜æŠ¥ã€‹ æå‡ºåºŸé™¤å›½æ°‘å…šä¸€å…šä¸“æ”¿ æ–°æ°‘ä¸»ä¸»ä¹‰ç†è®ºçš„ç³»ç»Ÿé˜æ˜ä¸­å…±å…­å±Šå…­ä¸­å…¨ä¼šï¼Œæ¯›æ³½ä¸œæ˜ç¡®æå‡ºâ€œé©¬å…‹æ€ä¸»ä¹‰ä¸­å›½åŒ–â€è¿™ä¸ªå‘½é¢˜ï¼Œæ¯›æ³½ä¸œæ’°å†™äº†ã€Š&lt;å…±äº§å…šäºº&gt;å‘åˆŠè¯ã€‹ã€Šä¸­å›½é©å‘½å’Œä¸­å›½å…±äº§å…šã€‹ã€Šæ–°æ°‘ä¸»ä¸»ä¹‰ç†è®ºã€‹ æ­ç¤ºäº†ä¸¤åŠçš„å›½æƒ…ï¼Œè¿‘ä»£ä¸­å›½ç¤¾ä¼šçš„ä¸»è¦çŸ›ç›¾å’Œä¸­å›½é©å‘½å‘ç”Ÿå’Œå‘å±•çš„åŸå›  ä¸­å›½é©å‘½è¿åŠ¨ï¼šæ°‘ä¸»ä¸»ä¹‰é©å‘½å’Œç¤¾ä¼šä¸»ä¹‰é©å‘½ä¸¤ä¸ªé˜¶æ®µåœ¨å†…çš„å…¨éƒ¨é©å‘½è¿åŠ¨ é˜æ˜äº†ä¸­å›½å…±äº§å…šåœ¨æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½é˜¶æ®µçš„åŸºæœ¬çº²é¢† æ€»ç»“äº†ä¸­å›½å…±äº§å…šä»¥æ¥çš„å†å²ç»éªŒï¼ŒæŒ‡å‡ºç»Ÿä¸€æˆ˜çº¿ã€æ­¦è£…æ–—äº‰ã€å…šçš„å»ºè®¾æ˜¯ä¸‰å¤§æ³•å® æ–°æ°‘ä¸»ä¸»ä¹‰ç†è®ºçš„ç³»ç»Ÿé˜æ˜ï¼Œæ ‡å¿—ç€æ¯›æ³½ä¸œæ€æƒ³è¾¾åˆ°æˆç†Ÿ å»¶å®‰æ•´é£è§£å†³æ€æƒ³é—®é¢˜ï¼š ã€Šæ”¹é€ æˆ‘ä»¬çš„å­¦ä¹ ã€‹ï¼šåå¯¹ä¸»è§‚ä¸»ä¹‰æ•´å­¦é£(å…šçš„é«˜çº§å¹²éƒ¨) ã€Šæ•´é¡¿å…šçš„ä½œé£ã€‹ï¼šåå¯¹å®—æ´¾ä¸»ä¹‰æ•´å…šé£(å…¨å…šå…šå‘˜) ã€Šåå¯¹å…šå…«è‚¡ã€‹ï¼šåå¯¹å…šå…«è‚¡æ•´æ–‡é£(å…¨å…šå…šå‘˜) å­¦é£é—®é¢˜ï¼š æ˜¯æ€æƒ³æ–¹æ³•é—®é¢˜ æ˜¯å¯¹å¾…é©¬åˆ—ä¸»ä¹‰çš„æ€åº¦é—®é¢˜ æ˜¯å·¥ä½œæ€åº¦é—®é¢˜ ç»“è®ºï¼šå­¦é£é—®é¢˜æ˜¯ç¬¬ä¸€ä¸ªé‡è¦çš„é—®é¢˜ ä¸»è§‚ä¸»ä¹‰ï¼š å®è´¨æ˜¯ç†è®ºè„±ç¦»å®é™…ï¼Œæ˜¯å®é™…å·¥ä½œä¸­çš„å”¯å¿ƒä¸»ä¹‰ è¡¨ç°å½¢å¼æ˜¯æ•™æ¡ä¸»ä¹‰å’Œç»éªŒä¸»ä¹‰ï¼Œå°¤å…¶æ˜¯æ•™æ¡ä¸»ä¹‰æ˜¯æ•´é£çš„é‡ç‚¹ æ•´é£è¿åŠ¨æ˜¯ä¸€åœºä¼Ÿå¤§çš„æ€æƒ³è§£æ”¾è¿åŠ¨ã€‚ä¸€åˆ‡ä»å®é™…å‡ºå‘ã€ç†è®ºè”ç³»å®é™…ã€å®äº‹æ±‚æ˜¯çš„é©¬å…‹æ€ä¸»ä¹‰æ€æƒ³è·¯çº¿ï¼Œåœ¨å…¨å…šèŒƒå›´ç¡®ç«‹èµ·æ¥ ä¸­å…±ä¸ƒå¤§å®Œæˆäº†é©¬å…‹æ€ä¸»ä¹‰ä¸­å›½åŒ–çš„ç¬¬ä¸€æ¬¡å†å²æ€§é£è·ƒï¼Œå…¶æˆæœå°±æ˜¯æ¯›æ³½ä¸œæ€æƒ³ã€‚(ç¬¬ä¸€æ¬¡ç»“åˆçš„å¼€å§‹ï¼šå…­å±Šå…­ä¸­å…¨ä¼šã€Šè®ºæ–°é˜¶æ®µã€‹) æŠ—æ—¥æˆ˜äº‰çš„èƒœåˆ© 9æœˆ3æ—¥ï¼Œæˆä¸ºä¸­å›½äººæ°‘æŠ—æ—¥æˆ˜äº‰èƒœåˆ©çºªå¿µæ—¥ æ³¢èŒ¨å¦å…¬å‘Šï¼Œå°æ¹¾ã€æ¾æ¹–åˆ—å²›ç”±ä¸­å›½æ”¶å›ï¼Œè¿™æ˜¯æŠ—æ—¥æˆ˜äº‰å–å¾—å®Œå…¨èƒœåˆ©çš„é‡è¦æ ‡å¿— åœ¨åæ³•è¥¿æ–¯æˆ˜äº‰ä¸­çš„åœ°ä½ æ˜¯ä¸–ç•Œåæ³•è¥¿æ–¯æˆ˜äº‰çš„é‡è¦ç»„æˆï¼Œæ˜¯ä¸œæ–¹ä¸»æˆ˜åœº ä¸–ç•Œåæ³•è¥¿æ–¯åŠ›é‡å¯¹ä¸­å›½çš„æ´åŠ© æŠ—æ—¥æˆ˜äº‰èƒœåˆ©çš„æ„ä¹‰ã€åŸå› ä¸»è¦åŸå› ï¼š ä»¥çˆ±å›½ä¸»ä¹‰ä¸ºæ ¸å¿ƒçš„æ°‘æ—ç²¾ç¥æ˜¯å†³å®šå› ç´  ä¸­å›½å…±äº§å…šçš„ä¸­æµç ¥æŸ±ä½œç”¨æ˜¯å…³é”® å…¨æ°‘æ—æŠ—æˆ˜æ˜¯é‡è¦æ³•å® ä¸–ç•Œäººæ°‘ â€¦ ä¸ºä»€ä¹ˆä¸­å›½å…±äº§å…šæ˜¯æŠ—æˆ˜ä¸­çš„ä¸­æµç ¥æŸ±ï¼š å»ºç«‹æŠ—æ—¥æ°‘æ—ç»Ÿä¸€æˆ˜çº¿ åšæŒå…¨é¢æŠ—æˆ˜è·¯çº¿ åšæŒæŠ—æˆ˜ï¼Œåå¯¹æŠ•é™ â€¦ æ„ä¹‰ï¼š å½»åº•ç²‰ç¢äº†æ—¥æœ¬å†›å›½ä¸»ä¹‰æ®–æ°‘å¥´å½¹ä¸­å›½çš„å›¾è°‹ ä¿ƒè¿›äº†ä¸­åæ°‘æ—çš„å¤§å›¢ç»“ å¯¹ä¸–ç•Œåæ³•è¥¿æ–¯æˆ˜äº‰çš„èƒœåˆ©ã€ç»´æŠ¤ä¸–ç•Œå’Œå¹³çš„äº‹ä¸šäº§ç”Ÿäº†å·¨å¤§å½±å“ å¼€è¾Ÿäº†ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„å…‰æ˜å‰æ™¯ è§£æ”¾æˆ˜äº‰ä¸å»ºç«‹æ–°ä¸­å›½æŠ—æˆ˜èƒœåˆ©åå›½é™…å›½å†…å½¢åŠ¿ ç¾è‹äº‰éœ¸ ç¾å›½å–ä»£äº†æ—¥æœ¬çš„åœ°ä½ï¼Œé‡‡å–æ‰¶è’‹åå…±çš„æ”¿ç­– äº‰å–å’Œå¹³æ°‘ä¸»çš„æ–—äº‰ é‡åº†è°ˆåˆ¤ ç­¾ç½²äº†åŒååå®šï¼Œç¡®è®¤å’Œå¹³å»ºå›½çš„åŸºæœ¬æ–¹é’ˆ æ”¿åä¼šè®®åœ¨é‡åº†å¼€å¹• å‡ºå¸­ä¼šè®®çš„æœ‰å›½æ°‘å…šï¼Œå…±äº§å…šï¼Œæ°‘ä¸»å…šæ´¾ äº”é¡¹åè®® åœŸåœ°é©å‘½ä¸å†œæ°‘çš„å¹¿æ³›å‘åŠ¨ã€Šäº”å››æŒ‡ç¤ºã€‹ ä½¿åœ°ä¸»é˜¶çº§å‰¥å‰Šå†œæ°‘è€Œå æœ‰çš„åœŸåœ°è½¬ç§»åˆ°å†œæ°‘æ‰‹ä¸­ ç”¨ä¸€åˆ‡æ–¹æ³•å¸æ”¶ä¸­å†œå‚åŠ è¿åŠ¨ï¼Œç»ä¸å¯ä¾µçŠ¯ä¸­å†œåœŸåœ° ä¸€èˆ¬ä¸å˜åŠ¨å¯Œå†œåœŸåœ°(å¾æ”¶å¯Œå†œå¤šä½™åœŸåœ°)ï¼Œå¯¹å¯Œå†œå’Œåœ°ä¸»æœ‰æ‰€åŒºåˆ« ä¸å¯å°†å†œæ‘ä¸­åå¯¹å°å»ºåœ°ä¸»é˜¶çº§çš„æ–¹æ³•è¿ç”¨ä¸åŸå¸‚ä¸­åå¯¹å·¥å•†ä¸šèµ„äº§é˜¶çº§çš„æ–—äº‰ æœ‰è€•è€…æœ‰å…¶ç”°ï¼Œä¸å†æ˜¯å‰Šå¼±å°å»ºæ€§å‰¥å‰ŠåœŸåœ°åˆ¶åº¦ï¼Œè€Œæ˜¯åºŸé™¤ã€‚ ç¬¬äºŒæ¡æˆ˜çº¿çš„å½¢æˆåœ¨å›½ç»ŸåŒºï¼Œå­¦ç”Ÿè¿åŠ¨ç­‰ç­‰ä¹Ÿå‘å±•èµ·æ¥äº†ï¼ŒåŸå›  å®˜å‘˜è…è´¥ åäººæ°‘å†…æˆ˜ å¾æ”¶è‹›ç¨ æ¶æ€§é€šè´§è†¨èƒ€ï¼Œç‰©ä»·é£æ¶¨ æ°‘æ—å·¥å•†ä¸šèµ°å‘ç ´äº§ å†œæ‘ç»æµæ€¥å‰§è¡°å¼± ä¸­å›½å…±äº§å…šä¸æ°‘ä¸»å…šæ´¾çš„åˆä½œæ°‘ä¸»å…šæ´¾ï¼š æ°‘æ—èµ„äº§é˜¶çº§ åŸå¸‚å°èµ„äº§é˜¶çº§ çŸ¥è¯†åˆ†å­å’Œå…¶ä»–çˆ±å›½åˆ†å­ æ°‘ä¸»å…šæ´¾å‚æ”¿ï¼Œåœ¨ä¸­å…±çš„é¢†å¯¼äº†ï¼Œå’Œå…±äº§å…šä¸€é“æ‹…ä»»ç®¡ç†å›½å®¶å’Œå»ºè®¾å›½å®¶çš„é‡ä»» ç¬¬ä¸‰æ¡é“è·¯çš„å¹»ç­æ°‘æ—å…šæ´¾æå‡ºèµ°èµ„æœ¬ä¸»ä¹‰é“è·¯ï¼š åœ¨æ”¿æ²»ä¸Šï¼Œå®ç°è‹±ç¾å¼æ°‘ä¸»æ”¿æ²»ï¼Œä½†ä¸å‡†åœ°ä¸»å®˜åƒšèµ„æœ¬å®¶æ“çºµ åœ¨ç»æµä¸Šï¼Œåº”å½“å®è¡Œæ”¹è‰¯çš„èµ„æœ¬ä¸»ä¹‰ï¼Œä½†ä¸å®¹å®˜åƒšèµ„æœ¬æ¨ªè¡Œ èµ„äº§é˜¶çº§å»ºå›½çš„æ–¹æ¡ˆåœ¨ä¸­å›½è¡Œä¸é€šï¼š æ°‘èµ„æ²¡æœ‰å‹‡æ°”å»é¢†å¯¼äººæ°‘è¿›è¡Œåå¸åå°çš„é©å‘½æ–—äº‰(èµ„äº§é˜¶çº§ä¸¤é¢æ€§ï¼šé©å‘½æ€§å’Œè½¯å¼±æ€§) å¸å›½ä¸»ä¹‰ä¸ä¼šä½¿ä¸­å›½æˆä¸ºä¸€ä¸ªç‹¬ç«‹ã€å¯Œå¼ºçš„èµ„æœ¬ä¸»ä¹‰å›½å®¶ ä»ä¸­å›½é©å‘½å½¢åŠ¿æ¥çœ‹ï¼Œå›½æ°‘å…šå½“å±€ä¸å…è®¸ä»»ä½•é˜»æ­¢å…¶ä¸€å…šä¸“æ”¿çš„åŠ›é‡å­˜åœ¨ äººæ°‘æ”¿åä¸ã€Šå…±åŒçº²é¢†ã€‹ä¸ƒå±ŠäºŒä¸­å…¨ä¼šï¼š æå‡ºè¿…é€Ÿå¤ºå–å…¨å›½èƒœåˆ©çš„æ–¹é’ˆ å·¥ä½œé‡å¿ƒå¿…é¡»ç”±ä¹¡æ‘è½¬ç§»åˆ°åŸå¸‚ ç”±å†œä¸šå›½è½¬å˜ä¸ºå·¥ä¸šå›½ã€ç”±æ–°æ°‘ä¸»ä¸»ä¹‰ç¤¾ä¼šè½¬å˜ä¸ºç¤¾ä¼šä¸»ä¹‰ç¤¾ä¼š(åèµ„) ä¸¤ä¸ªåŠ¡å¿…ï¼šä¸éª„ä¸èºï¼Œè‰°è‹¦å¥‹æ–— ã€Šè®ºäººæ°‘æ°‘ä¸»ä¸“æ”¿ã€‹ï¼š å›¢ç»“æ°‘èµ„ æ–°æ”¿åï¼š ã€Šä¸­å›½äººæ°‘æ”¿æ²»åå•†åä¼šç»„ç»‡æ³•ã€‹ ã€Šä¸­åäººæ°‘å…±å’Œå›½ä¸­å¤®äººæ°‘æ”¿åºœç»„ç»‡æ³•ã€‹ ä¸­å›½äººæ°‘æ”¿æ²»åå•†ä¼šè®®å…±åŒçº²é¢† ä¸­å›½é©å‘½èƒœåˆ©çš„åŸå› ï¼š ä¸­å›½é©å‘½çš„å‘ç”Ÿï¼Œæœ‰ç€æ·±åˆ»çš„ç¤¾ä¼šæ ¹æºå’Œé›„åšçš„ç¾¤ä¼—åŸºç¡€ ä¹‹æ‰€ä»¥èƒ½èƒœåˆ©ï¼Œæœ‰å…±äº§å…šçš„é¢†å¯¼ å›½é™…æ— äº§é˜¶çº§çš„æ”¯æŒ ç»éªŒ(ä¸‰å¤§æ³•å®)ï¼š ç»Ÿä¸€æˆ˜çº¿ æ­¦è£…æ–—äº‰ å…šçš„å»ºè®¾ å®ç°é¢†å¯¼æƒçš„æ¡ä»¶ï¼š å¯¹æ•Œäººä½œåšå†³æ–—äº‰å¹¶å–å¾—èƒœåˆ© å¯¹è¢«é¢†å¯¼è€…ç»™äºˆç‰©è´¨ç¦åˆ©ï¼Œè‡³å°‘ä¸æŸå®³å…¶åˆ©ç›Š å¯¹å¤ºå–é¢†å¯¼æƒçš„èµ„äº§é˜¶çº§é‡‡å–åˆè”åˆã€åˆæ–—äº‰çš„æ”¿ç­– æ–°ä¸­å›½çš„æˆç«‹ï¼šåå¸åå°çš„ä»»åŠ¡åŸºæœ¬å®Œæˆ ç¤¾ä¼šä¸»ä¹‰æ”¹é€ ä¸­åäººæ°‘å…±å’Œå›½çš„æˆç«‹åŠå…¶ä¼Ÿå¤§æ„ä¹‰ åå¸æˆåŠŸäº† åå°æˆåŠŸäº† å†›é˜€å‰²æ®ç»“æŸ æ”¹å˜äº†ä¸­å›½ç¤¾ä¼šçš„å‘å±•æ–¹å‘ ä¸­å›½å…±äº§å…šç§°ä¸ºäº†æ‰§æ”¿å…š ä¸­åäººæ°‘å…±å’Œå›½çš„æˆç«‹ï¼šæ ‡å¿—ç€æ–°æ°‘ä¸»ä¸»ä¹‰èµ·å¾—äº†åŸºæœ¬çš„èƒœåˆ©ï¼Œä¸¤åŠçš„å›½æƒ…æ”¹å˜ï¼Œè€Œæ˜¯æ–°æ°‘ä¸»ä¸»ä¹‰ç¤¾ä¼šçš„å…¨å›½èŒƒå›´å†…å»ºç«‹ å®Œæˆè¿‘ä»£ä»¥æ¥çš„ç¬¬ä¸€é¡¹å†å²ä»»åŠ¡(æ°‘æ—ç‹¬ç«‹å’Œäººæ°‘è§£æ”¾)ï¼Œä¸ºå®ç°ç¬¬äºŒé¡¹å†å²ä»»åŠ¡åˆ›é€ äº†å‰æ æ ‡å¿—ç€æ–°æ°‘ä¸»ä¸»ä¹‰é©å‘½åŸºæœ¬ç»“æŸï¼Œæ ‡å¿—ç€ç¤¾ä¼šä¸»ä¹‰é©å‘½åˆšåˆšå¼€å§‹ æ–°æ°‘ä¸»ä¸»ä¹‰ç¤¾ä¼š æ”¿æ²»ï¼šå„é©å‘½é˜¶çº§è”åˆä¸“æ”¿ ç»æµï¼šäº”ç§ç»æµæˆåˆ†å¹¶å­˜ å›½è¥ç»æµ(ç¤¾ä¼šä¸»ä¹‰æ€§è´¨ â€“&gt; å·¥äºº) åˆä½œç¤¾ç»æµ(è¿‡æ¸¡ï¼Œå¾ˆå¿«æ¶ˆå¤±) ä¸ªä½“ç»æµ(å†œï¼Œå°èµ„) ç§äººèµ„æœ¬ä¸»ä¹‰ç»æµ(èµ„æœ¬ä¸»ä¹‰æ€§è´¨ â€“&gt; æ°‘èµ„) å›½å®¶èµ„æœ¬æ³¨æ„ç»æµ(è¿‡æ¸¡) æ–‡åŒ–ï¼šé©¬å…‹æ€ çŸ›ç›¾ï¼šæ— äº§é˜¶çº§ä¸èµ„äº§é˜¶çº§çš„çŸ›ç›¾ï¼Œç¤¾ä¼šä¸»ä¹‰ä¸èµ„æœ¬ä¸»ä¹‰çš„çŸ›ç›¾ ä¸ƒå±ŠäºŒä¸­å…¨ä¼šæå‡ºä¸­å›½è¿˜å­˜åœ¨ç€ä¸¤ç§åŸºæœ¬çš„çŸ›ç›¾ å›½é™…ä¸Šæ–°ä¸­å›½åŒå¸å›½ä¸»ä¹‰çš„çŸ›ç›¾(å°é”ä¸­å›½) å›½å†…æ˜¯å·¥äººé˜¶çº§å’Œèµ„äº§é˜¶çº§çš„åè¹² å®Œæˆæ°‘ä¸»é©å‘½çš„é—ç•™ä»»åŠ¡ï¼Œæ¢å¤å›½æ°‘ç»æµ 1949-1953ï¼š å®Œæˆæ°‘ä¸»é©å‘½çš„é—ç•™ä»»åŠ¡(è¥¿è—ã€æµ·å—å²›. . .è¿˜æ²¡æœ‰è§£æ”¾) æ¢å¤å›½æ°‘ç»æµ 1953-1956ï¼š å®ç°ç¤¾ä¼šä¸»ä¹‰çš„å·¥ä¸šåŒ– ç¤¾ä¼šä¸»ä¹‰æ”¹é€  æ–°ä¸­å›½æˆç«‹åˆæœŸé¢ä¸´çš„é—®é¢˜ï¼š è§£æ”¾å…¨ä¸­å›½çš„ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ ç»æµååˆ†è½å ä»¥ç¾å›½ä¸ºé¦–çš„è¥¿æ–¹èµ„æœ¬ä¸»ä¹‰é˜µè¥è¯•å›¾æå®æ–°ä¸­å›½ ä¸­å›½å…±äº§å…šèƒ½ä¸èƒ½ç»å—èµ·è€ƒç ” é‡ç‚¹å·¥ä½œï¼š å®Œæˆæ°‘ä¸»é©å‘½çš„é—ç•™ä»»åŠ¡ åœ¨æ–°è§£æ”¾åŒºè¿›è¡ŒåœŸæ”¹ï¼ŒåºŸé™¤åœ°ä¸»é˜¶çº§å‰¥å‰ŠåœŸåœ°æ‰€æœ‰åˆ¶ï¼Œå®è¡Œå†œæ°‘åœŸåœ°æ‰€æœ‰åˆ¶ï¼Œä¿å­˜å¯Œå†œç»æµ å…¬å¸ƒã€Šä¸­åäººæ°‘å…±å’Œå›½å©šå§»æ³•ã€‹ï¼ŒåºŸé™¤å°å»ºå©šå§»åˆ¶åº¦ æ¢å¤å’Œå‘å±•å›½æ°‘ç»æµ ç»´æŠ¤å›½å®¶ä¸»æƒå’Œå®‰å…¨(æŠ—ç¾é™¢è‰) å¦èµ·ç‚‰ç¶ æ‰“æ‰«å¹²å‡€å±‹å­å†è¯·å®¢(ä¸æ‰¿è®¤ä¹‹å‰ç­¾è®¢çš„è·³è·ƒ) ä¸€è¾¹å€’(å¯¼å‘è‹è”ï¼Œç¤¾ä¼šä¸»ä¹‰é˜µè¥) åŠ å¼ºå…šçš„å»ºè®¾ ä¸‰åï¼šåè´ªæ±¡ã€åæµªè´¹ã€åå®˜åƒšä¸»ä¹‰ äº”åï¼šæ‰“å‡»ä¸æ³•èµ„æœ¬å®¶è¡Œè´¿ã€å·ç¨æ¼ç¨ã€ç›—çªƒå›½å®¶è´¢äº§ã€å·å·¥å‡æ–™ã€ç›—çªƒç»æµæƒ…æŠ¥ å¼€å§‹å‘ç¤¾ä¼šä¸»ä¹‰è¿‡æ¸¡ æ²¡æ”¶å®˜åƒšèµ„æœ¬ å…·æœ‰åŒé‡æ€§è´¨ åå¸å›½ä¸»ä¹‰çš„é™„å±ä¸­å›½çš„ä¹°åŠèµ„äº§é˜¶çº§ï¼Œå…·æœ‰æ°‘ä¸»é©å‘½çš„æ€§è´¨ åå¤§èµ„äº§é˜¶çº§ï¼Œå…·æœ‰ç¤¾ä¼šä¸»ä¹‰é©å‘½çš„æ€§è´¨ å°†èµ„æœ¬ä¸»ä¹‰çº³å…¥å›½å®¶èµ„æœ¬ä¸»ä¹‰è½¨é“ å¼•å¯¼ä¸ªä½“å†œæ°‘åœ¨åœŸåœ°æ”¹é©åé€æ­¥èµ°ä¸Šäº’åŠ©åˆä½œçš„é“è·¯ å·¥ä¸šåŒ–çš„ä»»åŠ¡å’Œå‘å±•é“è·¯å»ºå›½ä¹‹åˆï¼šå…ˆåŒ–åæ”¹ â€“&gt; åæ¥ï¼šè¾¹åŒ–è¾¹æ”¹ï¼ŒåŸå› ï¼š ä¸»è¦çŸ›ç›¾å‘ç”Ÿäº†æ·±åˆ»çš„å˜åŒ– ç»æµæˆåˆ†å‘ç”Ÿäº†é‡è¦å˜åŒ– è¿‡æ¸¡æ—¶æœŸçš„æ€»è·¯çº¿ï¼šä¸€åŒ–ä¸‰æ”¹ã€‚ å®è¡Œç¤¾ä¼šä¸»ä¹‰æ”¹é€ çš„å¿…è¦æ€§å’Œæ¡ä»¶ä¹‹æ‰€ä»¥è¿›è¡Œç¤¾ä¼šä¸»ä¹‰æ”¹é€ ï¼Œæ˜¯å› ä¸ºå…·å¤‡äº†ä»¥ä¸‹æ¡ä»¶ï¼š å›½è¥ç»æµç›¸å¯¹æ¯”è¾ƒå¼ºå¤§ èµ„æœ¬ä¸»ä¹‰ç»æµå¼±å°ï¼Œä¸å¯èƒ½æˆä¸ºä¸­å›½å·¥ä¸šèµ·é£çš„åŸºç¡€ è¿›è¡Œç¤¾ä¼šä¸»ä¹‰æ”¹é€ ï¼Œæ˜¯ä¿è¯å·¥ä¸šå‘å±•ã€å®ç°å›½å®¶å·¥ä¸šåŒ–çš„ä¸€ä¸ªå¿…è¦æ¡ä»¶ å›½é™…ç¯å¢ƒä¹Ÿä¿ƒä½¿ä¸­å›½é€‰æ‹©ç¤¾ä¼šä¸»ä¹‰(èƒŒé è‹è”) ä¸€äº”æœŸé—´ï¼š éå±±ã€åŒ…å¤´ã€æ­¦æ±‰ä¸‰å¤§é’¢é“åŸºåœ° æ­¦æ±‰é•¿æ±Ÿå¤§æ¡¥é€šè½¦ é’è—ã€åº·è—ã€æ–°è—å…¬è·¯å»ºæˆé€šè½¦ å†œä¸šã€æ‰‹å·¥ä¸šåˆä½œåŒ–è¿åŠ¨çš„å‘å±•å†œä¸šï¼š äº’åŠ©ç»„(ç¤¾ä¼šä¸»ä¹‰èŒèŠ½) åˆçº§ç¤¾(åŠç¤¾ä¼šä¸»ä¹‰æ€§è´¨) é«˜çº§ç¤¾(ç¤¾ä¼šä¸»ä¹‰æ€§è´¨) å…ˆåˆä½œåŒ–ã€åæœºæ¢°åŒ–ã€‚ åšæŒè‡ªæ„¿å’Œäº’åˆ©çš„åŸåˆ™ï¼Œé‡‡å–å…¸å‹ç¤ºèŒƒã€é€æ­¥æ¨å¹¿çš„æ–¹æ³•ï¼Œå‘å±•ä¸€æ‰¹ï¼Œå·©å›ºä¸€æ‰¹ åœ¨å®ç°å†œä¸šåˆä½œåŒ–ä»¥åï¼Œå›½å®¶ç”¨å…ˆè¿›çš„æŠ€æœ¯å’Œè£…å¤‡å‘å±•å†œä¸šç»æµ 1956å¹´åº•ï¼Œå†œä¸šæ”¹é€ å®Œæˆ æ‰‹å·¥ä¸šï¼š åˆä½œå°ç»„(ç¤¾ä¼šä¸»ä¹‰èŒèŠ½) ä¾›é”€åˆä½œç¤¾(åŠç¤¾ä¼šä¸»ä¹‰æ€§è´¨) ç”Ÿäº§åˆä½œç¤¾(ç¤¾ä¼šä¸»ä¹‰æ€§è´¨) 1956å¹´åº•ï¼Œæ‰‹å·¥ä¸šæ”¹é€ å®Œæˆ å¯¹èµ„æœ¬ä¸»ä¹‰å·¥å•†ä¸šèµä¹°æ”¿ç­–çš„å®æ–½ èµä¹°æ”¿ç­– åˆçº§å½¢å¼ï¼šåŠ å·¥è®¢è´§ã€ç»Ÿé”€åŒ…é”€ã€ç»é”€ä»£é”€(ç¤¾ä¼šä¸»ä¹‰èŒèŠ½) é«˜çº§å½¢å¼ï¼šå…¬ç§åˆè¥ï¼Œä¼ä¸šåˆ©æ¶¦é‡‡ç”¨â€œå››é©¬åˆ†è‚¥â€ èµ·åˆï¼Œä¸ªåˆ«ä¼ä¸šå…¬ç§åˆè¥(åŠç¤¾ä¼šä¸»ä¹‰æ€§è´¨) 1956å¹´åº•ï¼Œå…¨è¡Œä¸šå…¬ç§åˆè¥(ç¤¾ä¼šä¸»ä¹‰æ€§è´¨) ç‰¹ç‚¹ï¼š èµä¹°ï¼Œæœ‰å¿è€Œä¸æ˜¯æ— å¿ æ”¹é€ çš„åŒæ—¶ï¼Œç»™äºˆå·¥ä½œå®‰æ’ ä¸å‰¥å¤ºèµ„äº§é˜¶çº§çš„é€‰ä¸¾æƒ ç¤¾ä¼šä¸»ä¹‰å»ºè®¾æˆå°±ä¸æ”¹é©å¼€æ”¾å…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰çš„å¼€ç«¯é¢ä¸´ä¸¤å¤§é—®é¢˜ï¼š å¦‚ä½•å¤„ç†ç¤¾ä¼šä¸»ä¹‰æ¡ä»¶ä¸‹çš„é˜¶çº§æ–—äº‰é—®é¢˜ å¦‚ä½•å¤„ç†å¥½ç¤¾ä¼šä¸»ä¹‰å»ºè®¾ä¸­çš„è§„æ¨¡å’Œé€Ÿåº¦é—®é¢˜ æ¯›æ³½ä¸œæå‡ºç¬¬äºŒæ¬¡é©¬å…‹æ€ä¸»ä¹‰åŒä¸­å›½å®é™…ç»“åˆ(æœªå®Œæˆ) ä¸­å…±å…«å¤§è·¯çº¿çš„åˆ¶å®š ä¸»è¦çŸ›ç›¾ï¼šç»æµæ–‡åŒ–ä¸èƒ½æ»¡è¶³äººæ°‘éœ€è¦ ä¸»è¦ä»»åŠ¡ï¼šé›†ä¸­åŠ›é‡å‘å±•ç¤¾ä¼šç”Ÿäº§åŠ› é™ˆäº‘ä¸‰ä¸ªä¸»ä½“ã€ä¸‰ä¸ªè¡¥å…… å›½è¥ç»æµå’Œé›†ä½“ç»æµæ˜¯ä¸»ä½“ï¼Œä¸€å®šæ•°é‡çš„ä¸ªä½“ç»æµä¸ºè¡¥å…… è®¡åˆ’ç”Ÿäº§æ˜¯ä¸»ä½“ï¼Œä¸€å®šèŒƒå›´çš„è‡ªç”±ç”Ÿäº§ä¸ºè¡¥å…… å›½å®¶å¸‚åœºæ˜¯ä¸»ä½“ï¼Œä¸€å®šçš„è‡ªç”±å¸‚åœºä¸ºè¡¥å…… ä¸­å…±å…«å¤§åï¼Œæ¯›æ³½ä¸œæå‡ºï¼Œå¯ä»¥æ¶ˆç­äº†èµ„äº§ä¸»ä¹‰ï¼Œåˆæèµ„æœ¬ä¸»ä¹‰ï¼Œç§°ä½œâ€œæ–°ç»æµæ”¿ç­–â€ æ¢ç´¢ç¤¾ä¼šä¸»ä¹‰å»ºè®¾é“è·¯çš„åˆæ­¥æˆæœã€Šè®ºåå¤§å…³ç³»ã€‹ åŸºæœ¬æ–¹é’ˆï¼šè°ƒåŠ¨å›½å†…å¤–ä¸€åˆ‡ç§¯æå› ç´ ï¼Œä¸ºç¤¾ä¼šä¸»ä¹‰æœåŠ¡ æ˜¯å¼€å§‹æ¢ç´¢ä¸­å›½è‡ªå·±çš„ç¤¾ä¼šä¸»ä¹‰å»ºè®¾é“è·¯çš„æ ‡å¿— ã€Šå…³äºæ­£ç¡®å¤„ç†äººæ°‘å†…éƒ¨çŸ›ç›¾çš„é—®é¢˜ã€‹ æ­£ç¡®å¤„ç†äººæ°‘å†…éƒ¨çŸ›ç›¾ä½œä¸ºå›½å®¶æ”¿æ²»ç”Ÿæ´»çš„ä¸»ä½“ï¼Œå¦‚ä½•å¤„ç†ï¼š æ”¿æ²»æ€æƒ³ï¼šå›¢ç»“â€“æ‰¹è¯„â€“å›¢ç»“ ç‰©è´¨åˆ†é…ï¼šç»Ÿç­¹å…¼é¡¾ï¼Œé€‚å½“å®‰æ’ ç§‘å­¦æ–‡åŒ–ï¼šç™¾èŠ±é½æ”¾ï¼Œç™¾å®¶äº‰é¸£ å…±äº§å…šå’Œæ°‘ä¸»å…šï¼šé•¿æœŸå…±å­˜ï¼Œäº’ç›¸ç›‘ç£ ç¤¾ä¼šä¸»ä¹‰ç¤¾ä¼šçš„åŸºæœ¬çŸ›ç›¾ ç”Ÿäº§å…³ç³»å’Œç”Ÿäº§åŠ›ä¹‹é—´çš„çŸ›ç›¾ ä¸Šå±‚å»ºç­‘å’Œç»æµåŸºç¡€çš„çŸ›ç›¾ ã€Šä¸€ä¹äº”ä¸ƒå¹´å¤å­£çš„å½¢åŠ¿ã€‹ å…­åˆæ”¿æ²»å±€é¢ï¼šåˆæœ‰é›†ä¸­åˆæœ‰æ°‘ä¸»ï¼Œåˆæœ‰çºªå¾‹åˆæœ‰è‡ªç”±ï¼Œåˆæœ‰æ„å¿—åˆæœ‰ä¸ªäººå¿ƒæƒ…èˆ’ç•…ã€ç”ŸåŠ¨æ´»æ³¼ æ”¹é©å¼€æ”¾ä¸ç°ä»£åŒ–å»ºè®¾æ–°æ—¶æœŸ çœŸç†æ ‡å‡†é—®é¢˜æ˜¯åˆä¸€åœºæ€æƒ³è§£æ”¾è¿åŠ¨ ã€Šè§£æ”¾æ€æƒ³ï¼Œå®äº‹æ±‚æ˜¯ï¼Œå›¢ç»“ä¸€è‡´å‘å‰çœ‹ã€‹ï¼šå¼€åˆ›ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ–°ç†è®ºçš„å®£è¨€ä¹¦ åä¸€å±Šä¸‰ä¸­å…¨ä¼šï¼šè¿›è¡Œæ”¹é©å¼€æ”¾å’Œç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å»ºè®¾çš„å†å²æ–°æ—¶æœŸ å—æ–¹è°ˆè¯ï¼š è®¡åˆ’å’Œå¸‚åœºéƒ½æ˜¯ç»æµæ‰‹æ®µ é˜æ˜äº†ç¤¾ä¼šä¸»ä¹‰çš„æœ¬è´¨ å‘å±•æ‰æ˜¯ç¡¬é“ç† ä¸‰ä¸ªæœ‰åˆ©äº å¼ºè°ƒåŠ å¼ºå…šçš„å»ºè®¾ å…³äºç¤¾ä¼šä¸»ä¹‰åˆçº§é˜¶æ®µçš„é•¿æœŸæ€§å’Œå‰é€” æ”¹é©å¼€æ”¾å‰å’Œæ”¹é©å¼€æ”¾åéƒ½æ˜¯ä¸­å›½å…±äº§å…šé¢†å¯¼äººæ°‘è¿›è¡Œç¤¾ä¼šä¸»ä¹‰å»ºè®¾çš„å®è·µæ¢ç´¢","tags":[{"name":"è€ƒç ”","slug":"è€ƒç ”","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E8%80%83%E7%A0%94/"}]},{"title":"æ€ä¿®","date":"2019-10-21T16:00:00.000Z","path":"/æ€ä¿®/","text":"äººç”Ÿçš„é’æ˜¥ä¹‹é—®æ—¶ä»£æ–°äºº æœ‰å´‡é«˜çš„ç†æƒ³ä¿¡å¿µ æœ‰é«˜å¼ºçš„æœ¬é¢† æœ‰å¤©ä¸‹å…´äº¡ã€åŒ¹å¤«æœ‰è´£çš„æ‹…å½“ç²¾ç¥ æœ‰ä¿¡å¿µã€æœ‰æ¢¦æƒ³ æ€æƒ³é“å¾·å’Œæ³•å¾‹çš„å…³ç³»åœ¨è°ƒèŠ‚é¢†åŸŸã€è°ƒèŠ‚æ–¹å¼ã€è°ƒèŠ‚ç›®æ ‡ç­‰æ–¹é¢ä¸åŒï¼Œä½†äºŒè€…éƒ½æ˜¯ä¸Šå±‚å»ºç­‘çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…±åŒæœåŠ¡äºä¸€å®šçš„ç»æµåŸºç¡€ æ€æƒ³é“å¾·ä¸ºæ³•å¾‹æä¾›æ€æƒ³æŒ‡å¼•å’Œä»·å€¼åŸºç¡€ æ³•å¾‹ä¸ºæ€æƒ³æä¾›åˆ¶åº¦ä¿éšœ äººçš„æœ¬è´¨ä¸€åˆ‡ç¤¾ä¼šå…³ç³»çš„æ€»å’Œã€‚ äººçš„ç¤¾ä¼šå±æ€§ï¼šæ˜¯äººçš„æœ¬è´¨å±æ€§ äººç”Ÿè§‚äººç”Ÿç›®çš„ï¼šä¸ºä»€ä¹ˆæ´»ç€ äººç”Ÿæ€åº¦ï¼šåº”å½“å¦‚ä½•æ´»ç€ äººç”Ÿä»·å€¼ï¼šä»€ä¹ˆæ ·çš„äººç”Ÿæ‰æœ‰ä»·å€¼ äººç”Ÿç›®çš„ äººç”Ÿç›®çš„å†³å®šäººç”Ÿé“è·¯ äººç”Ÿç›®çš„å†³å®šäººç”Ÿæ€åº¦ äººç”Ÿç›®çš„å†³å®šäººç”Ÿä»·å€¼é€‰æ‹© äººç”Ÿæ€åº¦ï¼šç¨³å®šçš„å¿ƒç†å€¾å‘å’Œç²¾ç¥è½¬æ€ äººç”Ÿä»·å€¼(åˆ†æé¢˜è€ƒç‚¹)ï¼š è‡ªæˆ‘ä»·å€¼ï¼šä»ç¤¾ä¼šç´¢å–äº†ä»€ä¹ˆ ç¤¾ä¼šä»·å€¼ï¼šä¸ºç¤¾ä¼šåšäº†ä»€ä¹ˆï¼Œå¥‰çŒ®äº†ä»€ä¹ˆ è‡ªæˆ‘ä»·å€¼çš„å®ç°æ˜¯ä¸ºç¤¾ä¼šåˆ›é€ æ›´å¤§ä»·å€¼çš„å‰æï¼Œç¤¾ä¼šä»·å€¼æ˜¯ä¸ªä½“è‡ªæˆ‘å®Œå–„ã€å…¨é¢å‘å±•çš„ä¿éšœã€‚ äººç”Ÿè§‚ä¸ä¸–ç•Œè§‚ä¸–ç•Œè§‚ï¼šäººä»¬å¯¹ç”Ÿæ´»åœ¨å…¶ä¸­çš„ä¸–ç•Œä»¥åŠäººä¸ä¸–ç•Œçš„å…³ç³»çš„æ€»ä½“çœ‹æ³•å’Œæ ¹æœ¬è§‚ç‚¹ã€‚ å…³ç³»ï¼š ä¸–ç•Œè§‚å†³å®šäººç”Ÿè§‚ï¼Œäººç”Ÿè§‚å¯¹ä¸–ç•Œè§‚çš„å·©å›ºã€å‘å±•å’Œå˜åŒ–èµ·ç€é‡è¦ä½œç”¨ã€‚ ä¸ªäººä¸ç¤¾ä¼šçš„è¾©è¯å…³ç³»å¯¹ç«‹ç»Ÿä¸€çš„å…³ç³»ï¼š ç¤¾ä¼šéœ€è¦æ˜¯ä¸ªäººéœ€è¦çš„é›†ä¸­ä½“ç°ï¼Œä¸ªäººåˆ©ç›Šçš„æ»¡è¶³æ˜¯åœ¨ä¸€å®šçš„ç¤¾ä¼šæ¡ä»¶ä¸‹ï¼Œé€šè¿‡ä¸€å®šçš„ç¤¾ä¼šæ–¹å¼æ¥å®ç° åœ¨ç¤¾ä¼šä¸»ä¹‰ç¤¾ä¼šä¸­ï¼Œä¸ªäººåˆ©ç›Šå’Œç¤¾ä¼šåˆ©ç›Šåœ¨æ ¹æœ¬ä¸Šæ˜¯ä¸€è‡´çš„ ç§‘å­¦é«˜å°šçš„äººç”Ÿè¿½æ±‚ä»€ä¹ˆæ˜¯ç§‘å­¦é«˜å°šçš„äººç”Ÿè¿½æ±‚ï¼šæœåŠ¡äººæ°‘ã€å¥‰çŒ®ç¤¾ä¼š ä¸ºä»€ä¹ˆï¼š â€¦ â€¦ â€¦ äººç”Ÿä»·å€¼çš„è¯„ä»·ä¸å®ç° æ­£ç¡®è¯„ä»·äººç”Ÿä»·å€¼ è¡¡é‡äººç”Ÿä»·å€¼çš„æ ‡å‡†ï¼Œæœ€é‡è¦çš„å°±æ˜¯çœ‹ä¸€ä¸ªäººæ˜¯å¦ç”¨è‡ªå·±çš„åŠ³åŠ¨å’Œèªæ˜æ‰æ™ºä¸ºå›½å®¶å’Œç¤¾ä¼šçœŸè¯šå¥‰çŒ®ï¼Œä¸ºäººæ°‘ç¾¤ä¼—å°½å¿ƒå°½åŠ›æœåŠ¡ã€‚ è¯„ä»·äººç”Ÿä»·å€¼çš„æ–¹æ³•ï¼š åšæŒèƒ½åŠ›æœ‰å¤§å°ä¸è´¡çŒ®å°½åŠ›ç›¸ç»Ÿä¸€ åšæŒç‰©è´¨è´¡çŒ®ä¸ç²¾ç¥è´¡çŒ®ç›¸ç»Ÿä¸€ åšæŒå®Œå–„è‡ªèº«å’Œè´¡çŒ®ç¤¾ä¼šç›¸ç»Ÿä¸€ äººç”Ÿä»·å€¼çš„å®ç°æ¡ä»¶ ä»ç¤¾ä¼šå®¢è§‚æ¡ä»¶å‡ºå‘ ä»ä¸ªä½“è‡ªèº«æ¡ä»¶å‡ºå‘ ä¸æ–­å¢å¼ºå®ç°äººç”Ÿä»·å€¼çš„èƒ½åŠ›å’Œæœ¬é¢† äººç”Ÿç†æƒ³ç†æƒ³ä¿¡å¿µç†æƒ³å†…æ¶µï¼šæ˜¯ä¸–ç•Œè§‚ã€äººç”Ÿè§‚å’Œä»·å€¼è§‚åœ¨å¥‹æ–—ç›®æ ‡ä¸Šçš„é›†ä¸­ä½“ç° ç†æƒ³çš„åˆ†ç±»ï¼š ä¸ªäººå’Œç¤¾ä¼š è¿‘æœŸå’Œè¿œæœŸ ç”Ÿæ´»å’ŒèŒä¸š é“å¾·å’Œæ”¿æ²» ç‰¹å¾ï¼š è¶…è¶Šæ€§ï¼šæºäºç°å®ä¸”è¶…è¶Šç°å® å®è·µæ€§ï¼šåœ¨å®è·µä¸­äº§ç”Ÿã€å‘å±•ï¼Œä¸”åªèƒ½åœ¨å®è·µä¸­å®ç° æ—¶ä»£æ€§ï¼šä¸€å®šæ—¶ä»£çš„äº§ç‰© ä¿¡å¿µå†…æ¶µï¼šåœ¨ä¸€å®šçš„è®¤è¯†åŸºç¡€ä¸Šç¡®ç«‹çš„å¯¹æŸç§æ€æƒ³æˆ–äº‹ç‰©åšä¿¡ä¸ç–‘å¹¶èº«ä½“åŠ›è¡Œçš„ç²¾ç¥çŠ¶æ€ã€‚ ç‰¹å¾ï¼š æ‰§ç€æ€§ï¼šä¸€æ—¦å½¢æˆï¼Œå°±ä¸ä¼šè½»æ˜“æ”¹å˜ å¤šæ ·æ€§ï¼š ä¸åŒäººæœ‰ä¸åŒçš„ä¿¡å¿µ åŒä¸€ä¸ªäººåœ¨ä¸åŒé˜¶æ®µä¿¡å¿µä¸åŒ ä¿¡ä»°æ˜¯æœ€é«˜å±‚æ¬¡çš„ä¿¡å¿µ ç†æ€§å’Œä¿¡å¿µçš„å…³ç³»ç†æƒ³å’Œç›¸äº’ä¾å­˜ã€‚ç†æƒ³æ˜¯ä¿¡å¿µæ‰€æŒ‡çš„å¯¹è±¡ï¼Œä¿¡å¿µåˆ™æ˜¯ç†æ€§å®ç°çš„ä¿éšœã€‚æ²¡æœ‰ç†æƒ³ï¼Œä¿¡å¿µæ— ä»äº§ç”Ÿï¼Œæ²¡æœ‰ä¿¡å¿µï¼Œç†æƒ³æ‘éƒ¨éš¾è¡Œ ç†æƒ³ä¿¡å¿µæ˜¯ç²¾ç¥ä¹‹é’™ç†æƒ³ä¿¡å¿µçš„ä½œç”¨ï¼š ç†æƒ³æŒ‡å¼•æ–¹å‘ï¼Œä¿¡å¿µå†³å®šæˆè´¥ ç†æƒ³ä¿¡å¿µæ˜­ç¤ºå¥‹æ–—ç›®æ ‡ ç†æƒ³ä¿¡å¿µæä¾›å‰è¿›åŠ¨åŠ› ç†æƒ³ä¿¡å¿µæé«˜ç²¾ç¥å¢ƒç•Œ ç†æƒ³å’Œç°å®çš„å…³ç³» ç†æƒ³å’Œç°å®å­˜åœ¨ç€å¯¹ç«‹çš„ä¸€é¢ ç†æƒ³å’Œç°å®åˆæ˜¯ç»Ÿä¸€çš„ï¼šç†æƒ³å—ç°å®çš„è§„å®šå’Œåˆ¶çº¦ ç°å®ä¸­åŒ…å«ç€ç†æƒ³çš„å› ç´ ï¼Œå­•è‚²ç€ç†æƒ³çš„å‘å±• ç†æƒ³ä¸­ä¹ŸåŒ…å«ç€ç°å®ï¼Œæ—¢åŒ…å«ç€ç°å®å¿…ç„¶å‘å±•çš„å› ç´ ï¼ŒåˆåŒ…å«ç€ç”±ç†æƒ³è½¬åŒ–ä¸ºç°å®çš„æ¡ä»¶ï¼Œåœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹ï¼Œç†æƒ³å°±å¯ä»¥è½¬åŒ–ä¸ºæœªæ¥çš„ç°å® å®ç°ç†æƒ³çš„è¿‡ç¨‹å…·æœ‰ï¼šé•¿æœŸæ€§ã€è‰°å·¨æ€§å’Œæ›²æŠ˜æ€§ ä¸ªäººç†æƒ³ä¸ç¤¾ä¼šç†æƒ³çš„ç»Ÿä¸€ æ¦‚å¿µï¼š ä¸ªäººç†æƒ³ï¼šä¸ªä½“å¯¹æœªæ¥çš„ç‰©è´¨ç”Ÿæ´»ã€ç²¾ç¥ç”Ÿæ´»æ‰€äº§ç”Ÿçš„ç§ç§å‘å¾€å’Œè¿½æ±‚ ç¤¾ä¼šç†æƒ³ï¼šç¤¾ä¼šé›†ä½“ä¹ƒè‡³ç¤¾ä¼šå…¨ä½“æˆå‘˜çš„å…±åŒç†æƒ³ å…³ç³»ï¼šç›¸äº’è”ç³»ã€ç›¸äº’å½±å“ã€ç›¸äº’åˆ¶çº¦ ä¸ªäººç†æƒ³ä»¥ç¤¾ä¼šç†æƒ³ä¸ºæŒ‡å¼•ï¼›ä¸ªäººç†æƒ³çš„å®ç°ï¼Œå¿…é¡»ä»¥ç¤¾ä¼šç†æƒ³çš„å®ç°ä¸ºå‰æå’ŒåŸºç¡€ ç¤¾ä¼šç†æƒ³æ˜¯å¯¹ä¸ªäººç†æƒ³çš„å‡åå’Œå‡å ä¸­å›½ç²¾ç¥é‡ç²¾ç¥æ˜¯ä¸­åæ°‘æ—çš„ä¼˜ç§€ä¼ ç»Ÿ å¯¹ç‰©è´¨ç”Ÿæ´»ä¸ç²¾ç¥ç›¸äº’å…³ç³»çš„ç‹¬åˆ°ç†è§£ä¸Š ä¸­å›½å¤äººå¯¹ç†æƒ³çš„ä¸æ‡ˆè¿½æ±‚ è¡¨å¯¹åˆ°çš„ä¿®å…»å’Œåˆ°çš„æ•™åŒ–çš„é‡è§†ä¸Š å¯¹ç†æƒ³äººæ ¼çš„è¿½å´‡ ä¸­å›½å…±äº§å…šæ˜¯ä¸­åæ°‘æ—ä¼˜ç§€ä¼ ç»Ÿçš„å¿ å®ç»§æ‰¿è€…å’Œåšå®šå¼˜æ‰¬è€… ä¸­å›½ç²¾ç¥æ˜¯æ°‘æ—ç²¾ç¥å’Œæ—¶ä»£ç²¾ç¥çš„ç»Ÿä¸€æ°‘æ—ç²¾ç¥ï¼šä¸ºæœ¬æ°‘æ—å¤§å¤šæ•°æˆå‘˜æ‰€è®¤åŒçš„ä»·å€¼å–å‘ã€æ€ç»´æ–¹å¼ã€é“å¾·è§„èŒƒã€ç²¾ç¥æ°”è´¨çš„æ€»å’Œã€‚ æ°‘æ—ç²¾ç¥çš„å†…æ¶µ(å››ä¸ªä¼Ÿå¤§)ï¼š ä¼Ÿå¤§åˆ›é€ ç²¾ç¥ ä¼Ÿå¤§å¥‹æ–—ç²¾ç¥ ä¼Ÿå¤§å›¢ç»“ç²¾ç¥ ä¼Ÿå¤§æ¢¦æƒ³ç²¾ç¥ æ—¶ä»£ç²¾ç¥ï¼šæ˜¯ä½“ç°æ°‘æ—ç‰¹è´¨å¹¶é¡ºåº”æ—¶ä»£æ½®æµçš„æ€æƒ³è§‚å¿µã€ä»·å€¼å–å‘ã€ç²¾ç¥é£è²Œå’Œç¤¾ä¼šé£å°šçš„æ€»å’Œ æ—¶ä»£ç²¾ç¥çš„æ ¸å¿ƒï¼šæ”¹é©åˆ›æ–° æ—¶ä»£æ¥·æ¨¡ ç²¾ç¥è„Šæ¢ å…³ç³»ï¼š æ°‘æ—ç²¾ç¥æ˜¯å¤ä»£çš„æ—¶ä»£ç²¾ç¥ï¼Œç°åœ¨çš„æ—¶ä»£ç²¾ç¥ä¼šæˆä¸ºæœªæ¥çš„æ°‘æ—ç²¾ç¥ æ°‘æ—ç²¾ç¥å’Œæ—¶ä»£ç²¾ç¥å…±åŒæ„æˆäº†æˆ‘ä»¬å½“ä»Šæ—¶ä»£çš„ä¸­å›½ç²¾ç¥ æ°‘æ—ç²¾ç¥æ˜¯ä¸­åæ°‘æ—çš„ç²¾ç¥ç‹¬ç«‹æ€§å¾—ä»¥ä¿æŒçš„é‡è¦ä¿è¯ æ—¶ä»£ç²¾ç¥èµ‹äºˆä¸­å›½ç²¾ç¥ä»¥æ—¶ä»£å†…æ¶µ å®ç°ä¸­å›½æ¢¦å¿…é¡»å¼˜æ‰¬ä¸­å›½ç²¾ç¥ä¸­å›½ç²¾ç¥çš„ä½œç”¨ï¼š å‡èšä¸­å›½åŠ›é‡çš„ç²¾ç¥çº½å¸¦ æ¿€å‘åˆ›æ–°åˆ›é€ çš„ç²¾ç¥åŠ¨åŠ› æ¨è¿›å¤å…´ä¼Ÿä¸šçš„ç²¾ç¥å®šåŠ› çˆ±å›½ä¸»ä¹‰çš„åŸºæœ¬å†…æ¶µã€è¦æ±‚å’Œç‰¹ç‚¹çˆ±å›½ä¸»ä¹‰ï¼š ä½“ç°äº†äººä»¬å¯¹è‡ªå·±ç¥–å›½çš„æ·±åšæ„Ÿæƒ… å®ƒæ˜¯è°ƒèŠ‚ä¸ªäººä¸ç¥–å›½ä¹‹å‰å…³ç³»çš„é“å¾·è¦æ±‚ã€æ”¿æ²»åŸåˆ™å’Œæ³•å¾‹è§„èŒƒ ä¹Ÿæ˜¯ä¸­åæ°‘æ—ç²¾ç¥çš„æ ¸å¿ƒ è¦æ±‚ï¼š â€œçƒ­çˆ±ç¥–å›½çš„å¤§å¥½æ²³å±±â€ï¼šç»´æŠ¤ç¥–å›½çš„é¢†åœŸå®Œæ•´æ˜¯æ¯ä¸€ä¸ªäººçš„ä½¿å‘½å’Œè´£ä»» â€œçˆ±è‡ªå·±çš„éª¨è‚‰åŒèƒâ€ï¼šæ£€éªŒä¸€ä¸ªäººå¯¹ç¥–å›½å¿ è¯šçš„è¯•é‡‘çŸ³ â€œçˆ±ç¥–å›½çš„ç¿çƒ‚æ–‡åŒ–â€ï¼šæ°‘æ—ç¾¤ä½“æ„è¯†çš„è½½ä½“ã€æ°‘æ—çš„èƒè®°ã€ç²¾ç¥åŸºå› ã€æ‘‡ç¯® â€œçˆ±è‡ªå·±çš„å›½å®¶â€ï¼šå¿ƒç³»å›½å®¶çš„å‰é€”å’Œå‘½è¿ åŸºæœ¬ç‰¹å¾ï¼š çˆ±å›½ä¸»ä¹‰æ˜¯å†å²çš„ã€å…·ä½“çš„ï¼Œåœ¨ä¸åŒçš„å†å²æ—¶ä»£å’Œæ–‡åŒ–èƒŒæ™¯ä¸‹äº§ç”Ÿçš„çˆ±å›½ä¸»ä¹‰ï¼Œå…·æœ‰ä¸åŒçš„å†…æ¶µ çˆ±å›½ä¸»ä¹‰éšç€å›½å®¶çš„äº§ç”Ÿè€Œäº§ç”Ÿï¼Œéšç€å›½å®¶çš„å‘å±•è€Œå‘å±• åœ¨é˜¶çº§ç¤¾ä¼šä¸­ï¼Œçˆ±å›½ä¸»ä¹‰å…·æœ‰é˜¶çº§æ€§ï¼Œæ—¢æœ‰ä¸€è‡´çš„ä¸€é¢ï¼Œä¹Ÿæœ‰å·®å¼‚çš„ä¸€é¢ï¼Œç”šè‡³æœ‰å¯¹ç«‹çš„ä¸€é¢ æ–°æ—¶ä»£çš„çˆ±å›½ä¸»ä¹‰åŸºæœ¬è¦æ±‚ï¼š åšæŒçˆ±å›½ä¸»ä¹‰å’Œç¤¾ä¼šä¸»ä¹‰ç›¸ç»Ÿä¸€ ç»´æŠ¤ç¥–å›½ç»Ÿä¸€å’Œæ°‘æ—å›¢ç»“ å°Šé‡å’Œä¼ æ‰¿ä¸­åæ°‘æ—å†å²çš„æ–‡åŒ– å¿…é¡»åšæŒç«‹è¶³æ°‘æ—åˆé¢å‘ä¸–ç•Œ å¦‚ä½•åšæŒç«‹è¶³æ°‘æ—åˆé¢å‘ä¸–ç•Œ(åˆ†æé¢˜)ï¼š å¿…é¡»åšæŒç«‹è¶³æ°‘æ—ï¼Œç»´æŒå›½å®¶å‘å±•ä¸»ä½“æ€§ å¿…é¡»é¢å‘ä¸–ç•Œï¼Œæ„å»ºäººç±»å‘½è¿å…±åŒä½“ åšå¿ å®çš„çˆ±å›½è€… æ¨è¿›ç¥–å›½ç»Ÿä¸€ ä¿ƒè¿›æ°‘æ—å›¢ç»“ å¢å¼ºå›½å®¶å®‰å…¨æ„è¯† ä»¥äººæ°‘å®‰å…¨ä¸ºå®—æ—¨ ä»¥æ”¿æ²»å®‰å…¨ä¸ºæ ¹æœ¬ ä»¥ç»æµå®‰å…¨ä¸ºåŸºç¡€ ä»¥å†›äº‹ã€æ–‡åŒ–ã€ç¤¾ä¼šå®‰å…¨ä¸ºä¿éšœ ä»¥ä¿ƒè¿›å›½é™…å®‰å…¨ä¸ºä¾æ‰˜ æ”¹é©åˆ›æ–°æ˜¯æ—¶ä»£è¦æ±‚æ„ä¹‰(ä½œç”¨)ï¼š åˆ›æ–°å§‹ç»ˆæ˜¯æ¨åŠ¨äººç±»ç¤¾ä¼šå‘å±•çš„ç¬¬ä¸€åŠ¨åŠ› åˆ›æ–°èƒ½åŠ›æ˜¯å½“ä»Šå›½é™…ç«äº‰æ–°ä¼˜åŠ¿çš„é›†ä¸­ä½“ç° æ”¹é©åˆ›æ–°æ˜¯æˆ‘å›½èµ¢å¾—æœªæ¥çš„å¿…ç„¶è¦æ±‚ã€‚ å¿…é¡»æŠŠåˆ›æ–°ä½œä¸ºå¼•é¢†å‘å±•çš„ç¬¬ä¸€åŠ¨åŠ› æŠŠäººæ‰ä½œä¸ºæ”¯æ’‘å‘å±•çš„ç¬¬ä¸€èµ„æº æŠŠåˆ›æ–°æ‘†åœ¨å›½å®¶å‘å±•å…¨å±€çš„æ ¸å¿ƒä½ç½® æŠŠåˆ›æ–°é©±åŠ¨å‘å±•æˆ˜ç•¥ä½œä¸ºå›½å®¶é‡å¤§æˆ˜ç•¥ å®æ–½åˆ›æ–°é©±åŠ¨å‘å±•æˆ˜ç•¥ æœ€æ ¹æœ¬çš„æ˜¯è¦å¢å¼ºè‡ªä¸»åˆ›æ–°èƒ½åŠ› æœ€ç´§è¿«çš„æ˜¯è¦ç ´é™¤ä½“è´¨æœºåˆ¶éšœç¢ è·µè¡Œç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚çš„åŸºæœ¬å†…å®¹ æ ¸å¿ƒä»·å€¼è§‚ æ¦‚å¿µï¼šæ˜¯ä¸€å®šç¤¾ä¼šå½¢æ€ç¤¾ä¼šæ€§è´¨çš„é›†ä¸­ä½“ç° æ„ä¹‰ï¼šç”ŸåŠ¨å±•ç°äº†ä¸­å›½å…±äº§å…šå’Œä¸­åæ°‘æ—é«˜åº¦çš„ä»·å€¼è‡ªä¿¡ä¸ä»·å€¼è‡ªè§‰ ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚ å¯Œå¼ºã€æ°‘ä¸»ã€æ–‡æ˜ã€å’Œè°(å›½å®¶) è‡ªç”±ã€å¹³ç­‰ã€å…¬æ­£ã€æ³•æ²»(ç¤¾ä¼š) çˆ±å›½ã€æ•¬ä¸šã€è¯šä¿¡ã€å‹å–„(å…¬æ°‘) ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚å’Œç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼ä½“ç³»çš„å…³ç³» ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚æ˜¯ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼ä½“ç³»çš„ç²¾ç¥å†…æ¶µï¼Œæ˜¯ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼ä½“ç³»çš„é«˜åº¦å‡ç»ƒå’Œé›†ä¸­è¡¨è¾¾ éƒ½ä½“ç°äº†ç¤¾ä¼šä¸»ä¹‰æ„è¯†å½¢æ€çš„æœ¬è´¨è¦æ±‚ å½“ä»£ä¸­å›½å‘å±•è¿›æ­¥çš„ç²¾ç¥æŒ‡å¼•åŸ¹è‚²å’Œè·µè¡Œç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚çš„é‡è¦æ€§(å¿…è¦æ€§)ï¼š æœ‰æ•ˆæ•´åˆæˆ‘å›½ç¤¾ä¼šæ„è¯† å‡èšç¤¾ä¼šä»·å€¼å…±è¯† è§£å†³å’ŒåŒ–è§£ç¤¾ä¼šçŸ›ç›¾ èšåˆç£…ç¤´ä¹‹åŠ›çš„é‡å¤§ä¸¾æª ä¿è¯æˆ‘å›½ç»æµç¤¾ä¼šæ²¿ç€æ­£ç¡®çš„æ–¹å‘å‘å±•ã€å®ç°ä¸­å›½æ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä»·å€¼æ”¯æ’‘ ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚çš„ä½œç”¨ï¼š åšæŒå’Œå‘å±•ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„ä»·å€¼éµå¾ª æé«˜å›½å®¶æ–‡åŒ–è½¯å®åŠ›çš„è¿«åˆ‡è¦æ±‚ å¢è¿›ç¤¾ä¼šå›¢ç»“å’Œè°çš„æœ€å¤§å…¬çº¦æ•° ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚çš„å†å²åº•è•´ã€ç°å®åŸºç¡€ã€é“ä¹‰åŠ›é‡å†å²åº•è•´ï¼šä¸­åä¼˜ç§€ä¼ ç»Ÿæ–‡åŒ– ç°å®åŸºç¡€ï¼šä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰å»ºè®¾å®è·µ é“ä¹‰åŠ›é‡ï¼šå…·æœ‰å…ˆè¿›æ€§ã€äººæ°‘æ€§å’ŒçœŸå®æ€§ï¼Œå…·æœ‰å¼ºå¤§çš„é“ä¹‰åŠ›é‡ åšç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚çš„ç§¯æè·µè¡Œè€… æ‰£å¥½äººç”Ÿçš„æ‰£å­ å‹¤å­¦ä¿®å¾·æ˜è¾¨ç¬ƒå® å‹¤å­¦ï¼šçŸ¥è¯†çš„æ ‘ç«‹ç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚çš„é‡è¦åŸºç¡€ ä¿®å¾·ï¼šåšäººåšäº‹ç¬¬ä¸€ä½çš„æ˜¯å´‡å¾·ä¿®èº« æ˜è¾¨ï¼šè¾¨åˆ«ä»€ä¹ˆæ˜¯çœŸå–„ç¾ã€ä»€ä¹ˆæ˜¯å‡ä¸‘æ¶ ç¬ƒå®ï¼šé“ä¸å¯åè®ºï¼Œå¾·ä¸èƒ½ç©ºè°ˆ é“å¾·ä¼ æ‰¿ä¸å®è·µä»€ä¹ˆæ˜¯é“å¾· é“å¾·çš„èµ·æº åŠ³åŠ¨æ˜¯é“å¾·èµ·æºçš„é¦–è¦å‰æ ç¤¾ä¼šå…³ç³»æ˜¯é“å¾·èµ–ä»¥äº§ç”Ÿçš„å®¢è§‚æ¡ä»¶ äººçš„è‡ªæˆ‘æ„è¯†æ˜¯é“å¾·äº§ç”Ÿçš„ä¸»è§‚æ¡ä»¶ é“å¾·çš„æœ¬è´¨ é“å¾·æ˜¯åæ˜ ç¤¾ä¼šç»æµå…³ç³»çš„ç‰¹æ®Šæ„è¯†å½¢æ€ æœ‰ä»€ä¹ˆæ ·çš„ç¤¾ä¼šç»æµå…³ç³»ï¼Œç›¸åº”åœ°å°±æœ‰ä»€ä¹ˆæ ·çš„é“å¾·(ç»æµåŸºç¡€å†³å®šä¸Šå±‚å»ºç­‘) é“å¾·éšç€ç¤¾ä¼šç»æµå…³ç³»çš„å˜åŒ–è€Œå˜åŒ– é“å¾·ä½œä¸ºä¸€ç§ç¤¾ä¼šæ„è¯†ï¼Œåœ¨é˜¶çº§ç¤¾ä¼šé‡Œåæ˜ ç€ä¸€å®šé˜¶çº§çš„åˆ©ç›Šï¼Œå› è€Œä¸å¯é¿å…å…·æœ‰é˜¶çº§æ€§ï¼›åŒæ—¶ä¸åŒçš„é˜¶çº§é“å¾·æœ‰å…±åŒä¹‹å¤„ï¼Œåæ˜ ç€é“å¾·æ™®éæ€§ é“å¾·ä¸€ç»äº§ç”Ÿï¼Œä¾¿å…·æœ‰ç›¸å¯¹ç‹¬ç«‹æ€§ï¼Œæ—¢è¡¨ç°ä¸ºé“å¾·çš„å†å²ç»§æ‰¿æ€§ï¼Œä¹Ÿè¡¨ç°ä¸ºé“å¾·å¯¹ç¤¾ä¼šå‘å±•å…·æœ‰èƒ½åŠ¨çš„åä½œç”¨ é“å¾·æ˜¯ç¤¾ä¼šåˆ©ç›Šå…³ç³»ç‰¹æ®Šè°ƒèŠ‚æ–¹å¼ ä¸æ³•å¾‹è§„èŒƒã€æ”¿æ²»è§„èŒƒçš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒæ˜¯ç”¨å–„æ¶æ ‡å‡†å»è¯„ä»·ï¼Œä¾é ç¤¾ä¼šèˆ†è®ºã€ä¼ ç»Ÿä¹ ä¿—ã€å†…å¿ƒä¿¡å¿µæ¥ç»´æŒçš„ï¼Œå› æ­¤æ˜¯ä¸€ç§éåˆ¶åº¦åŒ–çš„ã€æŸ”æ€§çš„è§„èŒƒ é“å¾·æ˜¯ä¸€ç§å®è·µç²¾ç¥(ä¸ä½†è¿™æ ·æƒ³ï¼Œè¿˜è¦è¿™æ ·åš) é“å¾·çš„åŠŸèƒ½å’Œä½œç”¨ä¸»è¦åŠŸèƒ½ï¼š è®¤è¯†åŠŸèƒ½ï¼šé“å¾·åæ˜ ç¤¾ä¼šç°å®ç‰¹åˆ«æ˜¯åæ˜ ç¤¾ä¼šç»æµå…³ç³»çš„åŠŸæ•ˆå’Œèƒ½åŠ›(è¡Œä¸ºå‰) è§„èŒƒåŠŸèƒ½ï¼šåœ¨æ­£ç¡®å–„æ¶è§‚çš„æŒ‡å¼•ä¸‹ï¼Œè§„èŒƒç¤¾ä¼šæˆå‘˜åœ¨å„ä¸ªé¢†åŸŸçš„è¡Œä¸º(è¡Œä¸ºä¸­) è°ƒèŠ‚åŠŸèƒ½ï¼šé€šè¿‡è¯„ä»·ç­‰æ–¹å¼ï¼ŒæŒ‡å¯¼å’Œçº æ­£äººä»¬çš„è¡Œä¸ºå’Œå®è·µæ´»åŠ¨(è¡Œä¸ºå)ï¼Œè¿™æ˜¯é“å¾·æœ€çªå‡ºä¹Ÿæ˜¯æœ€é‡è¦çš„åŠŸèƒ½ ä½œç”¨ï¼š ä¸ºç»æµåŸºç¡€çš„å½¢æˆã€å·©å›ºå’Œå‘å±•æœåŠ¡ï¼Œæ˜¯ä¸€ç§é‡è¦çš„ç²¾ç¥åŠ›é‡ å¯¹å…¶ä»–ç¤¾ä¼šæ„è¯†å½¢æ€(å¦‚æ³•å¾‹æ€æƒ³)çš„å­˜åœ¨æœ‰ç€é‡å¤§çš„å½±å“ é€šè¿‡è°ƒæ•´äººä»¬ä¹‹é—´çš„å…³ç³»ç»´æŠ¤ç¤¾ä¼šç§©åºå’Œç¨³å®š æ˜¯æé«˜äººçš„ç²¾ç¥å¢ƒç•Œã€ä¿ƒè¿›äººçš„è‡ªæˆ‘å®Œå–„ã€æ¨åŠ¨äººçš„å…¨é¢å‘å±•çš„å†…åœ¨åŠ¨åŠ› åœ¨é˜¶çº§ç¤¾ä¼šä¸­ï¼Œé“å¾·æ˜¯é˜¶çº§æ–—äº‰çš„é‡è¦å·¥å…· ä¸¤ç§é”™è¯¯çš„è§‚ç‚¹ï¼š é“å¾·ä¸‡èƒ½è®º é“å¾·æ— ç”¨è®º ä¼ æ‰¿ä¸­åä¼ ç»Ÿç¾å¾· ä¼ ç»Ÿç¾å¾·çš„åŸºæœ¬ç²¾ç¥ æ³¨é‡æ•´ä½“åˆ©ç›Šï¼Œå¼ºè°ƒè´£ä»»å¥‰çŒ® æ¨å´‡ä»çˆ±åŸåˆ™ï¼Œæ³¨é‡ä»¥å’Œä¸ºè´µ æå€¡äººä¼¦ä»·å€¼ï¼Œé‡è§†é“å¾·ä¹‰åŠ¡ è¿½æ±‚ç²¾ç¥å¢ƒç•Œï¼Œå‘å¾€ç†æƒ³äººæ ¼ å¼ºè°ƒé“å¾·ä¿®å…»ï¼Œæ³¨é‡é“å¾·è·µå±¥ ä¸­åä¼ ç»Ÿç¾å¾·çš„åˆ›é€ æ€§è½¬åŒ–å’Œåˆ›æ–°æ€§å‘å±• ä¼ ç»Ÿé“å¾·æ—¢æœ‰å¥½çš„(ç²¾å)ä¹Ÿæœ‰ä¸å¥½çš„(ç³Ÿç²•) ä¼ ç»Ÿç¾å¾·æ˜¯ä¼ ç»Ÿé“å¾·çš„ç²¾åéƒ¨åˆ† åŠ å¼ºå¯¹ä¸­åä¼ ç»Ÿç¾å¾·çš„æŒ–æ˜å’Œé˜å‘ åŒä¸­åä¼ ç»Ÿç¾å¾·æ»‹å…»ç¤¾ä¼šä¸»ä¹‰é“å¾·å»ºè®¾ åœ¨å¯¹å¾…ä¼ ç»Ÿé“å¾·çš„é—®é¢˜ä¸Šï¼Œåå¯¹ä¸¤ç§é”™è¯¯çš„æ€æ½® å¤å¤è®º è™šæ— è®º(å…¨ç›˜å¦å®š) å‘å±•ä¸­å›½é©å‘½ç²¾ç¥ ä¸­å›½é©å‘½é“å¾·å½¢æˆä¸å‘å±• ä¸­å›½å…±äº§å…šå§‹ç»ˆé«˜åº¦é‡è§†ç»§æ‰¿å’Œå‘æ‰¬é©å‘½é“å¾·ä¼ ç»Ÿ ä¸­å›½é©å‘½é“å¾·ä½œä¸ºä¸€ç§ç²¾ç¥åŠ›é‡ï¼Œä»å®ƒå½¢æˆçš„æ—¶å€™èµ·ï¼Œå°±å¯¹ä¸­å›½çš„é©å‘½ã€å»ºè®¾ã€æ”¹é©äº‹ä¸šå‘æŒ¥ç€æå…¶é‡è¦çš„ä½œç”¨ å¼˜æ‰¬ä¸­å›½é©å‘½é“å¾·ï¼Œè¦åŒå¼˜æ‰¬ä¸­åä¼ ç»Ÿç¾å¾·ç›¸ç»“åˆ ä¸­å›½é©å‘½é“å¾·ä¸»è¦å†…å®¹ ä¸ºå®ç°ç¤¾ä¼šä¸»ä¹‰å’Œå…±äº§ä¸»ä¹‰ç†æƒ³è€Œå¥‹æ–— å…¨å¿ƒå…¨æ„ä¸ºäººæ°‘æœåŠ¡ å§‹ç»ˆæŠŠé©å‘½åˆ©ç›Šæ”¾åœ¨é¦–ä½ æ ‘ç«‹ç¤¾ä¼šæ–°é£ï¼Œå»ºç«‹æ–°å‹äººé™…å…³ç³» ä¿®èº«è‡ªå¾‹ï¼Œä¿æŒèŠ‚æ“ ä¸­å›½é©å‘½é“å¾·çš„å½“ä»£ä»·å€¼ æœ‰åˆ©äºåŠ å¼ºå’Œå·©å›ºç¤¾ä¼šä¸»ä¹‰å’Œå…±äº§ä¸»ä¹‰çš„ç†æ€§å’Œä¿¡å¿µ æœ‰åˆ©äºåŸ¹è‚²å’Œè·µè¡Œç¤¾ä¼šä¸»ä¹‰æ ¸å¿ƒä»·å€¼è§‚ æœ‰åˆ©äºå¼•å¯¼äººä»¬æ ‘ç«‹æ­£ç¡®çš„é“å¾·è§‚ æœ‰åˆ©äºåŸ¹è‚²è‰¯å¥½çš„ç¤¾ä¼šé“å¾·é£å°š å€Ÿé‰´äººç±»æ–‡æ˜ä¼˜ç§€é“å¾·æˆæœ æ¯ä¸€ä¸ªæ°‘æ—æˆ–å›½å®¶éƒ½æœ‰è‡ªå·±ä¼˜è‰¯çš„é“å¾·ä¼ ç»Ÿï¼Œéƒ½å¯¹ä¿ƒè¿›é“å¾·å‘å±•åšå‡ºè¿‡ä¸åŒç¨‹åº¦çš„è´¡çŒ® å¿…é¡»ç§‰æ‰¿æ­£ç¡®çš„æ€åº¦å’Œç§‘å­¦çš„æ–¹æ³• åšæŒä»¥æˆ‘ä¸ºä¸»ã€ä¸ºæˆ‘æ‰€ç”¨ï¼Œæ‰¹åˆ¤ç»§æ‰¿å…¶ä»–å›½å®¶çš„é“å¾·æˆæœ ç¤¾ä¼šä¸»ä¹‰é“å¾·çš„æ ¸å¿ƒå’ŒåŸåˆ™ ç¤¾ä¼šä¸»ä¹‰é“å¾·å»ºè®¾çš„æ ¸å¿ƒï¼šä¸ºäººæ°‘æœåŠ¡ ç¤¾ä¼šä¸»ä¹‰é“å¾·å»ºè®¾çš„åŸåˆ™ï¼šé›†ä½“ä¸»ä¹‰ ç¤¾ä¼šä¸»ä¹‰é“å¾·å»ºè®¾çš„é‡ç‚¹ï¼šè¯šå®å®ˆä¿¡ ç¤¾ä¼šä¸»ä¹‰é“å¾·å»ºè®¾çš„åŸºæœ¬è¦æ±‚ï¼šç¤¾ä¼šä¸»ä¹‰è£è¾±è§‚ ä¸ºä»€ä¹ˆè¦ä»¥ä¸ºäººæ°‘æœåŠ¡ä¸ºæ ¸å¿ƒ? ä¸ºäººæ°‘æœåŠ¡æ˜¯ç»æµåŸºç¡€å’Œäººé™…å…³ç³»çš„å®¢è§‚è¦æ±‚ æ˜¯ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµå¥åº·å‘å±•çš„è¦æ±‚ ä½“ç°ç€ç¤¾ä¼šä¸»ä¹‰é“å¾·å»ºè®¾çš„å…ˆè¿›æ€§è¦æ±‚å’Œå¹¿æ³›æ€§è¦æ±‚çš„ç»Ÿä¸€ å¦‚ä½•ç†è§£é›†ä½“ä¸»ä¹‰åŸåˆ™? ç¤¾ä¼šä¸»ä¹‰é›†ä½“ä¸»ä¹‰å¼ºè°ƒé›†ä½“åˆ©ç›Šå’Œä¸ªäººåˆ©ç›Šç›¸ç»Ÿä¸€ å¼ºè°ƒå›½å®¶åˆ©ç›Šã€ç¤¾ä¼šæ•´ä½“åˆ©ç›Šé«˜äºä¸ªäººåˆ©ç›Š å¼ºè°ƒé‡è§†å’Œä¿éšœä¸ªäººçš„æ­£å½“åˆ©ç›Š é›†ä½“ä¸»ä¹‰ä¸‰ä¸ªå±‚æ¬¡çš„é“å¾·è¦æ±‚ï¼š æ— å¿ƒå¥‰çŒ®ã€ä¸€å¿ƒä¸ºå…¬(æœ€é«˜å±‚æ¬¡) å…ˆå…¬åç§ã€å…ˆäººåå·± é¡¾å…¨å¤§å±€ã€éµçºªå®ˆæ³•ã€çƒ­çˆ±ç¥–å›½ã€è¯šå®åŠ³åŠ¨(æœ€åŸºæœ¬çš„é“å¾·è¦æ±‚) ç¤¾ä¼šå…¬å¾·å…¬å…±ç”Ÿæ´»çš„ç‰¹å¾ï¼š æ´»åŠ¨èŒƒå›´çš„å¹¿æ³›æ€§ æ´»åŠ¨å†…å®¹çš„å…¬å¼€æ€§ äº¤å¾€å¯¹è±¡çš„å¤æ‚æ€§ æ´»åŠ¨æ–¹å¼çš„å¤šæ ·æ€§ ç¤¾ä¼šå…¬å¾·ï¼š æ–‡æ˜ç¤¼è²Œï¼šç¤¾ä¼šäº¤å¾€å¿…ç„¶çš„é“å¾·è¦æ±‚ åŠ©äººä¸ºä¹ï¼šç¤¾ä¼šä¸»ä¹‰äººé“ä¸»ä¹‰çš„åŸºæœ¬è¦æ±‚ çˆ±æŠ¤å…¬ç‰©ï¼šç¤¾ä¼šæ–‡æ˜ç¨‹åº¦çš„é‡è¦æ ‡å¿— ä¿æŠ¤ç¯å¢ƒï¼šå½“ä»Šæ—¶ä»£ç¤¾ä¼šå…¬å¾·çš„é‡è¦å†…å®¹ éµçºªå®ˆæ³•ï¼šç¤¾ä¼šå…¬å¾·æœ€åŸºæœ¬çš„è¦æ±‚ å…¬æ°‘ç”Ÿæ´»çš„æœ€ä½è¦æ±‚çš„çˆ±å›½å®ˆæ³• ç½‘ç»œç”Ÿæ´»ä¸­çš„é“å¾·è¦æ±‚ï¼š æ­£ç¡®ä½¿ç”¨ç½‘ç»œå·¥å…· å¥åº·è¿›è¡Œç½‘ç»œäº¤å¾€ è‡ªè§‰é¿å…æ²‰è¿·ç½‘ç»œ å…»æˆç½‘ç»œè‡ªå¾‹ç²¾ç¥ èŒä¸šé“å¾· çˆ±å²—æ•¬ä¸šï¼šèŒä¸šé“å¾·æœ€åŸºæœ¬çš„è¦æ±‚ è¯šå®å®ˆä¿¡ï¼šå…¬æ°‘é“å¾·å»ºè®¾çš„é‡ç‚¹ åŠäº‹å…¬é“ æœåŠ¡ç¾¤ä¼— å¥‰çŒ®ç¤¾ä¼šï¼šèŒä¸šé“å¾·æœ€é«˜å±‚æ¬¡çš„è¦æ±‚ ä¸ªäººå“å¾·æ¦‚å¿µï¼šé€šè¿‡ç¤¾ä¼šé“å¾·æ•™è‚²å’Œä¸ªäººè‡ªè§‰çš„é“å¾·ä¿®å…»æ‰€å½¢æˆçš„ç¨³å®šçš„å¿ƒç†çŠ¶æ€å’Œè¡Œä¸ºä¹ æƒ¯ ä½œç”¨ï¼š å¯¹é“å¾·å’Œæ³•å¾‹ä½œç”¨çš„å‘æŒ¥å…·æœ‰é‡è¦çš„æ¨åŠ¨ä½œç”¨ æ˜¯ä¸ªä½“äººæ ¼å®Œå–„çš„é‡è¦æ ‡å¿— æ˜¯ç»æµç¤¾ä¼šå‘å±•è¿›ç¨‹ä¸­é‡è¦çš„ä¸»ä½“ç²¾ç¥åŠ›é‡ æŒæ¡é“å¾·ä¿®å…»çš„æ­£ç¡®æ–¹æ³•ï¼š å­¦æ€å¹¶é‡ çœå¯Ÿå…‹æ²» æ…ç‹¬è‡ªå¾‹ çŸ¥è¡Œåˆä¸€ ç§¯å–„æˆå¾· é”¤ç‚¼é«˜å°šé“å¾·å“æ ¼ï¼š å½¢æˆæ­£ç¡®çš„é“å¾·è®¤è¯†å’Œé“å¾·åˆ¤æ–­ æ¿€å‘æ­£å‘çš„é“å¾·è®¤åŒå’Œé“å¾·æƒ…æ„Ÿ å¼ºåŒ–åšå®šçš„é“å¾·æ„å¿—å’Œé“å¾·ä¿¡å¿µ ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•å¾‹ä½“ç³»å’Œæ³•æ²»ä½“ç³»æ³•å¾‹åŠå…¶å†å²å‘å±• æ³•å¾‹çš„å«ä¹‰ å›½å®¶åˆ›åˆ¶å’Œå®æ–½çš„è¡Œä¸ºè§„èŒƒï¼Œæ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ å›½å®¶æœºå…³åœ¨æ³•å®šçš„èŒæƒèŒƒå›´å†…ä¾ç…§æ³•å¾‹ç¨‹åºï¼Œåˆ¶å®šã€ä¿®æ”¹ã€åºŸæ­¢è§„èŒƒæ€§æ³•å¾‹æ–‡ä»¶çš„æ´»åŠ¨ å›½å®¶æœºå…³èµ‹äºˆæŸäº›æ—¢å­˜ç¤¾ä¼šè§„èŒƒä»¥æ³•å¾‹æ•ˆåŠ›ï¼Œæˆ–è€…èµ‹äºˆå…ˆå‰çš„åˆ¤ä¾‹ä»¥æ³•å¾‹æ•ˆåŠ›çš„æ´»åŠ¨ æ³•å¾‹ç”±ä¸€å®šçš„ç¤¾ä¼šç‰©è´¨ç”Ÿæ´»æ¡ä»¶æ‰€å†³å®šï¼Œç‰©è´¨èµ„æ–™çš„ç”Ÿäº§æ–¹å¼(ç”Ÿäº§åŠ›å’Œç”Ÿäº§å…³ç³»)æ—¢æ˜¯å†³å®šç¤¾ä¼šé¢è²Œã€æ€§è´¨å’Œå‘å±•çš„æ ¹æœ¬å› ç´ ï¼Œä¹Ÿæ˜¯å†³å®šæ³•å¾‹æœ¬è´¨ã€å†…å®¹å’Œå‘å±•æ–¹å‘çš„æ ¹æœ¬å› ç´  æ³•å¾‹æ˜¯ç»Ÿæ²»é˜¶çº§æ„å¿—çš„ä½“ç° ä¸æ˜¯ç»Ÿæ²»é˜¶çº§å†…éƒ¨ä¸ªåˆ«äººçš„æ„å¿—ï¼Œä¹Ÿä¸æ˜¯ç»Ÿæ²»è€…ä¸ªäººæ„å¿—çš„ç®€å•ç›¸åŠ  ç»Ÿæ²»é˜¶çº§ä¹Ÿè¦éµå®ˆæ³•å¾‹ æ³•å¾‹ä½“ç°çš„ä¸æ˜¯ç»Ÿæ²»è€…çš„å…¨éƒ¨æ„å¿— æ³•å¾‹çš„å®šä¹‰ï¼šæ³•å¾‹æ˜¯ç”±å›½å®¶åˆ¶å®šå’Œè®¤å¯å¹¶ä»¥å›½å®¶å¼ºåˆ¶åŠ›ä¿è¯å®æ–½çš„ï¼Œåæ˜ ç”±ç‰¹å®šç¤¾ä¼šç‰©è´¨ç”Ÿæ´»æ¡ä»¶æ‰€å†³å®šçš„ç»Ÿæ²»é˜¶çº§æ„å¿—çš„è§„èŒƒä½“ç³» æ³•å¾‹çš„å†å²å‘å±• æˆ‘å›½ç¤¾ä¼šä¸»ä¹‰æ³•å¾‹çš„æœ¬è´¨ç‰¹å¾ç‰¹å¾ï¼š ä½“ç°äº†å…šçš„ä¸»å¼ å’Œäººæ°‘æ„å¿—çš„ç»Ÿä¸€ï¼Œå…·æœ‰é²œæ˜çš„é˜¶çº§æ€§ å…·æœ‰ç§‘å­¦æ€§å’Œå…ˆè¿›æ€§ æ˜¯ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰å»ºè®¾çš„é‡è¦ä¿éšœ æˆ‘å›½ç¤¾ä¼šä¸»ä¹‰æ³•å¾‹çš„è¿è¡Œ åˆ¶å®š å±æ€§ï¼šå…³é”®å…³èŠ‚ ç¯èŠ‚ï¼š æ³•å¾‹æ¡ˆçš„æå‡º æ³•å¾‹æ¡ˆçš„å®¡è®® æ³•å¾‹æ¡ˆçš„è¡¨å†³ åŸåˆ™ï¼šç§‘å­¦ç«‹æ³•ã€æ°‘ä¸»ç«‹æ³• æ‰§è¡Œ å±æ€§ï¼šæœ€å¤§é‡ã€æœ€ç»å¸¸çš„å·¥ä½œ æ‰§æ³•ä¸»ä½“ï¼š ä¸­å¤®ä¸åœ°æ–¹å„çº§æ”¿åºœ å„çº§æ”¿åºœä¸­äº«æœ‰æ‰§æ³•æƒçš„ä¸‹å±æœºæ„ æ³•å¾‹æˆæƒçš„ç¤¾ä¼šç»„ç»‡ã€è¡Œæ”¿æœºå…³ä¾æ³•å§”æ‰˜çš„ç¤¾ä¼šç»„ç»‡ åŸåˆ™ï¼š åˆæ³•æ€§ åˆç†æ€§ ä¿¡èµ–ä¿æŠ¤(ä»Šå¤©ç»™äº†åˆ¤å†³ç»“æœï¼Œåé¢ä¸èƒ½è½»æ˜“æ›´æ”¹) æ•ˆç‡ é€‚ç”¨ å¸æ³•æœºå…³ï¼šæ£€æŸ¥æœºå…³ã€å®¡åˆ¤æœºå…³ åŸºæœ¬è¦æ±‚ï¼šæ­£ç¡®ã€åˆæ³•ã€åˆç†ã€åŠæ—¶ åŸåˆ™ï¼š å¸æ³•å…¬æ­£ å…¬æ°‘åœ¨æ³•å¾‹é¢å‰ä¸€å¾‹å¹³ç­‰ ä»¥äº‹å®ä¸ºä¾æ®ï¼Œä»¥æ³•å¾‹ä¸ºå‡†ç»³ å¸æ³•æœºå…³ä¾æ³•ç‹¬ç«‹å…¬æ­£è¡Œä½¿å¸æ³•æƒ éµå®ˆ å±æ€§ï¼šæ˜¯æ³•å¾‹å®æ–½å’Œå®ç°çš„åŸºæœ¬é€”å¾„ å«ä¹‰ï¼š ä¾æ³•äº«æœ‰å¹¶è¡Œä½¿æƒåŠ› ä¾æ³•æ‰¿æ‹…å¹¶å±¥è¡Œä¹‰åŠ¡ å®ˆæ³•ä¸»ä½“ï¼šä¸€åˆ‡ç»„ç»‡å’Œä¸ªäºº ç«‹æ³•ï¼š äººå¤§ å…¨å›½ï¼šå®ªæ³•ï¼Œæ³•å¾‹ åœ°æ–¹æ€§ï¼šæ³•è§„ æ”¿åºœ å›½åŠ¡é™¢ï¼šè¡Œæ”¿æ³•è§„ åœ°æ–¹æ€§ï¼šåœ°æ–¹è§„ç«  éƒ¨å§”ï¼šéƒ¨é—¨è§„ç«  å®ªæ³•æ˜¯å›½å®¶çš„æ ¹æœ¬æ³•å›é¡¾å…šé¢†å¯¼çš„å®ªæ³•å»ºè®¾å²ï¼Œå¯ä»¥å¾—å‡ºå‡ ç‚¹ç»“è®ºï¼š åˆ¶å®šå’Œå®æ–½å®ªæ³•ï¼Œæ˜¯ â€¦ å¿…ç„¶è¦æ±‚ å®ªæ³•æ˜¯åœ¨å®è·µçš„åŸºç¡€å½¢æˆçš„ï¼Œæœ‰å¿…ç„¶æ€§ å…šçš„é¢†å¯¼å¾ˆé‡è¦ï¼Œè¿™æ ·æ‰èƒ½åˆ¶å®šå‡ºå¥½çš„å®ªæ³• å…šé‡è§†å®ªæ³•ï¼Œè¿™æ˜¯å®ªæ³•ä¿æŒç”Ÿæœºæ´»åŠ›çš„æ ¹æœ¬åŸå› æ‰€åœ¨ æˆ‘å›½å®ªæ³•çš„åœ°ä½ï¼š å…šçš„ä¸»å¼ å’Œäººæ°‘æ„å¿—çš„é«˜åº¦ç»Ÿä¸€ æ˜¯å›½å®¶çš„æ ¹æœ¬æ³• å®ªæ³•åœ¨ä¸­ç‰¹ä½“ç³»ä¸­å…·æœ‰ç»Ÿå¸…åœ°ä½ è§„å®šäº†å›½å®¶çš„æ ¹æœ¬åˆ¶åº¦ å®ªæ³•çš„ç”Ÿå‘½åœ¨äºå®æ–½ï¼Œå®ªæ³•çš„æƒå¨åœ¨äºå®æ–½ æˆ‘å›½å®ªæ³•çš„åŸºæœ¬åŸåˆ™ï¼š å…šçš„é¢†å¯¼åŸåˆ™ äººæ°‘ä¸»æƒåŸåˆ™ å°Šé‡å’Œä¿éšœäººæƒåŸåˆ™ ç¤¾ä¼šä¸»ä¹‰æ³•æ²»åŸåˆ™ æ°‘ä¸»é›†ä¸­åˆ¶åŸåˆ™ æˆ‘å›½çš„å®ä½“æ³•å¾‹éƒ¨åˆ†å®ä½“æ³•å¾‹éƒ¨åˆ†åŒ…æ‹¬ï¼šå®ªæ³•ç›¸å…³æ³•ã€æ°‘æ³•å•†æ³•ã€è¡Œæ”¿æ³•ã€ç»æµæ³•ã€ç¤¾ä¼šæ³•ã€åˆ‘æ³• æ°‘æ³•çš„åŸåˆ™ï¼šéµå¾ªæ°‘äº‹ä¸»ä½“åœ°ä½å¹³ç­‰ã€è‡ªæ„¿ã€å…¬å¹³ã€è¯šä¿¡ã€å…¬åºè‰¯ä¿—ï¼Œæœ‰åˆ©äºé˜¶è·ƒè‡ªæ„¿å’Œä¿æŠ¤ç”Ÿæ€ç¯å¢ƒç­‰åŸºæœ¬åŸåˆ™ å•†æ³•çš„åŸåˆ™ï¼šå•†æ³•éµå¾ªæ°‘æ³•çš„åŸºæœ¬åŸåˆ™ï¼Œå•†äº‹äº¤æ˜“è‡ªç”±ã€ç­‰ä»·æœ‰å¿ã€ä¾¿æ·å®‰å…¨ åˆ‘æ³•çš„åŸåˆ™ï¼šç½ªåˆ‘æ³•å®šã€æ³•å®šé¢å‰äººäººå¹³ç­‰ã€ç½ªåˆ‘ç›¸é€‚åº” è§„å®šäº†çŠ¯ç½ªçš„æ¦‚å¿µï¼Œæ˜ç¡®äº†çŠ¯ç½ªåŠå…¶è¦ä»¶ è§„å®šäº†æ­£å½“é˜²å«ã€ç´§æ€¥é¿é™©ç­‰æ’é™¤ç¤¾ä¼šå±å®³æ€§çš„è¡Œä¸º è§„å®šäº†åˆ‘ç½šçš„ç§ç±»ï¼ŒåŒ…æ‹¬ç®¡åˆ¶ã€æ‹˜å½¹ã€æœ‰æœŸå¾’åˆ‘ã€æ— æœŸå¾’åˆ‘ã€æ­»åˆ‘äº”ç§ä¸»åˆ‘ä»¥åŠç½šé‡‘ã€å‰¥å¤ºæ”¿æ²»æƒåˆ©ã€æ²¡æ”¶è´¢äº§ä¸‰ç§é™„åŠ åˆ‘ æˆ‘å›½çš„ç¨‹åºæ³•å¾‹éƒ¨é—¨åŒ…æ‹¬è¯‰è®¼æ³•å’Œéè¯‰è®¼ç¨‹åºæ³•ï¼š è¯‰è®¼æ³•ï¼šè§„èŒƒå›½å®¶å¸æ³•æœºå…³è§£å†³ç¤¾ä¼šçº çº· åˆ‘äº‹è¯‰è®¼æ³• æ°‘äº‹è¯‰è®¼æ³• è¡Œæ”¿è¯‰è®¼æ³• éè¯‰è®¼ç¨‹åºæ³•ï¼šä»²è£æœºæ„æˆ–è°ƒè§£ç»„ç»‡è§£å†³ç¤¾ä¼šçº çº· ä»²è£æ³•ï¼šä¸€è£ç»ˆå±€ äººæ°‘è°ƒè§£æ³• å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ä½“ç³»çš„é‡å¤§æ„ä¹‰ ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ä½“ç³»æ˜¯ä¸­ç‰¹çš„æœ¬è´¨è¦æ±‚å’Œé‡è¦ä¿éšœ æ¨è¿›å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–çš„é‡è¦ä¸¾æª å…¨é¢ä¾æ³•æ²»å›½çš„æ€»æŠ“æ‰‹ å»ºè®¾ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰æ³•æ²»ä½“ç³»çš„ä¸»è¦å†…å®¹ å®Œå¤‡çš„æ³•å¾‹è§„èŒƒä½“ç³» æ˜¯ä¸­ç‰¹æ³•æ²»ä½“ç³»çš„å‰æï¼Œæ˜¯åŸºç¡€ é«˜æ•ˆçš„æ³•æ²»å®æ–½ä½“ç³» æ˜¯å»ºè®¾ä¸­ç‰¹æ³•æ²»ä½“ç³»çš„é‡ç‚¹ ä¸¥å¯†çš„æ³•æ²»ç›‘ç£ä½“ç³» æ˜¯å®ªæ³•æ³•å¾‹æœ‰æ•ˆå®æ–½çš„é‡è¦ä¿éšœï¼Œæ˜¯è¿«åˆ‡è¦æ±‚ æœ‰åŠ›çš„æ³•æ²»ä¿éšœä½“ç³» æ˜¯å…¨é¢ä¾æ³•æ²»å›½çš„é‡è¦ä¾æ‰˜ å®Œå–„çš„å…šå†…æ³•è§„ä½“ç³» æ˜¯ä¸­ç‰¹æ³•æ²»ä½“ç³»çš„æœ¬è´¨è¦æ±‚å’Œé‡è¦å†…å®¹ å…¨é¢ä¾æ³•æ²»å›½çš„åŸºæœ¬æ ¼å±€ ç§‘å­¦ç«‹æ³• é¾™å¤´ç¯èŠ‚ ä¸¥æ ¼æ‰§æ³• æ³•å¾‹çš„ç”Ÿå‘½åŠ›ã€æƒå¨åœ¨äºå®æ–½ å…¬æ­£æ‰§æ³• ç”Ÿå‘½çº¿ï¼Œæœ€åä¸€é“é˜²çº¿ å…¨æ°‘å®ˆæ³• æ³•æ²»é“è·¯ä¸æ€ç»´ã€æ³•å¾‹æƒåˆ©å’Œä¹‰åŠ¡åšæŒä¸­å›½å…±äº§å…šçš„é¢†å¯¼ä¸ºä»€ä¹ˆè¦åšæŒä¸­å›½å…±äº§å…šçš„é¢†å¯¼ï¼š å…šçš„é¢†å¯¼æ˜¯ä¸­ç‰¹çš„æœ€æœ¬è´¨çš„ç‰¹å¾ï¼Œæ˜¯ç¤¾ä¼šä¸»ä¹‰æ³•æ²»çš„æ ¹æœ¬ä¿è¯ï¼Œå…šçš„é¢†å¯¼å’Œä¾æ³•æ²»å›½æ˜¯é«˜åº¦ç»Ÿä¸€çš„ åšæŒå…šçš„é¢†å¯¼ï¼Œæ˜¯ç¤¾ä¼šä¸»ä¹‰æ³•æ²»çš„æ ¹æœ¬è¦æ±‚ï¼Œæ˜¯å…¨é¢ä¾æ³•æ²»å›½çš„é¢˜ä¸­åº”æœ‰ä¹‹ä¹‰ æ€æ ·åšæŒä¸­å›½å…±äº§å…šçš„é¢†å¯¼ï¼š å…šé¢†å¯¼ç«‹æ³• ä¿è¯æ‰§æ³• æ”¯æŒå¸æ³• å¸¦å¤´å®ˆæ³• åšæŒäººæ°‘çš„ä¸»ä½“åœ°ä½é‡è¦æ€§ï¼šåœ¨ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å›½å®¶ï¼Œäººæ°‘æ˜¯ä¾æ³•æ²»å›½çš„ä¸»ä½“å’ŒåŠ›é‡æºæ³‰ å¦‚ä½•åšæŒï¼šâ€¦ â€¦ åšæŒæ³•å¾‹é¢å‰äººäººå¹³ç­‰å¹³ç­‰æ˜¯ç¤¾ä¼šä¸»ä¹‰æ³•å¾‹çš„åŸºæœ¬å±æ€§ï¼Œæ˜¯æ³•æ²»çš„åŸºæœ¬è¦æ±‚ åšæŒä¾æ³•æ²»å›½å’Œä»¥å¾·æ²»å›½ç›¸ç»“åˆ æ­£ç¡®è®¤è¯†æ³•æ²»å’Œå¾·æ²»çš„åœ°ä½ æ³•æ²»çš„åœ°ä½ï¼šæ²»å›½ç†æ”¿çš„åŸºæœ¬æ–¹å¼ï¼Œä¾æ³•æ²»å›½çš„åŸºæœ¬æ–¹ç•¥ å¾·æ²»çš„åœ°ä½ï¼šæ²»å›½ç†æ”¿çš„é‡è¦æ–¹å¼ æ­£ç¡®è®¤è¯†æ³•æ²»å’Œå¾·æ²»çš„ä½œç”¨ æ³•æ²»çš„ä½œç”¨ï¼šå‘æŒ¥ä½œç”¨ä»¥å›½å®¶å¼ºåˆ¶åŠ›ä¸ºåç›¾ï¼Œå¯¹è¿æ³•è¡Œä¸ºè¿½ç©¶æ³•å¾‹è´£ä»» å¾·æ²»çš„ä½œç”¨ï¼šï¼šé€šè¿‡äººä»¬çš„å†…å¿ƒä¿¡å¿µã€ä¼ ç»Ÿä¹ ä¿—ã€ç¤¾ä¼šèˆ†è®ºç­‰è¿›è¡Œé“å¾·æ•™åŒ–ï¼Œå¯¹è¿èƒŒé“å¾·çš„è¡Œä¸ºè¿›è¡Œé“å¾·è°´è´£ æ­£ç¡®è®¤è¯†æ³•æ²»å’Œå¾·æ²»çš„å®ç°é€”å¾„ æ³•æ²»çš„å®ç°é€”å¾„ï¼šåˆ¶å®šå’Œå®æ–½æ³•å¾‹è§„èŒƒçš„å½¢å¼æ¥æ¨è¿›å’Œå®æ–½ å¾·æ²»çš„å®ç°é€”å¾„ï¼šåŸ¹è‚²å’Œå¼˜æ‰¬é“å¾·ç­‰é€”å¾„æ¥æ¨è¿›å’Œå®æ–½ æ¨åŠ¨æ³•æ²»å’Œå¾·æ²»çš„ç›¸äº’ä¿ƒè¿› å¼ºè°ƒé“å¾·å¯¹æ³•æ²»çš„æ”¯æ’‘ä½œç”¨ï¼Œå‘æŒ¥é“å¾·å¯¹æ³•æ²»çš„æ»‹å…»ä½œç”¨ æŠŠé“å¾·è¦æ±‚è´¯å½»åˆ°æ³•æ²»å»ºè®¾ä¸­ï¼Œä»¥æ³•æ²»æ‰¿è½½é“å¾·ç†å¿µ è¿ç”¨æ³•æ²»æ‰‹æ®µè§£å†³é“å¾·é¢†åŸŸçªå‡ºé—®é¢˜ã€‚æ³•å¾‹æ˜¯é“å¾·çš„åº•çº¿ï¼Œä¹Ÿæ˜¯é“å¾·çš„ä¿éšœ åšæŒä»ä¸­å›½å®é™…å‡ºå‘ åšæŒä»å®é™…å‡ºå‘ï¼Œå°±æ˜¯è¦çªå‡ºæ³•æ²»é“è·¯çš„ä¸­å›½ç‰¹è‰²ã€å®è·µç‰¹è‰²ã€æ—¶ä»£ç‰¹è‰² ä»æˆ‘å›½å®é™…å‡ºå‘ï¼Œä¸ç­‰äºå…³èµ·é—¨æ¥é«˜æ³•æ²»ï¼Œå­¦ä¹ ä¸–ç•Œä¸Šä¼˜ç§€çš„æ–‡æ˜æˆæœ æ³•æ²»æ€ç»´åŠå…¶å†…æ¶µæ³•æ²»æ€ç»´çš„å«ä¹‰ï¼š æ³•æ²»æ€ç»´ä»¥æ³•æ²»ä»·å€¼å’Œæ³•æ²»ç²¾ç¥ä¸ºæŒ‡å¯¼ æ³•æ²»æ€ç»´ä»¥æ³•å¾‹åŸåˆ™ä¸ºä¾æ®æ¥æŒ‡å¯¼äººä»¬çš„ç¤¾ä¼šè¡Œä¸º æ³•æ²»æ€ç»´ä»¥æ³•å¾‹æ‰‹æ®µå’Œæ³•å¾‹æ–¹æ³•ä¸ºä¾æ‰˜åˆ†æé—®é¢˜ã€å¤„ç†é—®é¢˜ã€è§£å†³çº çº· æ³•æ²»æ€ç»´æ˜¯ä¸€ç§ç¬¦åˆè§„å¾‹ã€å°Šé‡äº‹å®çš„ç§‘å­¦æ€ç»´ æ³•æ²»æ€ç»´çš„ç‰¹å¾ï¼š åœ¨ä¾æ®ä¸Šï¼Œä»¥äº‹å®ä¸ºä¾æ®ï¼Œä»¥æ³•å¾‹ä¸ºå‡†ç»³ åœ¨æ–¹å¼ä¸Šï¼ŒåšæŒæ³•å¾‹é¢å‰äººäººå¹³ç­‰ï¼Œå…·æœ‰ç¨³å®šæ€§å’Œä¸€è´¯æ€§ åœ¨ä»·å€¼ä¸Šï¼Œå¼ºè°ƒé›†ä¸­ç¤¾ä¼šå¤§ä¼—çš„æ„å¿—æ¥è¿›è¡Œå†³ç­–å’Œåˆ¤æ–­ åœ¨æ ‡å‡†ä¸Šï¼Œæ³•æ²»ä¸äººæ²»çš„åˆ†æ°´å²­ä¸ºæœ€é«˜çš„æƒå¨æ˜¯æ³•è¿˜æ˜¯äººï¼Œæ³•æ²»æ€ç»´ä»¥æ³•å¾‹ä¸ºæœ€é«˜æƒå¨ æ³•æ²»æ€ç»´çš„åŸºæœ¬å†…å®¹ æ³•å¾‹è‡³ä¸Šï¼šæ³•å¾‹çš„æ™®éé€‚ç”¨æ€§ã€ä¼˜å…ˆé€‚ç”¨æ€§(å¤šç§æ–¹å¼åˆ¤æ–­ï¼Œæ³•å¾‹ä¼˜å…ˆ)å’Œä¸å¯è¿æŠ—æ€§ æƒåˆ©åˆ¶çº¦ï¼šæƒåˆ©ç”±æ³•å®šã€æœ‰æƒå¿…æœ‰è´£ã€ç”¨æƒå—ç›‘ç£ã€è¿æ³•å—è¿½ç©¶ å…¬å¹³æ­£ä¹‰ï¼šæƒåˆ©å…¬å¹³ã€æœºä¼šå…¬å¹³ã€è§„åˆ™å…¬å¹³å’Œæ•‘æµå…¬å¹³ æƒåˆ©ä¿éšœï¼šå®ªæ³•ä¿éšœæ˜¯å‰æå’ŒåŸºç¡€ï¼Œç«‹æ³•ä¿éšœæ˜¯é‡è¦æ¡ä»¶ï¼Œè¡Œæ”¿ä¿æŠ¤æ˜¯å…³é”®ç¯èŠ‚ï¼Œå¸æ³•ä¿éšœæ˜¯æœ€åé˜²çº¿ æ­£å½“ç¨‹åºï¼šç¨‹åºçš„åˆæ³•æ€§ã€ä¸­ç«‹æ€§ã€å‚ä¸æ€§ã€å…¬å¼€æ€§ã€æ—¶é™æ€§ å°Šé‡å’Œç»´æŠ¤æ³•å¾‹æƒå¨ æ³•å¾‹æƒå¨çš„å«ä¹‰ æ³•å¾‹å ä¸»å¯¼åœ°ä½ æ³•å¾‹ç§‘å­¦ æ³•å¾‹å—åˆ°ä¸¥æ ¼å®æ–½ æ³•å¾‹åæ˜ äººæ°‘å…±åŒæ„æ„¿ä¸”ä¸ºäººæ°‘çœŸè¯šä¿¡ä»° æ„ä¹‰ ç¤¾ä¼šä¸»ä¹‰æ³•æ²»è§‚å¿µçš„æ ¸å¿ƒè¦æ±‚å’Œå»ºè®¾ç¤¾ä¼šä¸»ä¹‰æ³•æ²»å›½å®¶çš„å‰ææ¡ä»¶ å›½å®¶æ²»ç†åŸºç¡€å’Œå…³é”® å®ç°äººæ°‘æ„å¿—ã€ç»´æŠ¤äººæ°‘æ¯…åŠ›ã€ä¿éšœäººæ°‘æƒåˆ©çš„åŸºæœ¬é€”å¾„ ç»´æŠ¤ä¸ªäººåˆæ³•æƒç›Šçš„æ ¹æœ¬ä¿éšœ è¦æ±‚ ä¿¡ä»°æ³•å¾‹ éµå®ˆæ³•å¾‹ æœä»æ³•å¾‹ ç»´æŠ¤æ³•å¾‹ æ³•å¾‹æƒåˆ©å’Œæ³•å¾‹ä¹‰åŠ¡æ³•å¾‹æƒåˆ©ï¼š æƒåˆ©çš„äº§ç”Ÿã€å‘å±•å’Œå®ç°ï¼Œéƒ½å¿…é¡»è¦ä»¥ä¸€å®šçš„ç¤¾ä¼šç»æµæ¡ä»¶ä¸ºåŸºç¡€ã€‚ æ³•å¾‹æƒåˆ©çš„ç‰¹å¾ï¼š å—ç‰©è´¨ç”Ÿæ´»æ¡ä»¶çš„åˆ¶çº¦ ä¸åŒåˆ¶åº¦å’Œä¸åŒå›½å®¶æ³•å¾‹ä¸‹å­˜åœ¨å·®å¼‚ å—æ³•å¾‹ä¿æŠ¤ï¼Œå…·æœ‰ä¸å¯ä¾µçŠ¯æ€§ å¿…é¡»ä¾æ³•è¡Œä½¿ æ³•å¾‹ä¹‰åŠ¡çš„å±¥è¡Œï¼š ä½œä¸ºï¼šä¹‰åŠ¡äººå®æ–½ç§¯æçš„è¡Œä¸º(å¦‚çœ‹æœ›çˆ¶æ¯) ä¸ä½œä¸ºï¼šä¹‰åŠ¡äººä¸å¾—å®æ–½æŸç§è¡Œä¸º(å¦‚ç§é—¯æ°‘å®…) æ³•å¾‹ä¹‰åŠ¡çš„ç‰¹å¾ï¼š æ˜¯å†å²çš„ æºäºç°å®éœ€è¦ å¿…é¡»ä¾æ³•è®¾å®š å¯èƒ½å‘ç”Ÿå˜åŒ– æ³•å¾‹ä¹‰åŠ¡å’Œæ³•å¾‹æƒåˆ©çš„å…³ç³»ï¼š ä¸å¯åˆ†å‰²ï¼Œç›¸äº’ä¾å­˜ æ³•å¾‹æƒåˆ©çš„å®ç°å¿…é¡»ä»¥ç›¸åº”æ³•å¾‹ä¹‰åŠ¡å±¥è¡Œä¸ºæ¡ä»¶ æ³•å¾‹ä¹‰åŠ¡çš„è®¾å®šå’Œå±¥è¡Œé¡µå¿…é¡»ä»¥æ³•å¾‹æƒåˆ©çš„è¡Œä½¿ä¸ºä¾æ® æ³•å¾‹æƒåˆ©ä¸æ³•å¾‹ä¹‰åŠ¡æ˜¯ç›®çš„ä¸æ‰‹æ®µçš„å…³ç³» æœ‰äº›æ³•å¾‹æƒåˆ©å’Œä¹‰åŠ¡å…·æœ‰å¤åˆæ€§çš„å…³ç³»ã€‚ä¸€ä¸ªè¡Œä¸ºå¯ä»¥åŒæ—¶æ˜¯æƒåˆ©è¡Œä¸ºå’Œä¹‰åŠ¡è¡Œä¸º(åŠ³åŠ¨ï¼Œæ•™è‚²) æ³•å¾‹æƒåˆ©å’Œæ³•å¾‹ä¹‰åŠ¡å¹³ç­‰ æ³•å¾‹é¢å‰äººäººå¹³ç­‰è¢«ç¡®ç«‹ä¸ºåŸºæœ¬åŸåˆ™ åœ¨æ³•å¾‹æƒåˆ©å’Œæ³•å¾‹ä¹‰åŠ¡çš„å…·ä½“è®¾å®šä¸Šè¦å¹³ç­‰ æƒåˆ©ä¸ä¹‰åŠ¡çš„å®ç°è¦ä½“ç°å¹³ç­‰ ä¾æ³•è¡Œä½¿æ³•å¾‹æƒåˆ©æˆ‘å›½å®ªæ³•æ³•å¾‹è§„å®šçš„åŸºæœ¬æƒåˆ© æ”¿æ²»æƒåˆ© é€‰ä¸¾æƒ è¡¨è¾¾ æ°‘ä¸»ç®¡ç† ç›‘ç£æƒ äººèº«æƒåˆ© ç”Ÿå‘½å¥åº·æƒ äººèº«è‡ªç”±æƒ äººæ ¼å°Šä¸¥æƒ ä½å®…å®‰å…¨æƒ é€šä¿¡è‡ªç”±æƒ è´¢äº§æƒåˆ© ç§æœ‰è´¢äº§æƒ ç»§æ‰¿æƒ ç¤¾ä¼šç»æµæƒåˆ© åŠ³åŠ¨æƒ ä¼‘æ¯æƒ ç¤¾ä¼šä¿éšœæƒ ç‰©è´¨å¸®åŠ©æƒ å®—æ•™ä¿¡ä»°åŠæ–‡åŒ–æƒåˆ© è¡Œä½¿æ³•å¾‹æƒåˆ©çš„ç•Œé™ æƒåˆ©è¡Œä½¿çš„ç›®çš„ æƒåˆ©è¡Œä½¿çš„é™åº¦ æƒåˆ©è¡Œä½¿çš„æ–¹å¼ æƒåˆ©è¡Œä½¿çš„ç¨‹åº ä¾æ³•å±¥è¡Œä¹‰åŠ¡æ³•å¾‹ä¹‰åŠ¡ï¼š ç»´æŠ¤å›½å®¶ç»Ÿä¸€å’Œæ°‘æ—å›¢ç»“ éµå®ˆå®ªæ³•ä¸æ³•å¾‹ ç»´æŠ¤ç¥–å›½å®‰å…¨ã€è£èª‰å’Œåˆ©ç›Š ä¾æ³•æœå…µå½¹ ä¾æ³•çº³ç¨ è¿åæ³•å®šä¹‰åŠ¡åº”å½“æ‰¿æ‹…æ³•å¾‹è´£ä»»ï¼š æ°‘äº‹è´£ä»» è¡Œæ”¿è´£ä»»(é’ˆå¯¹è¡Œæ”¿æœºå…³å’Œè¡Œæ”¿äººå‘˜) åˆ‘äº‹è´£ä»»","tags":[{"name":"è€ƒç ”","slug":"è€ƒç ”","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E8%80%83%E7%A0%94/"}]},{"title":"å¸¸è§æ’åºç®—æ³•","date":"2019-10-01T16:00:00.000Z","path":"/æ’åºç®—æ³•/","text":"ç”±äºè¿‘æœŸåœ¨å­¦ä¹ æ’åºç®—æ³•ï¼Œå†³å®šå°†è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œä¸€æ˜¯ä¸ºäº†è‡ªå·±èƒ½å¤Ÿæ–¹ä¾¿çš„å¤ä¹ ï¼Œå¦ä¸€ä¸ªæ˜¯å°†è¿™ä¸ªçŸ¥è¯†åˆ†äº«ç»™å¤§å®¶ã€‚æˆ‘å°†ä½¿ç”¨ Java è¯­è¨€å®ç°ä¸‹åˆ—æ’åºç®—æ³• é€‰æ‹©æ’åº æ’å…¥æ’åº å¸Œå°”æ’åº å½’å¹¶æ’åº å¿«é€Ÿæ’åº å †æ’åº å‡†å¤‡å·¥ä½œä¸ºäº†å¯¹å®ç°çš„ç®—æ³•è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªå·¥å…·ç±» Helperï¼Œé‡Œé¢åŒ…æ‹¬æˆ‘ä»¬ç”±äºæµ‹è¯•ç®—æ³•æ­£ç¡®ä¸å¦çš„æ–¹æ³•ä»¥åŠæ€§èƒ½æµ‹è¯•çš„ä»£ç ï¼ŒåŒ…æ‹¬äº¤æ¢æ•°ç»„ä¸­çš„ä¸¤ä¸ªå…ƒç´ (è¿™ä¸ªæ“ä½œåœ¨æ’åºæ—¶ç»å¸¸ç”¨åˆ°ï¼Œæ‰€ä»¥æŠ½è±¡å‡ºä¸€ä¸ªæ–¹æ³•)ï¼Œè¿˜æœ‰äº§ç”Ÿä¸€ä¸ªæŒ‡å®šå®¹é‡å’ŒèŒƒå›´çš„éšæœºæ•°ç»„ï¼Œè¿˜æœ‰åˆ¤æ–­æ•°ç»„æ˜¯å¦æœ‰åºçš„å‡½æ•°ä»¥åŠæ€§èƒ½æµ‹è¯•çš„å‡½æ•° import java.util.Arrays;import java.util.Random;public class Helper &#123; //äº¤æ¢arr[i]å’Œarr[j] public static void swap(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; //äº§ç”Ÿä¸€ä¸ªèŒƒå›´åœ¨rangeL-rangeRï¼Œå®¹é‡ä¸ºnçš„æ•°ç»„ public static int[] generateArray(int n, int rangeL, int rangeR) &#123; Random random = new Random(); int[] arr = new int[n]; for (int i = 0; i &lt; n; i++) &#123; arr[i] = random.nextInt(rangeR - rangeL + 1) + rangeL; &#125; return arr; &#125; //åˆ¤æ–­æ•°ç»„æ˜¯å¦æœ‰åº(ä»å°åˆ°å¤§) public static boolean isSorted(int[] arr) &#123; for (int i = 0; i &lt; arr.length - 1; i++) &#123; if (arr[i] &gt; arr[i + 1]) &#123; return false; &#125; &#125; return true; &#125; //æµ‹è¯•æ’åºéœ€è¦çš„æ—¶é—´ éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°æ¥å£Sort public static double testTime(int[] arr, Sort sort) &#123; long startTime = System.nanoTime(); sort.sort(arr); long endTime = System.nanoTime(); return (endTime - startTime) / 1000000000.0; &#125;&#125; å…¶ä¸­ testTime éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°å¼æ¥å£ Sortï¼Œè¯¥æ¥å£å®šä¹‰å¦‚ä¸‹ public interface Sort &#123; public void sort(int[] arr);&#125; æˆ‘ä»¬åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œåªè¦å°†æˆ‘ä»¬çš„æ’åºç®—æ³•çš„æ–¹æ³•å¼•ç”¨ä¼ å…¥å³å¯ã€‚ é€‰æ‹©æ’åºä¸ºäº†æè¿°çš„ç²¾ç¡®æ€§ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å·²ç»æ’å¥½åºçš„åŒºåŸŸï¼Œä¸€éƒ¨åˆ†æ˜¯æœªæ’åºçš„åŒºåŸŸ é€‰æ‹©æ’åºçš„ç­–ç•¥å°±æ˜¯åœ¨æœªæ’åºçš„åŒºåŸŸæ‰¾å‡ºæœ€å°å…ƒç´ çš„ä½ç½®ï¼Œç„¶åå°†å®ƒäº¤æ¢åˆ°æœªæ’åºåŒºåŸŸçš„æœ€å‰æ–¹ï¼Œç„¶åå·²æ’åºåŒºåŸŸå‘å‰æ‰©å¤§ä¸€ä½ï¼Œç„¶åæ¥ç€ä¸Šé¢ç­–ç•¥ï¼Œç›´è‡³æœªæ’åºçš„åŒºåŸŸä¸ºç©ºï¼Œæ’åºç»“æŸã€‚ä¸‹é¢ä»¥ä¸€ä¸ªä¾‹å­è¿›è¡Œè¯´æ˜ï¼Œæˆ‘ä»¬é»˜è®¤è“è‰²åŒºåŸŸä»£è¡¨å·²æ’åºåŒºåŸŸï¼Œç™½è‰²åŒºåŸŸä»£è¡¨æœªæ’åºåŒºåŸŸ ä»£ç å¦‚ä¸‹ public class SelectionSort &#123; public static void sort(int[] arr) &#123; if (arr == null || arr.length &lt; 2) &#123; return; &#125; for (int i = 0; i &lt; arr.length; i++) &#123; int minIndex = i; for (int j = i + 1; j &lt; arr.length; j++) &#123; if (arr[j] &lt; arr[minIndex]) &#123; minIndex = j; &#125; &#125; Helper.swap(arr,minIndex,i); minIndex = i + 1; &#125; &#125; public static void main(String[] args) &#123; //å¯¹100000ä¸ªæ•°è¿›è¡Œæ’åº int n = 100000; //äº§ç”Ÿéšæœºæ•°ç»„ int[] arr = Helper.generateArray(n, 0, n); //ä¼ å…¥æ’åºç®—æ³•çš„å¼•ç”¨ï¼Œå¾—åˆ°æ’åºæ‰€éœ€æ—¶é—´ double time = Helper.testTime(arr,SelectionSort::sort); //ç¡®å®šç®—æ³•æ˜¯å¦æ’å¥½åº System.out.println(\"isSorted: \" + Helper.isSorted(arr)); //æ‰“å°æ’åºæ‰€éœ€æ—¶é—´ System.out.println(time + \"s\"); &#125;&#125; è¾“å‡ºä¸º isSorted: true7.319637673s å¯è§ç®—æ³•å·²ç»æ’å¥½åºï¼Œå¹¶ä¸”é€‰æ‹©æ’åºå¯¹ 100000 ä¸ªæ•°æ®æ’åºæ‰€éœ€çš„æ—¶é—´ä¸º 7.32s å·¦å³ã€‚ æ’å…¥æ’åºæ’å…¥æ’åºå°±åƒæ˜¯ä½ åœ¨æ‰“æ–—åœ°ä¸»ï¼Œå½“ä½ æ‘¸ç‰Œæ—¶ä½ å¯¹ç‰Œçš„æ’åºã€‚å‘ä¸Šé¢ä¸€æ ·ï¼Œæˆ‘ä»¬å°†æ•°ç»„åˆ†ä¸ºå·²æ’åºçš„éƒ¨åˆ†å’Œæœªæ’åºçš„éƒ¨åˆ†ï¼Œä»¥æ’åºçš„éƒ¨åˆ†å°±æ˜¯ä½ å·²ç»æ’å¥½åºçš„ç‰Œï¼Œç°åœ¨ä½ åˆæ‘¸åˆ°äº†ä¸€å¼ ç‰Œï¼Œé‚£ä¹ˆä½ æ˜¯ä¸æ˜¯ä¼šå°†è¿™å¼ ç‰Œä¸æ’å¥½åºçš„ç‰Œè¿›è¡Œæ¯”è¾ƒï¼Œæ’å…¥åˆ°åˆé€‚çš„ä½ç½®ï¼Œç„¶åç»§ç»­æ‘¸ä¸‹ä¸€å¼ ç‰Œï¼Œç„¶ååˆè¿›è¡Œæ’å…¥æ’åºï¼Œç›´åˆ°ç‰Œå·²ç»æ‘¸å®Œäº†(æœªæ’åºçš„éƒ¨åˆ†ä¸ºç©º)ï¼Œé‚£ä¹ˆä½ å°±å·²ç»æ‹å¥½åºäº†ï¼Œä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ ä»£ç ä¸º public class InsertSort &#123; public static void sort(int[] arr) &#123; //i = 1å¼€å§‹ï¼Œå› ä¸ºé»˜è®¤ç¬¬ä¸€å¼ ç‰Œæ˜¯æ’å¥½åºçš„ for (int i = 1; i &lt; arr.length; i++) &#123; for (int j = i; j &gt; 0; j--) &#123; //å¦‚æœåé¢æ¯”å‰é¢å°ï¼Œè¿›è¡Œäº¤æ¢ if (arr[j - 1] &gt; arr[j]) &#123; Helper.swap(arr,j - 1, j); &#125; else &#123; //å¦‚æœåé¢æ¯”å‰é¢å¤§ï¼Œç»“æŸäº¤æ¢ break; &#125; &#125; &#125; &#125; public static void main(String[] args) &#123; int n = 100000; int[] arr = Helper.generateArray(n, 0, n); double time = Helper.testTime(arr,InsertSort::sort); System.out.println(\"isSorted: \" + Helper.isSorted(arr)); System.out.println(time + \"s\"); &#125;&#125; è¾“å‡ºä¸º isSorted: true8.863959818s è¿™è¡¨æ˜æ’å…¥æ’åºå¯¹ 100000 ä¸ªæ•°æ®æ’åºæ‰€éœ€çš„æ—¶é—´ä¸º 8.86s å·¦å³ã€‚å®ƒçš„é€Ÿåº¦æ¯”é€‰æ‹©æ’åºè¿˜è¦æ…¢ä¸€äº›ï¼Œè¿™æ—¶å› ä¸ºæ’å…¥æ’åºä¸­å«æœ‰å¤§é‡çš„äº¤æ¢æ“ä½œï¼Œå¦‚æœæˆ‘ä»¬å°†ä¸Šé¢çš„äº¤æ¢æ“ä½œæ›¿æ¢ä¸ºèµ‹å€¼æ“ä½œ public static void sort(int[] arr) &#123; for (int i = 1; i &lt; arr.length; i++) &#123; int e = arr[i]; //ä¿å­˜è¦æ’å…¥çš„å…ƒç´  int j; //è®°å½•è¦æ’å…¥çš„ä½ç½® for (j = i; j &gt; 0; j--) &#123; if (arr[j - 1] &gt; e) &#123; //å‘åç§»åŠ¨ arr[j] = arr[j - 1]; &#125; else &#123; break; &#125; &#125; arr[j] = e; &#125;&#125; è¿™æ—¶éœ€è¦çš„æ—¶é—´ä¸º isSorted: true2.293106947s å¹¶ä¸”å¯¹äºè¿‘ä¹æœ‰åºçš„æ•°ç»„ï¼Œæ’å…¥æ’åºçš„é€Ÿåº¦éå¸¸çš„å¿«ï¼Œç”šè‡³æ¯”åé¢è¦ä»‹ç»çš„ $O(N \\log N)$ çš„é€Ÿåº¦è¿˜è¦å¿«ã€‚ å¸Œå°”æ’åºå¸Œå°”æ’åºæ˜¯å¯¹æ’å…¥æ’åºçš„æ”¹è¿›ã€‚æ—¢ç„¶æ˜¯æ”¹è¿›ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦çŸ¥é“æ’å…¥æ’åºæœ‰ä»€ä¹ˆé—®é¢˜ï¼šå¦‚æœæœ‰ä¸€ä¸ªå¾ˆå°çš„æ•°åœ¨æ•°ç»„çš„åæ–¹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±ä¼šè¿›è¡Œå¾ˆé•¿æ—¶é—´çš„äº¤æ¢æ‰èƒ½æ’å…¥åˆ°åˆé€‚çš„ä½ç½®ï¼Œè¿™æ˜æ˜¾æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ…¢çš„è¿‡ç¨‹ è€Œå¸Œå°”æ’åºå°†è§£å†³è¿™ä¸€ä¸ªé—®é¢˜ï¼Œå¸Œå°”æ’åºé¦–å…ˆå°†æ•°ç»„åˆ†ç»„ï¼Œæ¯”å¦‚ ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»æ¯éš” 3 ä¸ªä¸€ç»„åˆ°æ¯éš” 2 ä¸ªä¸€ç»„æœ€åæ¯éš” 1 ä¸ªä¸€ç»„ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„ &quot;3,2,1&quot; ç§°ä¹‹ä¸ºå¢å¹…åºåˆ— hï¼Œä¸åŒçš„é€’å¢åºåˆ—å¯¹ç®—æ³•çš„æ€§èƒ½ä¹Ÿæœ‰å½±å“ï¼Œæœ‰å¾ˆå¤šçš„è®ºæ–‡ç ”ç©¶äº†ä¸åŒçš„é€’å¢åºåˆ—ï¼Œä½†éƒ½æ— æ³•è¯æ˜æŸä¸ªé€’å¢åºåˆ—æ˜¯æœ€å¥½çš„ï¼Œä¸‹é¢çš„ç¨‹åºè€ƒè™‘ä½¿ç”¨ &quot;1, 4, 13, ...&quot; è¿™ä¸ªé€’å¢åºåˆ—(h = 1, h = 3 \\* h + 1)ï¼Œä»£ç å¦‚ä¸‹ public class ShellSort &#123; public static void sort(int[] arr) &#123; int N = arr.length; int h = 1; while (h &lt; N / 3) &#123; h = 3*h + 1; // 1 4 13 40 121 ... &#125; // h = 1çš„æ—¶å€™å°±æ˜¯å¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œæ’å…¥æ’åº while (h &gt;= 1) &#123; //æ¯éš”hä¸ªå…ƒç´ (å°†æ•°ç»„åˆ†æˆäº†hç»„)è¿›è¡Œæ’å…¥æ’åº for (int i = h; i &lt; N; i++) &#123; for (int j = i; j &gt; h - 1; j -= h) &#123; if (arr[j - h] &gt; arr[j]) &#123; Helper.swap(arr, j, j-h); &#125; else &#123; break; &#125; &#125; &#125; h = h/3; &#125; &#125; public static void main(String[] args) &#123; int n = 100000; int m = 10; double time = 0; for (int i = 0; i &lt; m; i++) &#123; int[] arr = Helper.generateArray(n, 0, n); time += Helper.testTime(arr, ShellSort::sort); System.out.println(\"isSorted: \" + Helper.isSorted(arr)); &#125; time = time / m; System.out.println(time + \"s\"); &#125;&#125; è¾“å‡ºä¸º isSorted: true0.0292856418s å¸Œå°”æ’åº 10 æ¬¡å¹³å‡æ‰€éœ€çš„æ—¶é—´åªæœ‰ 0.03sï¼Œä¸é€‰æ‹©æ’åºå’Œæ’å…¥æ’åºä¸æ˜¯ä¸€ä¸ªç­‰çº§ä¸Šçš„ã€‚ å½’å¹¶æ’åºè‡ªé¡¶å‘ä¸‹çš„å½’å¹¶æ’åºå½’å¹¶æ’åºçš„æ€æƒ³æ˜¯å°†æ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼Œç„¶åå¯¹å·¦ã€å³ä¸¤è¾¹çš„æ•°ç»„è¿›è¡Œæ’åºï¼Œç„¶åå°†å·¦å³ä¸¤è¾¹çš„å·²ç»æœ‰åºæ•°ç»„è¿›è¡Œèåˆæˆä¸€ä¸ªæœ‰åºçš„æ•°ç»„ï¼Œè€Œå·¦å³ä¸¤è¾¹çš„æ’åºé—®é¢˜ä¹Ÿå¯ä»¥æŒ‰ç…§ä¸Šé¢çš„æ€æƒ³è¿›è¡Œï¼Œç›´åˆ°æ•°ç»„åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬è®¤ä¸ºå·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œç„¶åå‘ä¸Šè¿›è¡Œèåˆ ä¸‹é¢çš„ä»£ç ç®€è¦çš„ç®€è¿°äº†ä¸Šé¢çš„è¿‡ç¨‹ import java.util.Arrays;public class MergeSort &#123; public static void sort(int[] arr) &#123; if (arr == null || arr.length &lt; 2) &#123; return ; &#125; mergeSort(arr,0, arr.length-1); &#125; private static void mergeSort(int[] arr, int left, int right) &#123; //å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå¯è®¤ä¸ºæ˜¯æœ‰åºçš„äº† if (left == right) &#123; return ; &#125; int mid = left + (right - left) / 2; //å¯¹å·¦å³ä¸¤è¾¹è¿›è¡Œæ’åº mergeSort(arr,left,mid); mergeSort(arr,mid + 1, right); //èåˆå·¦å³ä¸¤è¾¹çš„æ•°ç»„ merge(arr,left,right); &#125;&#125; ç°åœ¨çš„å…³é”®æ˜¯å¦‚ä½•èåˆå·¦å³ä¸¤ä¸ªæœ‰åºçš„æ•°ç»„ä¸ºä¸€ä¸ªæœ‰åºçš„æ•°ç»„ï¼Œæ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ private static void merge(int[] arr, int left, int right) &#123; //è¦èåˆçš„æ•°ç»„ int[] help = new int[right - left + 1]; int mid = left + (right - left) / 2; //å·¦å³æ•°ç»„çš„é¦–éƒ¨ int p1 = left; int p2 = mid + 1; //è¦èåˆæ•°ç»„çš„é¦–éƒ¨ int i = 0; //å¦‚æœä¸¤ä¸ªæ•°ç»„éƒ½æ²¡æœ‰éå†å®Œæ¯• while (p1 &lt;= mid &amp;&amp; p2 &lt;= right) &#123; if (arr[p1] &lt;= arr[p2]) &#123; help[i++] = arr[p1++]; &#125; else &#123; help[i++] = arr[p2++]; &#125; &#125; //å¦‚æœp2éå†å®Œæ¯•äº†ï¼Œå°†p1ä¸­å‰©ä¸‹çš„å…ƒç´ å¤åˆ¶åˆ°èåˆçš„æ•°ç»„ä¸­ while (p1 &lt;= mid) &#123; help[i++] = arr[p1++]; &#125; //åŒä¸Š while (p2 &lt;= right) &#123; help[i++] = arr[p2++]; &#125; //å°†èåˆçš„æ•°ç»„æŒ‰åºèµ‹å€¼ç»™æˆ‘ä»¬è¦æ’åºçš„æ•°ç»„ for (int j = left; j &lt;= right; j++) &#123; arr[j] = help[j - left]; &#125;&#125; æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ 10 æ¬¡å¹³å‡æ‰€éœ€æ—¶é—´ä¸º isSorted: true0.0334043239s å½’å¹¶æ’åºæ˜¯ $O(N \\log N)$ çº§åˆ«çš„ç®—æ³•ï¼Œæ¯”é€‰æ‹©æ’åºå’Œæ’å…¥æ’åºè¦å¿«å¾ˆå¤šã€‚ ä¼˜åŒ–ä¸Šé¢æˆ‘ä»¬åœ¨å¯¹å·¦å³ä¸¤ä¸ªæ•°ç»„æ’å¥½åºä¹‹åï¼Œç›´æ¥è¿›è¡Œäº† merge æ“ä½œ mergeSort(arr,left,mid);mergeSort(arr,mid + 1, right);merge(arr,left,right); ä½†æ˜¯å¦‚æœè€ƒè™‘åˆ°å¦‚ä¸‹æƒ…å†µ mergeSort(arr,left,mid);mergeSort(arr,mid + 1, right);if (arr[mid] &gt; arr[mid + 1]) merge(arr,left,right); æˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°ï¼Œæ’å…¥æ’åºåœ¨æ•°ç»„è¿‘ä¹æœ‰åºçš„æƒ…å†µä¸‹æ’åºçš„é€Ÿåº¦éå¸¸çš„å¿«ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘å½“æ•°ç»„è¢«åˆ’åˆ†åˆ°å°äºä¸€å®šçš„è§„æ¨¡(å½“æ•°ç»„å°äºä¸€å®šè§„æ¨¡æ—¶ï¼Œè¿‘ä¹æœ‰åºçš„æ¦‚ç‡å¾ˆå¤§)æ—¶æˆ‘ä»¬ä¸åœ¨å‘ä¸‹åˆ’åˆ†ï¼Œè€Œæ˜¯è½¬è€Œç”¨æ’å…¥æ’åºï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ Helper ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³• public static void insertSort(int[] arr, int l, int r) &#123; for (int i = l + 1; i &lt;= r; i++) &#123; int e = arr[i]; //ä¿å­˜è¦æ’å…¥çš„å…ƒç´  int j; //è®°å½•è¦æ’å…¥çš„ä½ç½® for (j = i; j &gt; l; j--) &#123; if (arr[j - 1] &gt; e) &#123; arr[j] = arr[j - 1]; &#125; else &#123; break; &#125; &#125; arr[j] = e; &#125;&#125; è¿™ä¸ªæ–¹æ³•ä¸æ’å…¥æ’åºçš„ç®—æ³•å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡è§„å®šäº†å¯¹ä»€ä¹ˆèŒƒå›´çš„æ•°ç»„è¿›è¡Œæ’åºï¼Œæ‰€ä»¥å½’å¹¶æ’åºçš„ç®—æ³•å¯ä»¥ä¿®æ”¹å¦‚ä¸‹ private static void mergeSort(int[] arr, int left, int right) &#123; //å½“æ•°ç»„å°äº15æ—¶ï¼Œä½¿ç”¨æ’å…¥æ’åº if (right - left &lt; 15) &#123; Helper.insertSort(arr, left, right); return; &#125; int mid = left + (right - left) / 2; mergeSort(arr,left,mid); mergeSort(arr,mid + 1, right); if (arr[mid] &gt; arr[mid + 1]) merge(arr,left,right);&#125; å†æ¬¡æµ‹è¯• 10 æ¬¡å¹³å‡æ‰€éœ€æ—¶é—´ isSorted: true0.028484280499999997s è‡ªåº•å‘ä¸Šçš„å½’å¹¶æ’åºæˆ‘ä»¬åœ¨ä¸Šé¢ä½¿ç”¨çš„å½’å¹¶æ’åºæ˜¯è‡ªé¡¶å‘ä¸‹ä½¿ç”¨é€’å½’æ¥å®Œæˆçš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä¸€å®šè¦è‡ªé¡¶å‘ä¸‹çš„å®Œæˆè¿™ä¸ªæ’åºè¿‡ç¨‹ï¼Œè€Œæ˜¯å¯ä»¥è‡ªåº•å‘ä¸Šè¿›è¡Œæ’åºï¼Œé¦–å…ˆå°†åº•å±‚çš„åºæ‹å¥½ï¼Œç„¶åè¿›è¡Œ merge ä¸€è·¯å‘ä¸Šå®Œæˆæ’åº public static void sortBU(int[] arr) &#123; if (arr == null || arr.length &lt; 2) &#123; return ; &#125; //æ¯è½®2*szä¸ªå…ƒç´ ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥sz = 2, å› ä¸ºæˆ‘ä»¬åé¢ä¼ å…¥midæ˜¯è¦/2ï¼Œæ‰€ä»¥è¿™é‡Œçš„ç²’åº¦å°±ä¸ºsz for (int sz = 1; sz &lt;= arr.length; sz += sz) &#123; //mid &lt;= arr.length - 1 for (int i = 0; i + sz &lt; arr.length; i += (sz + sz)) &#123; //å°æ•°ç»„ä½¿ç”¨æ’å…¥æ’åº if (2 * sz &lt; 15) &#123; Helper.insertSort(arr,i, i + sz + sz - 1); continue; &#125; //åªæœ‰å½“å³è¾¹æœ€å°æ¯”å·¦è¾¹æœ€å¤§è¿˜å¤§æ—¶æ‰éœ€è¦merge if (arr[i + sz -1] &gt; arr[Math.min(i + sz, arr.length - 1)]) //é˜²æ­¢è¶Šç•Œ merge(arr, i, i + sz - 1, Math.min(i + sz + sz - 1, arr.length - 1)); //é˜²æ­¢è¶Šç•Œ &#125; &#125;&#125;private static void merge(int[] arr, int left, int mid, int right) &#123; int[] help = new int[right - left + 1]; int p1 = left; int p2 = mid + 1; int i = 0; while (p1 &lt;= mid &amp;&amp; p2 &lt;= right) &#123; if (arr[p1] &lt;= arr[p2]) &#123; help[i++] = arr[p1++]; &#125; else &#123; help[i++] = arr[p2++]; &#125; &#125; while (p1 &lt;= mid) &#123; help[i++] = arr[p1++]; &#125; while (p2 &lt;= right) &#123; help[i++] = arr[p2++]; &#125; for (int j = left; j &lt;= right; j++) &#123; arr[j] = help[j - left]; &#125;&#125; ä½ å¯èƒ½å‘ç°è¿™æ¬¡çš„ merge éœ€è¦è‡ªå·±ä¼ å…¥ mid å€¼ï¼Œè€Œä¸æ˜¯è‡ªå·±è®¡ç®—ã€‚å¯ä»¥æ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆ? ç°åœ¨æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹è‡ªåº•å‘ä¸Šæ’åºæ‰€éœ€è¦çš„æ—¶é—´ isSorted: true0.031012182500000006s è‡ªåº•å‘ä¸Šçš„æ’åºä¼šæ¯”è‡ªé¡¶å‘ä¸‹çš„æ’åºæ…¢ï¼Œä½†æ˜¯è‡ªåº•å‘ä¸Šçš„æ’åºæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹ç‚¹ï¼Œå®ƒæ²¡æœ‰åˆ©ç”¨æ•°ç»„éšæœºè®¿é—®çš„ç‰¹ç‚¹ï¼Œå³æ•°ç»„é€šè¿‡ä¸‹æ ‡å¯¹å…ƒç´ è®¿é—®(æ’å…¥æ’åºä¸­æœ‰ï¼Œä½†æ˜¯ä½ å¯ä»¥ä¸ä¼˜åŒ–è¿™é‡Œ)ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¯¹é“¾è¡¨ä½¿ç”¨è‡ªåº•å‘ä¸Šçš„æ’åºã€‚ å¿«é€Ÿæ’åºåŸºæœ¬ç®—æ³•åœ¨çœ‹å¿«é€Ÿæ’åºç®—æ³•å‰æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªé—®é¢˜ï¼Œç»™å®šä¸€ä¸ªæ•°ï¼Œè¦æ±‚æ•°ç»„å·¦è¾¹çš„æ•°éƒ½å°äºç­‰äºè¿™ä¸ªæ•°ï¼Œæ•°ç»„å³è¾¹çš„æ•°éƒ½å¤§äºè¿™ä¸ªæ•°ï¼Œè¯·é—®è¿™ä¸ªç®—æ³•æ€ä¹ˆå†™ã€‚é¦–å…ˆæˆ‘ä»¬å°†æ•°ç»„æ ‡è®°ä¸ºå°äºç­‰äºåŒºå’Œå¤§äºåŒºï¼Œå¹¶ç”¨ less å’Œ more æ ‡è®°åŒºåŸŸçš„èŒƒå›´ï¼Œæ‰€æœ‰ index &lt;= less çš„å…ƒç´ éƒ½å°äºæŒ‡å®šæ•°ï¼Œæ‰€æœ‰ index &gt;= more çš„éƒ½å¤§äºæŒ‡å®šæ•°ï¼Œä¸‹å›¾å°†è®²è§£å…·ä½“çš„ç®—æ³• ä¸Šé¢çš„è¿‡ç¨‹æˆ‘ä»¬ç§°ä¸º partitionï¼Œå¯¹åº”çš„ä»£ç å¦‚ä¸‹ int e = 6;public static int partition(int[] arr, int L, int R) &#123; int less = L - 1; int more = R + 1; int cur = L; while (cur &lt; more) &#123; if (arr[cur] &lt;= e) &#123; //å¦‚æœå½“å‰å…ƒç´ å°äºæŒ‡å®šå…ƒç´  lesså’Œcurå‘å‰ç§»åŠ¨ less++; cur++; &#125; else if (arr[cur] &gt; e) &#123; Helper.swap(arr,--more,cur); &#125; else &#123; cur++; &#125; &#125; //è¿”å›ä¸¤ä¸ªæ•°ç»„çš„åˆ†ç•Œå¤„ return less;&#125; é‚£ä¹ˆå¿«é€Ÿæ’åºçš„æ€æƒ³å°±æ˜¯é€‰å®šä¸€ä¸ªæ•°(ä¸€èˆ¬æˆ‘ä»¬é€‰æ‹©è¦æ’åºèŒƒå›´å†…çš„æœ€åä¸€ä¸ªæ•° arr[R])ï¼Œè¦æ±‚å·¦è¾¹çš„æ•°æ¯”è¿™ä¸ªæ•°å°(æˆ–ç­‰äº)ï¼Œå³è¾¹çš„æ•°æ¯”è¿™ä¸ªæ•°å¤§ã€‚ç„¶ååˆæ¥ç€å¯¹å·¦å³ä¸¤è¾¹çš„æ•°è¿›è¡Œä¸Šè¿°çš„åˆ†å‰²(partition)ï¼Œç›´è‡³åˆ†å‰²åçš„æ•°ç»„åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¯è®¤ä¸ºæ˜¯æœ‰åºçš„ï¼Œè¿™æ—¶æ•°ç»„å°±æ˜¯æœ‰åºçš„äº† public class QuickSort &#123; public static void sort(int[] arr) &#123; if (arr == null || arr.length &lt; 2) &#123; return; &#125; quickSort(arr,0,arr.length-1); &#125; public static void quickSort(int[] arr, int l, int r) &#123; //å½“æ•°ç»„è¾ƒå°æ—¶ï¼Œä½¿ç”¨æ’å…¥æ’åº if (r - l &lt; 15) &#123; Helper.insertSort(arr, l, r); return; &#125; if (l &lt; r) &#123; int p = partition(arr, l, r); quickSort(arr, l, p); quickSort(arr, p + 1, r); &#125; &#125; public static int partition(int[] arr, int L, int R) &#123; int less = L - 1; int more = R + 1; int cur = L; while (cur &lt; more) &#123; if (arr[cur] &lt;= arr[R]) &#123; less++; cur++; &#125; else if (arr[cur] &gt; arr[R]) &#123; Helper.swap(arr,--more,cur); &#125; &#125; return less; &#125;&#125; æµ‹è¯•æ­¤æ—¶ 10 æ¬¡å¹³å‡æ‰€éœ€çš„æ—¶é—´ isSorted: true0.023240137399999996s éšæœºå¿«æ’ä½†æ˜¯æ­¤æ—¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ­¤æ—¶æ•°ç»„æ˜¯è¿‘ä¹æœ‰åºçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ ¹æ®æœ€åä¸€ä¸ªå…ƒç´ åˆ’åˆ†å…ƒç´ ä¼šåˆ’åˆ†å‡ºå·¦å³ä¸¤è¾¹çš„æ•°ç»„å¤±è¡¡ æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè€Œæ˜¯é€‰æ‹©ä¸€ä¸ªéšæœºçš„å…ƒç´ ï¼Œæˆ‘ä»¬åªè¦åœ¨ä¸Šé¢çš„ç¨‹åºä¸­åŠ å…¥ä¸‹é¢çš„ä¸€è¡Œä»£ç å³å¯ if (l &lt; r) &#123; //éšæœºä¸€ä¸ªä¸‹æ ‡å’Œæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ Helper.swap(arr, (int)Math.random() * (r - l + 1) + l, r); // éšæœºå¿«æ’ int p = partition(arr, l, r); quickSort(arr, l, p); quickSort(arr, p + 1, r);&#125; ä¸‰è·¯å¿«æ’è¿™æ—¶éœ€è¦è€ƒè™‘è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œå¦‚æœæ•°ç»„ä¸­æœ‰ååˆ†å¤šçš„é‡å¤å…ƒç´ ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å…ƒç´ é‡å¤çš„å­æ•°ç»„ï¼Œè¿™æ—¶åº”è¯¥å°±ä¸åº”è¯¥æ’åºäº†ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç®—æ³•è¿˜æ˜¯ä¼šæŠŠæ•°ç»„ç»§ç»­åˆ‡åˆ†ä¸ºæ›´å°çš„æ•°ç»„è¿›è¡Œæ’åºï¼Œè¿™å°±æœ‰å¾ˆå¤§çš„æ”¹è¿›æ½œåŠ›ã€‚æ‰€ä»¥æˆ‘ä»¬è€ƒè™‘æˆ‘ä»¬çš„ partition ç®—æ³•ä¸å†åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œè€Œæ˜¯åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œå°äºï¼Œç­‰äºå’Œå¤§äºä¸‰ä¸ªåŒºåŸŸ æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„æ’åºç®—æ³•å¦‚ä¸‹ public static void quickSort(int[] arr, int l, int r) &#123; if (r - l &lt; 15) &#123; Helper.insertSort(arr, l, r); return; &#125; if (l &lt; r) &#123; Helper.swap(arr, (int)Math.random() * (r - l + 1) + l, r); // éšæœºå¿«æ’ //på¾—åˆ°çš„æ˜¯ç­‰äºåŒºçš„èŒƒå›´ int[] p = partition(arr,l,r); //å¯¹ç­‰äºåŒºä¸ç”¨æ’åº quickSort(arr,l,p[0] - 1); quickSort(arr,p[1] + 1, r); &#125;&#125;public static int[] partition(int[] arr, int L, int R) &#123; int less = L - 1; int more = R; int cur = L; while (cur &lt; more) &#123; if (arr[cur] &lt; arr[R]) &#123; //ä¸lessçš„å‰ä¸€ä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢ å¹¶ä¸”lesså’Œcurå‘å‰ç§»åŠ¨ Helper.swap(arr,++less,cur++); &#125; else if (arr[cur] &gt; arr[R]) &#123; //ä¸moreçš„åä¸€ä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢ å¹¶ä¸”moreå‘åç§»åŠ¨ï¼Œå¹¶ä¸”curå’Œlesséƒ½ä¸ç§»åŠ¨ Helper.swap(arr,--more,cur); &#125; else &#123; //å¦‚æœç­‰äºï¼Œå°†curå‘å‰ç§»åŠ¨å³å¯ cur++; &#125; &#125; //æœ€åå°†æœ€åä¸€ä¸ªå…ƒç´ ä¸moreä½ç½®çš„å…ƒç´ è¿›è¡Œäº¤æ¢ Helper.swap(arr,R,more); //è¿”å›ç­‰äºåŒºçš„å·¦å³ä¸‹æ ‡ return new int[]&#123;less+1,more&#125;;&#125; å †æ’åºå †çš„æœ‰å…³çŸ¥è¯†å¯ä»¥å‚è€ƒæ•°æ®ç»“æ„â€“Javaæè¿°ä¸­ä¼˜å…ˆé˜Ÿåˆ—ä¸å †çš„å†…å®¹ï¼Œå¦‚æœä½ å·²ç»ä»”ç»†çš„é˜…è¯»äº†è¯ï¼Œç›¸æ¯”ä½ å·²ç»ç†Ÿæ‚‰äº†å †çš„æ€§è´¨äº†ï¼Œé‚£ä¹ˆä¸‹é¢å°±ç›´æ¥ä¸Šä»£ç äº† import java.util.Arrays;public class HeapSort &#123; public static void sort(int[] arr) &#123; if (arr == null || arr.length &lt; 2) &#123; return; &#125; //å°†æ•°ç»„å˜æˆå †ç»“æ„ for (int i = 0; i &lt; arr.length; i++) &#123; heapInsert(arr,i); &#125; int heapSize = arr.length; while (heapSize &gt; 0) &#123; Helper.swap(arr,0,--heapSize); heapify(arr,0,heapSize); &#125; &#125; public static void heapInsert(int[] arr, int index) &#123; while (arr[index] &gt; arr[(index-1)/2]) &#123; Helper.swap(arr,index,(index-1)/2); index = (index - 1)/2; &#125; &#125; public static void heapify(int[] arr, int index, int heapSize) &#123; int left = 2 * index + 1; while (left &lt; heapSize) &#123; int right = left + 1; //å‡è®¾å·¦æ›´å¤§ int larger = left; //å¦‚æœå³æ¯”å·¦å¤§ æ”¹å˜largerä¸ºå³ if (right &lt; heapSize &amp;&amp; arr[right] &gt; arr[left]) &#123; larger = right; &#125; //å¦‚æœçˆ¶æ¯”å·¦å³å­èŠ‚ç‚¹éƒ½å¤§ï¼Œè¯´æ˜è¿˜æ˜¯å †ï¼Œç›´æ¥é€€å‡ºå¾ªç¯ if (arr[larger] &lt; arr[index]) &#123; break; &#125; //å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆå°±å’Œæ¯”è¾ƒå¤§çš„äº¤æ¢äº¤æ¢ Helper.swap(arr,larger,index); index = larger; left = index * 2 + 1; &#125; &#125; public static void main(String[] args) &#123; int n = 100000; int m = 10; double time = 0; for (int i = 0; i &lt; m; i++) &#123; int[] arr = Helper.generateArray(n, 0, n); time += Helper.testTime(arr, HeapSort::sort); System.out.println(\"isSorted: \" + Helper.isSorted(arr)); &#125; time = time / m; System.out.println(time + \"s\"); &#125;&#125; æµ‹è¯• 10 æ¬¡å¹³å‡æ‰€éœ€æ—¶é—´ä¸º isSorted: true0.060118443099999995s","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"æ’åº","slug":"æ’åº","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%8E%92%E5%BA%8F/"}]},{"title":"æ•°æ®ç»“æ„--Javaæè¿°","date":"2019-09-23T16:00:00.000Z","path":"/æ•°æ®ç»“æ„--Javaæè¿°/","text":"æœ¬ç¯‡æ–‡ç« æ˜¯ä¸ºäº†è®°å½•è‡ªå·±åœ¨å­¦ä¹ æ•°æ®ç»“æ„æ—¶çš„ç¬”è®°ï¼Œä¼šå¯¹å¸¸è§çš„æ•°æ®ç»“æ„åšåŸºæœ¬çš„ä»‹ç»ä»¥åŠä½¿ç”¨Javaè¯­è¨€è¿›è¡Œå®ç°ã€‚åŒ…æ‹¬ åŠ¨æ€æ•°ç»„ æ ˆ é˜Ÿåˆ— é“¾è¡¨ äºŒåˆ†æœç´¢æ ‘ ä¼˜å…ˆé˜Ÿåˆ—å’Œå † çº¿æ®µæ ‘ Trie å¹¶æŸ¥é›† AVL æ ‘ çº¢é»‘æ ‘ å“ˆå¸Œè¡¨ åŠ¨æ€æ•°ç»„APIä»‹ç»æ•°ç»„æ˜¯ä¸€ç§æ ¹æ®ä¸‹æ ‡æ“ä½œçš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„æŸ¥è¯¢é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å®ƒæœ‰ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯æ•°ç»„çš„å®¹é‡ä¸€æ—¦åœ¨åˆ›å»ºæ—¶ç¡®å®šï¼Œå°±ä¸èƒ½è¿›è¡Œæ›´æ”¹ï¼Œæ‰€ä»¥ä¸ºäº†å…‹æœè¿™ä¸€ç¼ºç‚¹ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªè‡ªå·±çš„æ•°ç»„ï¼Œå¹¶é™¤æ­¤ä»¥å¤–ï¼Œè¿˜ä¼šå®ç°ä¸€äº›æ–¹æ³•ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ add(int index, E e) å‘æŒ‡å®š index æ·»åŠ å…ƒç´  e get(int index) è·å¾—æŒ‡å®š index çš„å…ƒç´  remove(int index) åˆ é™¤æŒ‡å®š index çš„å…ƒç´ å¹¶è¿”å›è¯¥å…ƒç´  set(int index, E e) æ›´æ”¹ index å¤„çš„å…ƒç´ ä¸º e getSize() è¿”å›æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•° contains(E e) æŸ¥è¯¢æ•°ç»„æ˜¯å¦åŒ…å«å…ƒç´  e isEmpty() æŸ¥çœ‹æ•°ç»„æ˜¯å¦ä¸ºç©º(æ˜¯å¦æœ‰å…ƒç´ ) find(E e) è¿”å›æ•°ç»„ä¸­å…ƒç´  e ç¬¬ä¸€æ¬¡å‡ºç°çš„ indexï¼Œè‹¥æ²¡æœ‰å…ƒç´  eï¼Œåˆ™è¿”å› -1 æ–°å»ºä¸€ä¸ª Array ç±»ï¼Œå®ƒå«æœ‰ä¸¤ä¸ªç§æœ‰æˆå‘˜å˜é‡ E[] data ç”¨ä»¥ä¿å­˜æ•°æ® int size ç”¨ä»¥è®°å½•æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•° é™¤æ­¤ä»¥å¤–è¿˜æœ‰ä¸¤ä¸ªæ„é€ æ–¹æ³• Array(int capacity) è®¾å®šæ•°ç»„çš„å®¹é‡ Array() å®¹é‡é»˜è®¤ä¸º 10 public class Array&lt;E&gt; &#123; private E[] data; private int size; public Array(int capacity) &#123; data = (E[]) new Object[capacity]; size = 0; &#125; public Array() &#123; this(10); &#125;&#125; ç°åœ¨æˆ‘ä»¬æ¥å®ç°ä¸Šé¢æåˆ°çš„æ–¹æ³•ã€‚ æ–¹æ³•å®ç°é¦–å…ˆæ¥å®ç° getSize() æ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯è¿”å›æ•°ç»„å…ƒç´ çš„ä¸ªæ•°çš„ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å› size å³å¯ public int getSize() &#123; return size;&#125; isEmpty() æ˜¯ä¸ºäº†æŸ¥çœ‹æ•°ç»„ä¸­æ˜¯å¦è¿˜æœ‰å…ƒç´ ï¼Œå¦‚æœ size ä¸º 0 çš„è¯è¯´æ˜æ•°ç»„ä¸ºç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› size == 0 å³å¯ public boolean isEmpty() &#123; return size == 0;&#125; ç°åœ¨æ¥å®ç° add(int index, E e) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„å®ç°æ˜¯å°† index åé¢çš„å…ƒç´ éƒ½å‘åç§»åŠ¨ä¸€ä½ï¼Œç„¶ååœ¨ index å¤„æ’å…¥å…ƒç´  e public void add(int index, E e) &#123; //å¯¹inexè¿›è¡ŒéªŒè¯ å¦‚æœä¸ç¬¦åˆè§„èŒƒåˆ™æŠ›å‡ºå¼‚å¸¸ if (index &lt; 0 || index &gt; size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; //å°†å…ƒç´ å‘åç§»åŠ¨ for (int i = size; i &gt; index; i--) &#123; data[i] = data[i - 1]; &#125; //åœ¨indexå¤„æ’å…¥å…ƒç´ e data[index] = e; //æ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°+1 size++;&#125; æ ¹æ®è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«çš„å®ç° addFirst(E e) å’Œ addLast(E e) æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸€ä¸ªæ˜¯åœ¨æ•°ç»„å¤´æ·»åŠ å…ƒç´ ï¼Œä¸€ä¸ªæ˜¯åœ¨æ•°ç»„çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´  public void addLast(E e) &#123; //åœ¨index = sizeå¤„æ·»åŠ å…ƒç´  å³åœ¨æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´  add(size,e);&#125;public void addFirst(E e) &#123; //åœ¨index = 0å¤„æ·»åŠ ä¸€ä¸ªå…ƒç´  å³åœ¨æ•°ç»„å¤´æ·»åŠ ä¸€ä¸ªå…ƒç´  add(0,e);&#125; ä¸‹é¢æ¥å®ç° remove(int index) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯åˆ é™¤ index å¤„çš„å…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ è¿”å›ï¼Œä»¥æ·»åŠ çš„æ“ä½œç›¸åï¼Œåˆ é™¤æ˜¯å°†åé¢çš„å…ƒç´ å‘å‰ç§»åŠ¨ï¼Œè¦†ç›–æ‰ index å¤„çš„å…ƒç´ å³å¯åˆ é™¤ public E remove(int index) &#123; //å‚æ•°æ£€æŸ¥ if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; //è·å¾—indexå¤„çš„å…ƒç´ ç”¨ä»¥è¿”å› E e = data[index]; //å°†å…ƒç´ ä»åå‘å‰ç§»ä¸€ä¸ª for (int i = index; i &lt; size - 1; i++) &#123; data[i] = data[i+1]; &#125; //æ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°-1 size --; //è¿”å›åˆ é™¤çš„å…ƒç´  return e;&#125; åŒç†ï¼Œæ ¹æ®è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å®ç° removeLast() å’Œ removeFirst() æ–¹æ³• public E removeLast() &#123; return remove(size -1);&#125;public E removeFirst() &#123; return remove(0);&#125; æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªåˆ é™¤æŒ‡å®šå…ƒç´ çš„æ–¹æ³• removeElement(E e)ï¼Œæˆ‘ä»¬ä¼šéå†æ•°ç»„ï¼Œå¦‚æœå‘ç°æœ‰å…ƒç´ ç­‰äºè¯¥å…ƒç´ ï¼Œé‚£ä¹ˆåˆ é™¤è¯¥å…ƒç´ å¹¶é€€å‡ºæ–¹æ³•ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•åªåˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´  eï¼Œå¹¶ä¸æ˜¯æ•°ç»„æ‰€æœ‰çš„å…ƒç´  e public void removeElement(E e) &#123; //éå†æ•°ç»„ for (int i = 0; i &lt; size; i++) &#123; //å¦‚æœæ‰¾åˆ°ç­‰äºè¯¥å…ƒç´ çš„å…ƒç´  if (e.equals(data[i])) &#123; //åˆ é™¤è¯¥å…ƒç´  remove(i); //é€€å‡ºæ–¹æ³• return; &#125; &#125;&#125; ä¸‹é¢å®ç° contains(E e) æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„æ€è·¯åŒåˆ é™¤æŒ‡å®šå…ƒç´ ç›¸ä¼¼ï¼Œéå†æ•°ç»„ï¼Œå¦‚æœæ‰¾åˆ°å…ƒç´ ä¸æŒ‡å®šå…ƒç´ ç›¸åŒï¼Œé‚£ä¹ˆè¿”å› trueï¼Œå¦‚æœéå†å®Œæ•°ç»„è¿˜æ²¡æœ‰æ‰¾åˆ°ä¸ä¹‹ç›¸ç­‰çš„å…ƒç´ ï¼Œé‚£ä¹ˆè¿”å› false public boolean contains(E e) &#123; //éå†æ•°ç»„ for (int i = 0; i &lt; size; i++) &#123; //å¦‚æœæ‰¾åˆ°å…ƒç´ ï¼Œé‚£ä¹ˆè¿”å›true if (data[i].equals(e)) &#123; return true; &#125; &#125; //å¦‚æœéå†å®Œæ‰€æœ‰æ•°ç»„æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆè¿”å›false return false;&#125; find(E e) æ–¹æ³•çš„å®ç°ä¹Ÿæ˜¯éå†æ•°ç»„ï¼Œå¦‚æœæ‰¾åˆ°äº†å…ƒç´ ï¼Œé‚£ä¹ˆè¿”å›ä¸‹æ ‡ï¼Œå¦‚æœéå†å®Œæ•°ç»„éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆè¿”å› -1 public int find(E e) &#123; //éå†æ•°ç»„ for (int i = 0; i &lt; size; i++) &#123; //æ‰¾åˆ°å…ƒç´ åˆ™è¿”å›ä¸‹æ ‡ if (data[i].equals(e)) &#123; return i; &#125; &#125; //å¦‚æœéå†å®Œæ•°ç»„éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›-1 return -1;&#125; ä¸‹é¢å®ç° get(int index) å’Œ set(int index, E e)ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„å®ç°åŠå…¶ç®€å•ï¼Œç›´æ¥ä¸Šä»£ç  public E get(int index) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; return data[index];&#125;public void set(int index, E e) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; data[index] = e;&#125; æˆ‘ä»¬å¯ä»¥æ ¹æ® get æ–¹æ³•å®ç° getLast()å’Œ getFirst() æ–¹æ³• public E getFirst() &#123; return get(0);&#125;public E getLast() &#123; return get(size - 1);&#125; ç°åœ¨æˆ‘ä»¬å·²ç»å®ç°äº† API ä¸­æåˆ°çš„æ‰€æœ‰çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰è§£å†³æ•°ç»„å®¹é‡å›ºå®šçš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª resize(int newCapacity)ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ”¹å˜æ•°ç»„çš„å®¹é‡å¤§å°ï¼Œè¿™æ ·å½“æ•°ç»„çš„å®¹é‡ä¸è¶³æ—¶ï¼Œæˆ‘ä»¬è°ƒç”¨è¯¥æ–¹æ³•å°±å¯ä»¥å°†æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œæˆ–è€…å½“æ•°ç»„ä¸­æœ‰å¤§é‡ç©ºé—´ç©ºé—²æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç¼©å°æ•°ç»„çš„å®¹é‡ï¼Œä»£ç å¦‚ä¸‹ private void resize(int newCapacity) &#123; //åˆ›å»ºä¸€ä¸ªæ–°å®¹é‡çš„æ•°ç»„ E[] temp = (E[]) new Object[newCapacity]; //å°†æ•°ç»„ä¸­çš„æ•°æ®å…¨éƒ¨æ”¾å…¥æ–°æ•°ç»„ä¸­ for (int i =0; i &lt; size; i++) &#123; temp[i] = data[i]; &#125; //æ”¹å˜æ•°ç»„æŒ‡é’ˆæŒ‡å‘ data = temp;&#125; ç°åœ¨æˆ‘ä»¬æ”¹å˜ add(int index, E e)å’Œremove(int index) æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šåœ¨æ·»åŠ å…ƒç´ å’Œåˆ é™¤å…ƒç´ æ—¶æ£€æŸ¥æ•°ç»„çš„å®¹é‡ï¼Œä»¥ä¾¿å¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹æˆ–è€…ç¼©å®¹ public void add(int index, E e) &#123; if (index &lt; 0 || index &gt; size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; //å¦‚æœæ•°ç»„å®¹é‡æ»¡äº† é‚£ä¹ˆå°†æ•°ç»„çš„å®¹é‡æ‰©ä¸ºåŸæ¥çš„ä¸¤å€ if (size == data.length) &#123; resize(data.length * 2); &#125; for (int i = size; i &gt; index; i--) &#123; data[i] = data[i - 1]; &#125; data[index] = e; size++;&#125; public E remove(int index) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; E e = data[index]; for (int i = index; i &lt; size - 1; i++) &#123; data[i] = data[i+1]; &#125; size --; //å¦‚æœæ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°ä¸ºæ•°ç»„å®¹é‡çš„1/4ï¼Œé‚£ä¹ˆå®¹é‡å˜ä¸ºåŸæ¥çš„1/2 //æ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆæ˜¯1/4 æç¤ºï¼šå¤æ‚åº¦éœ‡è¡ if (size == data.length/4) &#123; resize(data.length/2); &#125; return e;&#125; ä¸ºäº†æ–¹ä¾¿çš„æ‰“å° Array ç±»ï¼Œæˆ‘ä»¬é‡å†™ toString() æ–¹æ³•å¦‚ä¸‹ public String toString() &#123; StringBuilder str = new StringBuilder(); str.append(\"size \" + size); str.append(\" capacity \" + data.length); str.append(\"\\n[\"); for (int i = 0; i &lt; size; i++) &#123; if (i == size - 1) &#123; str.append(data[i].toString()); &#125; else &#123; str.append(data[i].toString() + \", \"); &#125; &#125; str.append(\"]\"); return str.toString();&#125; è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œå…¨å®ç°äº† Arrayï¼Œå®ƒçš„å®¹é‡æ²¡æœ‰é™åˆ¶ï¼Œå¹¶ä¸”æä¾›äº†å¾ˆå¤šçš„æ–¹æ³•ä¾›ç”¨æˆ·è°ƒç”¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¯¥ç±»æ¥å®ç°å…¶å®ƒçš„åŸºæœ¬çš„æ•°æ®ç»“æ„ã€‚ä¸‹é¢è´´å‡ºå®Œæ•´çš„ä»£ç  public class Array&lt;E&gt; &#123; private E[] data; private int size; public Array(int capacity) &#123; data = (E[]) new Object[capacity]; size = 0; &#125; public Array() &#123; this(10); &#125; public int getSize() &#123; return size; &#125; public boolean isEmpty() &#123; return size == 0; &#125; public void addLast(E e) &#123; add(size,e); &#125; public void addFirst(E e) &#123; add(0,e); &#125; public void add(int index, E e) &#123; if (index &lt; 0 || index &gt; size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; if (size == data.length) &#123; resize(data.length * 2); &#125; for (int i = size; i &gt; index; i--) &#123; data[i] = data[i - 1]; &#125; data[index] = e; size++; &#125; public E removeLast() &#123; return remove(size -1); &#125; public E removeFirst() &#123; return remove(0); &#125; public E remove(int index) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; E e = data[index]; for (int i = index; i &lt; size - 1; i++) &#123; data[i] = data[i+1]; &#125; size --; if (size == data.length/4) &#123; resize(data.length/2); &#125; return e; &#125; public void removeElement(E e) &#123; for (int i = 0; i &lt; size; i++) &#123; if (e.equals(data[i])) &#123; remove(i); return; &#125; &#125; &#125; public boolean contains(E e) &#123; for (int i = 0; i &lt; size; i++) &#123; if (data[i].equals(e)) &#123; return true; &#125; &#125; return false; &#125; public int find(E e) &#123; for (int i = 0; i &lt; size; i++) &#123; if (data[i].equals(e)) &#123; return i; &#125; &#125; return -1; &#125; private void resize(int newCapacity) &#123; E[] temp = (E[]) new Object[newCapacity]; for (int i =0; i &lt; size; i++) &#123; temp[i] = data[i]; &#125; data = temp; &#125; public E get(int index) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; return data[index]; &#125; public E getFirst() &#123; return get(0); &#125; public E getLast() &#123; return get(size - 1); &#125; public void set(int index, E e) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; data[index] = e; &#125; public String toString() &#123; StringBuilder str = new StringBuilder(); str.append(\"size \" + size); str.append(\" capacity \" + data.length); str.append(\"\\n[\"); for (int i = 0; i &lt; size; i++) &#123; if (i == size - 1) &#123; str.append(data[i].toString()); &#125; else &#123; str.append(data[i].toString() + \", \"); &#125; &#125; str.append(\"]\"); return str.toString(); &#125;&#125; æ ˆæ ˆæ˜¯ä¸€ç§å…ˆè¿›åå‡ºçš„ç»“æ„ï¼Œæ¯”å¦‚ä½ æ”¾ä¹¦ä¼šæŠŠä¹¦æ”¾åœ¨æœ€ä¸Šé¢ï¼Œæœ€å…ˆæ”¾çš„ä¹¦åœ¨æœ€ä¸‹é¢ï¼Œè€Œä½ æ‹¿ä¹¦å´æ˜¯ä»æœ€ä¸Šé¢æ‹¿ï¼Œæœ€åæ”¾çš„æœ€å…ˆæ‹¿åˆ°ï¼Œæ ˆæ­£æ˜¯æ€ä¹ˆä¸€ç§ç»“æ„ï¼Œæˆ‘ä»¬è§„å®šæœ€ä¸Šé¢çš„ä½ç½®å«åšæ ˆé¡¶ï¼Œæˆ‘ä»¬å‘æ ˆä¸­æ·»åŠ å…ƒç´ æ˜¯æ·»åŠ åˆ°æ ˆé¡¶ï¼Œå‘æ ˆä¸­å–å‡ºå…ƒç´ æ˜¯ä»æ ˆé¡¶å–å‡ºçš„ï¼Œæˆ‘ä»¬å…ˆæ¥å®šä¹‰ä¸€ä¸ª Stack æ¥å£ï¼Œé‡Œé¢è§„å®šäº†ä¸€ä¸ªæ ˆåŒ…å«çš„æ“ä½œ public interface Stack&lt;E&gt; &#123; //å‘æ ˆä¸­å‹å…¥ä¸€ä¸ªå…ƒç´  void push(E e); //å°†æ ˆé¡¶å…ƒç´ å¼¹å‡º E pop(); //æ ˆæ˜¯å¦ä¸ºç©º boolean isEmpty(); //è·å¾—æ ˆä¸­å…ƒç´ çš„ä¸ªæ•° int getSize(); //è·å¾—æ ˆé¡¶å…ƒç´  E peek();&#125; ä¸‹é¢æˆ‘ä»¬å°†ä½¿ç”¨ä¸Šé¢å®ç°çš„ Array æ¥å®ç°ä¸€ä¸ª ArrayStackï¼Œæˆ‘ä»¬æŠŠæ•°ç»„çš„æœ€åä½ç½®å®šä¹‰ä¸ºæ ˆé¡¶ public class ArrayStack&lt;E&gt; implements Stack&lt;E&gt; &#123; private Array&lt;E&gt; data; public ArrayStack(int capacity) &#123; data = new Array&lt;&gt;(capacity); &#125; public ArrayStack() &#123; data = new Array&lt;&gt;(); &#125; @Override public void push(E e) &#123; data.addLast(e); &#125; @Override public E pop() &#123; return data.removeLast(); &#125; @Override public boolean isEmpty() &#123; return data.isEmpty(); &#125; @Override public int getSize() &#123; return data.getSize(); &#125; @Override public E peek() &#123; return data.getLast(); &#125; public String toString() &#123; StringBuilder res = new StringBuilder(); res.append(\"Stack: \"); res.append(\"[\"); for (int i = 0; i &lt; data.getSize(); i++) &#123; res.append(data.get(i)); if (i != data.getSize()-1) &#123; res.append(\", \"); &#125; &#125; res.append(\"] top\"); return res.toString(); &#125;&#125; ä¸Šé¢çš„ä»£ç æå…¶çš„ç®€å•ï¼Œåªè¦ä»”ç»†çš„é˜…è¯»å°±å¯ä»¥å®Œå…¨çš„ç†è§£ï¼Œè¿™é‡Œä¸å¤šåšè§£é‡Šã€‚ ä¸‹é¢ä»‹ç»ä¸€ä¸ªæœ‰å…³äºæ ˆçš„é¢˜ç›®ï¼Œæ­¤é¢˜æ¥è‡ªäºLeetCodeç¬¬20é¢˜ ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ &#39;(&#39;ï¼Œ&#39;)&#39;ï¼Œ&#39;{&#39;ï¼Œ&#39;}&#39;ï¼Œ&#39;[&#39;ï¼Œ&#39;]&#39; çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚ å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚ æ³¨æ„ç©ºå­—ç¬¦ä¸²å¯è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚ è¿™é“é¢˜çš„è§£é¢˜æ€è·¯æ˜¯ï¼Œå¦‚æœé‡åˆ°å·¦æ‹¬å·&#39;(&#39;, &#39;[&#39;, &#39;{&#39;ï¼Œé‚£ä¹ˆå°†å·¦æ‹¬å·å‹å…¥æ ˆä¸­ï¼Œå¦‚æœé‡åˆ°å³æ‹¬å·ï¼Œé‚£ä¹ˆå°†æ ˆé¡¶çš„å·¦æ‹¬å·å¼¹å‡ºï¼Œåˆ¤æ–­ä¸¤ä¸ªæ‹¬å·æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…è¿”å› fasleï¼Œå¦‚æœåŒ¹é…è¿›è¡Œä¸‹ä¸€è½®ï¼Œæœ€åå¦‚æœå­—ç¬¦ä¸²éå†å®Œæ¯•ï¼Œå¦‚æœæ ˆä¸ºç©ºè¯´æ˜åŒ¹é…æˆåŠŸï¼Œå¦‚æœæ ˆä¸ä¸ºç©ºï¼Œæ‰€ä»¥å·¦è¾¹çš„æ‹¬å·å¤šåŒ¹é…å¤±è´¥ï¼Œä»£ç å¦‚ä¸‹ import java.util.Stack;class Solution &#123; public boolean isValid(String s) &#123; //åˆ›å»ºä¸€ä¸ªç©ºæ ˆ Stack&lt;Character&gt; stack = new Stack&lt;&gt;(); //éå†å­—ç¬¦ä¸² for (int i = 0; i &lt; s.length(); i++) &#123; char c = s.charAt(i); //å¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œåˆ™å‹å…¥æ ˆä¸­ if (c == '(' || c == '[' || c == '&#123;') &#123; stack.push(c); &#125; else &#123; //å¦‚æœæ˜¯å³æ‹¬å· å…ˆåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º if (stack.isEmpty()) &#123; return false; &#125; //è·å¾—æ ˆé¡¶çš„å·¦æ‹¬å· char charTop = stack.pop(); //ä¸‹é¢ä¸‰ç§çš†ä¸ºä¸åŒ¹é…çš„æƒ…å†µ if (c == ')' &amp;&amp; charTop != '(') &#123; return false; &#125; if (c == ']' &amp;&amp; charTop != '[') &#123; return false; &#125; if (c == '&#125;' &amp;&amp; charTop != '&#123;') &#123; return false; &#125; &#125; &#125; //è¿™é‡Œä¸èƒ½ç›´æ¥è¿”å›true è¦æ ¹æ®æ ˆæ˜¯å¦ä¸ºç©ºå†³å®šè¿”å›å€¼ return stack.isEmpty(); &#125;&#125; é˜Ÿåˆ—é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„ç»“æ„ï¼Œå‡è®¾ä½ åœ¨æ’é˜Ÿï¼Œé‚£ä¹ˆæœ€å…ˆæ’é˜Ÿçš„äººæœ€å…ˆå¾—åˆ°æœåŠ¡ã€‚æˆ‘ä»¬åªèƒ½ä»é˜Ÿå°¾æ·»åŠ å…ƒç´ ï¼Œä»é˜Ÿé¦–å–å‡ºå…ƒç´ ã€‚è€è§„çŸ©ï¼Œæˆ‘ä»¬é¦–å…ˆè§„å®šä¸€ä¸‹é˜Ÿåˆ— Queue çš„ API public interface Queue&lt;E&gt; &#123; //å‘é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´  void enqueue(E e); //ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå…ƒç´  E dequeue(); //è·å¾—é˜Ÿé¦–çš„å…ƒç´  E getFront(); //è·å–é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° int getSize(); //åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º boolean isEmpty();&#125; æ•°ç»„é˜Ÿåˆ— ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨åŠ¨æ€æ•°ç»„ Array ç±»æ¥å®ç°é˜Ÿåˆ—ï¼Œå®ç°çš„é€»è¾‘ä¹Ÿååˆ†çš„ç®€å•ï¼Œå¦‚ä¸‹ public class ArrayQueue&lt;E&gt; implements Queue&lt;E&gt; &#123; private Array&lt;E&gt; array; public ArrayQueue() &#123; array = new Array&lt;&gt;(); &#125; public ArrayQueue(int capacity) &#123; array = new Array&lt;&gt;(capacity); &#125; @Override public void enqueue(E e) &#123; array.addLast(e); &#125; @Override public E dequeue() &#123; return array.removeFirst(); &#125; @Override public E getFront() &#123; return array.getFirst(); &#125; @Override public int getSize() &#123; return array.getSize(); &#125; @Override public boolean isEmpty() &#123; return array.isEmpty(); &#125; @Override public String toString() &#123; StringBuilder res = new StringBuilder(); res.append(\"Queue: \"); res.append(\"front [\"); for (int i = 0; i &lt; array.getSize(); i++) &#123; res.append(array.get(i)); if (i != array.getSize()-1) &#123; res.append(\", \"); &#125; &#125; res.append(\"] tail\"); return res.toString(); &#125;&#125; æ³¨æ„ä¸Šé¢æˆ‘ä»¬çš„ dequeue æ“ä½œæ˜¯è°ƒç”¨äº†åŠ¨æ€æ•°ç»„çš„ removeFirst æ“ä½œï¼Œè¿™ä¸ªæ“ä½œéœ€è¦éå†æ•´ä¸ªæ•°ç»„å°†å…ƒç´ å‘å‰ç§»åŠ¨ï¼Œæ‰€ä»¥è¯¥æ“ä½œæ˜¯ O(n) çš„ã€‚ å¾ªç¯é˜Ÿåˆ—ä¸Šé¢é˜Ÿåˆ—çš„ dequeue æ“ä½œæ˜¯ O(n) çº§åˆ«çš„ï¼Œè¿™æ˜¯å› ä¸ºä¸Šé¢ä¼šå°†æ•°ç»„æ•´ä½“å‘å‰ç§»ä¸€ä½ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸è¿™ä¹ˆåšï¼Œè€Œæ˜¯å¢åŠ ä¸€ä¸ªå˜é‡ front æ¥è®°å½•é˜Ÿé¦–çš„ä½ç½®ï¼Œè¿™æ ·æˆ‘ä»¬åªè¦å°† front å‘å‰ç§»ä¸€ä½å³å¯ï¼Œè¿™æ ·çš„æ“ä½œå°±æ˜¯ O(1) çº§åˆ«çš„ è¿™æ ·åšçš„åŒæ—¶ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå¦‚æœå½“ tail æ¥åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒæŒ‰é“ç†åº”è¯¥å°†æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œä½†æ˜¯ front å‰é¢è¿˜æœ‰ç©ºé—´ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åº”å½“å°† tail ç§»åŠ¨åˆ°æ•°ç»„å¤´å» è¿™æ—¶ tail çš„è®¡ç®—å…¬å¼ä¸å†æ˜¯ç®€å•çš„ tail = tail + 1ï¼Œè€Œæ˜¯ tail = (tail + 1) % data.lengthï¼Œå¦‚æœä¸ç†è§£è¿™ä¸ªå¼å­ï¼Œå°±æƒ³è±¡ä¸€ä¸‹æ—¶é’Ÿï¼Œ11 ç‚¹å‘å‰ä¸€æ­¥å°±æ˜¯ 12 ç‚¹ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºæ˜¯ 0 ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™æ—¶é’Ÿçš„è®¡ç®—å…¬å¼ä¸º (11 + 1) % 12ã€‚å› ä¸ºè¿™ç§å¾ªç¯çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æŠŠè¿™ç§å®ç°æ–¹å¼ç§°ä¸ºå¾ªç¯é˜Ÿåˆ—ã€‚è¿™æ¬¡æˆ‘ä»¬å®ç°é˜Ÿåˆ—ä¸åœ¨ä½¿ç”¨ä¸Šé¢çš„åŠ¨æ€æ•°ç»„ï¼Œæœ‰äº†ä¸Šé¢å®ç°æ ˆå’Œé˜Ÿåˆ—çš„ç»éªŒï¼Œæƒ³å¿…å¯ä»¥å®¹æ˜“ç†è§£ä¸‹é¢çš„ä»£ç (åœ¨å…³é”®çš„æ­¥éª¤ç»™äºˆæ³¨é‡Š) public class LoopQueue&lt;E&gt; implements Queue&lt;E&gt; &#123; private int front; private int tail; //é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° private int size; //åº•å±‚å®ç°çš„æ•°ç»„ private E[] data; //æ„é€ æ–¹æ³•åˆå§‹åŒ– public LoopQueue(int capacity) &#123; data = (E[]) new Object[capacity]; size = 0; front = 0; tail = 0; &#125; //é»˜è®¤å®¹é‡ä¸º10 public LoopQueue() &#123; this(10); &#125; @Override public void enqueue(E e) &#123; //é¦–å…ˆåˆ¤æ–­æ•°ç»„æ˜¯ä¸æ˜¯æ»¡äº†ï¼Œå¦‚æœæ˜¯é‚£ä¹ˆå°±è¿›è¡Œæ‰©å®¹ if (size == data.length) &#123; resize(2 * data.length); &#125; //å‘é˜Ÿå°¾æ·»åŠ å…ƒç´  data[tail] = e; //tailå‘åç§»åŠ¨ ä¸æ˜¯ç®€å•çš„+1 ä¸Šé¢å·²æœ‰è§£é‡Š tail = (tail +1) % data.length; size++; &#125; //æ•°ç»„ä¼¸ç¼©æ“ä½œï¼Œå·²æ¥è§¦è¿‡ private void resize(int newCapacity) &#123; E[] temp = (E[]) new Object[newCapacity]; for (int i =0; i &lt; size; i++) &#123; //è¿™é‡Œæˆ‘ä»¬å°†é˜Ÿåˆ—çš„å¤´å¯¹åº”åˆ°æ–°æ•°ç»„çš„å¼€å¤´ temp[i] = data[(front + i)%data.length]; &#125; //é‡æ–°è®°å½•frontå’Œtailçš„ä½ç½® front = 0; tail = size; data = temp; &#125; @Override public E dequeue() &#123; //å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼ŒæŠ›å‡ºå¼‚å¸¸ if (size == 0) &#123; throw new IllegalArgumentException(\"é˜Ÿåˆ—ä¸ºç©º\"); &#125; //è·å¾—å‡ºé˜Ÿçš„å…ƒç´  E e = data[front]; data[front] = null; //frontå‘å‰ç§»åŠ¨(å¸¦å¾ªç¯) front = (front + 1) % data.length; size--; //ç¼©å®¹æ“ä½œï¼Œä¸åšè§£é‡Š if (size == data.length / 4) &#123; resize(data.length / 2); &#125; return e; &#125; @Override public E getFront() &#123; if (size == 0) &#123; throw new IllegalArgumentException(\"é˜Ÿåˆ—ä¸ºç©º\"); &#125; return data[front]; &#125; @Override public int getSize() &#123; return size; &#125; @Override public boolean isEmpty() &#123; return size == 0; &#125; @Override public String toString() &#123; StringBuilder str = new StringBuilder(); str.append(\"Queue: size \" + size); str.append(\" capacity \" + data.length); str.append(\"\\nfront [\"); for (int i = 0; i &lt; size; i++) &#123; if (i == size - 1) &#123; str.append(data[(front + i) % data.length].toString()); &#125; else &#123; str.append(data[(front + i) % data.length].toString() + \", \"); &#125; &#125; str.append(\"] tail\"); return str.toString(); &#125;&#125; è¿™æ¬¡æˆ‘ä»¬å¾—åˆ°çš„ dequeue æ“ä½œå°±æ˜¯ O(1) çš„äº†(ä¸¥æ ¼çš„è®²å‡æ‘Šå¤æ‚åº¦ä¸º O(1)ï¼Œå› ä¸ºé‡Œé¢ resize() å¤æ‚åº¦æ˜¯ O(n) çš„)ã€‚ é“¾è¡¨é“¾è¡¨æ˜¯ä¸€ç§éå¸¸é‡è¦çš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬åœ¨å®ç°æ ˆå’Œé˜Ÿåˆ—æ—¶ä½¿ç”¨çš„æ˜¯åŠ¨æ€æ•°ç»„å®ç°çš„ï¼Œè¿™ä¸ªåŠ¨æ€æ•°ç»„æ˜¯é’ˆå¯¹ç”¨æˆ·è€Œè¨€æ˜¯åŠ¨æ€çš„ï¼Œå®é™…ä¸Šåº•å±‚æ˜¯é™æ€çš„ï¼Œæ˜¯é€šè¿‡ resize() æ“ä½œå»è§£å†³å®¹é‡é—®é¢˜çš„ã€‚è€Œé“¾è¡¨åˆ™æ˜¯ä¸€ç§çœŸæ­£çš„åŠ¨æ€æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯è¿™ä¹ˆä¸€ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬æŠŠæ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªèŠ‚ç‚¹(Node)ä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¸€èˆ¬åŒ…å«ä¸¤éƒ¨åˆ†çš„å†…å®¹ï¼Œä¸€ä¸ªæ˜¯å­˜å‚¨çš„æ•°æ®ï¼Œä¸€ä¸ªæ˜¯å®ƒè¦æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ class Node &#123; private E e; private Node next;&#125; ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥æœ€åçœ‹èµ·æ¥å°±åƒæ˜¯ä¸€ä¸ªé“¾ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æ•°æ®ç»“æ„ç§°ä¸ºé“¾è¡¨ æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸º `NULL`ï¼Œè¡¨ç¤ºåé¢æ²¡æœ‰èŠ‚ç‚¹äº†ã€‚å®ƒæ˜¯ä¸€ä¸ªçœŸæ­£çš„åŠ¨æ€çš„æ•°æ®ç»“æ„ï¼Œä¸éœ€è¦å¤„ç†å®¹é‡çš„é—®é¢˜ã€‚ä½†æ˜¯å®ƒä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå®ƒæ²¡æœ‰æ•°ç»„é‚£æ ·å¿«çš„æŸ¥è¯¢èƒ½åŠ›ï¼Œå®ƒè¦æŸ¥è¯¢æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œåªèƒ½é€šè¿‡å¤´ç»“ç‚¹ä¸€ç›´å¯»æ‰¾ä¸‹æ¥(åé¢æˆ‘ä»¬å°†çœ‹åˆ°)ï¼Œæ‰€ä»¥å®ƒçš„æŸ¥è¯¢é€Ÿåº¦æ¯”æ•°ç»„æ…¢ã€‚ é“¾è¡¨å®ç°ç°åœ¨æˆ‘ä»¬å°†å®ç°è¿™ä¹ˆä¸€ä¸ªç»“æ„ï¼Œé¦–å…ˆè®¾è®¡å¥½èŠ‚ç‚¹ç±» public class LinkedList&lt;E&gt; &#123; //æˆ‘ä»¬å°†Nodeè®¾ç½®ä¸ºLinkedListçš„ç§æœ‰å†…éƒ¨ç±» private class Node&lt;E&gt; &#123; public E e; public Node next; public Node(E e, Node next) &#123; this.e = e; this.next = next; &#125; public Node(E e) &#123; this(e, null); &#125; public Node() &#123; this(null, null); &#125; @Override public String toString() &#123; return e.toString(); &#125; &#125;&#125; æˆ‘ä»¬è¦æƒ³å‘é“¾è¡¨ä¸­æ·»åŠ (æˆ–å…¶ä»–æ“ä½œ)å…ƒç´ ï¼Œä¸å¯é¿å…çš„è¦éå†é“¾è¡¨(å› ä¸ºé“¾è¡¨ä¸èƒ½é€šè¿‡ç´¢å¼•è®¿é—®ï¼Œåªèƒ½é€šè¿‡å‰é¢çš„èŠ‚ç‚¹æ‰¾åˆ°åé¢çš„èŠ‚ç‚¹)ï¼Œè€Œè¦éå†é“¾è¡¨ï¼Œæˆ‘ä»¬å°±è¦å°†é“¾è¡¨çš„å¤´å­˜å‚¨èµ·æ¥ï¼Œè¿™æ ·æ‰èƒ½éå†é“¾è¡¨ï¼Œæˆ‘ä»¬å°†é“¾è¡¨çš„å¤´ç§°ä¸º head åŒæ—¶æˆ‘ä»¬ä½¿ç”¨å˜é‡ `size` æ¥è®°å½•é“¾è¡¨ä¸­å…ƒç´ çš„ä¸ªæ•° public class LinkedList&lt;E&gt; &#123; //ä¸ºäº†èŠ‚çœç¯‡å¹…ï¼ŒNodeç±»ä¸å†å±•ç¤ºï¼Œä¸‹åŒ //å¤´ç»“ç‚¹ private Node head; //é“¾è¡¨ä¸­å…ƒç´ çš„ä¸ªæ•° private int size; public LinkedList() &#123; head = null; size = 0; &#125;&#125; ç°åœ¨æˆ‘ä»¬å®ç°ä¸¤ä¸ªç®€å•çš„æ–¹æ³• getSize() å’Œ isEmpty() public int getSize() &#123; return size;&#125;public boolean isEmpty() &#123; return size == 0;&#125; æ·»åŠ å…ƒç´ å‘é“¾è¡¨å¤´æ·»åŠ å…ƒç´  é¦–å…ˆå°†è¦æ’å…¥çš„æ–°èŠ‚ç‚¹æŒ‡å‘ `head`ï¼Œç„¶åå°† `head` è®¾ç½®ä¸ºæ–°èŠ‚ç‚¹ï¼Œå®ç°å¦‚ä¸‹ public void addFirst(E e) &#123; //ä½“ä¼šä¸€ä¸‹è¿™æ¡è¯­å¥çš„æ„æ€ head = new Node(e,head); size++;&#125; åœ¨é“¾è¡¨çš„ä¸­é—´æ·»åŠ ä¸€ä¸ªå…ƒç´  æ¯”å¦‚ç°åœ¨å¾€èŠ‚ç‚¹ `1` åé¢æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œé¦–å…ˆå°†æ–°èŠ‚ç‚¹æŒ‡å‘èŠ‚ç‚¹ `2`ï¼Œç„¶åèŠ‚ç‚¹ `1` æŒ‡å‘æ–°èŠ‚ç‚¹ï¼Œå®ç°å¦‚ä¸‹ public void add(int index, E e) &#123; if (index &lt; 0 || index &gt; size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; //å¦‚æœæ˜¯å¤´ç»“ç‚¹éœ€è¦å•ç‹¬å¤„ç† if (index == 0) &#123; addFirst(e); &#125; //prevä»£è¡¨è¦æ’å…¥ä½ç½®çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ Node prev = head; for (int i = 0; i &lt; index - 1; i++) &#123; prev = prev.next; &#125; prev.next = new Node(e, prev.next); size++;&#125; å‘é“¾è¡¨çš„å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ ç›´æ¥å¤ç”¨ä¸Šé¢çš„ä»£ç  public void addLast(E e) &#123; add(size, e);&#125; è™šæ‹Ÿå¤´ç»“ç‚¹æˆ‘ä»¬åœ¨å‘é“¾è¡¨ä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œå› ä¸º head å‰é¢æ²¡æœ‰èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ·»åŠ å…ƒç´ æ—¶ä¼šå¯¹ head è¿›è¡Œå•ç‹¬çš„å¤„ç†ï¼Œä¸ºäº†ä¸ä½¿ head å…·æœ‰ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬åœ¨é“¾è¡¨çš„æœ€å¤´éƒ¨æ·»åŠ ä¸€ä¸ªè™šæ‹Ÿå¤´ç»“ç‚¹ï¼Œé‡Œé¢ä¸å­˜å‚¨å…ƒç´ ï¼Œå®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†ä½¿å¾—æ“ä½œé“¾è¡¨æ–¹ä¾¿ ç°åœ¨æˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„ `head` ä¸º `dummyHead` public class LinkedList&lt;E&gt; &#123; //è™šæ‹Ÿç»“ç‚¹ private Node dummyHead; private int size; public LinkedList() &#123; //è¿™é‡Œä¿®æ”¹äº† dummyHead = new Node(null, null); size = 0; &#125; public int getSize() &#123; return size; &#125; public boolean isEmpty() &#123; return size == 0; &#125; //ç›´æ¥è°ƒç”¨addæ–¹æ³• public void addFirst(E e) &#123; add(0,e); &#125; public void add(int index, E e) &#123; if (index &lt; 0 || index &gt; size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; //ä¸éœ€è¦å¯¹headè¿›è¡Œå•ç‹¬çš„å¤„ç†äº† //index - 1ä¿®æ”¹ä¸ºäº†index Node prev = dummyHead; for (int i = 0; i &lt; index; i++) &#123; prev = prev.next; &#125; prev.next = new Node(e, prev.next); size++; &#125; public void addLast(E e) &#123; add(size, e); &#125;&#125; è·å¾—æŸä¸ªç´¢å¼•çš„å€¼å®ç°çš„æ€è·¯åŒ add å¾ˆåƒï¼Œä¸è¿‡è¿™é‡Œæˆ‘ä»¬æ‰¾çš„ä¸æ˜¯å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€Œæ˜¯å½“å‰çš„èŠ‚ç‚¹ public E get(int index) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; //curä»£è¡¨å½“å‰èŠ‚ç‚¹ Node cur = dummyHead.next; for (int i = 0; i &lt; index; i++) &#123; cur = cur.next; &#125; return (E) cur.e;&#125; åŸºäºè¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«çš„å®ç° getFirst() å’Œ getLast() public E getFirst() &#123; return get(0);&#125;public E getLast() &#123; return get(size - 1);&#125; æ›´æ–°æŸä¸ªç´¢å¼•çš„å€¼å®ç°çš„æ€è·¯å®Œå…¨æ˜¯åŒ get() æ–¹æ³•ï¼Œç›´æ¥ä¸Šä»£ç  public void set(int index, E e) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; Node cur = dummyHead.next; for (int i = 0; i &lt; index; i++) &#123; cur = cur.next; &#125; cur.e = e;&#125; æŸ¥æ‰¾é“¾è¡¨æ˜¯å¦å­˜åœ¨å…ƒç´ epublic boolean contains(E e) &#123; //ä»å½“å‰èŠ‚ç‚¹å¼€å§‹ï¼Œä¸€ç›´éå†åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹ for (Node cur = dummyHead.next; cur != null; cur = cur.next) &#123; if (cur.e.equals(e)) &#123; return true; &#125; &#125; return false;&#125; åˆ é™¤é“¾è¡¨ä¸­çš„å…ƒç´  ä¸Šå›¾å·²è¯¦ç»†è¯´æ˜äº†æ“ä½œçš„æ­¥éª¤ï¼Œè¿™é‡Œç›´æ¥è´´ä¸Šä»£ç å®ç° public E remove(int index) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; //è·å¾—è¦åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ Node prev = dummyHead; for (int i = 0; i &lt; index; i++) &#123; prev = prev.next; &#125; //å›¾ç¤ºçš„æ“ä½œ Node delNode = prev.next; prev.next = delNode.next; delNode.next = null; size--; return (E) delNode.e;&#125; æ ¹æ®ä¸Šé¢çš„æ–¹æ³•ï¼Œå¯ä»¥å¾ˆå¿«çš„å®ç° removeFirst() å’Œ removeLast() æ–¹æ³• public E removeFirst() &#123; return remove(0);&#125;public E removeLast() &#123; return remove(size - 1);&#125; toString()@Overridepublic String toString() &#123; StringBuilder res = new StringBuilder(); Node cur = dummyHead.next; //ä½ å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„forå¾ªç¯ while (cur != null) &#123; res.append(cur + \"-&gt;\"); cur = cur.next; &#125; res.append(\"NULL\"); return res.toString();&#125; å…¨éƒ¨ä»£ç public class LinkedList&lt;E&gt; &#123; private class Node&lt;E&gt; &#123; public E e; public Node next; public Node(E e, Node next) &#123; this.e = e; this.next = next; &#125; public Node(E e) &#123; this(e, null); &#125; public Node() &#123; this(null, null); &#125; @Override public String toString() &#123; return e.toString(); &#125; &#125; private Node dummyHead; private int size; public LinkedList() &#123; dummyHead = new Node(null, null); size = 0; &#125; public int getSize() &#123; return size; &#125; public boolean isEmpty() &#123; return size == 0; &#125; public void addFirst(E e) &#123; add(0,e); &#125; public void add(int index, E e) &#123; if (index &lt; 0 || index &gt; size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; Node prev = dummyHead; for (int i = 0; i &lt; index; i++) &#123; prev = prev.next; &#125; prev.next = new Node(e, prev.next); size++; &#125; public void addLast(E e) &#123; add(size, e); &#125; public E get(int index) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; Node cur = dummyHead.next; for (int i = 0; i &lt; index; i++) &#123; cur = cur.next; &#125; return (E) cur.e; &#125; public E getFirst() &#123; return get(0); &#125; public E getLast() &#123; return get(size - 1); &#125; public void set(int index, E e) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; Node cur = dummyHead.next; for (int i = 0; i &lt; index; i++) &#123; cur = cur.next; &#125; cur.e = e; &#125; public boolean contains(E e) &#123; for (Node cur = dummyHead.next; cur != null; cur = cur.next) &#123; if (cur.e.equals(e)) &#123; return true; &#125; &#125; return false; &#125; public E remove(int index) &#123; if (index &lt; 0 || index &gt;= size) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; Node prev = dummyHead; for (int i = 0; i &lt; index; i++) &#123; prev = prev.next; &#125; Node delNode = prev.next; prev.next = delNode.next; delNode.next = null; size--; return (E) delNode.e; &#125; public E removeFirst() &#123; return remove(0); &#125; public E removeLast() &#123; return remove(size - 1); &#125; @Override public String toString() &#123; StringBuilder res = new StringBuilder(); Node cur = dummyHead.next; while (cur != null) &#123; res.append(cur + \"-&gt;\"); cur = cur.next; &#125; res.append(\"NULL\"); return res.toString(); &#125;&#125; ä½¿ç”¨é“¾è¡¨å®ç°æ ˆç”±äºé“¾è¡¨çš„ addFirst() å’Œ removeFirst() çš„æ“ä½œéƒ½æ˜¯ O(1)ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨é“¾è¡¨å¤´ä½œä¸ºæ ˆé¡¶ï¼Œå…·ä½“çš„å®ç°é€»è¾‘å¦‚ä¸‹ public class LinkedListStack&lt;E&gt; implements Stack&lt;E&gt; &#123; private LinkedList&lt;E&gt; linkedList; public LinkedListStack() &#123; linkedList = new LinkedList&lt;&gt;(); &#125; @Override public void push(E e) &#123; linkedList.addFirst(e); &#125; @Override public E pop() &#123; return linkedList.removeFirst(); &#125; @Override public boolean isEmpty() &#123; return linkedList.isEmpty(); &#125; @Override public int getSize() &#123; return linkedList.getSize(); &#125; @Override public E peek() &#123; return linkedList.getFirst(); &#125; @Override public String toString() &#123; StringBuilder res = new StringBuilder(); res.append(\"Stack: top \"); res.append(linkedList); return res.toString(); &#125;&#125; ä½¿ç”¨é“¾è¡¨å®ç°é˜Ÿåˆ—æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—ï¼Œç”±äºå®ƒçš„ dequeue æ“ä½œæ˜¯ O(n) çº§åˆ«çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ front æ¥æ ‡è®°é˜Ÿé¦–ï¼Œä½¿ç”¨å¾ªç¯é˜Ÿåˆ—è®¾è®¡ï¼ŒåŒæ ·çš„åœ¨é“¾è¡¨ä¸­ä»é“¾è¡¨å°¾éƒ¨åˆ é™¤æˆ–å¢åŠ å…ƒç´ éƒ½æ˜¯ O(n) çº§åˆ«çš„ï¼Œä¸ºäº†è§£å†³è¿™ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å†³å®šåœ¨é“¾è¡¨çš„å°¾éƒ¨å¢åŠ ä¸€ä¸ª tail å˜é‡æ¥æ ‡è®°ï¼Œä»è€Œä½¿å¾—åœ¨å°¾éƒ¨å¢åŠ å…ƒç´ æ˜¯ O(1) çº§åˆ«çš„ã€‚ å¦å¤–è€ƒè™‘åœ¨å°¾éƒ¨åˆ é™¤ä¸€ä¸ªå…ƒç´ æ˜¯ O(1) çš„å—? ç­”æ¡ˆæ˜¯ä¸æ˜¯ã€‚å› ä¸ºæˆ‘ä»¬åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦çŸ¥é“è¯¥èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€ŒçŸ¥é“ tail èŠ‚ç‚¹æ˜¯æ— æ³•çŸ¥é“ tail çš„å‰ä¸€ä¸ªèŠ‚ç‚¹çš„ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦éå†ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ head ç«¯åˆ é™¤å…ƒç´ ï¼Œåœ¨ tail ç«¯æ·»åŠ å…ƒç´ ï¼Œå¹¶ä¸”ç”±äºåªæ¶‰åŠåˆ°å¤´éƒ¨å’Œå°¾éƒ¨çš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ·»åŠ è™šæ‹Ÿå¤´ç»“ç‚¹äº† ä¸‹é¢å°±æ˜¯å®ç°çš„ä»£ç  public class LinkedListQueue&lt;E&gt; implements Queue&lt;E&gt; &#123; private class Node&lt;E&gt; &#123; public E e; public Node next; public Node(E e, Node next) &#123; this.e = e; this.next = next; &#125; public Node(E e) &#123; this(e, null); &#125; public Node() &#123; this(null, null); &#125; @Override public String toString() &#123; return e.toString(); &#125; &#125; private Node head; private Node tail; private int size; public LinkedListQueue() &#123; head = null; tail = null; size = 0; &#125; @Override public void enqueue(E e) &#123; //é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œtailå’Œheadéƒ½ä¸ºnull æ·»åŠ å…ƒç´ åäºŒè€…éƒ½æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´  if (size == 0) &#123; tail = new Node(e); head = tail; &#125; else &#123; tail.next = new Node(e); tail = tail.next; &#125; size++; &#125; @Override public E dequeue() &#123; if (size == 0) &#123; throw new IllegalArgumentException(\"é˜Ÿåˆ—ä¸ºç©º\"); &#125; Node delNode = head; head = head.next; delNode.next = null; size--; //å¦‚æœé˜Ÿåˆ—ä¸ºç©ºäº†ï¼Œæ­¤æ—¶tailæŒ‡å‘çš„æ˜¯delNodeï¼Œæ­¤æ—¶åº”è¯¥è®©tailä¸ºnull if (size == 0) &#123; tail = null; &#125; return (E) delNode.e; &#125; @Override public E getFront() &#123; if (head == null) &#123; throw new IllegalArgumentException(\"é˜Ÿåˆ—ä¸ºç©º\"); &#125; return (E) head.e; &#125; @Override public int getSize() &#123; return size; &#125; @Override public boolean isEmpty() &#123; return size == 0; &#125; @Override public String toString() &#123; StringBuilder res = new StringBuilder(); res.append(\"Queue: front \"); Node cur = head; while (cur != null) &#123; res.append(cur + \"-&gt;\"); cur = cur.next; &#125; res.append(\"NULL tail\"); return res.toString(); &#125;&#125; äºŒåˆ†æœç´¢æ ‘ä»€ä¹ˆæ˜¯æ ‘ç»“æ„ å½“ä½ æŠŠä¸Šé¢çš„å›¾å€’è¿‡æ¥çœ‹ï¼Œå°±åƒæ˜¯ä¸€æ£µæ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠè¿™ç§ç»“æ„ç§°ä¸ºæ˜¯æ ‘ç»“æ„ã€‚é‚£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ ‘ç»“æ„ï¼Œå› ä¸ºæ ‘ç»“æ„åœ¨ç”Ÿæ´»ä¸­å¾ˆå¸¸è§ï¼Œå¦‚æ–‡ä»¶å¤¹çš„ç»„ç»‡æ–¹å¼ï¼Œåˆæˆ–è€…å¦‚å…¬å¸èŒèƒ½çš„ç»„ç»‡æ–¹å¼ï¼Œè¿™äº›éƒ½æ˜¯æ ‘ç»“æ„çš„ä¾‹å­ã€‚ä¸ºä»€ä¹ˆä¼šä½¿ç”¨æ ‘ç»“æ„å‘¢? åŸå› å°±æ˜¯å› ä¸ºé«˜æ•ˆã€‚ æ¦‚å¿µåŒé“¾è¡¨ä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§åŠ¨æ€çš„æ•°æ®ç»“æ„ï¼Œé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ˜¯æŒ‡å‘ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè€ŒäºŒå‰æ ‘æ˜¯æŒ‡å‘ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªèŠ‚ç‚¹ç§°ä¸ºå·¦å­æ ‘å’Œå³å­æ ‘ï¼Œåˆæˆ–è€…ç§°ä¸ºå·¦å­©å­å’Œå³å­©å­ã€‚å¦‚ä¸‹å›¾è¡¨ç¤ºçš„å°±æ˜¯äºŒå‰æ ‘ class Node &#123; E e; Node left; Node right;&#125; æ ¹èŠ‚ç‚¹ æœ€é¡¶éƒ¨çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå¦‚ä¸Šå›¾ä¸­ 28 å°±æ˜¯æ ¹èŠ‚ç‚¹ äºŒå‰æ ‘å…·æœ‰å”¯ä¸€çš„ä¸€ä¸ªæ ¹èŠ‚ç‚¹ å¶å­èŠ‚ç‚¹ æ²¡æœ‰å­©å­çš„èŠ‚ç‚¹ï¼Œå¦‚ä¸Šå›¾çš„æœ€åä¸€è¡Œéƒ½æ˜¯å¶å­èŠ‚ç‚¹ äºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­©å­ï¼Œæœ€å¤šæœ‰ä¸€ä¸ªçˆ¶äº² é‚£æ˜¯ä»€ä¹ˆæ˜¯äºŒåˆ†æœç´¢æ ‘ï¼Œé¦–å…ˆäºŒåˆ†æœç´¢æ ‘æ˜¯äºŒå‰æ ‘ï¼Œå®ƒæ»¡è¶³è¿™æ ·çš„ç‰¹ç‚¹ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ å¤§äºå·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å€¼ å°äºå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å€¼ å¯ä»¥éªŒç®—ï¼Œä¸Šé¢çš„è¿™æ£µæ ‘æ»¡è¶³äºŒåˆ†æœç´¢æ ‘çš„æ€§è´¨ï¼Œæ‰€ä»¥è¿™æ£µæ ‘æ˜¯äºŒåˆ†æœç´¢æ ‘ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å®ç°äºŒåˆ†æœç´¢æ ‘ä¸­èŠ‚ç‚¹æœ‰å…³ä»£ç  public class BST&lt;E extends Comparable&lt;E&gt;&gt; &#123; private class Node &#123; public E e; public Node left; public Node right; public Node(E e) &#123; this.e = e; left = null; right = null; &#125; @Override public String toString() &#123; return e.toString(); &#125; &#125; //æ ¹èŠ‚ç‚¹ private Node root; //æ ‘ä¸­å…ƒç´ çš„ä¸ªæ•° private int size; public BST() &#123; root = null; size = 0; &#125; public int size() &#123; return size; &#125; public boolean isEmpty() &#123; return size == 0; &#125;&#125; å®ç°æ·»åŠ å…ƒç´  ä¸Šå›¾æƒ³å¿…å·²ç»å°†æ·»åŠ å…ƒç´ çš„è§„åˆ™è¯´çš„å¾ˆè¯¦ç»†äº†ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥ä¸Šä»£ç  public void add(E e) &#123; if (root == null) &#123; root = new Node(e); size++; &#125; else &#123; add(root, e); &#125;&#125;private void add(Node node, E e) &#123; //é€’å½’ç»ˆæ­¢æ¡ä»¶ if (e.equals(node.e)) &#123; return; &#125; else if (e.compareTo(node.e) &lt; 0 &amp;&amp; node.left == null) &#123; node.left = new Node(e); size++; return; &#125; else if (e.compareTo(node.e) &gt; 0 &amp;&amp; node.right == null) &#123; node.right = new Node(e); size++; return; &#125; if (e.compareTo(node.e) &lt; 0) &#123; add(node.left, e); &#125; if (e.compareTo(node.e) &gt; 0) &#123; add(node.right, e); &#125;&#125; å…¶å®ä¸Šé¢çš„ä»£ç è¿˜å¯ä»¥æ”¹è¿›ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ add(E e) ä¸­å¯¹ root ä¸ºæ ¹èŠ‚ç‚¹è¿›è¡Œäº†å•ç‹¬çš„è€ƒè™‘ï¼Œå…¶å®å¯ä»¥ä¸å†è¿™é‡Œè€ƒè™‘ï¼Œå› ä¸ºé€šè¿‡ä¸Šé¢çš„è§„åˆ™çŸ¥é“ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹ä¸º null æ—¶ï¼Œä¸ç®¡å®ƒæ˜¯æ ¹èŠ‚ç‚¹è¿˜æ˜¯å·¦å³å­©å­ï¼Œæ–°åŠ å…¥çš„èŠ‚ç‚¹éƒ½å°†å–ä»£è¿™ä¸ª null èŠ‚ç‚¹ æ‰€ä»¥æˆ‘ä»¬ä¼˜åŒ–ä¸Šé¢çš„ä»£ç å¦‚ä¸‹ public void add(E e) &#123; root = add(root, e);&#125;private Node add(Node node, E e) &#123; //è¿™é‡Œè¿”å›çš„Nodeæ‰€æŒ‡çš„è¯­ä¹‰æ˜¯nodeæ‰€ä»£è¡¨çš„æ ¹èŠ‚ç‚¹ if (node == null) &#123; size++; return new Node(e); &#125; if (e.compareTo(node.e) &lt; 0) &#123; //å¦‚æœæ¯”æ ¹èŠ‚ç‚¹å°ï¼Œå¯¹å·¦å­æ ‘è¿›è¡Œæ›´æ–° node.left = add(node.left, e); &#125; else if (e.compareTo(node.e) &gt; 0) &#123; //å¦‚æœæ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œå¯¹å³å­æ ‘è¿›è¡Œæ›´æ–° node.right = add(node.right,e); &#125; //ç­‰äºçš„è¯ä»€ä¹ˆéƒ½ä¸åš return node;&#125; æŸ¥è¯¢æ“ä½œpublic boolean contains(E e) &#123; return contains(root, e);&#125;private boolean contains(Node node, E e) &#123; if (node == null) &#123; return false; &#125; if (e.equals(node.e)) &#123; return true; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; return contains(node.left, e); &#125; else &#123; return contains(node.right,e); &#125;&#125; äºŒå‰æ ‘çš„éå†å¯¹äºæŸä¸ªæ•°æ®ç»“æ„çš„éå†å°±æ˜¯å°†è¯¥æ•°æ®ç»“æ„ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½è®¿é—®ä¸€éï¼Œåˆ†ä¸ºä¸‰ç±» å‰åºéå† çˆ¶èŠ‚ç‚¹åœ¨è®¿é—®å·¦å­æ ‘ä¹‹å‰è®¿é—® ä¸­åºéå† çˆ¶èŠ‚ç‚¹åœ¨è®¿é—®å·¦å­æ ‘ä¹‹åï¼Œåœ¨è®¿é—®å³å­æ ‘ä¹‹å‰è®¿é—® ååºéå† çˆ¶èŠ‚ç‚¹åœ¨è®¿é—®å³å­æ ‘ä¹‹åè®¿é—® å‰åºéå†public void preOrder() &#123; preOrder(root);&#125;private void preOrder(Node node) &#123; if (node == null) &#123; return; &#125; //å…ˆè®¿é—®çˆ¶èŠ‚ç‚¹ System.out.println(node); preOrder(node.left); preOrder(node.right);&#125; ä¸­åºéå†public void inOrder() &#123; inOrder(root);&#125;private void inOrder(Node node) &#123; if (node == null) &#123; return; &#125; inOrder(node.left); System.out.println(node); inOrder(node.right);&#125; ä¸­åºéå†çš„ç»“æœæ˜¯å…ƒç´ ä»å°åˆ°å¤§æ’åºã€‚ ååºéå†public void postOrder() &#123; postOrder(root);&#125;private void postOrder(Node node) &#123; if (node == null) &#123; return; &#125; postOrder(node.left); postOrder(node.right); System.out.println(node);&#125; ååºéå†çš„ä¸€ä¸ªåº”ç”¨æ˜¯å†…å­˜é‡Šæ”¾ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæŠŠå·¦å³å­©å­çš„å†…å­˜é‡Šæ”¾å®Œæ‰èƒ½é‡Šæ”¾è¯¥èŠ‚ç‚¹çš„å†…å­˜ã€‚ å‰åºéå†çš„éé€’å½’å®ç° ä»£ç å®ç° public void preOrderNR() &#123; //éé€’å½’å†™æ³• if (root == null) &#123; return; &#125; //è¿™é‡Œçš„Stackæ˜¯ä¸Šé¢è‡ªå·±å†™çš„Stack Stack&lt;Node&gt; stack = new ArrayStack&lt;&gt;(); stack.push(root); while (!stack.isEmpty()) &#123; Node top = stack.pop(); System.out.println(top); if (top.right != null) &#123; stack.push(top.right); &#125; if (top.left != null) &#123; stack.push(top.left); &#125; &#125;&#125; å±‚åºéå† ä»£ç å®ç° public void levelOrder() &#123; if (root == null) &#123; return; &#125; Queue&lt;Node&gt; queue = new LoopQueue&lt;&gt;(); queue.enqueue(root); while (!queue.isEmpty()) &#123; Node front = queue.dequeue(); System.out.println(front); if (front.left != null) &#123; queue.enqueue(front.left); &#125; if (front.right != null) &#123; queue.enqueue(front.right); &#125; &#125;&#125; åˆ é™¤å…ƒç´ åœ¨äºŒåˆ†æœç´¢æ ‘ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæˆ‘ä»¬é¦–å…ˆä»æœ€ç®€å•çš„æƒ…å†µå¼€å§‹ï¼Œåˆ é™¤äºŒåˆ†æœç´¢æ ‘ä¸­çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œé¦–å…ˆæ˜¯å¦‚ä½•æ‰¾åˆ°æœ€å¤§å€¼å’Œæœ€å°å€¼ public E minimum() &#123; if (size == 0) &#123; throw new IllegalArgumentException(\"æ ‘ä¸ºç©º\"); &#125; return minimum(root).e;&#125;private Node minimum(Node node) &#123; if (node.left == null) &#123; return node; &#125; return minimum(node.left);&#125;public E maximum() &#123; if (size == 0) &#123; throw new IllegalArgumentException(\"æ ‘ä¸ºç©º\"); &#125; return maximum(root).e;&#125;private Node maximum(Node node) &#123; if (node.right == null) &#123; return node; &#125; return maximum(node.right);&#125; æ‰¾åˆ°äº†ä¹‹åå¦‚ä½•åˆ é™¤å‘¢ public E removeMin() &#123; E ret = minimum(); root = removeMin(root); return ret;&#125;private Node removeMin(Node node) &#123; if (node.left == null) &#123; Node rightNode = node.right; node.right = null; size--; return rightNode; &#125; node.left = removeMin(node.left); return node;&#125; public E removeMax() &#123; E ret = maximum(); root = removeMax(root); return ret;&#125;private Node removeMax(Node node) &#123; if (node.right == null) &#123; Node leftNode = node.left; node.left = null; size--; return leftNode; &#125; node.right = removeMax(node.right); return node;&#125; ç°åœ¨è®²è§£å¦‚ä½•åˆ é™¤äºŒåˆ†æœæœæ•°ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ public void remove(E e) &#123; root = remove(root, e);&#125;private Node remove(Node node, E e) &#123; if (node == null) &#123; return null; &#125; if (e.equals(node.e)) &#123; if (node.right == null) &#123; Node leftNode = node.left; node.left = null; size--; return leftNode; &#125; else if (node.left == null) &#123; Node rightNode = node.right; node.right = null; size--; return rightNode; &#125; else &#123; Node successor = minimum(node.right); successor.right = removeMin(node.right);//ä¸ºä»€ä¹ˆè¿™æ¡è¯­å¥å¿…é¡»åœ¨å‰é¢??? successor.left = node.left; node.left = node.right = null; //size--; åœ¨removeMinä¸­å·²ç»ç»´æŠ¤sizeäº† return successor; &#125; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; node.left = remove(node.left, e); &#125; else &#123; node.right = remove(node.right, e); &#125; return node;&#125; ä¸Šé¢è¯´çš„æ˜¯å–å³å­æ ‘ä¸­çš„æœ€å°å€¼ï¼Œä½ ä¹Ÿå¯ä»¥è€ƒè™‘å–å·¦å­æ ‘ä¸­çš„æœ€å¤§å€¼ï¼Œé“ç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚ å®Œæ•´ä»£ç public class BST&lt;E extends Comparable&lt;E&gt;&gt; &#123; private class Node &#123; public E e; public Node left; public Node right; public Node(E e) &#123; this.e = e; left = null; right = null; &#125; @Override public String toString() &#123; return e.toString(); &#125; &#125; //æ ¹èŠ‚ç‚¹ private Node root; //æ ‘ä¸­å…ƒç´ çš„ä¸ªæ•° private int size; public BST() &#123; root = null; size = 0; &#125; public int size() &#123; return size; &#125; public boolean isEmpty() &#123; return size == 0; &#125; public void add(E e) &#123; root = add(root, e); &#125; private Node add(Node node, E e) &#123; //è¿™é‡Œè¿”å›è¯­ä¹‰æŒ‡çš„çš„æ˜¯nodeæ‰€ä»£è¡¨çš„æ ¹èŠ‚ç‚¹ if (node == null) &#123; size++; return new Node(e); &#125; if (e.compareTo(node.e) &lt; 0) &#123; //å¦‚æœæ¯”æ ¹èŠ‚ç‚¹å°ï¼Œå¯¹å·¦å­æ ‘è¿›è¡Œæ›´æ–° node.left = add(node.left, e); &#125; else if (e.compareTo(node.e) &gt; 0) &#123; //å¦‚æœæ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œå¯¹å³å­æ ‘è¿›è¡Œæ›´æ–° node.right = add(node.right,e); &#125; //ç­‰äºçš„è¯ä»€ä¹ˆéƒ½ä¸åš return node; &#125; public boolean contains(E e) &#123; return contains(root, e); &#125; private boolean contains(Node node, E e) &#123; if (node == null) &#123; return false; &#125; if (e.equals(node.e)) &#123; return true; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; return contains(node.left, e); &#125; else &#123; return contains(node.right,e); &#125; &#125; //å‰åºéå† public void preOrder() &#123; preOrder(root); &#125; private void preOrder(Node node) &#123; if (node == null) &#123; return; &#125; System.out.println(node); preOrder(node.left); preOrder(node.right); &#125; public void preOrderNR() &#123; //éé€’å½’å†™æ³• if (root == null) &#123; return; &#125; Stack&lt;Node&gt; stack = new ArrayStack&lt;&gt;(); stack.push(root); while (!stack.isEmpty()) &#123; Node top = stack.pop(); System.out.println(top); if (top.right != null) &#123; stack.push(top.right); &#125; if (top.left != null) &#123; stack.push(top.left); &#125; &#125; &#125; //ä¸­åºéå† public void inOrder() &#123; inOrder(root); &#125; private void inOrder(Node node) &#123; if (node == null) &#123; return; &#125; inOrder(node.left); System.out.println(node); inOrder(node.right); &#125; //ååºéå† public void postOrder() &#123; postOrder(root); &#125; private void postOrder(Node node) &#123; if (node == null) &#123; return; &#125; postOrder(node.left); postOrder(node.right); System.out.println(node); &#125; public void levelOrder() &#123; if (root == null) &#123; return; &#125; Queue&lt;Node&gt; queue = new LoopQueue&lt;&gt;(); queue.enqueue(root); while (!queue.isEmpty()) &#123; Node front = queue.dequeue(); System.out.println(front); if (front.left != null) &#123; queue.enqueue(front.left); &#125; if (front.right != null) &#123; queue.enqueue(front.right); &#125; &#125; &#125; public E minimum() &#123; if (size == 0) &#123; throw new IllegalArgumentException(\"æ ‘ä¸ºç©º\"); &#125; return minimum(root).e; &#125; private Node minimum(Node node) &#123; if (node.left == null) &#123; return node; &#125; return minimum(node.left); &#125; public E maximum() &#123; if (size == 0) &#123; throw new IllegalArgumentException(\"æ ‘ä¸ºç©º\"); &#125; return maximum(root).e; &#125; private Node maximum(Node node) &#123; if (node.right == null) &#123; return node; &#125; return maximum(node.right); &#125; public E removeMin() &#123; E ret = minimum(); root = removeMin(root); return ret; &#125; private Node removeMin(Node node) &#123; if (node.left == null) &#123; Node rightNode = node.right; node.right = null; size--; return rightNode; &#125; node.left = removeMin(node.left); return node; &#125; public E removeMax() &#123; E ret = maximum(); root = removeMax(root); return ret; &#125; private Node removeMax(Node node) &#123; if (node.right == null) &#123; Node leftNode = node.left; node.left = null; size--; return leftNode; &#125; node.right = removeMax(node.right); return node; &#125; public void remove(E e) &#123; root = remove(root, e); &#125; private Node remove(Node node, E e) &#123; if (node == null) &#123; return null; &#125; if (e.equals(node.e)) &#123; if (node.right == null) &#123; Node leftNode = node.left; node.left = null; size--; return leftNode; &#125; else if (node.left == null) &#123; Node rightNode = node.right; node.right = null; size--; return rightNode; &#125; else &#123; Node successor = minimum(node.right); successor.right = removeMin(node.right);//ä¸ºä»€ä¹ˆè¿™æ¡è¯­å¥å¿…é¡»åœ¨å‰é¢??? successor.left = node.left; node.left = node.right = null; //size--; åœ¨removeMinä¸­å·²ç»ç»´æŠ¤sizeäº† return successor; &#125; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; node.left = remove(node.left, e); &#125; else &#123; node.right = remove(node.right, e); &#125; return node; &#125;&#125; ä¼˜å…ˆé˜Ÿåˆ—å’Œå †æ™®é€šé˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆå‡ºï¼Œå°±åƒæ˜¯æˆ‘ä»¬åœ¨é“¶è¡ŒåŠä¸šåŠ¡æˆ–è€…æ˜¯åœ¨è¶…å¸‚ä¹°ä¸œè¥¿ï¼Œä½†æ˜¯è€ƒè™‘åœ¨åŒ»é™¢ï¼Œæœ‰ç—…äººæœ‰çªå‘æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™å®¹ä¸å¾—ä»–å»æ’é˜ŸæŒ‚å·äº†ï¼Œè¿™æ—¶ä»–çš„ä¼˜å…ˆçº§æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæ‰€ä»¥ä»–éœ€è¦å¾—åˆ°ä¼˜å…ˆçš„å¤„ç†ï¼Œåƒè¿™ç§é˜Ÿåˆ—ä¸­çš„å…ƒç´ å…·æœ‰ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ï¼Œæˆ‘ä»¬æŠŠå®ƒç§°ä¹‹ä¸ºä¼˜å…ˆé˜Ÿåˆ—ã€‚åœ¨æ¸¸æˆä¸­æˆ‘ä»¬ä¹Ÿä¼šè®¾ç½®ä¼˜å…ˆæ”»å‡»è¡€é‡æœ€ä½çš„æ€ªæˆ–è€…è·ç¦»æœ€è¿‘çš„æ€ªï¼Œè¿™æ—¶å€™è¡€é‡å’Œè·ç¦»å°±æˆä¸ºäº†åˆ¤æ–­ä¼˜å…ˆçº§çš„æ ‡å‡†ï¼›åœ¨æ“ä½œç³»ç»Ÿçš„ä»»åŠ¡è°ƒåº¦ï¼Œæˆ‘ä»¬ä¸ºç¨‹åºåˆ†é… CPUï¼Œå†…å­˜ç­‰ç­‰èµ„æºï¼Œå¹¶ä¸æ˜¯å…ˆåˆ°å…ˆå¾—çš„ï¼Œä¹Ÿæ˜¯æ ¹æ®ç¨‹åºçš„ä¼˜å…ˆçº§æ¥è¿›è¡Œåˆ†é…çš„ã€‚ ### å †çš„ç»“æ„ è¿™é‡Œçš„å †æŒ‡çš„æ˜¯äºŒå‰å †ï¼Œå®ƒæ»¡è¶³ä»¥ä¸‹çš„æ€§è´¨ äºŒå‰å †æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ æŠŠå…ƒç´ é¡ºåºæ’åˆ—æˆæ ‘çš„å½¢çŠ¶ - å †ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºå…¶çˆ¶äº²èŠ‚ç‚¹çš„å€¼(æœ€å¤§å †ï¼Œç›¸åº”ä¹Ÿå¯ä»¥å®šä¹‰æœ€å°å †) å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ•°ç»„å»å®ç°å † ä¸Šé¢çš„åºå·è¡¨ç¤ºçš„æ˜¯åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œæˆ‘ä»¬å‘ç°å¦‚æœçˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡ä¸º `i`ï¼Œé‚£ä¹ˆå·¦å­©å­çš„ä¸‹æ ‡å°±ä¸º `2i + 1`ï¼Œå³å­©å­çš„ä¸‹æ ‡ä¸º `2i + 2`ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆå¿«çš„æ ¹æ®çˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡å¾—åˆ°å·¦å³å­©å­çš„ä¸‹æ ‡ï¼Œå¦‚æœçŸ¥é“å·¦å³å­©å­çš„ä¸‹æ ‡ `i`ï¼Œé‚£ä¹ˆ `(i - 1)/2` å°±å¯ä»¥å¾—åˆ°çˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡(æ•´æ•°é™¤æ³•ï¼Œå°æ•°éƒ¨åˆ†ä¼šè¢«èˆå»)ã€‚è¿™ä¸ªç»“è®ºå¯ä»¥ä½¿ç”¨æ•°å­¦å½’çº³æ³•è¿›è¡Œè¯æ˜ï¼Œä½†ä¸æ˜¯è¿™é‡Œçš„é‡ç‚¹ï¼Œæ‰€ä»¥ä¸å¤šåšé˜è¿°ã€‚ public class MaxHeap&lt;E extends Comparable&lt;E&gt;&gt; &#123; private Array&lt;E&gt; data; public MaxHeap(int capacity) &#123; data = new Array&lt;&gt;(capacity); &#125; public MaxHeap() &#123; data = new Array&lt;&gt;(); &#125; public int size() &#123; return data.getSize(); &#125; public boolean isEmpty() &#123; return data.isEmpty(); &#125; //æ ¹æ®å·¦å³å­©å­çš„ä¸‹æ ‡è·å¾—çˆ¶äº²èŠ‚ç‚¹çš„ä¸‹æ ‡ private int parent(int index) &#123; return (index - 1) / 2; &#125; //æ ¹æ®çˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡è·å¾—å·¦å­©å­çš„ä¸‹æ ‡ private int leftChild(int index) &#123; return 2 * index + 1; &#125; //æ ¹æ®çˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡è·å¾—å³å­©å­çš„ä¸‹æ ‡ private int rightChild(int index) &#123; return 2 * index + 2; &#125;&#125; å †çš„å®ç°å‘å †ä¸­æ·»åŠ å…ƒç´  public void swap(int i, int j) &#123; if (i &lt; 0 || i &gt;= size() || j &lt; 0 || j &gt;= size()) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; E temp = data.get(i); data.set(i, data.get(j)); data.set(j, temp);&#125;public void add(E e) &#123; data.addLast(e); siftUp(data.getSize() - 1);&#125;private void siftUp(int index) &#123; //indexä¸æ˜¯æ ¹èŠ‚ç‚¹(æ ¹èŠ‚ç‚¹ä¸è¦ä¸Šæµ®äº†) å¹¶ä¸”å­©å­æ¯”çˆ¶äº²å¤§ while (index != 0 &amp;&amp; data.get(index).compareTo(data.get(parent(index))) &gt; 0) &#123; swap(index, parent(index)); index = parent(index); &#125;&#125; å‘å †ä¸­å–å‡ºæœ€å¤§å…ƒç´  public E findMax() &#123; if (isEmpty()) &#123; throw new IllegalArgumentException(\"å †ä¸ºç©º\"); &#125; return data.get(0);&#125;public E extractMax() &#123; E ret = findMax(); swap(0,data.getSize() - 1); data.removeLast(); siftDown(0); return ret;&#125;private void siftDown(int index) &#123; //æ²¡æœ‰å­©å­æ—¶ï¼Œä¸‹æ²‰ç»“æŸ while (leftChild(index) &lt; size()) &#123; int max = leftChild(index); int rightIndex = rightChild(index); if (rightIndex &lt; size()) &#123; max = data.get(max).compareTo(data.get(rightIndex)) &gt; 0 ? max : rightIndex; &#125; //æœ€å¤§å­©å­æ¯”çˆ¶èŠ‚ç‚¹å°æ—¶ï¼Œä¸‹æ²‰ç»“æŸ if (data.get(max).compareTo(data.get(index)) &lt;= 0) &#123; break; &#125; swap(max,index); index = max; &#125;&#125; replacereplace æ“ä½œæŒ‡çš„æ˜¯ä»å †ä¸­å–å‡ºå…ƒç´ ï¼Œå¹¶å‘å †ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå®ç°çš„æ–¹æ³•ä¸º //å–å‡ºå †ä¸­çš„æœ€å¤§å…ƒç´ ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ epublic E replace(E e) &#123; E ret = findMax(); data.set(0,e); siftDown(0); return ret;&#125; heapifyheapify æ˜¯æŒ‡å°†ä»»æ„ä¸€ä¸ªæ•°ç»„æ•´ç†æˆå †çš„å½¢çŠ¶ï¼Œ æˆ‘ä»¬æŠŠè¿™ä¸ªæ–¹æ³•åšæˆä¸€ä¸ªæ„é€ å‡½æ•° public MaxHeap(E[] arr) &#123; data = new Array&lt;&gt;(arr.length); for (int i = 0; i &lt; arr.length; i++) &#123; data.addLast(arr[i]); &#125; for (int i = parent(data.getSize() -1); i &gt;=0; i--) &#123; siftDown(i); &#125;&#125; å®Œæ•´ä»£ç public class MaxHeap&lt;E extends Comparable&lt;E&gt;&gt; &#123; private Array&lt;E&gt; data; public MaxHeap(int capacity) &#123; data = new Array&lt;&gt;(capacity); &#125; public MaxHeap() &#123; data = new Array&lt;&gt;(); &#125; public MaxHeap(E[] arr) &#123; data = new Array&lt;&gt;(arr.length); for (int i = 0; i &lt; arr.length; i++) &#123; data.addLast(arr[i]); &#125; for (int i = parent(data.getSize() -1); i &gt;=0; i--) &#123; siftDown(i); &#125; &#125; public int size() &#123; return data.getSize(); &#125; public boolean isEmpty() &#123; return data.isEmpty(); &#125; //æ ¹æ®å·¦å³å­©å­çš„ä¸‹æ ‡è·å¾—çˆ¶äº²èŠ‚ç‚¹çš„ä¸‹æ ‡ private int parent(int index) &#123; return (index - 1) / 2; &#125; //æ ¹æ®çˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡è·å¾—å·¦å­©å­çš„ä¸‹æ ‡ private int leftChild(int index) &#123; return 2 * index + 1; &#125; //æ ¹æ®çˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡è·å¾—å³å­©å­çš„ä¸‹æ ‡ private int rightChild(int index) &#123; return 2 * index + 2; &#125; public void swap(int i, int j) &#123; if (i &lt; 0 || i &gt;= size() || j &lt; 0 || j &gt;= size()) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; E temp = data.get(i); data.set(i, data.get(j)); data.set(j, temp); &#125; public void add(E e) &#123; data.addLast(e); siftUp(data.getSize() - 1); &#125; private void siftUp(int index) &#123; //indexä¸æ˜¯æ ¹èŠ‚ç‚¹(æ ¹èŠ‚ç‚¹ä¸è¦ä¸Šæµ®äº†) å¹¶ä¸”å­©å­æ¯”çˆ¶äº²å¤§ while (index != 0 &amp;&amp; data.get(index).compareTo(data.get(parent(index))) &gt; 0) &#123; swap(index, parent(index)); index = parent(index); &#125; &#125; public E findMax() &#123; if (isEmpty()) &#123; throw new IllegalArgumentException(\"å †ä¸ºç©º\"); &#125; return data.get(0); &#125; public E extractMax() &#123; E ret = findMax(); swap(0,data.getSize() - 1); data.removeLast(); siftDown(0); return ret; &#125; private void siftDown(int index) &#123; //æ²¡æœ‰å­©å­æ—¶ï¼Œä¸‹æ²‰ç»“æŸ while (leftChild(index) &lt; size()) &#123; int max = leftChild(index); int rightIndex = rightChild(index); if (rightIndex &lt; size()) &#123; max = data.get(max).compareTo(data.get(rightIndex)) &gt; 0 ? max : rightIndex; &#125; //æœ€å¤§å­©å­æ¯”çˆ¶èŠ‚ç‚¹å°æ—¶ï¼Œä¸‹æ²‰ç»“æŸ if (data.get(max).compareTo(data.get(index)) &lt;= 0) &#123; break; &#125; swap(max,index); index = max; &#125; &#125; //å–å‡ºå †ä¸­çš„æœ€å¤§å…ƒç´ ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ e public E replace(E e) &#123; E ret = findMax(); data.set(0,e); siftDown(0); return ret; &#125;&#125; åŸºäºå †çš„ä¼˜å…ˆé˜Ÿåˆ—public class PriorityQueue&lt;E extends Comparable&lt;E&gt;&gt; implements Queue&lt;E&gt; &#123; private MaxHeap&lt;E&gt; maxHeap; public PriorityQueue() &#123; maxHeap = new MaxHeap&lt;&gt;(); &#125; @Override public void enqueue(E e) &#123; maxHeap.add(e); &#125; @Override public E dequeue() &#123; return maxHeap.extractMax(); &#125; @Override public E getFront() &#123; return maxHeap.findMax(); &#125; @Override public int getSize() &#123; return maxHeap.size(); &#125; @Override public boolean isEmpty() &#123; return maxHeap.isEmpty(); &#125;&#125; çº¿æ®µæ ‘å¯¹äºæœ‰ä¸€ç±»çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸»è¦å…³å¿ƒçš„æ˜¯çº¿æ®µ(åŒºé—´)ï¼Œæ¯”å¦‚è¯´æŸ¥è¯¢ä¸€ä¸ªåŒºé—´ [i, j] å†…çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼ç­‰ç­‰ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªç½‘ç«™ï¼Œä½ æƒ³æŸ¥è¯¢æŸå¹´(æˆ–æŸå¹´ä»¥å)çš„ç”¨æˆ·è®¿é—®é‡ï¼Œæ¶ˆè´¹æœ€å¤šçš„ç”¨æˆ·ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯åœ¨æŸä¸ªåŒºé—´å†…è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸€èˆ¬çº¿æ®µæ ‘çš„åŒºé—´æ˜¯å›ºå®šçš„ï¼Œä¸åŒ…å«åˆ é™¤å’Œæ·»åŠ çš„æ“ä½œï¼Œåªæœ‰æŸ¥è¯¢å’Œæ›´æ–°çš„æ“ä½œ ### çº¿æ®µæ ‘çš„è¡¨ç¤º ç°åœ¨å¦‚æœå‡è®¾æœ‰nä¸ªå…ƒç´ ï¼Œç”¨æ•°ç»„å­˜å‚¨çš„è¯ï¼Œéœ€è¦å¤šå°‘ç©ºé—´å‘¢ public class SegmentTree&lt;E&gt; &#123; private E[] tree; private E[] data; public SegmentTree(E[] arr) &#123; data = (E[]) new Object[arr.length]; for (int i = 0; i &lt; arr.length; i++) &#123; data[i] = arr[i]; &#125; tree = (E[]) new Object[4 * data.length]; &#125; public int getSize() &#123; return data.length; &#125; public E get(int index) &#123; if (index &lt; 0 || index &gt;= data.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; return data[index]; &#125; private int leftChild(int index) &#123; return 2 * index + 1; &#125; private int rightChild(int index) &#123; return 2 * index + 2; &#125;&#125; å®ç°åˆ›å»ºçº¿æ®µæ ‘ä¸‹é¢å°±è¦æ ¹æ®æ•°ç»„æ¥åˆ›å»ºä¸€æ£µçº¿æ®µæ ‘ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å…ˆåˆ›å»ºä¸‹é¢çš„å­çº¿æ®µæ ‘ï¼Œç„¶åç”±è¿™äº›å­çº¿æ®µæ ‘åˆå¹¶æˆå¤§çš„çº¿æ®µæ ‘ï¼Œä»¥æ­¤ç±»æ¨ åœ¨åˆå¹¶å·¦å³å­æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½å†™æ­»åˆå¹¶çš„è¿‡ç¨‹ï¼Œå…·ä½“æ€ä¹ˆåˆå¹¶åº”è¯¥ç”±ä¸šåŠ¡å†³å®šï¼Œç”±ç”¨æˆ·å»å†³å®šå¦‚ä½•åˆå¹¶ï¼Œæ‰€ä»¥åˆå¹¶çš„è¿‡ç¨‹æˆ‘ä»¬å†™ä¸€ä¸ªæ¥å£ï¼Œå…·ä½“çš„å®ç°ç”±ç”¨æˆ·å»å®ç° public interface Merger&lt;E&gt; &#123; public E merge(E a, E b);&#125; ç„¶åæˆ‘ä»¬åœ¨æ„é€ æ–¹æ³•ä¸­æ·»åŠ åˆ›å»ºçº¿æ®µæ ‘çš„è¿‡ç¨‹(ä¸ºäº†åˆ›å»ºçº¿æ®µæ ‘ï¼Œå¢åŠ äº†ä¸€ä¸ªè¾…åŠ©æ–¹æ³•) private Merger&lt;E&gt; merger;//mergerç”±ç”¨æˆ·ä¼ å…¥ ç”¨æˆ·å†³å®šå¦‚ä½•åˆå¹¶public SegmentTree(E[] arr, Merger&lt;E&gt; merger) &#123; this.merger = merger; data = (E[]) new Object[arr.length]; for (int i = 0; i &lt; arr.length; i++) &#123; data[i] = arr[i]; &#125; tree = (E[]) new Object[4 * data.length]; //æ„é€ çº¿æ®µæ ‘ åˆ›å»ºæ ¹èŠ‚ç‚¹ä¸º0ï¼ŒèŒƒå›´ä¸º[0,data.length - 1]çš„çº¿æ®µæ ‘ buildSegmentTree(0, 0, data.length - 1);&#125;//åœ¨treeIndexåˆ›å»ºä¸€æ£µ[l,r]çš„çº¿æ®µæ ‘private void buildSegmentTree(int treeIndex, int l, int r) &#123; if (l == r) &#123; tree[treeIndex] = data[l]; return; &#125; //l != r é‚£ä¹ˆå°±è¦åˆ›å»ºå­æ ‘çš„çº¿æ®µæ ‘ int leftTreeIndex = leftChild(treeIndex); int rightTreeIndex = rightChild(treeIndex); int mid = l + (r - l) / 2; //(l +r) / 2ä¸­l + rå¯èƒ½ä¼šå¤§äºintè¡¨ç¤ºçš„èŒƒå›´ä»è€Œæº¢å‡º buildSegmentTree(leftTreeIndex, l, mid); buildSegmentTree(rightTreeIndex, mid + 1, r); //èåˆçš„æ–¹æ³•ç”±ç”¨æˆ·ä¼ å…¥ tree[treeIndex] = merger.merge(tree[leftTreeIndex],tree[rightTreeIndex]);&#125; ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ‰“å°å‡ºçº¿æ®µæ ‘ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ª toString() æ–¹æ³• @Overridepublic String toString() &#123; StringBuilder res = new StringBuilder(); res.append(\"[\"); for (int i = 0; i &lt; tree.length; i++) &#123; if (tree[i] != null) &#123; res.append(tree[i]); &#125; else &#123; res.append(\"null\"); &#125; if (i != tree.length - 1) &#123; res.append(\", \"); &#125; &#125; res.append(\"]\"); return res.toString();&#125; æŸ¥è¯¢ å®ç°ä»£ç  public E query(int queryL, int queryR) &#123; if (queryL &lt; 0 || queryL &gt;= data.length || queryR &lt; 0 || queryR &gt;= data.length || queryL &gt; queryR) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; return query(0, 0, data.length - 1, queryL, queryR);&#125;private E query(int treeIndex, int l, int r, int queryL, int queryR) &#123; if (l == queryL &amp;&amp; r == queryR) &#123; return tree[treeIndex]; &#125; int leftChildIndex = leftChild(treeIndex); int rightChildIndex = rightChild(treeIndex); int mid = l + (r - l) / 2; if (queryL &gt;= mid + 1) &#123; return query(rightChildIndex, mid+1, r, queryL, queryR); &#125; else if (queryR &lt;= mid) &#123; return query(leftChildIndex, l, mid, queryL, queryR); &#125; E leftResult = query(leftChildIndex, l, mid, queryL, mid); E rightResult = query(rightChildIndex, mid + 1, r, mid + 1, queryR); return merger.merge(leftResult, rightResult);&#125; æ›´æ–°public void set(int index, E e) &#123; if (index &lt; 0 || index &gt;= data.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; set(0, 0, data.length - 1, index, e);&#125;private void set(int treeIndex, int l, int r, int index, E e) &#123; if (l == r) &#123; tree[treeIndex] = e; return; &#125; int leftChildIndex = leftChild(treeIndex); int rightChildIndex = rightChild(treeIndex); int mid = l + (r - l) / 2; if (index &gt;= mid + 1) &#123; set(rightChildIndex, mid+1, r, index, e); &#125; else &#123; set(leftChildIndex, l, mid, index, e); &#125; tree[treeIndex] = merger.merge(tree[leftChildIndex], tree[rightChildIndex]);&#125; å®Œæ•´ä»£ç public class SegmentTree&lt;E&gt;&#123; private E[] tree; private E[] data; private Merger&lt;E&gt; merger; public SegmentTree(E[] arr, Merger&lt;E&gt; merger) &#123; this.merger = merger; data = (E[]) new Object[arr.length]; for (int i = 0; i &lt; arr.length; i++) &#123; data[i] = arr[i]; &#125; tree = (E[]) new Object[4 * data.length]; buildSegmentTree(0, 0, data.length - 1); &#125; //åœ¨treeIndexåˆ›å»ºä¸€æ£µ[l,r]çš„çº¿æ®µæ ‘ private void buildSegmentTree(int treeIndex, int l, int r) &#123; if (l == r) &#123; tree[treeIndex] = data[l]; return; &#125; int leftTreeIndex = leftChild(treeIndex); int rightTreeIndex = rightChild(treeIndex); int mid = l + (r - l) / 2; //(l +r) / 2ä¸­l + rå¯èƒ½ä¼šå¤§äºintè¡¨ç¤ºçš„èŒƒå›´ä»è€Œæº¢å‡º buildSegmentTree(leftTreeIndex, l, mid); buildSegmentTree(rightTreeIndex, mid + 1, r); tree[treeIndex] = merger.merge(tree[leftTreeIndex],tree[rightTreeIndex]); &#125; public E query(int queryL, int queryR) &#123; if (queryL &lt; 0 || queryL &gt;= data.length || queryR &lt; 0 || queryR &gt;= data.length || queryL &gt; queryR) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; return query(0, 0, data.length - 1, queryL, queryR); &#125; private E query(int treeIndex, int l, int r, int queryL, int queryR) &#123; if (l == queryL &amp;&amp; r == queryR) &#123; return tree[treeIndex]; &#125; int leftChildIndex = leftChild(treeIndex); int rightChildIndex = rightChild(treeIndex); int mid = l + (r - l) / 2; if (queryL &gt;= mid + 1) &#123; return query(rightChildIndex, mid+1, r, queryL, queryR); &#125; else if (queryR &lt;= mid) &#123; return query(leftChildIndex, l, mid, queryL, queryR); &#125; E leftResult = query(leftChildIndex, l, mid, queryL, mid); E rightResult = query(rightChildIndex, mid + 1, r, mid + 1, queryR); return merger.merge(leftResult, rightResult); &#125; public void set(int index, E e) &#123; if (index &lt; 0 || index &gt;= data.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; set(0, 0, data.length - 1, index, e); &#125; private void set(int treeIndex, int l, int r, int index, E e) &#123; if (l == r) &#123; tree[treeIndex] = e; return; &#125; int leftChildIndex = leftChild(treeIndex); int rightChildIndex = rightChild(treeIndex); int mid = l + (r - l) / 2; if (index &gt;= mid + 1) &#123; set(rightChildIndex, mid+1, r, index, e); &#125; else &#123; set(leftChildIndex, l, mid, index, e); &#125; tree[treeIndex] = merger.merge(tree[leftChildIndex], tree[rightChildIndex]); &#125; public int getSize() &#123; return data.length; &#125; public E get(int index) &#123; if (index &lt; 0 || index &gt;= data.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; return data[index]; &#125; private int leftChild(int index) &#123; return 2 * index + 1; &#125; private int rightChild(int index) &#123; return 2 * index + 2; &#125; @Override public String toString() &#123; StringBuilder res = new StringBuilder(); res.append(\"[\"); for (int i = 0; i &lt; tree.length; i++) &#123; if (tree[i] != null) &#123; res.append(tree[i]); &#125; else &#123; res.append(\"null\"); &#125; if (i != tree.length - 1) &#123; res.append(\", \"); &#125; &#125; res.append(\"]\"); return res.toString(); &#125;&#125; TrieTrie æ ‘åˆç§°ä¸ºå­—å…¸æ ‘ã€å‰ç¼€æ ‘ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸€èˆ¬æ ‘ç»“æ„å»æŸ¥è¯¢ä¸€ä¸ªæ•°æ®é›†é‡Œçš„å•è¯ï¼Œå®ƒçš„å¤æ‚åº¦æ˜¯ O(log n)ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨ Trie å»æŸ¥è¯¢å•è¯çš„è¯ï¼ŒæŸ¥è¯¢çš„å¤æ‚åº¦åªä¸å•è¯çš„é•¿åº¦æœ‰å…³ï¼Œä¸æ•°æ®çš„è§„æ¨¡æ— å…³ã€‚æ¯”å¦‚å¯¹äºä¸€ä¸ª $2^{20}$ è§„æ¨¡çš„æ•°æ®é›†ï¼Œæˆ‘ä»¬å»æŸ¥ä¸€ä¸ªå•è¯ &quot;word&quot;ï¼Œä¸€èˆ¬æ ‘çš„å¤æ‚åº¦ä¸º O(20)ï¼Œè€Œ Trie æ ‘çš„å¤æ‚åº¦ä¸º O(4)ï¼Œå…¶ä¸­ 4 æ˜¯å•è¯çš„é•¿åº¦ï¼Œæ‰€ä»¥ Trie æ ‘æ˜¯ä¸€ç§å¾ˆé«˜æ•ˆçš„æŸ¥è¯¢å­—ç¬¦ä¸²çš„æ ‘ç»“æ„ã€‚ class Node &#123; char c; Node next[26];&#125; ä½†æ˜¯è¿™æ ·è€ƒè™‘å¿½ç•¥äº†å¤§å°å†™ï¼Œå¹¶ä¸”æ²¡æœ‰è€ƒè™‘ä¸€äº›ç‰¹æ®Šçš„å­—ç¬¦ï¼Œå¦‚ @ ç­‰ç¬¦å·æˆ–æ ‡ç‚¹ç¬¦å·ã€‚æ‰€ä»¥æˆ‘ä»¬æ¯ä¸ªèŠ‚ç‚¹ä¸å†æ˜¯é™æ€çš„æŒ‡å‘ 26 ä¸ªèŠ‚ç‚¹ï¼Œè€Œæ˜¯åŠ¨æ€çš„æŒ‡å‘è‹¥å¹²ä¸ªèŠ‚ç‚¹ class Node &#123; char c; Map&lt;Character,Node&gt; next;&#125; å¦å¤–æˆ‘ä»¬é€šè¿‡æŸä¸ªå­—ç¬¦æ¥åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡ Map å·²ç»çŸ¥é“äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¿…å­˜å‚¨è¿™ä¸ªå­—ç¬¦ class Node &#123; Map&lt;Character,Node&gt; next;&#125; å¦å¤–é€šè¿‡å¶å­èŠ‚ç‚¹æ˜¯æ— æ³•åŒºåˆ«å•è¯çš„ç»“å°¾çš„ï¼Œå› ä¸ºæœ‰çš„å•è¯å¯èƒ½ä¸ºæŸä¸ªå•è¯çš„å‰ç¼€ï¼Œå¦‚ `\"pan\"` ä¸º `\"panda\"` çš„å‰ç¼€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¢åŠ ä¸€ä¸ªå˜é‡ `isWord` æ¥è¡¨ç¤ºæ˜¯å¦æ˜¯å•è¯çš„ç»“å°¾ import java.util.TreeMap;public class Trie &#123; private class Node &#123; public boolean isWord; public TreeMap&lt;Character,Node&gt; next; public Node(boolean isWord) &#123; this.isWord = isWord; next = new TreeMap&lt;&gt;(); &#125; public Node() &#123; this(false); &#125; &#125; private Node root; private int size; public Trie() &#123; root = new Node(); size = 0; &#125; public int getSize() &#123; return size; &#125;&#125; å®ç°æ·»åŠ å•è¯ public void add(String word) &#123; Node cur = root; for (int i = 0; i &lt; word.length(); i++) &#123; char c = word.charAt(i); //åˆ¤æ–­æ˜¯å¦æœ‰æŒ‡å‘è¿™ä¸ªå­—ç¬¦çš„èŠ‚ç‚¹ if (cur.next.get(c) == null) &#123; //æ²¡æœ‰åˆ™æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ cur.next.put(c, new Node()); &#125; //ç§»åŠ¨åˆ°è¿™ä¸ªèŠ‚ç‚¹ cur = cur.next.get(c); &#125; //éå†å®Œæ¯•ï¼Œåˆ¤æ–­è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦è¢«æ ‡è®°ä¸ºå•è¯çš„ç»“å°¾ å¦‚æœæ²¡æœ‰åˆ™æ ‡è®°å¹¶ä¸”ç»´æŠ¤size++ if (!cur.isWord) &#123; cur.isWord = true; size++; &#125;&#125; æŸ¥è¯¢å•è¯æŸ¥è¯¢å•è¯çš„é€»è¾‘ä¸æ·»åŠ å•è¯çš„é€»è¾‘é«˜åº¦é‡å¤ï¼Œå¦‚æœåœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­é‡åˆ°æ²¡æœ‰æŒ‡å‘è¯¥å­—ç¬¦çš„èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥è¿”å› falseï¼Œå¦‚æœéå†å®Œæ¯•éƒ½æ²¡æœ‰å‘ç”Ÿä¸Šé¢çš„æƒ…å†µï¼Œåˆ™åˆ¤æ–­è¯¥èŠ‚ç‚¹æ˜¯å¦è¢«æ ‡è®°ä¸ºå•è¯çš„ç»“å°¾ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å› falseï¼Œå¦åˆ™è¿”å› trueã€‚ public boolean contains(String word) &#123; Node cur = root; for (int i = 0; i &lt; word.length(); i++) &#123; char c = word.charAt(i); if (cur.next.get(c) == null) &#123; return false; &#125; cur = cur.next.get(c); &#125; return cur.isWord;&#125; å‰ç¼€æœç´¢æŸ¥è¯¢æ˜¯å¦åŒ…å«æŸä¸ªå‰ç¼€ï¼Œä¸ contains() æ–¹æ³•å‡ ä¹ä¸€æ ·ï¼Œä¸è¿‡æœ€åä¸ç”¨åˆ¤æ–­æ˜¯å¦æ˜¯å•è¯ç»“å°¾ï¼Œç›´æ¥è¿”å› true public boolean isPrefix(String prefix) &#123; Node cur = root; for (int i = 0; i &lt; prefix.length(); i++) &#123; char c = prefix.charAt(i); if (cur.next.get(c) == null) &#123; return false; &#125; cur = cur.next.get(c); &#125; return true;&#125; ç®€å•å­—ç¬¦åŒ¹é…å¯¹äºå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ . è§„å®šå®ƒå¯ä»¥åŒ¹é…ä»»æ„çš„å­—ç¬¦ï¼Œé‚£ä¹ˆè¿™æ ·çš„ä¸€ä¸ªåŒ¹é…ç®—æ³•å¦‚ä½•å†™ï¼Œå¦‚æœæˆ‘ä»¬é‡åˆ°çš„å­—ç¬¦ä¸æ˜¯ . çš„è¯ï¼Œé€»è¾‘å’Œä¸Šé¢ä¸€æ ·ï¼Œå¦‚æœé‡åˆ°çš„æ˜¯.çš„è¯ï¼Œæˆ‘ä»¬å°±è¦å»æœç´¢è¯¥èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„åˆ†å‰(å­æ ‘) public boolean match(String word) &#123; return match(root, word, 0);&#125;private boolean match(Node node, String word, int index) &#123; //é€’å½’ç»ˆæ­¢æ¡ä»¶ if (index == word.length()) &#123; return node.isWord; &#125; char c = word.charAt(index); //å¦‚æœä¸æ˜¯. if (c != '.') &#123; //æ²¡æœ‰æŒ‡å‘è¯¥å­—ç¬¦çš„èŠ‚ç‚¹ è¿”å›false if (node.next.get(c) == null) &#123; return false; &#125; else &#123; //å¦åˆ™ç»§ç»­åŒ¹é… return match(node.next.get(c), word, index + 1); &#125; &#125; else &#123; //å¦‚æœæ˜¯. å»è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åˆ†å‰ä¸­æœç´¢ for (char nextChar : node.next.keySet()) &#123; //å¦‚æœæœ‰ä»»ä¸€ä¸ªåˆ†å‰åŒ¹é…åˆ°äº†ï¼Œåˆ™è¿”å›true if (match(node.next.get(nextChar), word, index + 1)) &#123; return true; &#125; &#125; //è¯´æ˜ä¸Šé¢çš„æ²¡æœ‰ä¸€ä¸ªåŒ¹é…æˆåŠŸäº†ï¼Œè¿”å›fasle return false; &#125;&#125; å…¨éƒ¨ä»£ç import java.util.TreeMap;public class Trie &#123; private class Node &#123; public boolean isWord; public TreeMap&lt;Character,Node&gt; next; public Node(boolean isWord) &#123; this.isWord = isWord; next = new TreeMap&lt;&gt;(); &#125; public Node() &#123; this(false); &#125; &#125; private Node root; private int size; public Trie() &#123; root = new Node(); size = 0; &#125; public int getSize() &#123; return size; &#125; public void add(String word) &#123; Node cur = root; for (int i = 0; i &lt; word.length(); i++) &#123; char c = word.charAt(i); if (cur.next.get(c) == null) &#123; cur.next.put(c, new Node()); &#125; cur = cur.next.get(c); &#125; if (!cur.isWord) &#123; cur.isWord = true; size++; &#125; &#125; public boolean contains(String word) &#123; Node cur = root; for (int i = 0; i &lt; word.length(); i++) &#123; char c = word.charAt(i); if (cur.next.get(c) == null) &#123; return false; &#125; cur = cur.next.get(c); &#125; return cur.isWord; &#125; public boolean isPrefix(String prefix) &#123; Node cur = root; for (int i = 0; i &lt; prefix.length(); i++) &#123; char c = prefix.charAt(i); if (cur.next.get(c) == null) &#123; return false; &#125; cur = cur.next.get(c); &#125; return true; &#125; public boolean match(String word) &#123; return match(root, word, 0); &#125; private boolean match(Node node, String word, int index) &#123; //é€’å½’ç»ˆæ­¢æ¡ä»¶ if (index == word.length()) &#123; return node.isWord; &#125; char c = word.charAt(index); if (c != '.') &#123; if (node.next.get(c) == null) &#123; return false; &#125; else &#123; return match(node.next.get(c), word, index + 1); &#125; &#125; else &#123; for (char nextChar : node.next.keySet()) &#123; if (match(node.next.get(nextChar), word, index + 1)) &#123; return true; &#125; &#125; //è¯´æ˜ä¸Šé¢çš„æ²¡æœ‰ä¸€ä¸ªåŒ¹é…æˆåŠŸäº† return false; &#125; &#125;&#125; å¹¶æŸ¥é›†æˆ‘ä»¬ä¹‹å‰é‡åˆ°çš„æ ‘ç»“æ„éƒ½æ˜¯ç”±çˆ¶äº²æŒ‡å‘å­©å­ï¼Œä½†æ˜¯å¹¶æŸ¥é›†ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯ç”±å­©å­æŒ‡å‘çˆ¶äº²çš„ä¸€ç§ç»“æ„ï¼Œå¹¶æŸ¥é›†ç»“æ„å¯ä»¥éå¸¸é«˜æ•ˆçš„å›ç­”è¿æ¥é—®é¢˜(Connectivity Problem)ï¼Œå®ƒå¯ä»¥å¾ˆå¿«çš„åˆ¤æ–­ç½‘ç»œä¸­èŠ‚ç‚¹çš„è¿æ¥çŠ¶æ€ã€‚å¹¶æŸ¥é›†ä¸»è¦æ”¯æŒä¸¤ä¸ªåŠ¨ä½œ union(p, q) å°†å…ƒç´  p, q è¿æ¥èµ·æ¥ isConnected(p, q) åˆ¤æ–­å…ƒç´  p, q æ˜¯å¦æ˜¯è¿æ¥çš„ï¼Œå³æ˜¯å¦æ‰€å±ä¸€ä¸ªé›†åˆ è¿™é‡Œå…ˆç»™å‡ºå¹¶æŸ¥é›†çš„æ¥å£ï¼Œåé¢æˆ‘ä»¬å°†å®ç°å¤šä¸ªç‰ˆæœ¬çš„å¹¶æŸ¥é›† public interface UF &#123; public int getSize(); public boolean isConnected(int p, int q); public void unionElements(int p, int q);&#125; Quick Find //ç¬¬ä¸€ç‰ˆçš„å¹¶æŸ¥é›†public class UnionFind1 implements UF&#123; private int[] id; public UnionFind1(int size) &#123; id = new int[size]; //è¿™æ—¶idå…¨éƒ¨ä¸º0ï¼Œç›¸å½“äºåœ¨ä¸€ä¸ªé›†åˆä¸­ ä¸€å¼€å§‹åº”è¯¥å…¨éƒ¨ä¸åœ¨ä¸€ä¸ªé›†åˆä¸­ for (int i = 0; i &lt; id.length; i++) &#123; id[i] = i; &#125; &#125; @Override public int getSize() &#123; return id.length; &#125; //æ‰¾åˆ°å…ƒç´ pæ‰€å±çš„é›†åˆ private int find(int p) &#123; if (p &lt; 0 || p &gt;= id.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; return id[p]; &#125; @Override public boolean isConnected(int p, int q) &#123; return find(p) == find(q); &#125; @Override public void unionElements(int p, int q) &#123; if (find(p) == find(q)) &#123; return; &#125; for (int i = 0; i &lt; id.length; i++) &#123; if (id[i] == find(p)) &#123; id[i] = find(q); &#125; &#125; &#125;&#125; Quick Union //ç¬¬äºŒç‰ˆçš„å¹¶æŸ¥é›†public class UnionFind2 implements UF&#123; private int[] parent; public UnionFind2(int size) &#123; parent = new int[size]; for (int i = 0; i &lt; parent.length; i++) &#123; parent[i] = i; &#125; &#125; @Override public int getSize() &#123; return parent.length; &#125; private int find(int index) &#123; if (index &lt; 0 || index &gt;= parent.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; while (index != parent[index]) &#123; index = parent[index]; &#125; return index; &#125; @Override public boolean isConnected(int p, int q) &#123; return find(p) == find(q); &#125; @Override public void unionElements(int p, int q) &#123; int pRoot = find(p); int qRoot = find(q); if (pRoot == qRoot) &#123; return; &#125; else &#123; parent[pRoot] = parent[qRoot]; &#125; &#125;&#125; åŸºäºrankçš„ä¼˜åŒ– //ç¬¬ä¸‰ç‰ˆçš„å¹¶æŸ¥é›†public class UnionFind3 implements UF&#123; private int[] parent; //è®°å½•æ ¹èŠ‚ç‚¹çš„é«˜åº¦ private int[] rank; public UnionFind3(int size) &#123; parent = new int[size]; rank = new int[size]; for (int i = 0; i &lt; parent.length; i++) &#123; parent[i] = i; rank[i] = 1; &#125; &#125; @Override public int getSize() &#123; return parent.length; &#125; private int find(int index) &#123; if (index &lt; 0 || index &gt;= parent.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; while (index != parent[index]) &#123; index = parent[index]; &#125; return index; &#125; @Override public boolean isConnected(int p, int q) &#123; return find(p) == find(q); &#125; @Override public void unionElements(int p, int q) &#123; int pRoot = find(p); int qRoot = find(q); if (pRoot == qRoot) &#123; return; &#125; if (rank[pRoot] &lt;= rank[qRoot])&#123; parent[pRoot] = parent[qRoot]; //åªè¦åœ¨ä¸¤ä¸ªæ•°çš„é«˜åº¦ç›¸ç­‰çš„æ—¶å€™ æ ‘çš„é«˜åº¦æ‰ä¼šå¢åŠ  if (rank[pRoot] == rank[qRoot]) &#123; rank[qRoot]++; &#125; &#125; else &#123; parent[qRoot] = parent[pRoot]; &#125; &#125;&#125; è·¯å¾„å‹ç¼© //ç¬¬å››ç‰ˆçš„å¹¶æŸ¥é›†public class UnionFind4 implements UF&#123; private int[] parent; private int[] rank; public UnionFind4(int size) &#123; parent = new int[size]; rank = new int[size]; for (int i = 0; i &lt; parent.length; i++) &#123; parent[i] = i; rank[i] = 1; &#125; &#125; @Override public int getSize() &#123; return parent.length; &#125; private int find(int index) &#123; if (index &lt; 0 || index &gt;= parent.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; while (index != parent[index]) &#123; //åªæ·»åŠ äº†è¿™ä¸€è¡Œä»£ç  parent[index] = parent[parent[index]]; index = parent[index]; &#125; return index; &#125; @Override public boolean isConnected(int p, int q) &#123; return find(p) == find(q); &#125; @Override public void unionElements(int p, int q) &#123; int pRoot = find(p); int qRoot = find(q); if (pRoot == qRoot) &#123; return; &#125; //è¿™æ—¶rankä¸ä»£è¡¨é«˜åº¦ å› ä¸ºåœ¨è·¯å¾„å‹ç¼©æ—¶æ²¡æœ‰ç»´æŠ¤rank //ä½†æ˜¯æ•´ä½“ä¸Šrankè¿˜æ˜¯èƒ½å¤Ÿè¡¨ç¤ºå¤§å°å…³ç³»çš„ if (rank[pRoot] &lt;= rank[qRoot])&#123; parent[pRoot] = parent[qRoot]; if (rank[pRoot] == rank[qRoot]) &#123; rank[qRoot]++; &#125; &#125; else &#123; parent[qRoot] = parent[pRoot]; &#125; &#125;&#125; //ç¬¬äº”ç‰ˆçš„å¹¶æŸ¥é›†public class UnionFind5 implements UF&#123; private int[] parent; private int[] rank; public UnionFind5(int size) &#123; parent = new int[size]; rank = new int[size]; for (int i = 0; i &lt; parent.length; i++) &#123; parent[i] = i; rank[i] = 1; &#125; &#125; @Override public int getSize() &#123; return parent.length; &#125; private int find(int index) &#123; if (index &lt; 0 || index &gt;= parent.length) &#123; throw new IllegalArgumentException(\"å‚æ•°é”™è¯¯\"); &#125; //ä¿®æ”¹äº†è¿™é‡Œ if (index != parent[index]) &#123; parent[index] = find(parent[index]); &#125; return parent[index]; &#125; @Override public boolean isConnected(int p, int q) &#123; return find(p) == find(q); &#125; @Override public void unionElements(int p, int q) &#123; int pRoot = find(p); int qRoot = find(q); if (pRoot == qRoot) &#123; return; &#125; if (rank[pRoot] &lt;= rank[qRoot])&#123; parent[pRoot] = parent[qRoot]; if (rank[pRoot] == rank[qRoot]) &#123; rank[qRoot]++; &#125; &#125; else &#123; parent[qRoot] = parent[pRoot]; &#125; &#125;&#125; ç¬¬äº”ç‰ˆçš„æ•ˆç‡ä¸ä¸€å®šæ¯”ç¬¬å››ç‰ˆçš„å¥½ï¼Œå› ä¸ºç¬¬å››ç‰ˆæœ€åä¹Ÿå¯èƒ½åšåˆ°â€æ‰å¹³åŒ–â€ï¼Œå¹¶ä¸”ç¬¬äº”ç‰ˆçš„é€’å½’æ“ä½œæ¯”è¾ƒè€—æ—¶ã€‚ AVLæ ‘æ¦‚å¿µåŠå®ç°æˆ‘ä»¬åœ¨ç ”ç©¶äºŒåˆ†æœç´¢æ ‘æ—¶å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬å°†æ•°æ®é¡ºåºæ·»åŠ è¿›æ ‘ä¸­æ—¶ï¼Œå®ƒæœ‰ä¼šé€€åŒ–æˆä¸€æ£µé“¾è¡¨ï¼Œå³æ‰€æœ‰çš„å…ƒç´ éƒ½æ·»åŠ åˆ°ä¸€ä¸ªå­©å­ä¸Šï¼Œè¿™æ ·æ ‘ç»“æ„çš„ä¼˜åŠ¿å°±ä½“ç°ä¸å‡ºæ¥ï¼Œä¸ºäº†ä¸ä½¿å·¦å³å­©å­çš„é«˜åº¦ç›¸å·®å¤ªå¤§ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ ‘è¿›è¡Œè°ƒæ•´ï¼Œä½¿æ ‘è¾¾åˆ°å¹³è¡¡ï¼Œæˆä¸ºä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ï¼ŒAVL å°±æ˜¯ä¸€ç§ç»å…¸çš„å¹³è¡¡äºŒå‰æ ‘ åœ¨ `AVL` ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰çš„å¹³è¡¡äºŒå‰æ ‘ä¸ºï¼Œå¯¹äºä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦ç›¸å·®ä¸èƒ½è¶…è¿‡ `1`ã€‚ æˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹æ ‡æ³¨å¥½é«˜åº¦å€¼ï¼Œè®¡ç®—æ–¹æ³•ä¸ºå–å·¦å³å­æ ‘é«˜åº¦è¾ƒé«˜çš„é«˜åº¦ï¼Œç„¶å +1 ç„¶åæˆ‘ä»¬è¿˜æœ‰è®°å½•èŠ‚ç‚¹å·¦å³å­æ ‘çš„é«˜åº¦å·®ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¹³è¡¡å› å­(è§„å®šç”¨å·¦å­æ ‘çš„é«˜åº¦-å³å­æ ‘çš„é«˜åº¦) ç”±äºæˆ‘ä»¬åªæ˜¯åœ¨æ·»åŠ å…ƒç´ å’Œåˆ é™¤å…ƒç´ æ—¶å¯¹æ ‘è¿›è¡Œè°ƒæ•´ï¼Œå…¶ä½™çš„ä»£ç åŒäºŒåˆ†æœç´¢æ ‘æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å°±ä¸è´´å‡ºæ‰€æœ‰çš„ä»£ç ï¼Œåªç»™å‡ºä¸åŒçš„ä»£ç ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨ `Node` ç±»ä¸­æ·»åŠ ä¸€ä¸ª `height` å˜é‡æ¥è®°å½•é«˜åº¦ private class Node &#123; public E e; public Node left; public Node right; //é«˜åº¦ public int height; public Node(E e) &#123; this.e = e; left = null; right = null; //é«˜åº¦åˆå§‹ä¸º1 height = 1; &#125; @Override public String toString() &#123; return e.toString(); &#125;&#125; æ–°å¢åŠ ä¸€ä¸ªè·å¾—æŸèŠ‚ç‚¹é«˜åº¦çš„å‡½æ•°å’Œå¹³è¡¡å› å­çš„å‡½æ•° private int getHeight(Node node) &#123; if (node == null) &#123; return 0; &#125; return node.height;&#125;private int getBalanceFactor(Node node) &#123; if (node == null) &#123; return 0; &#125; return getHeight(node.left) - getHeight(node.right);&#125; æœ‰äº†è¿™äº›å› ç´ ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦åœ¨æ·»åŠ å…ƒç´ æ—¶è¿›è¡Œç»´æŠ¤ï¼Œé‡æ–°è®¡ç®—é«˜åº¦å’Œå¹³è¡¡å› å­ï¼Œä»è€Œè¿›è¡Œè°ƒæ•´ private Node add(Node node, E e) &#123; if (node == null) &#123; size++; return new Node(e); &#125; if (e.compareTo(node.e) &lt; 0) &#123; node.left = add(node.left, e); &#125; else if (e.compareTo(node.e) &gt; 0) &#123; node.right = add(node.right,e); &#125; //æ›´æ–°é«˜åº¦ node.height = Math.max(getHeight(node.left),getHeight(node.right)) + 1; //è®¡ç®—å¹³è¡¡å› å­ int balanceFactor = getBalanceFactor(node); if (Math.abs(balanceFactor) &gt; 1) &#123; //è¿›è¡Œè°ƒæ•´ &#125; return node;&#125; æˆ‘ä»¬åé¢çš„å†…å®¹ä¸»è¦æ˜¯å¦‚ä½•è°ƒæ•´ï¼Œåé¢æ‰€ä»¥åªç»™å‡ºå¦‚ä½•è°ƒæ•´çš„ä»£ç ï¼Œåœ¨å­¦å¦‚ä½•è°ƒæ•´ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥å†™ä¸¤ä¸ªè¾…åŠ©å‡½æ•°æ¥åˆ¤æ–­è¿™æ£µæ ‘æ˜¯ä¸æ˜¯äºŒåˆ†æœç´¢æ ‘å’Œ AVL æ ‘ï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬çš„ä»£ç æœ‰é—®é¢˜çš„è¯ï¼Œæœ‰å¯èƒ½ç ´åäºŒåˆ†æœç´¢æ ‘çš„æ€§è´¨ï¼Œè¿™æ ·æœ‰åˆ©äºæˆ‘ä»¬æ£€æŸ¥ï¼Œé‚£æ€ä¹ˆæ£€æŸ¥ä¸€æ£µæ ‘æ˜¯ä¸æ˜¯äºŒåˆ†æœç´¢æ ‘ï¼Œæˆ‘ä»¬æ ¹æ®äºŒåˆ†æœç´¢æ ‘çš„æ€§è´¨ï¼Œå®ƒçš„ä¸­åºéå†çš„ç»“æœæ˜¯ä»å°åˆ°å¤§çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬é‡å†™ä¸­åºéå†ä¸º public boolean isBST() &#123; ArrayList&lt;E&gt; arrayList = new ArrayList&lt;&gt;(); inOrder(root, arrayList); for (int i = 1; i &lt; arrayList.size(); i++) &#123; if (arrayList.get(i-1).compareTo(arrayList.get(i)) &gt; 0) return false; &#125; &#125; return true;&#125;private void inOrder(Node node, ArrayList&lt;E&gt; arrayList) &#123; if (node == null) &#123; return; &#125; inOrder(node.left, arrayList); arrayList.add(node.e); inOrder(node.right, arrayList);&#125; ç°åœ¨æˆ‘ä»¬åˆ¤æ–­è¿™æ£µæ ‘æ˜¯ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ public boolean isBalanced() &#123; return isBalanced(root);&#125;//åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯å¹³è¡¡private boolean isBalanced(Node node) &#123; if (node == null) &#123; return true; &#125; int balanceFactor = getBalanceFactor(node); if (Math.abs(balanceFactor) &gt; 1) &#123; return false; &#125; return isBalanced(node.left) &amp;&amp; isBalanced(node.right);&#125; ä¸‹é¢å¯¹ä¸å¹³è¡¡çš„å››ç§æƒ…å½¢è¿›è¡Œè®¨è®ºï¼Œå¹¶ç»™å‡ºè°ƒæ•´æ–¹æ³• // å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å³æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x// y x// / \\ / \\// x T4 å‘å³æ—‹è½¬ (y) z y// / \\ - - - - - - - -&gt; / \\ / \\// z T3 T1 T2 T3 T4// / \\// T1 T2private Node rightRotate(Node y) &#123; Node x = y.left; Node T3 = x.right; x.right = y; y.left = T3; //æ›´æ–°xå’Œyçš„é«˜åº¦å€¼ å…ˆæ›´æ–°yçš„ï¼Œå› ä¸ºyæ˜¯xçš„å³å­©å­ï¼Œxçš„æ›´æ–°å–å†³äºy y.height = Math.max(getHeight(y.left), getHeight(y.right)) + 1; x.height = Math.max(getHeight(x.left), getHeight(x.right)) + 1; return x;&#125;// å¯¹èŠ‚ç‚¹yè¿›è¡Œå‘å·¦æ—‹è½¬æ“ä½œï¼Œè¿”å›æ—‹è½¬åæ–°çš„æ ¹èŠ‚ç‚¹x// y x// / \\ / \\// T4 x å‘å·¦æ—‹è½¬ (y) y z// / \\ - - - - - - - -&gt; / \\ / \\// T3 z T4 T3 T1 T2// / \\// T1 T2private Node leftRotate(Node y) &#123; Node x = y.right; Node T3 = x.left; x.left = y; y.right = T3; y.height = Math.max(getHeight(y.left), getHeight(y.right)) + 1; x.height = Math.max(getHeight(x.left), getHeight(x.right)) + 1; return x;&#125;public void add(E e) &#123; root = add(root, e);&#125;private Node add(Node node, E e) &#123; if (node == null) &#123; size++; return new Node(e); &#125; if (e.compareTo(node.e) &lt; 0) &#123; node.left = add(node.left, e); &#125; else if (e.compareTo(node.e) &gt; 0) &#123; node.right = add(node.right,e); &#125; //æ›´æ–°é«˜åº¦ node.height = Math.max(getHeight(node.left),getHeight(node.right)) + 1; //è®¡ç®—å¹³è¡¡å› å­ int balanceFactor = getBalanceFactor(node); //è°ƒæ•´ if (balanceFactor &gt; 1 &amp;&amp; getBalanceFactor(node.left) &gt;= 0) &#123; return rightRotate(node); &#125; if (balanceFactor &lt; -1 &amp;&amp; getBalanceFactor(node.right) &lt;= 0) &#123; return leftRotate(node); &#125; if (balanceFactor &gt; 1 &amp;&amp; getBalanceFactor(node.left) &lt; 0) &#123; node.left = leftRotate(node.left); return rightRotate(node); &#125; if (balanceFactor &lt; -1 &amp;&amp; getBalanceFactor(node.right) &gt; 0) &#123; node.right = rightRotate(node.right); return leftRotate(node); &#125; return node;&#125;public void remove(E e) &#123; root = remove(root, e);&#125;private Node remove(Node node, E e) &#123; if (node == null) &#123; return null; &#125; Node retNode; if (e.equals(node.e)) &#123; if (node.right == null) &#123; Node leftNode = node.left; node.left = null; size--; retNode = leftNode; &#125; else if (node.left == null) &#123; Node rightNode = node.right; node.right = null; size--; retNode = rightNode; &#125; else &#123; Node successor = minimum(node.right); ////ç”±äºremoveMinæ²¡æœ‰ç»´æŒbalanceï¼Œæ‰€ä»¥æˆ‘ä»¬å¤ç”¨remove successor.right = remove(node.right,successor.e); successor.left = node.left; node.left = node.right = null; retNode = successor; &#125; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; node.left = remove(node.left, e); retNode = node; &#125; else &#123; node.right = remove(node.right, e); retNode = node; &#125; //å¦åˆ™retNode.heightä¼šæœ‰ç©ºæŒ‡é’ˆå¼‚å¸¸ if (retNode == null) &#123; return null; &#125; //æ›´æ–°é«˜åº¦ retNode.height = Math.max(getHeight(retNode.left),getHeight(retNode.right)) + 1; //è®¡ç®—å¹³è¡¡å› å­ int balanceFactor = getBalanceFactor(retNode); if (balanceFactor &gt; 1 &amp;&amp; getBalanceFactor(retNode.left) &gt;= 0) &#123; return rightRotate(retNode); &#125; if (balanceFactor &lt; -1 &amp;&amp; getBalanceFactor(retNode.right) &lt;= 0) &#123; return leftRotate(retNode); &#125; if (balanceFactor &gt; 1 &amp;&amp; getBalanceFactor(retNode.left) &lt; 0) &#123; retNode.left = leftRotate(retNode.left); return rightRotate(retNode); &#125; if (balanceFactor &lt; -1 &amp;&amp; getBalanceFactor(retNode.right) &gt; 0) &#123; retNode.right = rightRotate(retNode.right); return leftRotate(retNode); &#125; return retNode;&#125; å®Œæ•´ä»£ç import java.util.ArrayList;public class AVLTree&lt;E extends Comparable&lt;E&gt;&gt; &#123; private class Node &#123; public E e; public Node left; public Node right; public int height; public Node(E e) &#123; this.e = e; left = null; right = null; height = 1; &#125; @Override public String toString() &#123; return e.toString(); &#125; &#125; //æ ¹èŠ‚ç‚¹ private Node root; //æ ‘ä¸­å…ƒç´ çš„ä¸ªæ•° private int size; public AVLTree() &#123; root = null; size = 0; &#125; public int size() &#123; return size; &#125; public boolean isEmpty() &#123; return size == 0; &#125; private int getHeight(Node node) &#123; if (node == null) &#123; return 0; &#125; return node.height; &#125; private int getBalanceFactor(Node node) &#123; if (node == null) &#123; return 0; &#125; return getHeight(node.left) - getHeight(node.right); &#125; public boolean isBST() &#123; ArrayList&lt;E&gt; arrayList = new ArrayList&lt;&gt;(); inOrder(root, arrayList); for (int i = 1; i &lt; arrayList.size(); i++) &#123; if (arrayList.get(i-1).compareTo(arrayList.get(i)) &gt; 0) &#123; return false; &#125; &#125; return true; &#125; private void inOrder(Node node, ArrayList&lt;E&gt; arrayList) &#123; if (node == null) &#123; return; &#125; inOrder(node.left, arrayList); arrayList.add(node.e); inOrder(node.right, arrayList); &#125; public boolean isBalanced() &#123; return isBalanced(root); &#125; //åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯å¹³è¡¡ private boolean isBalanced(Node node) &#123; if (node == null) &#123; return true; &#125; int balanceFactor = getBalanceFactor(node); if (Math.abs(balanceFactor) &gt; 1) &#123; return false; &#125; return isBalanced(node.left) &amp;&amp; isBalanced(node.right); &#125; private Node rightRotate(Node y) &#123; Node x = y.left; Node T3 = x.right; x.right = y; y.left = T3; //æ›´æ–°xå’Œyçš„é«˜åº¦å€¼ å…ˆæ›´æ–°yçš„ï¼Œå› ä¸ºyæ˜¯xçš„å³å­©å­ï¼Œxçš„æ›´æ–°å–å†³äºy y.height = Math.max(getHeight(y.left), getHeight(y.right)) + 1; x.height = Math.max(getHeight(x.left), getHeight(x.right)) + 1; return x; &#125; private Node leftRotate(Node y) &#123; Node x = y.right; Node T3 = x.left; x.left = y; y.right = T3; y.height = Math.max(getHeight(y.left), getHeight(y.right)) + 1; x.height = Math.max(getHeight(x.left), getHeight(x.right)) + 1; return x; &#125; public void add(E e) &#123; root = add(root, e); &#125; private Node add(Node node, E e) &#123; if (node == null) &#123; size++; return new Node(e); &#125; if (e.compareTo(node.e) &lt; 0) &#123; node.left = add(node.left, e); &#125; else if (e.compareTo(node.e) &gt; 0) &#123; node.right = add(node.right,e); &#125; //æ›´æ–°é«˜åº¦ node.height = Math.max(getHeight(node.left),getHeight(node.right)) + 1; //è®¡ç®—å¹³è¡¡å› å­ int balanceFactor = getBalanceFactor(node); if (balanceFactor &gt; 1 &amp;&amp; getBalanceFactor(node.left) &gt;= 0) &#123; return rightRotate(node); &#125; if (balanceFactor &lt; -1 &amp;&amp; getBalanceFactor(node.right) &lt;= 0) &#123; return leftRotate(node); &#125; if (balanceFactor &gt; 1 &amp;&amp; getBalanceFactor(node.left) &lt; 0) &#123; node.left = leftRotate(node.left); return rightRotate(node); &#125; if (balanceFactor &lt; -1 &amp;&amp; getBalanceFactor(node.right) &gt; 0) &#123; node.right = rightRotate(node.right); return leftRotate(node); &#125; return node; &#125; public boolean contains(E e) &#123; return contains(root, e); &#125; private boolean contains(Node node, E e) &#123; if (node == null) &#123; return false; &#125; if (e.equals(node.e)) &#123; return true; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; return contains(node.left, e); &#125; else &#123; return contains(node.right,e); &#125; &#125; public E minimum() &#123; if (size == 0) &#123; throw new IllegalArgumentException(\"æ ‘ä¸ºç©º\"); &#125; return minimum(root).e; &#125; private Node minimum(Node node) &#123; if (node.left == null) &#123; return node; &#125; return minimum(node.left); &#125; public void remove(E e) &#123; root = remove(root, e); &#125; private Node remove(Node node, E e) &#123; if (node == null) &#123; return null; &#125; Node retNode; if (e.equals(node.e)) &#123; if (node.right == null) &#123; Node leftNode = node.left; node.left = null; size--; retNode = leftNode; &#125; else if (node.left == null) &#123; Node rightNode = node.right; node.right = null; size--; retNode = rightNode; &#125; else &#123; Node successor = minimum(node.right); successor.right = remove(node.right,successor.e);//ç”±äºremoveMinæ²¡æœ‰ç»´æŒbalanceï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨remove successor.left = node.left; node.left = node.right = null; //size--; åœ¨removeMinä¸­å·²ç»ç»´æŠ¤sizeäº† retNode = successor; &#125; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; node.left = remove(node.left, e); retNode = node; &#125; else &#123; node.right = remove(node.right, e); retNode = node; &#125; //å¦åˆ™retNode.heightä¼šæœ‰ç©ºæŒ‡é’ˆå¼‚å¸¸ if (retNode == null) &#123; return null; &#125; //æ›´æ–°é«˜åº¦ retNode.height = Math.max(getHeight(retNode.left),getHeight(retNode.right)) + 1; //è®¡ç®—å¹³è¡¡å› å­ int balanceFactor = getBalanceFactor(retNode); if (balanceFactor &gt; 1 &amp;&amp; getBalanceFactor(retNode.left) &gt;= 0) &#123; return rightRotate(retNode); &#125; if (balanceFactor &lt; -1 &amp;&amp; getBalanceFactor(retNode.right) &lt;= 0) &#123; return leftRotate(retNode); &#125; if (balanceFactor &gt; 1 &amp;&amp; getBalanceFactor(retNode.left) &lt; 0) &#123; retNode.left = leftRotate(retNode.left); return rightRotate(retNode); &#125; if (balanceFactor &lt; -1 &amp;&amp; getBalanceFactor(retNode.right) &gt; 0) &#123; retNode.right = rightRotate(retNode.right); return leftRotate(retNode); &#125; return retNode; &#125;&#125; çº¢é»‘æ ‘2-3æ ‘2-3 æ ‘çš„èŠ‚ç‚¹å®ƒå¯ä»¥æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå¯ä»¥æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œå®ƒä¹Ÿæ»¡è¶³äºŒåˆ†æœç´¢æ ‘çš„æ€§è´¨ æˆ‘ä»¬æŠŠå«æœ‰ä¸¤ä¸ªå­©å­çš„èŠ‚ç‚¹ç§°ä¸º `2` èŠ‚ç‚¹ï¼Œå«æœ‰ `3` ä¸ªå­©å­çš„èŠ‚ç‚¹ç§°ä¸º `3` èŠ‚ç‚¹ `2-3` æ ‘æ˜¯ä¸€ç§ç»å¯¹å¹³è¡¡çš„æ ‘ï¼Œæ‰€è°“ç»å¯¹å¹³è¡¡çš„æ ‘æŒ‡çš„æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°ä»»æ„ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ‰€ç»è¿‡çš„èŠ‚ç‚¹æ˜¯éƒ½æ˜¯ç›¸åŒçš„ã€‚é‚£ä¹ˆ `2-3` æ ‘æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢? ### çº¢é»‘æ ‘ä¸2-3æ ‘çš„ç­‰ä»·æ€§ ç”±äºæˆ‘ä»¬ä¸€èˆ¬æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯è¡¨ç¤ºä¸€ä¸ªæ•°æ®çš„ï¼Œ2-3 æ ‘æœ‰ç‚¹éš¾ä»¥å®ç°ï¼Œæ‰€ä»¥æœ‰äººå‘æ˜ä¸€ç§æ ‘å«åšçº¢é»‘æ ‘ï¼Œå®ƒå¯ä»¥è¯´æ˜¯ 2-3 æ ‘çš„ç­‰ä»·ï¼Œé‚£ä¹ˆå®ƒæ ‘å¦‚ä½•ç­‰ä»·çš„å‘¢? ä¸Šå›¾æƒ³å¿…å¾ˆæ¸…æ¥šçš„æè¿°äº†ç­‰ä»·çš„è¿‡ç¨‹ ç°åœ¨æˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹ä¸Šé¢æè¿°çš„çº¢é»‘æ ‘ï¼Œå¤§éƒ¨åˆ†çš„ä»£ç éƒ½æ˜¯å’ŒäºŒåˆ†æœç´¢æ ‘æ˜¯é‡åˆçš„ï¼Œåªæ˜¯åœ¨æ·»åŠ æ—¶æœ‰è°ƒæ•´ï¼Œå¦å¤–è¿™é‡Œæˆ‘ä»¬ä¸ç‰µæ¶‰åˆ°ä»çº¢é»‘æ ‘ä¸­åˆ é™¤å…ƒç´ ï¼Œå› ä¸ºå¤ªå¤æ‚äº†(å…¶å®æ˜¯æˆ‘ä¸ä¼š) public class RedBlackTree&lt;E extends Comparable&lt;E&gt;&gt; &#123; //è§„å®šçº¢è‰²ä¸ºtrue é»‘è‰²ä¸ºfalse private static final boolean RED = true; private static final boolean BLACK = false; private class Node &#123; public E e; public Node left; public Node right; public boolean color; public Node(E e) &#123; this.e = e; left = null; right = null; //æˆ‘ä»¬åœ¨2-3æ ‘ä¸­æ·»åŠ èŠ‚ç‚¹æ—¶ æ°¸è¿œæ˜¯å’Œåˆ«çš„èŠ‚ç‚¹èåˆ æ‰€ä»¥é»˜è®¤ä¸ºçº¢è‰² color = RED; &#125; @Override public String toString() &#123; return e.toString(); &#125; &#125; private Node root; private int size; public RedBlackTree() &#123; root = null; size = 0; &#125; public int size() &#123; return size; &#125; public boolean isEmpty() &#123; return size == 0; &#125; public void add(E e) &#123; root = add(root, e); &#125; // åˆ¤æ–­èŠ‚ç‚¹nodeçš„é¢œè‰² private boolean isRed(Node node)&#123; if(node == null) return BLACK; return node.color; &#125; private Node add(Node node, E e) &#123; if (node == null) &#123; size++; return new Node(e); &#125; if (e.compareTo(node.e) &lt; 0) &#123; node.left = add(node.left, e); &#125; else if (e.compareTo(node.e) &gt; 0) &#123; node.right = add(node.right,e); &#125; return node; &#125; public boolean contains(E e) &#123; return contains(root, e); &#125; private boolean contains(Node node, E e) &#123; if (node == null) &#123; return false; &#125; if (e.equals(node.e)) &#123; return true; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; return contains(node.left, e); &#125; else &#123; return contains(node.right,e); &#125; &#125;&#125; çº¢é»‘æ ‘çš„æ€§è´¨åœ¨äº†è§£äº†çº¢é»‘æ ‘ä¸ 2-3 ç­‰ä»·ä»¥åï¼Œæˆ‘ä»¬æ¥çœ‹çº¢é»‘æ ‘æ»¡è¶³å“ªäº›æ€§è´¨ æ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯çº¢è‰²çš„ï¼Œæˆ–è€…çš„æ˜¯é»‘è‰²çš„ æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ - æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹(æœ€åçš„ç©ºèŠ‚ç‚¹æ˜¯é»‘è‰²çš„) - å› ä¸ºçº¢è‰²èŠ‚ç‚¹åªå­˜åœ¨äº 3 èŠ‚ç‚¹ä¸­ï¼Œè€Œæ‰€æœ‰çš„å¶å­èŠ‚ç‚¹éƒ½æ˜¯ 2 èŠ‚ç‚¹ - å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆå®ƒçš„æ‰€æœ‰å­©å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ - ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åˆ°é»‘è‰²èŠ‚ç‚¹ï¼Œç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„ - å› ä¸º `2-3` æ ‘åˆ°æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·ç¦»éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè€Œç»è¿‡çš„èŠ‚ç‚¹ï¼Œä¸ç®¡æ˜¯ `2` èŠ‚ç‚¹è¿˜æ˜¯ `3` èŠ‚ç‚¹ï¼Œéƒ½åŒ…æ‹¬ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œæ‰€ä»¥ç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„ å‘çº¢é»‘æ ‘ä¸­æ·»åŠ å…ƒç´ å› ä¸ºæ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ·»åŠ å®Œå…ƒç´ åéœ€è¦å°†æ ¹èŠ‚ç‚¹å˜ä¸ºé»‘è‰² public void add(E e) &#123; root = add(root, e); root.color = BLACK;&#125; åœ¨æ·»åŠ å…ƒç´ åˆ°çº¢é»‘æ ‘ä¸­æ—¶ï¼Œå¯èƒ½ä¼šç ´åçº¢é»‘æ ‘çš„è§„åˆ™ï¼Œè¿™æ—¶å°±éœ€è¦çº¢é»‘æ ‘è¿›è¡Œè‡ªæˆ‘è°ƒæ•´ï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹æ·»åŠ è¿‡ç¨‹ä¼šç¢°åˆ°çš„æ‰€æœ‰æƒ…å½¢ï¼Œä»¥åŠå¤„ç†æ–¹æ³• // node x// / \\ å·¦æ—‹è½¬ / \\// T1 x ---------&gt; node T3// / \\ / \\// T2 T3 T1 T2private Node leftRotate(Node node)&#123; Node x = node.right; // å·¦æ—‹è½¬ node.right = x.left; x.left = node; x.color = node.color; node.color = RED; return x;&#125; // é¢œè‰²ç¿»è½¬private void flipColors(Node node)&#123; node.color = RED; node.left.color = BLACK; node.right.color = BLACK;&#125; // node x// / \\ å³æ—‹è½¬ / \\// x T2 -------&gt; y node// / \\ / \\// y T1 T1 T2private Node rightRotate(Node node)&#123; Node x = node.left; // å³æ—‹è½¬ node.left = x.right; x.right = node; x.color = node.color; node.color = RED; return x;&#125; å¯¹ä¸Šé¢çš„æƒ…å†µè¿›è¡Œæ€»ç»“ private Node add(Node node, E e) &#123; if (node == null) &#123; size++; return new Node(e); &#125; if (e.compareTo(node.e) &lt; 0) &#123; node.left = add(node.left, e); &#125; else if (e.compareTo(node.e) &gt; 0) &#123; node.right = add(node.right,e); &#125; if (isRed(node.right) &amp;&amp; !isRed(node.left)) node = leftRotate(node); if (isRed(node.left) &amp;&amp; isRed(node.left.left)) node = rightRotate(node); if (isRed(node.left) &amp;&amp; isRed(node.right)) flipColors(node); return node;&#125; å®Œæ•´ä»£ç public class RedBlackTree&lt;E extends Comparable&lt;E&gt;&gt; &#123; //è§„å®šçº¢è‰²ä¸ºtrue é»‘è‰²ä¸ºfalse private static final boolean RED = true; private static final boolean BLACK = false; private class Node &#123; public E e; public Node left; public Node right; public boolean color; public Node(E e) &#123; this.e = e; left = null; right = null; //æˆ‘ä»¬åœ¨2-3æ ‘ä¸­æ·»åŠ èŠ‚ç‚¹æ—¶ æ°¸è¿œæ˜¯å’Œåˆ«çš„èŠ‚ç‚¹èåˆ æ‰€ä»¥é»˜è®¤ä¸ºçº¢è‰² color = RED; &#125; @Override public String toString() &#123; return e.toString(); &#125; &#125; private Node root; private int size; public RedBlackTree() &#123; root = null; size = 0; &#125; public int size() &#123; return size; &#125; public boolean isEmpty() &#123; return size == 0; &#125; private boolean isRed(Node node) &#123; if (node == null) &#123; return BLACK; &#125; return node.color; &#125; // node x // / \\ å·¦æ—‹è½¬ / \\ // T1 x ---------&gt; node T3 // / \\ / \\ // T2 T3 T1 T2 private Node leftRotate(Node node) &#123; Node x = node.right; node.right = x.left; x.left = node; x.color = node.color; node.color = RED; return x; &#125; // node x // / \\ å³æ—‹è½¬ / \\ // x T2 -------&gt; y node // / \\ / \\ // y T1 T1 T2 private Node rightRotate(Node node) &#123; Node x = node.left; node.left = x.right; x.right = node; x.color = node.color; node.color = RED; return x; &#125; private void flipColors(Node node) &#123; node.color = RED; node.left.color = BLACK; node.right.color = BLACK; &#125; public void add(E e) &#123; root = add(root, e); root.color = BLACK; &#125; private Node add(Node node, E e) &#123; if (node == null) &#123; size++; return new Node(e); &#125; if (e.compareTo(node.e) &lt; 0) &#123; node.left = add(node.left, e); &#125; else if (e.compareTo(node.e) &gt; 0) &#123; node.right = add(node.right,e); &#125; if (isRed(node.right) &amp;&amp; !isRed(node.left)) node = leftRotate(node); if (isRed(node.left) &amp;&amp; isRed(node.left.left)) node = rightRotate(node); if (isRed(node.left) &amp;&amp; isRed(node.right)) flipColors(node); return node; &#125; public boolean contains(E e) &#123; return contains(root, e); &#125; private boolean contains(Node node, E e) &#123; if (node == null) &#123; return false; &#125; if (e.equals(node.e)) &#123; return true; &#125; else if (e.compareTo(node.e) &lt; 0) &#123; return contains(node.left, e); &#125; else &#123; return contains(node.right,e); &#125; &#125;&#125; å“ˆå¸Œè¡¨æˆ‘ä»¬é€šè¿‡å°†æˆ‘ä»¬è¦æŸ¥æ‰¾çš„æŸç§æ•°æ®ç±»å‹è½¬åŒ–ä¸ºä¸€ä¸ªç´¢å¼• indexï¼Œç„¶åé€šè¿‡ç´¢å¼•å»æ•°ç»„ä¸­æŸ¥æ‰¾ï¼Œè¿™æ—¶å®ƒçš„å¤æ‚åº¦å°±æ˜¯ O(1) çº§åˆ«çš„ã€‚è€Œå°†æŸä¸ªæ•°æ®ç±»å‹è½¬åŒ–ä¸ºç´¢å¼•çš„å‡½æ•°æˆ‘ä»¬å°±ç§°ä¸ºæ˜¯å“ˆå¸Œå‡½æ•°ï¼Œæ¯”å¦‚è¯´å°† 26 ä¸ªå°å†™å­—æ¯è½¬åŒ–ä¸ºç´¢å¼•ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ index = ch - 'a'; è¿™æ ·å°±å»ºç«‹èµ·äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„å¯¹åº”å…³ç³»éƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› ä¸ºæ•°ç»„çš„å®¹é‡æ˜¯æœ‰é™çš„ï¼Œè€Œè¾“å…¥çš„èŒƒå›´å¯èƒ½æ˜¯æ— ç©·çš„ï¼Œæ‰€ä»¥å¾ˆæœ‰å¯èƒ½ä¸åŒçš„é”®å¯¹åº”ç€åŒä¸€ä¸ªç´¢å¼•ï¼Œæ¯”å¦‚è¯´é”®æ˜¯å­—ç¬¦ä¸²ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„ç»„åˆæ–¹å¼æ˜¯éå¸¸çš„å¤šï¼Œå¯ä»¥çœ‹åšæ˜¯æ— ç©·çš„ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å»å¼€è¾Ÿä¸€ä¸ªæ— ç©·çš„ç©ºé—´å»ä¸è¿™äº›å­—ç¬¦ä¸²ä¸€ä¸€å¯¹åº”ï¼Œæ‰€ä»¥ä¸åŒçš„å­—ç¬¦ä¸²ç”Ÿæˆçš„ç´¢å¼•å¾ˆæœ‰å¯èƒ½ä¼šæœ‰å†²çªï¼Œæˆ‘ä»¬ç§°è¿™ç§æƒ…å†µä¸ºå“ˆå¸Œå†²çªã€‚ç”±äºä¸Šé¢è®²åˆ°çš„å“ˆå¸Œå†²çªï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è®¾è®¡å¥½å“ˆå¸Œå‡½æ•°(hashCode())ä½¿å¾—å‘ç”Ÿå“ˆå¸Œå†²çªçš„å¯èƒ½æ€§å°ï¼Œå³ä½¿å“ˆå¸Œå‡½æ•°äº§ç”Ÿçš„å“ˆå¸Œå€¼å‡åŒ€çš„åˆ†å¸ƒåœ¨æ•°ç»„ä¸­ã€‚ å“ˆå¸Œå‡½æ•°çš„è®¾è®¡å“ˆå¸Œå‡½æ•°åº”è¯¥æ»¡è¶³ä¸Šé¢æåˆ°çš„ï¼šå“ˆå¸Œå‡½æ•°äº§ç”Ÿçš„å“ˆå¸Œå€¼å‡åŒ€çš„åˆ†å¸ƒåœ¨æ•°ç»„ä¸­ã€‚æ•°æ®çš„ç±»å‹äº”èŠ±å…«é—¨ï¼Œå¯¹äºç‰¹æ®Šçš„é¢†åŸŸæœ‰ç‰¹æ®Šé¢†åŸŸçš„å“ˆå¸Œå‡½æ•°çš„è®¾è®¡æ–¹å¼ï¼Œç”šè‡³è¿˜æœ‰ä¸“é—¨çš„è®ºæ–‡ï¼Œè¯´è¿™ä¹ˆå¤šå°±æ˜¯æƒ³è¯´å“ˆå¸Œå‡½æ•°çš„è®¾è®¡ååˆ†çš„å¤æ‚ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªææœ€ç®€å•çš„ä¸€ç§ï¼Œå“ˆå¸Œå‡½æ•°çš„è®¾è®¡åº”è¯¥æ»¡è¶³ ä¸€è‡´æ€§ å¦‚æœ a == bï¼Œé‚£ä¹ˆ hashCode(a) == hashCode(b) é«˜æ•ˆæ€§ è®¡ç®—è¿…é€Ÿ å‡åŒ€æ€§ è¾“å‡ºå°½å¯èƒ½å‡åŒ€ ç”±äº `Java` ä¸­åŸºæœ¬æ•°æ®ç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹æœ‰é»˜è®¤çš„ `hashCode()` è®¡ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç”¨ `Java` è‡ªå¸¦çš„ `hashCode` è®¡ç®—åŸºæœ¬æ•°æ®ç±»å‹å’Œå­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼ï¼Œè€Œå¯¹äºå¼•ç”¨ç±»å‹ `Java` æ˜¯æ ¹æ®åœ°å€è®¡ç®—çš„å“ˆå¸Œå€¼ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±è‡ªå®šä¹‰è§„åˆ™ï¼Œæ¯”å¦‚å¯¹äºä¸€ä¸ª `Student` ç±»ï¼Œæˆ‘ä»¬è§„å®šå­¦å·ä»¥åŠå§“åç›¸åŒ(ä¸åŒºåˆ†å¤§å°å†™)å°±æ˜¯åŒä¸€ä¸ªå­¦ç”Ÿï¼Œæ‰€ä»¥æ ¹æ®ä¸€è‡´æ€§åŸåˆ™ï¼Œå®ƒä»¬åº”è¯¥äº§ç”Ÿç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œä½†æ˜¯ç”±äº `Java` é»˜è®¤æ˜¯æ ¹æ®åœ°å€äº§ç”Ÿå“ˆå¸Œå€¼ï¼Œç”±äºäºŒè€…çš„åœ°å€æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥äº§ç”Ÿçš„å“ˆå¸Œå€¼æœ‰æå¤§çš„æ¦‚ç‡æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºå“ˆå¸Œå‡½æ•°ã€‚ é“¾åœ°å€æ³•ç°åœ¨æˆ‘ä»¬æ¥æ¼”ç¤ºå¾€å“ˆå¸Œè¡¨ä¸­æ·»åŠ å…ƒç´ çš„æ­¥éª¤ import java.util.TreeMap;public class HashTable&lt;K, V&gt; &#123; //æ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯TreeMapè¿™ç§æŸ¥æ‰¾è¡¨ private TreeMap&lt;K, V&gt;[] hashTable; private int M; private int size; public HashTable(int M) &#123; this.M = M; size = 0; hashTable = new TreeMap[M]; for (int i = 0; i &lt; hashTable.length; i++) &#123; hashTable[i] = new TreeMap&lt;&gt;(); &#125; &#125; public HashTable() &#123; this(97); &#125; public int getSize() &#123; return size; &#125; //å¾—åˆ°åœ¨æ•°ç»„ä¸­çš„ç´¢å¼• private int hash(K key) &#123; //ä¸0x7fffffffæ˜¯ä¸ºäº†æ¶ˆé™¤è´Ÿæ•° return (key.hashCode() &amp; 0x7fffffff) % M; &#125; public void add(K key, V value) &#123; TreeMap&lt;K, V&gt; map = hashTable[hash(key)]; //å…ˆæŸ¥çœ‹å·²ç»æ˜¯å¦æœ‰è¿™ä¸ªé”®äº† if (map.containsKey(key)) &#123; //æœ‰åˆ™æ›´æ–° map.put(key, value); &#125; else &#123; //æ²¡æœ‰åˆ™è¿›è¡Œæ·»åŠ ï¼Œå¹¶ç»´æŠ¤size map.put(key, value); size++; &#125; &#125; public V remove(K key, V value) &#123; V ret = null; TreeMap&lt;K, V&gt; map = hashTable[hash(key)]; //å¦‚æœåŒ…å«é”®åˆ™åˆ é™¤ï¼Œæ²¡æœ‰è¿”å›null if (map.containsKey(key)) &#123; ret = map.remove(key); size--; &#125; return ret; &#125; public void set(K key, V value) &#123; TreeMap&lt;K, V&gt; map = hashTable[hash(key)]; //æ²¡æœ‰è¯¥é”®æŠ›å‡ºå¼‚å¸¸ if (!map.containsKey(key)) &#123; throw new IllegalArgumentException(\"é”®ä¸å­˜åœ¨\"); &#125; map.put(key,value); &#125; //ç›´æ¥å¾—åˆ°ç›¸åº”çš„TreeMapï¼Œç„¶åå»æŸ¥ï¼ŒTreeMapæœ‰æ£€æŸ¥æ­¥éª¤ public V get(K key) &#123; return hashTable[hash(key)].get(key); &#125;&#125; import java.util.TreeMap;public class HashTable&lt;K, V&gt; &#123; private static final int upperTol = 10; private static final int lowerTol = 2; private static final int initCapacity = 7; //æ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯TreeMapè¿™ç§æŸ¥æ‰¾è¡¨ private TreeMap&lt;K, V&gt;[] hashTable; private int M; private int size; public HashTable(int M) &#123; //åªæ˜¾ç¤ºæ”¹å˜çš„å†…å®¹ //... hashTable = new TreeMap[initCapacity]; &#125; public void add(K key, V value) &#123; //... if (size &gt;= upperTol * M) &#123; resize(2 * M); &#125; &#125; public V remove(K key, V value) &#123; //... if (size &lt; M * lowerTol &amp;&amp; M / 2 &gt;= initCapacity) &#123; resize(M / 2); &#125; return ret; &#125; private void resize(int newM) &#123; TreeMap&lt;K,V&gt;[] newHashTable = new TreeMap[newM]; //åé¢è¦æ›´æ–°Mï¼Œä½†æ˜¯è¿˜éœ€è¦æ—§Méå†æ•°ç»„ int oldM = M; //ç”±äºåé¢è¦é‡æ–°è®¡ç®—ä¸‹æ ‡ï¼Œæ‰€ä»¥è¿™é‡Œè¦æ›´æ–°M M = newM; for (int i = 0; i &lt; oldM; i++) &#123; TreeMap&lt;K, V&gt; map = hashTable[i]; for (K key: map.keySet()) &#123; //é‡æ–°è®¡ç®—ä¸‹æ ‡å¹¶èµ‹å€¼ newHashTable[hash(key)].put(key, map.get(key)); &#125; &#125; hashTable = newHashTable; &#125;&#125; ä½†æ˜¯æˆ‘ä»¬å‘ç°æ¯æ¬¡æˆ‘ä»¬éƒ½æ‰©å®¹ä¸º 2 \\* Mï¼Œè¿™æ—¶ M å°±ä¸æ˜¯ä¸€ä¸ªç´ æ•°äº†ï¼Œä¸ºäº†è§£å†³è¿™ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªç´ æ•°è¡¨ï¼Œè®© M å–ç´ æ•°è¡¨ä¸­çš„å€¼ï¼Œæ¯æ¬¡æ‰©å®¹ M åœ¨ç´ æ•°è¡¨ä¸­çš„ç´¢å¼• +1ï¼Œç¼©å®¹ -1 import java.util.TreeMap;public class HashTable&lt;K, V&gt; &#123; //ç´ æ•°è¡¨ private static final int[] capacity = &#123;&#125;; private static final int upperTol = 10; private static final int lowerTol = 2; private int capacityIndex = 0; //æ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯TreeMapè¿™ç§æŸ¥æ‰¾è¡¨ private TreeMap&lt;K, V&gt;[] hashTable; private int M; private int size; public HashTable() &#123; this.M = capacity[capacityIndex]; size = 0; hashTable = new TreeMap[M]; for (int i = 0; i &lt; hashTable.length; i++) &#123; hashTable[i] = new TreeMap&lt;&gt;(); &#125; &#125; public void add(K key, V value) &#123; //... if (size &gt;= upperTol * M &amp;&amp; capacityIndex + 1 &lt; size) &#123; capacityIndex++; resize(capacity[capacityIndex]); &#125; &#125; public V remove(K key, V value) &#123; //... if (size &lt; M * lowerTol &amp;&amp; capacityIndex - 1 &gt;= 0) &#123; capacityIndex--; resize(capacity[capacityIndex]); &#125; return ret; &#125;&#125; å®Œæ•´ä»£ç import java.util.TreeMap;public class HashTable&lt;K, V&gt; &#123; private static final int[] capacity = &#123;&#125;; private static final int upperTol = 10; private static final int lowerTol = 2; private int capacityIndex = 0; //æ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯TreeMapè¿™ç§æŸ¥æ‰¾è¡¨ private TreeMap&lt;K, V&gt;[] hashTable; private int M; private int size; public HashTable() &#123; this.M = capacity[capacityIndex]; size = 0; hashTable = new TreeMap[M]; for (int i = 0; i &lt; hashTable.length; i++) &#123; hashTable[i] = new TreeMap&lt;&gt;(); &#125; &#125; public int getSize() &#123; return size; &#125; //å¾—åˆ°åœ¨æ•°ç»„ä¸­çš„ç´¢å¼• private int hash(K key) &#123; //ä¸0x7fffffffæ˜¯ä¸ºäº†æ¶ˆé™¤è´Ÿæ•° return (key.hashCode() &amp; 0x7fffffff) % M; &#125; public void add(K key, V value) &#123; TreeMap&lt;K, V&gt; map = hashTable[hash(key)]; //å…ˆæŸ¥çœ‹å·²ç»æ˜¯å¦æœ‰è¿™ä¸ªé”®äº† if (map.containsKey(key)) &#123; //æœ‰åˆ™æ›´æ–° map.put(key, value); &#125; else &#123; //æ²¡æœ‰åˆ™è¿›è¡Œæ·»åŠ ï¼Œå¹¶ç»´æŠ¤size map.put(key, value); size++; &#125; if (size &gt;= upperTol * M &amp;&amp; capacityIndex + 1 &lt; capacity.length) &#123; capacityIndex++; resize(capacity[capacityIndex]); &#125; &#125; public V remove(K key, V value) &#123; V ret = null; TreeMap&lt;K, V&gt; map = hashTable[hash(key)]; //å¦‚æœåŒ…å«é”®åˆ™åˆ é™¤ï¼Œæ²¡æœ‰è¿”å›null if (map.containsKey(key)) &#123; ret = map.remove(key); size--; &#125; if (size &lt; M * lowerTol &amp;&amp; capacityIndex - 1 &gt;= 0) &#123; capacityIndex--; resize(capacity[capacityIndex]); &#125; return ret; &#125; public void set(K key, V value) &#123; TreeMap&lt;K, V&gt; map = hashTable[hash(key)]; //æ²¡æœ‰è¯¥é”®æŠ›å‡ºå¼‚å¸¸ if (!map.containsKey(key)) &#123; throw new IllegalArgumentException(\"é”®ä¸å­˜åœ¨\"); &#125; map.put(key,value); &#125; //ç›´æ¥å¾—åˆ°ç›¸åº”çš„TreeMapï¼Œç„¶åå»æŸ¥ï¼ŒTreeMapæœ‰æ£€æŸ¥æ­¥éª¤ public V get(K key) &#123; return hashTable[hash(key)].get(key); &#125; private void resize(int newM) &#123; TreeMap&lt;K,V&gt;[] newHashTable = new TreeMap[newM]; //åé¢è¦æ›´æ–°Mï¼Œä½†æ˜¯è¿˜éœ€è¦æ—§Méå†æ•°ç»„ int oldM = M; //ç”±äºåé¢è¦é‡æ–°è®¡ç®—ä¸‹æ ‡ï¼Œæ‰€ä»¥è¿™é‡Œè¦æ›´æ–°M M = newM; for (int i = 0; i &lt; oldM; i++) &#123; TreeMap&lt;K, V&gt; map = hashTable[i]; for (K key: map.keySet()) &#123; //é‡æ–°è®¡ç®—ä¸‹æ ‡å¹¶èµ‹å€¼ newHashTable[hash(key)].put(key, map.get(key)); &#125; &#125; hashTable = newHashTable; &#125;&#125; å‚è€ƒé“¾æ¥ ç©è½¬æ•°æ®ç»“æ„","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"MySQLå­¦ä¹ ç¬”è®°","date":"2019-09-13T16:00:00.000Z","path":"/MySQLå­¦ä¹ ç¬”è®°/","text":"è¿™ç¯‡æ–‡ç« æ˜¯è®°å½•æˆ‘å­¦ä¹  MySQL æ—¶çš„ä¸€äº›ç¬”è®°ï¼Œä¸æˆä½“ç³»ï¼Œä»…ä¸ºä»¥åå¿«é€Ÿå­¦ä¹ å‡†å¤‡ï¼Œç”±äºè®°å½•çš„æ˜¯ä»é›¶å­¦ä¹  MySQL çš„ç¬”è®°ï¼Œæ‰€ä»¥ç¬”è®°çš„å†…å®¹æ˜¯ååˆ†çš„åŸºç¡€çš„ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä»¥ç”¨ä¸ºä¸»ï¼Œä¸ç‰µæ¶‰åˆ°å…·ä½“çš„åŸç†æ€§é—®é¢˜ã€‚ MySQLåŸºæœ¬æ¦‚å¿µæˆ‘ä»¬ä½¿ç”¨Javaç¼–å†™ç¨‹åºï¼Œä¸€èˆ¬æ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œä¸€æ—¦ç¨‹åºç»ˆæ­¢æˆ–æ–­ç”µï¼Œé‚£ä¹ˆæ•°æ®å°±ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œè€Œ MySQL æ­£æ˜¯è¿™ä¹ˆä¸€æ¬¾æ•°æ®åº“ã€‚ å®‰è£… MySQL å¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨æœç´¢å¼•æ“æœç´¢ MySQLï¼Œè¿›å…¥å®˜ç½‘è¿›è¡Œå®‰è£…ï¼ŒMySQL æ˜¯å¼€æºçš„è½¯ä»¶ã€‚ç›®å‰ä¼ä¸šä½¿ç”¨çš„æ˜¯5.5-5.7çš„ç‰ˆæœ¬ï¼Œé€‰æ‹©è¿›è¡Œä¸‹è½½å³å¯ã€‚è‹¥è¦å¸è½½ MySQLï¼Œåœ¨æ‰‹åŠ¨å¸è½½ MySQL åï¼Œè¿˜è¦åˆ é™¤ C:\\ProgramData\\MySQL è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦åˆ™é‡æ–°å®‰è£…æ—¶ä¸èƒ½æˆåŠŸã€‚ è¿æ¥MySQLåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ mysql -uroot -p ç„¶åä¼šæç¤ºä½ è¾“å…¥å¯†ç  è¾“å…¥çš„å¯†ç ä»¥å¯†æ–‡çš„å½¢å¼æ˜¾ç¤ºï¼Œä»¥ä¿è¯å®‰å…¨ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ -p åé¢è¾“å…¥å¯†ç ï¼Œä¸è¿‡è¿™æ ·å¹¶ä¸å®‰å…¨ã€‚ SQLè¯­å¥åˆ†ç±»SQL è¯­å¥æŒ‰åŠŸèƒ½åˆ†ä¸º DDLï¼šæ“ä½œæ•°æ®åº“ï¼Œè¡¨ DMLï¼šå¢ã€åˆ ã€æ”¹æ•°æ® DQLï¼šæŸ¥è¯¢æ•°æ® DLLï¼šä¸æˆæƒæœ‰å…³ åœ¨ MySQL ä¸­ä¸åŒºåˆ†å¤§å°å†™ï¼Œä¸è¿‡å…³é”®å­—ä¸€èˆ¬ä¼šå¤§å†™ï¼Œè€Œæ•°æ®åº“åå’Œè¡¨åä¸€èˆ¬å°å†™ï¼ŒSQLè¯­å¥éœ€è¦ä»¥;ç»“å°¾ï¼Œå¦åˆ™ä¼šä¸€ç›´ç­‰å¾…è¾“å…¥ã€‚ æ³¨é‡ŠMySQL çš„æ³¨é‡Šä¸º -- åé¢éœ€è¦æ¥ä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå¦ä¸€ç§æ³¨é‡Šä¸º #ï¼Œè¿™æ˜¯ MySQL ç‹¬æœ‰çš„ï¼Œåé¢ä¸éœ€è¦åŠ ç©ºæ ¼ show databases; -- æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ®åº“show databases; #æ˜¾ç¤ºæ‰€æœ‰çš„æ•°æ®åº“ DDLè¿™é‡Œæ¥ä»‹ç»æ“ä½œæ•°æ®åº“å’Œè¡¨çš„ SQL è¯­å¥ï¼Œè¿™äº›æ“ä½œä¸€èˆ¬å°±æ˜¯ C(Create), R(Retrieve), U(Update), D(Delete)ã€‚ æ“ä½œæ•°æ®åº“æŸ¥è¯¢é¦–å…ˆä»‹ç»æŸ¥è¯¢æ•°æ®åº“çš„è¯­å¥ï¼Œè¿æ¥ä¸Š MySQL åï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥(è¿™é‡Œå…³é”®å­—æ²¡æœ‰å¤§å†™) show databases; è¿™ä¸ªè¯­å¥çš„ä½œç”¨æ˜¯æ˜¾ç¤ºå‡ºæ‰€æœ‰çš„æ•°æ®åº“ +--------------------+| Database |+--------------------+| information_schema || mysql || performance_schema || sakila || sys || world |+--------------------+6 rows in set (0.31 sec) ä¸‹é¢è¿™æ¡è¯­å¥çš„ä½œç”¨æ˜¯æ˜¾ç¤ºå‡ºæŸæ•°æ®åº“æ‰€ç”¨çš„å­—ç¬¦é›† show create database æ•°æ®åº“å; æ¯”å¦‚ show create database world; è¾“å‡ºä¸º +----------+------------------------------------------------------------------+| Database | Create Database |+----------+------------------------------------------------------------------+| world | CREATE DATABASE `world` /*!40100 DEFAULT CHARACTER SET latin1 */ |+----------+------------------------------------------------------------------+1 row in set (0.05 sec) å¯è§ world æ•°æ®åº“æ‰€ç”¨çš„å­—ç¬¦é›†ä¸º latin1ã€‚ åˆ›å»ºåˆ›å»ºæ•°æ®åº“çš„è¯­å¥ä¸º create database æ•°æ®åº“å; å¦‚ create database db1; -- åˆ›å»ºä¸€ä¸ªåä¸ºdb1çš„æ•°æ®åº“ å¦‚æœæ•°æ®åº“å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šå‘ç”Ÿé”™è¯¯ï¼Œä¾‹å¦‚å†æ¬¡æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ create database db1; ä¼šå‘ç”Ÿå¦‚ä¸‹é”™è¯¯ ERROR 1007 (HY000): Can't create database 'db1'; database exists è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ create database if not exists db1; -- å¦‚æœdb1ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåˆ›å»ºdb1ï¼Œå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åš æˆ‘ä»¬è¿˜å¯ä»¥åœ¨åˆ›å»ºæ•°æ®åº“æ—¶æŒ‡å®šå­—ç¬¦é›†ï¼Œå¦‚ create database db2 character set gbk; ä½¿ç”¨ show create database db2; æŸ¥çœ‹å­—ç¬¦é›† +----------+-------------------------------------------------------------+| Database | Create Database |+----------+-------------------------------------------------------------+| db2 | CREATE DATABASE `db2` /*!40100 DEFAULT CHARACTER SET gbk */ |+----------+-------------------------------------------------------------+1 row in set (0.03 sec) ä¿®æ”¹æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹æ•°æ®åº“çš„å­—ç¬¦é›† alter database æ•°æ®åº“å character set å­—ç¬¦é›†; ä¾‹å¦‚ä¿®æ”¹ db2 æ•°æ®åº“ä¸º utf8 ç¼–ç  alter database db2 character set utf8; åˆ é™¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ drop å‘½ä»¤åˆ é™¤æ•°æ®åº“ï¼Œä¾‹å¦‚ drop database db2; ä½¿ç”¨ show databases; æŸ¥çœ‹æ•°æ®åº“ï¼Œå‘ç° db2 å·²ç»è¢«åˆ é™¤äº† +--------------------+| Database |+--------------------+| information_schema || db1 || mysql || performance_schema || sakila || sys || world |+--------------------+ å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ï¼Œæ¯”å¦‚åœ¨åˆ é™¤ä¸€æ¬¡ db2 ERROR 1008 (HY000): Can't drop database 'db2'; database doesn't exist è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­å¥ drop database if exists db2; -- å¦‚æœdb2å­˜åœ¨åˆ™åˆ é™¤db2ï¼Œå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åš ä½¿ç”¨æ•°æ®åº“é€šè¿‡ select database(); å‘½ä»¤å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨å“ªä¸€ä¸ªæ•°æ®åº“ +------------+| database() |+------------+| NULL |+------------+1 row in set (0.00 sec) å› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯ NULLï¼Œå¯ä»¥é€šè¿‡ use æ•°æ®åº“å;æ¥ä½¿ç”¨æ•°æ®åº“ï¼Œæ¯”å¦‚ä½¿ç”¨ db1 æ•°æ®åº“ use db1; å†æ¬¡æ‰§è¡Œ select database(); è¾“å‡ºä¸º +------------+| database() |+------------+| db1 |+------------+1 row in set (0.00 sec) æ“ä½œè¡¨æŸ¥è¯¢å¯ä»¥ä½¿ç”¨ show tables æŸ¥è¯¢æŸæ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨ï¼Œä¾‹å¦‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ world æ•°æ®åº“ï¼Œç„¶åæŸ¥è¯¢å…¶ä¸­æ‰€æœ‰çš„è¡¨ use world;show tables; ç»“æœä¸º +-----------------+| Tables_in_world |+-----------------+| city || country || countrylanguage |+-----------------+3 rows in set (0.09 sec) æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ desc è¡¨å; æ¥æŸ¥è¯¢æŸè¡¨çš„ç»“æ„ï¼Œæˆ‘ä»¬æ¥æŸ¥è¯¢ city è¡¨çš„ç»“æ„ desc city; +-------------+----------+------+-----+---------+----------------+| Field | Type | Null | Key | Default | Extra |+-------------+----------+------+-----+---------+----------------+| ID | int(11) | NO | PRI | NULL | auto_increment || Name | char(35) | NO | | | || CountryCode | char(3) | NO | MUL | | || District | char(20) | NO | | | || Population | int(11) | NO | | 0 | |+-------------+----------+------+-----+---------+----------------+5 rows in set (0.65 sec) ä½¿ç”¨ show create table è¡¨å; æŸ¥çœ‹è¡¨çš„å­—ç¬¦é›†ã€‚ åˆ›å»ºåˆ›å»ºè¡¨çš„è¯­æ³•ä¸º create table è¡¨å(åˆ—å1 æ•°æ®ç±»å‹1, ..., åˆ—ån æ•°æ®ç±»å‹n); MySQL ä¸­å¸¸ç”¨çš„æ•°æ®ç±»å‹æœ‰ int æ•´æ•°ç±»å‹ double æµ®ç‚¹æ•°ç±»å‹ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚ double(5,2)ï¼Œ5 ä»£è¡¨æ•°å­—çš„æ€»é•¿åº¦ï¼Œ2 ä»£è¡¨å°æ•°ç‚¹åçš„ä½æ•° date æ—¥æœŸç±»å‹ï¼Œæ ¼å¼ä¸º yy-MM-dd datetime æ—¥æœŸç±»å‹ï¼Œæ ¼å¼ä¸ºyy-MM-dd HH:mm:ss timestamp æ—¶é—´æˆ³ï¼Œæ ¼å¼ä¸ºyy-MM-dd HH:mm:ssï¼Œå½“ä¸èµ‹å€¼æˆ–èµ‹å€¼ä¸ºNULLæ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨å½“å‰çš„æ—¶é—´ä½œä¸ºå€¼ varchar å­—ç¬¦ä¸²ç±»å‹ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ï¼Œå¦‚ varchar(20) ç°åœ¨æˆ‘ä»¬åœ¨ db1 ä¸­åˆ›å»ºä¸€ä¸ª student è¡¨ use db1; -- ä½¿ç”¨æ•°æ®åº“db1create table student(name varchar(10), age int, score double(4,1), insert_time timestamp); -- åˆ›å»ºè¡¨student é‡Œé¢åŒ…æ‹¬name age score insert_time ç­‰åˆ—desc student; -- æŸ¥çœ‹studentè¡¨çš„ç»“æ„ +-------------+-------------+------+-----+-------------------+-----------------------------+| Field | Type | Null | Key | Default | Extra |+-------------+-------------+------+-----+-------------------+-----------------------------+| name | varchar(10) | YES | | NULL | || age | int(11) | YES | | NULL | || score | double(4,1) | YES | | NULL | || insert_time | timestamp | NO | | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |+-------------+-------------+------+-----+-------------------+-----------------------------+4 rows in set (0.07 sec) åˆ é™¤åŒåˆ é™¤æ•°æ®åº“ä¸€æ ·ï¼Œæœ‰ä¸¤ç§ç”¨æ³• drop table è¡¨å;drop table if exists è¡¨å; è¿™é‡Œä¸å¤šåšè§£é‡Šã€‚ ä¿®æ”¹ é‡å‘½åè¡¨å alter table è¡¨å rename to æ–°è¡¨å; ä¿®æ”¹è¡¨çš„å­—ç¬¦é›† alter table è¡¨å character set å­—ç¬¦é›†; æ·»åŠ ä¸€åˆ— alter table è¡¨å add åˆ—å æ•°æ®ç±»å‹; ä¿®æ”¹åˆ—ååŠå…¶ç±»å‹ alter table è¡¨å change åˆ—å æ–°åˆ—å æ–°æ•°æ®ç±»å‹; ä¿®æ”¹åˆ—çš„æ•°æ®ç±»å‹ alter table è¡¨å modify åˆ—å æ–°æ•°æ®ç±»å‹; åˆ é™¤åˆ— alter table è¡¨å drop åˆ—å; DMLDML æ˜¯ä¸ä¿®æ”¹æ•°æ®æœ‰å…³çš„ sql è¯­å¥ã€‚ä¿®æ”¹æ•°æ®ä¸»è¦åŒ…æ‹¬çš„æ˜¯å¢åˆ æ”¹æ•°æ®ã€‚ä¸ºäº†æŸ¥çœ‹ä¿®æ”¹æ•°æ®çš„æ•ˆæœï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸ªæŸ¥è¯¢æ•°æ®çš„å‘½ä»¤ select * from è¡¨å; ç°åœ¨åˆ›å»ºä¸€ä¸ª student çš„è¡¨ CREATE TABLE student ( name varchar(10), -- åå­—é•¿åº¦æœ€å¤§10ä¸ªå­—ç¬¦ age int, -- å¹´é¾„ math_score double(3,1), -- æ•°å­¦æˆç»© english_score double(3,1), -- è‹±è¯­æˆç»© insert_time timestamp -- æ•°æ®åŠ å…¥çš„æ—¶é—´); DESC student; -- æŸ¥çœ‹è¡¨çš„ç»“æ„ æ·»åŠ æ•°æ®å‘è¡¨ä¸­æ·»åŠ æ•°æ®çš„å†™æ³•ä¸º insert into è¡¨å(åˆ—å1, åˆ—å2, ..., åˆ—ån) values(å€¼1, å€¼2, ..., å€¼n); -- åˆ—åå’Œå€¼è¦ä¸€ä¸€å¯¹åº” ä¾‹å¦‚å‘è¡¨ä¸­æ·»åŠ æ•°æ® INSERT INTO student (name, age, math_score, english_score) VALUES ('dilireba', 27, 60, 70);INSERT INTO student (name, age, math_score, english_score) VALUES ('gulinazha', 28, 62, 68); ä½¿ç”¨ SELECT * FROM student; å¾—åˆ°æ•°æ®ä¸º æ³¨æ„ï¼š åˆ—åå’Œå€¼åè¦ä¸€ä¸€å¯¹åº” å¦‚æœè¡¨ååä¸å®šä¹‰åˆ—åï¼Œåˆ™é»˜è®¤ä¸ºç»™æ‰€æœ‰åˆ—æ·»åŠ ï¼Œå¦‚ INSERT INTO student VALUES (&#39;dilireba&#39;, 27, 60, 70); é™¤äº†æ•°å­—ç±»å‹ï¼Œå…¶ä»–ç±»å‹è¦ç”¨å¼•å·(&#39;)æ‹¬èµ·æ¥ åˆ é™¤æ•°æ®åˆ é™¤æ•°æ®çš„æ ¼å¼ä¸º delete from è¡¨å [where æ¡ä»¶]; -- åˆ é™¤æ»¡è¶³æ¡ä»¶çš„è¡Œ å…¶ä¸­ [] ä»£è¡¨çš„æ˜¯é‡Œé¢çš„å†…å®¹å¯çœç•¥ï¼Œå¦‚æœä¸åŠ æ¡ä»¶çš„è¯ï¼Œé»˜è®¤ä¸ºåˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œç°åœ¨æˆ‘ä»¬åˆ é™¤ä¸Šä¾‹ä¸­ age &gt; 27 çš„è¡Œï¼Œå¦‚ä¸‹ DELETE FROM student WHERE age &gt; 27; å¾—åˆ°çš„ç»“æœä¸º å¦‚æœè¦åˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®çš„è¯ï¼Œä¸æ¨èä½¿ç”¨ delete from è¡¨å; å› ä¸ºå®ƒä¼šå°†è¡¨ä¸­çš„æ•°æ®ä¸€è¡Œä¸€è¡Œçš„åˆ é™¤ï¼Œæ•ˆç‡è¾ƒæ…¢ï¼Œæ¨èä½¿ç”¨ truncate table è¡¨å; å®ƒä¼šç›´æ¥åˆ é™¤è¿™ä¸ªè¡¨ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç©ºè¡¨ï¼Œè¿™ä¸ªè¡¨çš„åå­—å’Œç»“æ„ä¸åˆ é™¤çš„è¡¨ç›¸åŒï¼Œä»æ•ˆæœä¸Šå°±ç›¸å½“äºæ˜¯åˆ é™¤äº†è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œä½†æ˜¯å®ƒçš„æ•ˆç‡æ¯” delete from è¡¨å; å¿«ã€‚ æ›´æ–°æ•°æ®æ›´æ–°æ•°æ®çš„è¯­æ³•ä¸º update è¡¨å set åˆ—å1 = å€¼1, ..., åˆ—ån = å€¼n [where æ¡ä»¶]; -- å½“ç¬¦åˆæ¡ä»¶æ—¶ï¼Œæ›´æ–°å€¼ å¦‚ä½•çœç•¥æ¡ä»¶ï¼Œé‚£ä¹ˆä¼šä¿®æ”¹æ‰€æœ‰çš„è¡Œï¼Œå¦‚ç°åœ¨æˆ‘è¦æ›´æ–°ï¼Œå¦‚ä½•ç¬¦åˆæ¡ä»¶ age = 27ï¼Œé‚£ä¹ˆå°† age ä¿®æ”¹ä¸º 28ï¼Œå¦‚ä¸‹ UPDATE student set age = 28 WHERE age = 27; DQLæŸ¥è¯¢æ•°æ®çš„åŸºæœ¬è¯­æ³•ä¸º SELECT å­—æ®µåˆ—è¡¨FROM è¡¨ååˆ—è¡¨WHERE æ¡ä»¶åˆ—è¡¨GROUP BY åˆ†ç»„å­—æ®µHAVING åˆ†ç»„åçš„æ¡ä»¶é™å®šORDER BY æ’åºLIMIT åˆ†é¡µé™å®š ä¸‹é¢ä¼šè¯¦ç»†çš„è®²è§£å…¶ä¸­å„ä¸ªå…³é”®å­—çš„æ„æ€ã€‚åˆ›å»ºä¸€ä¸ª student è¡¨å¦‚ä¸‹ CREATE TABLE student ( id int, -- ç¼–å· name varchar(20), -- å§“å age int, -- å¹´é¾„ sex varchar(5), -- æ€§åˆ« address varchar(100), -- åœ°å€ math int, -- æ•°å­¦ english int -- è‹±è¯­); å‘å…¶ä¸­æ’å…¥ä»¥ä¸‹æ•°æ® INSERT INTO student(id,name,age,sex,address,math,english) VALUES (1,'é©¬äº‘',55,'ç”·', 'æ­å· ',66,78), (2,'é©¬åŒ–è…¾ ',45,'å¥³ ','æ·±åœ³ ',98,87), (3,'é©¬æ™¯æ¶› ',55,'ç”· ','é¦™æ¸¯ ',56,77), (4,'æŸ³å²©',20,'å¥³ ','æ¹–å— ',76,65), (5,'æŸ³é’ ',20,'ç”· ','æ¹–å— ',86,NULL), (6,'åˆ˜å¾·å ',57,'ç”· ','é¦™æ¸¯',99, 99), (7,'é©¬å¾·',22,'å¥³','é¦™æ¸¯',99,99), (8,'å¾·ç›è¥¿äºš',18,'ç”·','å—äº¬',56,65); å¦‚æœæç¤º Incorrect string value: '\\xE9\\xA9\\xAC\\xE4\\xBA\\x91' for column 'name' at row 1 é‚£ä¹ˆå°±æ˜¯å› ä¸ºå­—ç¬¦ç¼–ç çš„é—®é¢˜ï¼Œè¿™æ—¶å¯ä»¥ä¿®æ”¹ name,address,sex çš„å­—ç¬¦é›†ä¸º utf8 alter table student change name name char(20) character set utf8;alter table student change address address char(100) character set utf8;alter table student change sex sex char(5) character set utf8; åŸºç¡€æŸ¥è¯¢æŸ¥è¯¢å¤šä¸ªå­—æ®µSELECT name, age FROM student; -- æŸ¥è¯¢nameå’Œageå­—æ®µ å»é‡æŸ¥è¯¢ address å­—æ®µæ—¶ï¼Œå‘ç°æœ‰ç›¸åŒçš„ï¼Œå¦‚â€é¦™æ¸¯â€ SELECT address FROM student; å¦‚æœå¸Œæœ›é‡å¤å‡ºç°çš„åªå‡ºç°ä¸€æ¬¡ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ DISTINCT SELECT DISTINCT address FROM student; è®¡ç®—åˆ—ç°åœ¨è¦è®¡ç®—å®ƒä»¬çš„æ•°å­¦æˆç»©å’Œè‹±è¯­æˆç»©çš„å’Œ SELECT name, math, english, math+english FROM student; -- ä¸ºäº†çœ‹å‡ºæ˜¯è°çš„æ€»åˆ†ï¼Œè¿™é‡ŒåŠ ä¸Šä¸€ä¸ªnameå­—æ®µ æˆ‘ä»¬å‘ç°ç¬¬ 5 è¡Œçš„ç»“æœä¸º nullï¼Œè¿™æ˜¯å› ä¸º null+ å…¶å®ƒæ•°å¾—åˆ°çš„ç»“æœéƒ½æ˜¯ nullï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬åº”è¯¥æŠŠ null å½“åš 0 å¤„ç† ï¼Œè¿™æ ·åŠ å‡ºæ¥çš„å°±æ˜¯æ€»åˆ†ï¼Œè€Œä¸æ˜¯ null SELECT name, math, english, math+ifnull(english,0) FROM student; è¿™é‡Œä½¿ç”¨äº† ifnull(english,0)ï¼Œå¦‚æœ english çš„å€¼æ˜¯ nullï¼Œé‚£ä¹ˆå°±æ›¿æ¢ä¸º 0ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°çš„ç»“æœä¸º èµ·åˆ«åæˆ‘ä»¬æ³¨æ„åˆ°ä¸Šé¢çš„æœ€åä¸€åˆ—çš„åˆ—åä¸º math+ifnull(english,0)ï¼Œè¿™ä¸ªåˆ—åæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºå®ƒèµ·ä¸ªåˆ«åï¼Œå¦‚ score SELECT name, math, english, math+ifnull(english,0) AS score FROM student; å…¶ä¸­ AS ä½œä¸ºä¸€ä¸ªèµ·åˆ«åçš„ä½œç”¨ï¼ŒAS å…¶å®å¯ä»¥çœç•¥ï¼Œä½¿ç”¨ç©ºæ ¼æ›¿ä»£å³å¯ï¼Œå¦‚ SELECT name, math, english, math+ifnull(english,0) score FROM student; è¯¥å¥å¾—åˆ°çš„ç»“æœä¸ä¸Šé¢çš„ç›¸åŒ æ¡ä»¶æŸ¥è¯¢æˆ‘ä»¬ä½¿ç”¨ WHERE æ¥æŒ‡æ˜æ¡ä»¶æŸ¥è¯¢ï¼Œæ¯”å¦‚æˆ‘è¦æŸ¥è¯¢å¹´é¾„åœ¨ 20 å²ä»¥ä¸Šçš„ SELECT name,age FROM student WHERE age &gt; 20; å¯è§ WHERE åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªé€»è¾‘å€¼ï¼Œæ—¢ç„¶æ˜¯é€»è¾‘å€¼å°±å¯ä»¥ä½¿ç”¨ä¸æˆ–éè¿ç®— AND OR NOT SELECT name,age FROM student WHERE age &gt; 20 AND age &lt; 50; -- å¹´é¾„åœ¨20-50ä¹‹é—´çš„ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ BETWEEN ... AND ... æ¥ç®€åŒ–ä¸Šé¢çš„æ“ä½œ SELECT name,age FROM student WHERE age BETWEEN 20 AND 50; -- åœ¨20-50ä¹‹é—´ï¼ŒåŒ…æ‹¬20å’Œ50 SELECT name,age FROM student WHERE age = 18 OR age = 20 OR age = 25; -- æŸ¥è¯¢å¹´é¾„ä¸º18æˆ–20æˆ–25çš„ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ IN è¾¾åˆ°ç›¸åŒçš„æ•ˆæœ SELECT name,age FROM student WHERE age IN (18,20,25); -- æŸ¥è¯¢å¹´é¾„ä¸º18æˆ–20æˆ–25çš„ æ’åºæŸ¥è¯¢ä½¿ç”¨ ORDER BY æ¥å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºï¼Œåé¢è·Ÿè¦æ’åºçš„å­—æ®µï¼Œé»˜è®¤å¯¹å­—æ®µè¿›è¡Œå‡åºæ’åºã€‚ ASCï¼šå‡åº DESCï¼šé™åº SELECT name,math FROM student ORDER BY math; -- é»˜è®¤ä¸ºå‡åº SELECT name,math FROM student ORDER BY math DESC; -- é™åº ORDER BY å¯ä»¥å¯¹å¤šä¸ªå­—æ®µè¿›è¡Œæ’åºï¼Œå…ˆå¯¹å‰é¢çš„å­—æ®µè¿›è¡Œæ’åºï¼Œå¦‚æœå‰é¢çš„å­—æ®µç›¸åŒï¼Œåœ¨æ ¹æ®åé¢çš„å­—æ®µæ’åºï¼Œæ¯”å¦‚æŒ‰ç…§æ•°å­¦å’Œè‹±è¯­æˆç»©æ’åï¼Œä¼˜å…ˆæŒ‰æ•°å­¦æˆç»©æ¥ï¼Œå¦‚æœæ•°å­¦æˆç»©ç›¸åŒåˆ™æŒ‰è‹±è¯­æˆç»©æ¥ SELECT name,math,english FROM student ORDER BY math DESC, english DESC; æ¨¡ç³ŠæŸ¥è¯¢ä½¿ç”¨ LIKE è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼Œæ¯”å¦‚è®°ä¸ä½å…¨ç§°ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢ï¼Œæ¯”å¦‚æƒ³æŸ¥è¯¢å§“é©¬çš„ï¼Œåœ¨æŸ¥è¯¢ä¹‹å‰è¦ä»‹ç»å ä½ç¬¦ _ï¼šè¡¨ç¤ºå•ä¸ªä»»æ„å­—ç¬¦ %ï¼šè¡¨ç¤ºå¤šä¸ªä»»æ„å­—ç¬¦ SELECT name FROM student WHERE name LIKE 'é©¬%'; å¦‚æœæˆ‘æƒ³æŸ¥è¯¢åå­—ä¸­å¸¦æœ‰â€å¾·â€å­—çš„ SELECT name FROM student WHERE name LIKE '%å¾·%'; èšåˆå‡½æ•°èšåˆå‡½æ•°å°†ä¸€åˆ—ä½œä¸ºæ•´ä½“ï¼Œè¿›è¡Œçºµå‘è®¡ç®—ã€‚èšåˆå‡½æ•°æœ‰ countï¼šç»Ÿè®¡ä¸ªæ•°ï¼Œä¸åŒ…æ‹¬ NULLã€‚ maxï¼šè®¡ç®—æœ€å¤§å€¼ minï¼šè®¡ç®—æœ€å°å€¼ sumï¼šè®¡ç®—æ€»å’Œ avgï¼šè®¡ç®—å¹³å‡å€¼ SELECT count(math) FROM student;SELECT max(math) FROM student;SELECT min(math) FROM student;SELECT sum(math) FROM student;SELECT avg(math) FROM student; åˆ†ç»„æŸ¥è¯¢ä½¿ç”¨ GROUP BY è¿›è¡Œåˆ†ç»„æŸ¥è¯¢ï¼Œæ¯”å¦‚æˆ‘æƒ³ç”·ç”Ÿå’Œå¥³ç”Ÿçš„æ•°å­¦å¹³å‡åˆ†ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ SELECT sex,avg(math) avg -- avgæ˜¯åˆ«åFROM student GROUP BY sex; å¦‚æœæˆ‘æƒ³å¯¹åˆ†æ•°åœ¨ 70 ä»¥ä¸Šçš„äººè®¡ç®—å¹³å‡åˆ†ï¼Œå¹¶ä¸”ç»Ÿè®¡äººæ•°ï¼Œå¯ä»¥è¿™ä¹ˆå†™ SELECT sex,avg(math) avg, count(id) count -- avgå’Œcountæ˜¯åˆ«åFROM student WHERE math &gt; 70 GROUP BY sex; å¦‚æœåˆ†ç»„åçš„è¿˜è¦è¿›è¡Œç­›é€‰ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ HAVINGï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘è¦ç­›é€‰åˆ†ç»„åäººæ•°å¤§äº 2 çš„æ‰è¿›è¡Œç»Ÿè®¡ SELECT sex,avg(math) avg, count(id) countFROM studentWHERE math &gt; 70GROUP BY sexHAVING count(id) &gt; 2; åˆ†é¡µæŸ¥è¯¢å½“æˆ‘ä»¬æŸ¥è¯¢æ•°æ®æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¸€é¡µåªèƒ½æ˜¾ç¤ºå‡ è¡Œæ•°æ®ï¼Œæˆ‘ä»¬å°±è¦è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œä½¿ç”¨ LIMITï¼Œåé¢è·Ÿä¸¤ä¸ªæ•°ï¼Œç¬¬ä¸€ä¸ªæ•°ä»£è¡¨æŸ¥è¯¢çš„èµ·å§‹ä½ç½®ï¼Œä» 0 å¼€å§‹ï¼Œç¬¬äºŒä¸ªä»£è¡¨ä¸€é¡µæ˜¾ç¤ºçš„è¡Œæ•°ï¼Œå¦‚ SELECT *FROM studentLIMIT 0,3; -- æŸ¥è¯¢ä¸­0å¼€å§‹çš„3è¡Œæ•°æ® å¦‚æœæˆ‘ä»¬è¦æŸ¥è¯¢ç¬¬äºŒé¡µï¼Œå¯ä»¥æ€ä¹ˆå†™ SELECT *FROM studentLIMIT 3,3; çº¦æŸæ‰€è°“çº¦æŸå°±æ˜¯å¯¹æ•°æ®äº§ç”Ÿé™åˆ¶ï¼Œæ¯”å¦‚è¯´æŸåˆ—ä¸èƒ½ä¸ºç©º(NULL)ï¼Œæœ‰æˆ–è€…è¯´æŸåˆ—çš„æ•°æ®ä¸èƒ½é‡å¤ã€‚çº¦æŸä¸€èˆ¬åŒ…æ‹¬ä¸‹é¢å››ç§çº¦æŸ éç©ºçº¦æŸ(not null) å”¯ä¸€çº¦æŸ(unique) ä¸»é”®çº¦æŸ(primary key) å¤–é”®çº¦æŸ(foreign key) éç©ºçº¦æŸæ‰€è°“çš„éç©ºçº¦æŸæŒ‡çš„å°±æ˜¯è¯¥åˆ—ä¸èƒ½æœ‰ NULL å€¼ï¼Œä¸‹é¢ä»‹ç»å¦‚ä½•åˆ›å»ºéç©ºçº¦æŸï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯åœ¨åˆ›å»ºè¡¨ç¤ºæ·»åŠ éç©ºçº¦æŸï¼Œä¸€ç§æ˜¯åœ¨åˆ›å»ºè¡¨ä¹‹åæ·»åŠ éç©ºçº¦æŸ åˆ›å»ºè¡¨ç¤ºæ·»åŠ éç©ºçº¦æŸ CREATE TABLE emp( id int, name varchar(10) not null); -- ä¸ºnameæ·»åŠ éç©ºçº¦æŸ nameä¸èƒ½ä¸ºNULL å¦‚æœæ­¤æ—¶ä¸º name èµ‹å€¼ä¸º NULLï¼Œé‚£ä¹ˆè¿™æ¡è¯­å¥å°†ä¼šæŠ¥é”™ INSERT INTO emp(id,name) VALUES (0,NULL); -- ä¸ºnameèµ‹å€¼ä¸ºNULL å°†ä¼šæŠ¥é”™ Column 'name' cannot be null åœ¨åˆ›å»ºè¡¨åæ·»åŠ éç©ºçº¦æŸ å¦‚ç°åœ¨ç»™ id ä¹Ÿæ·»åŠ éç©ºçº¦æŸï¼Œåº”å½“è¿™ä¹ˆå†™ ALTER TABLE emp MODIFY id int not null; -- ä¸ºidæ·»åŠ éç©ºçº¦æŸ åˆ é™¤éç©ºçº¦æŸ åˆ é™¤çš„åŠæ³•ä¸æ·»åŠ çš„è¯­æ³•å·®ä¸å¤šï¼Œå¦‚ç°åœ¨æˆ‘åˆè¦åˆ é™¤ id çš„éç©ºçº¦æŸï¼Œåº”å½“è¿™ä¹ˆå†™ ALTER TABLE emp MODIFY id int; -- åˆ é™¤idçš„éç©ºçº¦æŸ å”¯ä¸€çº¦æŸå”¯ä¸€çº¦æŸæŒ‡çš„æ˜¯è¯¥åˆ—çš„å€¼ä¸èƒ½ç›¸åŒï¼Œå…³é”®å­—ä¸º uniqueã€‚ åˆ›å»ºè¡¨æ—¶å¦‚ä½•æ·»åŠ å”¯ä¸€çº¦æŸ CREATE TABLE emp( id int UNIQUE, name varchar(10)); -- ä¸ºnameæ·»åŠ éç©ºçº¦æŸ nameä¸èƒ½ä¸ºNULL åˆ›å»ºè¡¨åæ·»åŠ å”¯ä¸€çº¦æŸ ALTER TABLE emp MODIFY id int UNIQUE; åˆ é™¤å”¯ä¸€çº¦æŸ åˆ é™¤å”¯ä¸€çº¦æŸçš„è¯­æ³•ä¸åˆ é™¤éç©ºçº¦æŸçš„è¯­æ³•ä¸åŒï¼Œå¦‚ä¸‹ ALTER TABLE emp DROP INDEX id; ä¸»é”®çº¦æŸä¸»é”®çº¦æŸ(primary key)æ˜¯ä¸Šé¢ä¸¤ä¸ªçš„æ€»å’Œï¼Œå³è¯¥åˆ—æ—¢ä¸èƒ½ä¸º NULLï¼Œä¹Ÿä¸èƒ½ç›¸åŒã€‚ä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªå­—æ®µä¸ºä¸»é”®ã€‚ åˆ›å»ºè¡¨æ—¶æ·»åŠ ä¸»é”® CREATE TABLE emp( id int PRIMARY KEY, name varchar(10)); åˆ›å»ºè¡¨åæ·»åŠ ä¸»é”® ALTER TABLE emp MODIFY id int PRIMARY KEY; åˆ é™¤ä¸»é”® ALTER TABLE emp DROP PRIMARY KEY ; -- å› ä¸ºä¸»é”®åªæœ‰ä¸€ä¸ªï¼Œä¸å¿…æŒ‡æ˜æ˜¯å“ªä¸ªå­—æ®µ ä¸‹é¢ä»‹ç»ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œä¸»é”®è‡ªåŠ¨å¢é•¿ï¼Œå½“æˆ‘ä»¬æ·»åŠ æ•°æ®æ—¶ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº†ä¸»é”®å¢é•¿å¹¶ä¸”æ²¡æœ‰ä¸ºä¸»é”®èµ‹å€¼ï¼Œé‚£ä¹ˆä¸»é”®çš„å€¼ä¼šç›¸è¾ƒäºä¸Šä¸€æ¡æ•°æ®ä¸»é”®çš„å€¼å¢é•¿ï¼Œè®¾ç½®ä¸»é”®è‡ªåŠ¨å¢é•¿çš„è¯­æ³•ä¸º(å‡è®¾è®¾ç½®(äº†) id ä¸ºä¸»é”®) CREATE TABLE emp( id int PRIMARY KEY AUTO_INCREMENT, -- åˆ›å»ºè¡¨æ—¶æ·»åŠ  name varchar(10) ); ALTER TABLE emp MODIFY id int AUTO_INCREMENT; -- åˆ›å»ºè¡¨åæ·»åŠ  idå·²ç»è®¾ç½®ä¸ºä¸»é”®äº† åˆ é™¤ä¸»é”®å¢é•¿çš„æ–¹æ³•ä¸º ALTER TABLE emp MODIFY id int; -- è¿™æ ·æ˜¯ä¸ä¼šåˆ é™¤ä¸»é”®çš„ï¼Œåªä¼šåˆ é™¤ä¸»é”®è‡ªåŠ¨å¢é•¿ å¤–é”®çº¦æŸå‡è®¾æœ‰è¿™ä¹ˆä¸€å¼ è¡¨ è§‚å¯Ÿç ”å‘éƒ¨é—¨å’Œéƒ¨é—¨åœ°ç‚¹ï¼Œå‘ç°æ•°æ®å†—ä½™å¾ˆä¸¥é‡ï¼Œå¹¶ä¸”åœ¨åç»­æ·»åŠ æ•°æ®ä¸­æ·»åŠ çš„ä¹Ÿæ˜¯è¿™ä¹ˆä¸€å¯¹ä¸€å¯¹çš„ï¼Œå¾ˆéº»çƒ¦å¹¶ä¸”æœ‰åœ¨æ·»åŠ æ•°æ®å¯èƒ½ä¼šå‡ºé”™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™å¼ è¡¨æ‹†æˆä¸¤å¼ è¡¨ï¼Œå¦‚ä¸‹ ç°åœ¨é—®é¢˜æ˜¯æ€ä¹ˆå°†è¿™ä¸¤å¼ è¡¨è”ç³»èµ·æ¥ï¼Œç­”æ¡ˆå°±æ˜¯å¤–é”®çº¦æŸã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯å¤–é”®ï¼Œä»è¡¨(è¢«åˆ«äººçº¦æŸçš„è¡¨)ä¸­ä¸ä¸»è¡¨(ç”¨æ¥çº¦æŸåˆ«äººçš„è¡¨)ä¸»é”®å¯¹åº”çš„é‚£ä¸€åˆ—ï¼Œå¦‚ï¼šå‘˜å·¥è¡¨ä¸­çš„ dep_idã€‚ æ–°å»ºè¡¨æ—¶å¢åŠ å¤–é”® [CONSTRAINT] [å¤–é”®çº¦æŸåç§°] FOREIGN KEY(å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨å(ä¸»é”®å­—æ®µå) åˆ›å»ºè¡¨åæ·»åŠ å¤–é”® ALTER TABLE ä»è¡¨ ADD [CONSTRAINT] [å¤–é”®çº¦æŸåç§°] FOREIGN KEY (å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨(ä¸»é”®å­—æ®µå); æ¯”å¦‚æˆ‘åœ¨åˆ›å»º employee è¡¨æ—¶æ·»åŠ å¤–é”® CREATE TABLE employee( id INT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(20), age INT, dep_id INT, -- å¤–é”®å¯¹åº”ä¸»è¡¨çš„ä¸»é”® CONSTRAINT emp_depid_fk FOREIGN KEY (dep_id) REFERENCES department(id)); employee è¡¨å·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹æ·»åŠ å¤–é”® ALTER TABLE employee ADD CONSTRAINT emp_depid_fk FOREIGN KEY (dep_id) REFERENCES department(id); åˆ é™¤å¤–é”® -- åˆ é™¤ employee è¡¨çš„ emp_depid_fk å¤–é”®ALTER TABLE employee DROP FOREIGN KEY emp_depid_fk; è¿™ä¸ªæ—¶å€™åˆä¼šå‡ºç°æ–°çš„é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘æ”¹å˜ä¸»è¡¨ä¸­ id=1 ä¸º id=5ï¼Œä½†æ˜¯è¿™æ—¶æ˜¯ä¸ä¼šæˆåŠŸçš„ï¼Œå› ä¸ºå¦‚æœæ”¹äº†ï¼Œä»è¡¨ä¸­çš„ dep_id ä¾¿æ²¡æœ‰å¯¹åº”çš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦çº§è”æ“ä½œ(åœ¨ä¿®æ”¹å’Œåˆ é™¤ä¸»è¡¨çš„ä¸»é”®æ—¶ï¼ŒåŒæ—¶æ›´æ–°æˆ–åˆ é™¤å‰¯è¡¨çš„å¤–é”®å€¼ï¼Œç§°ä¸ºçº§è”æ“ä½œ)ã€‚ ON UPDATE CASCADE çº§è”æ›´æ–°ï¼Œåªèƒ½æ˜¯åˆ›å»ºè¡¨çš„æ—¶å€™åˆ›å»ºçº§è”å…³ç³»ã€‚æ›´æ–°ä¸»è¡¨ä¸­çš„ä¸»é”®ï¼Œä»è¡¨ä¸­çš„å¤–é”®åˆ—ä¹Ÿè‡ªåŠ¨åŒæ­¥æ›´æ–° ON DELETE CASCADE çº§è”åˆ é™¤ create table employee( id int primary key auto_increment, name varchar(20), age int, dep_id int, -- å¤–é”®å¯¹åº”ä¸»è¡¨çš„ä¸»é”® -- åˆ›å»ºå¤–é”®çº¦æŸ constraint emp_depid_fk foreign key (dep_id) references department(id) on update cascade on delete cascade); ä¸‰å¤§èŒƒå¼è®¾è®¡æ•°æ®åº“æ—¶ï¼Œéœ€è¦éµå¾ªçš„ä¸€äº›è§„èŒƒã€‚è¦éµå¾ªåè¾¹çš„èŒƒå¼è¦æ±‚ï¼Œå¿…é¡»å…ˆéµå¾ªå‰è¾¹çš„æ‰€æœ‰èŒƒå¼è¦æ±‚ã€‚è®¾è®¡å…³ç³»æ•°æ®åº“æ—¶ï¼Œéµä»ä¸åŒçš„è§„èŒƒè¦æ±‚ï¼Œè®¾è®¡å‡ºåˆç†çš„å…³ç³»å‹æ•°æ®åº“ï¼Œè¿™äº›ä¸åŒçš„è§„èŒƒè¦æ±‚è¢«ç§°ä¸ºä¸åŒçš„èŒƒå¼ï¼Œå„ç§èŒƒå¼å‘ˆé€’æ¬¡è§„èŒƒï¼Œè¶Šé«˜çš„èŒƒå¼æ•°æ®åº“å†—ä½™è¶Šå°ã€‚ ç›®å‰å…³ç³»æ•°æ®åº“æœ‰å…­ç§èŒƒå¼ ï¼š ç¬¬ä¸€èŒƒå¼(1NF) ã€ç¬¬äºŒèŒƒå¼(2NF) ã€ç¬¬ä¸‰èŒƒå¼(3NF) ã€å·´æ–¯-ç§‘å¾·èŒƒå¼(BCNF) ã€ç¬¬å››èŒƒå¼(4NF)å’Œç¬¬äº”èŒƒå¼(5NFï¼Œåˆç§°å®Œç¾èŒƒå¼) ã€‚æ»¡è¶³æœ€ä½è¦æ±‚çš„èŒƒå¼æ˜¯ç¬¬ä¸€èŒƒå¼(1NF) ã€‚åœ¨ç¬¬ä¸€èŒƒå¼çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥æ»¡è¶³æ›´å¤šè§„èŒƒè¦æ±‚çš„ç§°ä¸ºç¬¬äºŒèŒƒå¼(2NF) ï¼Œå…¶ä½™èŒƒå¼ä»¥æ¬¡ç±»æ¨ã€‚ä¸€èˆ¬è¯´æ¥ï¼Œæ•°æ®åº“åªéœ€æ»¡è¶³ç¬¬ä¸‰èŒƒå¼(3NF)å°±è¡Œäº†ã€‚ ä¸ºäº†ç†è§£ä¸‰å¤§èŒƒå¼ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹è¿™ä¹ˆä¸€å¼ è¡¨ æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ç¬¬ä¸€èŒƒå¼çš„æ¦‚å¿µï¼šæ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸå­æ•°æ®é¡¹ã€‚å³è¡¨ä¸­çš„æŸä¸ªåˆ—æœ‰å¤šä¸ªå€¼æ—¶ï¼Œå¿…é¡»æ‹†åˆ†ä¸ºä¸åŒçš„åˆ—ã€‚ä¸Šé¢çš„é‚£ä¸ªè¡¨ä¸æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼Œå› ä¸ºç³»çš„é‚£ä¸€åˆ—è¢«æ‹†æˆäº†ä¸¤åˆ—ï¼Œæˆ‘ä»¬å°†å®ƒæ‹†åˆ†æˆä¸åŒçš„åˆ— å®ƒç°åœ¨æ»¡è¶³ç¬¬ä¸€èŒƒå¼çš„è¦æ±‚äº†ï¼Œæ¥ä¸‹æ¥çœ‹ç¬¬äºŒèŒƒå¼çš„æ¦‚å¿µï¼šåœ¨1NFçš„åŸºç¡€ä¸Šï¼Œéç å±æ€§å¿…é¡»å®Œå…¨ä¾èµ–äºç ã€‚ä¸ºäº†ç†è§£è¿™å¥è¯çš„æ„æ€ï¼Œå…ˆçœ‹ä¸‹é¢å‡ ä¸ªæ¦‚å¿µï¼š å‡½æ•°ä¾èµ–ï¼šA=&gt;Bï¼Œå¦‚æœé€šè¿‡ A å±æ€§(å±æ€§ç»„)çš„å€¼ï¼Œå¯ä»¥ç¡®å®šå”¯ä¸€ B å±æ€§çš„å€¼ã€‚åˆ™ç§° B ä¾èµ–äº A ä¾‹å¦‚ï¼šå­¦å·=&gt;å§“åã€‚(å­¦å·ï¼Œè¯¾ç¨‹åç§°) --&gt; åˆ†æ•° å®Œå…¨å‡½æ•°ä¾èµ–ï¼šA=&gt;Bï¼Œ å¦‚æœ A æ˜¯ä¸€ä¸ªå±æ€§ç»„ï¼Œåˆ™ B å±æ€§å€¼å¾—ç¡®å®šéœ€è¦ä¾èµ–äº A å±æ€§ç»„ä¸­æ‰€æœ‰çš„å±æ€§å€¼ã€‚ ä¾‹å¦‚ï¼š(å­¦å·ï¼Œè¯¾ç¨‹åç§°) =&gt; åˆ†æ•° éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼šA=&gt;Bï¼Œ å¦‚æœ A æ˜¯ä¸€ä¸ªå±æ€§ç»„ï¼Œåˆ™ B å±æ€§å€¼çš„ç¡®å®šåªéœ€è¦ä¾èµ–äº A å±æ€§ç»„ä¸­æŸä¸€äº›å€¼å³å¯ã€‚ ä¾‹å¦‚ï¼š(å­¦å·ï¼Œè¯¾ç¨‹åç§°) --&gt; å§“åï¼Œåªä¾é å­¦å· ä¼ é€’å‡½æ•°ä¾èµ–ï¼šA=&gt;B, B=&gt;C . å¦‚æœé€šè¿‡ A å±æ€§(å±æ€§ç»„)çš„å€¼ï¼Œå¯ä»¥ç¡®å®šå”¯ä¸€ B å±æ€§çš„å€¼ï¼Œåœ¨é€šè¿‡ B å±æ€§(å±æ€§ç»„)çš„å€¼å¯ä»¥ç¡®å®šå”¯ä¸€ C å±æ€§çš„å€¼ï¼Œåˆ™ç§° C ä¼ é€’å‡½æ•°ä¾èµ–äº A ä¾‹å¦‚ï¼šå­¦å· =&gt; ç³»åï¼Œç³»å =&gt; ç³»ä¸»ä»» ç ï¼šå¦‚æœåœ¨ä¸€å¼ è¡¨ä¸­ï¼Œä¸€ä¸ªå±æ€§æˆ–å±æ€§ç»„ï¼Œè¢«å…¶ä»–æ‰€æœ‰å±æ€§æ‰€å®Œå…¨ä¾èµ–ï¼Œåˆ™ç§°è¿™ä¸ªå±æ€§(å±æ€§ç»„)ä¸ºè¯¥è¡¨çš„ç  ä¾‹å¦‚ï¼šè¯¥è¡¨ä¸­ç ä¸ºï¼š(å­¦å·ï¼Œè¯¾ç¨‹åç§°) ä¸»å±æ€§ï¼šç å±æ€§ç»„ä¸­çš„æ‰€æœ‰å±æ€§ éä¸»å±æ€§ï¼šé™¤è¿‡ç å±æ€§ç»„çš„å±æ€§ å…¶å® 2NF å°±æ˜¯åœ¨ 1NF åŸºç¡€ä¸Šæ¶ˆé™¤éä¸»å±æ€§å¯¹ä¸»ç çš„éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼Œä¸Šè¡¨ä¸­çš„ç ä¸º(å­¦å·ï¼Œè¯¾ç¨‹åç§°)ï¼Œåªæœ‰åˆ†æ•°å®Œå…¨ä¾èµ–è¯¥ç ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹†åˆ†è¡¨å¦‚ä¸‹ ç¬¬ä¸‰èŒƒå¼(3NF)ï¼šåœ¨2NFåŸºç¡€ä¸Šï¼Œä»»ä½•éä¸»å±æ€§ä¸ä¾èµ–äºå…¶å®ƒéä¸»å±æ€§(åœ¨2NFåŸºç¡€ä¸Šæ¶ˆé™¤ä¼ é€’ä¾èµ–)ï¼Œåœ¨å­¦ç”Ÿè¡¨ä¸­å­˜åœ¨å­¦å· =&gt; ç³»å =&gt; ç³»ä¸»ä»»çš„ä¼ é€’ä¾èµ–ï¼Œæ‰€ä»¥å†æ¬¡æ‹†åˆ†è¡¨ ä¸‰å¤§èŒƒå¼å°ç»“ 1NF: åŸå­æ€§ï¼Œè¡¨ä¸­æ¯åˆ—ä¸å¯å†æ‹†åˆ†ã€‚ 2NF: ä¸äº§ç”Ÿå±€éƒ¨ä¾èµ–ï¼Œä¸€å¼ è¡¨åªæè¿°ä¸€ä»¶äº‹æƒ… 3NF: ä¸äº§ç”Ÿä¼ é€’ä¾èµ–ï¼Œè¡¨ä¸­æ¯ä¸€åˆ—éƒ½ç›´æ¥ä¾èµ–äºä¸»é”®ã€‚è€Œä¸æ˜¯é€šè¿‡å…¶å®ƒåˆ—é—´æ¥ä¾èµ–äºä¸»é”®ã€‚ å¤šè¡¨æŸ¥è¯¢å¤šè¡¨æŸ¥è¯¢é¡¾åæ€ä¹‰å°±æ˜¯åŒæ—¶æŸ¥è¯¢å¤šå¼ è¡¨ï¼Œå‡è®¾æœ‰ä¸‹é¢è¿™ä¹ˆä¸¤å¼ è¡¨(ç¬¬ä¸€å¼ æ˜¯èŒå‘˜(emp)è¡¨ï¼Œç¬¬äºŒå¼ æ˜¯éƒ¨é—¨(dept)è¡¨) ç°åœ¨æˆ‘ä»¬åŒæ—¶æŸ¥è¯¢è¿™ä¸¤å¼ è¡¨ SELECT *FROM emp, dept; æˆ‘ä»¬å°†å¾—åˆ°ä¸‹é¢è¿™ä¹ˆä¸€å¼ è¡¨ è¿™å¼ è¡¨çš„ç»“æœæ˜¯ä¸¤å¼ è¡¨ä¸€ä¸€ç»„åˆå¾—åˆ°çš„ï¼Œå¾—åˆ°çš„ç»“æœä¹Ÿå«åšç¬›å¡å°”ç§¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆæœ‰çš„ä¿¡æ¯éƒ½æ˜¯é”™è¯¯çš„ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯å»é™¤è¿™äº›æ— ç”¨çš„ä¿¡æ¯ã€‚ å†…è¿æ¥ç”¨å·¦è¾¹è¡¨çš„è®°å½•å»åŒ¹é…å³è¾¹è¡¨çš„è®°å½•ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶çš„åˆ™æ˜¾ç¤ºã€‚å†…è¿æ¥åˆ†ä¸º éšå¼å†…è¿æ¥ ä½¿ç”¨ WHERE æ¡ä»¶æŒ‡å®š æ˜¾ç¤ºå†…è¿æ¥ ä½¿ç”¨ INNER JOIN ... ON è¯­å¥ æ¯”å¦‚ç°åœ¨æˆ‘è¦åœ¨ä¸Šé¢çš„ç¬›å¡å°”ç§¯ä¸­ç­›é€‰å‡º emp è¡¨å¤–é”® dept_id ç­‰äºä¸»è¡¨ä¸»é”® id çš„ï¼Œé‚£ä¹ˆåˆ†åˆ«ä½¿ç”¨éšå¼å†…è¿æ¥å’Œæ˜¾å¼å¤–è¿æ¥çš„å†™æ³•ä¸º #éšå¼å†™æ³•SELECT *FROM emp, deptWHERE emp.dept_id = dept.id; #æ˜¾å¼å†™æ³•SELECT * FROM emp INNER JOIN dept ON emp.dept_id = dept.id; å¤–è¿æ¥ä¸ºäº†æ¼”ç¤ºå¤–è¿æ¥ï¼Œåœ¨ä¸Šé¢çš„éƒ¨é—¨è¡¨ä¸­æ–°åŠ å…¥ä¸€ä¸ªé”€å”®éƒ¨ å¤–è¿æ¥åˆ†ä¸º å·¦å¤–è¿æ¥ å³å¤–è¿æ¥ ä¸¤è€…åªè¦æŒæ¡ä¸€ç§å³å¯ï¼Œå› ä¸ºç”¨å¦ä¸€ç§æ—¶ï¼Œå°†äºŒè¡¨çš„é¡ºåºäº¤æ¢å³å¯ã€‚é‚£ä»€ä¹ˆæ˜¯å·¦å¤–è¿æ¥ï¼Œå°±æ˜¯åœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šï¼Œä»¥å·¦è¡¨ä¸ºåŸºå‡†ï¼Œæ˜¾ç¤ºå·¦è¡¨çš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚æœå³è¡¨æ²¡æœ‰å¯¹åº”çš„å†…å®¹ï¼Œé‚£ä¹ˆæ˜¾ç¤ºä¸º NULLï¼Œç°åœ¨æˆ‘ä»¬è¿›è¡Œä¸€æ¬¡å†…è¿æ¥æŸ¥è¯¢ SELECT * FROM dept INNER JOIN emp e ON e.dept_id = dept.id; # eæ˜¯empçš„åˆ«å ç°åœ¨æˆ‘ä»¬è¿›è¡Œä¸€æ¬¡å·¦å¤–è¿æ¥æŸ¥è¯¢ SELECT * FROM dept LEFT JOIN emp e ON dept.id = e.dept_id; å› ä¸ºå·¦å¤–è¿æ¥æŸ¥è¯¢æ˜¯ä»¥å·¦è¡¨(dept)ä¸ºåŸºå‡†ï¼Œå·¦è¡¨çš„å†…å®¹ä¼šå…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥ï¼Œå³é”€å”®éƒ¨ä¼šè¢«æŸ¥è¯¢å‡ºæ¥ï¼Œè€Œå¯¹åº”çš„å‘˜å·¥è¡¨æ²¡æœ‰å¯¹åº”çš„å…ƒç´ ï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºç©º è€Œå³å¤–è¿æ¥ä¸å·¦å¤–è¿æ¥ç›¸åï¼Œæ˜¯ä»¥å³è¡¨ä¸ºåŸºå‡†ï¼Œç°åœ¨å¦‚æœæˆ‘ä»¬å°†äºŒè¡¨çš„ä½ç½®äº¤æ¢ï¼Œå¹¶ä¸”ä½¿ç”¨å³å¤–è¿æ¥æŸ¥è¯¢ï¼Œå¾—åˆ°çš„ç»“æœä¸ä¸Šé¢çš„ä¼šæ˜¯ç›¸åŒçš„ SELECT * FROM emp e RIGHT JOIN dept d ON e.dept_id = d.id; å­æŸ¥è¯¢æ‰€è°“çš„å­æŸ¥è¯¢æ˜¯æŒ‡å°†æŸ¥è¯¢å¾—åˆ°çš„ç»“æœä½œä¸ºå¦ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„æ¡ä»¶ï¼Œæ¯”å¦‚æˆ‘æƒ³æŸ¥å‡ºè–ªèµ„æœ€é«˜å‘˜å·¥çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆæ€è·¯å¦‚ä¸‹ æŸ¥å‡ºæœ€é«˜çš„è–ªèµ„æ˜¯å¤šå°‘ åŒ¹é…è°çš„è–ªèµ„ä¸ºæœ€é«˜è–ªèµ„ é‚£ä¹ˆç¬¬ä¸€æ­¥æŸ¥å‡ºçš„æœ€é«˜è–ªèµ„å°±ä½œä¸ºäº†ç¬¬äºŒæ­¥è¿›è¡ŒåŒ¹é…çš„æ¡ä»¶ SELECT * FROM emp t1 WHERE t1.salary = (SELECT max(salary) FROM emp); å­æŸ¥è¯¢å¾—åˆ°çš„ç»“æœæœ‰å¤šç§ï¼Œä¾‹å¦‚ å•è¡Œå•åˆ— å•åˆ—å¤šè¡Œ å¤šè¡Œå¤šåˆ—çš„å€¼(è¡¨) å½“ç»“æœæ˜¯å•ä¸ªåˆ—çš„å€¼çš„æ—¶å€™ï¼Œè‚¯å®šåœ¨ WHERE åé¢ä½œä¸ºæ¡ä»¶ï¼Œçˆ¶æŸ¥è¯¢ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå¦‚ï¼š&gt; ã€&lt;ã€&lt;&gt;ã€ = ç­‰ã€‚ç°åœ¨æˆ‘è¦æŸ¥è¯¢å°äºå¹³å‡è–ªèµ„çš„äººæœ‰å“ªäº›ï¼Œé‚£ä¹ˆå¯ä»¥è¿™ä¹ˆå†™ SELECT * FROM emp t1 WHERE t1.salary &lt; (SELECT avg(salary) FROM emp); å­æŸ¥è¯¢ç»“æœæ˜¯å•åˆ—å¤šè¡Œï¼Œç»“æœé›†ç±»ä¼¼äºä¸€ä¸ªæ•°ç»„ï¼Œçˆ¶æŸ¥è¯¢ä½¿ç”¨ IN è¿ç®—ç¬¦ã€‚æŸ¥è¯¢å·¥èµ„å¤§äº5000çš„å‘˜å·¥ï¼Œæ¥è‡ªäºå“ªäº›éƒ¨é—¨ SELECT t1.nameFROM dept t1WHERE t1.id IN (SELECT emp.dept_id FROM emp WHERE emp.salary &gt; 5000); å­æŸ¥è¯¢ç»“æœåªè¦æ˜¯å¤šåˆ—ï¼Œè‚¯å®šåœ¨FROMåé¢ä½œä¸ºè¡¨ SELECT æŸ¥è¯¢å­—æ®µ FROM ï¼ˆå­æŸ¥è¯¢ï¼‰è¡¨åˆ«å WHERE æ¡ä»¶; å­æŸ¥è¯¢ä½œä¸ºè¡¨éœ€è¦å–åˆ«åï¼Œå¦åˆ™è¿™å¼ è¡¨æ²¡æœ‰åç§°åˆ™æ— æ³•è®¿é—®è¡¨ä¸­çš„å­—æ®µã€‚æŸ¥è¯¢å‡º2011å¹´ä»¥åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯ï¼ŒåŒ…æ‹¬éƒ¨é—¨åç§° SELECT *FROM (SELECT * FROM db1.emp t1 WHERE t1.join_date &gt; \"2011-1-1\") t3, dept dWHERE d.id = t3.dept_id; äº‹åŠ¡æ‰€è°“äº‹åŠ¡æ˜¯æŒ‡ä¸€ç³»åˆ—çš„æ“ä½œï¼Œè¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚æ¯”å¦‚è½¬è´¦ï¼Œä¸èƒ½æˆ‘è¿™é‡Œè½¬è´¦æˆåŠŸï¼Œä½ é‚£ä¹ˆæ”¶ä¸åˆ°é’±ï¼Œé‚£ä¹ˆé’±å°±è¿™ä¹ˆæ¶ˆå¤±äº†? å¦‚æœäº‹åŠ¡æ‰§è¡ŒæˆåŠŸäº†ï¼Œé‚£ä¹ˆå°±æäº¤ï¼Œå¦‚æœæœ‰ä¸€æ¡å¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œå›æ»š(å³å›åˆ°ä¹‹å‰çš„çŠ¶æ€)ã€‚ä¸äº‹åŠ¡æœ‰å…³çš„ä¸‰æ¡è¯­å¥ä¸º start transaction å¼€å¯äº‹åŠ¡ commit æäº¤äº‹åŠ¡ å¯æ‰‹åŠ¨æäº¤ï¼Œä¹Ÿå¯è®¾ç½®ä¸ºè‡ªåŠ¨æäº¤ roll back å›æ»šäº‹åŠ¡ å½“äº‹åŠ¡æ‰§è¡Œå¤±è´¥æ—¶è‡ªåŠ¨è‡ªåŠ¨ï¼Œä¹Ÿå¯æ‰‹åŠ¨æ‰§è¡Œ å‡è®¾æœ‰è¿™ä¹ˆä¸€å¼ è¡¨ï¼Œé‡Œé¢å­˜å‚¨çš„æ˜¯ç”¨æˆ·åå’Œä½™é¢ä¿¡æ¯ ç°åœ¨å¼ ä¸‰è¦å‘æå››è½¬è´¦ 500 å—ï¼Œå¦‚ä¸‹ -- å¼ ä¸‰è´¦å·-500 update account set balance = balance - 500 where name='å¼ ä¸‰'; -- æå››è´¦å·+500 update account set balance = balance + 500 where name='æå››'; å¦‚æœæˆ‘ä»¬ä¸å¼€å¯äº‹åŠ¡çš„è¯ï¼Œé‚£ä¹ˆå½“å¼ ä¸‰è½¬äº† 500 å—æ—¶ï¼Œè¿™æ—¶æœåŠ¡å™¨å´©æºƒäº†ï¼Œæå››æ²¡æœ‰æ”¶åˆ°é’±ï¼Œä½†æ˜¯é’±è¿˜æ˜¯å°‘äº†ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸èƒ½å‘ç”Ÿçš„ï¼Œæˆ‘ä»¬åº”å½“å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿™ä¸¤ä¸ªæ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚ START TRANSACTION; -- å¼€å¯ä¸€ä¸ªäº‹åŠ¡-- å¼ ä¸‰è´¦å·-500update account set balance = balance - 500 where name='å¼ ä¸‰';-- æå››è´¦å·+500update account set balance = balance + 500 where name='æå››';COMMIT; -- æäº¤äº‹åŠ¡ å¼€å¯äº‹åŠ¡åï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½åœ¨ä¸´æ—¶æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œcommit æ“ä½œæ˜¯å°†ä¸´æ—¶æ—¥å¿—ä¸­çš„å†…å®¹å†™åˆ°æ•°æ®åº“çš„å­˜å‚¨å¼•æ“ä¸­ï¼Œæ‰€ä»¥åœ¨æäº¤äº‹åŠ¡ä¹‹å‰ï¼Œæ˜¯ä¸ä¼šå¯¹æ•°æ®åº“ä¸­çš„å†…å®¹è¿›è¡Œä¿®æ”¹çš„ã€‚è€Œ rollback åˆ™æ˜¯æ¸…ç©ºä¸´æ—¶æ—¥å¿—æ–‡ä»¶ï¼Œä¹‹å‰æ²¡æœ‰è¿›è¡Œæäº¤çš„å†…å®¹å…¨éƒ¨æ¸…é™¤ã€‚ äº‹åŠ¡çš„æ­¥éª¤å¯ä»¥ç®€è¿°ä¸ºä¸‹é¢å‡ æ­¥ å®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“æœåŠ¡å™¨ï¼Œåˆ›å»ºè¿æ¥æ—¶åˆ›å»ºæ­¤ç”¨æˆ·ä¸´æ—¶æ—¥å¿—æ–‡ä»¶ å¼€å¯äº‹åŠ¡ä»¥åï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½ä¼šå…ˆå†™å…¥åˆ°ä¸´æ—¶æ—¥å¿—æ–‡ä»¶ä¸­ æ‰€æœ‰çš„æŸ¥è¯¢æ“ä½œä»è¡¨ä¸­æŸ¥è¯¢ï¼Œä½†ä¼šç»è¿‡æ—¥å¿—æ–‡ä»¶åŠ å·¥åæ‰è¿”å› å¦‚æœäº‹åŠ¡æäº¤åˆ™å°†æ—¥å¿—æ–‡ä»¶ä¸­çš„æ•°æ®å†™åˆ°è¡¨ä¸­ï¼Œå¦åˆ™æ¸…ç©ºæ—¥å¿—æ–‡ä»¶ äº‹åŠ¡çš„æäº¤åˆ†ä¸ºè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ï¼Œåœ¨ MySQL å‘½ä»¤è¡Œçš„é»˜è®¤è®¾ç½®ä¸‹ï¼Œäº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ‰§è¡Œ SQL è¯­å¥åå°±ä¼šé©¬ä¸Šæ‰§è¡Œ COMMIT æ“ä½œã€‚å› æ­¤è¦æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡åŠ¡é¡»ä½¿ç”¨å‘½ä»¤ BEGIN æˆ– START TRANSACTIONï¼Œæˆ–è€…æ‰§è¡Œå‘½ä»¤ SET AUTOCOMMIT=0ï¼Œç”¨æ¥ç¦æ­¢ä½¿ç”¨å½“å‰ä¼šè¯çš„è‡ªåŠ¨æäº¤ã€‚ SET AUTOCOMMIT=0 ç¦æ­¢è‡ªåŠ¨æäº¤ SET AUTOCOMMIT=1 å¼€å¯è‡ªåŠ¨æäº¤ äº‹åŠ¡çš„ç‰¹æ€§äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ ACID åŸå­æ€§(Atomicity) æ¯ä¸ªäº‹åŠ¡éƒ½æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¸å¯å†æ‹†åˆ†ï¼Œäº‹åŠ¡ä¸­æ‰€æœ‰çš„ SQL è¯­å¥è¦ä¹ˆéƒ½æ‰§è¡ŒæˆåŠŸï¼Œ è¦ä¹ˆéƒ½å¤±è´¥ã€‚ ä¸€è‡´æ€§(Consistency) äº‹åŠ¡åœ¨æ‰§è¡Œå‰æ•°æ®åº“çš„çŠ¶æ€ä¸æ‰§è¡Œåæ•°æ®åº“çš„çŠ¶æ€ä¿æŒä¸€è‡´ã€‚å¦‚ï¼šè½¬è´¦å‰ 2 ä¸ªäººçš„ æ€»é‡‘é¢æ˜¯ 2000ï¼Œè½¬è´¦å 2 ä¸ªäººæ€»é‡‘é¢ä¹Ÿæ˜¯ 2000 éš”ç¦»æ€§(Isolation) äº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´ä¸åº”è¯¥ç›¸äº’å½±å“ï¼Œæ‰§è¡Œæ—¶ä¿æŒéš”ç¦»çš„çŠ¶æ€ã€‚ æŒä¹…æ€§(Durability) ä¸€æ—¦äº‹åŠ¡æ‰§è¡ŒæˆåŠŸï¼Œå¯¹æ•°æ®åº“çš„ä¿®æ”¹æ˜¯æŒä¹…çš„ã€‚å°±ç®—å…³æœºï¼Œä¹Ÿæ˜¯ä¿å­˜ä¸‹æ¥çš„ã€‚ è¿™ç¯‡æ–‡ç« MySQLäº‹åŠ¡ï¼šACIDç‰¹æ€§çš„å®ç°åŸç†æ€»ç»“åˆ†æè¯¦ç»†è®²è§£äº† MySQL çš„äº‹åŠ¡ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä¸å¤šåšä»‹ç»ï¼Œå› ä¸ºè®²çš„æ²¡äººå®¶å¥½ã€‚ äº‹åŠ¡çš„éš”ç¦»çº§åˆ«äº‹åŠ¡åœ¨æ“ä½œæ—¶çš„ç†æƒ³çŠ¶æ€æ˜¯æ‰€æœ‰çš„äº‹åŠ¡ä¹‹é—´ä¿æŒéš”ç¦»ï¼Œäº’ä¸å½±å“ã€‚ä½†æ˜¯å› ä¸ºå¹¶å‘æ“ä½œï¼Œå¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œå¯èƒ½å¼•å‘å¹¶å‘è®¿é—®çš„é—®é¢˜ï¼Œå¦‚ è„è¯» ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡ä¸­å°šæœªæäº¤çš„æ•°æ® æ¯”å¦‚æå››å‘å¼ ä¸‰è½¬äº† 500 å—ï¼Œä½†æ˜¯æ²¡æœ‰æäº¤ï¼Œè¿™æ—¶å¼ ä¸‰è¯»å–æ•°æ®ï¼Œå‘ç°å·²ç»åˆ°è´¦ 500 å—ï¼Œè·Ÿæå››è¯´åˆ°è´¦äº†ï¼Œè¿™æ—¶æå››è¿›è¡Œ roll back ä¸å¯é‡å¤è¯» ä¸€ä¸ªäº‹åŠ¡ä¸­ä¸¤æ¬¡è¯»å–çš„æ•°æ®å†…å®¹ä¸ä¸€è‡´ï¼Œè¦æ±‚çš„æ˜¯ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–æ—¶æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯äº‹åŠ¡ update æ—¶å¼•å‘çš„é—®é¢˜ ä¸¤æ¬¡æŸ¥è¯¢è¾“å‡ºçš„ç»“æœä¸åŒï¼Œåˆ°åº•å“ªæ¬¡æ˜¯å¯¹çš„? ä¸çŸ¥é“ä»¥å“ªæ¬¡ä¸ºå‡†ã€‚ æœ‰çš„æ—¶å€™è¿™ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå½“ç„¶æ˜¯åé¢çš„ä¸ºå‡†ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼Œæ¯”å¦‚é“¶è¡Œç¨‹åºéœ€è¦å°†æŸ¥è¯¢ç»“æœåˆ†åˆ«è¾“å‡ºåˆ°ç”µè„‘å±å¹•å’Œå‘çŸ­ä¿¡ç»™å®¢ æˆ·ï¼Œç»“æœåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­é’ˆå¯¹ä¸åŒçš„è¾“å‡ºç›®çš„åœ°è¿›è¡Œçš„ä¸¤æ¬¡æŸ¥è¯¢ä¸ä¸€è‡´ï¼Œå¯¼è‡´æ–‡ä»¶å’Œå±å¹•ä¸­çš„ç»“æœä¸ä¸€è‡´ï¼Œé“¶è¡Œå·¥ä½œ äººå‘˜å°±ä¸çŸ¥é“ä»¥å“ªä¸ªä¸ºå‡†äº†ã€‚ è„è¯»ä¸ä¸å¯é‡å¤è¯»çš„åŒºåˆ«åœ¨äºï¼šå‰è€…è¯»åˆ°çš„æ˜¯å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œåè€…è¯»åˆ°çš„æ˜¯å…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ•°æ® å¹»è¯» ä¸€ä¸ªäº‹åŠ¡ä¸­ä¸¤æ¬¡è¯»å–çš„æ•°æ®çš„æ•°é‡ä¸ä¸€è‡´ï¼Œè¦æ±‚åœ¨ä¸€ä¸ªäº‹åŠ¡å¤šæ¬¡è¯»å–çš„æ•°æ®çš„æ•°é‡æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯ insert æˆ– delete æ—¶å¼•å‘çš„é—®é¢˜ å¹»è¯»æ˜¯äº‹åŠ¡éç‹¬ç«‹æ‰§è¡Œæ—¶å‘ç”Ÿçš„ä¸€ç§ç°è±¡ã€‚ä¾‹å¦‚äº‹åŠ¡ T1 å¯¹ä¸€ä¸ªè¡¨ä¸­æ‰€æœ‰çš„è¡Œçš„æŸä¸ªæ•°æ®é¡¹åšäº†ä» â€œ1â€ ä¿®æ”¹ä¸º â€œ2â€ çš„æ“ä½œï¼Œè¿™æ—¶äº‹åŠ¡ T2 åˆå¯¹è¿™ä¸ªè¡¨ä¸­æ’å…¥äº†ä¸€è¡Œæ•°æ®é¡¹ï¼Œè€Œè¿™ä¸ªæ•°æ®é¡¹çš„æ•°å€¼è¿˜æ˜¯ä¸º â€œ1â€ å¹¶ä¸”æäº¤ç»™æ•°æ®åº“ã€‚è€Œæ“ä½œäº‹åŠ¡ T1 çš„ç”¨æˆ·å¦‚æœå†æŸ¥çœ‹åˆšåˆšä¿®æ”¹çš„æ•°æ®ï¼Œä¼šå‘ç°è¿˜æœ‰ä¸€è¡Œæ²¡æœ‰ä¿®æ”¹ï¼Œå…¶å®è¿™è¡Œæ˜¯ä»äº‹åŠ¡ T2 ä¸­æ·»åŠ çš„ï¼Œå°±å¥½åƒäº§ç”Ÿå¹»è§‰ä¸€æ ·ï¼Œè¿™å°±æ˜¯å‘ç”Ÿäº†å¹»è¯»ã€‚ å¹»è¯»å’Œä¸å¯é‡å¤è¯»éƒ½æ˜¯è¯»å–äº†å¦ä¸€æ¡å·²ç»æäº¤çš„äº‹åŠ¡(è¿™ç‚¹å°±è„è¯»ä¸åŒ)ï¼Œæ‰€ä¸åŒçš„æ˜¯ä¸å¯é‡å¤è¯»æŸ¥è¯¢çš„éƒ½æ˜¯åŒä¸€ä¸ªæ•°æ®é¡¹ï¼Œè€Œå¹»è¯»é’ˆå¯¹çš„æ˜¯ä¸€æ‰¹æ•°æ®æ•´ä½“(æ¯”å¦‚æ•°æ®çš„ä¸ªæ•°)ã€‚ MySQLæ•°æ®åº“æœ‰å››ç§éš”ç¦»çº§åˆ« read uncommitted ä¸Šé¢ä¸‰ç§é—®é¢˜éƒ½æœ‰å¯èƒ½å‘ç”Ÿ read committed ä¸å¯èƒ½å‘ç”Ÿè„è¯»ï¼Œå› ä¸ºåªæœ‰è¯»åˆ°å·²æäº¤çš„æ•°æ® repeatable read å¯èƒ½å‘ç”Ÿå¹»è¯» è¿™æ—¶ MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ« serializable æ‰€æœ‰çš„é—®é¢˜éƒ½ä¸ä¼šå‘ç”Ÿ ä¸Šé¢çš„çº§åˆ«æœ€ä½ï¼Œä¸‹é¢çš„çº§åˆ«æœ€é«˜ï¼Œéš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œæ€§èƒ½è¶Šå·®ï¼Œå®‰å…¨æ€§è¶Šé«˜ã€‚åœ¨ MySQL æ•°æ®åº“ä¸­è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ« set [glogal | session] transaction isolation level éš”ç¦»çº§åˆ«åç§°;set tx_isolation='éš”ç¦»çº§åˆ«åç§°'; æƒé™ç®¡ç†æˆ‘ä»¬ç°åœ¨é»˜è®¤ä½¿ç”¨çš„éƒ½æ˜¯ root ç”¨æˆ·ï¼šè¶…çº§ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰å…¨éƒ¨çš„æƒé™ã€‚ä½†æ˜¯ä¸€ä¸ªå…¬å¸é‡Œé¢çš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šé¢å¯èƒ½åŒæ—¶è¿è¡Œç€å¾ˆå¤šä¸ªé¡¹ç›®çš„æ•°æ®åº“ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥å¯ä»¥æ ¹æ®ä¸åŒçš„é¡¹ç›®å»ºç«‹ä¸åŒçš„ç”¨æˆ·ï¼Œåˆ†é…ä¸åŒçš„æƒé™æ¥ç®¡ç†å’Œç»´æŠ¤æ•°æ®åº“ã€‚ åˆ›å»ºç”¨æˆ·CREATE USER 'ç”¨æˆ·å'@'ä¸»æœºå' IDENTIFIED BY 'å¯†ç '; â€˜ç”¨æˆ·åâ€™ å°†åˆ›å»ºçš„ç”¨æˆ·å â€˜ä¸»æœºåâ€™ æŒ‡å®šè¯¥ç”¨æˆ·åœ¨å“ªä¸ªä¸»æœºä¸Šå¯ä»¥ç™»é™†ï¼Œå¦‚æœæ˜¯æœ¬åœ°ç”¨æˆ·å¯ç”¨ localhostï¼Œå¦‚æœæƒ³è®©è¯¥ç”¨æˆ·å¯ä»¥ ä»ä»»æ„è¿œç¨‹ä¸»æœºç™»é™†ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦% è¯¥ç”¨æˆ·çš„ç™»é™†å¯†ç ï¼Œå¯†ç å¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™è¯¥ç”¨æˆ·å¯ä»¥ä¸éœ€è¦å¯†ç ç™»é™†æœåŠ¡å™¨ #åˆ›å»º user1 ç”¨æˆ·ï¼Œåªèƒ½åœ¨ localhost è¿™ä¸ªæœåŠ¡å™¨ç™»å½• mysql æœåŠ¡å™¨ï¼Œå¯†ç ä¸º 123 create user 'user1'@'localhost' identified by '123'; #åˆ›å»º user2 ç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•ç”µè„‘ä¸Šç™»å½• mysql æœåŠ¡å™¨ï¼Œå¯†ç ä¸º 123 create user 'user2'@'%' identified by '123'; åˆ›å»ºçš„ç”¨æˆ·åéƒ½åœ¨ mysql æ•°æ®åº“ä¸­çš„ user è¡¨ä¸­å¯ä»¥æŸ¥çœ‹åˆ°ï¼Œå¯†ç ç»è¿‡äº†åŠ å¯†ã€‚ æˆäºˆæƒé™GRANT æƒé™ 1, æƒé™ 2... ON æ•°æ®åº“å.è¡¨å TO 'ç”¨æˆ·å'@'ä¸»æœºå'; GRANTâ€¦ONâ€¦TO æˆæƒå…³é”®å­— æƒé™ æˆäºˆç”¨æˆ·çš„æƒé™ï¼Œå¦‚ CREATEã€ALTERã€SELECTã€INSERTã€UPDATE ç­‰ã€‚å¦‚æœè¦æˆ äºˆæ‰€æœ‰çš„æƒé™åˆ™ä½¿ç”¨ ALL æ•°æ®åº“å.è¡¨å è¯¥ç”¨æˆ·å¯ä»¥æ“ä½œå“ªä¸ªæ•°æ®åº“çš„å“ªäº›è¡¨ã€‚å¦‚æœè¦æˆäºˆè¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„ç›¸åº”æ“ä½œ æƒé™åˆ™å¯ç”¨ * è¡¨ç¤ºï¼Œå¦‚ *.* â€˜ç”¨æˆ·åâ€˜@â€™ä¸»æœºåâ€™ ç»™å“ªä¸ªç”¨æˆ·æˆæƒ #ç»™ user1 ç”¨æˆ·åˆ†é…å¯¹ test è¿™ä¸ªæ•°æ®åº“æ“ä½œçš„æƒé™ï¼šåˆ›å»ºè¡¨ï¼Œä¿®æ”¹è¡¨ï¼Œæ’å…¥è®°å½•ï¼Œæ›´æ–°è®°å½•ï¼ŒæŸ¥è¯¢ grant create,alter,insert,update,select on test.* to 'user1'@'localhost'; #ç»™ user2 ç”¨æˆ·åˆ†é…æ‰€æœ‰æƒé™ï¼Œå¯¹æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨ grant all on *.* to 'user2'@'%'; æ’¤é”€æƒé™REVOKE æƒé™ 1, æƒé™ 2... ON æ•°æ®åº“.è¡¨å from 'ç”¨æˆ·å'@'ä¸»æœºå'; REVOKEâ€¦ONâ€¦FROM æ’¤é”€æˆæƒçš„å…³é”®å­— æƒé™ ç”¨æˆ·çš„æƒé™ï¼Œå¦‚ CREATEã€ALTERã€SELECTã€INSERTã€UPDATE ç­‰ï¼Œæ‰€æœ‰çš„æƒé™åˆ™ä½¿ç”¨ ALL æ•°æ®åº“å.è¡¨å å¯¹å“ªäº›æ•°æ®åº“çš„å“ªäº›è¡¨ï¼Œå¦‚æœè¦å–æ¶ˆè¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„æ“ä½œæƒé™åˆ™å¯ç”¨*è¡¨ ç¤ºï¼Œå¦‚*.* â€˜ç”¨æˆ·åâ€˜@â€™ä¸»æœºåâ€™ ç»™å“ªä¸ªç”¨æˆ·æ’¤é”€ #æ’¤é”€ user1 ç”¨æˆ·å¯¹ test æ•°æ®åº“æ‰€æœ‰è¡¨çš„æ“ä½œçš„æƒé™ revoke all on test.* from 'user1'@'localhost'; æŸ¥çœ‹æƒé™SHOW GRANTS FOR 'ç”¨æˆ·å'@'ä¸»æœºå'; SHOW GRANTS FOR 'root'@'localhost'; åˆ é™¤ç”¨æˆ·DROP USER 'ç”¨æˆ·å'@'ä¸»æœºå'; ä¿®æ”¹ç®¡ç†å‘˜å¯†ç å¦‚æœå¿˜äº†åŸæ¥çš„ç®¡ç†å‘˜å¯†ç  cmd --&gt; net stop mysql åœæ­¢ mysql æœåŠ¡ éœ€è¦ç®¡ç†å‘˜è¿è¡Œè¯¥ cmd ä½¿ç”¨æ— éªŒè¯æ–¹å¼å¯åŠ¨ mysql æœåŠ¡ï¼šmysqld --skip-grant-tables æ‰“å¼€æ–°çš„ cmd çª—å£,ç›´æ¥è¾“å…¥ mysql å‘½ä»¤ï¼Œæ•²å›è½¦ã€‚å°±å¯ä»¥ç™»å½•æˆåŠŸ use mysql; update user set password = password(&#39;ä½ çš„æ–°å¯†ç &#39;) where user = &#39;root&#39;; å…³é—­ä¸¤ä¸ªçª—å£ æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œæ‰‹åŠ¨ç»“æŸ mysqld.exe çš„è¿›ç¨‹ å¯åŠ¨ mysql æœåŠ¡ ä½¿ç”¨æ–°å¯†ç ç™»å½•ã€‚ å¦‚æœè®°å¾—åŸæ¥çš„å¯†ç  mysqladmin -uroot -p password æ–°å¯†ç  #éœ€è¦åœ¨æœªç™»é™† MySQL çš„æƒ…å†µä¸‹æ“ä½œï¼Œæ–°å¯†ç ä¸éœ€è¦åŠ ä¸Šå¼•å·ã€‚ ä¿®æ”¹æ™®é€šç”¨æˆ·å¯†ç set password for 'ç”¨æˆ·å'@'ä¸»æœºå' = password('æ–°å¯†ç '); å‚è€ƒé“¾æ¥ æ•°æ®åº“éš”ç¦»çº§åˆ«ï¼Œæ¯ä¸ªçº§åˆ«ä¼šå¼•å‘ä»€ä¹ˆé—®é¢˜ MySQLäº‹åŠ¡ï¼šACIDç‰¹æ€§çš„å®ç°åŸç†æ€»ç»“åˆ†æ MySQLæ•°æ®æŸ¥è¯¢ä¹‹å¤šè¡¨æŸ¥è¯¢ MySQLæ’å…¥ä¸­æ–‡é”™è¯¯","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"MySQL","slug":"MySQL","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/MySQL/"}]},{"title":"Java Webç¬”è®°","date":"2019-08-19T16:00:00.000Z","path":"/JavaWeb/","text":"TomcatWebæœåŠ¡å™¨è½¯ä»¶ æœåŠ¡å™¨ï¼šå®‰è£…äº†æœåŠ¡å™¨è½¯ä»¶çš„è®¡ç®—æœº æœåŠ¡å™¨è½¯ä»¶ï¼šæ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚ï¼Œåšå‡ºå“åº” WebæœåŠ¡å™¨è½¯ä»¶ï¼šç”¨æˆ·é€šè¿‡æµè§ˆå™¨è¿›è¡Œè®¿é—®æˆ‘ä»¬éƒ¨ç½²çš„é¡¹ç›® webLogicï¼šoracleå…¬å¸ï¼Œå¤§å‹JavaEEæœåŠ¡å™¨ï¼Œæ”¶è´¹ï¼Œæ”¯æŒæ‰€æœ‰çš„JavaEEè§„èŒƒ webSphereï¼šIBMå…¬å¸ï¼Œå¤§å‹JavaEEæœåŠ¡å™¨ï¼Œæ”¶è´¹ï¼Œæ”¯æŒæ‰€æœ‰çš„JavaEEè§„èŒƒ JBOSSï¼šJBOSSå…¬å¸ï¼Œå¤§å‹JavaEEæœåŠ¡å™¨ï¼Œæ”¶è´¹ï¼Œæ”¯æŒæ‰€æœ‰çš„JavaEEè§„èŒƒ Tomcatï¼šApacheåŸºé‡‘ç»„ç»‡ï¼Œä¸­å°å‹JavaEEæœåŠ¡å™¨ï¼Œä»…ä»…æ”¯æŒå°‘é‡çš„JavaEEè§„èŒƒï¼Œå¼€æºçš„ï¼Œå…è´¹çš„ ä¸‹è½½ã€å®‰è£…ã€å¸è½½ä¸‹è½½ï¼štomcat.apache.org(Tomcat 8) å®‰è£…ï¼šè§£å‹å‹ç¼©åŒ…å³å¯(è·¯å¾„ä¸è¦å«ä¸­æ–‡) å¸è½½ï¼šåˆ é™¤æ–‡ä»¶å¤¹ bin å¯æ‰§è¡Œæ–‡ä»¶conf é…ç½®æ–‡ä»¶lib ä¾èµ–jaråŒ…logs æ—¥å¿—æ–‡ä»¶temp ä¸´æ—¶æ–‡ä»¶webapps å­˜æ”¾webé¡¹ç›®çš„work è¿è¡Œæ—¶æ•°æ®LICENSENOTICERELEASE-NOTESRUNNING.txt å¯åŠ¨ åŒå‡»bin/startup.bat è®¿é—®ï¼š127.0.0.1:8080ï¼Œæœ‰é¡µé¢è¯´æ˜è®¿é—®æˆåŠŸ(127.0.0.1å¯å†™ä¸ºlocalhost) å¯åŠ¨é‡åˆ°çš„é—®é¢˜ é»‘çª—å£ä¸€é—ªè€Œè¿‡ åŸå› ï¼šæ²¡æœ‰é…ç½®JAVA_HOME åœ¨ç¯å¢ƒå˜é‡ä¸­æ–°å»ºJAVA_HOMEï¼Œå€¼ä¸ºjdkçš„è·¯å¾„ï¼Œä¸åŒ…æ‹¬binç›®å½• ç„¶åå°†PATHä¸­çš„â€¦/bin(jdkçš„è·¯å¾„)æ”¹ä¸º%JAVA_HOME%/bin å¯åŠ¨æŠ¥é”™ åŸå› ï¼šç«¯å£è¢«å ç”¨ï¼Œä¸¤ç§æ–¹æ³• æ‰¾åˆ°å ç”¨8080ç«¯å£çš„è¿›ç¨‹æ€æ­» ä¿®æ”¹è‡ªèº«çš„ç«¯å£å· conf/server.xmlæ–‡ä»¶ ä¿®æ”¹port ä¸€èˆ¬ä¼šå°†tomcatçš„é»˜è®¤ç«¯å£å·ä¿®æ”¹ä¸º80(æµè§ˆå™¨é»˜è®¤ç«¯å£å·) å…³é—­ æ­£å¸¸å…³é—­ shutdown.bat Ctrl + C å¼ºåˆ¶å…³é—­ éƒ¨ç½²é¡¹ç›® ç›´æ¥å°†é¡¹ç›®(è¿™é‡Œå‡è®¾ä¸ºhello)æ”¾åˆ°webappsæ–‡ä»¶å¤¹ä¸­å³å¯ */helloï¼šé¡¹ç›®çš„è®¿é—®è·¯å¾„ï¼Œè™šæ‹Ÿè·¯å¾„ ç®€åŒ–éƒ¨ç½²ï¼šæ‰“åŒ…ä¸ºwaråŒ…ï¼Œå°†waråŒ…å¤åˆ¶åˆ°webappsä¸‹ï¼ŒwaråŒ…ä¼šè‡ªåŠ¨è§£å‹ç¼© ç¼ºç‚¹ï¼šå¿…é¡»æ‹·è´åˆ°webappsä¸­ config/server.xml &lt;Host ...&gt; ... &lt;Context docBase=\"é¡¹ç›®è·¯å¾„\" path=\"è™šæ‹Ÿè·¯å¾„\" /&gt;&lt;/Host&gt; ç¼ºç‚¹ï¼šä¸å®‰å…¨ï¼Œå¼„åé…ç½®æ–‡ä»¶ /conf/Catalina/localhost åˆ›å»ºä¸€ä¸ªæ–‡ä»¶xxx.xml(ä»»æ„åç§°) ç¼–å†™&lt;Context docBase=â€é¡¹ç›®è·¯å¾„â€ /&gt; è™šæ‹Ÿç›®å½•å°±æ˜¯xmlæ–‡ä»¶çš„åç§° JavaåŠ¨æ€é¡¹ç›®çš„ç›®å½•ç»“æ„ æ ¹ç›®å½• WEB-INF web.xmlï¼šwebé¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ classesï¼šæ”¾ç½®å­—èŠ‚ç æ–‡ä»¶çš„ç›®å½• libï¼šæ”¾ç½®ä¾èµ–çš„jaråŒ… Tomcaté›†æˆåˆ°IDEAä¸­Run â€“&gt; Edit Configurations -&gt; Defaults -&gt; Tomcat Server -&gt; Local -&gt; Configure -&gt; Tomcatå®‰è£…ç›®å½• Servlet(server applet)æ¦‚å¿µServletå°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®šä¹‰äº†Javaç±»è¢«æµè§ˆå™¨è®¿é—®åˆ°(tomcat)è¯†åˆ«çš„è§„åˆ™ã€‚ å¿«é€Ÿå…¥é—¨ åˆ›å»ºJavaEEé¡¹ç›® å®šä¹‰ä¸€ä¸ªç±»å®ç°Servletæ¥å£ å®ç°æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³• é…ç½®Servlet package web;import javax.servlet.*;import java.io.IOException;public class ServletDemo01 implements Servlet &#123; @Override public void init(ServletConfig servletConfig) throws ServletException &#123; &#125; @Override public ServletConfig getServletConfig() &#123; return null; &#125; @Override public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException &#123; //åªå†™äº†è¿™ä¸€è¡Œ System.out.println(\"Hello Servlet\"); &#125; @Override public String getServletInfo() &#123; return null; &#125; @Override public void destroy() &#123; &#125;&#125; é…ç½®Servlet(web.xml) &lt;!--Servleté…ç½®--&gt;&lt;servlet&gt; &lt;servlet-name&gt;demo01&lt;/servlet-name&gt; &lt;servlet-class&gt;web.ServletDemo01&lt;/servlet-class&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;demo01&lt;/servlet-name&gt; &lt;url-pattern&gt;/demo01&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; Servletæ‰§è¡ŒåŸç† è§£æURLè¯·æ±‚è·¯å¾„ï¼Œè·å–Servletçš„èµ„æºè·¯å¾„ æŸ¥æ‰¾web.xmlä¸­æ˜¯å¦æœ‰å¯¹åº”çš„&lt;url-pattern&gt;æ ‡ç­¾å†…å®¹ æŸ¥æ‰¾&lt;servlet-class&gt;å…¨ç±»å tomcatå°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œå¹¶ä¸”åˆ›å»ºå…¶åç§° è°ƒç”¨å…¶æ–¹æ³• Servletç”Ÿå‘½å‘¨æœŸæ–¹æ³•init åœ¨Servletåˆ›å»ºæ—¶æ‰§è¡Œï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ é»˜è®¤æƒ…å†µç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶åˆ›å»ºServlet é…ç½®&lt;servlet&gt;ä¸‹çš„&lt;load-on-startup&gt;å¯ä¿®æ”¹Servletåˆ›å»ºæ—¶æœº è´Ÿæ•°ï¼Œç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶åˆ›å»º 0æˆ–æ­£æ•°ï¼ŒæœåŠ¡å™¨å¯åŠ¨æ—¶åˆ›å»º Servletæ˜¯å•ä¾‹çš„ å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®æ—¶ï¼Œå¯èƒ½å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ è§£å†³ï¼šå°½é‡ä¸è¦åœ¨Servletä¸­å®šä¹‰æˆå‘˜å˜é‡ï¼Œå®šä¹‰äº†æˆå‘˜å˜é‡ï¼Œä¹Ÿä¸è¦è¿›è¡Œèµ‹å€¼ service æä¾›æœåŠ¡çš„æ–¹æ³•ï¼Œæ¯ä¸€æ¬¡Servletè®¿é—®æ—¶æ‰§è¡Œ destroy Servletè¢«æ€æ­»æ—¶è¢«æ‰§è¡Œ(æœåŠ¡å™¨è¢«æ­£å¸¸å…³é—­æ—¶) åœ¨Servletè¢«é”€æ¯ä¹‹å‰æ‰§è¡Œ getServletConfig(äº†è§£) è·å–Servletçš„é…ç½®å¯¹è±¡ getServletInfo(äº†è§£) è·å–Servletçš„ä¿¡æ¯(ç‰ˆæœ¬ã€ä½œè€…â€¦) Servlet3.0æ³¨è§£é…ç½®Servlet3.0 æ”¯æŒæ³¨è§£é…ç½® åˆ›å»ºJavaEEé¡¹ç›®ï¼Œå‹¾é€‰servlet3.0ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¯ä»¥ä¸å‹¾é€‰web.xml å®šä¹‰ç±»å®ç°Servletæ¥å£ï¼Œå®ç°æ–¹æ³• åœ¨ç±»ä¸Šä½¿ç”¨@WebServletæ³¨è§£ @WebServlet(â€œèµ„æºè·¯å¾„â€) Servletä½“ç³»ç»“æ„Servlet â€“&gt; GenericServlet â€“&gt; HttpServlet GenericServletï¼šå°†Servletæ¥å£é™¤service()å¤–è¿›è¡Œäº†ç©ºå®ç°ï¼Œåªå¯¹service()è¿›è¡Œäº†æŠ½è±¡ HttpServletï¼šå¯¹httpåè®®å°è£…ï¼Œç®€åŒ–æ“ä½œ doGet() doPost() Servlet url_patterné…ç½®å¯ä»¥å®šä¹‰å¤šä¸ªè®¿é—®è·¯å¾„ï¼š@WebServlet({â€œ/d4â€,â€/dd4â€,â€/ddd4â€}) /xxx /xxx/xxx(ç›®å½•ç»“æ„) /xxx/*(*æ˜¯é€šé…ç¬¦ï¼Œä¼˜å…ˆçº§è¾ƒä½) *.do(*è¡¨ç¤ºä»»æ„ï¼Œ.doä»£è¡¨åç¼€åï¼Œå¦‚/demo4.do) HTTPè§„å®šè¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯çš„æ ¼å¼ã€‚ ç‰¹ç‚¹ï¼š åŸºäºTCP/IPçš„é«˜çº§åè®® é»˜è®¤ç«¯å£å·ï¼š80 åŸºäºè¯·æ±‚å“åº”æ¨¡å‹ï¼Œä¸€æ¬¡è¯·æ±‚å¯¹åº”ä¸€æ¬¡å“åº” æ— çŠ¶æ€çš„ï¼šæ¯æ¬¡è¯·æ±‚ç›¸äº’ç‹¬ç«‹ å†å²ç‰ˆæœ¬ï¼š 1.0ï¼šæ¯ä¸€æ¬¡è¯·æ±‚å“åº”ä¼šå»ºç«‹æ–°çš„è¿æ¥ 1.1ï¼šå¤ç”¨è¿æ¥ è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼ è¯·æ±‚è¡Œ è¯·æ±‚å¤´ è¯·æ±‚ç©ºè¡Œ è¯·æ±‚ä½“ è¯·æ±‚æ–¹å¼(ä¸ƒç§ï¼Œåªä»‹ç»å¸¸è§ä¸¤ç§)ï¼š GETï¼š å‚æ•°åœ¨è¯·æ±‚è¡Œä¸­ï¼Œåœ¨urlå è¯·æ±‚çš„urlé•¿åº¦æœ‰é™åˆ¶ ä¸å¤ªå®‰å…¨ POST å‚æ•°åœ¨è¯·æ±‚ä½“ä¸­ è¯·æ±‚çš„urlé•¿åº¦æ²¡æœ‰é™åˆ¶ ç›¸å¯¹å®‰å…¨ è¯·æ±‚å¤´ï¼š Hostï¼šä¸»æœº User-Agentï¼šä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯ Acceptï¼šå¯ä»¥æ¥å—ä»€ä¹ˆæ ¼å¼ Accept-Languageï¼šå¯æ¥å—çš„è¯­è¨€ Refererï¼šå‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»å“ªé‡Œæ¥ï¼Œä½œç”¨ é˜²ç›—é“¾ ç»Ÿè®¡ä¿¡æ¯ Connectionï¼škeep-alive(è¿æ¥ä¸ä¼šæ–­å¼€ï¼Œå¯å¤ç”¨) è¯·æ±‚æ­£æ–‡ï¼š å°è£…POSTè¯·æ±‚æ¶ˆæ¯çš„è¯·æ±‚å‚æ•°çš„ RequestRequestå’ŒResponseåŸç†ï¼š tomcatæ ¹æ®urlåˆ›å»ºå¯¹åº”çš„Servletå¯¹è±¡ tomcatæœåŠ¡å™¨ä¼šåˆ›å»ºrequestå’Œresponseå¯¹è±¡ï¼Œrequestå¯¹è±¡ä¸­å°è£…çš„æ˜¯è¯·æ±‚æ¶ˆæ¯æ•°æ® tomcatå°†requestå’Œresponseä¼ é€’ç»™serviceæ–¹æ³•ï¼Œå¹¶è°ƒç”¨serviceæ–¹æ³• ç¨‹åºå‘˜é€šè¿‡requestå¯¹è±¡è·å–è¯·æ±‚æ¶ˆæ¯æ•°æ®ï¼Œé€šè¿‡responseå¯¹è±¡è®¾ç½®å“åº”æ•°æ® æœåŠ¡å™¨åœ¨åšå‡ºå“åº”ä¹‹å‰ï¼Œä¼šç”¨responseå¯¹è±¡ä¸­æ‹¿ç¨‹åºå‘˜è®¾ç½®çš„å“åº”æ¶ˆæ¯æ•°æ® Requestç»§æ‰¿ç»“æ„ï¼š ServletRequest(æ¥å£) â€“&gt; HttpServletRequest(æ¥å£) â€“&gt; RequestFacade(ç±»ï¼ŒTomcatç¼–å†™) è·å–è¯·æ±‚æ¶ˆæ¯æ•°æ® è·å–è¯·æ±‚è¡Œ æ ¼å¼ï¼šGET è™šæ‹Ÿè·¯å¾„/Servletè·¯å¾„?å‚æ•° HTTP/1.1 è·å–è¯·æ±‚æ–¹å¼ï¼šgetMethod è·å–è™šæ‹Ÿç›®å½•ï¼šgetContextPath è·å–Servletè·¯å¾„ï¼šgetServletPath è·å–è¯·æ±‚å‚æ•°ï¼šgetQueryString è·å–URIï¼šgetURI è·å–URLï¼šgetURL è·å¾—åè®®åŠç‰ˆæœ¬ï¼šgetProtocol è·å–å®¢æˆ·æœºçš„IPåœ°å€ï¼šgetRemoteAddr URL &lt; URI è·å–è¯·æ±‚å¤´ é€šè¿‡è¯·æ±‚å¤´çš„åç§°è·å–è¯·æ±‚å¤´çš„å€¼ï¼šgetHeader(String name) è·å–æ‰€æœ‰çš„è¯·æ±‚å¤´åç§°ï¼šEnumeration&lt;String&gt; getHeaderNames() è·å–è¯·æ±‚ä½“ è·å–æµæ•°æ® å­—ç¬¦æµï¼šBufferedReader getReader() å­—èŠ‚æµï¼šServletInputStream getInputStream() å†ä»æµå¯¹è±¡ä¸­ å…¶ä»–åŠŸèƒ½ è·å–è¯·æ±‚æ–¹æ³•é€šç”¨æ–¹å¼(getå’Œpostéƒ½å¯ä»¥) **String getParameter(String name)**ï¼šæ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼ String[] getParameterValues(String name)ï¼šæ ¹æ®å‚æ•°åç§°è·å–å‚æ•°å€¼çš„æ•°ç»„(å¤šç”¨äºå¤é€‰æ¡†) Enumeration getParameterNames()ï¼šè·å–æ‰€æœ‰è¯·æ±‚çš„å‚æ•°åç§° Map&lt;String, String[]&gt; getParameterMapï¼šè·å–æ‰€æœ‰å‚æ•°çš„Mapé›†åˆ ä¸­æ–‡ä¹±ç é—®é¢˜ï¼š getï¼štomcat 8å·²ç»è§£å†³ postï¼šè®¾ç½®æµçš„ç¼–ç  resquest.setCharacterEncoding(â€œutf-8â€) è¯·æ±‚è½¬å‘ï¼šä¸€ç§åœ¨æœåŠ¡å™¨å†…éƒ¨çš„èµ„æºè·³è½¬çš„æ–¹å¼ é€šè¿‡requestå¯¹è±¡è·å–è¯·æ±‚è½¬å‘å™¨å¯¹è±¡ï¼šRequestDispatcher getRequestDispatcher(String path) ä½¿ç”¨RequestDispatcherè¿›è¡Œè½¬å‘ï¼šforward(ServletRequest request, ServletResponse response) ç‰¹ç‚¹ï¼š æµè§ˆå™¨åœ°å€æ è·¯å¾„æ²¡æœ‰å‘ç”Ÿå˜åŒ– åªèƒ½è½¬å‘åˆ°å½“å‰æœåŠ¡å™¨å†…éƒ¨èµ„æºä¸­ è½¬å‘æ˜¯ä¸€æ¬¡è¯·æ±‚ å…±äº«æ•°æ® åŸŸå¯¹è±¡ï¼šä¸€ä¸ªæœ‰ä½œç”¨èŒƒå›´çš„å¯¹è±¡ï¼Œå¯ä»¥åœ¨èŒƒå›´å†…å…±äº«å¯¹è±¡ requeståŸŸï¼šä»£è¡¨ä¸€æ¬¡è¯·æ±‚çš„èŒƒå›´ï¼Œä¸€èˆ¬ç”¨äºè¯·æ±‚è½¬å‘çš„å¤šä¸ªèµ„æºä¸­å…±äº«æ•°æ® æ–¹æ³• setAttribute(String name, Obkect obj)ï¼šå­˜å‚¨æ•°æ® Object getAttribute(String name)ï¼šé€šè¿‡é”®è·å–å€¼ void removeAttribute(String name)ï¼šåˆ é™¤é”®å€¼å¯¹ è·å–ServletContext ServletContext getServletContext() å¼€å‘æ­¥éª¤ï¼š åˆ›å»ºé¡¹ç›®ï¼Œå¯¼å…¥htmlï¼Œé…ç½®æ–‡ä»¶ï¼ŒjaråŒ… åˆ›å»ºæ•°æ®åº“ç¯å¢ƒï¼ŒUserè¡¨ åˆ›å»ºå®ä½“ç±»User åˆ›å»ºUserDaoï¼Œæ“ä½œæ•°æ®åº“ä¸­Userè¡¨çš„ç±» BeanUtilsç®€åŒ–æ•°æ®å°è£… Map&lt;String String[]) map = req.getParameterMap();User user = new User();BeanUtils.populate(loginUser, map); å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼ å“åº”è¡Œ å“åº”å¤´ å“åº”ç©ºè¡Œ å“åº”ä½“ å“åº”è¡Œï¼š åè®®ä»¥åŠç‰ˆæœ¬ï¼šHTTP/1.1 å“åº”çŠ¶æ€ç ï¼š200 1xxï¼šæœåŠ¡å™¨æ¥å®¢æˆ·ç«¯æ¶ˆæ¯ä½†æ˜¯æ²¡æœ‰æ¥æ”¶å®Œæˆï¼Œä¸€æ®µæ—¶é—´åæœåŠ¡å™¨å‘å®¢æˆ·ç«¯è¯¢é—®æ˜¯å¦è¿˜æœ‰æ•°æ®å‘é€ 2xxï¼šæˆåŠŸã€‚ 200 3xxï¼šé‡å®šå‘ã€‚ 302(é‡å®šå‘) 304(è®¿é—®ç¼“å­˜) 4xxï¼šå®¢æˆ·ç«¯é”™è¯¯ã€‚ 404(è¯·æ±‚è·¯å¾„æ²¡æœ‰å¯¹åº”çš„èµ„æº) 405(è¯·æ±‚æ–¹å¼æ²¡æœ‰å¯¹åº”çš„doXxxæ–¹æ³•) 5xxï¼šæœåŠ¡å™¨ç«¯é”™è¯¯ã€‚ 500(æœåŠ¡å™¨å†…éƒ¨å‡ºç°å¼‚å¸¸) çŠ¶æ€ç çš„æè¿°ï¼šOK å“åº”å¤´ï¼š æ ¼å¼ åç§°ï¼šå€¼ å¸¸è§å“åº”å¤´ Content-Typeï¼šæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯å“åº”ä½“æ•°æ®æ ¼å¼ä»¥åŠç¼–ç æ ¼å¼ Content-disposotionï¼šæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯ä»¥ä»€ä¹ˆæ ¼å¼æ‰“å¼€æˆ‘çš„å“åº”ä½“ in-lineï¼šé»˜è®¤å€¼ï¼Œåœ¨å½“å‰é¡µé¢æ‰“å¼€ attachmentï¼šä»¥é™„ä»¶å½¢å¼æ‰“å¼€(æ–‡ä»¶ä¸‹è½½) å“åº”ä½“ï¼š çœŸå®ä¼ è¾“çš„æ•°æ® ResponseåŠŸèƒ½ï¼šè®¾ç½®å“åº”æ¶ˆæ¯çš„ è®¾ç½®å“åº”è¡Œ è®¾ç½®çŠ¶æ€ç ï¼šsetStatus(int sc) è®¾ç½®å“åº”å¤´ï¼š setHeader(String name, String value) è®¾ç½®å“åº”ä½“ è·å–è¾“å‡ºæµ å­—ç¬¦è¾“å‡ºæµï¼šPrintWriter getWriter() å­—èŠ‚è¾“å‡ºæµï¼šServletOutputStream getOutputStream() ä½¿ç”¨è¾“å‡ºæµï¼Œå°†æ•°æ®è¾“å‡ºåˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ é‡å®šå‘ï¼š è®¾ç½®çŠ¶æ€ç 302 è®¾ç½®å“åº”å¤´location ç®€å•é‡å®šå‘æ–¹æ³•ï¼š sendRedirect(String url) é‡å®šå‘çš„ç‰¹ç‚¹ï¼š åœ°å€æ å‘ç”Ÿå˜åŒ– å¯ä»¥è®¿é—®å…¶ä»–ç«™ç‚¹(æœåŠ¡å™¨)çš„èµ„æº ä¸¤æ¬¡è¯·æ±‚(ä¸å¯ç”¨RequeståŸŸå¯¹è±¡å…±äº«æ•°æ®) è·¯å¾„å†™æ³•ï¼š ç›¸å¯¹è·¯å¾„ï¼šå½“å‰èµ„æºä¸è®¿é—®èµ„æºçš„è·¯å¾„å…³ç³»(./index.html = index.html) ç»å¯¹è·¯å¾„ï¼š(/responseDemo2) ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ä½¿ç”¨(aæ ‡ç­¾ï¼Œè¡¨å•ï¼Œé‡å®šå‘ç­‰)ï¼šéœ€è¦åŠ è™šæ‹Ÿç›®å½•(é¡¹ç›®è®¿é—®è·¯å¾„) req.getContextPathï¼šåŠ¨æ€è·å–è™šæ‹Ÿç›®å½• ç»™æœåŠ¡å™¨ç«¯ä½¿ç”¨ï¼šä¸éœ€è¦åŠ è™šæ‹Ÿç›®å½•(å¦‚è½¬å‘) è¾“å‡ºå­—ç¬¦/å­—èŠ‚ï¼š ä¹±ç é—®é¢˜ï¼šæµè§ˆå™¨é»˜è®¤ä»¥GBKè§£ç (ä¸æ“ä½œç³»ç»Ÿæœ‰å…³ï¼ŒWindowsåœ¨ä¸­æ–‡ç¯å¢ƒä¸‹æ˜¯GBK) response.setHeader(\"content-type\", \"text/html;charset=utf-8\");//ç®€ä¾¿å†™æ³•response.setContentType(\"text/html;charset=utf-8\"); éªŒè¯ç ï¼š int width = 100;int height = 50;//è®¾ç½®å›¾ç‰‡çš„å®½é«˜å’Œç±»å‹BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);//ç¾åŒ–å›¾ç‰‡//è·å–ç”»å›¾å¯¹è±¡Graphics g = image.getGraphics();//è®¾ç½®èƒŒæ™¯è‰²g.setColor(Color.PINK);g.fileRect(0, 0, width, height);//è®¾ç½®è¾¹æ¡†è‰²ä»¥åŠç»˜åˆ¶g.setColor(Color.BLUE);g.drawRect(0,0 width - 1, height - 1);//è·å–éšæœºå­—ç¬¦å¹¶ç»˜åˆ¶String str = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";Random ran = new Random();for (int i = 1; i &lt;= 4; i++) &#123; index = ran.nextInt(str.length()); char ch = str.charAt(index); g.drawString(ch+\"\", 20*i, 25);&#125;//è®¾ç½®å¹²æ‰°çº¿g.setColor(Color.GREEN);for (int i = 0; i &lt; 10; i++) &#123; int x1 = ran.nextInt(width); int x2 = ran.nextInt(width); int y1 = ran.nextInt(height); int y2 = ran.nextIne(height); g.drawLine(x1, y1, x2, y2);&#125;//ç»˜åˆ¶åˆ°æµè§ˆå™¨ä¸­ImageIO.writer(image, \"jpg\", response.getOutputStream()); ServletContextæ¦‚å¿µï¼šä»£è¡¨æ•´ä¸ªWebåº”ç”¨ï¼Œå¯ä»¥å’Œç¨‹åºçš„å®¹å™¨æ¥é€šä¿¡ã€‚ è·å–ï¼š requestå¯¹è±¡è·å–ï¼šrequest.getServletContext() HttpServletçš„æ–¹æ³•ï¼šthis.getServletContext() åŠŸèƒ½ï¼š è·å–MIMEç±»å‹ MIMEï¼šäº’è”ç½‘é€šä¿¡è¿‡ç¨‹ä¸­å®šä¹‰çš„ä¸€ç§æ–‡ä»¶æ•°æ®ç±»å‹ æ ¼å¼ï¼šå¤§ç±»å‹/å°ç±»å‹(text/html image/jpeg) String getMimeType(String file) ```javaString fileName = â€œa.jpgâ€;String mimeType = servletContext.getMimeType(fileName);2. åŸŸå¯¹è±¡ï¼šå…±äº«æ•°æ® - æ–¹æ³•ï¼š - setAttribute(String name, Object value) - getAttribute(String name) - removeAttribute(String name) - èŒƒå›´ï¼š - æ‰€æœ‰ç”¨æˆ·æ‰€æœ‰è¯·æ±‚çš„æ•°æ®3. è·å–æ–‡ä»¶çš„çœŸå®è·¯å¾„(æœåŠ¡å™¨è·¯å¾„) - æ–¹æ³•ï¼š - String getRealPath(String path) - ```java //webç›®å½•ä¸‹èµ„æºè®¿é—® getRealPath(\"/a.txt\"); //WEB-INfç›®å½•ä¸‹èµ„æºè®¿é—® getRealPath(\"/WEB-INF/b.txt\"); //srcç›®å½•ä¸‹èµ„æºè®¿é—® getReadPath(\"/WEB-INf/classes/c.txt\"); Cookie ä¼šè¯ï¼š æ¦‚å¿µï¼šä¸€æ¬¡ä¼šè¯(æµè§ˆå™¨ç¬¬ä¸€æ¬¡å‘ç”Ÿè¯·æ±‚ï¼Œç›´åˆ°ä¸€æ–¹æ–­å¼€)åŒ…å«å¤šæ¬¡è¯·æ±‚å’Œå“åº” åŠŸèƒ½ï¼šä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚é—´å…±äº«æ•°æ® æ–¹å¼ï¼š å®¢æˆ·ç«¯ï¼šCookie æœåŠ¡å™¨ï¼šSession å°†æ•°æ®ä¿å­˜åˆ°å®¢æˆ·ç«¯ï¼Œä½¿ç”¨æ­¥éª¤ï¼š åˆ›å»ºCookieå¯¹è±¡ï¼Œç»‘å®šæ•°æ® new Cookie(String name, String value) å‘é€Cookieå¯¹è±¡ response.addCookie(Cookie cookie) è·å–Cookie,å¾—åˆ°æ•°æ® Cookie[] request.getCookies() package web;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.Cookie;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;@WebServlet(\"/cookieDemo\")public class CookieDemo extends HttpServlet &#123; protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; Cookie c = new Cookie(\"msg\", \"hello\"); response.addCookie(c); &#125; protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; this.doPost(request, response); &#125;&#125; package web;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.Cookie;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;@WebServlet(\"/cookieDemo2\")public class CookieDemo2 extends HttpServlet &#123; protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; Cookie[] cookies = request.getCookies(); if (cookies != null) &#123; for (Cookie cookie : cookies) &#123; String name = cookie.getName(); String value = cookie.getValue(); System.out.println(name + \": \" + value); &#125; &#125; &#125; protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; this.doPost(request, response); &#125;&#125; å®ç°åŸç†ï¼š responseå‘é€å“åº”å¤´ï¼šset-cookie:msg=hello requestå‘é€è¯·æ±‚å¤´ï¼šCookie:mas=hello ç»†èŠ‚ï¼š ä¸€æ¬¡å¯ä¸å¯ä»¥å‘é€å¤šä¸ªCookie å¯ä»¥ Cookieèƒ½åœ¨æµè§ˆå™¨ä¸­ä¿å­˜å¤šé•¿çš„æ—¶é—´ é»˜è®¤ï¼šæµè§ˆå™¨å…³é—­æ—¶Cookieæ•°æ®è¢«é”€æ¯ æŒä¹…åŒ–å­˜å‚¨ï¼š cookie.setMaxAge(int seconds) æ­£æ•°ï¼šå°†Cookieæ•°æ®å†™åˆ°ç¡¬ç›˜çš„æ–‡ä»¶ä¸­ï¼Œæ•°å€¼è¡¨ç¤ºå­˜æ´»æ—¶é—´ è´Ÿæ•°ï¼šé»˜è®¤å€¼ 0ï¼šåˆ é™¤Cookieä¿¡æ¯ Cookieèƒ½ä¸èƒ½å­˜ä¸­æ–‡ Tomcat 8ä¹‹å‰ä¸èƒ½ç›´æ¥å­˜å‚¨ä¸­æ–‡ä¿¡æ¯ï¼ŒTomcat 8ä¹‹åå¯ä»¥ Cookieå…±äº«é—®é¢˜ ä¸€ä¸ªTomcatæœåŠ¡å™¨éƒ¨ç½²äº†å¤šä¸ªwebé¡¹ç›®ï¼Œåœ¨è¿™äº›é¡¹ç›®ä¸­cookieèƒ½ä¸èƒ½å…±äº« é»˜è®¤ä¸èƒ½å…±äº« setPath(String path)ï¼šè®¾ç½®Cookieçš„è·å–èŒƒå›´ï¼Œé»˜è®¤æƒ…å†µè®¾ç½®å½“å‰çš„è™šæ‹Ÿç›®å½• ä¸åŒçš„TomcatæœåŠ¡å™¨é—´Cookieå…±äº«é—®é¢˜ setDomain(String path)ï¼šå¦‚æœä¸€çº§åŸŸåç›¸åŒï¼Œé‚£ä¹ˆå¤šä¸ªæœåŠ¡å™¨ä¹‹é—´Cookieå¯ä»¥å…±äº« ç‰¹ç‚¹ï¼š Cookieå­˜å‚¨æ•°æ®åœ¨æµè§ˆå™¨ æµè§ˆå™¨å¯¹äºå•ä¸ªCookieçš„å¤§å°æœ‰é™åˆ¶(4KB)ï¼Œæ•°ç›®ä¹Ÿæœ‰é™åˆ¶(20ä¸ª) ä½œç”¨ï¼š ä¸€èˆ¬ç”¨äºå­˜åœ¨å°‘é‡ä¸å¤ªæ•æ„Ÿçš„æ•°æ® åœ¨ä¸ç™»å½•çš„æƒ…å†µä¸‹ï¼Œå®ŒæˆæœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„èº«ä»½è¯†åˆ« æ¡ˆä¾‹ï¼šè®°ä½ä¸Šä¸€æ¬¡ç™»å½•æ—¶é—´ package web;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.Cookie;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.net.URLDecoder;import java.net.URLEncoder;import java.text.SimpleDateFormat;import java.util.Date;@WebServlet(\"/cookieTest\")public class CookieTest extends HttpServlet &#123; protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; response.setContentType(\"text/html;charset=utf-8\"); Cookie[] cookies = request.getCookies(); boolean flag = false; if (cookies != null &amp;&amp; cookies.length &gt; 0) &#123; for (Cookie cookie: cookies) &#123; String name = cookie.getName(); if (\"lastTime\".equals(name)) &#123; flag = true; String time = cookie.getValue(); time = URLDecoder.decode(time, \"utf-8\"); Date date = new Date(); SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy:MM:dd HH:mm:ss\"); String str_date = sdf.format(date); str_date = URLEncoder.encode(str_date, \"utf-8\"); cookie.setValue(str_date); cookie.setMaxAge(60 * 60 * 24 * 30); response.addCookie(cookie); response.getWriter().write(\"lastTime: \" + time); break; &#125; &#125; &#125; if (flag == false) &#123; Date date = new Date(); SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy:MM:dd HH:mm:ss\"); String str_date = sdf.format(date); str_date = URLEncoder.encode(str_date, \"utf-8\"); Cookie cookie = new Cookie(\"lastTime\", str_date); cookie.setMaxAge(60 * 60 * 24 * 30); response.addCookie(cookie); response.getWriter().write(\"æ¬¢è¿é¦–æ¬¡è®¿é—®\"); &#125; &#125; protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; this.doPost(request, response); &#125;&#125; Sessionæ¦‚å¿µï¼šæœåŠ¡å™¨ç«¯ä¼šè¯æŠ€æœ¯ï¼Œç”¨ä»¥ä¿å­˜ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®ï¼Œç›¸å…³ç±»ä¸ºHttpSession HttpSession session = request.getSession(); æ–¹æ³•(Sessionæ˜¯åŸŸå¯¹è±¡)ï¼š setAttribute getAttribute removeAttribute åŸç†ï¼šSessionçš„å®ç°æ˜¯ä¾èµ–äºCookieçš„ ç»†èŠ‚ï¼š å®¢æˆ·ç«¯å…³é—­ï¼ŒæœåŠ¡å™¨ä¸å…³é—­è·å–çš„Sessionæ˜¯åŒä¸€ä¸ªå— ä¸æ˜¯ ```java//å¦‚æœå¸Œæœ›æ˜¯åŒä¸€ä¸ªï¼Œå¯ä»¥è¿™ä¹ˆå†™Cookie c = new Cookie(â€œJSESSIONIDâ€, session.getId());c.setMaxAge(60 * 60);response.addCookie(c); 2. æœåŠ¡å™¨å…³é—­ï¼Œå®¢æˆ·ç«¯å…³é—­ï¼Œè·å–çš„Sessionæ˜¯åŒä¸€ä¸ªå— - ä¸æ˜¯ï¼Œä½†æ˜¯è¦ç¡®ä¿æ•°æ®ä¸ä¸¢å¤±(Tomcatå·²ç»å®ç°äº†) - Sessionçš„é’åŒ–ï¼šä¿å­˜åœ¨ç¡¬ç›˜ä¸­ - Sessionçš„æ´»åŒ–ï¼šç”±ç¡¬ç›˜åŠ è½½åˆ°å†…å­˜ä¸­3. Sessionä»€ä¹ˆæ—¶å€™è¢«é”€æ¯ 1. æœåŠ¡å™¨å…³é—­ 2. Sessionå¯¹è±¡è°ƒç”¨invalidate() 3. Sessionçš„é»˜è®¤å¤±æ•ˆæ—¶é—´(30åˆ†é’Ÿ)ç‰¹ç‚¹ï¼š1. å­˜å‚¨åœ¨æœåŠ¡å™¨2. å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹ï¼Œä»»æ„å¤§å°çš„æ•°æ®&gt; Sessionä¸Cookieçš„åŒºåˆ«ï¼š&gt;&gt; 1. Sessionå­˜å‚¨äºæœåŠ¡å™¨ï¼ŒCookieå­˜å‚¨äºæµè§ˆå™¨&gt; 2. Sessionæ²¡æœ‰æ•°æ®å¤§å°é™åˆ¶ï¼ŒCookieæœ‰&gt; 3. Sessionæ•°æ®ç›¸å¯¹å®‰å…¨ï¼ŒCookieç›¸å¯¹ä¸å®‰å…¨## JSPJSP(Java Server Page)ï¼š- æ—¢å¯ä»¥å†™htmlï¼Œåˆå¯ä»¥å†™Javaã€‚åŸç†ï¼š- index.jsp â€“&gt; index_jsp.java â€“&gt; index_jsp.class- JSPæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªServletJSPè„šæœ¬ï¼šJSPå®šä¹‰Javaä»£ç çš„æ–¹å¼1. \\&lt;% ä»£ç  %\\&gt;ï¼šè½¬æ¢ååœ¨serviveæ–¹æ³•ä¸­ï¼Œserviceæ–¹æ³•ä¸­èƒ½å†™ä»€ä¹ˆï¼Œå°±èƒ½å†™ä»€ä¹ˆ2. \\&lt;%! ä»£ç  %\\&gt;ï¼šJSPè½¬æ¢ååœ¨çš„Javaç±»çš„æˆå‘˜ä½ç½®ï¼Œæ‰€ä»¥åªèƒ½å†™æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•3. \\&lt;%= ä»£ç  %\\&gt;ï¼šè½¬æ¢ä¸ºè¾“å‡ºè¯­å¥ï¼Œè¾“å‡ºè¯­å¥èƒ½ä»€ä¹ˆï¼Œè¯¥è„šæœ¬å°±å¯ä»¥å®šä¹‰ä»€ä¹ˆ - \\&lt;%= i %\\&gt;JSPå†…ç½®å¯¹è±¡- åœ¨JSPé¡µé¢ä¸­ä¸éœ€è¦è·å–å’Œåˆ›å»ºï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨çš„å¯¹è±¡- ä¸€å…±æœ‰9ä¸ªå†…ç½®å¯¹è±¡ - request(åŸŸå¯¹è±¡)ï¼šä¸€æ¬¡è¯·æ±‚é—´å…±äº«æ•°æ® - responseï¼šå“åº”å¯¹è±¡ - outï¼šå­—ç¬¦è¾“å‡ºæµï¼Œå¯ä»¥å°†æ•°æ®è¾“å‡ºåˆ°é¡µé¢ä¸Š - &gt; response.getWriter()ä¸outçš„åŒºåˆ«ï¼š &gt; &gt; - TomcatæœåŠ¡å™¨å“åº”æ—¶ï¼Œå…ˆæ‰¾responseç¼“å†²åŒºï¼Œç„¶åæ‰¾outç¼“å†²åŒº &gt; - response.getWriter()è¾“å‡ºæ°¸è¿œåœ¨outä¹‹å‰ - pageContext(åŸŸå¯¹è±¡)ï¼šå½“å‰é¡µé¢å…±äº«æ•°æ®ï¼Œè¿˜å¯ä»¥è·å–å…¶ä»–8ä¸ªå†…ç½®å¯¹è±¡ - session(åŸŸå¯¹è±¡)ï¼šä¸€æ¬¡ä¼šè¯çš„å¤šä¸ªè¯·æ±‚é—´å…±äº«æ•°æ® - application(åŸŸå¯¹è±¡)ï¼šæ‰€æœ‰ç”¨æˆ·é—´å…±äº«æ•°æ® - pageï¼šå½“å‰é¡µé¢çš„å¯¹è±¡ - configï¼šServletçš„é…ç½®å¯¹è±¡ - exceptionï¼šå¼‚å¸¸å¯¹è±¡æŒ‡ä»¤ï¼š1. ä½œç”¨ï¼šç”¨äºé…ç½®JSPé¡µé¢ï¼Œå¯¼å…¥èµ„æºæ–‡ä»¶2. æ ¼å¼ï¼š\\&lt;%@ å±æ€§å=å±æ€§å€¼ â€¦\\&gt;3. åˆ†ç±»ï¼š 1. pageï¼šé…ç½®é¡µé¢ 1. contentTypeï¼šç­‰åŒäºresponse.setContentType() 2. languageï¼šjava 3. bufferï¼šç¼“å†²åŒºå¤§å°ï¼Œé»˜è®¤8KB 4. importï¼šå¯¼åŒ… 5. errorPageï¼šé”™è¯¯é¡µé¢ï¼Œå‘é€å¼‚å¸¸åè·³è½¬åˆ°æŒ‡å®šçš„é”™è¯¯é¡µé¢ 6. isErrorPageï¼šæ ‡è¯†å½“å‰é¡µé¢æ˜¯å¦ä¸ºerrorPage(è®¾ä¸ºtrueå¯ä»¥ä½¿ç”¨exceptionå†…ç½®å¯¹è±¡) 2. includeï¼šå¯¼å…¥èµ„æºæ–‡ä»¶ - \\&lt;%@ include file=\"top.jsp\"\\&gt; 3. taglibï¼šå¯¼å…¥èµ„æº - &lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\"&gt;æ³¨é‡Šï¼š1. HTMLæ³¨é‡Š - \\&lt;!-- --\\&gt;2. JSPæ³¨é‡Š(æ¨èä½¿ç”¨) - \\&lt;%-- --%\\&gt;## MVCå¼€å‘æ¨¡å¼æ¼”å˜ï¼š1. Servlet2. JSPï¼Œåœ¨JSPä¸­å†™Javaä»£ç å’ŒHTMLæ ‡ç­¾ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œéš¾ä»¥åˆ†å·¥3. Java Webå€Ÿé‰´MVCå¼€å‘æ¨¡å¼MVCï¼š1. Mï¼šModel(JavaBean) - ä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œå¦‚æŸ¥è¯¢æ•°æ®åº“2. Vï¼šView(JSP) - å±•ç¤ºæ•°æ®3. Cï¼šController(Servlet) - è·å–å®¢æˆ·ç«¯è¾“å…¥ - è°ƒç”¨Model - å°†æ•°æ®äº¤ç»™Viewä¼˜ç‚¹:1. è€¦åˆæ€§ä½ï¼Œæ–¹ä¾¿ç»´æŠ¤ï¼Œåˆ©äºåˆ†å·¥åä½œ2. é‡ç”¨æ€§é«˜ç¼ºç‚¹ï¼š- ä½¿å¾—é¡¹ç›®ç»“æ„å¤æ‚ï¼Œå¯¹å¼€å‘äººå‘˜è¦æ±‚é«˜ï¼Œéœ€è¦ç²¾å¿ƒè®¾è®¡## ELæ¦‚å¿µï¼šExpression Languageï¼šè¡¨è¾¾å¼ä¹¦å†™ï¼Œæ›¿æ¢å’Œç®€åŒ–JSPé¡µé¢ä¸­Javaä»£ç çš„ç¼–å†™è¯­æ³•ï¼š$&#123;è¡¨è¾¾å¼&#125;æ³¨æ„ï¼šJSPé»˜è®¤æ”¯æŒELè¡¨è¾¾å¼- åœ¨$å‰åŠ å…¥\\å¯å¿½ç•¥ELè¡¨è¾¾å¼- åœ¨pageæŒ‡ä»¤ä¸­è®¾ç½®isELIgnored=\"true\"è¯¥JSPç§ELè¡¨è¾¾å¼å…¨éƒ¨å¿½ç•¥ä½¿ç”¨ï¼š1. è¿ç®— 1. +, -, *, /(div), %(mod) 2. \\&gt; &lt; &gt;= &lt;= == != 3. &amp;&amp;(and) ||(or) !(not) 4. emptyï¼šç”¨ä»¥åˆ¤æ–­å­—ç¬¦ä¸²ã€é›†åˆã€æ•°ç»„å¯¹è±¡æ˜¯å¦ä¸ºnullæˆ–é•¿åº¦æ˜¯å¦ä¸º02. è·å–å€¼ 1. è¯­æ³•ï¼š 1. $&#123;åŸŸåç§°.é”®å&#125; 1. pageScope â€“&gt; pageContext 2. requestScope â€“&gt; request 3. sessionScope â€“&gt; session 4. applicationScope â€“&gt; application 2. $&#123;é”®å&#125; - é¡ºåºï¼špageContext â€“&gt; request â€“&gt; session â€“&gt; application 2. è·å–å¯¹è±¡ 1. å¯¹è±¡ï¼š$&#123;åŸŸå.é”®å.å±æ€§å&#125; - u.name(u.getName()) 2. Listé›†åˆï¼š\\$&#123;åŸŸå.é”®å[ç´¢å¼•]&#125; - \\$&#123;list[0]&#125;ï¼Œè¶Šç•Œä»€ä¹ˆéƒ½ä¸æ˜¾ç¤º 3. Mapé›†åˆï¼š\\$&#123;åŸŸå.é”®å.keyåç§°&#125;æˆ–\\$&#123;åŸŸå.é”®å[\"keyåç§°\"]&#125; - $&#123;map.gender&#125; - $&#123;map[\"gender\"]&#125;3. éšå¼å¯¹è±¡(11ä¸ª) - pageContextï¼šè·å–å…¶ä»–å…«ä¸ªå†…ç½®å¯¹è±¡ - ```jsp $&#123;pageContext.request.contextPath&#125; JSTLæ¦‚å¿µï¼šJavaServer Pages Tag Library ä½œç”¨ï¼šç®€åŒ–å’Œæ›¿æ¢JSPé¡µé¢ä¸Šçš„Javaä»£ç  ä½¿ç”¨æ­¥éª¤ï¼š å¯¼å…¥jaråŒ… å¼•å…¥æ ‡ç­¾åº“ï¼štaglibæŒ‡ä»¤(&lt;%@ taglib %&gt;) ä½¿ç”¨æ ‡ç­¾ å¸¸ç”¨æ ‡ç­¾ï¼š if &lt;c:if test=\"\"&gt; &lt;/c:if&gt; choose &lt;c:choose&gt; &lt;c:when test=\"\"&gt;&lt;/c:when&gt; ... ... &lt;c:otherwise&gt;&lt;/c:otherwise&gt;&lt;/c:choose&gt; forEach &lt;c:forEach begin=\"\" end=\"\" var=\"\" step=\"\"&gt; &lt;/c:forEach&gt;&lt;c:forEach items=\"$&#123;list&#125;\" var=\"str\" varStatus=\"s\"&gt; $&#123;s.index&#125; $&#123;s.count&#125;&lt;/c:forEach&gt; Filterä½œç”¨ï¼š ä¸€èˆ¬ç”¨äºå®Œæˆé€šç”¨çš„æ“ä½œï¼Œå¦‚ç™»å½•éªŒè¯ã€ç»Ÿä¸€ç¼–ç å¤„ç†ï¼Œæ•æ„Ÿå­—ç¬¦è¿‡æ»¤ å…¥é—¨ï¼š å®šä¹‰ç±»å®ç°æ¥å£Filter å®ç°æ–¹æ³• é…ç½®æ‹¦æˆªè·¯å¾„ package web;import javax.servlet.*;import javax.servlet.annotation.WebFilter;import java.io.IOException;@WebFilter(\"/*\")public class FilterDemo implements Filter &#123; @Override public void init(FilterConfig filterConfig) throws ServletException &#123; &#125; @Override public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123; System.out.println(\"... ...\"); filterChain.doFilter(servletRequest,servletResponse); &#125; @Override public void destroy() &#123; &#125;&#125; web.xmlé…ç½® &lt;filter&gt; &lt;filter-name&gt;demo&lt;/filter-name&gt; &lt;filter-class&gt;web.FilterDemo&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;demo&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; ç”Ÿå‘½å‘¨æœŸï¼š init doFilter destroy è¿‡æ»¤å™¨é…ç½®ï¼š æ‹¦æˆªè·¯å¾„é…ç½® å…·ä½“è·¯å¾„ï¼š/index.jsp ç›®å½•æ‹¦æˆªï¼š/user/* åç¼€åæ‹¦æˆªï¼š*.jsp æ‹¦æˆªæ‰€æœ‰èµ„æºï¼š/* æ‹¦æˆªæ–¹å¼é…ç½®ï¼šèµ„æºè¢«è®¿é—®çš„æ–¹å¼ æ³¨è§£é…ç½®ï¼šè®¾ç½®dispatcherTypeså±æ€§ REQUESTï¼šé»˜è®¤å€¼ï¼Œæµè§ˆå™¨ç›´æ¥è¯·æ±‚èµ„æº FORWORDï¼šè½¬å‘è®¿é—®èµ„æº INCLUDEï¼šåŒ…å«è®¿é—®èµ„æº ERRORï¼šé”™è¯¯è·³è½¬èµ„æº ASYNCï¼šå¼‚æ­¥è®¿é—®èµ„æº web.xmlé…ç½® &lt;filter-mapping&gt; &lt;filter-name&gt;demo&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;dispatcher&gt;...&lt;/dispatcher&gt;&lt;/filter-mapping&gt; è¿‡æ»¤å™¨é“¾çš„é…ç½® å¦‚æœæœ‰ä¸¤ä¸ªè¿‡æ»¤å™¨ Filter1 â€“&gt; Filter2 â€“&gt; èµ„æºæ‰§è¡Œ â€“&gt; Filter2 â€“&gt; Filter1 æ‰§è¡Œé¡ºåºé—®é¢˜ æ³¨è§£é…ç½®ï¼šæŒ‰ç…§ç±»åçš„å­—ç¬¦ä¸²æ¯”è¾ƒè§„åˆ™è¿›è¡Œæ¯”è¾ƒï¼Œæœ€å°çš„å…ˆåˆ™æ‰§è¡Œ AFilter &lt; BFilter(AFilterå…ˆæ‰§è¡Œ) web.xmlé…ç½®ï¼šè°å®šä¹‰åœ¨ä¸Šé¢ï¼Œè°å…ˆæ‰§è¡Œ ä»£ç†ï¼š æ¦‚å¿µ çœŸå®å¯¹è±¡ ä»£ç†å¯¹è±¡ ä»£ç†æ¨¡å¼ï¼šä»£ç†å¯¹è±¡ä»£ç†çœŸå®å¯¹è±¡ï¼Œè¾¾åˆ°å¢å¼ºçœŸå®å¯¹è±¡åŠŸèƒ½çš„ç›®çš„ å®ç°æ–¹å¼ é™æ€ä»£ç†ï¼šæœ‰ä¸€ä¸ªç±»æ–‡ä»¶æè¿°ä»£ç†æ¨¡å¼ åŠ¨æ€ä»£ç†ï¼šåœ¨å†…å­˜ä¸­å½¢æˆä»£ç†ç±» ä»£ç†å¯¹è±¡å’ŒçœŸå®å¯¹è±¡å®ç°ç›¸åŒçš„æ¥å£ ä»£ç†å¯¹è±¡ï¼šProxy.newProxyInstance() ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç±»åŠ è½½å™¨ ç¬¬äºŒä¸ªå‚æ•°ï¼šæ¥å£æ•°ç»„ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå¤„ç†å™¨ invoke proxy methodï¼šä»£ç†å¯¹è±¡è°ƒç”¨çš„æ–¹æ³•ï¼Œè¢«å°è£…ä¸ºå¯¹è±¡ argsï¼šä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼ é€’çš„å®é™…å¯¹è±¡ ä½¿ç”¨ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³• Listeneräº‹ä»¶ç›‘å¬æœºåˆ¶ äº‹ä»¶æº ç›‘å¬å™¨ æ³¨å†Œç›‘å¬ ServletContextLinstenerï¼šç›‘å¬ServletContextå¯¹è±¡çš„åˆ›å»ºå’Œç›‘å¬ contextDestroyed(ServletXontextEvent sec) contextImitialized(ServletContextEvent sec) æ­¥éª¤ï¼š å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°ServletContextLinsteneræ¥å£ å®ç°æ–¹æ³• é…ç½® package web;import javax.servlet.ServletContextEvent;import javax.servlet.ServletContextListener;import javax.servlet.annotation.WebListener;@WebListenerpublic class ListenerDemo implements ServletContextListener &#123; @Override public void contextInitialized(ServletContextEvent servletContextEvent) &#123; System.out.println(\"æœåŠ¡å™¨å¯åŠ¨è‡ªåŠ¨è¢«è°ƒç”¨\"); &#125; @Override public void contextDestroyed(ServletContextEvent servletContextEvent) &#123; System.out.println(\"æœåŠ¡å™¨æ­£å¸¸å…³é—­åè¢«è°ƒç”¨\"); &#125;&#125;","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"Web","slug":"Web","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Web/"}]},{"title":"JDBC","date":"2019-08-14T16:00:00.000Z","path":"/JDBC/","text":"åˆè¯†JDBCå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨Javaæ¥æ“ä½œæ•°æ®åº“ï¼Œç”±äºæ•°æ®åº“çš„ç§ç±»ç¹å¤šï¼Œå¹¶ä¸”sqlè¯­å¥å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œæ€»è€Œè¨€ä¹‹ä¸åŒçš„æ•°æ®åº“åƒå·®ä¸‡åˆ«ï¼Œè¿™æ˜¯ä¸æ˜¯æ„å‘³ç€æˆ‘ä»¬è¦å¯¹ä¸åŒçš„æ•°æ®åº“å†™ä¸åŒçš„ç¨‹åºï¼Œè¿™æ ·çš„è¯å¯¹ç¨‹åºå‘˜çš„è¦æ±‚æœ‰ç‚¹é«˜ï¼Œå¹¶ä¸”å­¦ä¹ çš„æˆæœ¬ä¹Ÿå¾ˆå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å®šä¹‰ä¸€å¥—è§„èŒƒï¼Œè¦æ±‚å¯¹æ‰€æœ‰çš„æ•°æ®åº“ç¨‹åºå‘˜åªè¦å†™ç›¸åŒçš„ç¨‹åºå°±å¯ä»¥äº†ã€‚å°±ç›¸å½“äºæ’åº§ï¼Œæˆ‘ä»¬å®šä¹‰å¥½æ’åº§çš„æ ‡å‡†ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å•†å®¶å¿…é¡»æŒ‰æˆ‘çš„æ ‡å‡†æ¥ï¼Œå¦åˆ™å°±ä¸èƒ½ä½¿ç”¨æ’åº§ã€‚åŒç†ï¼Œåœ¨Javaä¸­å®šä¹‰å¥½æ•°æ®åº“çš„æ¥å£ï¼Œå®šä¹‰æ¥å£ä¸­çš„æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Œè€Œå…·ä½“çš„å®ç°ç»†èŠ‚åˆ™æœ‰æ•°æ®åº“çš„å‚å•†è¿›è¡Œç¼–å†™ï¼Œç¨‹åºå‘˜åªè¦è°ƒç”¨æ¥å£é‡Œé¢çš„æ–¹æ³•å°±å¯ä»¥äº†ã€‚è¿™é‡Œç»™å‡ºä¸€ä¸ªæ‘˜è‡³ç»´åŸºç™¾ç§‘çš„å®šä¹‰ Java Database Connectivity (JDBC) is an application programming interface (API) for the programming language Java, which defines how a client may access a database. It is a Java-based data access technology used for Java database connectivity. æ‰€ä»¥ä½¿ç”¨JDBCçš„å¥½å¤„ä¾¿æ˜¾è€Œæ˜“è§ ç¨‹åºå‘˜å¦‚æœè¦å¼€å‘è®¿é—®æ•°æ®åº“çš„ç¨‹åºï¼Œåªéœ€è¦ä¼šè°ƒç”¨JDBCæ¥å£ä¸­çš„æ–¹æ³•å³å¯ï¼Œä¸ç”¨å…³æ³¨ç±»æ˜¯å¦‚ä½•å®ç°çš„ ä½¿ç”¨åŒä¸€å¥—Javaä»£ç ï¼Œè¿›è¡Œå°‘é‡çš„ä¿®æ”¹å°±å¯ä»¥è®¿é—®å…¶ä»–JDBCæ”¯æŒçš„æ•°æ®åº“ æˆ‘ä»¬ä½¿ç”¨Javaæ“ä½œæ•°æ®åº“ï¼Œä¼šä½¿ç”¨åˆ°æ•°æ®åº“çš„é©±åŠ¨ï¼Œç”±å„å¤§æ•°æ®åº“å‚å•†æä¾›ï¼Œéœ€è¦é¢å¤–å»ä¸‹è½½ï¼Œé‡Œé¢æ˜¯å¯¹JDBCæ¥å£å®ç°çš„ç±»ï¼Œå¯¼å…¥é©±åŠ¨jaråŒ…çš„å…·ä½“çš„æ­¥éª¤å¦‚ä¸‹ åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªlibsæ–‡ä»¶å¤¹ å°†jaråŒ…å¤åˆ¶åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ é€‰ä¸­è¿™ä¸ªjaråŒ…ï¼Œå³å‡»æ‰¾åˆ°&quot;Add as Library&quot; ä¸Šé¢æ˜¯å¯¼å…¥jaråŒ…çš„é€šç”¨æ­¥éª¤ï¼Œåé¢ä¼šç»å¸¸å¯¼å…¥jaråŒ…ï¼Œæ‰€ä»¥éœ€è¦ç†Ÿè®°ã€‚ ç¬¬ä¸€ä¸ªJDBCç¨‹åºä½¿ç”¨Javaæ“ä½œæ•°æ®åº“ä¸€èˆ¬åŒ…æ‹¬ä¸‹é¢å‡ æ­¥ æ³¨å†Œé©±åŠ¨ è·å¾—è¿æ¥æ•°æ®åº“çš„å¯¹è±¡ è·å¾—æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡ æ‰§è¡Œsqlè¯­å¥ é‡Šæ”¾èµ„æº(æ–­å¼€è¿æ¥) ç¨‹åºå¦‚ä¸‹(å…·ä½“ç±»åé¢è§£é‡Š) import java.sql.Connection;import java.sql.DriverManager;import java.sql.Statement;public class Demo01 &#123; public static void main(String[] args) throws Exception&#123; //æ³¨å†Œé©±åŠ¨ Class.forName(\"com.mysql.jdbc.Driver\"); //è·å–è¿æ¥ Connection conn = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/db1\", \"root\", \"root\"); //åˆ›å»ºsqlè¯­å¥ String sql = \"update account set balance = 2000 where id = 1\"; //åˆ›å»ºæ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡ Statement statement = conn.createStatement(); //æ‰§è¡Œsqlè¯­å¥ statement.executeUpdate(sql); //é‡Šæ”¾èµ„æº statement.close(); conn.close(); &#125;&#125; æ ¸å¿ƒç±»ä¸‹é¢å°±è¯¦ç»†ä»‹ç»JDBCçš„æ ¸å¿ƒç±»(æ¥å£)ä»¥åŠå®ƒä»¬çš„åŠŸèƒ½ DriverManagerï¼šé©±åŠ¨ç®¡ç†å¯¹è±¡ï¼ŒåŠŸèƒ½å¦‚ä¸‹ æ³¨å†Œé©±åŠ¨ï¼šå‘Šè¯‰ç¨‹åºè¯¥ä½¿ç”¨å“ªä¸€ä¸ªæ•°æ®åº“é©±åŠ¨jaråŒ… mysql5ä¹‹åå¯ä»¥çœç•¥æ³¨å†Œé©±åŠ¨çš„æ­¥éª¤ï¼Œå³ä¸éœ€è¦å†™Class.forName() è·å–æ•°æ®åº“è¿æ¥ static Connection getConnection(String url, String user, String password) urlï¼šè¿æ¥çš„è·¯å¾„ æ ¼å¼ï¼šjdbc:mysql://ipåœ°å€(åŸŸå):ç«¯å£å·/æ•°æ®åº“åç§°?å‚æ•°=å‚æ•°å€¼ ä¾‹å­ï¼šjdbc:mysql://localhost:3306/db1 å¦‚æœipåœ°å€ä¸ºæœ¬æœºåœ°å€ä¸”ç«¯å£å·ä¸º3306ï¼Œåˆ™ä¸Šé¢å¯çœç•¥ipåœ°å€å’Œç«¯å£å·ï¼Œç®€å†™ä¸ºï¼šjdbc:mysql:///db1 å¦‚æœå‡ºç°ä¹±ç é—®é¢˜ï¼Œå¯ä»¥æŒ‡å®šå‚æ•°?characterEncoding=utf8 userï¼šç”¨æˆ·å passwordï¼šå¯†ç  Connectionï¼šæ•°æ®åº“è¿æ¥å¯¹è±¡ï¼Œç›¸å½“äºæ˜¯åœ¨Javaç¨‹åºä¸æ•°æ®åº“ä¹‹é—´å»ºç«‹äº†ä¸€æ¡é€šé“ï¼ŒåŠŸèƒ½å¦‚ä¸‹ è·å–æ‰§è¡Œsqlçš„å¯¹è±¡ Statement createStatement() PreparedStatement prepareStatement(String sql) ç®¡ç†äº‹åŠ¡ å¼€å¯äº‹åŠ¡ï¼šsetAutoCommit(boolean autoCommit)ï¼Œä¼ å…¥falseå³å¼€å¯äº‹åŠ¡ æäº¤äº‹åŠ¡ï¼šcommit() å›æ»šäº‹åŠ¡ï¼šrollback() Statementï¼šæ‰§è¡Œsqlçš„å¯¹è±¡ï¼Œå«æœ‰å¦‚ä¸‹æ–¹æ³• boolean execute(String sql)ï¼šå¯ä»¥æ‰§è¡Œä»»æ„çš„sqlè¯­å¥ï¼Œä¸å¸¸ç”¨ï¼Œäº†è§£å³å¯ int executeUpdate(String sql) æ‰§è¡ŒDML(insertã€updateã€delete)è¯­å¥ã€DDL(createï¼Œalterã€drop)è¯­å¥ è¿”å›å€¼ï¼šå½±å“çš„è¡Œæ•°ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå½±å“çš„è¡Œæ•°åˆ¤æ–­DMLè¯­å¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸ è¿”å›å€¼&gt;0çš„åˆ™æ‰§è¡ŒæˆåŠŸï¼Œåä¹‹ï¼Œåˆ™å¤±è´¥ã€‚ ResultSet executeQuery(String sql)ï¼šæ‰§è¡ŒDQL(select)è¯­å¥ ResultSetï¼šç»“æœé›†å¯¹è±¡ï¼Œå°è£…æŸ¥è¯¢ç»“æœï¼Œæ•°æ®åº“é€šè¿‡é€šé“è¿”å›çš„ç»“æœ boolean next() åˆ¤æ–­æ¸¸æ ‡æ‰€æŒ‡å‘çš„è¡Œæ˜¯å¦ä¸ºç©º getXxx() getXxx(int columnIndex) æ ¹æ®åˆ—æ•°æ¥è·å¾—æ•°æ® getXxx(int columnLabel) æ ¹æ®åˆ—åç§°è·å¾—æ•°æ® è¿™é‡Œç»™å‡ºä¸€ä¸ªä½¿ç”¨ResultSetçš„ä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦å»æŸ¥è¯¢accountè¡¨ import java.sql.Connection;import java.sql.DriverManager;import java.sql.ResultSet;import java.sql.Statement;public class Demo02 &#123; public static void main(String[] args) throws Exception &#123; Class.forName(\"com.mysql.jdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:mysql:///db1\", \"user\", \"root\"); Statement statement = conn.createStatement(); String sql = \"select * from account\"; ResultSet resultSet = statement.executeQuery(sql); //å°†æŸ¥è¯¢åˆ°çš„æ•°æ®æ‰“å°å‡ºæ¥ while (resultSet.next()) &#123; //æ ¹æ®åˆ—åæŸ¥è¯¢æ•°æ® int id = resultSet.getInt(\"id\"); String name = resultSet.getString(\"name\"); double balance = resultSet.getDouble(\"balance\"); System.out.println(id + \"---\" + name + \"---\" + balance); &#125; resultSet.close(); statement.close(); conn.close(); &#125;&#125; JDBCå·¥å…·ç±»å…¶å®ä¸Šé¢çš„ä»£ç å¹¶ä¸æ˜¯ååˆ†çš„è§„èŒƒï¼Œå› ä¸ºèµ„æºçš„é‡Šæ”¾å¯èƒ½ä¸èƒ½é‡Šæ”¾æˆåŠŸï¼Œå› ä¸ºå‰é¢å‘ç”Ÿå¼‚å¸¸å°±å¯ä»¥å¯¼è‡´åé¢çš„ç¨‹åºæ‰§è¡Œä¸åˆ°ï¼Œè¿™æ ·èµ„æºæ— æ³•é‡Šæ”¾ï¼Œå°±ä¼šå¯¼è‡´å†…å­˜è¶Šç”¨è¶Šå°‘(å†…å­˜æ³„æ¼)ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”å½“å°†èµ„æºé‡Šæ”¾çš„ä»£ç å†™åˆ°finallyä»£ç å—ä¸­ï¼Œå¦‚ä¸‹ import java.sql.Connection;import java.sql.DriverManager;import java.sql.SQLException;import java.sql.Statement;public class Demo01 &#123; public static void main(String[] args) &#123; //å®šä¹‰åœ¨tryä»£ç å—å¤–æ˜¯ä¸ºäº†åœ¨finallyä¸­èƒ½å¤Ÿè®¿é—® Connection conn = null; Statement statement = null; try &#123; conn = DriverManager.getConnection(\"jdbc:mysql:///db1\", \"root\", \"root\"); statement = conn.createStatement(); String sql = \"update account set balance = 2000 where id = 1\"; statement.executeUpdate(sql); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; finally &#123; if (statement != null) &#123; try &#123; statement.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; if (conn != null) &#123; try &#123; conn.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;&#125; è¿™æ—¶æˆ‘ä»¬å‘ç°ä»£ç ååˆ†çš„å†—é•¿(ç‰¹åˆ«æ˜¯èµ„æºé‡Šæ”¾çš„éƒ¨åˆ†)ï¼Œå¹¶ä¸”æ¯æ¬¡å†™ä»£ç éƒ½ä¼šé‡å¤è¿™äº›ï¼Œå†è€…ç¨‹åºæ‰€è¿æ¥çš„æ•°æ®åº“æ˜¯å†™æ­»çš„ï¼Œå¦‚æœéœ€è¦æ”¹å˜çš„è¯è¿˜éœ€è¦æ”¹åŠ¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›ä¿¡æ¯å†™åœ¨ä¸€ä¸ªjdbc.propertiesçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æœæœ‰æ”¹åŠ¨ç›´æ¥æ”¹åŠ¨é…ç½®æ–‡ä»¶å³å¯ url=jdbc:mysql:///db1user=rootpassword=rootdriver=com.mysql.jdbc.Driver å°†ä¸Šé¢çš„è¿™äº›æ“ä½œæŠ½ç¦»å‡ºæ¥ï¼Œå†™ä¸€ä¸ªJDBCçš„å·¥å…·ç±»ï¼Œåœ¨å·¥å…·ç±»ä¸­è¯»å–é…ç½®æ–‡ä»¶ï¼Œä»¥åŠæŠ½ç¦»å‡ºä¸€äº›æ–¹æ³•ï¼Œè¿™æ ·ä¸ç”¨æ¯æ¬¡éƒ½å†™è¿™ä¹ˆé•¿çš„ä»£ç  import java.io.FileNotFoundException;import java.io.FileReader;import java.io.IOException;import java.net.URL;import java.sql.*;import java.util.Properties;public class JDBCUtils &#123; private static String url; private static String user; private static String password; private static String driver; //è¯»å–jdbc.propertiesä¸­çš„å†…å®¹ è·å¾—url user password driverç­‰ä¿¡æ¯ //å› ä¸ºåªéœ€è¦è¯»å–ä¸€æ¬¡ï¼Œæ‰€ä»¥å†™åœ¨staticä»£ç å—ä¸­ static &#123; try &#123; Properties properties = new Properties(); ClassLoader classLoader = JDBCUtils.class.getClassLoader(); URL res = classLoader.getResource(\"jdbc.properties\"); String path = res.getPath(); properties.load(new FileReader(path)); url = properties.getProperty(\"url\"); user = properties.getProperty(\"user\"); password = properties.getProperty(\"password\"); driver = properties.getProperty(\"driver\"); Class.forName(driver); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125; //è¿”å›è¿æ¥å¯¹è±¡ public static Connection getConnection() throws SQLException&#123; return DriverManager.getConnection(url, user, password); &#125; //é‡Šæ”¾èµ„æº public static void close(Connection conn, Statement stam) &#123; if (stam != null) &#123; try &#123; stam.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; if (conn != null) &#123; try &#123; conn.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; //é‡Šæ”¾èµ„æº public static void close(Connection conn, Statement stam, ResultSet resultSet) &#123; if (resultSet != null) &#123; try &#123; resultSet.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; //å¤ç”¨ä¸Šé¢çš„ä»£ç  close(conn, stam); &#125;&#125; ç”¨æˆ·ç™»å½•ç»ƒä¹ æˆ‘ä»¬æ¥å†™ä¸€ä¸ªæ–¹æ³•æ¥åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®ï¼Œæ€è·¯å°±æ˜¯æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç å»æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œå¦‚æœè¿”å›çš„ResultSetæœ‰å†…å®¹ï¼Œé‚£ä¹ˆå°±ç¡®å®šè¾“å…¥æ­£ç¡®ï¼Œå¦åˆ™å¤±è´¥ã€‚å‡è®¾æœ‰ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªè¡¨(user) +------+----------+----------+| id | user | password |+------+----------+----------+| 1 | zhangsan | 123 || 2 | lisi | 345 |+------+----------+----------+ ä¸‹é¢æ˜¯æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç çš„æ–¹æ³• public static boolean login(String user, String password) &#123; Connection conn = null; Statement statement = null; ResultSet resultSet = null; try &#123; conn = JDBCUtils.getConnection(); statement = conn.createStatement(); //æ‹¼æ¥userå’Œpasswordæœªä¸€ä¸ªsqlè¯­å¥ String sql = \"select * from user where user = '\" + user + \"' and password = '\" + password + \"'\"; resultSet = statement.executeQuery(sql); //å¦‚æœè¿”å›æœ‰æ•°æ®åˆ™è¿”å›true å¦åˆ™è¿”å›false return resultSet.next(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.close(conn, statement, resultSet); &#125; return false;&#125; ä¸‹é¢åœ¨mainæ–¹æ³•ä¸­å†™æµ‹è¯•ä»£ç  public static void main(String[] args) &#123; //ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç  Scanner scanner = new Scanner(System.in); System.out.println(\"è¯·è¾“å…¥ç”¨æˆ·åï¼š\"); String user = scanner.nextLine(); System.out.println(\"è¯·è¾“å…¥å¯†ç ï¼š\"); String password = scanner.nextLine(); boolean flag = login(user, password); if (flag) &#123; System.out.println(\"ç™»å½•æˆåŠŸ\"); &#125; else &#123; System.out.println(\"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯\"); &#125;&#125; æˆ‘ä»¬æ¥è¯•éªŒä¸€ä¸‹ è¯·è¾“å…¥ç”¨æˆ·åï¼šlisiè¯·è¾“å…¥å¯†ç ï¼š234ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ è¯·è¾“å…¥ç”¨æˆ·åï¼šzhangsanè¯·è¾“å…¥å¯†ç ï¼š123ç™»å½•æˆåŠŸ PreparedStatementPreparedStatementçš„ä½œç”¨åŒStatementï¼Œä¹Ÿæ˜¯ç”¨æ¥æ‰§è¡Œsqlå‘½ä»¤çš„ï¼Œä½†æ˜¯å·²ç»æœ‰äº†Statementï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦PreparedStatementå‘¢? é‚£å°±è¦çŸ¥é“Statementå­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸Šé¢çš„ç”¨æˆ·ç™»å½•ç¨‹åºï¼Œå¦‚æœæˆ‘ä»¬ç™»å½•æ—¶è¿™ä¹ˆå†™ è¯·è¾“å…¥ç”¨æˆ·åï¼šdaadè¯·è¾“å…¥å¯†ç ï¼ša' or 'a' = 'aç™»å½•æˆåŠŸ å¾—åˆ°çš„ç»“æœå±…ç„¶ç™»å½•æˆåŠŸäº†ï¼Œå› ä¸ºsqlè¯­å¥è¢«æ‹¼æ¥æˆäº† select * from user where user &#x3D; &#39;daad&#39; and password &#x3D; &#39;a&#39; or &#39;a&#39; &#x3D; &#39;a&#39;; æœ€åçš„or â€˜aâ€™ = â€˜aâ€™å¾—åˆ°çš„æ°¸è¿œæ˜¯trueï¼Œæ‰€ä»¥æ€»æ˜¯å¯ä»¥å¾—åˆ°è¿”å›ç»“æœï¼Œæ‰€ä»¥è‡ªç„¶ä¼šæ˜¾ç¤ºç™»å½•æˆåŠŸï¼Œè¿™ç§æƒ…å†µå«åšSQLæ³¨å…¥ã€‚PreparedStatementæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€ä¸ªé—®é¢˜çš„ï¼Œä¸Šé¢å‡ºç°é—®é¢˜æ˜¯å› ä¸ºæˆ‘ä»¬çš„sqlè¯­å¥æ˜¯æ‹¼æ¥è€Œæˆçš„ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°é—®é¢˜ï¼ŒPreparedStatementé‡‡å–çš„åŠæ³•æ˜¯é¦–å…ˆä½¿ç”¨?å æ®ä½ç½®(å ä½ç¬¦)ï¼Œç„¶åå¯¹?æ‰€å æ®çš„ä½ç½®è¿›è¡Œèµ‹å€¼ï¼Œèµ‹å€¼çš„æ–¹æ³•ä¸º setXxx()ï¼šæ¥æ”¶ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºä¸ºç¬¬å‡ ä¸ªå ä½ç¬¦èµ‹å€¼ï¼Œä»1å¼€å§‹ ç¬¬äºŒä¸ªå‚æ•°æ˜¯å€¼ æ‰€ä»¥æˆ‘ä»¬å°†ä¸Šé¢çš„ç™»å½•ä»£ç ä¿®æ”¹å¦‚ä¸‹ public static boolean login(String user, String password) &#123; Connection conn = null; PreparedStatement preparedStatement = null; ResultSet resultSet = null; try &#123; conn = JDBCUtils.getConnection(); //ä½¿ç”¨?ä½œä¸ºå ä½ç¬¦ String sql = \"select * from user where user = ? and password = ?\"; //åˆ›å»ºPreparedStatementå¯¹è±¡ preparedStatement = conn.prepareStatement(sql); //ä¸ºå ä½ç¬¦èµ‹å€¼ preparedStatement.setString(1, user); preparedStatement.setString(2, password); //ä¸éœ€è¦ä¼ å…¥sql resultSet = preparedStatement.executeQuery(); //å¦‚æœè¿”å›æœ‰æ•°æ®åˆ™è¿”å›true å¦åˆ™è¿”å›false return resultSet.next(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.close(conn, preparedStatement, resultSet); &#125; return false;&#125; è¿™æ—¶è¿˜æ˜¯ä½¿ç”¨ä¸ä¸Šé¢ç›¸åŒçš„æ“ä½œ è¯·è¾“å…¥ç”¨æˆ·åï¼šdaddè¯·è¾“å…¥å¯†ç ï¼ša or 'a' = 'a'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ åœ¨å®é™…ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨PreparedStatementï¼Œå› ä¸ºå®ƒä¸ä»…å¯ä»¥é˜²æ­¢SQLæ³¨å…¥ï¼Œå¹¶ä¸”æ•ˆç‡æ›´é«˜ã€‚ JDBCäº‹åŠ¡äº‹åŠ¡å°±æ˜¯ä¸€ç»„sqlæ“ä½œï¼Œè¿™ä¸€ç»„sqlæ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚æ¯”å¦‚è½¬è´¦ï¼Œä¸€æ–¹é’±çš„æ”¯å‡ºä¸å¦ä¸€æ–¹é’±çš„åˆ°è´¦å¿…é¡»åŒæ—¶æˆåŠŸæˆ–è€…åŒæ—¶å¤±è´¥ï¼Œæ²¡æœ‰è¿™é‡Œé’±è½¬å‡ºå»äº†ï¼Œå¦ä¸€æ–¹å´æ²¡æœ‰åˆ°è´¦çš„æƒ…å†µã€‚æœ‰å…³äº‹åŠ¡ä¸€èˆ¬åŒ…å«ä¸‹é¢ä¸‰ä¸ªæ“ä½œ å¼€å¯äº‹åŠ¡ setAutoCommit(false) å¼€å¯äº‹åŠ¡åï¼Œç›´è‡³æäº¤ï¼Œæ‰§è¡Œçš„sqlè¯­å¥ä¸ä¼šåœ¨æ•°æ®åº“ä¸­ç”Ÿæ•ˆï¼Œè€Œæ˜¯ä¼šå†™åœ¨æ—¥å¿—ä¸­ï¼Œåªæœ‰æäº¤åæ‰ä¼šå°†æ ¹æ®æ—¥å¿—ä¿®æ”¹æ•°æ®åº“ä¸­çš„æ•°æ® é»˜è®¤æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ¯æ¬¡æ‰§è¡Œä¸€æ¬¡sqlå‘½ä»¤éƒ½ä¼šæ›´æ”¹æ•°æ®åº“ä¸­çš„å†…å®¹ï¼Œæˆ‘ä»¬å°†è‡ªåŠ¨æäº¤å…³é—­å°±ç›¸å½“äºæ˜¯å¼€å¯äº†äº‹åŠ¡ æäº¤äº‹åŠ¡ commit() å›æ»šäº‹åŠ¡ rollback() äº‹åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¦å›åˆ°æ‰§è¡Œäº‹åŠ¡å‰çš„çŠ¶æ€ï¼Œè¿™æ—¶ä¼šæŠŠæ—¥å¿—ä¸­çš„å†…å®¹æ¸…ç©º ä¸€èˆ¬åœ¨catchä»£ç å—ä¸­è¿›è¡Œå›æ»šæ“ä½œ å‡è®¾æœ‰ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªè¡¨ +----+------+---------+| id | NAME | balance |+----+------+---------+| 1 | å¼ ä¸‰ | 2000 || 2 | æå›› | 1000 |+----+------+---------+ ç°åœ¨å¼ ä¸‰è¦ç»™æå››è½¬500å—é’± import java.sql.Connection;import java.sql.PreparedStatement;import java.sql.SQLException;public class Demo04 &#123; public static void main(String[] args) &#123; //è½¬è´¦çš„é‡‘é¢ double money = 500; Connection connection = null; PreparedStatement preparedStatement1 = null; PreparedStatement preparedStatement2 = null; try &#123; connection = JDBCUtils.getConnection(); String sql1 = \"update account set balance = balance - ? where id = ?\"; String sql2 = \"update account set balance = balance + ? where id = ?\"; preparedStatement1 = connection.prepareStatement(sql1); preparedStatement1.setDouble(1, money); preparedStatement1.setInt(2, 1); preparedStatement2 = connection.prepareStatement(sql2); preparedStatement2.setDouble(1, money); preparedStatement2.setInt(2, 2); preparedStatement1.executeUpdate(); preparedStatement2.executeUpdate(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; finally &#123; JDBCUtils.close(connection, preparedStatement1); //å› ä¸ºconnectionå·²ç»å…³é—­äº†ï¼Œæ‰€ä»¥ä¼ å…¥null JDBCUtils.close(null, preparedStatement2); &#125; &#125;&#125; æ‰§è¡Œä¸Šé¢çš„ç¨‹åºç„¶åå†æ¬¡æŸ¥è¡¨å¾— +----+------+---------+| id | NAME | balance |+----+------+---------+| 1 | å¼ ä¸‰ | 1500 || 2 | æå›› | 1500 |+----+------+---------+ ä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨æ‰§è¡Œå¼ ä¸‰æ”¯å‡º500å—åæ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªå¼‚å¸¸ï¼Œè¿™æ—¶æå››åˆ™ä¸ä¼šæ”¶åˆ°500å— preparedStatement1.executeUpdate();int i = 3 / 0;preparedStatement2.executeUpdate(); +----+------+---------+| id | NAME | balance |+----+------+---------+| 1 | å¼ ä¸‰ | 1000 || 2 | æå›› | 1500 |+----+------+---------+ å¼ ä¸‰çš„é’±å‡å°‘äº†500å—ï¼Œä½†æ˜¯æå››å´æ²¡æœ‰æ”¶åˆ°ã€‚è¿™å°±æ˜¯é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¼€å¯äº‹åŠ¡ï¼Œå¹¶ä¸”åœ¨catchä»£ç å—ä¸­è¿›è¡Œå›æ»š import java.sql.Connection;import java.sql.PreparedStatement;import java.sql.SQLException;public class Demo04 &#123; public static void main(String[] args) &#123; double money = 500; Connection connection = null; PreparedStatement preparedStatement1 = null; PreparedStatement preparedStatement2 = null; try &#123; connection = JDBCUtils.getConnection(); //å¼€å¯äº‹åŠ¡ connection.setAutoCommit(false); String sql1 = \"update account set balance = balance - ? where id = ?\"; String sql2 = \"update account set balance = balance + ? where id = ?\"; preparedStatement1 = connection.prepareStatement(sql1); preparedStatement1.setDouble(1, money); preparedStatement1.setInt(2, 1); preparedStatement2 = connection.prepareStatement(sql2); preparedStatement2.setDouble(1, money); preparedStatement2.setInt(2, 2); preparedStatement1.executeUpdate(); int i = 3 / 0; preparedStatement2.executeUpdate(); //æäº¤äº‹åŠ¡ connection.commit(); &#125; catch (Exception e) &#123; try &#123; if (connection != null) &#123; //å›æ»šäº‹åŠ¡ connection.rollback(); &#125; &#125; catch (SQLException e1) &#123; e1.printStackTrace(); &#125; e.printStackTrace(); &#125; finally &#123; JDBCUtils.close(connection, preparedStatement1); JDBCUtils.close(null, preparedStatement2); &#125; &#125;&#125; è¿™æ¬¡å†æ¬¡æ‰§è¡Œ +----+------+---------+| id | NAME | balance |+----+------+---------+| 1 | å¼ ä¸‰ | 1000 || 2 | æå›› | 1500 |+----+------+---------+ è™½ç„¶è¿˜æ˜¯å‘ç”Ÿäº†å¼‚å¸¸ï¼Œä½†æ˜¯å¼ ä¸‰å’Œæå››å¹¶æ²¡æœ‰å‘ç”Ÿä¸Šé¢ä¸€æ–¹è½¬å‡ºä¸€æ–¹æ²¡æœ‰åˆ°è´¦çš„æƒ…å†µï¼Œè€Œæ˜¯è½¬è´¦å¤±è´¥ã€‚ æ•°æ®åº“è¿æ¥æ± æ¯æ¬¡æˆ‘ä»¬ä½¿ç”¨å®Œè¿æ¥å¯¹è±¡åéƒ½ä¼šå°†è¯¥å¯¹è±¡é”€æ¯ï¼Œç„¶åä¸‹æ¬¡éœ€è¦è¿æ¥å¯¹è±¡æ—¶åˆéœ€è¦é‡æ–°åˆ›å»ºã€‚å¦‚æœè€ƒè™‘åˆ°æœ‰é¢‘ç¹çš„æ“ä½œæ•°æ®åº“çš„æ“ä½œï¼Œæ¯æ¬¡åˆ›å»ºé”€æ¯çš„å¼€é”€æ˜¯å¾ˆå¤§çš„ï¼Œæ‰€ä»¥å°±æœ‰äº†æ•°æ®åº“è¿æ¥æ± ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„è¿æ¥å¯¹è±¡ï¼Œå½“æˆ‘ä»¬éœ€è¦æ—¶å°±ä»é‡Œé¢æ‹¿ï¼Œç”¨å®Œä¹‹åä¸æ˜¯é”€æ¯ï¼Œè€Œæ˜¯å°†å¯¹è±¡å½’è¿˜ç»™è¿æ¥æ± ï¼Œè¿™æ ·åšèƒ½å¤Ÿæœ‰æ•ˆçš„æå‡ç¨‹åºçš„æ€§èƒ½ã€‚Javaå®šä¹‰äº†ä¸€ä¸ªDataSourceæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥æ¥å£çš„getConnection()æ–¹æ³•è·å–ä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡close()æ–¹æ³•å½’è¿˜è¿™ä¸ªè¿æ¥(å‰ææ˜¯è¿™ä¸ªè¿æ¥æ˜¯ä»è¿æ¥æ± ä¸­è·å¾—çš„)ã€‚DataSourceæ¥å£çš„å®ç°æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒï¼Œæˆ‘ä»¬åªè¦çŸ¥é“å¦‚ä½•ä½¿ç”¨å³å¯ï¼Œæˆ‘ä»¬å­¦ä¹ å¦‚ä½•ä½¿ç”¨ä¸¤ç§æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ C3P0 Druidï¼šé˜¿é‡Œå·´å·´æä¾›ï¼Œç›®å‰æœ€å¥½çš„æ•°æ®åº“è¿æ¥æ± ä¹‹ä¸€ C3P0C3P0çš„ä½¿ç”¨æ­¥éª¤ å¯¼å…¥jaråŒ… c3p0-0.9.5.2.jar mchange-commons-java-0.2.12.jar å®šä¹‰é…ç½®æ–‡ä»¶ åªèƒ½ä¸ºc3p0-config.xmlæˆ–c3p0.propertiesï¼Œé…ç½®æ–‡ä»¶éœ€æ”¾åœ¨srcç›®å½•ä¸‹ ä½¿ç”¨å®ç°ç±»ComboPooledDataSourceè·å¾—è¿æ¥æ± å¯¹è±¡ ä¸‹é¢ç»™å‡ºé…ç½®æ–‡ä»¶c3p0-config.xmlçš„å†…å®¹ &lt;c3p0-config&gt; &lt;!-- ä½¿ç”¨é»˜è®¤çš„é…ç½®è¯»å–è¿æ¥æ± å¯¹è±¡ --&gt; &lt;default-config&gt; &lt;!-- è¿æ¥å‚æ•° --&gt; &lt;property name=\"driverClass\"&gt;com.mysql.jdbc.Driver&lt;/property&gt; &lt;property name=\"jdbcUrl\"&gt;jdbc:mysql:///db1&lt;/property&gt; &lt;property name=\"user\"&gt;root&lt;/property&gt; &lt;property name=\"password\"&gt;root&lt;/property&gt; &lt;!-- è¿æ¥æ± å‚æ•° --&gt; &lt;!--åˆå§‹è¿æ¥å¯¹è±¡æ•°--&gt; &lt;property name=\"initialPoolSize\"&gt;5&lt;/property&gt; &lt;!--æœ€å¤§è¿æ¥å¯¹è±¡æ•°--&gt; &lt;property name=\"maxPoolSize\"&gt;10&lt;/property&gt; &lt;!--æœ€å¤§ç­‰å¾…æ—¶é—´ 3s--&gt; &lt;property name=\"checkoutTimeout\"&gt;3000&lt;/property&gt; &lt;/default-config&gt;&lt;/c3p0-config&gt; ä¸‹é¢ç»™å‡ºä¸€ä¸ªä½¿ç”¨çš„ç¤ºä¾‹ import com.mchange.v2.c3p0.ComboPooledDataSource;import javax.sql.DataSource;import java.sql.Connection;import java.sql.SQLException;public class Demo05 &#123; public static void main(String[] args) throws SQLException &#123; //è·å¾—è¿æ¥æ± å¯¹è±¡ DataSource ds = new ComboPooledDataSource(); //è·å–è¿æ¥ Connection conn = ds.getConnection(); &#125;&#125; DruidDruidçš„ä½¿ç”¨æ­¥éª¤ å¯¼å…¥jaråŒ… druid-1.0.9.jar å®šä¹‰é…ç½®æ–‡ä»¶ .propertiesæ–‡ä»¶ å¯ä»¥æ”¾ç½®åœ¨ä»»ä½•çš„åœ°æ–¹ ä½¿ç”¨å·¥å‚æ–¹æ³•DruidDataSourceFactory.createDataSource()è·å¾—è¿æ¥æ±  éœ€è¦ä¼ å…¥ä¸€ä¸ªPropertieså¯¹è±¡(é…ç½®æ–‡ä»¶) ä¸‹é¢ç»™å‡ºdruid.propertiesçš„å†…å®¹ driverClassName=com.mysql.jdbc.Driverurl=jdbc:mysql:///db1username=rootpassword=rootinitialSize=5maxActive=10maxWait=3000 æƒ³å¿…ä¸Šé¢çš„å„å‚æ•°çš„å«ä¹‰ä¸å¿…è§£é‡Šï¼Œé‚£ä¹ˆå°±ç»™å‡ºä¸€ä¸ªä½¿ç”¨Druidçš„ä¾‹å­ import com.alibaba.druid.pool.DruidDataSourceFactory;import javax.sql.DataSource;import java.io.InputStream;import java.sql.Connection;import java.util.Properties;public class Demo06 &#123; public static void main(String[] args) throws Exception &#123; Properties pro = new Properties(); //å¾—åˆ°é…ç½®æ–‡ä»¶çš„è¾“å…¥æµå¯¹è±¡ InputStream is = Demo06.class.getClassLoader().getResourceAsStream(\"druid.properties\"); pro.load(is); DataSource ds = DruidDataSourceFactory.createDataSource(pro); Connection conn = ds.getConnection(); &#125;&#125; å·¥å…·ç±»æˆ‘ä»¬å‘ç°æ¯æ¬¡ä½¿ç”¨è¿æ¥æ± æ—¶ä¼šæœ‰å¾ˆå¤šé‡å¤çš„æ“ä½œï¼ŒåŒä¸Šé¢æˆ‘ä»¬åº”è¯¥å†™ä¸€ä¸ªå·¥å…·ç±»JDBCUtilså°†ä¸€äº›æ“ä½œæŠ½ç¦»å‡ºæ¥ï¼ŒJDBCUtilsç±»å¦‚ä¸‹ import com.alibaba.druid.pool.DruidDataSourceFactory;import javax.sql.DataSource;import java.io.IOException;import java.sql.*;import java.util.Properties;public class JDBCUtils &#123; private static DataSource ds; //è¯»å–é…ç½®æ–‡ä»¶ åˆå§‹åŒ–è¿æ¥æ± å¯¹è±¡ static &#123; Properties pro = new Properties(); try &#123; pro.load(JDBCUtils.class.getClassLoader().getResourceAsStream(\"druid.properties\")); ds = DruidDataSourceFactory.createDataSource(pro); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; //è¿”å›è¿æ¥å¯¹è±¡ public static Connection getConnection() throws SQLException&#123; return ds.getConnection(); &#125; //å…³é—­èµ„æº public static void close(Connection conn, Statement stam) &#123; if (stam != null) &#123; try &#123; stam.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; if (conn != null) &#123; try &#123; conn.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125; public static void close(Connection conn, Statement stam, ResultSet resultSet) &#123; if (resultSet != null) &#123; try &#123; resultSet.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; //å¤ç”¨ä¸Šé¢çš„ä»£ç  close(conn, stam); &#125; //è¿”å›è¿æ¥æ± å¯¹è±¡ public static DataSource getDataSource() &#123; return ds; &#125;&#125; Spring JDBCSpringå¯¹JDBCè¿›è¡Œäº†ç®€å•çš„å°è£…ï¼Œæä¾›äº†ä¸€ä¸ªJdbcTemplateå¯¹è±¡æ¥ç®€åŒ–JDBCçš„å¼€å‘ï¼Œä½¿ç”¨æ­¥éª¤ä¸º å¯¼å…¥jaråŒ… spring-beans-5.0.0.RELEASE.jar spring-core-5.0.0.RELEASE.jar spring-jdbc-5.0.0.RELEASE.jar spring-tx-5.0.0.RELEASE.jar commons-logging-1.2.jar åˆ›å»ºJdbcTemplateå¯¹è±¡ new JdbcTemplate(ds)ï¼šdsä¸ºæ•°æ®åº“è¿æ¥æ± å¯¹è±¡ ä½¿ç”¨JdbcTemplateå¯¹è±¡çš„æ–¹æ³•å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ update()ï¼šæ‰§è¡ŒDMLè¯­å¥ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºsqlè¯­å¥ ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯å˜å‚æ•°ï¼Œæ˜¯å ä½ç¬¦?æ‰€å¯¹åº”çš„å€¼ queryForMap()ï¼šå°†ç»“æœå°è£…ä¸ºMapå¯¹è±¡ åªèƒ½æŸ¥è¯¢ä¸€è¡Œæ•°æ®ï¼Œå°†ç»“æœå°è£…ä¸ºMapå¯¹è±¡ å°†åˆ—åæœ€ä¸ºKeyï¼Œå°†å­—æ®µå€¼ä½œä¸ºValue queryForList()ï¼šå°†ç»“æœå°è£…ä¸ºListå¯¹è±¡ æŸ¥è¯¢å¤šè¡Œæ•°æ®ï¼Œæ¯ä¸€è¡Œæ•°æ®å°è£…ä¸ºä¸€ä¸ªMapå¯¹è±¡ï¼Œè¿™äº›Mapå¯¹è±¡ä¼šè¢«æ·»åŠ åˆ°ä¸€ä¸ªListé›†åˆä¸­è¿”å› queryForObject()ï¼šå°†ç»“æœå°è£…ä¸ºå¯¹è±¡ ç”¨ä»¥æŸ¥è¯¢ä¸€äº›èšåˆå‡½æ•° query()ï¼šå°†ç»“æœå°è£…ä¸ºJavaBeanå¯¹è±¡ ä¸‹é¢å°±æ¥åšä¸€ä¸ªç®€å•çš„æ¼”ç¤ºï¼Œå‡è®¾db1æ•°æ®åº“ä¸­æœ‰ä¸€å¼ è¡¨accountå…¶ä¸­å†…å®¹å¦‚ä¸‹ +----+------+---------+| id | NAME | balance |+----+------+---------+| 1 | å¼ ä¸‰ | 1000 || 2 | æå›› | 1000 |+----+------+---------+ updateç°åœ¨æˆ‘ä»¬ä½¿ç”¨updateå‘½ä»¤ä¿®æ”¹å¼ ä¸‰çš„balanceä¸º2000 import org.junit.Test;import org.springframework.jdbc.core.JdbcTemplate;public class Demo07 &#123; private JdbcTemplate template = new JdbcTemplate(JDBCUtils.getDataSource()); //Junitå•å…ƒæµ‹è¯• æ–¹æ³•å¯ä»¥å•ç‹¬æ‰§è¡Œ ä¸éœ€è¦å†™åœ¨mainæ–¹æ³•ä¸­ @Test public void testUpdate() &#123; String sql = \"update account set balance = 2000 where id = ?\"; template.update(sql, 1); &#125;&#125; æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢accountè¡¨ +----+------+---------+| id | NAME | balance |+----+------+---------+| 1 | å¼ ä¸‰ | 2000 || 2 | æå›› | 1000 |+----+------+---------+ queryForMapæŸ¥è¯¢å¼ ä¸‰æ‰€åœ¨è¡Œ(id = 1)ï¼Œå¾—åˆ°ä¸€ä¸ªMapå¯¹è±¡ï¼Œæˆ‘ä»¬å°†å…¶æ‰“å°å‡ºæ¥ @Testpublic void testQueryForMap() &#123; String sql = \"select * from account where id = ?\"; Map map = template.queryForMap(sql, 1); System.out.println(map);&#125; ç»“æœä¸º &#123;id=1, NAME=å¼ ä¸‰, balance=2000.0&#125; queryForListå¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥è¯¢å¤šæ¡æ•°æ®æ€ä¹ˆåŠï¼Œè¿™ä¸ªæ—¶å€™å°±ä½¿ç”¨queryForListï¼Œå®ƒä¼šå°†æ¯æ¡æ•°æ®å°è£…ä¸ºMapé›†åˆï¼Œç„¶åå°†è¿™äº›Mapé›†åˆæ·»åŠ åˆ°Listé›†åˆä¸­ @Testpublic void testQueryForList() &#123; String sql = \"select * from account\"; List&lt;Map&lt;String, Object&gt;&gt; mapList = template.queryForList(sql); for (Map&lt;String, Object&gt; map: mapList) &#123; System.out.println(map); &#125;&#125; å¾—åˆ°çš„ç»“æœä¸º &#123;id=1, NAME=å¼ ä¸‰, balance=2000.0&#125;&#123;id=2, NAME=æå››, balance=1000.0&#125; queryæ›´å¤šçš„æ—¶å€™æˆ‘ä»¬å¸Œæœ›å°†å¾—åˆ°çš„ç»“æœå°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œç°åœ¨æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±»Accountå¦‚ä¸‹ public class Account &#123; private Integer id; private String name; private Double balance; public Integer getId() &#123; return id; &#125; public void setId(Integer id) &#123; this.id = id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public Double getBalance() &#123; return balance; &#125; public void setBalance(Double balance) &#123; this.balance = balance; &#125; @Override public String toString() &#123; return \"Account&#123;\" + \"id=\" + id + \", name='\" + name + '\\'' + \", balance=\" + balance + '&#125;'; &#125;&#125; ç°åœ¨æˆ‘ä»¬å¸Œæœ›å°†è·å¾—ç»“æœå°è£…ä¸ºä¸€ä¸ªä¸ªAccountå¯¹è±¡ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨query()æ–¹æ³•äº†ï¼Œqueryæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯sqlè¯­å¥ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯RowMapper&lt;&gt;çš„å®ç°ç±»ï¼Œè¿™ä¸ªç±»æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Springæä¾›å¥½çš„å®ç°ç±»ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨Springæä¾›å¥½çš„å®ç°ç±»BeanPropertyRowMapper&lt;&gt;ï¼Œæˆ‘ä»¬åªè¦å°†Accountçš„classå±æ€§ä¼ é€’è¿›å»å³å¯ @Testpublic void testQuery() &#123; String sql = \"select * from account\"; List&lt;Account&gt; list = template.query(sql, new BeanPropertyRowMapper&lt;Account&gt;(Account.class)); for (Account account : list) &#123; System.out.println(account); &#125;&#125; ç»“æœä¸º Account&#123;id=1, name='å¼ ä¸‰', balance=2000.0&#125;Account&#123;id=2, name='æå››', balance=1000.0&#125; queryForObjectç°åœ¨æˆ‘ä»¬æ¥æŸ¥è¯¢accountè¡¨ä¸­å³å¤šå°‘æ¡æ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨èšåˆå‡½æ•°count()ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªlongç±»å‹çš„æ•°å­—ï¼Œæˆ‘ä»¬ä½¿ç”¨queryForObject()æŸ¥è¯¢ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯sqlå‘½ä»¤ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿”å›ç±»å‹çš„classå±æ€§ @Testpublic void testQueryForObject() &#123; String sql = \"select count(id) from account\"; Long num = template.queryForObject(sql, Long.class); System.out.println(num);&#125; ç»“æœä¸º 2","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"JDBC","slug":"JDBC","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JDBC/"}]},{"title":"Javaæ³¨è§£","date":"2019-08-09T16:00:00.000Z","path":"/Javaæ³¨è§£/","text":"æˆ‘ä»¬åœ¨ä¹‹å‰å°±æœ‰æ¥è§¦è¿‡æ³¨è§£ï¼Œæ¯”å¦‚@Overrideï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬æ£€æŸ¥æ˜¯å¦é‡å†™äº†æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå®ƒåœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šæŠ¥é”™ã€‚æ³¨è§£ä¸€èˆ¬æœ‰ä¸‹é¢ä¸‰ä¸ªåŠŸèƒ½ ç¼–è¯‘æ£€æŸ¥ æ¯”å¦‚@Override ä»£ç åˆ†æ è¯»å–æ³¨è§£çš„å±æ€§ï¼Œç„¶åä½¿ç”¨åå°„æŠ€æœ¯è¿›è¡Œåˆ†æ ç¼–å†™æ–‡æ¡£ æ¯”å¦‚javadoc ç³»ç»Ÿè‡ªå®šçš„æ³¨è§£ä¸‹é¢ä»‹ç»ä¸‰ä¸ªç³»ç»Ÿè‡ªå®šä¹‰çš„æ³¨è§£ @Override æ£€æŸ¥æ–¹æ³•æ˜¯å¦æ˜¯é‡å†™çˆ¶ç±»çš„æ–¹æ³• @Deprecated å°†è¯¥æ³¨è§£æ ‡è®°çš„å†…å®¹æ˜¾ç¤ºä¸ºå·²è¿‡æ—¶ @SuppressWarnings(â€œallâ€) å‹åˆ¶æ‰€æœ‰çš„è­¦å‘Š å¦‚æœæœ‰ä¸€ä¸ªæ–¹æ³•è¢«@Deprecatedä¿®é¥°äº†ï¼Œå¦‚ @Deprecatedpublic static void show() &#123; System.out.println(\"show ...\");&#125; é‚£ä¹ˆåœ¨è°ƒç”¨æ—¶ä¼šè¿™æ · ä»£è¡¨è¿™ä¸ªæ–¹æ³•å·²ç»è¿‡æ—¶äº†ï¼Œä½†æ˜¯ä½ æƒ³è°ƒç”¨è¿˜æ˜¯å¯ä»¥è°ƒç”¨çš„ã€‚ åœ¨æˆ‘ä»¬å†™ä»£ç æ—¶ï¼Œç»å¸¸ä¼šå¼¹å‡ºä¸€äº›è­¦å‘Šï¼Œå¦‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@SuppressWarnings(â€œallâ€)è¡¨ç¤ºå‹åˆ¶æ‰€æœ‰çš„è­¦å‘Š è¿™æ—¶ç±»é‡Œé¢æ‰€æœ‰çš„è­¦å‘Šéƒ½å‹åˆ¶äº†ã€‚ è‡ªå®šä¹‰æ³¨è§£æ ¼å¼è¦å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œé¦–å…ˆæˆ‘ä»¬çœ‹å®ƒçš„æ ¼å¼æ˜¯ä»€ä¹ˆ å…ƒæ³¨è§£public @interface æ³¨è§£åç§° &#123;&#125; å…¶å®æ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œè¿™äº›æŠ½è±¡æ–¹æ³•æˆ‘ä»¬åˆæŠŠå®ƒå«åšå±æ€§ï¼Œè¿™äº›æŠ½è±¡æ–¹æ³•çš„è¿”å›å€¼åªèƒ½æ˜¯ä¸‹é¢è¿™äº›ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹ String æšä¸¾ æ³¨è§£ ä»¥ä¸Šç±»å‹çš„æ•°ç»„ ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªMyAnnoçš„æ³¨è§£ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªå±æ€§ï¼Œnameå’Œage import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;//å…ƒæ³¨è§£æš‚æ—¶ä¸å¿…å…³æ³¨@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface MyAnno &#123; String name(); int age();&#125; ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨MyAnno @MyAnno(name=\"å°æ˜\",age=18)public static void show() &#123; System.out.println(\"show ...\");&#125; ä½¿ç”¨æ³¨è§£æ—¶ï¼Œè¦ä¸ºå±æ€§èµ‹å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”æ ¼å¼ä¸ºå±æ€§å=å€¼çš„å½¢å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨MyAnnoä¸­è®¾å®šé»˜è®¤å€¼ï¼Œè¿™æ ·åœ¨ä½¿ç”¨æ³¨è§£æ—¶å°±å¯ä»¥ä¸èµ‹å€¼ï¼Œå¦‚ String name() default \"å°æ˜\";int age() default 18; ç°åœ¨æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶å¯ä»¥ä¸èµ‹å€¼ @MyAnno()public static void show() &#123; System.out.println(\"show ...\");&#125; å¦‚æœæ³¨è§£é‡Œé¢åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œå¹¶ä¸”å±æ€§åä¸ºvalueï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨æ³¨è§£æ—¶å¯ä»¥çœç•¥valueç›´æ¥èµ‹å€¼ï¼Œå¦‚ import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface MyAnno &#123; int value();&#125; é‚£ä¹ˆä½¿ç”¨æ—¶ç›´æ¥èµ‹å€¼ @MyAnno(12)public static void show() &#123; System.out.println(\"show ...\");&#125; æ•°ç»„çš„èµ‹å€¼ä¸ºå±æ€§å = {}çš„å½¢å¼ï¼Œå¦‚æœé‡Œé¢åªæœ‰ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆèŠ±æ‹¬å·å¯ä»¥çœç•¥ã€‚ å…ƒæ³¨è§£å…ƒæ³¨è§£å°±æ˜¯æè¿°æ³¨è§£çš„æ³¨è§£ï¼Œè¿™é‡Œåªä»‹ç»ä¸¤ä¸ª @Target() è¡¨ç¤ºæ³¨è§£èƒ½ä½œç”¨çš„ä½ç½®ï¼Œæ¯”å¦‚ä½œç”¨åœ¨ç±»ä¸Š å®ƒæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œç±»å‹æ˜¯ElementTypeæšä¸¾ç±»å‹ æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨TYPE, FIELD, METHODåˆ†åˆ«è¡¨ç¤ºèƒ½å¤Ÿä½œç”¨åœ¨ç±»ã€æˆå‘˜å˜é‡ã€æ–¹æ³•ä¸Š @RETENTION() è¡¨ç¤ºæ³¨è§£è¢«ä¿ç•™çš„é˜¶æ®µ å®ƒä¹Ÿæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œç±»å‹æ˜¯RetentionPolicyæšä¸¾ç±»å‹ æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨RetentionPolicy.RUNTIMEè¡¨ç¤ºä¿ç•™åˆ°è¿è¡Œæ—¶ è§£ææ³¨è§£åœ¨åå°„é‚£é‡Œæ ¹æ®é…ç½®æ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨æ–¹æ³•ï¼Œç°åœ¨æˆ‘ä»¬å°†æ ¹æ®æ³¨è§£çš„å±æ€§æ¥åˆ›å»ºä¸€ä¸ªç±»çš„å¯¹è±¡å’Œè°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œç°åœ¨æœ‰ä»¥ä¸‹æ³¨è§£ import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)public @interface MyAnno &#123; String className(); String methodName();&#125; æ–°å»ºç±»ä½¿ç”¨è¯¥æ³¨è§£ import java.lang.annotation.Annotation;import java.lang.annotation.Target;import java.lang.reflect.Method;@MyAnno(className = \"Animal\", methodName = \"eat\")public class TestAnno &#123; public static void main(String[] args) throws Exception &#123; //è·å–è¯¥ç±»çš„Classå¯¹è±¡ Class&lt;TestAnno&gt; cla = TestAnno.class; //è·å–æ³¨è§£ ä¼šåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªè¯¥æ³¨è§£çš„å­ç±»å®ç°å¯¹è±¡ MyAnno an = cla.getAnnotation(MyAnno.class); //è°ƒç”¨æ–¹æ³•ä¼šå°†å±æ€§å€¼è¿”å› String className = an.className(); String methodName = an.methodName(); //æ ¹æ®ç±»åè·å–Classå¯¹è±¡ Class cls = Class.forName(className); //è·å–æ–¹æ³• Method method = cls.getMethod(methodName); //ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ Object o = cls.newInstance(); //è°ƒç”¨æ–¹æ³• method.invoke(o); &#125;&#125; è¿è¡Œç»“æœä¸º eat ... è¿™æ—¶æˆ‘ä»¬åªè¦æ”¹å˜æ³¨è§£çš„å±æ€§å€¼ï¼Œå°±å¯ä»¥åˆ›å»ºä»»æ„ç±»çš„å¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"æ³¨è§£","slug":"æ³¨è§£","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%B3%A8%E8%A7%A3/"}]},{"title":"Javaå¼‚å¸¸","date":"2019-08-04T16:00:00.000Z","path":"/Javaå¼‚å¸¸/","text":"æ‰€è°“çš„å¼‚å¸¸å°±æ˜¯ä¸æ­£å¸¸ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰å¾ˆå¤šåœ°æ–¹æœ‰ç¢°åˆ°å¼‚å¸¸ï¼Œæ¯”å¦‚å¯¹è±¡å‘ä¸‹è½¬å‹æ—¶æœ‰ç¢°åˆ°ClassCastExceptionã€‚æ‰€æœ‰çš„å¼‚å¸¸éƒ½ç»§æ‰¿è‡ªExceptionç±»ã€‚Exceptionä¸‹é¢æœ‰ä¸€ä¸ªé‡è¦çš„çš„å­ç±»å«åšRuntimeExceptionã€‚ å¼‚å¸¸åˆ†ä¸ºç¼–è¯‘æœŸå¼‚å¸¸å’Œè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¦‚Exceptionå°±æ˜¯ç¼–è¯‘æœŸå¼‚å¸¸ï¼Œè€ŒRuntimeExceptionæ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¦‚æœåœ¨æ–¹æ³•ä¸­æŠ›å‡ºäº†ä¸€ä¸ªç¼–è¯‘æœŸå¼‚å¸¸ï¼Œé‚£ä¹ˆå¿…é¡»å¤„ç†è¯¥å¼‚å¸¸ï¼Œç»§ç»­å‘ä¸ŠæŠ›å‡ºæˆ–è€…å°±åœ°å¤„ç†ï¼Œè€Œå¯¹äºè¿è¡Œå¼‚å¸¸å¯ä»¥é€‰æ‹©ä¸å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šé»˜è®¤äº¤ç»™JVMå¤„ç†ã€‚ å¤„ç†å¼‚å¸¸çš„è¿‡ç¨‹é¦–å…ˆJVMæ£€æµ‹åˆ°äº†å¼‚å¸¸ï¼Œè¿™æ—¶JVMä¼šåˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«å‘ç”Ÿé”™è¯¯çš„å†…å®¹ã€åŸå› å’Œä½ç½®ã€‚å¦‚æœåœ¨å‘ç”Ÿå¼‚å¸¸å¤„çš„æ–¹æ³•å†…æ²¡æœ‰å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œé‚£ä¹ˆJVMä¼šæŠŠè¯¥å¼‚å¸¸æŠ›ç»™è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå¦‚æœè¯¥è°ƒç”¨è€…ä¹Ÿæ²¡æœ‰å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œé‚£ä¹ˆå°±ä¼šä¸€ç›´å‘ä¸ŠæŠ›å‡ºï¼Œç›´åˆ°é‡åˆ°mainæ–¹æ³•ï¼Œå¦‚æœmainæ–¹æ³•ä¹Ÿæ²¡æœ‰å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œé‚£ä¹ˆè¿™æ—¶å¼‚å¸¸å°±ä¼šæŠ›ç»™JVMï¼ŒJVMä¼šæ‰“å°çº¢è‰²å­—ä½“è‡³æ§åˆ¶å°ï¼Œå¹¶ä¸”ç»ˆæ­¢Javaç¨‹åºçš„è¿è¡Œã€‚ ä¸å¼‚å¸¸æœ‰å…³çš„å…³é”®å­—æœ‰äº”ä¸ªï¼Œåˆ†åˆ«ä¸ºthrow, throws, try, catch, finallyã€‚ä¸‹é¢ä»‹ç»è¿™äº”ä¸ªå…³é”®å­—çš„ä½œç”¨ã€‚ throwthrowå…³é”®å­—ç”¨äºåœ¨æ–¹æ³•ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå¦‚ä¸‹ public static double divide(double a, double b) &#123; if (b == 0) &#123; throw new ArithmeticException(\"é™¤0\"); &#125; return a/b;&#125; è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯a/bï¼Œåœ¨æ£€æµ‹åˆ°b=0æ—¶ï¼Œæˆ‘ä»¬æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œå¹¶ç»™å‡ºæç¤ºä¿¡æ¯â€é™¤0â€ã€‚ç°åœ¨æˆ‘ä»¬åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³• System.out.println(divide(5,0)); ç”±äºæˆ‘ä»¬æ²¡æœ‰å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥ç¨‹åºä¼šè¿›è¡Œç»ˆç»“å¹¶åœ¨æ§åˆ¶å°æ‰“å°å‡ºä¿¡æ¯ï¼š æ³¨æ„ï¼š throwå¿…é¡»å†™åœ¨æ–¹æ³•çš„å†…éƒ¨ newçš„å¿…é¡»æ˜¯Exceptionæˆ–å…¶å­ç±» throwsthrowsçš„ä½œç”¨æ˜¯å£°æ˜å¼‚å¸¸ï¼Œæˆ–è€…è¯´å«æŠŠå¼‚å¸¸æŠ›ç»™è°ƒç”¨è€…ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œç¼–è¯‘æœŸå¼‚å¸¸æ˜¯å¿…é¡»è¦è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå¤„ç†çš„åŠæ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§å°±æ˜¯æŠŠç»§ç»­å‘ä¸ŠæŠ›å‡ºï¼Œå¦ä¸€ç§å°±æ˜¯ä½¿ç”¨try-catchè¿›è¡Œå¤„ç†ã€‚è€Œthrowså°±æ˜¯å°†å¼‚å¸¸ç»§ç»­æŠ›å‡ºï¼Œç°åœ¨æˆ‘ä»¬å°†ä¸Šé¢çš„ArithmeticExceptionæ”¹ä¸ºExceptionï¼Œç”±äºExceptionä¸ºç¼–è¯‘æœŸå¼‚å¸¸ï¼Œå¿…é¡»è¿›è¡Œå¤„ç†ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ ç”±å›¾ç‰‡å¯ä»¥çŸ¥é“ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰å¯¹è¯¥å¼‚å¸¸å¤„ç†ï¼Œæ‰€ä»¥ç¼–è¯‘æ²¡æœ‰é€šè¿‡ï¼Œæˆ‘ä»¬è¿™é‡Œçš„å¤„ç†åŠæ³•å°±æ˜¯ç»§ç»­æŠ›å‡º æˆ‘ä»¬é€šè¿‡throwså…³é”®å­—æŠ›å‡ºå¼‚å¸¸äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°åœ¨mainæ–¹æ³•å¤„åˆå‡ºç°äº†é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºmainæ–¹æ³•æ²¡æœ‰å¤„ç†divide()æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå› ä¸ºdivide()æŠ›å‡ºçš„å¼‚å¸¸ä¸ºç¼–è¯‘æœŸå¼‚å¸¸ï¼Œå¿…é¡»è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œæˆ‘ä»¬ç»§ç»­å‘ä¸ŠæŠ›å‡ºï¼Œå¦‚ä¸‹ è¿™æ—¶ä»£ç å°±ä¸ä¼šæŠ¥é”™äº†ã€‚ æ³¨æ„ï¼š ä½¿ç”¨throwsæ—¶å¯ä»¥æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œå¼‚å¸¸ä¸å¼‚å¸¸ä¹‹é—´ä½¿ç”¨é€—å·éš”å¼€ å¦‚æœæŠ›å‡ºçš„å¤šä¸ªå¼‚å¸¸å…·æœ‰çˆ¶å­ç±»å…³ç³»ï¼Œé‚£ä¹ˆæŠ›å‡ºçˆ¶ç±»å¼‚å¸¸å°±å¯ä»¥äº† try-catchè™½ç„¶æˆ‘ä»¬é€šè¿‡throwså¯ä»¥å‘ä¸ŠæŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯å¦‚æœä¸è¿›è¡Œå¤„ç†çš„è¯ï¼Œæœ€ç»ˆè¿˜æ˜¯ä¼šæŠ›å‡ºç»™JVMï¼Œè€ŒJVMçš„å¤„ç†æ–¹æ³•å°±æ˜¯æ‰“å°å¼‚å¸¸ä¿¡æ¯ç„¶åç»ˆæ­¢ç¨‹åºã€‚æˆ‘ä»¬åº”è¯¥åœ¨å¼‚å¸¸å‘ç”Ÿæ—¶è¿›è¡Œæ•è·ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸ä¼šå°†å¼‚å¸¸æœ€ç»ˆæŠ›ç»™JVMï¼Œç¨‹åºå°±ä¸ä¼šç»ˆæ­¢ï¼Œè€Œæ˜¯ä¼šç»§ç»­çš„æ‰§è¡Œä¸‹å»ã€‚è¿›è¡Œæ•è·çš„ä»£ç å°±æ˜¯try-catchã€‚å…·ä½“æ ¼å¼ä¸º try &#123; //å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç &#125; catch &#123;æ¥æ”¶å¼‚å¸¸çš„å˜é‡&#125; &#123; //å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†&#125; æ‰€ä»¥æˆ‘ä»¬é‡å†™ä¸Šé¢çš„é‚£ä¸ªæ–¹æ³•ä¸º public class TestException &#123; public static void main(String[] args) &#123; try &#123; //å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç  System.out.println(divide(5,0)); &#125; catch (ArithmeticException e) &#123; //è¿™é‡Œå¯¹å¼‚å¸¸çš„å¤„ç†åªæ˜¯å°†å¼‚å¸¸æ‰“å°å‡ºæ¥ //å¤„ç†å¼‚å¸¸åå¹¶ä¸ä¼šç»ˆæ­¢ç¨‹åºï¼Œæ‰€ä»¥åé¢çš„ä»£ç è¿˜æ˜¯å¯ä»¥æ‰§è¡Œ System.out.println(e); &#125; System.out.println(\"åç»­ä»£ç \"); &#125; public static double divide(double a, double b) &#123; if (b == 0) &#123; throw new ArithmeticException(\"é™¤0\"); &#125; return a/b; &#125;&#125; è¿è¡Œç»“æœä¸º java.lang.ArithmeticException: é™¤0åç»­ä»£ç  å¯è§åé¢çš„ä»£ç æ‰§è¡Œäº†ã€‚ Throwable(å®ƒæ˜¯Exceptionçš„çˆ¶ç±»)ä¸­æœ‰ä¸‰ä¸ªå¤„ç†å¼‚å¸¸çš„æ–¹æ³• getMessage æ‰“å°ç®€çŸ­ä¿¡æ¯ toString å°±æ˜¯ä¸Šé¢çš„ç›´æ¥æ‰“å°å¯¹è±¡ printStackTrace JVMå‘æ§åˆ¶å°è¾“å‡ºçš„ä¿¡æ¯å°±æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ‰“å°çš„ä¿¡æ¯å¾ˆå…¨ finallyå…¶å®åœ¨try-catchåé¢è¿˜å¯ä»¥è·Ÿä¸€ä¸ªfinallyå—ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸çš„è¯ï¼Œcatché‡Œé¢çš„ä»£ç å—æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œè€Œfinallyé‡Œçš„ä»£ç å—ï¼Œæ— è®ºæ˜¯æ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼Œéƒ½ä¸€å®šä¼šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥finallyé‡Œé¢çš„ä»£ç å¤šç”¨æ¥é‡Šæ”¾èµ„æºçš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ try &#123; System.out.println(divide(5,0));&#125; catch (ArithmeticException e) &#123; e.printStackTrace();&#125;finally &#123; System.out.println(\"finallyä»£ç å—\");&#125; è¿™æ—¶æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸çš„ï¼Œè¾“å‡ºçš„ç»“æœä¸º å¯è§finallyé‡Œé¢çš„ä»£ç æ‰§è¡Œäº†ï¼Œç°åœ¨ä¿®æ”¹ä¸Šé¢çš„ä»£ç ä¸º try &#123; System.out.println(divide(5,1));&#125; catch (ArithmeticException e) &#123; e.printStackTrace();&#125;finally &#123; System.out.println(\"finallyä»£ç å—\");&#125; è¿™æ—¶æ˜¯ä¸ä¼šæŠ›å‡ºå¼‚å¸¸çš„ï¼Œæ‰€ä»¥catchä»£ç å—é‡Œé¢çš„ç¨‹åºä¸ä¼šè¢«æ‰§è¡Œï¼Œä½†æ˜¯finallyé‡Œé¢çš„ä»£ç å§‹ç»ˆä¼šè¢«æ‰§è¡Œï¼Œæ‰§è¡Œçš„ç»“æœä¸º æ³¨æ„ï¼š ç”±äºfinallyé‡Œé¢çš„ä»£ç ä¸€å®šæ˜¯ä¼šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¦é¿å…åœ¨finallyé‡Œé¢å†™returnè¯­å¥ï¼Œå¦åˆ™è¿”å›çš„ä¸€ç›´æ˜¯finallyé‡Œé¢çš„ç»“æœã€‚ å¤šå¼‚å¸¸æ•è·å¤šæ¬¡æ•è·ï¼Œå¤šæ¬¡å¤„ç†å³ä½¿ç”¨å¤šä¸ªtry-catchè¯­å¥å— try &#123; //å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç &#125; catch(å¼‚å¸¸1 e) &#123; //å¤„ç†å¼‚å¸¸1&#125;try &#123; //å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç &#125; catch(å¼‚å¸¸2 e) &#123; //å¤„ç†å¼‚å¸¸2&#125;... ä¸€æ¬¡æ•è·ï¼Œå¤šæ¬¡å¤„ç†å³ä¸€ä¸ªtryåŒ¹é…å¤šä¸ªcatch try &#123; //å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç &#125; catch (å¼‚å¸¸1 e) &#123; //å¤„ç†å¼‚å¸¸1&#125; catch (å¼‚å¸¸2 e) &#123; //å¤„ç†å¼‚å¸¸2&#125; ... å¦‚æœåœ¨tryä¸­å‘ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆé¦–å…ˆä¼šåˆ¤æ–­è¿™ä¸ªå¼‚å¸¸èƒ½ä¸èƒ½è¢«å¼‚å¸¸1æ¥æ”¶ï¼Œå¦‚æœèƒ½é‚£ä¹ˆå°±åœ¨ç¬¬ä¸€ä¸ªcatchä¸­è¿›è¡Œå¤„ç†ï¼Œå¦‚æœä¸èƒ½ï¼Œé‚£ä¹ˆå°±åˆ¤æ–­èƒ½ä¸èƒ½è¢«å¼‚å¸¸2æ¥æ”¶ï¼Œä»¥æ­¤ç±»æ¨ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œçˆ¶ç±»å¼‚å¸¸å¿…é¡»å­ç±»å¼‚å¸¸åé¢ã€‚å‡è®¾çˆ¶ç±»å¼‚å¸¸å†™åœ¨å‰é¢ï¼Œå¦‚æœå‘ç”Ÿäº†å­ç±»å¼‚å¸¸ï¼Œæ ¹æ®å¤šæ€ï¼Œçˆ¶ç±»èƒ½å¤Ÿæ¥æ”¶è¿™ä¸ªå¼‚å¸¸ï¼Œæ‰€ä»¥å†™åœ¨åé¢çš„å­ç±»å¼‚å¸¸æ°¸è¿œæ¥å—=æ”¶ä¸åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œå°±ç›¸å½“äºæ˜¯æ­»ä»£ç äº†ã€‚ ä¸€æ¬¡æ•è·ï¼Œä¸€æ¬¡å¤„ç†å°±æ˜¯åœ¨catchä¸­ä½¿ç”¨Exceptionå˜é‡æ¥æ”¶å¼‚å¸¸ï¼Œå› ä¸ºæ‰€æœ‰çš„å¼‚å¸¸éƒ½æ˜¯Exceptionçš„å­ç±»ï¼Œæ‰€ä»¥å¯ä»¥æ¥æ”¶æ‰€æœ‰çš„å¼‚å¸¸ try &#123; //å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç &#125; catch (Exception e) &#123; //å¤„ç†å¼‚å¸¸&#125; å­ç±»æ³¨æ„äº‹é¡¹å¦‚æœçˆ¶ç±»æ–¹æ³•æŠ›å‡ºå¤šä¸ªå¼‚å¸¸ï¼Œå­ç±»é‡å†™äº†è¯¥æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»æ–¹æ³•æœ‰ä¸‰ç§æ–¹æ¡ˆ æŠ›å‡ºç›¸åŒå¼‚å¸¸ æŠ›å‡ºçˆ¶ç±»å¼‚å¸¸çš„å­ç±» ä¸æŠ›å‡ºå¼‚å¸¸ å¦‚æœçˆ¶ç±»çš„æ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆå­ç±»é‡å†™çš„æ–¹æ³•ä¹Ÿä¸èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚è¯¥å­ç±»äº§ç”Ÿçš„å¼‚å¸¸åªèƒ½try-catchæ•è·å¤„ç†ï¼Œä¸èƒ½ä½¿ç”¨throwsæŠ›å‡ºã€‚ è‡ªå®šä¹‰å¼‚å¸¸è‡ªå®šä¹‰çš„å¼‚å¸¸å¿…é¡»ç»§æ‰¿ä¸€ä¸ªå¼‚å¸¸ç±»ã€‚å¦‚æœç»§æ‰¿çš„æ˜¯Exceptionï¼Œé‚£ä¹ˆè¯¥å¼‚å¸¸å°±æ˜¯ç¼–è¯‘æœŸå¼‚å¸¸ï¼Œå¦‚æœç»§æ‰¿çš„æ˜¯RuntimeExceptionï¼Œé‚£ä¹ˆå°±æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ã€‚ä¸‹é¢ç®€å•çš„æ¼”ç¤º public class MyException extends RuntimeException&#123; //ä¸€ä¸ªç©ºå‚æ„é€ æ–¹æ³• public MyException()&#123;&#125; //ä¸€ä¸ªå¸¦å¼‚å¸¸ä¿¡æ¯çš„æ„é€ æ–¹æ³• public MyException(String message) &#123; super(message); &#125;&#125; ç°åœ¨è¿›è¡Œæµ‹è¯• public class TestMyException &#123; public static void main(String[] args) &#123; divide(5,0); &#125; public static double divide(double a, double b) &#123; if (b == 0) &#123; //ç»§æ‰¿è‡³RuntimeExceptionï¼Œæ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¯ä»¥ä¸è¿›è¡Œå¤„ç† throw new MyException(\"é™¤0\"); &#125; return a / b; &#125;&#125; ç»“æœä¸º","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"å¼‚å¸¸","slug":"å¼‚å¸¸","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%BC%82%E5%B8%B8/"}]},{"title":"Javaæ–‡ä»¶æ“ä½œ","date":"2019-08-02T16:00:00.000Z","path":"/Javaæ–‡ä»¶æ“ä½œ/","text":"FileFileç±»ä»£è¡¨çš„æ˜¯æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹(ç›®å½•)ï¼Œå°†ç›®å½•å’Œæ–‡ä»¶æŠ½è±¡ä¸ºä¸€ä¸ªç±»ã€‚Fileæä¾›äº†å¾ˆå¤šæ–¹æ³•ç”¨æ¥æ“ä½œæ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶ã€‚ä¸‹é¢å…·ä½“ä»‹ç»è¯¥ç±»ã€‚ é™æ€æˆå‘˜å˜é‡Fileç±»æœ‰å››ä¸ªæˆå‘˜å˜é‡ pathSeparator pathSeparatorChar è¿™ä¸¤ä¸ªä¿å­˜çš„è·¯å¾„åˆ†éš”ç¬¦ Windowsä¸‹ä¸º;ï¼ŒLinuxä¸‹ä¸º: separator separatorChar è¿™ä¸¤ä¸ªä¿å­˜çš„æ˜¯æ–‡ä»¶åç§°åˆ†éš”ç¬¦ Windowsä¸‹ä¸º\\åæ–œæ ï¼ŒLinuxä¸‹ä¸º/æ­£æ–œæ  ä¸‹é¢çœ‹è¿™ä¸ªä¾‹å­ import java.io.File;public class TestFile &#123; public static void main(String[] args) &#123; System.out.println(File.pathSeparator); System.out.println(File.pathSeparatorChar); System.out.println(File.separator); System.out.println(File.separatorChar); &#125;&#125; è¾“å‡ºä¸º ;;\\\\ æ„é€ æ–¹æ³•File(String pathname) ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¸ºç¬¬ä¸€ä¸ªè·¯å¾„å ä¼ å…¥çš„è·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ ä¼ å…¥çš„è·¯å¾„å¯ä»¥å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥ä¸å­˜åœ¨ å¯ä»¥æ˜¯æ–‡ä»¶ç»“å°¾ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶å¤¹ç»“å°¾\\ ä¸‹é¢æ¥çœ‹çœ‹è¯¥æ–¹æ³•çš„ä½¿ç”¨ File file1 = new File(\"G:\\\\JavaProject\\\\FirstProject\"); //ç»å¯¹è·¯å¾„å†™æ³•System.out.println(file1);File file2 = new File(\"SecondProject\"); //ç›¸å¯¹è·¯å¾„å†™æ³•System.out.println(file2); è¾“å‡ºä¸º G:\\JavaProject\\FirstProjectSecondProject æ³¨æ„ï¼š ç”±äº\\ä»£è¡¨çš„æ˜¯è½¬ä¹‰ï¼Œæ‰€ä»¥è¦å†™ä¸¤ä¸ª\\\\ å¯è§Fileç±»é‡å†™äº†toString()æ–¹æ³• File(String parent,String child) è¯¥æ„é€ æ–¹æ³•éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªä¸ºçˆ¶çº§ç›®å½•çš„è·¯å¾„ï¼Œä¸€ä¸ªä¸ºå­çº§ç›®å½•çš„è·¯å¾„ è¯¥ç§æ„é€ æ–¹æ³•ç›¸æ¯”ä¸Šé¢çš„è¦çµæ´»ä¸€ç‚¹ ä¸‹é¢ç¤ºä¾‹ä½¿ç”¨ String parent = \"C:\\\\JavaProject\\\\\";File file3 = new File(parent,\"FirstProject\");System.out.println(file3);File file4 = new File(parent,\"SecondProject\");System.out.println(file4); è¾“å‡ºä¸º C:\\JavaProject\\FirstProjectC:\\JavaProject\\SecondProject File(File parent, String child) åŒä¸Šä¸ªæ„é€ æ–¹æ³•ï¼Œä¼ å…¥ä¹Ÿæ˜¯çˆ¶çº§å’Œå­çº§çš„è·¯å¾„ï¼Œä¸è¿‡ä¼ å…¥çš„çˆ¶çº§è·¯å¾„æ˜¯ä¸€ä¸ªFileå¯¹è±¡ è¿™æ ·å¯ä»¥è°ƒç”¨Fileç±»çš„æ–¹æ³•ï¼Œæ›´åŠ çµæ´» ä¸‹é¢ç¤ºä¾‹ä½¿ç”¨ File parent = new File(\"C:\\\\JavaProject\");File file5 = new File(parent,\"FirstProject\");System.out.println(file5); è¾“å‡ºä¸º C:\\JavaProject\\FirstProject å¸¸ç”¨æ–¹æ³•æŒ‰ç…§åŠŸèƒ½ä¸åŒåˆ†ä¸ºäº†ä¸‰ç±» è·å–åŠŸèƒ½ åˆ¤æ–­åŠŸèƒ½ åˆ›å»ºåˆ é™¤ è·å–åŠŸèƒ½ä¸è·å–åŠŸèƒ½æœ‰å…³çš„æ–¹æ³•æœ‰å››ä¸ª getAbsolutePath() è·å¾—æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„ ä¸è®ºåœ¨æ„é€ æ–¹æ³•ä¸­ä¼ å…¥çš„æ˜¯ç»å¯¹è·¯å¾„è¿˜æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œè·å¾—éƒ½æ˜¯ç»å¯¹è·¯å¾„ getPath() åœ¨æ„é€ æ–¹æ³•ä¸­ä¼ å…¥çš„æ˜¯ä»€ä¹ˆï¼Œè¿”å›çš„å°±æ˜¯ä»€ä¹ˆ toString()è°ƒç”¨çš„å°±æ˜¯è¿™ä¸ªæ–¹æ³• getName() è·å¾—æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„åç§°ï¼Œå³è·¯å¾„çš„ç»“å°¾éƒ¨åˆ† length() è·å¾—æ–‡ä»¶çš„é•¿åº¦ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿”å›0 ä¸‹é¢ç¤ºä¾‹è¿™å››ä¸ªæ–¹æ³•çš„ä½¿ç”¨ import java.io.File;public class TestFile &#123; public static void main(String[] args) &#123; File file = new File(\"src\\\\Dog.java\"); //ä¼ å…¥çš„ç›¸å¯¹è·¯å¾„ï¼Œè·å¾—æ˜¯srcç›®å½•ä¸‹çš„Dog.javaæ–‡ä»¶ //æ‰“å°ç»å¯¹è·¯å¾„ System.out.println(file.getAbsolutePath()); //G:\\JavaProject\\SecondProject\\src\\Dog.java //æ‰“å°è·¯å¾„ï¼Œä¼ å…¥ä»€ä¹ˆæ‰“å°ä»€ä¹ˆ System.out.println(file.getPath()); //src\\Dog.java //è·å¾—æ–‡ä»¶çš„åç§° System.out.println(file.getName()); //Dog.java //è·å¾—æ–‡ä»¶çš„å¤§å° System.out.println(file.length()); //353 &#125;&#125; åˆ¤æ–­åŠŸèƒ½ä¸åˆ¤æ–­åŠŸèƒ½æœ‰å…³çš„æ–¹æ³•æœ‰ä¸‰ä¸ª exists() åˆ¤æ–­ä¼ å…¥æ„é€ æ–¹æ³•çš„è·¯å¾„æ˜¯å¦å­˜åœ¨ isDirectory() åˆ¤æ–­æ˜¯ä¸æ˜¯ç›®å½•(æ–‡ä»¶å¤¹) å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œæ— è®ºæ˜¯å¦ä¸ºç›®å½•(æ–‡ä»¶å¤¹)ï¼Œè¿”å›false isFile() åˆ¤æ–­æ˜¯å¦ä¸ºæ–‡ä»¶ å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œæ— è®ºæ˜¯å¦ä¸ºæ–‡ä»¶ï¼Œè¿”å›false ä¸‹é¢è¿›è¡Œç¤ºä¾‹ File file = new File(\"src\\\\Dog.java\"); //ä¼ å…¥çš„ç›¸å¯¹è·¯å¾„ï¼Œè·å¾—æ˜¯srcç›®å½•ä¸‹çš„Dog.javaæ–‡ä»¶//åˆ¤æ–­è¯¥è·¯å¾„æ˜¯å¦å­˜åœ¨System.out.println(file.exists()); //true//æ˜¯å¦ä¸ºæ–‡ä»¶å¤¹System.out.println(file.isDirectory()); //false//æ˜¯å¦ä¸ºæ–‡ä»¶System.out.println(file.isFile()); //true åˆ›å»ºåˆ é™¤ä¸åˆ›å»ºå’Œåˆ é™¤æœ‰å…³çš„æ–¹æ³•æœ‰å››ä¸ª createNewFile() å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸åˆ›å»º è¿”å›å¸ƒå°”å€¼ï¼Œåˆ›å»ºè¿”å›true ä¸èƒ½åˆ›å»ºç›®å½•ï¼Œæ‰€ä»¥è¯¥æ–‡ä»¶æ‰€åœ¨ç›®å½•å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ delete() åˆ é™¤è¯¥ç±»ä»£è¡¨çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œç›´æ¥ä»ç¡¬ç›˜åˆ é™¤ï¼Œä¸èµ°æ–‡ä»¶å¤¹ï¼Œè¦å°å¿ƒ åˆ é™¤æˆåŠŸè¿”å›true makdir() åˆ›å»ºç”±æ­¤Fileç±»ä»£è¡¨çš„ç›®å½•ï¼Œåªèƒ½åˆ›å»ºå•çº§ç›®å½• makdirs() åˆ›å»ºç”±æ­¤Fileç±»ä»£è¡¨çš„ç›®å½•ï¼ŒåŒ…æ‹¬å¿…éœ€ä½†ä¸å­˜åœ¨çš„çˆ¶çº§ç›®å½• ä¸‹é¢æ¼”ç¤ºä½¿ç”¨ import java.io.File;import java.io.IOException;public class TestFileMethod &#123; public static void main(String[] args) throws IOException &#123; //D:\\\\ç›®å½•ä¸‹æ²¡æœ‰1.txt File file1 = new File(\"D:\\\\1.txt\"); //createNewFileä½¿ç”¨äº†throwsæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦å¤„ç†ï¼Œæˆ‘ä»¬åœ¨mainä¸­ç›´æ¥æŠ›å‡ºå³å¯ System.out.println(file1.createNewFile()); //true //D:\\\\ä¸‹æ²¡æœ‰æ–°å»ºæ–‡ä»¶å¤¹ File file2 = new File(\"D:\\\\æ–°å»ºæ–‡ä»¶å¤¹\"); //åˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹ System.out.println(file2.mkdir()); //true File file3 = new File(\"D:\\\\abc\\\\def\"); //åˆ›å»ºå¤šçº§ç›®å½• System.out.println(file3.mkdir()); //ä¸èƒ½åˆ›å»º mkdiråªèƒ½åˆ›å»ºå•çº§ç›®å½• false System.out.println(file3.mkdirs()); //true //å°†ä¸Šé¢åˆ›å»ºçš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹å…¨éƒ¨åˆ é™¤ System.out.println(file1.delete()); //true System.out.println(file2.delete()); //true System.out.println(file3.delete()); //true abcè¿™ä¸ªæ–‡ä»¶å¤¹è¿˜åœ¨ &#125;&#125; ç›®å½•éå†ä¸ºäº†éå†ç›®å½•ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³• list() è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¿™äº›å­—ç¬¦ä¸²æ˜¯æ–‡ä»¶åæˆ–æ–‡ä»¶å¤¹å listFiles() è¿”å›æ—¶çš„Fileç±»å¯¹è±¡æ•°ç»„ æ³¨æ„ï¼š ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨æˆ–è€…ä¸æ˜¯ç›®å½•ï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ éšè—æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä¹Ÿèƒ½è·å–åˆ° File file = new File(\"G:\\\\JavaProject\\\\SecondProject\\\\src\");String[] filename = file.list();for (int i = 0; i &lt; filename.length; i++) &#123; System.out.println(filename[i]);&#125;File[] files = file.listFiles();for (File file4 : files) &#123; System.out.println(file4.getName());&#125; è¾“å‡ºä¸º comDog.javaDoudizhu.javaGenericsDemo.javaJustForFun.javaMyException.javaMyThread.java... é€’å½’é€’å½’å°±æ˜¯åœ¨å‡½æ•°é‡Œé¢è°ƒç”¨è‡ªå·±ã€‚ é€’å½’å¿…é¡»è¦ç”¨ç»ˆæ­¢æ¡ä»¶ï¼Œå¦åˆ™ä¼šä¸æ–­çš„è°ƒç”¨è‡ªå·±ï¼Œé€ æˆæ ˆå†…å­˜æº¢å‡º é€’å½’çš„æ¬¡æ•°ä¹Ÿä¸èƒ½å¤ªå¤šï¼Œå¦åˆ™ä¹Ÿä¼šé€ æˆæ ˆå†…å­˜æº¢å‡º æ„é€ æ–¹æ³• ä¸‹é¢åšå‡ ä¸ªå°çš„ç»ƒä¹ æ¥ç†Ÿæ‚‰é€’å½’ã€‚ é€’å½’ç»ƒä¹ ç¬¬ä¸€ä¸ªç»ƒä¹ æ˜¯æ ¹æ®å‡½æ•°æ¥æ”¶çš„å‚æ•°$n$ï¼Œæ¥è®¡ç®—$1 + 2 â€¦ + n$ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä»é€’å½’çš„è§’åº¦çœ‹ï¼Œæ‰€ä»¥åº”å½“è¿™ä¹ˆçœ‹$$sum(n) = \\begin{cases}1, &amp;if ,, n =1 \\\\n + sum(n - 1), &amp;if ,,n &gt; 1 \\end{cases}$$ æ‰€ä»¥ç¨‹åºæˆ‘ä»¬åº”è¯¥è¿™ä¹ˆå†™ //è¿™é‡Œæ²¡æœ‰è€ƒè™‘è¾“å…¥ä¸ºè´Ÿæ•°æ—¶çš„å¤„ç†public static int sum(int n) &#123; if (n == 1) &#123; return 1; &#125; else &#123; return n + sum(n - 1); &#125;&#125; åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³•æµ‹è¯• int res = sum(100);System.out.println(res); è¾“å‡ºä¸º 5050 å¯è§ç¨‹åºæ˜¯æ­£ç¡®çš„ã€‚ ç¬¬äºŒä¸ªç»ƒä¹ æ˜¯è®¡ç®—é˜¶ä¹˜ï¼Œæ€è·¯åŒä¸Šé¢å®Œå…¨æ˜¯ä¸€æ ·çš„$$fac(n) = \\begin{cases}1, &amp;if ,, n =0 \\\\n * fac(n - 1), &amp;if ,,n &gt; 1 \\end{cases}$$ ä»£ç å¦‚ä¸‹ public static int fac(int n) &#123; if (n == 0) &#123; return 1; &#125; else &#123; return n * fac(n - 1); &#125;&#125; åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨æµ‹è¯• int res = fac(5);System.out.println(res); è¾“å‡ºä¸º 120 æ–‡ä»¶å¤¹éå†ä¸‹é¢ä½¿ç”¨é€’å½’æ¥å®ç°æ–‡ä»¶å¤¹çš„éå†ï¼Œæˆ‘ä»¬getFile()æ–‡ä»¶æ¥è¿›è¡Œæ–‡ä»¶å¤¹çš„éå†ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªFileå¯¹è±¡ä½œä¸ºå‚æ•° public static void getFile(File file) &#123; File[] files = file.listFiles(); for (File file1 : files) &#123; System.out.println(file1.getName()); //å¦‚æœæ˜¯æ–‡ä»¶å¤¹çš„ï¼Œå°±éå†è¯¥æ–‡ä»¶å¤¹ if (file1.isDirectory()) &#123; getFile(file1); &#125; &#125;&#125; æˆ‘åœ¨Dç›˜ä¸‹æ–°å»ºäº†ä¸€ä¸ªTestæ–‡ä»¶å¤¹ï¼Œå®ƒçš„ç›®å½•ç»“æ„å¦‚ä¸‹ Test a a.txt b.txt b c.txt d.txt æˆ‘ä»¬åœ¨mainæ–¹æ³•ä¸­éå†è¯¥æ–‡ä»¶å¤¹ getFile(new File(\"D:\\\\Test\")); è¾“å‡ºä¸º aa.txtb.txtbc.txtd.txt è¿‡æ»¤å™¨listFileså…¶å®è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªå«åšè¿‡æ»¤å™¨çš„å‚æ•°ã€‚è¿™ä¸ªè¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåˆ†ä¸ºæœ‰FileFilterå’ŒFilenameFilterä¸¤ä¸ªæ¥å£ï¼Œè¿™ä¸¤ä¸ªæ¥å£é‡Œé¢éƒ½åªæœ‰ä¸€ä¸ªæ–¹æ³•accept()ï¼ŒlistFilesä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°†å®ƒè·å¾—çš„è·¯å¾„ä¼ å…¥è¯¥æ–¹æ³•ä¸­ï¼Œå¦‚æœå¾—åˆ°çš„ç»“æœä¸ºtrueï¼Œé‚£ä¹ˆå°±ä¿ç•™è¿™ä¸ªè·¯å¾„åœ¨æœ€ç»ˆè¿”å›çš„æ•°ç»„ä¸­ï¼Œå¦‚æœè¿”å›çš„æ˜¯falseï¼Œé‚£ä¹ˆå°±ä¸è¦è¿™ä¸ªè·¯å¾„ã€‚å¯è§è¿™æ ·å°±èµ·åˆ°äº†æ–‡ä»¶è¿‡æ»¤çš„ä½œç”¨ï¼Œè€Œè¿‡æ»¤ä»€ä¹ˆæ ·çš„æ–‡ä»¶ï¼Œéœ€è¦ä»€ä¹ˆæ ·çš„æ–‡ä»¶ï¼Œå®Œå…¨ç”±accept()æ–¹æ³•å†³å®šï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯å®ƒä»¬ä¸ºä»€ä¹ˆå«åšè¿‡æ»¤å™¨çš„åŸå› ã€‚ FileFilterä¸‹é¢æ¥ä»‹ç»FileFilterï¼ŒFileFilteré‡Œé¢çš„accept(File pathname)æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯è·¯å¾„åï¼ŒlistFiles()ä¼šå°†å®ƒè·å¾—çš„è·¯å¾„ä¼ å…¥accept()ï¼Œaccept()è¿›è¡Œè¿‡æ»¤ï¼Œä»¥å†³å®šè¦ä»€ä¹ˆæ ·çš„è·¯å¾„ã€‚ä¸‹é¢æˆ‘ä»¬åšä¸€ä¸ªç¤ºèŒƒï¼Œæ‰“å°å‡ºä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶å¤¹é‡Œé¢ä»¥.pngç»“å°¾çš„å›¾ç‰‡ //ä¼ å…¥çš„æ˜¯å›¾ç‰‡æ–‡ä»¶å¤¹çš„è·¯å¾„public static void printPNG(File file) &#123; //å› ä¸ºæ¥å£é‡Œé¢åªè¦ä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨Lambdaè¡¨è¾¾å¼ File[] files = file.listFiles(pathname -&gt; &#123; //åˆ¤æ–­æ˜¯ä¸æ˜¯ä»¥.pngç»“å°¾ boolean b = pathname.getName().endsWith(\".png\"); if (b) &#123; //å¦‚æœæ˜¯ä»¥.pngç»“å°¾ï¼Œåˆ™åŠ å…¥åˆ°filesæ•°ç»„ä¸­ return true; &#125; else &#123; return false; &#125; &#125;); //æ‰“å°filesæ•°ç»„ï¼ŒæŸ¥çœ‹ç»“æœæ˜¯å¦æ­£ç¡® for (File fi : files) &#123; System.out.println(fi.getName()); &#125;&#125; æˆ‘ä»¬åœ¨mainæ–¹æ³•è°ƒç”¨æµ‹è¯• printPNG(new File(\"D:\\\\images\")); æ‰“å°è¾“å‡ºä¸º å¯è§åªæœ‰.pngç»“å°¾çš„å›¾ç‰‡æ‰è¢«æ”¾å…¥äº†filesæ•°ç»„ä¸­ã€‚ FilenameFilterå®ƒçš„accept(File dir, String name)æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä½™çš„ä¸FileFilterç›¸åŒï¼Œä¸‹é¢å°±åŒæ ·çš„åŠŸèƒ½æ¼”ç¤ºå…¶ä»£ç  public static void printPNGAgain(File file) &#123; File[] files = file.listFiles(((dir, name) -&gt; &#123; //æ ¹æ®dirå’Œnameåˆ›å»ºä¸€ä¸ªFileå¯¹è±¡ //åé¢çš„ä»£ç å®Œå…¨åŒä¸Šé¢ä¸€æ · File newFile = new File(dir,name); boolean b = newFile.getName().endsWith(\".png\"); if (b) &#123; return true; &#125; else &#123; return false; &#125; &#125;)); for (File fi : files) &#123; System.out.println(fi.getName()); &#125;&#125; åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³• printPNGAgain(new File(\"D:\\\\images\")); è¾“å‡ºåŒä¸Šé¢ä¸€æ¨¡ä¸€æ · å­—èŠ‚æµä¸‹é¢ä»‹ç»ä¸¤ä¸ªç±»ç”¨æ¥ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®å’Œå†™å…¥æ•°æ®åˆ°æ–‡ä»¶çš„ç±»ã€‚ä¸ç®¡æ˜¯è¯»å–æ•°æ®è¿˜æ˜¯å†™å…¥æ•°æ®ï¼Œéƒ½æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½çš„ã€‚ OutputStreamè¯¥ç±»å¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚OutputStreamç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒçš„å­ç±»FileOutputStramï¼Œå®ƒçš„æ„é€ æ–¹æ³•ä¸­ä¼ å…¥çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªFileå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªä»£è¡¨è·¯å¾„çš„å­—ç¬¦ä¸²ã€‚å®ƒé‡Œé¢ä¸»è¦æœ‰ä»¥ä¸‹æ–¹æ³• write(byte b) å†™å…¥ä¸€ä¸ªå­—èŠ‚åˆ°æ–‡ä»¶ä¸­ write(byte[] bytes) å°†ä¸€ä¸ªå­—èŠ‚æ•°ç»„å†™å…¥åˆ°æ–‡ä»¶ä¸­ å¦‚æœä¼ å…¥çš„byteæ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œé‚£ä¹ˆè¯¥æ•°ä¸å…¶åé¢çš„é‚£ä¸ªå­—èŠ‚ç»„æˆä¸€ä¸ªä¸­æ–‡ write(byte[] bytes, int off, int len) å†™å…¥å­—èŠ‚æ•°ç»„ç´¢å¼•ä»offå¼€å§‹ï¼Œé•¿åº¦ä¸ºlenå­—èŠ‚çš„æ•°æ® close() å…³é—­æµ ä¸‹é¢ç¤ºä¾‹å…¶ä½¿ç”¨ //å¦‚æœæ²¡æœ‰a.txtï¼Œä¼šåˆ›å»ºä¸€ä¸ªa.txtæ–°æ–‡ä»¶OutputStream fos = new FileOutputStream(new File(\"a.txt\")); //å¯ä»¥ä¼ å…¥\"a.txt\"å­—ç¬¦ä¸²fos.write(97); //å†™å…¥a//\\r\\nä»£è¡¨ å›è½¦æ¢è¡Œfos.write(\"\\r\\n\".getBytes()); //Stringç±»çš„getBytes()æ–¹æ³•å¯ä»¥å¾—åˆ°ä¸€ä¸ªbyteæ•°ç»„fos.write(\"abc\".getBytes());fos.close(); ä¸Šé¢çš„ç¨‹åºæ˜¯ä¼šæŠŠåŸæ¥æ–‡ä»¶é‡Œé¢çš„å†…å®¹æƒ…ç©ºï¼Œç„¶åå°†æ•°æ®å†™å…¥äº†ï¼Œå¦‚æœæƒ³å‘æ–‡ä»¶ä¸­è¿½åŠ æ•°æ®çš„è¯ï¼Œé‚£ä¹ˆå°±è¦åœ¨æ„é€ æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥trueï¼Œä»£è¡¨æ˜¯è¿½åŠ ã€‚å¦‚ OutputStream fos = new FileOutputStream(new File(\"a.txt\"), true); InputStreamä¸OutputStreamç›¸å¯¹çš„ï¼Œè¯¥ç±»çš„ä½œç”¨æ˜¯è¯»å–æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…¶å­ç±»FileInputStreamï¼Œæ„é€ æ–¹æ³•åŒOutputStreamï¼ŒåŒ…å«çš„æ–¹æ³•æœ‰ read() è¯»å–ä¸€ä¸ªå­—èŠ‚å¹¶è¿”å›ï¼Œå¦‚æœè¯»åˆ°äº†æ–‡ä»¶çš„æœ«å°¾ï¼Œé‚£ä¹ˆè¿”å›-1ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿”å›çš„æ˜¯å¦æ˜¯-1æ¥åˆ¤æ–­æ˜¯å¦å·²ç»è¯»åˆ°äº†æ–‡ä»¶çš„æœ«å°¾ read(byte[] bytes) è¯»å–byteså¤§å°çš„å­—èŠ‚ï¼Œè¿”å›çš„æ˜¯è¯»å–çš„æœ‰æ•ˆä½æ•° å‡å¦‚æ–‡ä»¶æœ‰5ä¸ªå­—èŠ‚ï¼Œæˆ‘ç”¨é•¿åº¦ä¸º6çš„å­—èŠ‚æ•°ç»„å»è¯»å–ï¼Œé‚£ä¹ˆè¿”å›çš„å°±æ˜¯5 å¦‚æœå·²ç»è¯»åˆ°äº†æ–‡ä»¶çš„æœ«å°¾ï¼Œä¸æ˜¯è¿”å›0ï¼Œè€Œæ˜¯è¿”å›-1ã€‚ close() å…³é—­æµ InputStream fis = new FileInputStream(new File(\"a.txt\")); //å¯ä»¥ä¼ å…¥\"a.txt\"å­—ç¬¦ä¸²int len = fis.read(); //è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œè¯»å–çš„è™½ç„¶æ˜¯byteï¼Œä½†æ˜¯è¿”å›æ—¶ä¼šè¢«æå‡ä¸ºintï¼Œæ‰€ä»¥ç”¨ç”¨intæ¥æ”¶System.out.println((char)len);fis.close(); æ–‡ä»¶å¤åˆ¶ç»¼åˆè¯»å–æ•°æ®å’Œå†™å…¥æ•°æ®ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸¤ä¸ªæµå¤åˆ¶ä¸€ä¸ªæ–‡ä»¶ OutputStream fos = new FileOutputStream(new File(\"copy.jpg\"));InputStream fis = new FileInputStream(new File(\"a.jpg\"));byte[] bytes = new byte[1024]; //ç”¨æ¥è¯»å–æ•°æ®çš„æ•°ç»„ï¼Œä¹Ÿæ˜¯å†™æ•°æ®çš„æ•°ç»„int len = 0;// åˆ¤æ–­æ˜¯å¦è¯»å–å®Œæ¯•while ((len = fis.read(bytes)) != -1) &#123; fos.write(bytes,0, len);&#125;//å…ˆå…³é—­å†™çš„æµï¼Œå› ä¸ºå†™å®Œäº†ï¼Œè¯´æ˜è‚¯å®šè¯»å®Œäº†fos.close();fis.close(); å­—ç¬¦æµå­—èŠ‚æµæ˜¯ä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚è¯»å–çš„ï¼Œä½†æ˜¯å¯¹äºä¸­æ–‡ï¼Œå¦‚æœä½¿ç”¨GBKç¼–ç çš„è¯ç”±2ä¸ªå­—èŠ‚ç»„æˆï¼Œå¦‚æœä½¿ç”¨UTF-8ç¼–ç çš„è¯ç”±3ä¸ªå­—èŠ‚ç»„æˆã€‚æ‰€ä»¥å¦‚æœä¸€ä¸ªå­—èŠ‚è¿›è¡Œè¯»å–çš„è¯å°±å¾—ä¸åˆ°æƒ³è¦çš„å­—ç¬¦ã€‚é‚£ä¹ˆè¿™é‡Œå°±éœ€è¦å¼•å…¥ä¸€ä¸ªæ–°çš„æµæ¥è¯»å–å­—ç¬¦ï¼Œä»¥å­—ç¬¦ä¸ºå•ä½è¿›è¡Œè¯»å–ã€‚ ReaderReaderå°±ç›¸å½“äºæ˜¯InputStreamï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®åˆ°å†…å­˜ï¼Œä¸è¿‡ä¸åŒçš„æ˜¯ï¼ŒReaderè¯»å–çš„æœ€å°å•ä½ä¸ºå­—ç¬¦ï¼Œå®ƒçš„æ„é€ æ–¹æ³•ä¸InputStreamä¸€æ ·ï¼ŒåŒ…å«çš„æ–¹æ³•ä¹Ÿä¸€æ ·ï¼Œä¸è¿‡å‚æ•°æœ‰æ‰€ä¸åŒï¼Œä¸åœ¨æ˜¯å­—èŠ‚ï¼Œè€Œæ˜¯å­—ç¬¦ã€‚Readerä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå¸¸ä½¿ç”¨å®ƒçš„å­ç±»FileReaderã€‚æˆ‘ä»¬åœ¨æœ¬ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶b.txtï¼Œåœ¨é‡Œé¢å†™å…¥ä½ å¥½ï¼Œä½¿ç”¨UTF-8ç¼–ç (ä¸è¦ä½¿ç”¨GBK) Reader reader = new FileReader(\"b.txt\"); //ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªFileå¯¹è±¡int c = 0;while ((c = reader.read()) != -1) &#123; System.out.println((char)c);&#125; è¾“å‡ºä¸º ä½ å¥½ FileReaderå…¶å®ä¹Ÿæœ‰æ–°å»ºä¸€ä¸ªå­—èŠ‚æµå»è¯»å–æ•°æ®ï¼Œä¸è¿‡ä¸­é—´æœ‰ä¸€ä¸ªå°†å­—èŠ‚è½¬ä¸ºå­—ç¬¦çš„è¿‡ç¨‹ï¼Œè½¬æ¢é»˜è®¤æ˜¯æŒ‰ç…§UTF-8çš„æ–¹å¼è§£ç çš„ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨Windowsä¸‹ç›´æ¥æ–°å»ºæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯GBKçš„ï¼Œè¿™æ ·è¯»å–å°±ä¼šæ˜¯ä¹±ç ï¼Œå¯ä»¥ç›´æ¥åœ¨IDEAä¸­æ–°å»ºæ–‡ä»¶ï¼Œé»˜è®¤ä¸ºUTF-8ç¼–ç ã€‚ å¦‚æœæˆ‘ä»¬è¯»å–å¾—åˆ°äº†ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Stringç±»çš„æ„é€ æ–¹æ³• String(char[] value) String(char [] value, int off, int len) å°†å­—ç¬¦æ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿å¤„ç†ã€‚ WriterWriterå°±æ˜¯å‘æ–‡ä»¶ä¸­å†™å…¥ä¸€ä¸ªå­—ç¬¦ï¼ŒåŒOutputStreamä¸åŒï¼ŒWriteræœ‰ä¸€ä¸ªç‰¹æœ‰çš„æ–¹æ³• flush() è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯å°†ç¼“å­˜åŒºé‡Œçš„å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ä¸­ è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Œå…¶å®Writerçš„åº•å±‚æ˜¯åˆ›å»ºä¸€ä¸ªäº†å­—èŠ‚æµå†™æ•°æ®çš„ï¼Œæˆ‘ä»¬ç›´æ¥å†™å…¥å­—ç¬¦ä¸æ˜¯ç›´æ¥å†™åœ¨æ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å†™åœ¨ç¼“å†²åŒºä¸­ï¼Œç„¶åç¼“å†²åŒºä¸­çš„å†…å®¹è½¬åŒ–ä¸ºå­—èŠ‚å†™å…¥æ–‡ä»¶ä¸­ã€‚åœ¨è°ƒç”¨close()ï¼Œåœ¨å…³é—­æµä¹‹å‰ï¼Œä¼šæŠŠç¼“å†²åŒºä¸­çš„å†…å®¹å†™åˆ°æ–‡ä»¶ä¸­ï¼Œå¦‚æœæ—¢æ²¡æœ‰è°ƒç”¨flush()ä¹Ÿæ²¡æœ‰è°ƒç”¨close()ï¼Œé‚£ä¹ˆå†™å…¥çš„æ•°æ®ä¸ä¼šå†™å…¥æ–‡ä»¶ä¸­ã€‚ è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ write(String str [, int off, int len]) å¯ä»¥ç›´æ¥å†™å…¥å­—ç¬¦ä¸²ï¼Œä¸ç”¨å†™å­—ç¬¦æ•°ç»„é‚£ä¹ˆéº»çƒ¦äº† //å¦‚æœæ²¡æœ‰c.txtï¼Œé‚£ä¹ˆä¼šæ–°å»ºä¸€ä¸ªWriter writer = new FileWriter(\"c.txt\"); //ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªFileå¯¹è±¡//å†™å…¥çš„é»˜è®¤æ˜¯utf-8ç¼–ç writer.write(\"ä½ å¥½å•Š\");//å¦‚æœä¸è°ƒç”¨close()ï¼Œé‚£ä¹ˆc.txté‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰writer.close(); åŒOutputStreamä¸€æ ·ï¼Œè¿™é‡Œçš„writeä¹Ÿæ˜¯è¦†ç›–é‡å†™ï¼Œå¦‚æœæƒ³è¦åªæ˜¯è¿½åŠ æ•°æ®çš„è¯ï¼Œåœ¨æ„é€ æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥true Writer writer = new FileWriter(\"c.txt\",true); Propertieså±æ€§é›†Propertiesæ˜¯ç»§æ‰¿è‡³HashTableçš„ä¸€ä¸ªé›†åˆã€‚å®ƒæ˜¯ä¸IOæµå…³è”èµ·æ¥çš„ï¼Œé€šè¿‡load()å’Œstore()æ–¹æ³•å¯ä»¥è¯»å–ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶æ•°æ®ï¼Œå’Œå°†Propertiesé›†åˆä¸­çš„æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚ storeä¸‹é¢ä»‹ç»å°†Propertiesä¸­çš„æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚é¦–å…ˆä»‹ç»å¦‚ä½•å‘Propertiesé›†åˆä¸­æ·»åŠ æ•°æ® setProperty(String key, String value) Propertiesé›†åˆä¸­çš„é”®å’Œå€¼éƒ½æ˜¯Stringç±»å‹çš„ã€‚store()åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯å­—èŠ‚æµï¼Œä¼ å…¥çš„æ˜¯OutputStreamå¯¹è±¡ï¼Œä¸€ç§æ˜¯å­—ç¬¦æµï¼Œä¼ å…¥çš„æ˜¯Writerå¯¹è±¡ store(OutputStream in, String comment) store(Writer writer, String comment) ç¬¬äºŒä¸ªå‚æ•°String commentæ˜¯æ³¨é‡Šï¼Œå†™å…¥æ–‡ä»¶ä¼šå†™åœ¨ç¬¬ä¸€è¡Œï¼Œå¹¶ä¸”ä»¥#å¼€å¤´ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªç©ºå­—ç¬¦ä¸² Properties properties = new Properties();properties.setProperty(\"å¤åŠ›å¨œæ‰\",\"18\");properties.setProperty(\"è¿ªä¸½çƒ­å·´\",\"17\");properties.store(new FileWriter(\"properties.txt\"), \" \"); properties.txtæ–‡ä»¶é‡Œé¢çš„å†…å®¹ä¸º # #Fri Aug 09 11:28:20 CST 2019å¤åŠ›å¨œæ‰=18è¿ªä¸½çƒ­å·´=17 loadåœ¨ä»‹ç»load()ä¹‹å‰ï¼Œè¯´æ˜ä¸€ä¸‹å¦‚ä½•è·å–Propertiesä¸­çš„å…ƒç´  getProperty(String key) é€šè¿‡é”®è·å–å€¼ï¼Œç›¸å½“äºMapä¸­çš„get() stringPropertiesName() ç›¸å½“äºMapä¸­çš„ keySet()ï¼Œè¿”å›ä¸€ä¸ªSeté›†åˆï¼Œæ³›å‹ä¸ºString ä¸‹é¢ä»‹ç»load()æ–¹æ³•ï¼Œload()å°±æ˜¯è¯»å–æŒ‡å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼ŒæŒ‡å®šæ ¼å¼å¦‚ä¸‹ä¸¤ç§ å¤åŠ›å¨œæ‰=18 æˆ–è€… å¤åŠ›å¨œæ‰ 18 ä¸­é—´çš„åˆ†éš”ç¬¦å¯ä»¥ä½¿ç”¨=æˆ–è€…ç©ºæ ¼ï¼Œå¦‚æœç¢°åˆ°ä»¥#å¼€å¤´çš„ï¼Œåˆ™ä¸ä¼šè¯»å–ï¼Œæˆ‘ä»¬æ¥è¯»å–åˆšåˆšå†™çš„properties.txtæ–‡ä»¶ Properties properties = new Properties();//è¯»å–æ–‡ä»¶properties.load(new FileReader(\"properties.txt\"));Set&lt;String&gt; propertiesName = properties.stringPropertyNames();//éå†é›†åˆfor (String name : propertiesName) &#123; System.out.println(name+\"=\"+properties.getProperty(name));&#125; è¾“å‡ºä¸º å¤åŠ›å¨œæ‰=18è¿ªä¸½çƒ­å·´=17 ç¼“å†²æµä¹‹å‰æˆ‘ä»¬ä½¿ç”¨è¿‡å­—èŠ‚æµInputStreamå’ŒOutputStreamè¿›è¡Œè¿‡æ–‡ä»¶å¤åˆ¶çš„ç»ƒä¹ ï¼Œä½†æ˜¯å…¶å®æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªæµçš„é€Ÿåº¦å¾ˆæ…¢ï¼Œæ‰€ä»¥è¿™é‡Œå°±å¼•å…¥äº†ç¼“å†²æµBufferedInputStreamå’ŒBufferedOutPutStreamï¼Œè¿˜æœ‰BufferedReaderå’ŒBufferedWriterã€‚ä¸ºäº†æ„Ÿå—å­—èŠ‚æµå’Œç¼“å†²æµçš„å·®å¼‚ï¼Œæˆ‘ä»¬è¿™æ¬¡æ¥å¤åˆ¶ä¸€ä¸ª1MBçš„æ–‡ä»¶ã€‚ å­—èŠ‚æµå¤åˆ¶é¦–å…ˆä½¿ç”¨å­—èŠ‚æµï¼Œä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„è¯»å– long start = System.currentTimeMillis();InputStream fis = new FileInputStream(\"file.pdf\");OutputStream fos = new FileOutputStream(\"copy.pdf\");int len = 0;while ((len = fis.read()) != -1) &#123; fos.write(len);&#125;fos.close();fis.close();long end = System.currentTimeMillis();System.out.println(\"å…±è€—æ—¶\" + (end - start) + \"æ¯«ç§’\"); è¾“å‡ºä¸º å…±è€—æ—¶11738æ¯«ç§’ ç°åœ¨è¿˜æ˜¯ä½¿ç”¨å­—èŠ‚æµï¼Œä¸è¿‡ä¸€æ¬¡è¯»å–1KB long start = System.currentTimeMillis();InputStream fis = new FileInputStream(\"G:\\\\JavaProject\\\\ThirdProject\\\\src\\\\file.pdf\");OutputStream fos = new FileOutputStream(\"copy.pdf\");int len = 0; //å­˜å‚¨è¯»å–çš„æœ‰æ•ˆä½æ•°byte[] bytes = new byte[1024]; //è¯»å–1KBwhile ((len = fis.read(bytes)) != -1) &#123; fos.write(bytes,0,len);&#125;fos.close();fis.close();long end = System.currentTimeMillis(); è¾“å‡ºä¸º å…±è€—æ—¶203æ¯«ç§’ ç¼“å†²æµå¤åˆ¶è¿™æ¬¡ä½¿ç”¨ç¼“å†²æµï¼Œå…ˆä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„è¯»å– long start = System.currentTimeMillis();BufferedInputStream buffis = new BufferedInputStream(new FileInputStream(\"file.pdf\"));BufferedOutputStream buffos = new BufferedOutputStream(new FileOutputStream(\"copy.pdf\"));int len = 0;while ((len = buffis.read()) != -1) &#123; buffos.write(len);&#125;buffos.close();buffis.close();long end = System.currentTimeMillis();System.out.println(\"å…±è€—æ—¶\" + (end - start) + \"æ¯«ç§’\"); è¾“å‡ºä¸º å…±è€—æ—¶94æ¯«ç§’ è¿™æ¬¡ä¸€æ¬¡è¯»å–ä¸€1KB long start = System.currentTimeMillis();BufferedInputStream buffis = new BufferedInputStream(new FileInputStream(\"file.pdf\"));BufferedOutputStream buffos = new BufferedOutputStream(new FileOutputStream(\"copy.pdf\"));int len = 0;byte[] bytes = new byte[1024];while ((len = buffis.read(bytes)) != -1) &#123; buffos.write(bytes,0,len);&#125;buffos.close();buffis.close();long end = System.currentTimeMillis();System.out.println(\"å…±è€—æ—¶\" + (end - start) + \"æ¯«ç§’\"); è¾“å‡ºä¸º å…±è€—æ—¶16æ¯«ç§’ ä¸‹é¢æˆ‘æ¥åšä¸€ä¸ªè¡¨æ ¼æ€»ç»“ä¸€ä¸‹é€Ÿåº¦ ç¼“å†²æµ(ms) å­—èŠ‚æµ(ms) 1MB 94 11738 1KB 16 203 ä»è¿™äº›æ•°æ®çœ‹ï¼Œå°±çŸ¥é“ç¼“å†²æµçš„é€Ÿåº¦æ¯”å­—èŠ‚æµçš„å¿«å¾ˆå¤šã€‚ ç¼“å†²æµçš„ä¸€äº›ç‰¹æœ‰æ–¹æ³•ç¼“å†²æµæä¾›äº†å‡ ä¸ªç‰¹æœ‰çš„æ–¹æ³•ï¼Œå¦‚BufferedOutputStreamå’ŒBufferedReaderä¸­æœ‰ä¸€ä¸ªæ–¹æ³•ä¸º readline() ä¸€æ¬¡è¯»å–ä¸€è¡Œæ•°æ®ï¼Œè¯»åˆ°çš„æ•°æ®ä¸åŒ…æ‹¬æ¢è¡Œç¬¦ å¦‚æœè¯»åˆ°äº†æœ«å°¾ï¼Œé‚£ä¹ˆè¿”å›null BufferedInputStreamå’ŒBufferedWriterä¹Ÿæä¾›äº†ä¸€ä¸ªæ–¹æ³•å«åš newline() ä½œç”¨æ˜¯æ¢è¡Œï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿè¿›è¡Œæ¢è¡Œ ä¹‹å‰æˆ‘ä»¬å†™çš„\\r\\nåªé€‚ç”¨äºWindowsç³»ç»Ÿ è½¬æ¢æµæˆ‘ä»¬åœ¨ä½¿ç”¨å­—ç¬¦æµæ—¶ï¼Œåªèƒ½è¯»å–UTF-8æ ¼å¼çš„æ–‡ä»¶ï¼Œå†™å‡ºçš„æ•°æ®çš„æ ¼å¼ä¹Ÿæ˜¯UTF-8çš„ï¼Œç°åœ¨å‡è®¾æˆ‘è¦è¯»å–ä¸€ä¸ªGBKçš„æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸­æ–‡â€ä½ å¥½â€ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ FileReader reader = new FileReader(\"text.txt\");int len = 0;while ((len = reader.read()) != -1) &#123; System.out.print((char)len);&#125;reader.close(); å‘ç°è¯»å–çš„åªæ˜¯ä¹±ç  è¿™æ˜¯å› ä¸ºFileReaderæ˜¯æŒ‰ç…§UTF-8çš„æ ¼å¼è¯»å–çš„ï¼Œä½†æ˜¯æ–‡ä»¶çš„æ ¼å¼å´æ˜¯GBKï¼Œç¼–ç ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆè§£ç å½“ç„¶ä¼šå‡ºé—®é¢˜ã€‚æ‰€ä»¥å°±æœ‰äº†è½¬æ¢æµçš„å‡ºç°ï¼Œæœ‰ä¸¤ä¸ªç±»æ˜¯åšè¿™ä»¶äº‹æƒ…çš„ï¼Œåˆ†åˆ«æ˜¯InputStreamReaderå’ŒOutputStreamWriterï¼Œå®ƒä»¬çš„æ„é€ æ–¹æ³•æ˜¯ InputStreamReader(InputStream in, String charset) OutputStreamWriter(OutputStream out, String charset) ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ç”¨æ¥æŒ‡å®šå­—ç¬¦é›†çš„ï¼Œå¦‚æœä¸æŒ‡å®šå­—ç¬¦é›†çš„è¯ï¼Œå°±é»˜è®¤ä¸ºUTF-8ã€‚ String path = \"text.txt\";InputStreamReader reader = new InputStreamReader(new FileInputStream(path), \"gbk\");int len = 0;while ((len = reader.read()) != -1) &#123; System.out.print((char) len);&#125;reader.close(); è¾“å‡ºä¸º ä½ å¥½ ä¸‹é¢åšä¸€ä¸ªå°çš„ç»ƒä¹ ï¼Œå°†ä¸€ä¸ªGBKæ ¼å¼çš„æ–‡ä»¶è½¬æ¢ä¸ºä¸€ä¸ªUTF-8æ ¼å¼çš„æ–‡ä»¶ String path = \"text.txt\";//ä¹Ÿå¯å†™æˆGBKInputStreamReader reader = new InputStreamReader(new FileInputStream(path), \"gbk\"); //ä¸æŒ‡å®šå­—ç¬¦é›†çš„è¯ï¼Œé»˜è®¤ä¸ºUTF-8(utf-8)OutputStreamWriter writer = new OutputStreamWriter(new FileOutputStream(\"test.txt\"));int len = 0;while ((len = reader.read()) != -1) &#123; writer.write(len);&#125;writer.close();reader.close(); åºåˆ—æµå¦‚æœæˆ‘ä»¬æƒ³å°†å¯¹è±¡ä¿å­˜åœ¨ç¡¬ç›˜ä¸­æ€ä¹ˆåŠ? å› ä¸ºä¸€æ—¦æ–­ç”µï¼Œå†…å­˜ä¸­çš„å¯¹è±¡å°±ä¼šå…¨éƒ¨çš„æ¶ˆå¤±ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦åºåˆ—æµå°†å¯¹è±¡ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œå¯¹åº”ä¹Ÿæœ‰ç›¸åº”çš„åºåˆ—æµè¯»å–æ–‡ä»¶å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ã€‚ ObjectOutputStream å°†æ–‡ä»¶å†™åˆ°æ–‡ä»¶ä¸­çš„ç±» writeObject(Object o) è¯¥æ–¹æ³•å°†å¯¹è±¡å†™åˆ°æ–‡ä»¶ä¸­ ObjectInputStream ä»æ–‡ä»¶ä¸­è¯»å–å¯¹è±¡çš„ç±» readObject() å°†æ–‡ä»¶ä¸­çš„å¯¹è±¡è¯»å–å‡ºæ¥ï¼Œè¿”å›ä¸€ä¸ªObjectå¯¹è±¡ ä¸‹é¢ä»‹ç»ä½¿ç”¨åŠæ³¨æ„äº‹é¡¹ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªPersonç±» package IOProjectpublic class Person &#123; private String name; private int age; public Person(String name, int age) &#123; this.age = age; this.name = name; &#125; public Person() &#123; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @Override public String toString() &#123; return \"Person&#123;\" + \"age=\" + age + \", name='\" + name + '\\'' + '&#125;'; &#125;&#125; ç„¶ååœ¨æµ‹è¯•ç±»ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ObjectOutputStreamç±»çš„å¯¹è±¡å°†è¿™ä¸ªå¯¹è±¡å†™åˆ°æ–‡ä»¶ä¸­ ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"person\"));Person p = new Person(\"è¿ªä¸½çƒ­å·´\",18);oos.writeObject(p);oos.close(); è¿™æ—¶æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ è¿™æ—¶å› ä¸ºPersonæ²¡æœ‰å®ç°Serializableæ¥å£ï¼Œè¿™é‡Œè°ˆç¬¬ä¸€ä¸ªæ³¨æ„äº‹é¡¹ åªæœ‰å®ç°äº†Serializableæ¥å£æ‰èƒ½å°†å…¶å¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ– Serilaizableæ˜¯ä¸€ä¸ªæ ‡å¿—æ€§æ¥å£ï¼Œæ‰€è°“çš„æ ‡å¿—æ€§æŒ‡çš„æ˜¯åªèµ·ä¸€ä¸ªæ ‡å¿—çš„ä½œç”¨ï¼ŒSerializableæ¥å£é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦å®ç°ä»»ä½•çš„æ–¹æ³• ç°åœ¨å°†Personå®ç°Serializableæ¥å£ç„¶åæ‰§è¡Œä¸Šé¢çš„ç¨‹åºå°±ä¸ä¼šæœ‰é—®é¢˜äº†ã€‚ ä¸‹é¢ä½¿ç”¨ObjectInputStreamè¯»å–åˆšåˆšåºåˆ—åŒ–çš„å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšååºåˆ—åŒ– ObjectInputStream ois = new ObjectInputStream(new FileInputStream(\"person\"));Object o = ois.readObject();System.out.println(o);ois.close(); è¾“å‡ºä¸º Person&#123;age=18, name='è¿ªä¸½çƒ­å·´'&#125; è¯´æ˜æˆ‘ä»¬è¯»å–æˆåŠŸäº†ã€‚ ä¸‹é¢æ·»åŠ å‡ ä¸ªæ³¨æ„äº‹é¡¹ staticä¿®é¥°çš„é™æ€å˜é‡ä¸èƒ½è¿›è¡Œåºåˆ—åŒ– è¢«transientä¿®é¥°çš„æˆå‘˜å˜é‡ä¹Ÿä¸èƒ½è¿›è¡Œåºåˆ—åŒ– å¦‚æœå¯¹è±¡åºåˆ—åŒ–åï¼Œä¿®æ”¹äº†ç±»æ–‡ä»¶ï¼Œé‚£ä¹ˆä¸èƒ½è¢«åºåˆ—åŒ– ç°åœ¨æˆ‘ä»¬ä¿®æ”¹Personç±»ä¸­çš„ageä½¿ç”¨transientä¿®é¥°ï¼Œè¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼Œå¾—åˆ°çš„ç»“æœä¸º Person&#123;age=0, name='è¿ªä¸½çƒ­å·´'&#125; age = 0å¹¶ä¸ç­‰äº18ï¼Œè¯´æ˜ageæ²¡æœ‰è¢«åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­ã€‚ ç°åœ¨æˆ‘ä»¬å°†Personç±»çš„å¯¹è±¡åºåˆ—åŒ–ï¼Œç„¶åä¿®æ”¹Personç±»ï¼Œæ¥ç€åœ¨ååºåˆ—åŒ– Exception in thread \"main\" java.io.InvalidClassException: IOProject.Person; local class incompatible: stream classdesc serialVersionUID = -774581383406272369, local class serialVersionUID = -4004215360553243182 at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:699) at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1885) at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1751) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2042) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:431) at IOProject.TestSerial.main(TestSerial.java:13) æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸InvalidClassExceptionï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬çš„serialVersionUIDå¯¹ä¸ä¸Šã€‚serialVersionUIDæ˜¯æ ¹æ®ç±»æ–‡ä»¶è‡ªåŠ¨è®¡ç®—çš„ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ç±»æ–‡ä»¶æ—¶ï¼ŒserialVersionUIDå‘ç”Ÿäº†æ”¹å˜ï¼Œå½“æˆ‘ä»¬ååºåˆ—åŒ–æ—¶ä¼šæ¯”è¾ƒserialVersionUIDï¼Œç”±äºè¿™æ—¶å®ƒä»¬çš„serialVersionUIDä¸åŒï¼Œæ‰€ä»¥æŠ›å‡ºäº†è¿™ä¸ªå¼‚å¸¸ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç±»é‡Œé¢ä¸ºè¿™ä¸ªå˜é‡èµ‹ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œè¿™æ ·serialVersionUIDå°±ä¸ä¼šå‘é€æ”¹å˜ï¼Œä½†æ˜¯èµ‹å€¼ä¹Ÿæ˜¯æœ‰è¦æ±‚çš„ å¿…é¡»ä½¿ç”¨final static longä¿®é¥° æˆ‘ä»¬åœ¨Personç±»ä¸­åŠ å…¥ private final static long serialVersionUID = 1L; ç„¶åæ‰§è¡Œä¸Šé¢çš„æ“ä½œï¼Œå‘ç°æ²¡æœ‰é—®é¢˜ã€‚è¾“å‡ºä¸º Person&#123;age=18, name='è¿ªä¸½çƒ­å·´'&#125; //è¿™é‡Œageæ²¡æœ‰ä½¿ç”¨transientä¿®é¥° æ‰“å°æµPrintStreamæ˜¯ä¸€ä¸ªæœ‰å…³äºæ‰“å°æµçš„ç±»ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨çš„System.outå…¶ä¸­çš„outå°±æ˜¯ä¸€ä¸ªPrintStreamå¯¹è±¡ï¼Œä¸‹é¢æ˜¯å…¶åœ¨Systemç±»ä¸­çš„å®šä¹‰ public final static PrintStream out = null; æ‰“å°æµæœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ å®ƒåªè´Ÿè´£æ•°æ®çš„è¾“å‡º æ°¸ä¸æŠ›å‡ºIOExecption å®ƒç»§æ‰¿äº†OutputStreamç±» å®ƒæœ‰è‡ªå·±çš„ç‰¹æœ‰æ–¹æ³•ï¼Œå¦‚print(), println()ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥æ‰“å°å‡ºä»»æ„çš„æ•°æ®ç±»å‹ å½“å®ƒè°ƒç”¨OutputStreamç±»çš„æ–¹æ³•write()æ—¶ï¼Œæ‰“å°æ•°æ®æ—¶ä¼šæŸ¥ç¼–ç è¡¨ï¼Œå¦‚write(97)ä¼šæ‰“å°å‡ºaï¼Œä½†æ˜¯print(),println()æ–¹æ³•è¾“å…¥ä»€ä¹ˆï¼Œæ‰“å°å‡ºä»€ä¹ˆï¼Œå¦‚print(97)æ‰“å°å‡º97ã€‚ ä¸‹é¢ç®€å•ä»‹ç»ä½¿ç”¨ï¼Œé¦–å…ˆçœ‹PrintStreamçš„æ„é€ æ–¹æ³• PrintStream(File file) PrintStream(OutputStream out) PrintStream(String filename) PrintStream printStream = new PrintStream(\"a.txt\");printStream.write(97);printStream.println(97);printStream.println(22.2);printStream.println(true);printStream.println('a');printStream.println(\"abc\");printStream.close(); æ‰“å¼€a.txtæ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹ä¸º a9722.2trueaabc Systemç±»æœ‰ä¸€ä¸ªæ–¹æ³•setOut(PrintStream out)ï¼Œå¯ä»¥ç”¨æ¥æ”¹å˜System.outçš„æŒ‡å‘ï¼Œè¿™æ ·æ‰“å°å‡ºçš„å†…å®¹ä¸ä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼Œè€Œæ˜¯ä¼šåœ¨æ–‡ä»¶ä¸­ PrintStream printStream = new PrintStream(\"a.txt\");System.setOut(printStream);System.out.println(\"æ€ä¹ˆäº†ï¼Œä½ ç´¯äº†ï¼Œè¯´å¥½çš„å¹¸ç¦å‘¢ï¼Ÿ\"); è¿è¡Œç¨‹åºå‘ç°æ§åˆ¶å°æ²¡æœ‰ä»»ä½•çš„è¾“å‡º è€Œåœ¨a.txtä¸­å‡ºç°äº†æ‰“å°çš„è¯­å¥ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"æ–‡ä»¶","slug":"æ–‡ä»¶","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%96%87%E4%BB%B6/"},{"name":"File","slug":"File","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/File/"}]},{"title":"Javaç½‘ç»œç¼–ç¨‹","date":"2019-07-25T16:00:00.000Z","path":"/Javaç½‘ç»œç¼–ç¨‹/","text":"ç½‘ç»œç¼–ç¨‹ä¸»è¦æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„äº¤äº’ï¼Œä¸å®¢æˆ·ç«¯æœ‰å…³çš„ç±»æ˜¯Socketï¼Œä¸æœåŠ¡å™¨æœ‰å…³çš„ç±»æ˜¯ServerSocketã€‚å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ä¸»è¦æ˜¯é€šè¿‡å­—èŠ‚æµå®ç°çš„ï¼Œå®¢æˆ·ç«¯Socketå«æœ‰æ–¹æ³• getInputStream() getOutputStream() æ¥è·å¾—æµï¼Œè€ŒæœåŠ¡å™¨é€šè¿‡accept()ç›‘å¬è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªSocketç±»å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯è®¿é—®çš„å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨é€šè¿‡è¿™ä¸ªSocketè·å¾—æµï¼Œé€šè¿‡è¯¥æµä¸å®¢æˆ·ç«¯é€šä¿¡ã€‚ æ„é€ æ–¹æ³•å®¢æˆ·ç«¯Socketç±»çš„æ„é€ æ–¹æ³•ä¸º Socket(String host, int port) ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåŸŸååœ°å€æˆ–è€…IPåœ°å€ ç¬¬äºŒä¸ªå‚æ•°ä¸ºç«¯å£å· æœåŠ¡å™¨ç«¯ServerSocketçš„æ„é€ æ–¹æ³•ä¸º ServerSocket(int port) è¿™ä¸ªå‚æ•°ä¸ºç«¯å£å· å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ç®€å•é€šä¿¡ä¸‹é¢å†™ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥è¿›è¡Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„é€šä¿¡ã€‚ å®¢æˆ·ç«¯ä»£ç  import java.io.IOException;import java.io.InputStream;import java.io.OutputStream;import java.net.Socket;public class Client &#123; public static void main(String[] args) throws IOException &#123; //åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡socket æœåŠ¡å™¨IPåœ°å€ä¸º127.0.0.1ï¼Œä»£è¡¨æœ¬æœº ç«¯å£å·ä¸º8888 Socket socket = new Socket(\"127.0.0.1\",8888); //è·å¾—è¾“å‡ºæµä»¥ä¾¿å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ OutputStream os = socket.getOutputStream(); //å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ os.write(\"è¿™é‡Œæ˜¯å®¢æˆ·ç«¯\".getBytes()); //è·å¾—è¾“å…¥æµï¼Œä»¥æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯ InputStream is = socket.getInputStream(); //è¯»å–æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯å¹¶æ‰“å° byte[] bytes = new byte[1024]; int len = is.read(bytes); System.out.println(new String(bytes,0, len)); //é‡Šæ”¾èµ„æº socket.close(); &#125;&#125; æœåŠ¡å™¨ç«¯ä»£ç  import java.io.IOException;import java.io.InputStream;import java.io.OutputStream;import java.net.ServerSocket;import java.net.Socket;public class Server &#123; public static void main(String[] args) throws IOException &#123; //åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å¯¹è±¡ ServerSocket serverSocket = new ServerSocket(8888); //é€šè¿‡accept()æ–¹æ³•è·å¾—å®¢æˆ·ç«¯å¯¹è±¡ Socket socket = serverSocket.accept(); //é€šè¿‡å®¢æˆ·ç«¯å¯¹è±¡è·å¾—è¾“å…¥æµï¼Œå·²è¯»å–å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ InputStream is = socket.getInputStream(); //è¯»å–å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯å¹¶æ‰“å° byte[] bytes = new byte[1024]; int len = is.read(bytes); System.out.println(new String(bytes, 0, len)); //é€šè¿‡å®¢æˆ·ç«¯å¯¹è±¡è·å¾—è¾“å‡ºæµï¼Œä»¥ä¾¿å‘é€æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ OutputStream os = socket.getOutputStream(); os.write(\"æ”¶åˆ°äº†ï¼Œè°¢è°¢\".getBytes()); //é‡Šæ”¾èµ„æº socket.close(); serverSocket.close(); &#125;&#125; å…ˆè¿è¡ŒæœåŠ¡å™¨ç«¯çš„ç¨‹åºï¼Œç„¶åè¿è¡Œå®¢æˆ·ç«¯çš„ç¨‹åºï¼ŒæœåŠ¡å™¨çš„è¾“å‡ºä¸º è¿™é‡Œæ˜¯å®¢æˆ·ç«¯ å®¢æˆ·ç«¯çš„è¾“å‡ºä¸º æ”¶åˆ°äº†ï¼Œè°¢è°¢ æ–‡ä»¶ä¸Šä¼ å°†æœ¬åœ°çš„æ–‡ä»¶ä¼ è¾“åˆ°æœåŠ¡å™¨ï¼Œå…¶å®åŸç†å°±æ˜¯æ–‡ä»¶çš„å¤åˆ¶ï¼Œä¹‹å‰æˆ‘ä»¬å†™è¿‡ï¼Œä¸è¿‡ç°åœ¨æ˜¯ä½¿ç”¨ç½‘ç»œæµæ¥å®ç°ï¼Œä¸‹é¢æ˜¯ä»£ç ï¼Œè¯´æ˜éƒ½åœ¨ä»£ç çš„æ³¨é‡Šä¸­ã€‚ å®¢æˆ·ç«¯ä»£ç  import java.io.FileInputStream;import java.io.IOException;import java.io.InputStream;import java.io.OutputStream;import java.net.Socket;public class ClientUpload &#123; public static void main(String[]args) throws IOException &#123; //åˆ›å»ºè¾“å…¥æµè¯»å–è¦ä¸Šä¼ çš„æ–‡ä»¶ InputStream fis = new FileInputStream(\"upload.pdf\"); //åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ Socket client = new Socket(\"127.0.0.1\", 8888); //è¯»å–æ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶é€šè¿‡socketçš„è¾“å‡ºæµä¼ ç»™æœåŠ¡å™¨ byte[] bytes = new byte[1024]; int len = 0; OutputStream os = client.getOutputStream(); while ((len = fis.read(bytes)) != -1) &#123; os.write(bytes, 0, len); &#125; //ç”±äºreadä¸ä¼šå°†æœ€åè¯»å–åˆ°-1å‘é€ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±å¾—ä¸åˆ°-1ï¼Œå°±ä¸ä¼šç»ˆæ­¢ //å°±ä¼šè¿›å…¥æ­»å¾ªç¯ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç æ˜¯å†™å…¥ç»ˆæ­¢ç¬¦ï¼Œä½ å¯ä»¥æŠŠä¸‹é¢è¿™è¡Œä»£ç å»æ‰ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ client.shutdownOutput(); //è·å¾—è¾“å…¥æµä»¥ä¾¿è·å¾—æœåŠ¡å™¨çš„è¿”å›ä¿¡æ¯ InputStream is = client.getInputStream(); while ((len = is.read(bytes)) != -1) &#123; System.out.println(new String(bytes,0,len)); &#125; //é‡Šæ”¾èµ„æº fis.close(); client.close(); &#125;&#125; æœåŠ¡å™¨ç«¯ä»£ç  import java.io.FileOutputStream;import java.io.IOException;import java.io.InputStream;import java.io.OutputStream;import java.net.ServerSocket;import java.net.Socket;public class ServerUpload &#123; public static void main(String[] args) throws IOException &#123; //è·å¾—è¾“å‡ºæµï¼Œå°†ä¸Šä¼ çš„æ–‡ä»¶å†™åˆ°æœåŠ¡å™¨çš„ç¡¬ç›˜ä¸­ OutputStream fos = new FileOutputStream(\"uploadServer.pdf\"); //åˆ›å»ºæœåŠ¡å™¨å¯¹è±¡ ServerSocket server = new ServerSocket(8888); Socket socket = server.accept(); //è·å¾—è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€çš„æ•°æ® InputStream is = socket.getInputStream(); byte[] bytes = new byte[1024]; int len = 0; //è¯»åˆ°-1æ‰ä¼šç»ˆæ­¢ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯æœ€åè¦å‘ä¸€ä¸ªç»ˆæ­¢ç¬¦-1ï¼Œå¦åˆ™ä¼šä¸æ–­å¾ªç¯ while ((len = is.read(bytes)) != -1) &#123; fos.write(bytes); &#125; //å‘å®¢æˆ·ç«¯è¿”å›æ•°æ®\"å·²ç»ä¸Šä¼ å®Œæˆ\" OutputStream os = socket.getOutputStream(); os.write(\"å·²ç»ä¸Šä¼ å®Œæˆ\".getBytes()); socket.close(); fos.close(); server.close(); &#125;&#125;","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"ç½‘ç»œç¼–ç¨‹","slug":"ç½‘ç»œç¼–ç¨‹","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"}]},{"title":"Javaåå°„","date":"2019-07-19T16:00:00.000Z","path":"/Javaåå°„/","text":"åå°„æ˜¯æ¡†æ¶è®¾è®¡çš„çµé­‚ï¼Œé€šè¿‡åå°„æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶è¯»å–é…ç½®æ–‡ä»¶åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªç±»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¯»å–æ³¨è§£æ¥è¾¾åˆ°æˆ‘ä»¬æƒ³åˆ°çš„åŠŸèƒ½ã€‚ä¸åå°„æœ‰å…³çš„ç±»æ˜¯Classç±»ã€‚ Classç±»å¯¹è±¡çš„è·å–æ–¹æ³•Classç±»å¯¹è±¡çš„è·å–æ–¹æ³•æœ‰ä¸‰ç§ Class.forName(String name) å‚æ•°æ˜¯ç±»çš„å…¨ç±»å(åŒ…å+ç±»å)ï¼Œå¯ä»¥è·å¾—è¯¥ç±»çš„Classå¯¹è±¡ ç±»å.class é€šè¿‡ç±»çš„é™æ€å±æ€§classå¯ä»¥è·å–Classå¯¹è±¡ å¯¹è±¡.getClass() é€šè¿‡å¯¹è±¡çš„getClass()æ–¹æ³•å¯ä»¥è·å–Classå¯¹è±¡ å‡è®¾ä¸€ä¸ªAnimalç±» public class Animal &#123; public Animal(String name, int age) &#123; this.name = name; this.age = age; &#125; public Animal() &#123; &#125; public String name; private int age; public void eat() &#123; System.out.println(\"eat ...\"); &#125; public void eat(String string) &#123; System.out.println(\"eat \" + string); &#125; private void sleep() &#123; System.out.println(\"sleep ...\"); &#125; @Override public String toString() &#123; return \"Animal&#123;\" + \"name='\" + name + '\\'' + \", age=\" + age + '&#125;'; &#125;&#125; ç°åœ¨è¦é€šè¿‡ä¸Šé¢çš„ä¸‰ç§æ–¹æ³•è·å–è¯¥ç±»çš„Classå¯¹è±¡ //é€šè¿‡å…¨ç±»åè·å–Classå¯¹è±¡Class cls1 = Class.forName(\"Animal\");//é€šè¿‡ç±»çš„é™æ€å±æ€§classè·å–Classå¯¹è±¡Class cls2 = Animal.class;//é€šè¿‡å¯¹è±¡çš„getClass()è·å–é™æ€å¯¹è±¡Animal animal = new Animal();Class cls3 = animal.getClass(); å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡ä¸Šé¢ä¸‰ç§æ–¹æ³•è·å–çš„Classå¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ System.out.println(cls1 == cls2); //trueSystem.out.println(cls1 == cls3); //true Classç±»çš„å¸¸è§æˆå‘˜æ–¹æ³•ä¸æˆå‘˜å˜é‡æœ‰å…³çš„æ–¹æ³• getFields() è·å–publicä¿®é¥°çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œè¿”å›ä¸€ä¸ªField[] getField(String name) è·å–æŒ‡å®šåç§°è¢«publicä¿®é¥°çš„æˆå‘˜å˜é‡ getDeclaredFields() åŒgetFields()ï¼Œä¸è¿‡ä»»æ„ä¿®é¥°ç¬¦ä¿®é¥°çš„éƒ½å¯ä»¥è·å– getDeclaredField(String name) åŒgetField(String name)ï¼Œä¸è¿‡ä»»æ„ä¿®é¥°ç¬¦ä¿®é¥°çš„éƒ½å¯ä»¥è·å– Field[] fields1 = cls1.getFields();//public java.lang.String Animal.namefor (Field field : fields1) &#123; System.out.println(field);&#125;Field[] fields2 = cls1.getDeclaredFields();//public java.lang.String Animal.name//private int Animal.agefor (Field field : fields2) &#123; System.out.println(field);&#125;Field field1 = cls1.getDeclaredField(\"age\");//private int Animal.ageSystem.out.println(field1); å¯ä»¥é€šè¿‡set(Object obj, Object value)æ–¹æ³•å¯¹æŒ‡å®šçš„å¯¹è±¡è®¾å®šå€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡get(Object obj)æ–¹æ³•æ¥è·å–å€¼ Field field2 = cls1.getDeclaredField(\"name\");field2.set(animal,\"Dog\");System.out.println(animal.name); //DogSystem.out.println(field2.get(animal)); //Dog å¦‚æœæˆ‘ä»¬è¦å¯¹ageè¿›è¡Œèµ‹å€¼ï¼Œå› ä¸ºageå˜é‡æ˜¯privateä¿®é¥°çš„ï¼Œæ˜¯ä¸èƒ½åœ¨ç±»å¤–é¢ç›´æ¥è®¿é—®çš„ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨setAccessible(true)æ–¹æ³•ï¼Œæ¥å¿½ç•¥è®¿é—®ä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥(æš´åŠ›åå°„) Field field1 = cls1.getDeclaredField(\"age\");field1.setAccessible(true);field1.set(animal,10);System.out.println(field1.get(animal)); //10//System.out.println(animal.age); //ä¼šæŠ¥é”™ï¼Œä¸èƒ½è¿™ä¹ˆè®¿é—® ä¸æ„é€ æ–¹æ³•æœ‰å…³çš„æ–¹æ³• getConstructors() å¾—åˆ°ç”±publicä¿®é¥°çš„æ‰€æœ‰æ„é€ æ–¹æ³• getConstructor() è·å–æŒ‡å®šå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå¦‚ getConstructor()ï¼šè·å–æ— å‚æ„é€ å‡½æ•° getConstructor(String.class, int.class)ï¼šè·å¾—ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ä¸ºStringç±»å‹å’Œç¬¬äºŒä¸ªå‚æ•°ç±»å‹ä¸ºintç±»å‹çš„æ„é€ æ–¹æ³• cls1.getDeclaredConstructors() å‚ç…§Field cls1.getDeclaredConstructor() å‚ç…§Field //è·å¾—æ— å‚çš„æ„é€ æ–¹æ³•Constructor cons1 = cls1.getConstructor();Stream.of(cons1).forEach(System.out::println); //public Animal()//è·å¾—å‚æ•°ç±»å‹åˆ†åˆ«ä¸ºStringç±»å‹å’Œintç±»å‹çš„æ„é€ æ–¹æ³•Constructor cons2 = cls1.getConstructor(String.class, int.class);Stream.of(cons1).forEach(System.out::println); //public Animal() ç°åœ¨è·å¾—äº†æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆæ„é€ æ–¹æ³•çš„ä½œç”¨å°±æ˜¯åˆ›é€ å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Contructorå¯¹è±¡çš„çš„newInstance()æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚ //newInstanceæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªObjectå¯¹è±¡Animal animal1 = (Animal) cons1.newInstance();Animal animal2 = (Animal) cons2.newInstance(\"Cat\", 2);System.out.println(animal1);System.out.println(animal2); è¾“å‡ºä¸º Animal&#123;name='null', age=0&#125;Animal&#123;name='Cat', age=2&#125; å¦‚æœæƒ³åˆ›å»ºä¸€ä¸ªæ— å‚çš„å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡Classå¯¹è±¡çš„newInsatance()æ–¹æ³•åˆ›å»ºï¼Œå¦‚ Animal animal3 = (Animal) cls1.newInstance(); ä¸æˆå‘˜æ–¹æ³•æœ‰å…³çš„æ–¹æ³• getMethods è·å–æ‰€æœ‰publicä¿®é¥°çš„æ–¹æ³• getMethod() é€šè¿‡æ–¹æ³•åå’Œå‚æ•°ç±»å‹(åŒºåˆ«é‡è½½çš„æ–¹æ³•)è·å–publicä¿®é¥°çš„æŒ‡å®šæ–¹æ³• getDeclaredMethods å¿½ç•¥ä¿®é¥°ç¬¦ getDeclaredMethod å¿½ç•¥ä¿®é¥°ç¬¦ //è·å–ä¸å¸¦å‚æ•°çš„eatæ–¹æ³•Method eat1 = cls1.getMethod(\"eat\");//è·å–å¸¦ä¸€ä¸ªå‚æ•°ç±»å‹ä¸ºStringçš„eatæ–¹æ³•Method eat2 = cls1.getMethod(\"eat\",String.class);//è·å–privateä¿®é¥°çš„sleepæ–¹æ³•Method sleep = cls1.getDeclaredMethod(\"sleep\"); è·å–åˆ°äº†æ–¹æ³•ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯æ€ä¹ˆä½¿ç”¨çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨invoke()æ–¹æ³•æ¥æ‰§è¡Œæ–¹æ³•ï¼Œéœ€è¦ä¼ å…¥ç›¸åº”çš„å¯¹è±¡å’Œéœ€è¦çš„å‚æ•°ï¼Œå¦‚æœæ–¹æ³•ä¸éœ€è¦å‚æ•°ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ä¼ ï¼Œå¦‚ eat1.invoke(animal);//éœ€è¦ä¼ å…¥å‚æ•°eat2.invoke(animal,\"é¥­\");//å› ä¸ºsleepæ˜¯privateä¿®é¥°çš„ï¼Œè¦æ‰§è¡Œå°±è¦æ‰§è¡Œä¸‹é¢è¿™ä¸€æ­¥sleep.setAccessible(true);sleep.invoke(animal); è¾“å‡ºä¸º eat ...eat é¥­sleep ... æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡getName()æ–¹æ³•è·å¾—æ–¹æ³•åï¼Œå¦‚ System.out.println(eat1.getName()); //eat æˆ‘ä»¬å¯ä»¥é€šè¿‡Classå¯¹è±¡çš„getName()æ–¹æ³•è·å¾—è¯¥ç±»çš„å…¨ç±»å(åŒ…å+ç±»å) System.out.println(cls1.getName()); //Animal ä½¿ç”¨åå°„è¯»å–é…ç½®æ–‡ä»¶åŠ¨æ€åˆ›å»ºä»»æ„çš„å¯¹è±¡æˆ‘ä»¬ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œé‚£å°±æ˜¯å¸Œæœ›åˆ›å»ºä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œè¦æ±‚ä¸èƒ½æ›´æ”¹ä»£ç ï¼Œè€Œåªéœ€è¦æ›´æ”¹é…ç½®æ–‡ä»¶å³å¯ã€‚ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªconfig.propertiesçš„é…ç½®æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ className=AnimalmethodName=eat æˆ‘ä»¬è¦åšçš„å°±æ˜¯è¯»å–é…ç½®æ–‡ä»¶ï¼Œç„¶åæ ¹æ®é…ç½®æ–‡ä»¶åˆ›å»ºç›¸åº”ç±»çš„å¯¹è±¡å¹¶ä¸”è°ƒç”¨å…¶æ–¹æ³• import java.io.FileNotFoundException;import java.io.FileReader;import java.lang.reflect.Method;import java.util.Properties;public class ReflectDemo &#123; public static void main(String[] args) throws Exception &#123; //åˆ›å»ºPropertiesè¯»å–é…ç½®æ–‡ä»¶ Properties pro = new Properties(); pro.load(new FileReader(\"G:\\\\JavaProject\\\\Fourth\\\\src\\\\config.properties\")); //è·å¾—ç±»åå’Œæ–¹æ³•å String className = pro.getProperty(\"className\"); String methodName = pro.getProperty(\"methodName\"); //æ ¹æ®ç±»åè·å–Classå¯¹è±¡ Class cls = Class.forName(className); //è·å–æ–¹æ³• Method method = cls.getMethod(methodName); //ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ Object o = cls.newInstance(); //è°ƒç”¨æ–¹æ³• method.invoke(o); &#125;&#125; ç°åœ¨æˆ‘ä»¬è¿è¡Œä¸€ä¸‹ eat ... ç°åœ¨æˆ‘ä»¬è¦åˆ›å»ºä»€ä¹ˆç±»çš„å¯¹è±¡å¹¶ä¸”è¦è°ƒç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œåªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œä¸ç”¨ä¿®æ”¹ä»£ç äº†ã€‚è™½ç„¶è¿˜æœ‰å¾ˆå¤šçš„é—®é¢˜ï¼Œæ¯”å¦‚åªèƒ½ä½¿ç”¨æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œåªèƒ½è°ƒç”¨æ— å‚çš„æ–¹æ³•ï¼Œä¸è¿‡å³ä½¿æ˜¯è¿™æ ·ä¹Ÿè®©æˆ‘ä»¬æ„Ÿå—åˆ°äº†åå°„çš„å¼ºå¤§ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"åå°„","slug":"åå°„","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%8F%8D%E5%B0%84/"}]},{"title":"Java8æ–°ç‰¹æ€§","date":"2019-07-13T16:00:00.000Z","path":"/Java8æ–°ç‰¹æ€§/","text":"æœ¬ç¯‡æ–‡ç« ä¼šä»‹ç»Java 8ä¸­çš„ä¸€äº›æ–°ç‰¹æ€§(ä¸åŒ…æ‹¬Lambdaè¡¨è¾¾å¼ï¼Œå› ä¸ºåœ¨Javaå¤šçº¿ç¨‹è¿™ç¯‡æ–‡ç« ä¸­ä»‹ç»è¿‡äº†)ã€‚ä¸»è¦å†…å®¹æ˜¯Java 8ä¸­æ–°å¢çš„å‡½æ•°å¼æ¥å£ä»¥åŠStreamæµï¼Œè¿˜æœ‰æ–¹æ³•å¼•ç”¨ã€‚ å¸¸ç”¨å‡½æ•°å¼æ¥å£å‡½æ•°å¼æ¥å£æŒ‡çš„å°±æ˜¯æ¥å£é‡Œé¢åªå«æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼ç¼–ç¨‹ï¼Œè¿™æ˜¯ä¸€ç§å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œå¼ºè°ƒçš„æ˜¯æ€ä¹ˆåšã€‚Java 8æä¾›äº†å¾ˆå¤šçš„å‡½æ•°å¼æ¥å£ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»å¸¸è§çš„å‡½æ•°å¼æ¥å£ã€‚ Supplier\\&lt;T&gt; Consumer\\&lt;T&gt; Predicate\\&lt;T&gt; Functional\\&lt;T,R&gt; Supplier&lt;T&gt;è¯¥æ¥å£é‡Œé¢æœ‰ä¸€ä¸ªT get()æ–¹æ³•ï¼ŒæŒ‰ç…§å­—é¢æ„æ€ï¼Œæ˜¯æä¾›è€…çš„æ„æ€ï¼Œè¡¨ç¤ºç”Ÿäº§å‡ºä¸€ä¸ªä¸æ³›å‹ç±»å‹Tç›¸åŒçš„æ•°æ®ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è®²ä¸€ä¸ªä¾‹å­è¯´æ˜æ­¤æ¥å£çš„ä½¿ç”¨ã€‚å‡è®¾æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œéœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²ç”±Supplieræ¥å£çš„get()æ–¹æ³•äº§ç”Ÿï¼Œè€Œäº§ç”Ÿä»€ä¹ˆæ ·çš„å­—ç¬¦ä¸²ï¼Œåˆ™ç”±ç¨‹åºå‘˜åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ˜¯ä¼ å…¥Lambdaå†³å®šã€‚å¦‚ä¸‹æ–¹æ³•ä¼ å…¥ä¸€ä¸ªSupplieræ¥å£å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸² public static String getString(Supplier&lt;String&gt; supplier) &#123; return supplier.get();&#125; æˆ‘ä»¬åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³• String str = getString(() -&gt; &#123; return \"Hello World!\";&#125;); è¾“å‡ºä¸º Hello World! Consumer&lt;T&gt;ä¸Supplieræ¥å£ä¸åŒçš„æ˜¯ï¼ŒConsumeræ¥å£æ˜¯æ¶ˆè´¹æˆ–è€…è¯´å¤„ç†ä¸€ä¸ªä¸æ³›å‹ç±»å‹ç›¸åŒæ•°æ®ç±»å‹çš„æ•°æ®ï¼Œå®ƒæœ‰ä¸€ä¸ªaccept(T t)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥æ¶ˆè´¹æ•°æ®ï¼Œå‡è®¾æœ‰ä¸‹é¢è¿™ä¸€ä¸ªæ–¹æ³• public static void handleString(String str, Consumer&lt;String&gt; consumer) &#123; consumer.accept(str);&#125; æˆ‘ä»¬ä½¿ç”¨Consumeræ¥æ¶ˆè´¹(å¤„ç†)ä¼ å…¥çš„è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ€ä¹ˆæ¶ˆè´¹ï¼Œå°±å–å†³ä¸ç¨‹åºå‘˜åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶ä¼ å…¥çš„Lambdaï¼Œè¿™æ—¶å¯¹ç¨‹åºå‘˜æ¥è¯´ï¼Œå°±æ˜¯æ€ä¹ˆåšçš„é—®é¢˜ï¼Œç›¸å½“äºä¼ å…¥ä¸€ä¸ªæ–¹æ³•å»å¤„ç†æ•°æ®ï¼Œè¿™å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ç®€å•çš„å°†ä¼ å…¥çš„æ•°æ®è¿›è¡Œæ‰“å° handleString(\"Hello Again!\", (String str) -&gt; &#123; System.out.println(str);&#125;); è¾“å‡ºä¸º Hello Again! Consumeræ¥å£ä¸­æœ‰ä¸€ä¸ªé»˜è®¤æ–¹æ³•andThen(Consumer consumer)ï¼Œçœ‹ä¸‹é¢çš„ç¨‹åºè¯´æ˜å®ƒçš„ç”¨å¤„ con1.andThen(con2).accept(str); //con1å’Œcon2éƒ½æ˜¯Consumeræ¥å£çš„å®ç°ç±»å¯¹è±¡//ç›¸å½“äºä¸‹é¢çš„ä»£ç con1.accept(str);con2.accept(str); å‡è®¾æœ‰ä¸€ä¸ªæ–¹æ³•æœ‰éœ€è¦ä¼ å…¥ä¸¤ä¸ªConsumeræ¥å£å¯¹æ•°æ®è¿›è¡Œæ¶ˆè´¹ public static void handleInterger(Integer i, Consumer&lt;Integer&gt; con1, Consumer&lt;Integer&gt; con2) &#123; con1.andThen(con2).accept(i);&#125; åœ¨mianæ–¹æ³•ä¸­ä½¿ç”¨ï¼Œcon1å¯¹æ•°å­—è¿›è¡Œ+10ç„¶åæ‰“å°ï¼Œcon2å¯¹æ•°å­—è¿›è¡Œ*10ç„¶åæ‰“å° handleInteger(10, (i) -&gt; &#123; i = i + 10; System.out.println(i);&#125;, (i) -&gt; &#123; i = i * 10; System.out.println(i);&#125;); è¾“å‡ºä¸º 20100 Predicate&lt;T&gt;Predicateæ¥å£ä¸­æœ‰ä¸€ä¸ªtest(T t)ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹æŸç§æ•°æ®ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œå®ƒè¿”å›ä¸€ä¸ªbooleanå€¼ã€‚å‡è®¾æœ‰ä¸€ä¸ªé›†åˆï¼Œæˆ‘ä»¬å¯¹å…¶ä¸­çš„å…ƒç´ è¿›è¡Œåˆ¤æ–­ï¼Œç¬¦åˆæ¡ä»¶æ”¾å…¥ä¸€ä¸ªæ–°çš„é›†åˆï¼Œçœ‹ä¸‹é¢çš„æ–¹æ³•ã€‚ public static HashMap&lt;String, Integer&gt; getMap(HashMap&lt;String,Integer&gt; map, Predicate&lt;Integer&gt; predicate) &#123; //åˆ›å»ºä¸€ä¸ªé›†åˆç”¨ä»¥æ”¾ç¬¦åˆæ¡ä»¶çš„å…ƒç´  HashMap&lt;String,Integer&gt; resmap = new HashMap&lt;&gt;(); //éå†é›†åˆ Set&lt;String&gt; key = map.keySet(); for (String str : key) &#123; int val = map.get(str); //å¯¹å€¼è¿›è¡Œåˆ¤æ–­ boolean res = predicate.test(val); //å¦‚æœå€¼ç¬¦åˆæ¡ä»¶ï¼Œå°±åŠ å…¥æ–°çš„é›†åˆ if (res) &#123; resmap.put(str,val); &#125; &#125; return resmap;&#125; ç°åœ¨æˆ‘ä»¬åœ¨mainæ–¹æ³•ä¸­è¿›è¡Œè°ƒç”¨ HashMap&lt;String,Integer&gt; map = new HashMap&lt;&gt;();map.put(\"è¿ªä¸½çƒ­å·´\",18);map.put(\"å¤åŠ›å¨œæ‰\",19);map.put(\"ä½Ÿä¸½å¨…\",20);map.put(\"å¥¥ç‰¹æ›¼\",100);//ç­›é€‰å‡ºå¹´é¾„å°äºç­‰äº20å²çš„HashMap&lt;String,Integer&gt; resmap = getMap(map, (Integer i) -&gt; &#123; if (i &lt;= 20) &#123; return true; &#125; return false;&#125;);System.out.println(resmap); è¿è¡Œç»“æœä¸º &#123;ä½Ÿä¸½å¨…=20, è¿ªä¸½çƒ­å·´=18, å¤åŠ›å¨œæ‰=19&#125; Predicateè¿˜æœ‰ä¸‰ä¸ªé»˜è®¤æ–¹æ³• and(Predicate\\&lt;T&gt; pre) ä¸ or(Predicate\\&lt;T&gt; pre) æˆ– negate() é å‡è®¾å¯¹äºä¸Šé¢çš„é‚£ä¸ªæ–¹æ³•ï¼Œæˆ‘æå‡ºä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œè¦æ±‚ä¸ä»…å¹´é¾„è¦å°è¶…è¿‡20å²ï¼Œè€Œä¸”å¹´é¾„è¦å¤§äº18 public static HashMap&lt;String, Integer&gt; getMap(HashMap&lt;String,Integer&gt; map, Predicate&lt;Integer&gt; predicate1, Predicate&lt;Integer&gt; predicate2) &#123; HashMap&lt;String,Integer&gt; resmap = new HashMap&lt;&gt;(); Set&lt;String&gt; key = map.keySet(); for (String str : key) &#123; int val = map.get(str); boolean res = predicate1.and(predicate2).test(val); if (res) &#123; resmap.put(str,val); &#125; &#125; return resmap;&#125; åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³• HashMap&lt;String,Integer&gt; resmap = getMap(map, (Integer i) -&gt; &#123; if (i &lt;= 20) &#123; return true; &#125; return false;&#125;, (Integer i) -&gt; &#123; if (i &gt; 18) &#123; return true; &#125; return false;&#125;);System.out.println(resmap); è¾“å‡ºç»“æœä¸º &#123;ä½Ÿä¸½å¨…=20, å¤åŠ›å¨œæ‰=19&#125; è‡³äºor()å’Œnegate()çš„ä½¿ç”¨æ–¹æ³•åŒä¸Šã€‚ Function&lt;T,R&gt;è¯¥æ¥å£çš„ä½œç”¨æ˜¯å°†Tè¿™ç§æ•°æ®ç±»å‹è½¬åŒ–ä¸ºRè¿™ç§æ•°æ®ç±»å‹ï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ªR apply(T t)æ–¹æ³•ã€‚ä¸‹é¢è¿™ä¸ªæ–¹æ³•å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬åŒ–ä¸ºä¸€ä¸ªæ•´æ•° public static Integer StrToInt(String str, Function&lt;String, Integer&gt; fun) &#123; return fun.apply(str);&#125; åœ¨main()æ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³• Integer integer = StrToInt(\"123\", (String str) -&gt; &#123; //å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­— return Integer.parseInt(str);&#125;);//æ‰“å°è¯¥æ•°å­—System.out.println(integer); è¾“å‡ºä¸º 123 Functionæ¥å£ä¸­è¿˜æœ‰ä¸€ä¸ªé»˜è®¤æ–¹æ³•andThen(Function&lt;T,R&gt; fun)ï¼Œè¿™ä¸ªæ–¹æ³•ä¸åœ¨ä¸Šé¢ä»‹ç»çš„Consumeræ¥å£çš„andThen()å¾ˆåƒï¼Œä½†æ˜¯æœ‰ç‚¹ä¸åŒï¼ŒConsumeræ¥å£çš„andThenæ˜¯ä¸¤ä¸ªå¯¹è±¡æ¶ˆè´¹åŒä¸€ä¸ªæ•°æ®ï¼Œè€ŒFunctionæ¥å£çš„addThen()æ˜¯å°†ç¬¬ä¸€ä¸ªfunå¤„ç†åçš„ç»“æœæ‹¿ç»™ç¬¬äºŒä¸ªfunå»å¤„ç†ï¼Œç›¸å½“äºapply(apply())ã€‚æ¯”å¦‚ç°åœ¨æˆ‘æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œç„¶åå°†è¿™ä¸ªæ•°å­—ï¼Œ+10ç„¶åå†è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è¿™ä¹ˆå†™ public static String StrPlus(String str, Function&lt;String,Integer&gt; fun1, Function&lt;Integer,String&gt; fun2) &#123; return fun1.andThen(fun2).apply(str);&#125; æˆ‘ä»¬åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³• String s = StrPlus(\"123\", (String str) -&gt; &#123; //å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—å¹¶åŠ 10 Integer i = Integer.parseInt(str); i = i + 10; return i;&#125;, (Integer i) -&gt; &#123; //å°†æ•°å­—è½¬åŒ–ä¸ºå­—ç¬¦ä¸² return i + \"\";&#125;);System.out.println(s); è¾“å‡ºä¸º 133 StreamæµStreamæµæ˜¯Java 8å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œé¦–å…ˆå®ƒè·ŸI/Oæµæ²¡æœ‰ä»»ä½•çš„å…³ç³»ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥å¤„ç†é›†åˆã€æ•°ç»„é—®é¢˜çš„ã€‚è¦çœ‹Streamæµæœ‰ä»€ä¹ˆç”¨å¤„ï¼Œè¿˜æ˜¯è¦çœ‹é›†åˆå¤„ç†æœ‰ä»€ä¹ˆç¼ºç‚¹ã€‚ é—®é¢˜å¼•å‡ºæœ‰ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªæ•°ç»„ String[] strings = &#123;\"å¼ æ— å¿Œ\", \"å¼ ä¸‰ä¸°\", \"èµµæ•\", \"å¼ ç¿ å±±\", \"å°æ˜­\", \"å¼ è‰¯\"&#125;; ç°åœ¨æˆ‘ä»¬æœ‰å¦‚ä¸‹è¦æ±‚ ç­›é€‰å‡ºä»¥â€å¼ â€å­—å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œæ”¾å…¥ä¸€ä¸ªArraylisté›†åˆä¸­ åœ¨ArrayListé›†åˆä¸­ç­›é€‰å‡ºå­—ç¬¦ä¸²é•¿åº¦ä¸º3çš„å­—ç¬¦ä¸²ï¼Œæ”¾å…¥ä¸€ä¸ªæ–°çš„é›†åˆ ArrayList&lt;String&gt; list1 = new ArrayList&lt;&gt;();for (String string : strings) &#123; if (string.startsWith(\"å¼ \")) &#123; list1.add(string); &#125;&#125;System.out.println(list1);ArrayList&lt;String&gt; list2 = new ArrayList&lt;&gt;();for (String string : list1) &#123; if (string.length() == 3) &#123; list2.add(string); &#125;&#125;System.out.println(list2); è¾“å‡ºä¸º [å¼ æ— å¿Œ, å¼ ä¸‰ä¸°, å¼ ç¿ å±±, å¼ è‰¯][å¼ æ— å¿Œ, å¼ ä¸‰ä¸°, å¼ ç¿ å±±] ç°åœ¨æˆ‘ä»¬ä½¿Streamæµçš„æ–¹å¼å®ç° Stream&lt;String&gt; stream = Stream.of(strings);stream.filter(str -&gt; str.startsWith(\"å¼ \")) .filter(str -&gt; str.length() == 3) .forEach(str -&gt; System.out.print(str + \" \")); è¾“å‡ºä¸º å¼ æ— å¿Œ å¼ ä¸‰ä¸° å¼ ç¿ å±± æˆ‘ä»¬å‘ç°ä½¿ç”¨Streamæµçš„ä»£ç æ¯”éå†é›†åˆç®€å•å¾ˆå¤šï¼Œå› ä¸ºä½¿ç”¨é›†åˆç›´æ¥éå†çœŸæ­£æ ¸å¿ƒçš„ä»£ç å°±é‚£ä¹ˆä¸€ä¸¤å¥ï¼Œæ¯”å¦‚ for (String string : strings) &#123; if (string.startsWith(\"å¼ \")) &#123; list1.add(string); &#125;&#125; è¿™äº›ä»£ç ä¸­æ ¸å¿ƒçš„å°±æ˜¯string.startsWith(&quot;å¼ &quot;)ï¼Œè€Œå…¶ä»–çš„ä»£ç æ˜¯ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ä¸å¾—ä¸å†™çš„ä»£ç ã€‚è¿™å°±æ˜¯é›†åˆç›¸è¾ƒäºStreamæµçš„å±€é™æ€§æ‰€åœ¨ï¼Œè§‚å¯ŸStreamæµçš„å†™æ³•ï¼Œæ ¹æœ¬æ²¡æœ‰ä»€ä¹ˆéå†é›†åˆçš„ä»£ç ï¼Œç›´æ¥å°±æ˜¯ä½ æƒ³è¦å¹²çš„äº‹æƒ…ã€‚ è·å–Streamæµçš„æ–¹æ³•è·å–Streamæµæœ‰ä¸¤ç§æ–¹æ³• Collectionä¸­æ–°åŠ çš„stream()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥å¾—åˆ°ä¸€ä¸ªStreamæµï¼Œå¯¹äºMapé›†åˆï¼Œå¯ä»¥é€šè¿‡keySet(),values(),entrySet()ç­‰æ–¹æ³•å¾—åˆ°Seté›†åˆï¼Œç„¶åé€šè¿‡Setå¯¹è±¡è°ƒç”¨stream()æ–¹æ³•å¾—åˆ°Streamæµ Streamæµçš„é™æ€æ–¹æ³•of()ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œæ‰€ä»¥å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„ ä¸‹é¢åšä¸€ä¸ªæ¼”ç¤º import java.util.*;import java.util.stream.Stream;public class getStream &#123; public static void main(String[] args) &#123; ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(); list.add(\"è¿ªä¸½çƒ­å·´\"); list.add(\"å¤åŠ›å¨œæ‰\"); list.add(\"å“ªå’\"); list.add(\"æ¨æˆ¬\"); Stream stream1 = list.stream(); stream1.forEach(s -&gt; System.out.println(s)); HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;(); map.put(\"è¿ªä¸½çƒ­å·´\",\"å¥³\"); map.put(\"å¤åŠ›å¨œæ‰\",\"å¥³\"); map.put(\"å“ªå’\",\"ç”·\"); map.put(\"æ¨æˆ¬\",\"ç”·\"); Set&lt;String&gt; key = map.keySet(); Stream stream2 = key.stream(); stream2.forEach(s -&gt; System.out.println(s)); Collection&lt;String&gt; vals = map.values(); Stream stream3 = vals.stream(); stream3.forEach(s -&gt; System.out.println(s)); Set&lt;Map.Entry&lt;String,String&gt;&gt; entries = map.entrySet(); Stream stream4 = entries.stream(); stream4.forEach(s -&gt; System.out.println(s)); String[] strings = &#123;\"è¿ªä¸½çƒ­å·´\", \"å¤åŠ›å¨œæ‰\", \"å“ªå’\", \"æ¨æˆ¬\"&#125;; Stream stream5 = Stream.of(strings); stream5.forEach(s -&gt; System.out.println(s)); Stream&lt;Integer&gt; stream6 = Stream.of(1,2,3,4,5); stream6.forEach(s -&gt; System.out.println(s)); &#125;&#125; Streamä¸­çš„å¸¸è§æ–¹æ³•Streamæµä¸­çš„æ–¹æ³•åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»å«åšå»¶è¿Ÿæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ªStreamæµå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡Œé“¾å¼ç¼–ç¨‹ï¼Œå¦‚filter()ï¼›å¦ä¸€ç±»å«åšç»ˆç»“æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸è¿”å›Streamæµå¯¹è±¡ï¼Œå¦‚forEach()ï¼Œ count()(ç»ˆç»“æ–¹æ³•åªæœ‰è¿™ä¸¤ä¸ªï¼Œå…¶ä»–çš„éƒ½æ˜¯å»¶è¿Ÿæ–¹æ³•)ã€‚ filter()è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥çš„æ˜¯ä¸€ä¸ªPredicate\\&lt;T&gt;æ¥å£ï¼Œè¿™ä¸ªæ¥å£æˆ‘ä»¬åœ¨å¸¸ç”¨å‡½æ•°å¼æ¥å£è®²è¿‡ï¼Œå®ƒæ˜¯å¯¹æŸä¸­æ•°æ®è¿›è¡Œæµ‹è¯•ï¼Œè€Œfilterçš„ä½œç”¨å°±æ˜¯å¦‚æœtest(T t)è¿”å›çš„æ˜¯trueï¼Œé‚£ä¹ˆå°±å°†è¿™ä¸ªæ•°æ®åŠ å…¥åˆ°æ–°çš„æµä¸­ï¼Œéå†å®Œæµä¸­æ‰€æœ‰çš„å…ƒç´ åè¿”å›ã€‚ //å½“å­—ç¬¦ä¸²ä»¥è¿ªå¼€å¤´æ—¶è¿”å›trueï¼ŒåŠ å…¥åˆ°æ–°çš„æµä¸­ï¼Œè¿™ä¸ªæµä¼šè¢«è¿”å›Stream&lt;String&gt; stream1 = stream.filter(s -&gt; s.startsWith(\"è¿ª\"));//forEachæ˜¯åé¢è¦ä»‹ç»çš„æ–¹æ³•ï¼Œè¿™é‡Œåªéœ€è¦ç†è§£ä¸ºéå†æµå¹¶æ‰“å°stream1.forEach(s -&gt; System.out.println(s)); è¾“å‡ºä¸º è¿ªä¸½çƒ­å·´ map()è¯¥æ–¹æ³•ä¼ å…¥çš„æ˜¯ä¸€ä¸ªFunction&lt;T,R&gt;æ¥å£ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªç±»å‹çš„è½¬è½¬åŒ–ä¸ºå¦ä¸€ä¸ªç±»å‹çš„æµã€‚å¦‚ä¸‹ //å¾—åˆ°ä¸€ä¸ªæµï¼Œè¿™ä¸ªæµæ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦Stream&lt;Integer&gt; stream1 = stream.map(s -&gt; s.length());stream1.forEach(s -&gt; System.out.println(s)); è¿™æ—¶ç»“æœæŠ¥é”™äº† è¿™æ˜¯å› ä¸ºè¿™ä¸ªstreamåœ¨è°ƒç”¨ä¸Šé¢çš„filter()çš„æ—¶å€™å·²ç»ä½¿ç”¨è¿‡äº†ï¼Œè€Œæµä½¿ç”¨äº†ä¸€æ¬¡å°±ä¼šå…³é—­ï¼Œä¸èƒ½åœ¨ä½¿ç”¨ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šæŠ¥é”™çš„åŸå› ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠä»£ç æ”¹ä¸º //å¾—åˆ°ä¸€ä¸ªæµï¼Œè¿™ä¸ªæµæ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦Stream&lt;Integer&gt; stream2 = Stream.of(strings).map(s -&gt; s.length());stream2.forEach(s -&gt; System.out.println(s)); è¿™æ—¶è¾“å‡ºä¸º 4422 forEachè¯¥æ–¹æ³•ä¼ å…¥çš„æ˜¯ä¸€ä¸ªConsumer\\&lt;T&gt;æ¥å£ï¼Œæ˜¯ä¸€ä¸ªç»ˆç»“æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šéå†æµä¸­çš„å…ƒç´ ï¼Œç„¶åä½¿ç”¨Consumeræ¥å£ä¸­çš„accept()æ–¹æ³•å¯¹å…ƒç´ è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ stream.forEach(s -&gt; System.out.println(s)); ä¼šé€ä¸ªæ‰“å°å‡ºæµä¸­çš„å…ƒç´ ã€‚ limitlimitæ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªlongç±»å‹çš„æ•°å€¼maxSizeï¼Œè¯¥æ–¹æ³•ä¼šæˆªå–æµä¸­çš„å‰maxSizeä¸ªå…ƒç´ æ”¾åˆ°æ–°æµä¸­å¹¶è¿”å›ï¼Œå¦‚ //è¿™æ˜¯é“¾å¼ç¼–ç¨‹Stream.of(strings).limit(2).forEach(s -&gt; System.out.println(s)); è¾“å‡ºä¸º è¿ªä¸½çƒ­å·´å¤åŠ›å¨œæ‰ skipè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªlongç±»å‹çš„æ•°æ®nï¼Œå®ƒä¼šè·³è¿‡æµä¸­çš„å‰nä¸ªå…ƒç´ ï¼Œå°†å‰©ä¸‹çš„å…ƒç´ æ”¾å…¥åˆ°ä¸€ä¸ªæ–°æµä¸­å¹¶è¿”å›ï¼Œå¦‚ Stream.of(strings).skip(2).forEach(s -&gt; System.out.println(s)); è¾“å‡ºä¸º å“ªå’æ¨æˆ¬ countè¯¥æ–¹æ³•ä¸éœ€è¦ä¼ å…¥å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªlongç±»å‹çš„æ•´æ•°ï¼Œè¯¥æ•´æ•°æ˜¯æµä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªç»ˆç»“æ–¹æ³•ï¼Œä¸è¿”å›Streamæµ long num = Stream.of(strings).count();System.out.println(num); è¾“å‡ºä¸º 4 æ–¹æ³•å¼•ç”¨æˆ‘ä»¬ä¹‹å‰åœ¨Streamæµä½¿ç”¨forEach()å»æ‰“å°æµä¸­çš„å…ƒç´ ï¼Œå¦‚ stream.forEach(s -&gt; System.out.println(s)); ä½†æ˜¯æ‰“å°è¿™ä¸ªæ–¹æ³•(System.out.println())æ˜¯å·²ç»å­˜åœ¨äº†çš„ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥ç›´æ¥ä¼ å…¥è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œæˆ–è€…è¯´æ˜¯å¼•ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹ stream.forEach(System.out::println); åœ¨è¿™é‡Œæˆ‘ä»¬å¼•ç”¨äº†System.outå¯¹è±¡çš„printlnæ–¹æ³•ï¼Œè¿™è¡Œè¯­å¥çš„ä½œç”¨æ˜¯ä¸Šé¢çš„è¯­å¥ä½œç”¨æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œè¿™å°±æ˜¯æ–¹æ³•çš„å¼•ç”¨ï¼Œ::å°±æ˜¯æ–¹æ³•å¼•ç”¨çš„è¿ç®—ç¬¦ï¼Œè¿™æ˜¯æ–°å¢çš„è¿ç®—ç¬¦ã€‚ é‚£æ–¹æ³•å¼•ç”¨ä¹Ÿè¦éµå¾ªä¸€å®šçš„åŸåˆ™ï¼Œæ¯”å¦‚ä½ å¼•ç”¨çš„å¯¹è±¡å¿…é¡»æ˜¯å­˜åœ¨çš„ï¼Œä½ å¼•ç”¨çš„æ–¹æ³•éœ€è¦ä¼ å…¥çš„å‚æ•°çš„ä¸ªæ•°å’Œç±»å‹å¿…é¡»æ˜¯å¯¹çš„ä¸Šçš„ï¼Œå¦åˆ™å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç”±äºæ–¹æ³•çš„æ€§è´¨ä¸åŒï¼Œæ‰€ä»¥æœ‰å¾ˆå¤šç±»å‹çš„å¼•ç”¨ï¼Œæ¯”å¦‚ å¯¹è±¡å¼•ç”¨æˆå‘˜æ–¹æ³• ç±»å¼•ç”¨é™æ€æ–¹æ³• superå¼•ç”¨çˆ¶ç±»æ–¹æ³• thiså¼•ç”¨æˆå‘˜æ–¹æ³• å¼•ç”¨æ„é€ æ–¹æ³• å¼•ç”¨æ•°ç»„æ„é€ æ–¹æ³• ä¸‹é¢ä¼šè¯¦ç»†çš„å±•å¼€è®²è§£ã€‚ å¯¹è±¡å¼•ç”¨æˆå‘˜æ–¹æ³•å…¶å® stream.forEach(System.out::println); å°±æ˜¯å¯¹è±¡å¼•ç”¨æˆå‘˜æ–¹æ³•ï¼Œæˆ‘ä»¬å¼•ç”¨äº†System.outå¯¹è±¡çš„æˆå‘˜æ–¹æ³•printlnã€‚ ç±»å¼•ç”¨é™æ€æ–¹æ³•å‡è®¾æœ‰ä¸€ä¸ªæ¥å£Calculateï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•cal(int i) public interface Calculate &#123; int cal(int i);&#125; æ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œç°åœ¨åœ¨æœ‰ä¸€ä¸ªæ–¹æ³•éœ€è¦è°ƒç”¨è¿™ä¸ªæ¥å£å»å¾—åˆ°ä¸€ä¸ªæ•°å­—çš„ç»å¯¹å€¼ï¼Œå¦‚ public static int getAbs(int i, Calculate calculate) &#123; return calculate.cal(i);&#125; æˆ‘ä»¬çŸ¥é“Mathç±»çš„é™æ€æ–¹æ³•abs()å¯ä»¥åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å¼•ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚ int num = getAbs(-10,Math::abs);System.out.println(num); è¾“å‡ºç»“æœä¸º 10 superå¼•ç”¨çˆ¶ç±»æˆå‘˜æ–¹æ³•å‡è®¾æœ‰ä¸€ä¸ªGreetæ¥å£ï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•greet()ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå‡½æ•°æ¥å£ public interface Greet &#123; void greet();&#125; ç°åœ¨æœ‰ä¸€ä¸ªçˆ¶ç±»Personï¼Œé‡Œé¢æœ‰ä¸€ä¸ªgreet()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨åé¢æ˜¯è¦è¢«å­ç±»å¼•ç”¨çš„ public class Person &#123; String name; public Person(String name) &#123; this.name = name; &#125; public Person() &#123; &#125; public void greet() &#123; System.out.println(\"I'm \" + name); &#125;&#125; ç°åœ¨æœ‰ä¸€ä¸ªå­ç±»Studentç»§æ‰¿äº†Personç±» public class Student extends Person &#123; public Student(String name) &#123; super(name); &#125; public static void sayHello(Greet gre) &#123; gre.greet(); &#125; public void greet() &#123; sayHello(super::greet); &#125;&#125; Studentä¸­çš„sayHello()æ–¹æ³•éœ€è¦ä¸€ä¸ªGreetæ¥å£ï¼Œç„¶åæˆ‘ä»¬åˆåœ¨greet()æ–¹æ³•ä¸­è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ä¼ å…¥ä¸€ä¸ªsuper::greetçš„æ–¹æ³•å¼•ç”¨(å½“ç„¶è¿™æ ·çš„ä»£ç æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œåªæ˜¯ä¸ºäº†æ¼”ç¤º)ï¼Œæˆ‘ä»¬åœ¨mainä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶è°ƒç”¨æ­¤æ–¹æ³• Student student = new Student(\"å°æ˜\");student.greet(); è¾“å‡ºä¸º I'm å°æ˜ thiså¼•ç”¨æˆå‘˜æ–¹æ³•è¿˜æ˜¯ä»¥ä¸Šé¢çš„Studentç±»ä¸ºä¾‹ï¼Œå‡è®¾Studentç±»ä¸­æœ‰ä¸€ä¸ªæˆå‘˜æ–¹æ³•ä¸º public void tempt() &#123; System.out.println(\"æˆ‘ä»Šæ™šæœ‰ç©ºå“¦\");&#125; ç„¶ååœ¨greet()æ–¹æ³•ä¸­å†å¢åŠ ä¸€ä¸ªsayHello()ï¼Œè¿™æ—¶æ–¹æ³•çš„å¼•ç”¨æŒ‡å‘çš„æ˜¯temptæ–¹æ³•ï¼Œå¦‚ä¸‹ public void greet() &#123; sayHello(super::greet); sayHello(this::tempt);&#125; ç°åœ¨åœ¨mainæ–¹æ³•ä¸­è¿è¡Œä¸€ä¸‹ï¼Œè¾“å‡ºä¸º I'm å°æ˜æˆ‘ä»Šæ™šæœ‰ç©ºå“¦ å¼•ç”¨æ„é€ æ–¹æ³•ç°åœ¨å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªæ¥å£ public interface Personable &#123; Person getPerson(String name);&#125; é‡Œé¢åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•getPersonï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œè¯¥æ–¹æ³•æ ¹æ®nameè¿”å›ä¸€ä¸ªPersonå¯¹è±¡ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ–¹æ³•éœ€è¦ä¼ å…¥è¿™ä¸ªæ¥å£å¾—åˆ°ä¸€ä¸ªPersonå¯¹è±¡ public static Person getPerson(String name, Personable personable) &#123; return personable.getPerson(name);&#125; ç°åœ¨æˆ‘ä»¬åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¼ å…¥çš„æ¥å£æˆ‘ä»¬ä½¿ç”¨æ„é€ å™¨å¼•ç”¨Person::new Person person = getPerson(\"è¿ªä¸½çƒ­å·´\",Person::new);person.greet(); è¿è¡Œè¾“å‡ºä¸º I'm è¿ªä¸½çƒ­å·´ å¼•ç”¨æ•°ç»„æ„é€ æ–¹æ³•å¼•ç”¨æ•°ç»„æ„é€ æ–¹æ³•çš„æ ¼å¼æ˜¯int[]::new(è¿™é‡Œåªä»¥intä¸ºä¾‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥double[]::new)ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•åŒä¸Šé¢çš„Personç±»çš„æ„é€ æ–¹æ³•å¼•ç”¨ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å¤šåŠ ä»‹ç»äº†ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"JDK 8","slug":"JDK-8","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/JDK-8/"}]},{"title":"Javaå¤šçº¿ç¨‹","date":"2019-07-12T16:00:00.000Z","path":"/Javaå¤šçº¿ç¨‹/","text":"å¤šçº¿ç¨‹æ¦‚è¿°ä¸€ä¸ªè½¯ä»¶å¯ä»¥åŒæ—¶å¹²å¤šä»¶äº‹æƒ…ï¼Œå°±æ˜¯å¤šçº¿ç¨‹ï¼Œç›®å‰æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºéƒ½æ˜¯å•çº¿ç¨‹çš„ï¼Œåœ¨mainæ–¹æ³•ä¸­ä»ä¸Šåˆ°ä¸‹çš„è¿›è¡Œï¼Œæ‰§è¡Œå®Œä¸Šé¢çš„ç¨‹åºæ‰èƒ½æ‰§è¡Œåé¢çš„ç¨‹åºã€‚ä¸‹é¢å°±å°†è®²è§£å¦‚ä½•å†™å¤šçº¿ç¨‹ç¨‹åºã€‚ åœ¨Javaä¸­åˆ›å»ºå¤šçº¿ç¨‹æœ‰ä¸¤ç§æ”¾æ³•ï¼Œä¸€ç§æ˜¯ç»§æ‰¿Threadç±»ï¼Œç„¶åé‡å†™å®ƒçš„run()æ–¹æ³•ã€‚ç¬¬äºŒç§æ˜¯å®ç°Runnableæ¥å£ï¼Œå¹¶ä¸”å®ç°run()æ–¹æ³•ã€‚ ç»§æ‰¿Threadç±»ç»§æ‰¿Threadç±»å®ç°å¤šçº¿ç¨‹çš„æ­¥éª¤ä¸º ç»§æ‰¿Threadç±»ï¼Œé‡å†™run()æ–¹æ³• åˆ›å»ºç±»å¯¹è±¡ï¼Œè°ƒç”¨ç»§æ‰¿çš„start()æ–¹æ³• æˆ‘ä»¬å†™ä¸€ä¸ªMyThreadç±»ç»§æ‰¿è‡ªThreadç±»ï¼Œå¹¶é‡å†™runæ–¹æ³•å¦‚ä¸‹ public class MyThread extends Thread &#123; @Override public void run() &#123; for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"thread\" + i); &#125; &#125;&#125; æ–°å»ºä¸€ä¸ªæµ‹è¯•ç±»ï¼Œåœ¨å…¶mainæ–¹æ³•ä¸­åˆ›å»ºMyThreadå¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨å¯¹è±¡ç»§æ‰¿è‡ªThreadçš„start()æ–¹æ³• MyThread thread = new MyThread();thread.start();for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"main\" + i);&#125; ç¨‹åºè¾“å‡ºä¸º è§‚å¯Ÿåˆ°mainæ–¹æ³•ä¸­çš„ç¨‹åºå’ŒMyThreadçš„run()æ–¹æ³•ä¸­çš„ç¨‹åºåœ¨äº¤æ›¿çš„è¿›è¡Œã€‚è€Œä¸æ˜¯åœ¨ç­‰å¾…æˆ‘æ‰§è¡Œå®Œäº†ï¼Œå¦ä¸€ä¸ªåœ¨æ‰§è¡Œï¼Œè€Œæ˜¯ä¸¤ä¸ªåœ¨åŒæ—¶çš„æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¤šçº¿ç¨‹ã€‚ å®ç°Runnableæ¥å£å®ç°Runnableæ¥å£å®ç°å¤šçº¿ç¨‹çš„æ­¥éª¤ä¸º å®ç°Runnableæ¥å£å¹¶å®ç°run()æ–¹æ³• åœ¨mainä¸­åˆ›å»ºå®ç°ç±»å¯¹è±¡ å°†å®ç°ç±»å¯¹è±¡å¤šä¸ºå‚æ•°ä¼ å…¥Thread()çš„æ„é€ æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªThreadå¯¹è±¡ è¯¥Threadå¯¹è±¡è°ƒç”¨start()æ–¹æ³• ä¸‹é¢è¿›è¡Œæ¼”ç¤ºï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªç±»å®ç°Runnableæ¥å£ public class MyRun implements Runnable&#123; @Override public void run() &#123; for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"Run\" + i); &#125; &#125;&#125; ä¸‹é¢åœ¨å®ç°ç±»ä¸­å®ç°å¤šçº¿ç¨‹ï¼Œå¦‚ä¸‹ Runnable run = new MyRun(); //åˆ›å»ºå®ç°ç±»å¯¹è±¡Thread thread = new Thread(run); //å®ç°ç±»å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥Threadçš„æ„é€ æ–¹æ³•thread.start(); //Threadå¯¹è±¡è°ƒç”¨start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"main\" + i);&#125; è¾“å‡ºä¸º å¯ä»¥è§‚å¯Ÿåˆ°mainä¸­çš„ç¨‹åºå’Œrun()æ–¹æ³•ä¸­çš„ç¨‹åºæ˜¯åœ¨åŒæ—¶è¿›è¡Œçš„ã€‚ Threadä¸­çš„å¸¸è§æ–¹æ³• getName() è·å¾—çº¿ç¨‹çš„åç§° currentThread() è·å¾—æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ setName(String str) è®¾ç½®çº¿ç¨‹çš„åå­— ä¹Ÿå¯ä»¥é€šè¿‡new Thread(String str)è®¾ç½®çº¿ç¨‹çš„åå­— sleep(long l) çº¿ç¨‹ä¼‘çœ læ¯«ç§’ æˆ‘ä»¬ä¿®æ”¹MyRunä¸­çš„run()æ–¹æ³•ä¸º for (int i = 0; i &lt; 20; i++) &#123; //è·å¾—å½“å‰çº¿ç¨‹å¹¶ä¸”è·å¾—å½“å‰çº¿ç¨‹çš„åå­— System.out.println(Thread.currentThread().getName() + i); &#125; ä¿®æ”¹mainæ–¹æ³•ä¸º Runnable run = new MyRun();Thread thread = new Thread(run);thread.setName(\"run\"); //å¢åŠ äº†è¿™ä¸€è¡Œï¼Œè®¾ç½®çº¿ç¨‹çš„åå­—thread.start();for (int i = 0; i &lt; 20; i++) &#123; System.out.println(\"main\" + i);&#125; è¾“å‡ºç»“æœä¸º çº¿ç¨‹å®‰å…¨å®‰å…¨é—®é¢˜ç°åœ¨è€ƒè™‘è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œæœ‰ä¸‰ä¸ªå”®ç¥¨æœºåœ¨å”®ç¥¨ï¼Œé‚£ä¹ˆå®ƒä»¬ä¸èƒ½å‘ç”Ÿå”®å‡ºåŒæ ·çš„ç¥¨ï¼Œä¹Ÿä¸èƒ½å”®å‡ºä¸å­˜åœ¨çš„ç¥¨ã€‚ç°åœ¨æˆ‘è¦ç”¨ä¸€ä¸ªç±»æ¨¡æ‹Ÿå”®ç¥¨æœºå”®ç¥¨ï¼Œå¹¶ä½¿ç”¨å¤šçº¿ç¨‹æ¨¡æ‹ŸåŒæ—¶å”®ç¥¨ï¼Œæ–°å»ºä¸€ä¸ªSellTicketç±» public class SellTicket implements Runnable&#123; private int ticket = 10; //æ€»å…±10å¼ ç¥¨ @Override public void run() &#123; while (true) &#123; //è¡¨ç¤ºä¸€ç›´å”®ç¥¨ if (ticket &gt; 0) &#123; //å¦‚æœè¿˜æœ‰ç¥¨ try &#123; //ä¸ºäº†å¢åŠ å‡ºé”™çš„å¯èƒ½ï¼Œä½¿å½“å‰çš„çº¿ç¨‹ä¼‘çœ 1ms Thread.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + \"æ­£åœ¨å–ç¬¬\" + ticket + \"å¼ ç¥¨\"); ticket --; &#125; &#125; &#125;&#125; åœ¨æµ‹è¯•ç±»çš„mainæ–¹æ³•ä¸­åˆ›å»ºä¸‰ä¸ªçº¿ç¨‹åŒæ—¶å”®ç¥¨ Runnable sellTicket = new SellTicket();//åˆ›å»ºä¸‰ä¸ªçº¿ç¨‹ æ³¨æ„å¿…é¡»ä½¿ç”¨çš„åŒä¸€ä¸ªå”®ç¥¨æœºå¯¹è±¡ å¦åˆ™ä»–ä»¬å°±æ˜¯å„è‡ª10å¼ ç¥¨è€Œä¸æ˜¯æ€»å…±10å¼ ç¥¨new Thread(sellTicket).start();new Thread(sellTicket).start();new Thread(sellTicket).start(); è¾“å‡ºä¸º æˆ‘ä»¬å‘ç°å‡ºç°äº†ä¸åŒçš„å”®ç¥¨çº¿ç¨‹å”®å‡ºäº†ç›¸åŒçš„ç¥¨ï¼Œå¹¶ä¸”æœ‰çš„å”®ç¥¨çº¿ç¨‹å”®å‡ºäº†ä¸å­˜åœ¨çš„ç¥¨-1ã€‚ çº¿ç¨‹åŒæ­¥ä¹‹æ‰€ä»¥ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜ï¼Œå°±æ˜¯å› ä¸ºåœ¨æœ‰çš„å”®ç¥¨æœºå–å‡ºäº†ç¥¨ï¼Œå³è¿›å…¥äº†ifè¯­å¥åï¼Œä½†æ˜¯è¿˜æœªè¿›è¡Œticketâ€“æ“ä½œï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™è¿™ä¸ªçº¿ç¨‹å¤±å»äº†CPUçš„æ‰§è¡Œæƒï¼Œå¹¶ä¸”åˆ«çš„çº¿ç¨‹æ‹¿åˆ°äº†CPUçš„æ‰§è¡Œæƒï¼Œç”±äºæœªå¯¹ticketâ€“ï¼Œæ‰€ä»¥å®ƒä»¬æ‹¿åˆ°çš„æ˜¯åŒä¸€å¼ ç¥¨ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä»¬èƒ½å–å‡ºåŒä¸€å¼ ç¥¨çš„åŸå› ã€‚åŒç†å–å‡ºä¸å­˜åœ¨çš„ç¥¨ä¹Ÿæ˜¯åŒç§åŸå› ã€‚ é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»è¦æ±‚åœ¨å”®ç¥¨æœºåœ¨å®Œæˆå”®ç¥¨å¹¶ä¸”å¯¹ticketâ€“ä¹‹å‰ï¼Œåˆ«çš„å”®ç¥¨æœºä¸èƒ½å¯¹ticketè¿›è¡Œæ“ä½œï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°ç¥¨é‡å¤å’Œå–å‡ºä¸å­˜åœ¨çš„ç¥¨çš„æƒ…å†µäº†ï¼Œè€Œå®ç°è¿™ä¸ªçš„æŠ€æœ¯å°±å«åšåŒæ­¥ã€‚æœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ synchronizedä»£ç å— åŒæ­¥æ–¹æ³• Locké” ä¸‹é¢å…·ä½“ä»‹ç»ç”¨æ³•ã€‚ sychronizedä»£ç å—sychronizedä»£ç å—çš„æ ¼å¼ä¸º sychronized(é”å¯¹è±¡) &#123; //éœ€è¦åŒæ­¥çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½å‡ºç°é—®é¢˜çš„ä»£ç &#125; å…¶ä¸­é”å¯¹è±¡å¯ä»¥æ˜¯ä»»æ„çš„å¯¹è±¡ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°åŒæ­¥ä»£ç å—æ—¶ï¼Œä¼šå°†è¯¥é”å¯¹è±¡äº¤ç»™è¿™ä¸ªçº¿ç¨‹ï¼Œå½“è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œä¼šé‡Šæ”¾é”å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœè¿™ä¸ªçº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—å†…å¤±å»äº†CPUçš„æ‰§è¡Œæƒï¼Œå› ä¸ºåˆ«çš„çº¿ç¨‹æ²¡æœ‰é”å¯¹è±¡ï¼Œå°±ä¸èƒ½è¿›å…¥åŒæ­¥ä»£ç å—æ‰§è¡Œï¼Œå°±ä¼šè¿›å…¥å µå¡çŠ¶æ€ï¼Œç­‰å¾…é”å¯¹è±¡è¢«é‡Šæ”¾ã€‚æ‰€ä»¥é”å¯¹è±¡å°±ç›¸å½“äºæ˜¯é’¥åŒ™äº†ï¼Œè¦ä¿è¯å¤šä¸ªçº¿ç¨‹çš„é”å¯¹è±¡è¦ç›¸åŒï¼Œè¿™æ ·å°±åªæœ‰ä¸€æŠŠé’¥åŒ™äº†ã€‚ æˆ‘ä»¬é‡æ–°ä¿®æ”¹SellTicketçš„ç±»å¦‚ä¸‹ public class SellTicket implements Runnable&#123; private int ticket = 10; //æ€»å…±10å¼ ç¥¨ Object object = new Object(); //é”å¯¹è±¡ @Override public void run() &#123; while (true) &#123; //è¡¨ç¤ºä¸€ç›´å”®ç¥¨ //åŒæ­¥ä»£ç å— ä¸€æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ synchronized (object) &#123; if (ticket &gt; 0) &#123; //å¦‚æœè¿˜æœ‰ç¥¨ try &#123; //ä¸ºäº†å¢åŠ å‡ºé”™çš„å¯èƒ½ï¼Œä½¿å½“å‰çš„çº¿ç¨‹ä¼‘çœ 1ms Thread.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + \"æ­£åœ¨å–ç¬¬\" + ticket + \"å¼ ç¥¨\"); ticket --; &#125; &#125; &#125; &#125;&#125; è¾“å‡ºç»“æœä¸º è¿™æ¬¡æˆ‘ä»¬å‘ç°æ²¡æœ‰å–å‡ºé‡å¤çš„ç¥¨ï¼Œä¹Ÿæ²¡æœ‰å–å‡ºä¸å¯èƒ½çš„ç¥¨ã€‚ åŒæ­¥æ–¹æ³•åŒæ­¥æ–¹æ³•å…¶å®å°±æ˜¯ä½¿ç”¨synchronizedä¿®é¥°çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¯æ¬¡ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå®ƒçš„é”å¯¹è±¡æ˜¯thisï¼Œæˆ‘ä»¬æŠŠä¸Šé¢ä¹°ç¥¨çš„ç¨‹åºæŠ½å–å‡ºä¸ºä¸€ä¸ªæ–¹æ³•sellTicket() public synchronized void sellTicket() &#123; if (ticket &gt; 0) &#123; //å¦‚æœè¿˜æœ‰ç¥¨ try &#123; //ä¸ºäº†å¢åŠ å‡ºé”™çš„å¯èƒ½ï¼Œä½¿å½“å‰çš„çº¿ç¨‹ä¼‘çœ 1ms Thread.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + \"æ­£åœ¨å–ç¬¬\" + ticket + \"å¼ ç¥¨\"); ticket --; &#125;&#125; è¿™æ—¶run()å¯ç®€åŒ–ä¸º @Overridepublic void run() &#123; while (true) &#123; //è¡¨ç¤ºä¸€ç›´å”®ç¥¨ sellTicket(); &#125;&#125; è¾“å‡ºä¸º ä¹Ÿè¾¾åˆ°äº†åŒæ ·çš„æ•ˆæœã€‚ æ³¨æ„ï¼š åŒæ­¥æ–¹æ³•ä¹Ÿå¯ä»¥ä¸ºé™æ€æ–¹æ³•ï¼Œä¸è¿‡è¿™æ—¶çš„é”å¯¹è±¡ä¸åœ¨æ˜¯thisäº†ï¼Œè€Œæ˜¯æœ¬ç±»çš„classå±æ€§ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ Locké”Lockæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæ¯”è¾ƒçµæ´»ã€‚ä¹‹å‰æˆ‘ä»¬è®²åˆ°ï¼Œåœ¨çº¿ç¨‹æ‰§è¡Œåˆ°synchronizedä»£ç å—æ—¶ï¼Œä¼šè·å¾—é”å¯¹è±¡ï¼Œåœ¨æ‰§è¡Œå®Œä»£ç å—æ—¶ï¼Œä¼šé‡Šæ”¾é”å¯¹è±¡ï¼Œä½†æ˜¯è¿™äº›å¯¹æˆ‘ä»¬éƒ½æ˜¯ä¸å¯è§çš„ï¼Œè€ŒLockçµæ´»åœ¨æˆ‘ä»¬è‡ªå·±è§‰å¾—åœ¨å“ªé‡ŒåŠ é”ï¼Œå“ªé‡Œé‡Šæ”¾é”ã€‚å®ƒæœ‰ä¸¤ä¸ªæ–¹æ³• lock() åŠ é” unlock() é‡Šæ”¾é” lock()ä¸€èˆ¬å†™åœ¨åŒæ­¥ä»£ç å‰ï¼Œunlock()å†™åœ¨åŒæ­¥ä»£ç åã€‚ReentrantLockæ˜¯Lockçš„å®ç°ç±»ï¼Œä¸‹é¢æˆ‘ä»¬å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨Locké”åŒæ­¥ï¼Œä¿®æ”¹runæ–¹æ³•ä¸º Lock lock = new ReentrantLock(); //åˆ›å»ºLocké”å®ç°ç±»å¯¹è±¡@Overridepublic void run() &#123; while (true) &#123; //è¡¨ç¤ºä¸€ç›´å”®ç¥¨ lock.lock(); //åŠ é” if (ticket &gt; 0) &#123; //å¦‚æœè¿˜æœ‰ç¥¨ try &#123; //ä¸ºäº†å¢åŠ å‡ºé”™çš„å¯èƒ½ï¼Œä½¿å½“å‰çš„çº¿ç¨‹ä¼‘çœ 1ms Thread.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName() + \"æ­£åœ¨å–ç¬¬\" + ticket + \"å¼ ç¥¨\"); ticket --; &#125; lock.unlock(); //é‡Šæ”¾é” &#125;&#125; è¾“å‡ºä¸º å¯è§è¾¾åˆ°äº†åŒæ­¥çš„æ•ˆæœã€‚ ç­‰å¾…å”¤é†’å½“æˆ‘ä»¬æ’é˜Ÿä¹°å¥¶èŒ¶æ—¶ï¼Œæˆ‘ä»¬å¯¹è€æ¿è¯´æˆ‘ä»¬è¦ä¸€æ¯å¥¶èŒ¶ï¼Œç„¶åæˆ‘ä»¬å°±ç­‰ç€ï¼Œè€æ¿å»åˆ¶ä½œå¥¶èŒ¶ï¼Œç­‰è€æ¿åˆ¶ä½œå¥½å¥¶èŒ¶åå»å–Šæˆ‘ä»¬ã€‚è¿™å…¶å®å°±æ˜¯ç­‰å¾…å”¤é†’ï¼Œå½“å¤šä¸ªçº¿ç¨‹å»æ“ä½œåŒä¸€ä¸ªèµ„æºæ—¶ï¼Œæ¯”å¦‚å¥¶èŒ¶ï¼Œå°±éœ€è¦ä¸€æ–¹(é¡¾å®¢)ç­‰ç€ï¼Œç­‰å¾…å¦ä¸€æ–¹(è€æ¿)å”¤é†’ï¼Œæ€»ä¸èƒ½å¥¶èŒ¶æ²¡æœ‰å¥½æˆ‘å»æŠ¢å§ã€‚ çº¿ç¨‹çŠ¶æ€åœ¨è®²è§£ç­‰å¾…å”¤é†’ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¯¹çº¿ç¨‹çš„çŠ¶æ€æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼Œçœ‹å›¾ å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡è¿˜æ²¡æœ‰start()æ—¶ï¼Œè¿™æ—¶å®ƒå¤„äºNewçŠ¶æ€ï¼›å½“æˆ‘ä»¬æ‰§è¡Œstart()æ–¹æ³•åï¼Œè¿™æ—¶çš„çº¿ç¨‹çŠ¶æ€ç”±Newè½¬å‘Runnableè¿è¡ŒçŠ¶æ€ï¼›å¦‚æœæ‰§è¡Œå®Œrun()æ–¹æ³•ï¼Œæˆ–è€…è°ƒç”¨äº†stop()æ–¹æ³•æˆ–è€…æŠ›å‡ºäº†å¼‚å¸¸é‚£ä¹ˆè¯¥çº¿ç¨‹è¿›å…¥æ­»äº¡çŠ¶æ€ã€‚å¦‚æœåœ¨RunnableçŠ¶æ€å¤±å»äº†CPUçš„æ‰§è¡Œæƒï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥Blockedé˜»å¡çŠ¶æ€ï¼›çº¿ç¨‹åœ¨è¿™é‡Œç­‰å¾…CPUçš„æ‰§è¡Œæƒï¼Œæ‹¿åˆ°äº†CPUçš„æ‰§è¡Œæƒå°±ä¼šä»è¯¥çŠ¶æ€æ¥åˆ°RunnableçŠ¶æ€ï¼›å¦‚æœçº¿ç¨‹åœ¨è¿è¡Œæ—¶æ‰§è¡Œäº†sleep(l)æˆ–wait(l)(lä¸ºç­‰å¾…çš„æ—¶é—´)æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šç”±RunnableçŠ¶æ€è¿›å…¥Timed waitingçŠ¶æ€ï¼Œåœ¨è¿™ä¸ªçŠ¶æ€ä¸­ï¼Œçº¿ç¨‹æ”¾å¼ƒäº‰å¤ºCPUçš„æ‰§è¡Œæƒï¼Œå½“ç­‰å¾…çš„æ—¶é—´åˆ°äº†ä¹‹åï¼Œå¦‚æœCPUç©ºé—²ï¼Œé‚£ä¹ˆå°±è¿›å…¥RunnableçŠ¶æ€ï¼Œå¦‚æœå¿™ç¢Œï¼Œé‚£ä¹ˆå°±è¿›å…¥BlockedçŠ¶æ€ï¼Œä¸å…¶ä»–çº¿ç¨‹ä¸€èµ·äº‰å¤ºCPUçš„æ‰§è¡Œæƒã€‚å¦‚æœåœ¨Runnableæ‰§è¡Œäº†wait()(ä¸å¸¦å‚æ•°çš„)æ–¹æ³•ï¼Œå°±ä¼šè¿›å…¥Waitingæ°¸ä¹…ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°é”å¯¹è±¡æ‰§è¡Œnotify()æ–¹æ³•å”¤é†’ï¼Œå¦‚æœCPUç©ºé—²ï¼Œå°±è¿›å…¥RunnableçŠ¶æ€ï¼Œå¦åˆ™è¿›å…¥BlockedçŠ¶æ€äº‰å¤ºCPUæ‰§è¡Œæƒã€‚ ç­‰å¾…å”¤é†’è¿™é‡Œçš„ç­‰å¾…å”¤é†’æŒ‡çš„å°±æ˜¯ä¸Šé¢æåŠçš„RunnableçŠ¶æ€æ‰§è¡Œwait()æ–¹æ³•åˆ°Waitingæ°¸ä¹…ç­‰å¾…çŠ¶æ€ï¼Œä»¥åŠæ‰§è¡Œnotiify()æ–¹æ³•æœ‰æ°¸ä¹…ç­‰å¾…çŠ¶æ€åˆ°RunnableçŠ¶æ€ã€‚å‰è€…ä¸ºç­‰å¾…ï¼Œåè€…ä¸ºå”¤é†’ã€‚ æ³¨æ„ï¼š åªæœ‰é”å¯¹è±¡æ‰èƒ½è°ƒç”¨wait()å’Œnotify()æ–¹æ³• wait()å’Œnotify()çš„è°ƒç”¨è€…åº”è¯¥æ˜¯åŒä¸€é”å¯¹è±¡ï¼Œå¹¶ä¸”å¿…é¡»å†™åœ¨åŒæ­¥ä»£ç å—ä¸­ æ‰§è¡Œwait()è¢«å”¤é†’åï¼Œä¼šç»§ç»­æ‰§è¡Œwait()åé¢çš„ä»£ç  notify()ä¸€æ¬¡åªèƒ½å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå”¤é†’çš„æ˜¯ç¡çœ æœ€ä¹…çš„çº¿ç¨‹ï¼ŒnotifyAll()èƒ½å¤Ÿå”¤é†’æ‰€æœ‰çš„çº¿ç¨‹ ä¸‹é¢ä»¥æœ€å…ˆæåŠçš„ä¹°å¥¶èŒ¶ä¸ºä¾‹æ¼”ç¤ºè¿™ä¸€è¿‡ç¨‹ã€‚é¦–å…ˆåˆ›å»ºRunnableé¡¾å®¢ç±»å’Œè€æ¿ç±»å’Œå¥¶èŒ¶ç±» public class MilkTea &#123; String taste; //å¥¶èŒ¶å£å‘³ boolean flag = false; //å¥¶èŒ¶æœ‰æ²¡æœ‰åšå¥½&#125; public class CustomerThread implements Runnable &#123; private MilkTea milkTea; //ä½œä¸ºé”å¯¹è±¡ public CustomerThread(MilkTea milkTea) &#123; this.milkTea = milkTea; &#125; @Override public void run() &#123; while (true) &#123; synchronized (milkTea) &#123; if (milkTea.flag == false) &#123; //å¥¶èŒ¶æ²¡æœ‰å‡†å¤‡å¥½ System.out.println(\"è€æ¿æ¥æ¯çç å¥¶èŒ¶\"); try &#123; milkTea.wait(); //ç­‰å¾… &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; System.out.println(milkTea.taste + \"çœŸå¥½å–\"); //è¢«å”¤é†’åä¼šæ‰§è¡Œè¿™ä¸ª milkTea.flag = false; //å¥¶èŒ¶å–å®Œäº† milkTea.notify(); &#125; &#125; &#125;&#125; public class Shopper implements Runnable &#123; private MilkTea milkTea; //ä½œä¸ºé”å¯¹è±¡ å’ŒCustomerç›¸åŒ public Shopper(MilkTea milkTea) &#123; this.milkTea = milkTea; &#125; @Override public void run() &#123; while (true) &#123; synchronized (milkTea) &#123; if (milkTea.flag == true) &#123; try &#123; milkTea.wait(); //ç­‰å¾… &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; else &#123; try &#123; System.out.println(\"åšå¥¶èŒ¶ä¸­ ...\"); Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; milkTea.taste = \"çç å¥¶èŒ¶\"; milkTea.flag = true; System.out.println(milkTea.taste + \"åšå¥½äº†\"); milkTea.notify(); &#125; &#125; &#125; &#125;&#125; ä¸‹é¢åœ¨æµ‹è¯•ç±»ä¸­åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ public class Test &#123; public static void main(String[] args) &#123; MilkTea milkTea = new MilkTea(); //ä½œä¸ºé”å¯¹è±¡ new Thread(new CustomerThread(milkTea)).start(); new Thread(new Shopper(milkTea)).start(); &#125;&#125; è¾“å‡ºä¸º è¿™å°±æ˜¯ç­‰å¾…å”¤é†’çš„è¿‡ç¨‹ã€‚ çº¿ç¨‹æ± å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œæˆ‘ä»¬å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªçº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡å¾ˆå°‘ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦é¢‘ç¹çš„åˆ›å»ºçº¿ç¨‹ï¼Œè¿™ä¸ªåˆ›å»ºçº¿ç¨‹çš„è¿‡ç¨‹ä¼šå¾ˆè€—è´¹æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æƒ³æœ‰æ²¡æœ‰ä¸€ä¸ªæœºåˆ¶ï¼Œæˆ‘ä»¬ä¸ç”¨åˆ›å»ºçº¿ç¨‹ï¼Œå½“æˆ‘ä»¬éœ€è¦çº¿ç¨‹æ—¶æˆ‘ä»¬å»å–ï¼Œå½“æˆ‘ä»¬ç”¨å®Œæ—¶ï¼Œæˆ‘ä»¬è¿˜ç»™å®ƒã€‚è¿™æ ·å°±ä¸éœ€è¦é¢‘ç¹åˆ›å»ºçº¿ç¨‹ï¼Œçœå»æ—¶é—´ï¼Œæé«˜æ•ˆç‡ã€‚çº¿ç¨‹æ± å¯ä»¥å¸®æˆ‘ä»¬å®ç°è¿™ä¸€ä¸ªæƒ³æ³•ã€‚ é‚£æ¥ä¸‹æ¥çš„é—®é¢˜æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨Javaä¸ºæˆ‘ä»¬å‡†å¤‡çš„çº¿ç¨‹æ± ï¼ŒExecutorsæä¾›äº†ä¸€ä¸ªé™æ€æ–¹æ³•newFixedThreadPool(int nThreads)ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶çš„å‚æ•°æ˜¯çº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„ä¸ªæ•°ï¼Œè¿”å›ä¸€ä¸ªExecutorServiceå¯¹è±¡ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¯¥å¯¹è±¡çš„submit(Runnable task)æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªRunnableå®ç°ç±»å¯¹è±¡å°±å¯ä»¥äº†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ç¤ºä¾‹ä¸€ç•ª import java.util.concurrent.ExecutorService;import java.util.concurrent.Executors;public class ThreadPool &#123; public static void main(String[] args) &#123; //åˆ›å»ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±» Runnable run = new Runnable() &#123; @Override public void run() &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.println(Thread.currentThread().getName() + \" \" + i); &#125; &#125; &#125;; //é•¿åº¦æœ‰ä¸‰ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ±  ExecutorService threadPool = Executors.newFixedThreadPool(3); //ä¸‰ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ threadPool.submit(run); threadPool.submit(run); threadPool.submit(run); &#125;&#125; è¾“å‡ºä¸º pool-1-thread-1 0pool-1-thread-2 0pool-1-thread-1 1pool-1-thread-2 1pool-1-thread-1 2pool-1-thread-3 0pool-1-thread-2 2pool-1-thread-3 1pool-1-thread-1 3pool-1-thread-3 2pool-1-thread-2 3pool-1-thread-3 3pool-1-thread-1 4pool-1-thread-3 4pool-1-thread-2 4 Lambdaè¡¨è¾¾å¼æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦åšä¸€ä¸‹çš„æ­¥éª¤ åˆ›å»ºä¸€å®ç°ç±»å®ç°Runnableæ¥å£ é‡å†™runæ–¹æ³• åˆ›å»ºå®ç°ç±»å¯¹è±¡ å°†è¯¥å¯¹è±¡ä¼ å…¥Threadçš„æ„é€ æ–¹æ³•ä¸­ ä¸Šé¢çš„å†™æ³•å¯ä»¥ç®€åŒ–ï¼Œçœå»åˆ›å»ºä¸€ä¸ªå®ç°ç±»ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±» åˆ›å»ºä¸€ä¸ªRunnableåŒ¿åå†…éƒ¨ç±» é‡å†™runæ–¹æ³• å°†è¯¥å¯¹è±¡ä¼ å…¥Threadçš„æ„é€ æ–¹æ³•ä¸­ å…¶å®ä¸Šé¢æœ‰å¾ˆå¤šçš„ä»£ç æ˜¯å¤šä½™ï¼ŒçœŸæ­£æœ‰ç”¨çš„ä»£ç å°±æ˜¯run()æ–¹æ³•é‡Œé¢çš„ä»£ç ï¼Œä½†æ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æˆ‘ä»¬ä¸å¾—ä¸è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå·´æ‹‰å·´æ‹‰ã€‚å…¶å®æœ‰æ—¶å€™æˆ‘ä»¬ä¸å…³å¿ƒè°æ¥åšï¼Œåªéœ€è¦å‘Šè¯‰æˆ‘æ€ä¹ˆåšï¼Œæ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹ä½ åªéœ€è¦å‘Šè¯‰æˆ‘run()æ–¹æ³•å°±å¯ä»¥äº†ï¼Œå‘Šè¯‰æˆ‘æ€ä¹ˆåšå°±å¯ä»¥äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å´è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ç­‰ç­‰ä¸€ç³»åˆ—çš„æ“ä½œæ‰èƒ½è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚ Lambdaçš„ä½¿ç”¨Javaåœ¨JDK 1.8ä¸­å¼•å…¥äº†Lambdaè¡¨è¾¾å¼ï¼Œå¯ä»¥æå¤§ç®€åŒ–æˆ‘ä»¬çš„ç¼–ç¨‹ï¼Œå¯ä»¥åšåˆ°æˆ‘ä¸Šé¢æ‰€è¯´çš„åªå…³å¿ƒæ€ä¹ˆåšçš„é—®é¢˜ï¼Œä¸éœ€è¦åˆ›å»ºå¯¹è±¡ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ç”¨Lambdaæ€ä¹ˆå†™ new Thread(new Runnable() &#123; @Override public void run() &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.println(Thread.currentThread().getName() + \" \" + i); &#125; &#125;&#125;).start(); Lambdaçš„å†™æ³•ä¸º new Thread(() -&gt; &#123; for (int i = 0; i &lt; 20; i++) &#123; System.out.println(Thread.currentThread().getName() + \" \" + i); &#125; &#125;); ç°åœ¨ä½ å¯èƒ½æ²¡æœ‰çœ‹æ‡‚è¿™ä¸ªå†™æ³•ï¼Œä¸‹é¢è®©æˆ‘ä¸ºä½ è§£é‡Šä¸€ç•ªã€‚é¦–å…ˆæˆ‘ä»¬æ³¨æ„åˆ° new Runnable() &#123; @Override public void run() &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.println(Thread.currentThread().getName() + \" \" + i); &#125; &#125;&#125; è¢«ç®€å•çš„æ›¿æ¢ä¸ºäº† () -&gt; &#123; for (int i = 0; i &lt; 20; i++) &#123; System.out.println(Thread.currentThread().getName() + \" \" + i); &#125; &#125; ä¸¤æ®µä»£ç å¾ˆåƒï¼Œä½†æ˜¯Lambdaçœç•¥äº†å¾ˆå¤šçš„ä¸œè¥¿ã€‚é¦–å…ˆæˆ‘ä»¬çŸ¥é“Thread()é‡Œé¢ä¼ çš„æ˜¯ä¸€ä¸ªRunnableå®ç°ç±»çš„å¯¹è±¡ï¼Œè¯¥ç±»é‡å†™ç±»runæ–¹æ³•ï¼ŒçœŸæ­£æœ‰ç”¨çš„å°±æ˜¯runæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠè¿™äº›å…¨éƒ¨çœç•¥äº†ï¼Œç›´æ¥ä¼ å…¥ä¸€ä¸ªrun()å°±å¯ä»¥äº†ï¼Œå¹¶ä¸”ç”±äºrun()æ–¹æ³•çš„æ–¹æ³•åæ˜¯ç¡®å®šçš„ï¼Œæˆ‘ä»¬è¿runæ–¹æ³•åéƒ½å¯ä»¥çœå»ï¼Œè¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ç¡®å®šï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥çœå»ï¼Œæœ€ååªå‰©ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œåœ¨å‚æ•°åˆ—è¡¨ä¸æ–¹æ³•ä½“ä¹‹é—´åŠ å…¥-&gt;å°±æ˜¯Lambdaè¡¨è¾¾å¼ã€‚ä½¿ç”¨Lambdaä¸ç”¨åˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ å…¥ä¸€ä¸ªæ–¹æ³•ï¼Œå‘Šè¯‰å®ƒæ€ä¹ˆåšå°±å¯ä»¥äº†ã€‚è¿™ä¸ªä¹Ÿå«åšå‡½æ•°å¼ç¼–ç¨‹ã€‚ Lambdaè¡¨è¾¾å¼çš„æ ¼å¼ä¸º (å‚æ•°åˆ—è¡¨) -&gt; &#123; //æ–¹æ³•ä½“&#125; ä¸ºäº†ç†Ÿæ‚‰Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå®šä¹‰ä¸€ä¸ªCalculatorçš„æ¥å£ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³•å«calculate(int a, int b);ï¼Œå¦‚ä¸‹ public interface Calculator &#123; int calculate(int a, int b);&#125; åœ¨æµ‹è¯•ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•éœ€è¦Calculatoræ¥å£ä½œä¸ºå‚æ•° public static int cal(int a, int b, Calculator calculator) &#123; int result = calculator.calculate(a,b); return result;&#125; è¿™ä¸ªæ–¹æ³•è¡¨ç¤ºçš„æ˜¯ï¼Œa,bç»è¿‡Calculatorè®¡ç®—ä¹‹åå¾—åˆ°ä¸€ä¸ªæ•°ï¼Œè€Œè®¡ç®—æ–¹æ³•ï¼Œæ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„calculatorè€Œå®šï¼Œè¿™æ˜æ˜¾æ˜¯æˆ‘ä»¬åªéœ€è¦å‘Šè¯‰è®¡ç®—å™¨æ€ä¹ˆåšå°±è¡Œï¼Œæˆ‘ä»¬æŠŠåšçš„æ–¹æ³•å‘Šè¯‰å®ƒï¼Œä½¿ç”¨Lambdaè¡¨è¾¾å¼ //åŠ æ³•è®¡ç®—å™¨int result1 = cal(2,3, (int a, int b) -&gt; &#123; return a + b;&#125;);System.out.println(result1);//å‡æ³•è®¡ç®—å™¨int result2 = cal(2,3, (int a, int b) -&gt; &#123; return a - b;&#125;);System.out.println(result2); è¾“å‡ºä¸º 5-1 æ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„æ–¹æ³•ä¸åŒï¼Œè¿™ä¸ªè®¡ç®—å™¨å°±ä¸åŒï¼Œè®¡ç®—å™¨å…³å¿ƒçš„å°±æ˜¯æ€ä¹ˆåšï¼Œä½ å‘Šè¯‰æ€ä¹ˆåšå°±å¯ä»¥ã€‚ Lambdaçš„çœç•¥æ ¼å¼å…¶å®ä¸Šé¢çš„Lambdaè¿˜å¯ä»¥è¿›è¡ŒåŒ–ç®€ï¼Œå› ä¸ºè¿˜æœ‰å¾ˆå¤šæ˜¯å¯ä»¥æ¨æ–­å‡ºæ¥çš„ï¼Œæ¯”å¦‚å‚æ•°åˆ—è¡¨é‡Œé¢çš„å‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºè¿™ä¸ªå‚æ•°ç±»å‹æ—¶ç¡®å®šçš„ï¼Œä¸å¯èƒ½ä¼šå˜çš„ã€‚å¦‚ int result1 = cal(2,3, (a, b) -&gt; &#123; return a + b;&#125;); å¦‚æœæ–¹æ³•ä½“é‡Œé¢åªæœ‰ä¸€æ¡è¯­å¥æ—¶ï¼Œé‚£ä¹ˆèŠ±æ‹¬å·ä¹Ÿå¯ä»¥çœç•¥ï¼Œè¿™æ—¶åˆ†å·ä¹Ÿå¯ä»¥çœç•¥ï¼Œå¦‚æœè¿™æ¡è¯­å¥æ˜¯returnè¯­å¥ï¼Œé‚£ä¹ˆreturnä¹Ÿå¯ä»¥çœç•¥ï¼Œå› ä¸ºå¿…é¡»æ˜¯è¦è¿”å›ä¸€ä¸ªå€¼çš„ï¼Œè¿™ä¸ªå¯ä»¥æ¨æ–­å‡ºæ¥ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥ï¼Œæ‰€ä»¥ä¸Šé¢åˆå¯ä»¥ç®€å†™ä¸º int result1 = cal(2,3, (a, b) -&gt; a + b); å¦‚æœå‚æ•°åˆ—è¡¨é‡Œé¢åªæœ‰ä¸€ä¸ªå‚æ•°çš„è¯ï¼Œé‚£ä¹ˆå°æ‹¬å·ä¹Ÿå¯ä»¥çœç•¥ param -&gt; &#123; //æ–¹æ³•ä½“&#125; Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨å‰æè™½ç„¶Lambdaè¡¨è¾¾å¼è¿™ä¹ˆå¥½ç”¨ï¼Œä½†æ˜¯æ˜¯æœ‰ä½¿ç”¨å‰æçš„ ä½¿ç”¨Lambdaå¿…é¡»å…·æœ‰æ¥å£ï¼Œä¸”è¦æ±‚æ¥å£ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚ æ¯”å¦‚Runnableæ¥å£ï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªrun()æ–¹æ³•æ˜¯æŠ½è±¡æ–¹æ³• æ¯”å¦‚ä¸Šé¢å®šä¹‰çš„Calculatoræ¥å£ï¼Œé‡Œé¢ä¹Ÿåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•calculate() ä½¿ç”¨Lambdaå¿…é¡»å…·æœ‰ä¸Šä¸‹æ–‡æ¨æ–­ã€‚ ä¹Ÿå°±æ˜¯æ–¹æ³•çš„å‚æ•°æˆ–å±€éƒ¨å˜é‡ç±»å‹å¿…é¡»ä¸ºLambdaå¯¹åº”çš„æ¥å£ç±»å‹ï¼Œæ‰èƒ½ä½¿ç”¨Lambdaä½œä¸ºè¯¥æ¥å£çš„å®ä¾‹ã€‚ ä¸èƒ½æ˜¯æˆ‘è¦ä¸€ä¸ªCalculatoræ¥å£çš„calculate()æ–¹æ³•ï¼Œä½ ç»™æˆ‘ä¼ ä¸€ä¸ªRunnableçš„run()æ–¹æ³•ï¼Œå…„å¼Ÿï¼Œæš—å·å¯¹ä¸ä¸Šå•Šã€‚ å¤‡æ³¨ï¼šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œç§°ä¸ºâ€å‡½æ•°å¼æ¥å£â€œã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}]},{"title":"Javaå¸¸ç”¨API","date":"2019-07-11T16:00:00.000Z","path":"/Javaå¸¸ç”¨API/","text":"APIå…¨ç§°å«åšApplication Programming Interfaceï¼Œç¿»è¯‘æˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼Œå…¶å®ä½ æŠŠå®ƒçœ‹åšæ˜¯Javaçš„ä½¿ç”¨è¯´æ˜ä¹¦è¿›è¡Œï¼Œå®ƒå‘Šè¯‰ä½ Javaæœ‰å“ªäº›ç±»ï¼Œæœ‰å“ªäº›æ–¹æ³•ï¼Œä½ ç›´æ¥ç”¨å°±å¯ä»¥ï¼Œç›¸å½“äºç»™ä½ ä¸€ä¸ªæ’åº§(æ¥å£)ï¼Œä½ ç”¨çš„æ—¶å€™æ’ä¸Šå»å°±è¡Œã€‚ Scanneræˆ‘ä»¬ä¹‹å‰åšçš„éƒ½æ˜¯ä»å±å¹•è¾“å‡ºï¼Œç°åœ¨å°†ä»‹ç»å¦‚ä½•è·å–ä»é”®ç›˜è¾“å…¥ã€‚Scannerç±»æ˜¯ç³»ç»Ÿæä¾›çš„ä¸€ä¸ªç±»ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»é”®ç›˜è·å–è¾“å…¥ã€‚ä¸€èˆ¬ä½¿ç”¨ç³»ç»Ÿæä¾›çš„ç±»åˆ†ä¸ºä¸‰éƒ¨åˆ† å¯¼åŒ… åˆ›å»ºå¯¹è±¡ ä½¿ç”¨ å¯¼åŒ…è¯­å¥æ”¾åœ¨packageä¹‹åï¼Œæ”¾åœ¨public classä¹‹å‰ï¼Œå¦‚æœä½¿ç”¨çš„ç±»ä¸å½“å‰ç±»å±äºåŒä¸€ä¸ªåŒ…ï¼Œé‚£ä¹ˆä¸ç”¨å¯¼å…¥ï¼Œå¦‚æœè¦ä½¿ç”¨çš„ç±»åœ¨java.langåŒ…ä¸‹ï¼Œä¹Ÿä¸éœ€è¦å¯¼å…¥ã€‚å¯¼åŒ…çš„æ ¼å¼ä¸º import åŒ…å.ç±»å; //å¯¼å…¥æŒ‡å®šåŒ…ä¸‹é¢çš„ç±»import åŒ…å.*; //å¯¼å…¥æŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰ç±» Scannerç±»ä½äºjava.utilåŒ…ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¼å…¥ï¼Œä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨Scannerç±» import java.util.Scanner; //1. å¯¼åŒ…public class TestScanner &#123; public static void main(String[] args) &#123; //2. åˆ›å»ºä¸€ä¸ªScannerå¯¹è±¡ //Scannerçš„æ„é€ æ–¹æ³•éœ€è¦ä¼ å…¥å‚æ•°ï¼Œè¿™é‡Œä¼ å…¥çš„æ˜¯System.inï¼Œä»£è¡¨çš„æ˜¯ä»é”®ç›˜è¾“å…¥ Scanner sc = new Scanner(System.in); //3. ä½¿ç”¨ int num = sc.nextInt(); //è·å¾—ä»é”®ç›˜è¾“å…¥çš„ä¸€ä¸ªæ•´æ•° String str = sc.next(); //è·å¾—ä»é”®ç›˜è¾“å…¥çš„ä¸€ä¸ªå­—ç¬¦ä¸² //æ‰“å°è¾“å…¥çš„ç»“æœ System.out.println(num); System.out.println(str); &#125;&#125; ç¨‹åºè¿è¡Œæ•ˆæœä¸ºï¼š æ³¨æ„ï¼š å…¶å®ä»é”®ç›˜è¾“å…¥å…¨éƒ¨éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå³ä½¿ä½ è¾“å…¥çš„æ˜¯65è¿™é‡Œçš„æ•´æ•°ï¼Œç³»ç»Ÿå¾—åˆ°çš„åªæ˜¯å¯¹äºçš„ASCIIç å€¼ï¼Œè€ŒnextInt()æ–¹æ³•ä¹‹æ‰€ä»¥èƒ½è·å¾—æ•´æ•°ï¼Œæ˜¯å› ä¸ºnextInt()æ–¹æ³•åšäº†å¤„ç†ï¼Œå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºäº†æ•´æ•°ã€‚ next()æ–¹æ³•åªèƒ½è·å¾—ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚è¾“å…¥çš„æ˜¯Hello Worldï¼Œå®ƒåªèƒ½å¾—åˆ°Helloã€‚ RandomRandomç±»çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨äºäº§ç”Ÿéšæœºæ•°çš„ï¼Œå®ƒä½äºjava.utilåŒ…ä¸‹é¢ã€‚ä¸‹é¢ä»‹ç»å®ƒçš„ä¸¤ä¸ªä¸»è¦çš„æ–¹æ³• nextInt()ï¼šäº§ç”Ÿä¸€ä¸ªéšæœºæ•´æ•°ï¼ŒèŒƒå›´æ—¶æ•´ä¸ªintçš„å¤§å° nextInt(int n)ï¼šäº§ç”Ÿä¸€ä¸ª[0,n)çš„æ•´æ•°ï¼Œå·¦é—­å³å¼€ã€‚ ä¸‹é¢å°†ä»‹ç»Randomçš„ä½¿ç”¨ã€‚ä¸‹é¢è¿™ä¸ªç¨‹åºå°†äº§ç”Ÿ10ä¸ªéšæœºæ•´æ•°ï¼ŒèŒƒå›´ä¸ºæ•´ä¸ªintæ•´æ•°çš„èŒƒå›´ import java.util.Random;public class TestRandom &#123; public static void main(String[] args) &#123; Random r = new Random(); for (int i = 0; i &lt; 10; i++) &#123; System.out.println(r.nextInt()); &#125; &#125;&#125; ç¨‹åºè¾“å‡ºä¸º å¯è§äº§ç”Ÿçš„æ•´æ•°æ˜¯éšæœºçš„ï¼Œå¹¶ä¸”èŒƒå›´æ—¶æ•´ä¸ªintçš„èŒƒå›´ï¼Œæ­£å€¼å’Œè´Ÿå€¼éƒ½æœ‰ã€‚ ä¸‹é¢è¿™ä¸ªç¨‹åºå°†äº§ç”Ÿ10èŒƒå›´ä¸º1-10çš„éšæœºæ•´æ•° import java.util.Random;public class TestRandomAgain &#123; public static void main(String[] args) &#123; Random r = new Random(); for (int i = 0; i &lt; 10; i++) &#123; System.out.println(r.nextInt(10) + 1); //nextInt(10)çš„èŒƒå›´ä¸º0-9ï¼Œ+1å˜ä¸º1-10 &#125; &#125;&#125; ç¨‹åºè¾“å‡ºä¸º è¾“å‡ºçš„æ•°å­—çš„èŒƒå›´åœ¨1-10ä¹‹é—´ï¼Œå¹¶ä¸”è¾“å‡ºçš„æ•°å­—æ˜¯éšæœºçš„ã€‚ StringStringè¿™ä¸ªç±»æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ä¸€ä¸ªç±»äº†ï¼Œå› ä¸ºæˆ‘ä»¬ä¼šç‰µæ¶‰åˆ°å¾ˆå¤šçš„å­—ç¬¦ä¸²çš„æ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œè¦è¯¦ç»†è®²ä¸€ä¸‹Stringç±»ã€‚ Stringç±»çš„å®šä¹‰Stringç±»ä½äºjava.langåŒ…ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰è®²è¿‡ï¼Œjava.langæ˜¯é»˜è®¤å¯¼å…¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å¯¼å…¥è¿™ä¸ªåŒ…ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ä¹‹å‰æˆ‘ä»¬å¯ä»¥ç›´æ¥çš„ä½¿ç”¨Stringè¿™ä¸ªç±»ã€‚å­—ç¬¦ä¸²æ•ˆæœä¸Šç›¸å½“äºæ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ã€‚ Stringä½œä¸ºå¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥Stringå¯¹è±¡çš„åˆ›å»ºå½“ç„¶è¦å€ŸåŠ©äºæ„é€ æ–¹æ³•äº†ï¼ŒStringçš„æ„é€ æ–¹æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåªè®²å¸¸è§çš„ä¸‰ç§Stringæ„é€ æ–¹æ³•ã€‚ public String() åˆ›å»ºä¸€ä¸ªç©ºå­—ç¬¦ä¸² public String(char[] array) æ ¹æ®ä¸€ä¸ªå­—ç¬¦æ•°ç»„æ¥åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸² public String(byte[] array) æ ¹æ®ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ¥åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸² ä¸‹é¢æˆ‘å°†æ¼”ç¤ºé€šè¿‡è¿™ä¸‰ç§æ–¹æ³•åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ã€‚ public class TestString &#123; public static void main(String[] args) &#123; String str1 = new String(); //\"\" char[] chars = &#123;'a', 'b', 'c'&#125;; String str2 = new String(chars); //\"abc\" byte[] bytes = &#123;97, 98, 99&#125;; String str3 = new String(bytes); //\"abc\" System.out.println(str1); System.out.println(str2); System.out.println(str3); &#125;&#125; è¾“å‡ºä¸º abcabc å› ä¸ºå­—ç¬¦ä¸²æ˜¯åœ¨æ˜¯å¤ªå¸¸ç”¨ï¼Œé€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºæœ‰ç‚¹éº»çƒ¦ï¼Œæ‰€ä»¥ç³»ç»Ÿè®¾è®¡å‡ºå¯ä»¥é€šè¿‡&quot;&quot;çš„å­—é¢é‡çš„å½¢å¼æ¥åˆ›å»ºä¸€ä¸ªStringå¯¹è±¡ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„æ–¹å¼ String str = \"abc\"; æ³¨æ„ï¼š Javaç¨‹åºä¸­æ‰€æœ‰å­—ç¬¦ä¸²çš„å­—é¢å€¼ï¼ˆ&quot;&quot;ï¼‰éƒ½æ˜¯Stringç±»çš„å®ä¾‹ å­—ç¬¦ä¸²ä¸€æ—¦åˆ›å»ºä¸å¯æ”¹å˜ å¸¸é‡æ± æˆ‘ä»¬çŸ¥é“å¯ä»¥é€šè¿‡å­—é¢é‡ï¼ˆ&quot;&quot;ï¼‰çš„å½¢å¼æ¥åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œè¿™æ ·åˆ›å»ºå¯¹è±¡ä¸ä½¿ç”¨æ„é€ æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡æœ‰ä»€ä¹ˆä¸åŒå‘¢? ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå­—ç¬¦ä¸²æ¯”è¾ƒçš„ä¾‹å­ public class ConstantString &#123; public static void main(String[] args) &#123; String str1 = \"abc\"; String str2 = \"abc\"; String str3 = new String(new char[]&#123;'a','b','c'&#125;); String str4 = new String(new byte[]&#123;97, 98, 99&#125;); System.out.println(str1); System.out.println(str2); System.out.println(str3); System.out.println(str4); &#125;&#125; è¾“å‡ºä¸º abcabcabcabc åœ¨è¿™é‡Œæˆ‘ä»¬åˆ›å»ºäº†å››ä¸ªå­—ç¬¦ä¸²ï¼Œä»–ä»¬çš„å†…å®¹éƒ½æ˜¯â€abcâ€ï¼Œç°åœ¨æˆ‘è¦å¯¹å®ƒä»¬è¿›è¡Œæ¯”è¾ƒ System.out.println(str1 == str2);System.out.println(str1 == str3);System.out.println(str1 == str4);System.out.println(str3 == str4); è¾“å‡ºç»“æœä¸º truefalsefalsefalse è¿™é‡Œå¾—åˆ°çš„ç»“æœå¯èƒ½ä¸ä½ æƒ³è±¡çš„ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘è¦è¯¦ç»†è®²ä¸€ä¸‹ã€‚ é¦–å…ˆ==æ¯”è¾ƒç¬¦æ¯”è¾ƒçš„æ˜¯ä»€ä¹ˆï¼Ÿç”±äºå­—ç¬¦ä¸²éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œæ¯”è¾ƒçš„æ˜¯å®ƒä»¬çš„åœ°å€ï¼Œé‚£æŒ‰é“ç†è¯´ï¼Œæ¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä¼šåœ¨å †ä¸­å¼€è¾Ÿä¸€ä¸ªç©ºé—´ï¼Œæ¯ä¸ªç©ºé—´çš„åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå®ƒä»¬æ¯”è¾ƒçš„å€¼åº”è¯¥éƒ½æ˜¯falseï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆé€šè¿‡å­—é¢é‡åˆ›å»ºçš„å­—ç¬¦ä¸²å¯¹è±¡æ¯”è¾ƒå‡ºæ¥çš„ç»“æœæ˜¯trueå‘¢ï¼Ÿ è¦è§£é‡Šè¿™ä¸€ä¸ªç°è±¡ï¼Œå°±éœ€è¦çŸ¥é“ä¸€ä¸ªä¸œè¥¿ï¼Œé‚£å°±æ˜¯å¸¸é‡æ± ã€‚ç¨‹åºä¸­ç›´æ¥ç”¨åŒå¼•å·å†™ä¸Šçš„ï¼ˆå³é€šè¿‡å­—é¢é‡åˆ›å»ºçš„å­—ç¬¦ä¸²ï¼‰ï¼Œéƒ½åœ¨å¸¸é‡æ± ä¸­ï¼Œè€Œnewå‡ºæ¥çš„å¯¹è±¡ä¸å†å¸¸é‡æ± ä¸­ã€‚ç°åœ¨è®°ä½è¿™ä¸€å¥è¯ï¼Œæˆ‘ä»¬å»å†…å­˜çœ‹çœ‹åˆ°åº•æ€ä¹ˆå›äº‹ï¼Œç”±äºè¿™æ¬¡ä¸ç‰µæ¶‰åˆ°æ–¹æ³•åŒºï¼Œæˆ‘ä»¬åªç”»å‡ºæ ˆå†…å­˜å’Œå †å†…å­˜ã€‚ å­—ç¬¦ä¸²çš„ç›¸å…³æ–¹æ³•å­—ç¬¦ä¸²æ¯”è¾ƒä¹‹å‰æˆ‘ä»¬è¯´==æ¯”è¾ƒæ˜¯åŸºäºåœ°å€çš„æ¯”è¾ƒï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚æœåŸºäºå†…å®¹æ¯”è¾ƒæ€ä¹ˆåŠï¼Ÿæ¯”å¦‚è¯´ä¸Šé¢çš„å­—ç¬¦ä¸²å¦‚æœè¿›è¡Œæ¯”è¾ƒçš„è¯ï¼Œå°±ä¼šè¿”å›trueã€‚æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯equals()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…¶å®ä¹Ÿæ˜¯åŸºäº==æ¯”è¾ƒçš„ï¼Œä¸è¿‡Stringç±»é‡å†™äº†è¯¥æ–¹æ³•ï¼Œåªè¦ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹ç›¸åŒå°±ä¼šè¿”å›trueã€‚è¿™é‡Œåˆæåˆ°äº†é‡å†™ï¼Œä¸æ‡‚æ²¡å…³ç³»ï¼Œåªè¦çŸ¥é“ï¼Œå­—ç¬¦ä¸²è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ˜¯åŸºäºå†…å®¹çš„æ¯”è¾ƒï¼Œè€Œä¸æ˜¯åŸºäºåœ°å€çš„æ¯”è¾ƒï¼Œä¸‹é¢æ¼”ç¤ºä¸€ç•ªã€‚ public class CompareString &#123; public static void main(String[] args) &#123; String str1 = \"abc\"; String str2 = \"abc\"; String str3 = new String(new char[]&#123;'a','b','c'&#125;); String str4 = new String(new byte[]&#123;97, 98, 99&#125;); System.out.println(str1.equals(str2)); System.out.println(str1.equals(str3)); System.out.println(str1.equals(str4)); System.out.println(str3.equals(str4)); &#125;&#125; è¾“å‡ºä¸º truetruetruetrue æ³¨æ„ï¼š equals()æ–¹æ³•å…·æœ‰å¯¹ç§°æ€§ å¦‚æœæ¯”è¾ƒçš„åŒæ–¹ä¸€ä¸ªæ˜¯å¸¸é‡ï¼Œä¸€ä¸ªæ˜¯å˜é‡ï¼Œæ¨èä½¿ç”¨å¸¸é‡è°ƒç”¨æ–¹æ³• é’ˆå¯¹ç¬¬äºŒæ¡çš„åŸå› æ˜¯ï¼Œå¦‚æœå˜é‡stræœªè¢«åˆå§‹åŒ–ï¼Œé‚£ä¹ˆå®ƒçš„åˆå§‹å€¼æ˜¯nullï¼Œnullæ ¹æœ¬æ²¡æœ‰equalsæ–¹æ³•ï¼Œæ‰€ä»¥è°ƒç”¨è¯¥æ–¹æ³•ä¼šæŠ¥é”™ String str; //str = nullstr.equals(\"abc\"); //ä¼šæŠ¥é”™\"abc\".equals(str); //ä¸ä¼šæŠ¥é”™ï¼Œä¼šè¿”å›false å­—ç¬¦ä¸²æ¯”è¾ƒçš„ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯equalsIgnoreCase()ï¼Œè¯¥æ–¹æ³•ä¸equalsä¸åŒçš„æ˜¯ï¼Œè¯¥æ–¹æ³•çš„æ¯”è¾ƒå¿½ç•¥å¤§å°å†™ï¼Œè€Œequals()æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚ System.out.println(\"hello\".equalsIgnoreCase(\"Hello\")); è¾“å‡ºä¸º true å­—ç¬¦ä¸²æˆªå–ä¸å­—ç¬¦ä¸²æˆªå–æœ‰å…³çš„æ–¹æ³•æ˜¯substring()ï¼Œè¯¥æ–¹æ³•æœ‰ä¸¤ç§å¸¸ç”¨çš„é‡è½½ substring(int index) ä»indexæˆªå–åˆ°æœ«å°¾ substring(int begin, int end) ä»beginæˆªå–åˆ°endï¼Œå·¦é—­å³å¼€[begin, end) å­—ç¬¦ä¸²è½¬æ¢ä»‹ç»ä¸‰ä¸ªæ–¹æ³• toCharArray() å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºchar[] getBytes() å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºbyte[] replace(CharSequence oldString, CharSequence newString) è¿™é‡Œçš„CharSequenceæ˜¯æ¥å£ï¼Œè¿™é‡Œä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼ŒçŸ¥é“è¿™ä¸ªå¯ä»¥æ¥æ”¶å­—ç¬¦ä¸²ç±»å‹å°±å¯ä»¥ è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯æ–°çš„å­—ç¬¦ä¸²æ›¿æ¢æ—§çš„å­—ç¬¦ä¸² å­—ç¬¦ä¸²åˆ†å‰²ä¸å­—ç¬¦ä¸²åˆ†å‰²çš„æ–¹æ³•åªæœ‰ä¸€ä¸ª split(String regex) æŒ‰ç…§regexçš„è§„åˆ™åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ æŒ‰ç…§regexçš„è§„åˆ™åˆ†å‰²å­—ç¬¦ä¸²å¯èƒ½æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œå…¶å®è¿™é‡Œçš„regexæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸æ‡‚çš„è¯çœ‹æ‡‚ä¸‹é¢çš„ä¾‹å­å°±å¯ä»¥ public class SplitString &#123; public static void main(String[] args) &#123; String str = \"a,b,c\"; String[] strings = str.split(\",\"); //æŒ‰ç…§é€—å·çš„åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¾—åˆ°çš„æ˜¯[\"a\",\"b\",\"c\"] for (int i = 0; i &lt; strings.length; i++) &#123; System.out.println(strings[i]); &#125; &#125;&#125; è¾“å‡ºä¸º abc æ³¨æ„ï¼š å¦‚æœè¦æŒ‰â€.â€è§„åˆ™åˆ†å‰²çš„è¯ï¼Œä¸èƒ½å†™â€.â€ï¼Œè¦å†™æˆâ€\\.â€ï¼Œå› ä¸º.åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œæ‰€ä»¥éœ€è¦è½¬ä¹‰ã€‚ ArraysArraysä½äºjava.utilåŒ…ä¸­ã€‚è¿™ä¸ªç±»æä¾›äº†å¾ˆå¤šçš„é™æ€æ–¹æ³•ï¼Œå®ç°æ•°ç»„çš„å¸¸è§æ“ä½œã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸¤ä¸ªå¸¸ç”¨çš„æ–¹æ³• toString æ¥æ”¶ä¸€ä¸ªæ•°ç»„å‚æ•° å°†å‚æ•°æ•°ç»„å˜æˆå­—ç¬¦ä¸² [å…ƒç´ 1ï¼Œå…ƒç´ 2ï¼Œ â€¦] sort æŒ‰é»˜è®¤å‡åºï¼ˆä»å°åˆ°å¤§ï¼‰å¯¹æ•°ç»„è¿›è¡Œæ’åº å¯¹äºStringï¼ŒæŒ‰å­—æ¯åœ¨Unicodeè¡¨ä¸­çš„å¤§å°æ’åº å¯¹äºè‡ªå®šä¹‰çš„ç±»å‹ï¼Œéœ€è¦Comparableæˆ–Comparatoræ¥å£çš„æ”¯æŒ ä¸‹é¢æ¼”ç¤ºä¸¤ä¸ªæ–¹æ³•çš„ä½¿ç”¨ import java.util.Arrays;public class TestArrays &#123; public static void main(String[] args) &#123; //åˆ›å»ºä¸€ä¸ªæ•´å‹æ•°ç»„ int[] arrays = &#123;5, 8, 4, 12, 3, 7&#125;; //è°ƒç”¨Arrays.toString() æˆ‘ä»¬ä¸ç”¨éå†æ•°ç»„æ‰“å°äº† System.out.println(Arrays.toString(arrays)); //å¯¹æ•°ç»„è¿›è¡Œæ’åº è¿™é‡Œä¸æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ è€Œæ˜¯å¯¹åŸæœ‰æ•°ç»„è¿›è¡Œæ’åº Arrays.sort(arrays); //å°†æ’åºåçš„æ•°ç»„æ‰“å°å‡ºæ¥ System.out.println(Arrays.toString(arrays)); &#125;&#125; è¾“å‡ºä¸º [5, 8, 4, 12, 3, 7][3, 4, 5, 7, 8, 12] MathMathç±»ä½äºjava.utilåŒ…ä¸­ï¼Œè¯¥ç±»åŒ…å«äº†å¾ˆå¤šä¸æ•°å­¦è®¡ç®—ç›¸å…³çš„é™æ€æ–¹æ³•ã€‚è¿™é‡Œä»‹ç»å‡ ä¸ªä¸æ•´æ•°æ“ä½œæœ‰å…³çš„æ–¹æ³• abs() å–ç»å¯¹å€¼ abs(-2) = 2 ceil() å‘ä¸Šå–æ•´ ceil(2.1) = 3ï¼Œceil(-2.1) = -2 floor() å‘ä¸‹å–æ•´ Â·floor(2.1) = 2ï¼Œfloor(-2.1) = -3 round() å››èˆäº”å…¥ round(2.1) = 2ï¼Œround(-2.1) = -2 å½“ç„¶Mathç±»è¿˜åŒ…å«å¾ˆå¤šçš„æ–¹æ³•ï¼Œå…·ä½“çš„å¯ä»¥æŸ¥é˜…èµ„æ–™ã€‚ ObjectObjectç±»æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œæ‰€æœ‰ç±»éƒ½é»˜è®¤ç»§æ‰¿äº†ï¼ˆç›´æ¥æˆ–é—´æ¥ï¼‰Objectç±»ã€‚æ‰€ä»¥æ‰€æœ‰çš„ç±»éƒ½é»˜è®¤æœ‰Objectç±»ä¸­çš„æˆå‘˜æ–¹æ³•ã€‚è¿™é‡Œä»‹ç»ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„Objectç±»çš„æˆå‘˜æ–¹æ³• toString() equals(Object object) toStringæˆ‘ä»¬åœ¨ä¹‹å‰ä¸€ç›´æœ‰ç”¨System.out.println()è¯­å¥æ‰“å°ä¿¡æ¯åˆ°æ§åˆ¶å°ï¼Œå½“æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªå¼•ç”¨ç±»å‹å˜é‡çš„æ—¶å€™ï¼Œå®ƒä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„toString()æ–¹æ³•ï¼Œç”±äºObjectç±»çš„toStringæ–¹æ³•æ˜¯é»˜è®¤æ‰“å°å †å†…å­˜çš„åœ°å€å€¼ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨æ‰“å°æ•°ç»„æ—¶ï¼Œæ‰“å°å‡ºçš„æ˜¯åœ°å€å€¼ã€‚è€Œæˆ‘ä»¬æ‰“å°Stringç±»å‹æ—¶ï¼Œæ‰“å°å‡ºçš„å´æ˜¯å®ƒçš„å†…å®¹ï¼Œè¿™æ—¶å› ä¸ºStringé‡å†™toString()æ–¹æ³•ã€‚ ä¸ºäº†éªŒè¯æˆ‘ä»¬çš„çŒœæƒ³ï¼Œæˆ‘ä»¬çœ‹ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªç±» public class Person &#123;&#125; æˆ‘ä»¬ç°åœ¨åˆ›å»ºä¸€ä¸ªPersonå¯¹è±¡ï¼Œå¹¶ä¸”æ‰“å°å‡ºæ¥ï¼Œç„¶åè°ƒç”¨toString()æ–¹æ³•ï¼Œåœ¨æ‰“å°ä¸€é public class TestToString &#123; public static void main(String[] args) &#123; Person per = new Person(); System.out.println(per); System.out.println(per.toString()); &#125;&#125; è¾“å‡ºä¸º Person@4554617cPerson@4554617c æˆ‘ä»¬å‘ç°ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œç°åœ¨æˆ‘ä»¬åœ¨Personç±»ä¸­é‡å†™toString()æ–¹æ³• public class Person &#123; @Override public String toString() &#123; return \"I'm a Person object\"; &#125;&#125; åœ¨è¿è¡Œä¸€éï¼Œè¾“å‡ºä¸º I'm a Person objectI'm a Person object equalsåœ¨å‰é¢æˆ‘ä»¬æ¯”è¾ƒå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬è¯´==æ˜¯å¯¹è±¡çš„åœ°å€å€¼è¿›è¡Œæ¯”è¾ƒï¼Œè€Œequalsæ–¹æ³•æ˜¯åŸºäºå†…å®¹çš„æ¯”è¾ƒã€‚äº‹å®ä¸Šï¼ŒObjectç±»çš„equalsæ–¹æ³•ä¹Ÿæ˜¯è¿›è¡Œå¯¹è±¡åœ°å€å€¼çš„æ¯”è¾ƒï¼Œåªä¸è¿‡æ˜¯Stringç±»é‡å†™äº†equalsæ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™equalsæ–¹æ³•æ¥è®¾ç½®æ€æ ·ä¸¤ä¸ªå¯¹è±¡æ‰æ˜¯ç›¸ç­‰çš„ã€‚æ¯”å¦‚è¿˜æ˜¯ä»¥Personç±»è¿›è¡Œä¸¾ä¾‹ï¼Œå®ƒæœ‰å§“åå’Œå¹´é¾„ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬è®¤ä¸ºå¦‚æœä¸¤ä¸ªäººçš„å§“åå’Œå¹´é¾„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸¤ä¸ªäººçš„å¯¹è±¡æ˜¯ç›¸åŒçš„ public class Person &#123; String name; int age; public Person(String name, int age) &#123; this.name = name; this.age = age; &#125; @Override public boolean equals(Object obj) &#123; //å› ä¸ºè¦ä½¿ç”¨Personå¯¹è±¡çš„nameå’Œageå±æ€§ï¼Œæ‰€ä»¥è¦å‘ä¸‹è½¬å‹ if (obj instanceof Person) &#123; Person person = (Person) obj; //å¦‚æœå§“åå’Œå¹´é¾„ç›¸åŒï¼Œå°±è®¤ä¸ºå¯¹è±¡æ˜¯ç›¸åŒçš„ if (this.name == person.name &amp;&amp; this.age == person.age) &#123; return true; &#125; &#125; return false; &#125;&#125; ç°åœ¨æˆ‘ä»¬åœ¨æµ‹è¯•ç±»ç±»ä¸­æµ‹è¯•ä¸€ä¸‹ public class TestEquals &#123; public static void main(String[] args) &#123; Person person1 = new Person(\"è¿ªä¸½çƒ­å·´\",20); Person person2 = new Person(\"å¤åŠ›å¨œæ‰\",28); Person person3 = new Person(\"è¿ªä¸½çƒ­å·´\",20); System.out.println(person1.equals(person2)); //å¹´é¾„å’Œå§“åä¸ä¸€æ ·ï¼Œè¿”å›false System.out.println(person1.equals(person3)); //åå­—å’Œå¹´é¾„ä¸€æ ·ï¼Œè¿”å›true System.out.println(person1 == person3); //åœ°å€å€¼æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æ˜¯false &#125;&#125; è¾“å‡ºä¸º falsetruefalse DateDateæ˜¯æœ‰å…³äºæ—¥æœŸçš„ç±»ï¼Œå®ƒä½äºjava.utilåŒ…ä¸­ã€‚ç°åœ¨ä¸»è¦ä»‹ç»å®ƒçš„ä¸¤ç§å¸¸ç”¨çš„æ„é€ æ–¹æ³•ï¼Œä»¥åŠä¸€ä¸ªæœ‰å…³äºæ ¼å¼åŒ–è¾“å‡ºçš„ç±»SimpleDateFormatã€‚ æ„é€ æ–¹æ³•Date date = new Date(); //é»˜è®¤å¾—åˆ°çš„æ˜¯å½“å‰æ—¶é—´çš„æ—¥æœŸDate date = new Date(long l); //æ¥æ”¶ä¸€ä¸ªæ¯«ç§’å€¼ï¼Œè¯¥æ¯«ç§’å€¼ä»£è¡¨çš„æ˜¯è·ç¦»æ—¶é—´åŸç‚¹æ¶ˆè€—çš„æ¯«ç§’å€¼ æ—¶é—´åŸç‚¹è§„å®šä¸º1970å¹´1æœˆ1æ—¥çš„00:00:00æ—¶åˆ»ã€‚ç°åœ¨ç®€å•æ¼”ç¤ºDateç±»çš„ä½¿ç”¨ import java.util.Date;public class TestDate &#123; public static void main(String[] args) throws ParseException &#123; Date date = new Date(); System.out.println(date); &#125;&#125; è¾“å‡ºä¸º Sat Jul 20 19:26:26 CST 2019 å¯è§Dateç±»é‡å†™äº†toString()æ–¹æ³•ã€‚ Dateç±»æœ‰ä¸€ä¸ªgetTimeçš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥è·å¾—è¯¥dateå¯¹è±¡å¯¹åº”çš„æ¯«ç§’å€¼ï¼Œç°åœ¨æˆ‘ä»¬é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å¾—ä¸€ä¸ªæ¯«ç§’å€¼ï¼Œç„¶ååˆ©ç”¨è¯¥æ¯«ç§’å€¼ä½œä¸ºç¬¬äºŒä¸ªæ„é€ å‡½æ•°çš„å‚æ•° import java.util.Date;public class TestDate &#123; public static void main(String[] args) throws ParseException &#123; Date date = new Date(); System.out.println(date); long ms = date.getTime(); Date date2 = new Date(ms); System.out.println(date2); &#125;&#125; è¾“å‡ºä¸º Sat Jul 20 19:29:24 CST 2019Sat Jul 20 19:29:24 CST 2019 SimpleDateFormatä¸Šé¢çš„æ—¶é—´è¾“å‡ºå…¶å®ä¸ç¬¦åˆæˆ‘ä»¬çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®©è¾“å‡ºçš„æ—¥æœŸç¬¦åˆæˆ‘ä»¬çš„ä½¿ç”¨ä¹ æƒ¯ã€‚DateFormatè¿™ä¸ªç±»æ˜¯ä¸ºæ­¤è€Œå­˜åœ¨çš„ï¼Œä¸è¿‡å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒSimpleDateFormatç±»ç»§æ‰¿äº†è¯¥ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥ç±»æ ¼å¼åŒ–æ—¥æœŸè¾“å‡ºã€‚ é¦–å…ˆå°±æ˜¯å¦‚ä½•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚ä¸‹ SimpleDateFormat simpleDateFormat = new SimpleDateFormat(æ¨¡å¼); å¯èƒ½è¿™é‡Œè¿˜ä¸èƒ½ç†è§£æ¨¡å¼æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Œé‚£ä¹ˆå°±è¦çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"yyyyå¹´MMæœˆddæ—¥\"); â€œyyyyå¹´MMæœˆddæ—¥â€å°±æ˜¯æ¨¡å¼ï¼Œå·®ä¸å¤šå°±æ˜¯æ¨¡æ¿å§ï¼Œä¹Ÿå°±æ˜¯ä½ æƒ³è¦æ ¼å¼åŒ–è¾“å‡ºçš„æ ¼å¼ï¼Œå…¶ä¸­yyyyä»£è¡¨å¹´ï¼ŒMMä»£è¡¨æœˆï¼Œddä»£è¡¨æ—¥ï¼ŒHHä»£è¡¨å°æ—¶ï¼Œmmä»£è¡¨åˆ†ï¼Œssä»£è¡¨ç§’ã€‚ è¿™é‡Œä¸»è¦ä»‹ç»å®ƒçš„ä¸¤ä¸ªæ–¹æ³• format æ¥æ”¶ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²çš„æ ¼å¼ä¸ä½ ä¸Šé¢å®šä¹‰çš„æ¨¡å¼ç›¸åŒ parse æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²çš„æ ¼å¼å¿…é¡»ä¸ä½ å®šä¹‰çš„æ¨¡å¼ç›¸åŒï¼Œå¦åˆ™ä¼šæŠ¥é”™ æ–¹æ³•ä¸€ä¸ªDateå¯¹è±¡ parseæ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå¯¹äºæŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ï¼Œè¦ä¹ˆç»§ç»­æŠ›å‡ºå¼‚å¸¸ï¼Œè¦ä¹ˆä½¿ç”¨try-catchå¤„ç† ä¸‹é¢ä»‹ç»è¿™ä¸ªç±»çš„ä½¿ç”¨ import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;public class SimpleDate &#123; public static void main(String[] args) throws ParseException &#123; //parseæ–¹æ³•æœ‰å¯èƒ½æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å¤„ç†ï¼Œç»§ç»­æŠ›å‡º Date date = new Date(); //åˆ›å»ºä¸€ä¸ªDateå¯¹è±¡ä½œä¸ºåé¢formatæ–¹æ³•çš„å‚æ•° SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"yyyyå¹´MMæœˆddæ—¥ HH:mm:ss\"); //å®šä¹‰è¾“å‡ºæ ¼å¼ String formatDate = simpleDateFormat.format(date); //è·å¾—ç”±dateè½¬åŒ–å¾—åˆ°çš„æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸² System.out.println(formatDate); Date dateAgain = simpleDateFormat.parse(\"2017å¹´5æœˆ13æ—¥ 15:23:14\"); //æ ¹æ®æŒ‡å®šçš„æ ¼å¼è§£æå‡ºä¸€ä¸ªDateå¯¹è±¡ System.out.println(dateAgain); //æ‰“å°è¯¥Dateå¯¹è±¡ &#125;&#125; è¾“å‡ºä¸º 2019å¹´07æœˆ20æ—¥ 19:43:18Sat May 13 15:23:14 CST 2017 CalendarCalendaræ˜¯ä¸€ä¸ªæœ‰å…³äºæ—¥æœŸçš„ç±»ï¼Œå®ƒæä¾›äº†ä¸€äº›æ“ä½œæ—¥å†çš„æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€ä»¥ä¸èƒ½åˆ›å»ºCalendarå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒçš„é™æ€æ–¹æ³•getInstance()å¾—åˆ°å®ƒçš„ä¸€ä¸ªå­ç±»å¯¹è±¡ï¼Œå¦‚ä¸‹ Calendar calendar = Calendar.getInstance(); è¿™é‡Œä»…ç®€å•ä»‹ç»å®ƒçš„å››ä¸ªæ–¹æ³• get(int field) æ ¹æ®æŒ‡å®šfieldå€¼è·å–æ—¥å†ä¿¡æ¯ï¼Œfieldå€¼ä¸€èˆ¬ä¸ºCalendarç±»çš„é™æ€å¸¸é‡ï¼Œå¦‚get(Calendar.YEAR)å¯ä»¥è·å¾—æœ‰å…³äºå¹´ä»½çš„ä¿¡æ¯ set(int field, int value) è®¾ç½®æŒ‡å®šçš„fieldä¸ºæŒ‡å®šçš„value add(int field, int amount) ä¸ºæŒ‡å®šfieldåŠ ä¸Šamount è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåŠ ä¸Šæ•°å€¼ä¹‹åè¶…è¿‡èŒƒå›´ä¹‹åï¼Œä¼šæœ‰è¿›ä½ã€‚æ¯”å¦‚ç°åœ¨ä¸º7æœˆï¼Œæˆ‘ç»™MONTHåŠ ä¸Šäº†10ï¼Œé‚£ä¹ˆç°åœ¨å¹´ä»½ä¼šåŠ 1å¹´ï¼Œå¹¶ä¸”æ­¤æ—¶çš„æœˆä»½ä¸º7 + 10 -12 = 5ã€‚ getTime() è¿”å›å½“å‰æ—¥å†å¯¹åº”å¾—Dateå¯¹è±¡ ä¸‹é¢ç®€å•æ¼”ç¤ºæ–¹æ³•çš„ä½¿ç”¨ import java.util.Calendar;import java.util.Date;public class TestCalendar &#123; public static void main(String[] args) &#123; Calendar calendar = Calendar.getInstance(); System.out.println(calendar); //æ‰“å°å‡ºçš„ä¸æ˜¯åœ°å€ï¼Œå¯è§Calendarä¹Ÿé‡å†™äº†toString()æ–¹æ³• System.out.println(calendar.get(Calendar.YEAR)); System.out.println(calendar.get(Calendar.MONTH) + 1); //è¥¿æ–¹çš„æœˆä»½æ˜¯ä»0å¼€å§‹çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘åŠ 1 System.out.println(calendar.get(Calendar.DATE)); System.out.println(calendar.get(Calendar.DAY_OF_MONTH)); //ä¸ä¸Šé¢DATEçš„æ•ˆæœæ˜¯ä¸€æ ·çš„ System.out.println(calendar.get(Calendar.HOUR)); System.out.println(calendar.get(Calendar.MINUTE)); System.out.println(calendar.get(Calendar.SECOND)); System.out.println(\"=============\"); calendar.set(Calendar.YEAR, 2020); //è®¾ç½®å¹´ä»½ä¸º2020å¹´ System.out.println(calendar.get(Calendar.YEAR)); calendar.add(Calendar.MONTH,10); //ç»™æœˆä»½åŠ 10ä¸ªæœˆï¼Œç°åœ¨ä¸º2021å¹´5æœˆäº† System.out.println(calendar.get(Calendar.MONTH) + 1); Date dateAgain = calendar.getTime(); //å¾—åˆ°ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ System.out.println(dateAgain); &#125;&#125; è¾“å‡ºä¸º java.util.GregorianCalendar[time=1563623852127,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id=\"Asia/Shanghai\",offset=28800000,dstSavings=0,useDaylight=false,transitions=29,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2019,MONTH=6,WEEK_OF_YEAR=29,WEEK_OF_MONTH=3,DAY_OF_MONTH=20,DAY_OF_YEAR=201,DAY_OF_WEEK=7,DAY_OF_WEEK_IN_MONTH=3,AM_PM=1,HOUR=7,HOUR_OF_DAY=19,MINUTE=57,SECOND=32,MILLISECOND=127,ZONE_OFFSET=28800000,DST_OFFSET=0]20197202075732=============20205Thu May 20 19:57:32 CST 2021 SystemSystemæ˜¯æœ‰å…³äºç³»ç»Ÿçš„ç±»ï¼Œè¿™é‡Œä¸ä¼šä»‹ç»é‚£ä¹ˆé«˜æ·±çš„å†…å®¹ï¼Œä¸»è¦ä»‹ç»ä¸¤ä¸ªé™æ€æ–¹æ³• currentTimeMillis() è·å¾—å½“å‰ç³»ç»Ÿè·æ—¶é—´åŸç‚¹çš„æ¯«ç§’å€¼ è¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨æ¥è®¡ç®—ç¨‹åºæŸè€—çš„å®è·µ åœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œå‰è·å–ä¸€ä¸ªæ—¶é—´ï¼Œåœ¨ç¨‹åºæ‰§è¡Œå®Œæˆè·å–ä¸€ä¸ªæ—¶é—´ï¼Œä¸¤ä¸ªæ—¶é—´ç›¸å‡å°±å¯ä»¥çŸ¥é“ç¨‹åºæ‰§è¡Œçš„æ—¶é—´ï¼Œå°±å¯ä»¥çŸ¥é“ç¨‹åºçš„å“ªä¸€éƒ¨åˆ†æœ€è€—æ—¶ï¼Œä»è€Œåšå‡ºä¼˜åŒ– arraycopy() è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯å°†æºæ•°ç»„ä»æŒ‡å®šä½ç½®å¼€å§‹å¤åˆ¶ï¼Œæœ‰ä¸€ä¸ªå‚æ•°è§„å®šäº†å¤åˆ¶çš„é•¿åº¦ï¼Œå¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¹Ÿè§„å®šäº†èµ·å§‹çš„ä½ç½® è¯¥æ–¹æ³•æ¥æ”¶äº”ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæºæ•°ç»„srcï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æºæ•°ç»„çš„èµ·å§‹ä½ç½®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç›®çš„æ•°ç»„ï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯ç›®çš„æ•°ç»„çš„èµ·å§‹ä½ç½®ï¼Œç¬¬äº”ä¸ªå‚æ•°æ˜¯å¤åˆ¶çš„é•¿åº¦ å¦‚æœä½ åœ¨è¿™é‡Œæ²¡æœ‰ç†è§£ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ ä¸‹é¢ç®€å•æ¼”ç¤ºè¿™ä¸¤ä¸ªæ–¹æ³•çš„ä½¿ç”¨ import java.util.Arrays;public class TestSystem &#123; public static void main(String[] args) &#123; long start = System.currentTimeMillis(); //å¾ªç¯æ‰§è¡Œå‰è·å–ä¸€æ¬¡æ—¶é—´ int sum = 0; for (int i = 0; i &lt; 10000000; i++) &#123; //1000ä¸‡æ¬¡ sum = sum + i; &#125; long end = System.currentTimeMillis(); //å¾ªç¯ç»“æŸåè·å–ä¸€æ¬¡æ—¶é—´ double time = (end - start) / 1000.0; //å°†å•ä½è½¬åŒ–ä¸ºs System.out.println(\"å…±èŠ±è´¹\" + time + \"s\"); //æˆ‘ä»¬å°†æºæ•°ç»„çš„å‰ä¸‰ä¸ªå…ƒç´ æ›¿æ¢ç›®çš„æ•°ç»„çš„å‰ä¸‰ä¸ªå…ƒç´  int[] array1 = &#123;1, 2, 3, 4, 5&#125;; //æºæ•°ç»„ int[] array2 = &#123;6, 7, 8, 9, 10&#125;; //ç›®çš„æ•°ç»„ System.out.println(\"è½¬æ¢å‰\"); System.out.println(Arrays.toString(array1)); System.out.println(Arrays.toString(array2)); System.arraycopy(array1, 0, array2, 0, 3); //å‰ä¸‰ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥éƒ½æ˜¯ä»ç´¢å¼•0å¼€å§‹ System.out.println(\"è½¬æ¢å\"); System.out.println(Arrays.toString(array1)); System.out.println(Arrays.toString(array2)); &#125;&#125; è¾“å‡ºä¸º å…±èŠ±è´¹0.011sè½¬æ¢å‰[1, 2, 3, 4, 5][6, 7, 8, 9, 10]è½¬æ¢å[1, 2, 3, 4, 5][1, 2, 3, 9, 10] å¯è§ç¨‹åºæ˜¯æ‰§è¡Œçš„ç›¸å½“çš„å¿«ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"}]},{"title":"Javaé›†åˆä¸æ³›å‹","date":"2019-07-07T16:00:00.000Z","path":"/Javaé›†åˆä¸æ³›å‹/","text":"CollectionCollectionæ˜¯é›†åˆçš„æ„æ€ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹åšä¸€ç§è£…ä¸œè¥¿çš„å®¹å™¨ï¼Œå°±åƒæ•°ç»„ä¸€æ ·ã€‚å®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæœ‰å¾ˆå¤šçš„ç±»å®ç°äº†å®ƒï¼Œæ¯”å¦‚Arralistï¼ŒLinkedListï¼ŒHashMapï¼Œç­‰ç­‰å¾ˆå¤šã€‚ä¸åŒçš„ç±»ä½¿ç”¨ä¸åŒçš„æ–¹æ³•å»å®ç°ï¼Œæ‰€ä»¥ä»–ä»¬ä¹‹é—´çš„æŸäº›æ€§èƒ½æ˜¯ä¸åŒçš„ã€‚ Collectionä¸­çš„æ–¹æ³•æˆ‘ä»¬è¿™æ¬¡å­¦ä¹ çš„æ˜¯Collectionæ¥å£ä¸­çš„æ–¹æ³•ï¼Œè™½ç„¶å®ç°å®ƒçš„ç±»å¾ˆå¤šï¼Œä½†æ˜¯å®ƒä»¬å®ç°çš„æ–¹æ³•çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·ã€‚è¿™é‡Œä»‹ç»ä¸ƒä¸ªæ–¹æ³• add(E e) æ·»åŠ å…ƒç´  clear() æ¸…ç©ºé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´  remove(E e) åˆ é™¤å…ƒç´  contains(E e) æŸ¥çœ‹æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´  isEmpty() æŸ¥çœ‹æ•°ç»„æ˜¯å¦ä¸ºç©º size() è¿”å›é›†åˆçš„é•¿åº¦ï¼Œå³å…ƒç´ çš„ä¸ªæ•° toArray è¿”å›ä¸€ä¸ªOnjectç±»å‹çš„æ•°ç»„ ä¸‹é¢æˆ‘ä»¬ä»¥ArrayListä¸ºä¾‹æ¥å­¦ä¹ ä¸Šé¢çš„æ–¹æ³• import java.util.ArrayList;import java.util.Arrays;import java.util.Collection;public class TestCollection &#123; public static void main(String[] args) &#123; Collection&lt;String&gt; collection = new ArrayList&lt;&gt;(); //å¤šæ€å†™æ³• //æµ‹è¯•add collection.add(\"å¼ æ— å¿Œ\"); collection.add(\"ä»¤ç‹å†²\"); collection.add(\"éƒ­é–\"); collection.add(\"æ¨è¿‡\"); System.out.println(collection); //æµ‹è¯•contains System.out.println(collection.contains(\"æ¨è¿‡\")); //æµ‹è¯•size System.out.println(collection.size()); //æµ‹è¯•remove collection.remove(\"æ¨è¿‡\"); System.out.println(collection); //æµ‹è¯•toArray Object[] objects = collection.toArray(); System.out.println(Arrays.toString(objects)); //æµ‹è¯•clear collection.clear(); System.out.println(collection); System.out.println(collection.size()); &#125;&#125; æˆ‘ä»¬æ³¨æ„åˆ°æˆ‘ä»¬åˆ›å»ºCollectionå¯¹è±¡æ—¶ï¼Œä¸ä¸€èˆ¬ç±»ç›¸æ¯”åˆ›å»ºå¤šäº†&lt;&gt;ï¼Œè¿™ä¸ªå«åšæ³›å‹ã€‚æ˜¯ä»€ä¹ˆæ„æ€å‘¢? æˆ‘ä»¬å®šä¹‰æ•°ç»„çš„è¯æœ‰ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ¥å®šä¹‰ä¿å­˜ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼ŒåŒæ ·çš„Collectionä¹Ÿæœ‰ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ¥å†³å®šé‡Œé¢ä¿å­˜çš„æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ã€‚è€Œæ•°æ®ç±»å‹å°±æ˜¯å†™åœ¨é‡Œé¢ï¼Œç›®å‰æˆ‘ä»¬å°±è¿™ä¹ˆç†è§£æ³›å‹ï¼Œæœ‰å…³æ³›å‹æ›´åŠ è¯¦ç»†çš„ç”¨æ³•ï¼Œä¸‹é¢ä¼šè¿›è¡Œä»‹ç»ã€‚åœ¨=å·çš„å³è¾¹ä¹Ÿæœ‰&lt;&gt;å·ï¼Œä»JDK 1.7å¼€å§‹ï¼Œå³è¾¹çš„&lt;&gt;é‡Œé¢å¯ä»¥ä»€ä¹ˆéƒ½ä¸å†™ï¼Œä¹‹å‰é‡Œé¢ä¹Ÿè¦å†™æ•°æ®ç±»å‹ï¼Œä½†æ˜¯å’Œå³è¾¹çš„ä¸€æ ·ï¼Œæ‰€ä»¥æ²¡å¿…è¦åœ¨å†™ä¸€éã€‚å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ³›å‹ï¼ˆä¹Ÿå°±æ˜¯&lt;&gt;é‡Œé¢çš„æ•°æ®ç±»å‹ï¼‰å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹ã€‚ è¾“å‡ºä¸º [å¼ æ— å¿Œ, ä»¤ç‹å†², éƒ­é–, æ¨è¿‡]true4[å¼ æ— å¿Œ, ä»¤ç‹å†², éƒ­é–][å¼ æ— å¿Œ, ä»¤ç‹å†², éƒ­é–][]0 Iteratoræˆ‘ä»¬å¯¹é›†åˆä¸€ä¸ªé‡è¦çš„æ“ä½œå°±æ˜¯å¯¹é›†åˆè¿›è¡Œéå†ï¼Œä¸åŒäºæ•°ç»„ï¼Œé›†åˆä¸æ˜¯æ‰€æœ‰çš„éƒ½æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡ç´¢å¼•å¯¹é›†åˆè¿›è¡Œéå†ï¼Œé‚£æˆ‘ä»¬å°±åªèƒ½é€šè¿‡è¿­ä»£å™¨Iteratoræ¥éå†é›†åˆï¼ŒIteratorä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œé›†åˆæœ‰ä¸€ä¸ªiterator()æ–¹æ³•ï¼Œå¯ä»¥è·å–è¿­ä»£å™¨å®ç°ç±»çš„å¯¹è±¡ã€‚è¿­ä»£å™¨ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³• hasNext() åˆ¤æ–­é›†åˆä¸­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæœ‰åˆ™è¿”å›true next() å–å‡ºé›†åˆä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚ä½•é›†åˆä¸­æ²¡æœ‰å…ƒç´ ï¼Œä½¿ç”¨è¯¥æ–¹æ³•ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥åº”è¯¥å…ˆè¿›è¡Œåˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´  ä¸‹é¢æˆ‘ä»¬æ¥ç¤ºä¾‹ä½¿ç”¨æ–¹æ³• import java.util.Collection;import java.util.HashSet;public class TestIterator &#123; public static void main(String[] args) &#123; //HashSetæ˜¯ä¸€ä¸ªæ— åºçš„é›†åˆ Collection&lt;String&gt; collection = new HashSet&lt;&gt;(); collection.add(\"äºšç‘Ÿ\"); collection.add(\"å¦²å·±\"); collection.add(\"å®‰å…¶æ‹‰\"); collection.add(\"ç‹„ä»æ°\"); collection.add(\"æç™½\"); System.out.println(collection); &#125;&#125; è¾“å‡ºä¸º [æç™½, å¦²å·±, ç‹„ä»æ°, äºšç‘Ÿ, å®‰å…¶æ‹‰] å¯è§HashSetæ˜¯ä¸€ä¸ªæ— åºçš„é›†åˆï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ç´¢å¼•å»è·å–é›†åˆä¸­çš„å…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿­ä»£å™¨å»éå†é›†åˆä¸­çš„å…ƒç´  Iterator&lt;String&gt; iterator = collection.iterator(); //ç”±é›†åˆçš„iterator()æ–¹æ³•åˆ›å»ºè¿­ä»£å™¨while (iterator.hasNext()) &#123; //åˆ¤æ–­é›†åˆä¸­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´  String string = iterator.next(); //å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæ¯å–å‡ºä¸€ä¸ªå…ƒç´ ï¼ŒæŒ‡é’ˆå‘åç§»åŠ¨ System.out.println(string);&#125; è¾“å‡ºä¸º æç™½å¦²å·±ç‹„ä»æ°äºšç‘Ÿå®‰å…¶æ‹‰ foreachå¾ªç¯æˆ‘ä»¬çŸ¥é“ä¸èƒ½é€šè¿‡ä¸€èˆ¬çš„forå¾ªç¯å»éå†é›†åˆï¼Œæ‰€ä»¥Javaä¸­æœ‰ä¸€ä¸ªå¢å¼ºçš„forå¾ªç¯ï¼Œåˆ©ç”¨å®ƒå¯ä»¥éå†é›†åˆå’Œæ•°ç»„ï¼Œå®ƒçš„å®ç°åŸç†å°±æ˜¯è¿­ä»£å™¨çš„åŸç†ï¼Œä¸è¿‡ä½¿ç”¨çš„æ˜¯forå¾ªç¯çš„å½¢å¼ï¼Œæˆ‘ä»¬æŠŠå®ƒå«åšforeachå¾ªç¯ï¼Œæ ¼å¼å¦‚ä¸‹ for (å…ƒç´ ç±»å‹ å˜é‡å : é›†åˆ) å®ƒä¼šè‡ªåŠ¨çš„å–å‡ºé›†åˆä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸”èµ‹å€¼ç»™å˜é‡ï¼Œç„¶åä½ å°±å¯ä»¥åœ¨foreachå¾ªç¯ä¸­å¯¹å–å‡ºçš„å…ƒç´ è¿›è¡Œæ“ä½œäº†ï¼Œè¿˜æ˜¯ä»¥ä¸Šé¢çš„é›†åˆä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨foreachå¾ªç¯ for (String string : collection) &#123; System.out.println(string);&#125; è¾“å‡ºä¸º æç™½å¦²å·±ç‹„ä»æ°äºšç‘Ÿå®‰å…¶æ‹‰ æ³›å‹æ¦‚è¿°æ³›å‹æˆ‘ä»¬ä¹‹å‰åœ¨ä½¿ç”¨Collectioné›†åˆæ—¶å°±å·²ç»æ¥è§¦è¿‡ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šä½¿ç”¨æ³›å‹ï¼Œæ¯”å¦‚ä½ æ­£åœ¨å†™ä¸€ä¸ªé›†åˆç»™åˆ«äººä½¿ç”¨ï¼Œä½†æ˜¯ä½ ä¸çŸ¥é“åˆ«äººä¼šä¿å­˜ä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œä½ ä¸èƒ½å†™æ­»äº†è¯´åªèƒ½ä¿å­˜Stringç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘å°±ä¼šä½¿ç”¨æ³›å‹ï¼Œä¿å­˜ä»€ä¹ˆç±»å‹çš„æ•°æ®ç”±åˆ«äººè‡ªå·±è§‰å¾—ï¼Œå°±åƒæ•°ç»„ä¸€æ ·ã€‚ å¦‚æœçœç•¥æ³›å‹çš„è¯ï¼Œé‚£ä¹ˆé»˜è®¤ä¸ºObjectç±»å‹ï¼Œæ¯”å¦‚ä¸‹é¢æˆ‘åˆ›å»ºä¸€ä¸ªArrayListé›†åˆï¼Œæ²¡æœ‰å†™æ³›å‹ import java.util.ArrayList;public class GenericsDemo &#123; public static void main(String[] args) &#123; ArrayList list = new ArrayList(); list.add(\"AA\"); list.add(2); list.add('c'); for (int i = 0; i &lt; list.size(); i++) &#123; System.out.println(list.get(i)); &#125; &#125;&#125; è¾“å‡ºä¸º AA2c è¿™ä¸ªæ—¶å€™ArrayListé›†åˆçš„å¯¹è±¡èƒ½å¤Ÿæ·»åŠ ä»»ä½•çš„æ•°æ®ç±»å‹ï¼Œå› ä¸ºæ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿äº†Objectç±»ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹ä¼šè¿›è¡Œè‡ªåŠ¨è£…ç®±æ“ä½œè½¬åŒ–ä¸ºå¯¹åº”çš„åŒ…è£…ç±»ã€‚å…¶å®ä¸Šé¢å°±æ˜¯å¤šæ€çš„å†™æ³•ï¼Œè€Œå¤šæ€çš„å†™æ³•æˆ‘ä»¬ä¹ŸçŸ¥é“å®ƒçš„å¼Šç«¯ï¼Œä»–ä¸èƒ½è°ƒç”¨å­ç±»ç‰¹æœ‰çš„æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è°ƒç”¨å­ç±»çš„æ–¹æ³•çš„è¯å°±éœ€è¦å‘ä¸‹è½¬å‹ï¼Œè¿™å¾ˆå®¹æ˜“å‘ç”Ÿå¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™ã€‚å¹¶ä¸”ä¸€èˆ¬æˆ‘ä»¬åœ¨é›†åˆä¿å­˜ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›å‹ã€‚ä½¿ç”¨æ³›å‹çš„è¯è‡³å°‘æœ‰è¿™ä¸¤ä¸ªä¼˜ç‚¹ é¿å…äº†ç±»å‹è½¬æ¢çš„éº»çƒ¦ ç¼–è¯‘æ—¶å°±å¯ä»¥çœ‹åˆ°é”™è¯¯ å¦‚æœä¸€ä¸ªStringçš„ArrayListæ·»åŠ Integeræ•°æ®ï¼Œé‚£ä¹ˆç¼–è¯‘æ—¶å°±ä¼šæŠ¥é”™ æ³›å‹çš„å®šä¹‰ç±»æ³›å‹å®šä¹‰åœ¨ç±»ä¸­çš„æ ¼å¼åº”è¯¥å¦‚ä¸‹ public class ClassName&lt;E&gt; &#123; &#125; å…¶ä¸­Eå°±ä»£è¡¨æ³›å‹ï¼Œå®ƒä¼šåœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ç¡®å®šEæ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ¯”å¦‚ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™Eå°±æ˜¯Stringã€‚è¿™ä¹ˆå®šä¹‰ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç±»ä¸­çš„æ–¹æ³•ä¸­ä½¿ç”¨Eï¼Œå¦‚ public void method(E e) &#123; &#125; public E method() &#123; &#125; å¯ä»¥è®©å®ƒä½œä¸ºæ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œå¦‚æœåœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ä¼ å…¥çš„Eæ˜¯Stringï¼Œé‚£ä¹ˆè¿™äº›æ–¹æ³•çš„å‚æ•°æˆ–è€…è¿”å›å…¨éƒ¨éƒ½æ˜¯Stringç±»å‹çš„ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åšEæ˜¯ä¸€ä¸ªæ¥æ”¶ç±»ç±»å‹çš„å˜é‡ã€‚ æ–¹æ³•æ–¹æ³•ä¸­å®šä¹‰æ³›å‹ï¼Œæ ¼å¼å¦‚ä¸‹ ä¿®é¥°ç¬¦ &lt;æ³›å‹&gt; è¿”å›å€¼ æ–¹æ³•å(å‚æ•°åˆ—è¡¨) &#123; &#125; æ¯”å¦‚ä¸‹é¢è¿™ä¹ˆå®šä¹‰ public &lt;M&gt; void method (M m) &#123; &#125; æ³›å‹ä¼šåœ¨è°ƒç”¨æ–¹æ³•æ—¶ç¡®å®šï¼Œæ¯”å¦‚ä¼ å…¥çš„æ˜¯ä¸€ä¸ªStringç±»å‹çš„å‚æ•°ï¼Œé‚£ä¹ˆMå°±æ˜¯Stringã€‚ æ¥å£åœ¨æ¥å£ä¸­å®šä¹‰çš„æ ¼å¼å¦‚ä¸‹ public interface InterfaceName&lt;E&gt; &#123; &#125; å®ç°ç±»å®ç°æ¥å£å¯ä»¥æŒ‡å®šæ³›å‹æ˜¯ä»€ä¹ˆæˆ–è€…ä¸æŒ‡å®šï¼Œå°±æ˜¯è¿™ä¸ªæ„æ€ æŒ‡å®š å®ç°ç±» implements InterfaceName&lt;String&gt; &#123; &#125; ä¸æŒ‡å®š å®ç°ç±»&lt;E&gt; implements InterfaceName&lt;E&gt; é€šé…ç¬¦å‡è®¾æˆ‘è¦å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¾“å…¥ä¸€ä¸ªArrayListå¯¹è±¡ï¼Œè¦æ±‚æ‰“å°è¾“å…¥åˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ ï¼Œä½†æ˜¯ArrayListæ˜¯ä»€ä¹ˆç±»å‹çš„ä¸çŸ¥é“ï¼Œæ‰€ä»¥æ–¹æ³•å‚æ•°ç±»å‹ä¸èƒ½å†™æ­»ï¼Œä¸èƒ½è¿™ä¹ˆå†™ public void method(ArrayList&lt;String&gt; list) &#123; &#125; ä½†æ˜¯æˆ‘ä»¬åœ¨ä¸Šé¢å­¦äº†æ–¹æ³•çš„æ³›å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ public &lt;E&gt; void method(ArrayList&lt;E&gt; list) &#123; &#125; Javaåœä¾›äº†ä¸€ç§æ›´åŠ æ–¹é¢çš„å†™æ³•ï¼Œå³ä½¿ç”¨é€šé…ç¬¦ public void show(ArrayList&lt;?&gt; list) &#123; &#125; å…¶ä¸­?ä»£è¡¨çš„å°±æ˜¯é€šé…ç¬¦ï¼ŒæŒ‡çš„å°±æ˜¯èƒ½å¤ŸåŒ¹é…ä»»ä½•çš„æ•°æ®ç±»å‹ã€‚ ä¸ä»…å¦‚æ­¤æˆ‘ä»¬è¿˜èƒ½å¤Ÿå¯¹é€šé…ç¬¦è¿›è¡Œé™å®šï¼Œå¦‚ ? extends E è¯´æ˜å‚æ•°çš„ç±»å‹å¿…é¡»æ˜¯Eçš„å­ç±»æˆ–è€…Eæœ¬èº« ? super E è¯´æ˜å‚æ•°çš„ç±»å‹å¿…é¡»æ˜¯Eçš„çˆ¶ç±»æˆ–è€…Eæœ¬èº« æ¯”å¦‚ä¸‹é¢ import java.util.ArrayList;public class TestTongpeifu &#123; //æ¥æ”¶çš„ç±»å‹å¿…é¡»ä¸ºNumberç±»çš„å­ç±»æˆ–è€…Numberç±»æœ¬èº« public static void show(ArrayList&lt;? extends Number&gt; list) &#123; System.out.println(list); &#125; //æ¥æ”¶çš„ç±»å‹å¿…é¡»ä¸ºNumberç±»çš„çˆ¶ç±»æˆ–è€…Numberç±»æœ¬èº« public static void show2(ArrayList&lt;? super Number&gt; list) &#123; System.out.println(list); &#125; public static void main(String[] args) &#123; ArrayList&lt;Integer&gt; list1 = new ArrayList&lt;&gt;(); ArrayList&lt;String&gt; list2 = new ArrayList&lt;&gt;(); ArrayList&lt;Object&gt; list3 = new ArrayList&lt;&gt;(); ArrayList&lt;Number&gt; list4 = new ArrayList&lt;&gt;(); show(list1); //Intergeræ˜¯Numberçš„å­ç±»ï¼Œå¯ä»¥ show(list2); //Stringç±»ä¸Numberç±»æ²¡æœ‰å…³ç³»ï¼ŒæŠ¥é”™ show(list3); //Objectä¸æ˜¯Numberçš„å­ç±»ï¼ŒæŠ¥é”™ show(list4); //Numberæœ¬èº«ï¼Œå¯ä»¥ show2(list1); //Intergeræ˜¯å­ç±»ï¼ŒæŠ¥é”™ show2(list2); //Stringæ²¡å…³ç³»ï¼ŒæŠ¥é”™ show2(list3); //Objectæ˜¯çˆ¶ç±»ï¼Œå¯ä»¥ show2(list4); //Numberæœ¬èº«ï¼Œå¯ä»¥ &#125;&#125; ä¸æˆ‘ä»¬åˆ†æçš„ä¸€è‡´ã€‚ ListListæ¥å£æ˜¯Collectionçš„å­æ¥å£ï¼Œå®ç°å®ƒçš„ç±»æœ‰ArrayListå’ŒLinkedListï¼ŒArrayListçš„åº•å±‚å®ç°åŸç†æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥å®ƒçš„æŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å®ƒçš„å¢åˆ æ“ä½œå¾ˆæ…¢ï¼ŒLinkedListçš„åº•å±‚å®ç°åŸç†æ˜¯é“¾è¡¨ï¼Œæ‰€ä»¥å®ƒçš„æŸ¥è¯¢æ“ä½œå¾ˆæ…¢ï¼Œå®ƒçš„å¢åˆ æ“ä½œå¾ˆå¿«ã€‚ Listé›†åˆçš„ç‰¹ç‚¹Listæ¥å£çš„ç‰¹ç‚¹æœ‰ æœ‰åºï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´  é›†åˆä¸­çš„å…ƒç´ å…è®¸é‡å¤ å› ä¸ºListæ¥å£å¯ä»¥æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥é™¤äº†Collectionä¸­çš„æ–¹æ³•ï¼ŒListè¿˜æœ‰å…¶ç‰¹æœ‰çš„æ–¹æ³•å¦‚ä¸‹ add(int index, E e) åœ¨æŒ‡å®šç´¢å¼•ä¸­çš„ä½ç½®æ·»åŠ å…ƒç´ ï¼Œåé¢çš„å…ƒç´ å‘åæ¨ç§» remove(int index) åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼Œå¹¶ä¸”è¿”å›åˆ é™¤çš„å…ƒç´  get(int index) è·å¾—æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´  set(int index, E e) å°†ç´¢å¼•å¤„ä¸ºå…ƒç´ æ›¿æ¢ä¸ºe ä¸‹é¢ç¤ºä¾‹ä¸Šé¢çš„å››ä¸ªæ–¹æ³• import java.util.ArrayList;import java.util.List;public class TestList &#123; public static void main(String[] args) &#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(1); list.add(5); list.add(7); System.out.println(list); //[1, 5, 7] //add(int index, E e) list.add(2,8); //åœ¨ç´¢å¼•ä¸º2çš„åœ°æ–¹æ’å…¥8 System.out.println(list); //[1, 5, 8, 7] //get(int index) int num1 = list.get(1); //è·å¾—ç´¢å¼•ä¸º1çš„å…ƒç´  System.out.println(num1); //5 //set(int index, E e) list.set(0, 4); //è®¾ç½®ç´¢å¼•ä¸º0çš„å…ƒç´ ä¸º4 System.out.println(list); //[4, 5, 8, 7] int num2 = list.remove(2); //åˆ é™¤ç´¢å¼•ä¸º2çš„å…ƒç´  System.out.println(list); //[4, 5, 7] &#125;&#125; Listçš„éå†å› ä¸ºListé›†åˆæ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥è¿›è¡Œéå† æ™®é€šforå¾ªç¯ è¿­ä»£å™¨ å¢å¼ºforå¾ªç¯ ä¸‹é¢è¿›è¡Œç¤ºä¾‹ //æ™®é€šforå†™æ³•for (int i = 0; i &lt; list.size(); i++) &#123; System.out.println(list.get(i));&#125;//è¿­ä»£å™¨å†™æ³•Iterator&lt;Integer&gt; iterator = list.iterator();while (iterator.hasNext()) &#123; Integer i = iterator.next(); System.out.println(i);&#125;//å¢å¼ºforå†™æ³•for (Integer i : list) &#123; System.out.println(i);&#125; ArrayListArrayListåœ¨ä¹‹å‰æˆ‘ä»¬è®²è§£Collectionæ—¶å°±æœ‰æ¥è§¦åˆ°ï¼Œæ‰€ä»¥è¿™é‡Œå°±ç®€å•çš„ä»‹ç»å®ƒã€‚ArrayListé›†åˆçš„ä½¿ç”¨éå¸¸çš„ç®€å•ï¼Œåœ¨ä¸Šé¢å·²ç»æ¼”ç¤ºè¿‡äº†ï¼Œå¹¶ä¸”å®ƒçš„æ–¹æ³•éƒ½æ˜¯å®ç°Listé‡Œé¢çš„æ–¹æ³•ï¼Œè€Œè¿™äº›æ–¹æ³•çš„ä½¿ç”¨åœ¨ä¸Šé¢å·²ç»äº†è§£äº†ï¼Œä¸‹é¢çœ‹çœ‹ArrayListç®€å•ä¾‹å­å³å¯ã€‚ import java.util.ArrayList;public class TestArrayList &#123; public static void main(String[] args) &#123; //åˆ›å»ºä¸€ä¸ªArrayListå¯¹è±¡ é‡Œé¢ä¿å­˜çš„éƒ½æ˜¯Stringç±»å‹ ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(); //å‘åˆ—è¡¨ä¸­æ·»åŠ ä¸‰ä¸ªå…ƒç´  list.add(\"å¼ ä¸‰\"); list.add(\"æå››\"); list.add(\"ç‹äº”\"); //æ‰“å°åˆ—è¡¨ System.out.println(list); //ArrayListå¯¹toString()æ–¹æ³•é‡å†™äº†ï¼Œæ‰€ä»¥æ‰“å°è¾“å‡ºä¸æ˜¯åœ°å€å€¼ //è·å–åˆ—è¡¨é‡Œé¢çš„å…ƒç´  System.out.println(\"åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š\" + list.get(0)); System.out.println(\"åˆ—è¡¨çš„ç¬¬äºŒä¸ªå…ƒç´ ä¸ºï¼š\" + list.get(1)); System.out.println(\"åˆ—è¡¨çš„ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸ºï¼š\" + list.get(2)); System.out.println(\"åˆ—è¡¨çš„é•¿åº¦ä¸ºï¼š\" + list.size()); //è·å–åˆ—è¡¨çš„é•¿åº¦ System.out.println(\"===============\"); //åˆ é™¤ System.out.println(\"åˆ é™¤çš„å…ƒç´ ä¸ºï¼š\" + list.remove(1)); //åˆ é™¤ç¬¬äºŒä¸ªå…ƒç´ ï¼Œå³åˆ é™¤æå›› System.out.println(\"åˆ—è¡¨çš„é•¿åº¦ä¸ºï¼š\" + list.size()); //åˆ—è¡¨çš„é•¿åº¦ System.out.println(list); &#125;&#125; è¾“å‡ºä¸ºï¼š [å¼ ä¸‰, æå››, ç‹äº”]åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼šå¼ ä¸‰åˆ—è¡¨çš„ç¬¬äºŒä¸ªå…ƒç´ ä¸ºï¼šæå››åˆ—è¡¨çš„ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸ºï¼šç‹äº”åˆ—è¡¨çš„é•¿åº¦ä¸ºï¼š3===============åˆ é™¤çš„å…ƒç´ ä¸ºï¼šæå››åˆ—è¡¨çš„é•¿åº¦ä¸ºï¼š2[å¼ ä¸‰, ç‹äº”] ä¸Šé¢ä»£ç çš„æ³¨é‡Šå·²ç»è¯¦ç»†è¯´æ˜ä¸Šé¢ä»£ç çš„åŠŸèƒ½ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹ä¸€ä¸ªç‰¹åˆ«çš„åœ°æ–¹ã€‚å½“æˆ‘ä»¬æ‰“å°æ•°ç»„åæ—¶ï¼Œä¼šå¾—åˆ°æ•°ç»„çš„åœ°å€ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ‰“å°ArrayListå¯¹è±¡ï¼Œè¾“å‡ºçš„ä¸æ˜¯åœ°å€ï¼Œè€Œæ˜¯é‡Œé¢çš„å…ƒç´ ï¼Œè¿™æ˜¯å› ä¸ºArrayListé‡å†™äº†toString()æ–¹æ³•ï¼Œå½“System.out.println()é‡Œé¢ä¼ å…¥çš„æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œä¼šè°ƒç”¨è¯¥å¼•ç”¨ç±»å‹çš„toStringæ–¹æ³•ï¼Œç”±äºArrayListé‡å†™äº†toString()æ–¹æ³•ï¼Œæ‰€ä»¥æ‰“å°è¾“å‡ºçš„ä¸æ˜¯åœ°å€ï¼Œæ²¡æœ‰é‡å†™è¯¥æ–¹æ³•çš„ç±»ï¼Œæ‰“å°è¾“å‡ºé»˜è®¤æ˜¯åœ°å€ã€‚å¦‚æœåœ¨è¿™é‡Œä½ æä¸æ‡‚ä»€ä¹ˆé‡å†™ï¼ŒtoString()æ–¹æ³•éƒ½æ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆæ²¡å…³ç³»ï¼Œä½ åªè¦çŸ¥é“ç›´æ¥æ‰“å°ArrayListå¯¹è±¡åï¼Œè¾“å‡ºçš„ä¸æ˜¯åœ°å€ï¼Œè€Œæ˜¯é‡Œé¢åŒ…å«çš„æ‰€æœ‰å…ƒç´ ï¼Œå…·ä½“é‡å†™æ˜¯ä»€ä¹ˆï¼ŒtoString()æ˜¯ä»€ä¹ˆï¼Œåœ¨åé¢çš„ç»§æ‰¿éƒ¨åˆ†å°†ä¼šæœ‰é˜è¿°ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ³›å‹åªèƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³è¦ä¿å­˜åŸºæœ¬æ•°æ®ç±»å‹æ€ä¹ˆåŠã€‚å½“ç„¶æ˜¯æœ‰åŠæ³•çš„ï¼ŒJavaä¸­ä¸ºæ¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹æä¾›äº†ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå®ƒè™½ç„¶æ˜¯ä¸€ä¸ªç±»ï¼Œä½†æ˜¯ä½ åœ¨ä½¿ç”¨æ—¶å®Œå…¨æŠŠå®ƒå½“åšåŸºæœ¬æ•°æ®ç±»å‹å°±å¯ä»¥ï¼Œå› ä¸ºæ³›å‹é‡Œé¢ä¸èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ‰ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªåŒ…è£…ç±»ã€‚ä¸‹è¡¨æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ä¸åŒ…è£…ç±»å¯¹åº”çš„åç§° åŸºæœ¬æ•°æ®ç±»å‹ åŒ…è£…ç±» byte Byte short Short int Integer long Long float Float double Double char Character boolean Boolean ä¸Šé¢é™¤äº†intå’Œcharå¯¹åº”çš„åŒ…è£…ç±»ä¸åªæ˜¯é¦–å­—æ¯å¤§å†™ï¼Œå…¶ä»–éƒ½æ˜¯åªè¦é¦–å­—æ¯å¤§å†™å³å¯ã€‚ä¸‹é¢æˆ‘å°†æ¼”ç¤ºå¦‚ä½•å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä»¥intç±»å‹ä¸ºä¾‹ import java.util.ArrayList;public class BasicDataToArrayList &#123; public static void main(String[] args) &#123; ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); //æŠŠIntegerå½“åšintçœ‹å¾…å³å¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦new ä¸€ä¸ªIntegerå¯¹è±¡ ç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬åšå¤„ç†ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒ list.add(100); list.add(25); list.add(15); //æ‰“å°åˆ—è¡¨ System.out.println(list); &#125;&#125; è¾“å‡ºä¸º [100, 25, 15] åœ¨åŸºæœ¬æ•°æ®ç±»å‹ä¸åŒ…è£…ç±»ä¹‹é—´æœ‰è‡ªåŠ¨è£…æ¢ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºåŒ…è£…ç±»çš„è¿‡ç¨‹å«åšè£…ç®±ï¼ŒåŒ…è£…ç±»è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹çš„è¿‡ç¨‹å«åšæ‹†ç®±ï¼Œä»JDK 1.5å¼€å§‹å°±æ”¯æŒè‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±ã€‚å³æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ Interger a = 12; //è‡ªåŠ¨è£…ç®± int -- Intergerint b = a; //è‡ªåŠ¨æ‹†ç®± Interger -- int æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶æŠŠIntergerçœ‹åšintå°±å¯ä»¥äº†ã€‚ LinkedListLinkedListæ˜¯Listçš„å®ç°ç±»ï¼Œå®ƒçš„åº•å±‚åŸç†æ˜¯åŸºäºé“¾è¡¨å®ç°çš„ï¼Œæ‰€ä»¥é™¤äº†Listæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå®ƒè¿˜æä¾›äº†å¾ˆå¤šä¸å¤´å°¾æœ‰å…³çš„æ–¹æ³•ï¼Œå¦‚ addFirst addLast removeFirst removeLast getFirst getLast push åŒaddFirstä¸€æ · pop åŒremoveFirst ä¸‹é¢è¿›è¡Œç¤ºèŒƒ import java.util.LinkedList;public class TestLinkedList &#123; public static void main(String[] args) &#123; LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;(); linkedList.add(\"AAA\"); linkedList.add(\"BBB\"); //addFirst åœ¨\"AAA\"å‰é¢æ·»åŠ å…ƒç´ \"CCC\" linkedList.addFirst(\"CCC\"); System.out.println(linkedList); //[CCC, AAA, BBB] //push åœ¨\"CCC\"å‰é¢æ·»åŠ \"DDD\" linkedList.push(\"DDD\"); System.out.println(linkedList); //[DDD, CCC, AAA, BBB] //pop åˆ é™¤\"DDD\" System.out.println(linkedList.pop()); //DDD //è·å¾—ç¬¬ä¸€ä¸ªå…ƒç´  getFirst System.out.println(linkedList.getFirst()); //CCC //removeFirst åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´  System.out.println(linkedList.removeFirst()); //CCC System.out.println(linkedList); //[AAA, BBB] //removeLast åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´  System.out.println(linkedList.removeLast()); //BBB System.out.println(linkedList); //[AAA] &#125;&#125; åŸºæœ¬ç±»å‹ä¸åŒ…è£…ç±»åœ¨å‰é¢æˆ‘ä»¬å°±è®²è¿‡è¿™ä¸ªæ¦‚å¿µï¼Œä¸è¿‡å½“æ—¶è®²çš„ä¸å¤Ÿè¯¦ç»†ï¼Œç°åœ¨æ·±å…¥è®²è§£ã€‚é¦–å…ˆæˆ‘ä»¬çŸ¥é“åŒ…è£…ç±»æ˜¯ä»€ä¹ˆï¼Œå› ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å®ƒä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œè€Œç”±äºæ³›å‹å¿…é¡»æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥æ‰æœ‰åŒ…è£…ç±»ã€‚åŒ…è£…ç±»å°±æ˜¯å°†åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ä¸ºä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»æˆ‘ä»¬å®Œå…¨å¯ä»¥å½“åšåŸºæœ¬æ•°æ®ç±»å‹ä½¿ç”¨ï¼Œå¹¶ä¸”åŒ…è£…ç±»é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ä¸€äº›æ–¹æ³•ç”¨æ³•æ“ä½œåŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¿™æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ‰€æ²¡æœ‰çš„ã€‚ è£…ç®±ä¸æ‹†ç®±é¦–å…ˆæˆ‘ä»¬å°†å¦‚ä½•è¿›è¡Œè£…ç®±æ“ä½œï¼Œå³å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¯¹è±¡çš„åŒ…è£…ç±»ï¼Œä¸‹é¢å…¨éƒ¨ä»¥Integerä¸ºä¾‹ï¼Œå…¶ä½™çš„åŒç†ï¼ŒIntegerå¯¹è±¡çš„åˆ›å»ºæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡æ„é€ æ–¹æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡Integerçš„ä¸€ä¸ªé™æ€æ–¹æ³• æ„é€ æ–¹æ³• Interger(int value) æ¥æ”¶ä¸€ä¸ªintç±»å‹çš„æ•°å€¼ Interger(String str) æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²è¦ç¬¦åˆè§„å®šçš„æ ¼å¼ï¼Œå¦‚â€100â€ é™æ€æ–¹æ³• valueOf() æ¥æ”¶çš„å‚æ•°åŒæ„é€ æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å­—ç¬¦ä¸²ç±»å‹çš„å‚æ•° ä¸‹é¢æ¼”ç¤ºå¦‚ä½•åˆ›å»ºIntergerå¯¹è±¡ Integer in1 = new Integer(2);Integer in2 = new Integer(\"20\");Integer in3 = Integer.valueOf(200);Integer in4 = Integer.valueOf(\"2000\");System.out.println(in1 + \" \" + in2 + \" \" + in3 + \" \" + in4); è¾“å‡ºä¸º 2 20 200 2000 é‚£å¦‚ä½•é€šè¿‡åŒ…è£…ç±»å¾—åˆ°ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹å‘¢ï¼Ÿé€šè¿‡intValueæ–¹æ³•ï¼Œå¦‚ä¸‹ int i = in1.intValue();System.out.println(i); è¾“å‡ºä¸º 2 è‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±è‡ªä»JDK 1.5ä»¥åå°±å®ç°äº†è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ï¼Œå¯ä»¥ç›´æ¥æŠŠåŸºæœ¬æ•°æ®ç±»å‹èµ‹å€¼ç»™åŒ…è£…ç±»ï¼Œä¹Ÿå¯ä»¥æŠŠåŒ…è£…ç±»ç›´æ¥èµ‹å€¼ç»™åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚ä¸‹ Integer num = 10; //è‡ªåŠ¨è£…ç®± ç›¸å½“äº Integer num = new Interger(10) ä¸è¿‡ç°åœ¨æ˜¯è‡ªåŠ¨è¿›è¡Œçš„äº†int i = num; //è‡ªåŠ¨æ‹†ç®± ç›¸å½“äº int i = num.intValue() åŸºæœ¬æ•°æ®ç±»å‹ä¸å­—ç¬¦ä¸²ç±»å‹ç›¸äº’è½¬æ¢åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹ + â€œâ€,å¦‚100 + â€œâ€å¾—åˆ°â€100â€ åŒ…è£…ç±»çš„toString(å‚æ•°)ï¼Œè¿™ä¸ªä¸æ˜¯Onjectçš„toString()æ–¹æ³•ï¼Œå› ä¸ºå®ƒæœ‰å‚æ•°ï¼Œä¸æ˜¯é‡å†™ å¦‚Integer.toString(100)å¾—åˆ°â€100â€ Stringç±»çš„valueOf(å‚æ•°)æ–¹æ³•ï¼Œå¦‚String.valueOf(100)å¾—åˆ°â€100â€ å­—ç¬¦ä¸²è½¬åŸºæœ¬æ•°æ®ç±»å‹ åŒ…è£…ç±»çš„parseXxxï¼Œå¦‚Integer.parseInt(â€œ100â€)å¾—åˆ°åŸºæœ¬æ•°æ®ç±»å‹100 SetSetæ¥å£ä¹Ÿæ˜¯Collectionçš„å­æ¥å£ï¼Œå®ƒçš„å®ç°ç±»æœ‰HaseSetï¼ŒLinkedHashSetï¼ŒHashSetæ˜¯æ— åºçš„ï¼ŒLinkedHashSetæ˜¯æœ‰åºçš„ã€‚ Seté›†åˆçš„ç‰¹ç‚¹ é›†åˆä¸­çš„å…ƒç´ ä¸èƒ½é‡å¤ æ²¡æœ‰ç´¢å¼• ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ import java.util.HashSet;import java.util.Set;public class TestSet &#123; public static void main(String[] args) &#123; Set&lt;Integer&gt; set = new HashSet&lt;&gt;(); set.add(1); set.add(3); set.add(2); set.add(1); System.out.println(set); //æ— åºä¸”ä¸èƒ½é‡å¤ [1, 2, 3] &#125;&#125; å¯è§é›†åˆçš„é¡ºåºä¸æ·»åŠ çš„é¡ºåºæ— å…³ï¼Œå¹¶ä¸”æ·»åŠ é‡å¤çš„å…ƒç´ æ˜¯ä¸è¡Œçš„ã€‚ Seté›†åˆä¸èƒ½æ·»åŠ é‡å¤å…ƒç´ çš„åŸç†ï¼šSeté›†åˆçš„åº•å±‚åŸç†æ˜¯Hashè¡¨ï¼Œé¦–å…ˆä¼šæ ¹æ®è¦æ·»åŠ çš„å…ƒç´ è®¡ç®—å‡ºå®ƒçš„å“ˆå¸Œå€¼ï¼Œæ ¹æ®å“ˆå¸Œå€¼æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œæ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ï¼Œå…ƒç´ ä¼šæ·»åŠ åˆ°æ•°ç»„é‡Œé¢çš„é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ä¸­ã€‚ä¸€èˆ¬ä¸åŒçš„å…ƒç´ ä¼šæ·»åŠ åˆ°æ•°ç»„çš„ä¸åŒç´¢å¼•ä¸­ï¼Œå³ä¸åŒçš„é“¾è¡¨æˆ–çº¢é»‘æ ‘ä¸­ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½è™½ç„¶å…ƒç´ ä¸åŒï¼Œä½†æ˜¯å®ƒä»¬çš„å“ˆå¸Œå€¼ç›¸åŒï¼Œè¿™ä¸ªå°±å«åšå“ˆå¸Œå†²çªã€‚å¦‚æœå‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼Œé‚£ä¹ˆä¼šä½¿ç”¨equals()æ–¹æ³•åˆ¤æ–­è¯¥é“¾è¡¨æˆ–çº¢é»‘æ ‘ä¸­æ˜¯å¦å­˜åœ¨ä¸è¿™ä¸ªå…ƒç´ ç›¸åŒçš„å…ƒç´ ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆå°±ä¸æ·»åŠ ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±æ·»åŠ ã€‚ æ‰€ä»¥å¦‚æœä½ è¦æ·»åŠ è‡ªå®šä¹‰çš„ç±»å‹ï¼Œé‚£ä¹ˆå°±è¦é‡å†™Objectç±»çš„hashCode()æ–¹æ³•å’Œequals()æ–¹æ³•ã€‚ Seté›†åˆçš„éå†Setç”±äºå®ƒæ˜¯æ— åºçš„ï¼Œæ‰€ä»¥å®ƒä¸èƒ½ä½¿ç”¨æ™®é€šforå¾ªç¯éå†ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨ è¿­ä»£å™¨ å¢å¼ºfor ç”±äºä¸Listå·®ä¸å¤šï¼Œè¿™é‡Œå°±ä¸åœ¨æ¼”ç¤ºäº†ã€‚ LinkedHashSetLinkedHashSetæ˜¯HashSetçš„å­ç±»ï¼Œä½†æ˜¯å®ƒæ˜¯æœ‰åºçš„ã€‚å¦‚ import java.util.LinkedHashSet;import java.util.Set;public class TestLinkedHashSet &#123; public static void main(String[] args) &#123; Set&lt;String&gt; set = new LinkedHashSet&lt;&gt;(); set.add(\"aaa\"); set.add(\"ccc\"); set.add(\"bbb\"); System.out.println(set); //[aaa, ccc, bbb] ä¸æ·»åŠ çš„é¡ºåºç›¸åŒ &#125;&#125; å¯å˜å‚æ•°å¯å˜å‚æ•°æŒ‡çš„æ–¹æ³•èƒ½å¤Ÿæ¥å—çš„å‚æ•°å¯ä»¥ä¸ºå¤šä¸ªï¼Œå®šä¹‰æ ¼å¼å¦‚ä¸‹ æ•°æ®ç±»å‹... å˜é‡å å®ƒçš„åº•å±‚åŸç†æ˜¯æ•°ç»„ï¼Œä¼šæŠŠè¿™å¤šä¸ªå…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚å‡è®¾ä¸‹é¢æ–¹æ³•æ¥å—å¤šä¸ªæ•´æ•°ç±»å‹çš„å‚æ•°ï¼Œä½†æ˜¯ä¸çŸ¥é“èƒ½æ¥å—å¤šå°‘ä¸ªï¼Œç„¶åæ‰“å°å‡ºè¿™äº›æ•°çš„å’Œï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿™ä¹ˆå†™ public class TestKebiancanshu &#123; public static void sum(int... ints) &#123; //intså°±æ˜¯ä¸€ä¸ªæ•°ç»„ int sum = 0; for (int i = 0; i &lt; ints.length; i++) &#123; sum += ints[i]; &#125; System.out.println(sum); &#125; public static void main(String[] args) &#123; sum(1,2,3); //å¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ä¼  sum(1,5,7,8); &#125;&#125; è¾“å‡ºä¸º 621 æ³¨æ„ï¼š ä¸€ä¸ªæ–¹æ³•åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å‚æ•° ä¸€ä¸ªæ–¹æ³•å¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼Œå¯å˜å‚æ•°è¦å†™åœ¨æœ«å°¾ CollectionsCollectionsæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œå®ƒæä¾›äº†å¾ˆå¤šçš„é™æ€æ–¹æ³•ç”¨æ¥å¯¹Collectioné›†åˆè¿›è¡Œæ“ä½œã€‚æˆ‘ä»¬ä¸‹é¢å°±ç®€å•ä»‹ç»Collectionsç±»çš„ä¸‰ä¸ªæ–¹æ³• addAll(Collection&lt;? super T&gt; c, Tâ€¦ elements) æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºCollectioné›†åˆï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯å˜å‚æ•° ä¸ºé›†åˆæ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œå¦‚addAll(list, 1, 2, 3) shuffle(List&lt;?&gt; list) æ¥æ”¶ä¸€ä¸ªListé›†åˆï¼Œå°†é›†åˆé‡Œé¢çš„å…ƒç´ éšæœºæ‰“ä¹± sort(List&lt;T&gt; list) æ¥æ”¶ä¸€ä¸ªlisté›†åˆï¼Œå°†æŒ‰ç…§é»˜è®¤å‡åºçš„è§„åˆ™æ’åº å¦‚æœé›†åˆé‡Œé¢è£…çš„æ˜¯è‡ªå®šä¹‰çš„ç±»çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥ç±»è¦å®ç°Comaprableæ¥å£ï¼Œå¹¶ä¸”è¦é‡å†™compareTo()æ–¹æ³• sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c) æ¥æ”¶ä¸€ä¸ªListé›†åˆå’Œä¸€ä¸ªå®ç°Comparatoræ¥å£çš„ç±»çš„å¯¹è±¡ï¼Œå¯ä»¥ä¼ å…¥åŒ¿åç±» ä¸‹é¢æ¼”ç¤ºæ–¹æ³•çš„ä½¿ç”¨ addAll List&lt;Integer&gt; list1 = new ArratList&lt;&gt;();Collections.addAll(list1, 1, 2, 3);System.out.println(list1); //[1, 2, 3] shuffle List&lt;Integer&gt; list2 = new ArrayList&lt;&gt;();Collections.addAll(list2, 1, 2, 3, 4, 5, 6);Collections.shuffle(list2);System.out.println(list2); //[6, 4, 3, 5, 2, 1] sort(List&lt;T&gt; list) //å…ˆæ¼”ç¤ºå¯¹Integerç±»çš„æ’åºList&lt;Integer&gt; list3 = new ArrayList&lt;&gt;();Collections.addAll(list3, 1, 7, 10, 5, 6, 4);Collections.sort(list3);System.out.println(list3); //[1, 4, 5, 6, 7, 10] ä¸‹é¢æ¼”ç¤ºè‡ªå®šä¹‰ç±»çš„æ’åºï¼Œé¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªPersonç±»ï¼Œå®ƒæœ‰nameå’Œageå±æ€§ï¼Œæˆ‘ä»¬æ ¹æ®ageçš„å¤§å°è¿›è¡Œå‡åºæ’åºï¼Œå¦‚ä¸‹ public class Person implements Comparable&lt;Person&gt; &#123; String name; int age; public Person(String name, int age) &#123; this.name = name; this.age = age; &#125; @Override public int compareTo(Person o) &#123; //å‡åº return this.age - o.age; //é™åºo.age - this.age &#125; @Override public String toString() &#123; return \"Person&#123;\" + \"name='\" + name + '\\'' + \", age=\" + age + '&#125;'; &#125;&#125; æµ‹è¯•è¯¥ç±» Person p1 = new Person(\"å¤åŠ›å¨œæ‰\",20);Person p2 = new Person(\"è¿ªä¸½çƒ­å·´\", 18);Person p3 = new Person(\"åˆ˜äº¦è²\", 21);List&lt;Person&gt; list4 = new ArrayList&lt;&gt;();Collections.addAll(list4, p1, p2, p3);Collections.sort(list4);System.out.println(list4); è¾“å‡ºä¸º [Person&#123;name='è¿ªä¸½çƒ­å·´', age=18&#125;, Person&#123;name='å¤åŠ›å¨œæ‰', age=20&#125;, Person&#123;name='åˆ˜äº¦è²', age=21&#125;] sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c) è¿™æ¬¡æˆ‘ä»¬ä¸éœ€è¦å®ç°Comparableæ¥å£ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªComparatorçš„å®ç°ç±»å¯¹è±¡å°±å¯ä»¥ï¼Œè¯¥ç±»é‡å†™Comparatorä¸­çš„compareæ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­è§„å®šäº†æ’åºçš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªåŒ¿åç±» List&lt;Person&gt; list5 = new ArrayList&lt;&gt;();Collections.addAll(list5, p1, p2, p3);Collections.sort(list5, new Comparator&lt;Person&gt;() &#123; @Override public int compare(Person o1, Person o2) &#123; //å‡åº return o1.age - o2.age; &#125;&#125;);System.out.println(list5); è¾“å‡ºä¸º [Person&#123;name='è¿ªä¸½çƒ­å·´', age=18&#125;, Person&#123;name='å¤åŠ›å¨œæ‰', age=20&#125;, Person&#123;name='åˆ˜äº¦è²', age=21&#125;] Mapä¹‹å‰æˆ‘ä»¬ä»‹ç»çš„é›†åˆå¦‚Listï¼ŒSetéƒ½æ˜¯å•åˆ—é›†åˆï¼Œä¸‹é¢æˆ‘ä»¬å°†ä»‹ç»åŒåˆ—é›†åˆMapï¼Œå®ƒæ˜¯é€šè¿‡é”®Kå»å¯»æ‰¾å€¼Vçš„ï¼Œæ‰€ä»¥è¯´å®ƒæ˜¯ä¸€ä¸ªåŒåˆ—é›†åˆã€‚å®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„å¸¸ç”¨å­ç±»æœ‰HashMapå’ŒLinkedHashMapã€‚å…¶ä¸­HashMapæ˜¯æ— åºçš„ï¼Œå³åœ¨é›†åˆä¸­å­˜å‚¨çš„é¡ºåºä¸ä½ æ·»åŠ çš„é¡ºåºæ˜¯ä¸ä¸€è‡´çš„ã€‚LinkedHashMapæ˜¯æœ‰åºï¼Œå³æ·»åŠ é¡ºåºä¸ä¿å­˜çš„é¡ºåºç›¸åŒã€‚LinkedHashMapæ˜¯HashMapçš„å­ç±»ã€‚æˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„HashSetç±»æ˜¯è°ƒç”¨HashMapå®ç°çš„ï¼Œå®ƒåªåˆ©ç”¨äº†HashMapçš„Kã€‚ Mapé›†åˆçš„æ–¹æ³•ä¸‹é¢ä»‹ç»Mapé›†åˆçš„å¸¸ç”¨æ–¹æ³• put(key, value) å‘Mapä¸­æ·»åŠ ä¸€å¯¹é”®å€¼å¯¹ï¼Œç”±äºMapé›†åˆä¸­çš„keyæ˜¯ä¸èƒ½é‡å¤çš„ï¼Œå¦‚æœMapä¸­å·²ç»å­˜åœ¨è¯¥keyï¼Œé‚£ä¹ˆå°†é›†åˆä¸­è¯¥keyæ‰€å¯¹åº”çš„valueå€¼æ›¿æ¢ä¸ºæ·»åŠ çš„valueï¼Œå³ç›¸å½“äºæ›´æ–°ï¼Œå¹¶ä¸”è¿”å›è¢«æ›¿æ¢çš„valueå€¼ï¼Œå¦‚æœè¯¥é›†åˆä¸­ä¸å­˜åœ¨è¯¥keyï¼Œé‚£ä¹ˆå°†è¯¥é”®å€¼å¯¹æ·»åŠ ï¼Œå¹¶ä¸”è¿”å›null get(key) é€šè¿‡é”®å€¼æ¥è·å¾—å¯¹åº”çš„valueå€¼ï¼Œå¦‚æœé›†åˆä¸å­˜åœ¨è¯¥keyï¼Œé‚£ä¹ˆè¿”å›null remove(key) æ ¹æ®é”®æ¥åˆ é™¤è¯¥é”®å€¼å¯¹ï¼Œå¦‚æœè¯¥keyä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿”å›nullï¼Œå¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆè¿”å›å¯¹åº”çš„valueå€¼ containsKey(key) åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨é”®keyï¼Œæœ‰åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false ä¸‹é¢ç®€å•æ¼”ç¤ºè¿™å››ä¸ªæ–¹æ³• import java.util.HashMap;import java.util.Map;public class TestMap &#123; public static void main(String[] args) &#123; Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); //æ·»åŠ å…ƒç´  map.put(\"è¿ªä¸½çƒ­å·´\",18); map.put(\"å¤åŠ›å¨œæ‰\",19); map.put(\"ä½Ÿä¸½å¨…\",20); System.out.println(map); //&#123;ä½Ÿä¸½å¨…=20, è¿ªä¸½çƒ­å·´=18, å¤åŠ›å¨œæ‰=19&#125; //è¿™é‡Œå·²ç»æœ‰\"è¿ªä¸½çƒ­å·´\"è¿™ä¸ªé”®äº†ï¼Œæ‰€ä»¥å¯¹åº”çš„å€¼ä¼šè¢«æ›´æ”¹ä¸º20ï¼Œå¹¶å°†è¯¥å€¼18è¿”å› //è¿™é‡Œæœ€å¥½ä½¿ç”¨Integeræ¥æ”¶ï¼Œå› ä¸ºå¯èƒ½è¿”å›null è€ŒåŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½è¢«èµ‹å€¼ä¸ºnull Integer val1 = map.put(\"è¿ªä¸½çƒ­å·´\",20); System.out.println(val1); //18 System.out.println(map); //&#123;ä½Ÿä¸½å¨…=20, è¿ªä¸½çƒ­å·´=20, å¤åŠ›å¨œæ‰=19&#125; //é€šè¿‡é”®å»è·å¾—å€¼ Integer val2 = map.get(\"å¤åŠ›å¨œæ‰\"); System.out.println(val2); //19 //åˆ é™¤é”®\"ä½Ÿä¸½å¨…\"å¯¹äºçš„é”®å€¼å¯¹ Integer val3 = map.remove(\"ä½Ÿä¸½å¨…\"); System.out.println(val3); //20 System.out.println(map); //&#123;è¿ªä¸½çƒ­å·´=20, å¤åŠ›å¨œæ‰=19&#125; //åˆ¤æ–­æ˜¯å¦åŒ…å«é”®\"ä½Ÿä¸½å¨…\" System.out.println(map.containsKey(\"ä½Ÿä¸½å¨…\")); //false &#125;&#125; éå†Mapé›†åˆä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³•ç”¨æ¥éå†Mapé›†åˆ keySet è¯¥æ–¹æ³•ä¼šè¿”å›Seté›†åˆï¼Œé‡Œé¢æ˜¯keyçš„å€¼ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥éå†è¯¥Seté›†åˆæ¥éå†Mapé›†åˆ entrySet è¯¥æ–¹æ³•ä¹Ÿè¿”å›ä¸€ä¸ªSeté›†åˆï¼Œä¸è¿‡è¿™ä¸ªé›†åˆé‡Œé¢çš„æ˜¯Entryå¯¹è±¡ï¼ŒEntryæ˜¯Mapçš„å†…éƒ¨ç±»ï¼Œè¯¥ç±»ä¼šåœ¨æ·»åŠ é”®å€¼å¯¹æ—¶åˆ›å»ºä¸€ä¸ªEntryå¯¹è±¡ä¿å­˜ç›¸åº”çš„keyå’Œvalueçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Entryå¯¹è±¡çš„getKey()å’ŒgetValue()æ–¹æ³•æ¥è·å¾—é”®å’Œå€¼ã€‚åŒæ ·æˆ‘ä»¬å¯ä»¥éå†è¯¥Seté›†åˆæ¥éå†Mapé›†åˆ ä¸‹é¢æ¼”ç¤ºä¸¤ä¸ªæ–¹æ³•çš„ä½¿ç”¨ keySet import java.util.HashMap;import java.util.Map;import java.util.Set;public class TestMap &#123; public static void main(String[] args) &#123; Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;(); //æ·»åŠ å…ƒç´  map.put(\"è¿ªä¸½çƒ­å·´\",18); map.put(\"å¤åŠ›å¨œæ‰\",19); map.put(\"ä½Ÿä¸½å¨…\",20); System.out.println(map); //&#123;ä½Ÿä¸½å¨…=20, è¿ªä¸½çƒ­å·´=18, å¤åŠ›å¨œæ‰=19&#125; //è·å¾—keyçš„Seté›†åˆ Set&lt;String&gt; set1 = map.keySet(); //éå†Seté›†åˆ for (String set: set1) &#123; System.out.println(set + \"=\" + map.get(set)); &#125; //è·å¾—Entryå¯¹è±¡ç»„æˆçš„Seté›†åˆ Set&lt;Map.Entry&lt;String,Integer&gt;&gt; set2 = map.entrySet(); //éå†è¯¥é›†åˆ for (Map.Entry&lt;String, Integer&gt; set : set2) &#123; System.out.println(set.getKey() + \"=\" + set.getValue()); &#125; &#125;&#125; è¾“å‡ºä¸º ä½Ÿä¸½å¨…=20è¿ªä¸½çƒ­å·´=18å¤åŠ›å¨œæ‰=19ä½Ÿä¸½å¨…=20è¿ªä¸½çƒ­å·´=18å¤åŠ›å¨œæ‰=19 æ–—åœ°ä¸»æ¡ˆä¾‹ç»ƒä¹ è¯¥æ¡ˆä¾‹æ¨¡æ‹Ÿæ–—åœ°ä¸»çš„å‘ç‰Œå’Œçœ‹ç‰Œè¿‡ç¨‹ï¼ŒåŠ å¼ºå¯¹é›†åˆçš„ä½¿ç”¨ã€‚ åˆ†æé¦–å…ˆæˆ‘ä»¬è¦ä½¿ç”¨Map&lt;Integer, String&gt;é›†åˆæ¥ä¿å­˜ä¸€å‰¯æ‰‘å…‹ï¼ŒIntegeræ˜¯ç´¢å¼•ï¼ŒStringæ˜¯å¯¹åº”çš„æ‰‘å…‹ç‰Œã€‚æˆ‘ä»¬é€šè¿‡ç´¢å¼•å»æ‰¾ç‰Œï¼Œåˆ°æ—¶å€™æŠŠç´¢å¼•å‘ç»™ç©å®¶å°±å¯ä»¥ï¼Œè¿™æ ·å› ä¸ºç©å®¶æ‹¿åˆ°çš„æ˜¯ç´¢å¼•ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿›è¡Œæ’åºã€‚æˆ‘ä»¬é¦–å…ˆè¦åˆ›å»ºä¸€å‰¯æ‰‘å…‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªStringæ•°ç»„ï¼Œä¸€ä¸ªä¿å­˜èŠ±è‰²ï¼Œä¸€ä¸ªä¿å­˜æ•°å­—ï¼Œç„¶åé€šè¿‡å¾ªç¯ç»„åˆä¸¤ä¸ªæ•°ç»„æ¥ç»„åˆä¸€å‰¯æ‰‘å…‹ç‰Œã€‚å› ä¸ºæˆ‘ä»¬è¦è¿›è¡Œæ’åºï¼Œæ‰€ä»¥Integerçš„å¤§å°å’Œç‰Œçš„å¤§å°è¦ä¸€ä¸€å¯¹åº”ï¼Œå³0å¯¹åº”å¤§ç‹ï¼Œ1å¯¹åº”å°ç‹ï¼Œ2-5å¯¹åº”å››ä¸ª2ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ´—ç‰Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Collectionsçš„shuffle()æ–¹æ³•ï¼Œç”±äºè¯¥æ–¹æ³•è¦æ±‚ä¼ å…¥Listé›†åˆï¼Œæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªListé›†åˆï¼Œè¯¥é›†åˆè¦ä¿å­˜Integerç´¢å¼•ã€‚å‘ç‰Œå°±æŠŠç´¢å¼•å‘ç»™ç©å®¶ï¼Œç©å®¶é€šè¿‡ç´¢å¼•å»Mapé›†åˆä¸­çœ‹ç‰Œã€‚ ä»£ç å®ç°import java.util.*;public class Doudizhu &#123; public static void main(String[] args) &#123; //ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„ç»„åˆå½¢æˆä¸€å¹…æ‰‘å…‹ç‰Œ String[] colors = &#123;\"â™ \",\"â™¥\",\"â™£\",\"â™¦\"&#125;; String[] numbers = &#123;\"2\",\"A\",\"K\",\"Q\",\"J\",\"10\",\"9\",\"8\",\"7\",\"6\",\"5\",\"4\",\"3\"&#125;; //å°†æ‰‘å…‹ç‰Œå­˜å‚¨åˆ°Mapé›†åˆä¸­ï¼Œé”®ä¸ºæ•´æ•°ç´¢å¼•ï¼Œæ–¹ä¾¿æ’åºï¼Œå€¼ä¸ºç‰Œï¼Œé€šè¿‡ç´¢å¼•æ‹¿ç‰Œ Map&lt;Integer,String&gt; poker = new HashMap&lt;&gt;(); //å› ä¸ºä½¿ç”¨Collections.shuffleæ–¹æ³•æ´—ç‰Œï¼Œæ‰€ä»¥è¦ä½¿ç”¨Listé›†åˆå­˜å‚¨ç´¢å¼• List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); //å°†å¤§å°ç‹æ·»åŠ åˆ°Mapä¸­ï¼Œå¹¶å°†ç´¢å¼•æ·»åŠ åˆ°Listä¸­ int index = 0; poker.put(index,\"å¤§ç‹\"); list.add(index); index++; poker.put(index,\"å°ç‹\"); list.add(index); index++; //ä¸¤ä¸ªæ•°ç»„ç»„åˆå½¢æˆä¸€å‰¯ç‰Œ for (String number : numbers) &#123; for (String color : colors) &#123; poker.put(index,color+number); list.add(index); index++; &#125; &#125; //æ´—ç‰Œ Collections.shuffle(list); ArrayList&lt;Integer&gt; player1 = new ArrayList&lt;&gt;(); ArrayList&lt;Integer&gt; player2 = new ArrayList&lt;&gt;(); ArrayList&lt;Integer&gt; player3 = new ArrayList&lt;&gt;(); ArrayList&lt;Integer&gt; dipai = new ArrayList&lt;&gt;(); //å‘ç‰Œï¼Œå°†ç´¢å¼•å‘ç»™ç©å®¶ for (int i = 0; i &lt; list.size(); i++) &#123; if (i &gt;= 51) &#123; dipai.add(list.get(i)); &#125; else if (i % 3 == 0) &#123; player1.add(list.get(i)); &#125; else if (i % 3 == 1) &#123; player2.add(list.get(i)); &#125; else if (i % 3 == 2) &#123; player3.add(list.get(i)); &#125; &#125; //ç»™ç‰Œæ’åº Collections.sort(player1); Collections.sort(player2); Collections.sort(player3); Collections.sort(dipai); //çœ‹ç‰Œ lookPoker(player1,poker,\"åˆ˜å¾·å\"); lookPoker(player2,poker,\"å‘¨æ¶¦å‘\"); lookPoker(player3,poker,\"å‘¨æ˜Ÿé©°\"); lookPoker(dipai,poker,\"åº•ç‰Œ\"); &#125; //çœ‹ç‰Œæ–¹æ³• é€šè¿‡ç©å®¶çš„ç´¢å¼•å»Mapé›†åˆä¸­æ‰¾åˆ°å¯¹åº”çš„ç‰Œ å¹¶æ‰“å°å‡ºæ¥ public static void lookPoker(ArrayList&lt;Integer&gt; list, Map&lt;Integer,String&gt; poker,String name) &#123; System.out.print(name + \"çš„ç‰Œæ˜¯ï¼š \"); //é€šè¿‡ç©å®¶çš„ç´¢å¼•ï¼Œå»pokerä¸­å–ç‰Œ for (Integer number : list) &#123; System.out.print(poker.get(number) + \" \"); &#125; System.out.println(); &#125;&#125; ç»“æœä¸º","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"æ³›å‹","slug":"æ³›å‹","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E6%B3%9B%E5%9E%8B/"},{"name":"é›†åˆ","slug":"é›†åˆ","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E9%9B%86%E5%90%88/"}]},{"title":"Javaé¢å‘å¯¹è±¡","date":"2019-07-04T16:00:00.000Z","path":"/Javaé¢å‘å¯¹è±¡/","text":"åœ¨æœ€åˆçš„å¼€å§‹ï¼Œäººä»¬ç¼–å†™ç¨‹åºçš„åŸºäºè¿‡ç¨‹çš„ï¼Œé‚£æ—¶å€™çš„ç¼–ç¨‹æ–¹å¼æ˜¯é¢å‘è¿‡ç¨‹çš„ã€‚ä½†æ˜¯äººä»¬å‘ç°ï¼Œéšç€ä»£ç è§„æ¨¡çš„æ‰©å¤§ï¼Œç¼–å†™å¤§è§„æ¨¡çš„ç¨‹åºä½¿ç”¨é¢å‘è¿‡ç¨‹çš„æ–¹æ³•ååˆ†çš„å›°éš¾ï¼Œè¿™æ—¶å€™äººä»¬å¿…é¡»æå‡ºä¸€ç§æ–°çš„ç¼–ç¨‹æ€æƒ³ï¼Œä½¿å¾—ç¼–å†™å¤§å‹ç¨‹åºå˜å¾—ç®€å•ã€‚è¿™ç§æ€æƒ³å°±æ˜¯é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚ å°±åƒæˆ‘ä»¬å­¦ä¹ æ•°å­¦ä¸€æ ·ï¼Œéšç€æˆ‘ä»¬å­¦ä¹ çš„æ·±å…¥ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è¿›è¡ŒæŠ½è±¡ï¼Œæ¯”å¦‚ä»æ•°æŠ½è±¡åˆ°ä»£æ•°ï¼Œå¹¶ä¸”ä¸æ–­æå‡ºæ–°çš„æ¦‚å¿µï¼Œæå‡ºå¾ˆå¤šçš„å®šç†ï¼Œæ–¹ä¾¿æˆ‘ä»¬çš„å­¦ä¹ ç ”ç©¶ã€‚é¢å‘å¯¹è±¡ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå®ƒæŠŠå®é™…ä¸­çš„äº‹ç‰©æŠ½è±¡å‡ºæ¥ï¼Œè¿™ä¸ªäº‹ç‰©å¯ä»¥æ˜¯æˆ‘ä»¬è§åˆ°çš„å®ç‰©ï¼Œæ¯”å¦‚æ¤…å­ï¼Œæ¡Œå­ï¼Œæ‰‹æœºï¼Œä¹Ÿå¯ä»¥æ˜¯æˆ‘ä»¬æˆ‘ä»¬çœ‹ä¸è§çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æŸä¸ªç³»ç»Ÿã€‚è¿™ä¸ªæŠ½è±¡å‡ºæ¥çš„ä¸œè¥¿æˆ‘ä»¬å«åšç±»ï¼Œæˆ‘ä»¬åˆ©ç”¨ç±»çš„æ¦‚å¿µï¼Œå¯ä»¥æ¸…æ¥šçš„æŠŠæ¡ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»ï¼Œä½¿å¾—ç¨‹åºçš„ç»“æ„ååˆ†çš„æ¸…æ™°ï¼Œä¾¿äºç®¡ç†ï¼Œä¾¿äºå¼€å‘å¤§å‹çš„ç¨‹åºã€‚ æˆ‘ä»¬æŠŠæŠ½è±¡å‡ºæ¥çš„ä¸œè¥¿å«åšç±»ï¼Œé‚£ä¹ˆä¸€ä¸ªç±»çš„å®ä¾‹å°±æ˜¯å¯¹è±¡ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æŠŠäººæŠ½è±¡ä¸ºäº†ä¸€ä¸ªç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œé‚£ä¹ˆå°æ˜è¿™ä¸ªå…·ä½“çš„äººå°±æ˜¯è¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå«åšå¯¹è±¡ã€‚æˆ‘ä»¬æŠŠæ¤…å­æŠ½è±¡ä¸ºä¸€ä¸ªç±»ï¼Œä¸€ä¸ªå…·ä½“çš„æ¤…å­å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ç±»å¯ä»¥çœ‹åšæ˜¯å¯¹è±¡çš„æ¨¡æ¿ï¼Œå¯¹è±¡å¯ä»¥çœ‹åšæ˜¯ç±»çš„å…·ä½“å®ç°ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ä¸ªæ–¹é¢æ˜¯æè¿°ä¸€ä¸ªäº‹ç‰©ï¼Œä¸€ä¸ªæ˜¯å±æ€§ï¼Œæ¯”å¦‚è¯´å¯¹äºäººè¿™ä¸ªç±»ï¼Œå®ƒçš„å±æ€§å°±æœ‰å§“åï¼Œèº«é«˜ï¼Œå¹´é¾„ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å®ƒçš„å±æ€§ï¼Œå¦ä¸€ä¸ªå°±æ˜¯è¡Œä¸ºï¼Œæ¯”å¦‚è¯´äººçš„è¡Œä¸ºæœ‰åƒé¥­ï¼Œç¡è§‰ç­‰ç­‰ã€‚ ç±»çš„å®šä¹‰ç±»ä½¿ç”¨å…³é”®å­—classè¿›è¡Œå®šä¹‰ï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰ç”¨è¿‡å¾ˆå¤šæ¬¡ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹‹å‰ä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚åœ¨HelloWorldæ¡ˆä¾‹ä¸­ public class HelloWorld &#123; public static void main(String[] args) &#123; System.out.println(\"Hello World!\"); &#125;&#125; å…¶ä¸­HelloWorldè¡¨ç¤ºçš„å°±æ˜¯ç±»åã€‚ç±»å®šä¹‰çš„æ ¼å¼æ˜¯ public class ç±»å &#123; //æˆå‘˜å˜é‡ //æˆå‘˜æ–¹æ³•&#125; åœ¨ä¸Šé¢æˆ‘ä»¬æœ‰æåˆ°ï¼Œä¸€ä¸ªäº‹ç‰©å¯ä»¥ç”±å±æ€§å’Œè¡Œä¸ºä¸¤éƒ¨åˆ†æè¿°ï¼Œè¡¨ç°åœ¨ç¨‹åºä¹¦å†™ä¸­ä¸ºæˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ï¼Œå…¶ä¸­å˜é‡ç”¨æ¥æè¿°ç±»çš„å±æ€§ï¼Œæ–¹æ³•ç”¨æ¥æè¿°ç±»çš„è¡Œä¸ºï¼Œå‰é¢åŠ ä¸Šæˆå‘˜äºŒå­—ä»¥è¡¨ç¤ºä¸å±€éƒ¨å˜é‡çš„ä¸åŒï¼Œä¾‹å¦‚ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªPersonç±»ï¼Œå®ƒæœ‰å§“åï¼Œå¹´é¾„å±æ€§ï¼Œæœ‰åƒå’Œç¡çš„è¡Œä¸º public class Person &#123; String name; int age; public void eat() &#123; System.out.println(\"åƒåƒåƒ\"); &#125; public void sleep() &#123; System.out.println(\"ç¡ç¡ç¡\"); &#125;&#125; æˆ‘ä»¬æ³¨æ„åˆ°æˆå‘˜å˜é‡æ—¶å®šä¹‰åœ¨ç±»å½“ä¸­çš„ï¼Œå¹¶ä¸”æˆå‘˜æ–¹æ³•æ²¡æœ‰ä½¿ç”¨å…³é”®å­—staticä¿®é¥°ã€‚ æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç±»ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨å®ƒå‘¢? ä»å‰é¢æˆ‘ä»¬äº†è§£åˆ°ï¼Œç±»æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œæˆ‘ä»¬è¦å°†å®ƒå…·ä½“åŒ–æ‰èƒ½å¤Ÿä½¿ç”¨å®ƒï¼Œç±»æ˜¯ä¸èƒ½å¤Ÿç›´æ¥ä½¿ç”¨çš„ï¼Œè€Œå…·ä½“åŒ–çš„è¿‡ç¨‹å°±æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚åˆ›å»ºå¯¹è±¡çš„æ ¼å¼ä¸º ç±»å å¯¹è±¡åç§° = new ç±»å(); ä¾‹å¦‚ä¸‹é¢åˆ›å»ºä¸€ä¸ªperçš„å¯¹è±¡ public class Person &#123; String name; int age; public void eat() &#123; System.out.println(\"åƒåƒåƒ\"); &#125; public void sleep() &#123; System.out.println(\"ç¡ç¡ç¡\"); &#125; public static void main(String[] args) &#123; Person per = new Person(); //åˆ›å»ºä¸€ä¸ªåä¸ºperçš„å¯¹è±¡ &#125;&#125; æˆ‘ä»¬åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„æ¨¡æ¿æ˜¯Personç±»ï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥æœ‰name, ageå±æ€§å’Œeat, sleepè¡Œä¸ºï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆå»ä½¿ç”¨è¿™äº›ä¸œè¥¿å‘¢? æ–¹æ³•å°±æ˜¯é€šè¿‡ç‚¹è¯­æ³• å¯¹è±¡å.å±æ€§ //ä½¿ç”¨å±æ€§å¯¹è±¡å.æ–¹æ³•() //ä½¿ç”¨æ–¹æ³• ä¾‹å¦‚ä¸‹é¢æˆ‘ä»¬æ‰“å°å‡ºperå¯¹è±¡çš„å±æ€§å€¼ï¼Œå¹¶ä¸”è°ƒç”¨å®ƒçš„æ–¹æ³• public static void main(String[] args) &#123; Person per = new Person(); //åˆ›å»ºä¸€ä¸ªåä¸ºperçš„å¯¹è±¡ System.out.println(per.name); System.out.println(per.age); per.eat(); per.sleep();&#125; è¾“å‡ºä¸º null0åƒåƒåƒç¡ç¡ç¡ æˆ‘ä»¬å‘ç°per.nameçš„å€¼æ˜¯nullï¼Œper.ageçš„å€¼æ˜¯0ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¹¶æ²¡æœ‰ç»™per.nameå’Œper.ageèµ‹å€¼ï¼Œç³»ç»Ÿåœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¼šæœ‰é»˜è®¤å€¼ï¼Œè§„åˆ™å’Œæ•°ç»„çš„ä¸€æ ·ã€‚ ç±»çš„å†…å­˜æ¨¡å‹æˆ‘ä»¬æ¥çœ‹çœ‹æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œåœ¨å†…å­˜ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ public class Person &#123; String name; int age; public void eat() &#123; System.out.println(\"åƒåƒåƒ\"); &#125; public void sleep() &#123; System.out.println(\"ç¡ç¡ç¡\"); &#125; public static void main(String[] args) &#123; Person per = new Person(); //åˆ›å»ºä¸€ä¸ªåä¸ºperçš„å¯¹è±¡ System.out.println(per.name); System.out.println(per.age); per.eat(); per.sleep(); &#125;&#125; ç¼–è¯‘å™¨é¦–å…ˆä¼šåœ¨æ–¹æ³•åŒºä¸­æ‰¾mainæ–¹æ³•ï¼Œç„¶åå°†å®ƒæ¨å…¥æ ˆä¸­ Person per = new Person(); è¿™è¡Œè¯­å¥ä¼šåœ¨mainä¸­åˆ›å»ºä¸€ä¸ªperå˜é‡ï¼Œæ¥ç€ä¼šåœ¨å †ä¸­å¼€è¾Ÿå‡ºä¸€å—ç©ºé—´ï¼Œå­˜å‚¨çš„æ˜¯perè¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ä»¥æ–¹æ³•åŒºä¸­çš„ç±»ä¸ºæ¨¡æ¿çš„ï¼Œè¯¥å¯¹è±¡å…·æœ‰æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ã€‚ä½†æ˜¯æ³¨æ„çš„æ˜¯ï¼Œå¯¹è±¡çš„æˆå‘˜æ–¹æ³•æ˜¯åœ°å€å€¼ï¼ŒæŒ‡å‘æ–¹æ³•åŒºä¸­çš„æ–¹æ³•çš„ä¿¡æ¯ï¼Œå½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šæ ¹æ®è¯¥åœ°å€å€¼å»æ–¹æ³•åŒºä¸­å¯»æ‰¾è¯¥æ–¹æ³•ã€‚ç”±äºæ¯ä¸ªå¯¹è±¡çš„è¡Œä¸ºéƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å±æ€§ä¸åŒï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨å †ä¸­ä¸ºæ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¼€è¾Ÿç©ºé—´æ¥ä¿å­˜æ–¹æ³•çš„ä¿¡æ¯ï¼Œåªéœ€è¦ä¿å­˜ä¸€ä¸ªåœ°å€å€¼å³å¯ã€‚è¿™æ ·åšå¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚ System.out.println(per.name);System.out.println(per.age);per.eat();per.sleep(); ä¸Šé¢çš„è¯­å¥æ˜¯è®¿é—®å¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ï¼Œé¦–å…ˆä¼šæ ¹æ®perå¯¹è±¡ä¿å­˜çš„åœ°å€å€¼ï¼Œå»å †ä¸­å¯»æ‰¾å¯¹åº”çš„ä¿å­˜åœ°å€ï¼Œç„¶åæ ¹æ®æˆå‘˜å˜é‡åå»è®¿é—®æ•°æ®ã€‚è°ƒç”¨æˆå‘˜æ–¹æ³•ï¼Œåˆ†ä¸ºäº†å››æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯æ ¹æ®perå¯¹è±¡çš„åœ°å€å€¼æ‰¾åˆ°å †ä¸­çš„æ–¹æ³•ï¼›ç¬¬äºŒæ­¥ï¼Œå †ä¸­çš„æ–¹æ³•ä¿å­˜çš„åœ°å€å€¼ï¼Œæ ¹æ®å †ä¸­çš„åœ°å€å€¼å»æ–¹æ³•åŒºä¸­æŸ¥æ‰¾æ–¹æ³•çš„ä¿¡æ¯ï¼›ç¬¬ä¸‰æ­¥ï¼Œå°†æ–¹æ³•å‹å…¥æ ˆä¸­ï¼Œæ ˆä¼šä¸ºè¯¥æ–¹æ³•å¼€è¾Ÿä¸€å—ç©ºé—´ï¼›ç¬¬å››æ­¥ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ–¹æ³•è¢«æ ˆç§»é™¤ã€‚ å¯¹è±¡ä¸æ–¹æ³•å¯¹è±¡ä½œä¸ºä¸€ç§æ•°æ®ç±»å‹ï¼Œå®ƒä¹Ÿå¯ä»¥ä½œä¸ºæ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ã€‚ä¸æ•°ç»„ä¸€æ ·ï¼Œä¼ é€’çš„æ˜¯åœ°å€å€¼ï¼Œè¿”å›çš„ä¹Ÿæ˜¯åœ°å€å€¼ã€‚ å¯¹è±¡ä½œä¸ºå‚æ•°public static void printObject(Person per) &#123; System.out.println(per.name); System.out.println(per.age);&#125; å¯¹è±¡ä½œä¸ºè¿”å›å€¼public static Person getPersonObject() &#123; Person per = new Person(); return per;&#125; æˆå‘˜å˜é‡ä¸å±€éƒ¨å˜é‡æˆå‘˜å˜é‡ä¸å±€éƒ¨å˜é‡çš„åŒºåˆ« å®šä¹‰çš„ä½ç½®ä¸ä¸€æ · å±€éƒ¨å˜é‡ï¼šå®šä¹‰åœ¨æ–¹æ³•ä¸­ æˆå‘˜å˜é‡ï¼šå®šä¹‰åœ¨æ–¹æ³•ä¹‹å¤–ï¼Œå®šä¹‰åœ¨ç±»ä¸­ ä½œç”¨èŒƒå›´ä¸ä¸€æ · å±€éƒ¨å˜é‡ï¼šåªèƒ½åœ¨æ–¹æ³•ä¸­ä½¿ç”¨ æˆå‘˜å˜é‡ï¼šåœ¨ç±»ä¸­éƒ½å¯ä»¥ä½¿ç”¨ é»˜è®¤å€¼ å±€éƒ¨å˜é‡ï¼šæ²¡æœ‰é»˜è®¤å€¼ æˆå‘˜å˜é‡ï¼šæœ‰é»˜è®¤å€¼ï¼Œè§„åˆ™åŒæ•°ç»„ åœ¨å†…å­˜ä¸­çš„ä½ç½®ä¸ä¸€æ · å±€éƒ¨å˜é‡ï¼šåœ¨æ ˆå†…å­˜ä¸­ æˆå‘˜å˜é‡ï¼šåœ¨å †å†…å­˜ä¸­ ç”Ÿå‘½å‘¨æœŸ å±€éƒ¨å˜é‡ï¼šéšç€æ–¹æ³•çš„è¿›æ ˆè€Œäº§ç”Ÿï¼Œéšç€æ–¹æ³•çš„å‡ºæ ˆè€Œæ¶ˆå¤± æˆå‘˜å˜é‡ï¼šéšç€å¯¹è±¡çš„åˆ›å»ºè€Œäº§ç”Ÿï¼Œéšç€å¯¹è±¡çš„è¢«åƒåœ¾å›æ”¶è€Œæ¶ˆå¤± å°è£…é¢å‘å¯¹è±¡æœ‰ä¸‰å¤§ç‰¹æ€§ï¼Œåˆ†åˆ«ä¸º å°è£… ç»§æ‰¿ å¤šæ€ ä¸‹é¢è¯¦ç»†è®²è¿°å…¶ä¸­çš„å°è£…ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ä¹‹åï¼Œå¯ä»¥é€šè¿‡ç‚¹(.)è¯­æ³•å»è®¿é—®æˆå‘˜å˜é‡ï¼Œä¹Ÿå¯ä»¥ä¸ºå®ƒèµ‹å€¼ï¼Œå¦‚ä¸‹ public class Person &#123; String name; int age; public static void main(String[] args) &#123; Person per = new Person(); per.name = \"æå››\"; per.age = 20; System.out.println(\"æˆ‘å«åšï¼š\" + per.name +\"ï¼Œæˆ‘ï¼š\" + per.age + \"å²ã€‚\"); &#125;&#125; è¾“å‡ºä¸ºï¼š æˆ‘å«åšï¼šæå››ï¼Œæˆ‘ï¼š20å²ã€‚ ä½†æ˜¯ä¸€æ—¦æˆ‘ä»¬å°†æˆå‘˜å˜é‡ä½¿ç”¨ä¿®é¥°ç¬¦privateä¿®é¥°çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸èƒ½é€šè¿‡.è¯­æ³•è®¿é—®æˆå‘˜å˜é‡äº†ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ public class Person &#123; private String name; private int age; public static void main(String[] args) &#123; Person per = new Person(); per.name = \"æå››\"; //ç¼–è¯‘æˆåŠŸ per.age = 20; //ç¼–è¯‘æˆåŠŸ System.out.println(\"æˆ‘å«åšï¼š\" + per.name +\"ï¼Œæˆ‘ï¼š\" + per.age + \"å²ã€‚\"); &#125;&#125; æˆ‘ä»¬å‘ç°æ€ä¹ˆä½¿ç”¨privateä¿®é¥°çš„å˜é‡æ€ä¹ˆè¿˜å¯ä»¥è®¿é—®ï¼Œä¸æ˜¯è¯´ä¸å¯ä»¥è®¿é—®äº†å—? è¿™æ˜¯å› ä¸ºmainæ–¹æ³•æ˜¯Personç±»çš„æ–¹æ³•ï¼Œåœ¨ä¸€ä¸ªç±»é‡Œé¢æ˜¯å¯ä»¥éšä¾¿è®¿é—®çš„ï¼Œç°åœ¨æœ‰ä¸€ä¸ªTestç±»ï¼Œç„¶åæˆ‘ä»¬å»è®¿é—®æ•°æ® public class Test &#123; public static void main(String[] args) &#123; Person per = new Person(); per.name = \"æå››\"; //ç¼–è¯‘å¤±è´¥ per.age = 20; //ç¼–è¯‘å¤±è´¥ System.out.println(\"æˆ‘å«åšï¼š\" + per.name +\"ï¼Œæˆ‘ï¼š\" + per.age + \"å²ã€‚\"); &#125;&#125; privateå°±æ˜¯ç§æœ‰çš„æ„æ€ï¼Œæ„å‘³çš„è¿™ä¸ªå˜é‡çš„ç§å¯†çš„ï¼Œå¤–éƒ¨ä¸å¯ä»¥è®¿é—®ï¼Œå¦‚æœè¦è®¿é—®çš„è¯ï¼Œåªèƒ½é€šè¿‡getterå’Œsetteræ–¹æ³• public class Person &#123; private String name; private int age; public String getName() &#123; return name; &#125; public void setName(String who)&#123; name = who; &#125; public int getAge() &#123; return age; &#125; public void setAge(int num)&#123; age = num; &#125; &#125; ç°åœ¨æˆ‘ä»¬åœ¨Testç±»ä¸­åˆ›å»ºPersonå¯¹è±¡è®¿é—® public class Test &#123; public static void main(String[] args) &#123; Person per = new Person(); per.setName(\"æå››\"); //é€šè¿‡setteræ–¹æ³•å»è®¾ç½®æˆå‘˜å˜é‡çš„å€¼ per.setAge(20); //é€šè¿‡setteræ–¹æ³•å»è®¾ç½®æˆå‘˜å˜é‡çš„å€¼ System.out.println(\"æˆ‘å«åšï¼š\" + per.name +\"ï¼Œæˆ‘ï¼š\" + per.age + \"å²ã€‚\"); &#125;&#125; è¾“å‡ºä¸º æˆ‘å«åšï¼šæå››ï¼Œæˆ‘ï¼š20å²ã€‚ æ˜æ˜¾å¯è§ï¼Œä¸‹é¢çš„ä»£ç é‡æ¯”ä¸Šé¢å¤§äº†å¾ˆå¤šï¼Œæ„Ÿè§‰è¿™ä¹ˆåšæ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿè€ƒè™‘ä¸‹é¢è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œå°è£…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨.è¯­æ³•ä¸ºageå˜é‡èµ‹å€¼ï¼Œæˆ‘ä»¬å¯ä»¥èµ‹å€¼ä¸º-20ï¼Œè¿™æ˜æ˜¾æ˜¯ä¸åˆç†çš„ï¼Œä½†æ˜¯å¯ä»¥è¿›è¡Œèµ‹å€¼ï¼Œå¦‚æœæˆ‘ä»¬è¿›è¡Œå°è£…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨setteræ–¹æ³•ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œä½¿å¾—ä¸€äº›ä¸åˆç†çš„ï¼Œæœ‰å®³çš„æ“ä½œä¸èƒ½å¤Ÿæ­£å¸¸èµ‹å€¼ã€‚ public void setAge(int num) &#123; if (num &gt; 0) &#123; age = num; &#125;&#125; getteræ–¹æ³•å’Œsetteræ–¹æ³•çš„æ ¼å¼ä¸€èˆ¬ä¸ºâ€getå˜é‡åâ€æˆ–â€setå˜é‡åâ€ï¼Œæ ¹æ®é©¼å³°å‘½åæ³•ï¼Œå˜é‡åé¦–å­—æ¯éœ€è¦å¤§å†™ï¼Œå¦‚ä¸Šé¢çš„setAge, getAgeã€‚ä½†æ˜¯å¦‚æœgetteræ–¹æ³•çš„è¿”å›å€¼æ˜¯booleanç±»å‹çš„è¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬å†™æˆisXxxçš„å½¢å¼ã€‚ thiså…³é”®å­—è€ƒè™‘ä¸Šä¾‹æˆ‘ä»¬çš„setteræ–¹æ³• public void setName(String who)&#123; name = who;&#125; å…¶å®æˆ‘ä¸€ç›´æƒ³å†™æˆè¿™æ · public void setName(String name)&#123; name = name;&#125; æˆ‘çš„æƒ³æ³•æ˜¯ç¬¬ä¸€ä¸ªnameæ˜¯æˆå‘˜å˜é‡nameï¼Œç¬¬äºŒä¸ªnameæ˜¯ä¼ å…¥çš„å‚æ•°ï¼Œä½†æ˜¯è¿™æ ·ä¸è¡Œï¼Œå› ä¸ºè¿™æ—¶çš„ä¸¤ä¸ªnameéƒ½è¢«çœ‹åšæ˜¯ä¼ å…¥çš„å‚æ•°ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è§£å†³æˆå‘˜å˜é‡ä¸å±€éƒ¨å˜é‡é‡åçš„é—®é¢˜å—ï¼Ÿæ–¹æ³•å°±æ˜¯ä½¿ç”¨thiså…³é”®å­—ï¼Œä¿®æ”¹ä¸Šé¢ä»£ç å¦‚ä¸‹ public void setName(String name)&#123; this.name = name;&#125; è¿™æ—¶this.nameå°±ä»£è¡¨çš„æ˜¯æˆå‘˜å˜é‡nameã€‚é‚£ä¹ˆthisåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿå“ªä¸ªå¯¹è±¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆthiså°±æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡. per.setName(\"æå››\"); perè¿™ä¸ªå¯¹è±¡è°ƒç”¨setNameæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™æ—¶çš„thiså°±æ˜¯perã€‚ æ„é€ æ–¹æ³•æ„é€ æ–¹æ³•å…¶å®å°±æ˜¯åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨newåœ¨åˆ›å»ºå¯¹è±¡ï¼Œå°±æ˜¯åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿˜è®°å¾—æˆ‘ä»¬æ˜¯æ€ä¹ˆåˆ›å»ºå¯¹è±¡çš„å— Person per = new Person(); å…¶ä¸­Person()å°±æ˜¯æ„é€ æ–¹æ³•ã€‚ æ„é€ æ–¹æ³•çš„å®šä¹‰æ„é€ æ–¹æ³•å®šä¹‰çš„æ ¼å¼ä¸º public ç±»å() &#123; &#125; æ³¨æ„ï¼š æ„é€ æ–¹æ³•åè¦ä¸ç±»åçš„å®Œå…¨ä¸€æ ·ï¼ŒåŒ…æ‹¬å¤§å°å†™ ä¸è¦å†™è¿”å›å€¼ç±»å‹ï¼Œvoidä¹Ÿä¸è¦å†™ ä¸èƒ½returnä¸€ä¸ªå…·ä½“çš„è¿”å›å€¼ æ„é€ æ–¹æ³•åŒæˆå‘˜æ–¹æ³•ä¸€æ ·ï¼Œæ˜¯å®šä¹‰åœ¨ç±»ä¸­çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¥½åƒåˆ°ç°åœ¨ä»æ¥æ²¡æœ‰å®šä¹‰è¿‡æ„é€ æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å´å¯ä»¥ä½¿ç”¨ï¼Œè¿™æ—¶ä¸ºä»€ä¹ˆï¼Ÿ å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç¼–å†™æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œè¯¥æ„é€ æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œæ–¹æ³•ä½“ä¸ºç©ºï¼Œæ¯”å¦‚åƒè¿™æ · public Person() &#123; &#125; ä½†æ˜¯ä¸€æ—¦å½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ„é€ æ–¹æ³• public Person(String name, int age) &#123; this,name = name; this,age = age;&#125; æˆ‘ä»¬å®šä¹‰ä¸ªä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œæ­¤æ—¶æ€»å…±å°±è¿™ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬è¿˜ä¼šå†™ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ï¼Œç»§æ‰¿é‚£é‡Œä¼šè®²åˆ°ä¸ºä»€ä¹ˆã€‚ æ„é€ æ–¹æ³•ä¹Ÿå¯ä»¥è¿›è¡Œé‡è½½ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»æ¼”ç¤ºäº† åˆ©ç”¨æ„é€ æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥åˆ©ç”¨æ„é€ æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ï¼Œæ³¨æ„æˆ‘ä»¬ä¹‹å‰åˆå§‹åŒ–éƒ½æ˜¯è¿™æ · Person per = new Person();per.setName(\"æå››\");per.setAge(20); ç°åœ¨æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæœ‰ä¸¤ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³• public Person(String name, int age) &#123; this.name = name; this.age = age;&#125; ç„¶åå°±å¯ä»¥è¿™ä¹ˆè°ƒç”¨ Person per = new Person(\"æå››\", 20); è¿™ä¸€è¡Œçš„ä»£ç ä¸ä¸Šé¢ä¸‰è¡Œä»£ç çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ ä¸€ä¸ªæ ‡å‡†çš„ç±»ä¸€ä¸ªæ ‡å‡†çš„ç±»åº”è¯¥æ»¡è¶³ä¸€ä¸‹ç‰¹ç‚¹ æ‰€æœ‰çš„æˆå‘˜å˜é‡éƒ½ä½¿ç”¨privateä¿®é¥° ä¸ºæ¯ä¸€ä¸ªæˆå‘˜å˜é‡ç¼–å†™ä¸€ä¸ªsetter,getteræ–¹æ³• ç¼–å†™ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•° ç¼–å†™ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•° ä¸€ä¸ªæ ‡å‡†çš„ç±»ä¹Ÿå«åšJava Beanã€‚ åŒ¿åå¯¹è±¡æ‰€è°“çš„åŒ¿åå¯¹è±¡ï¼ŒæŒ‡çš„å°±æ˜¯æ²¡æœ‰åå­—çš„å¯¹è±¡ã€‚å³åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¹¶æ²¡æœ‰ä¸ºå®ƒèµ‹äºˆå˜é‡åã€‚ç”±äºå®ƒæ²¡æœ‰åå­—ï¼Œæ²¡æœ‰å˜é‡ä¿å­˜å®ƒçš„åœ°å€ï¼Œæ‰€ä»¥å®ƒåªèƒ½å¤Ÿä½¿ç”¨ä¸€æ¬¡ï¼Œå¦‚ä¸‹ new Person().age; å¦‚æœæŸä¸ªå¯¹è±¡åªä½¿ç”¨ä¸€æ¬¡çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨åŒ¿åå¯¹è±¡ã€‚ åŒ¿åå¯¹è±¡ä½œä¸ºæ–¹æ³•çš„å‚æ•°åŒ¿åå¯¹è±¡ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå½“ç„¶å¯ä»¥ä½œä¸ºæ–¹æ³•çš„å‚æ•°ã€‚åŒ¿åå¯¹è±¡ä¼ å…¥æ–¹æ³•çš„æ˜¯åœ°å€å€¼ï¼Œä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ import java.util.Scanner;public class Anonymous &#123; //getNumæ–¹æ³•æ¥æ”¶ä¸€ä¸ªScannerå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªintç±»å‹çš„æ•°å€¼ public static int getNum(Scanner sc) &#123; int num = sc.nextInt(); return num; &#125; public static void main(String[] args) &#123; //ä¼ å…¥äº†ä¸€ä¸ªåŒ¿åå¯¹è±¡ int num = getNum(new Scanner(System.in)); System.out.println(num); &#125;&#125; ç¨‹åºè¿è¡Œæ•ˆæœä¸º åŒ¿åå¯¹è±¡ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼åŒ¿åå¯¹è±¡ä¹Ÿå¯ä»¥ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ï¼Œè¿”å›çš„ä¹Ÿæ˜¯åœ°å€å€¼ import java.util.Scanner;public class Anonymous &#123; //è¿”å›ä¸€ä¸ªScannerå¯¹è±¡ public static Scanner getScannerObject() &#123; return new Scanner(System.in); &#125; public static void main(String[] args) &#123; //GetScannerObjectæ–¹æ³•è¿”å›ä¸€ä¸ªScannerå¯¹è±¡ Scanner sc = getScannerObject(); String str = sc.next(); &#125;&#125; ç¨‹åºè¿è¡Œæ•ˆæœä¸º staticå…³é”®å­—staticå…³é”®å­—æˆ‘ä»¬åœ¨ä¹‹å‰è§åˆ°è¿‡å¾ˆå¤šæ¬¡äº†ï¼Œæ¯”å¦‚ public static void main(String[] args)&#123; &#125; æˆ–è€…åœ¨å®šä¹‰æ–¹æ³•æ—¶ public static void add() &#123; &#125; éƒ½ç”¨åˆ°staticï¼Œè€Œåœ¨æˆå‘˜æ–¹æ³•ä¸­å´æ²¡æœ‰ç”¨åˆ°staticï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹staticåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ã€‚ staticä¿®é¥°ç¬¦çš„ä½œç”¨ä¸€æ—¦è¢«staticä¿®é¥°ï¼Œä¸ç®¡æ˜¯å˜é‡è¿˜æ˜¯æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¹ˆå˜é‡æˆ–æ–¹æ³•ä¸å†æ˜¯å±äºæŸä¸ªå¯¹è±¡çš„ï¼Œè€Œæ˜¯å±äºç±»ï¼Œç›¸å½“äºè¯´è¢«staticä¿®é¥°ä¹‹åï¼Œå°±ä¸æ˜¯æŸä¸ªäººçš„ç§æœ‰è´¢äº§ï¼Œè€Œæ˜¯å¤§å®¶çš„å…¬å…±è´¢äº§ã€‚è¢«staticä¿®é¥°çš„å˜é‡å’Œæ–¹æ³•åˆ†åˆ«å«åšé™æ€å˜é‡å’Œé™æ€æ–¹æ³•ã€‚ è®¿é—®staticä¿®é¥°çš„å˜é‡æˆ–æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡.è¯­æ³•ï¼Œå¯ä»¥é€šè¿‡ç±»å.ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡å.ã€‚ä»¥å‰æˆ‘ä»¬è°ƒç”¨æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•å°±æ˜¯é€šè¿‡å¯¹è±¡å.å‡ºæ¥çš„ã€‚ä½†æ˜¯è¿™é‡Œæ¨èä½¿ç”¨ç±»å.ï¼Œè¿™æ ·å¤§å®¶ä¸€çœ¼å°±å¯ä»¥çœ‹å‡ºè¿™æ˜¯å…±æœ‰è´¢äº§è€Œä¸æ˜¯ç§æœ‰è´¢äº§ã€‚è€Œä¸”å³ä½¿ä½ ä½¿ç”¨äº†å¯¹è±¡å.ï¼Œåœ¨ç¼–è¯‘å™¨ç¼–è¯‘æ—¶ä¹Ÿä¼šè‡ªåŠ¨è½¬æ¢ä¸ºç±»å.ã€‚ ä¸ºäº†ç†è§£staticä¿®é¥°ç¬¦ï¼Œæˆ‘ä»¬æ¥çœ‹è¿™ä¹ˆä¸€ä¸ªä¾‹å­ã€‚å‡è®¾æœ‰ä¸€ä¸ªStudentç±»ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªidæˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨èµ‹äºˆidå˜é‡ä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚è¯´ï¼Œå¦‚æœoneç¬¬ä¸€ä¸ªåˆ›å»ºçš„å­¦ç”Ÿï¼Œé‚£ä¹ˆå®ƒçš„idå°±æ˜¯1ï¼Œä»¥æ­¤ç±»æ¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªstaticå˜é‡idCounteræ¥è®¡æ•°ï¼Œæ¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ƒå°±åŠ ä¸€ public class Student &#123; String name; int id; static int idCounter; public Student() &#123; //æ¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œidè®¡æ•°å™¨åŠ ä¸€ï¼Œå¹¶ä¸”èµ‹ç»™id this.id = ++idCounter; &#125; public Student(String name) &#123; this.name = name; //æ¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œidè®¡æ•°å™¨åŠ ä¸€ï¼Œå¹¶ä¸”èµ‹ç»™id this.id = ++idCounter; &#125; public static void main(String[] args) &#123; Student one = new Student(\"one\"); System.out.println(\"æˆ‘çš„åå­—æ˜¯ï¼š\" + one.name + \"æˆ‘çš„idæ˜¯ï¼š\" + one.id); Student two = new Student(\"two\"); System.out.println(\"æˆ‘çš„åå­—æ˜¯ï¼š\" + two.name + \"æˆ‘çš„idæ˜¯ï¼š\" + two.id); &#125;&#125; è¾“å‡ºä¸º æˆ‘çš„åå­—æ˜¯ï¼šoneæˆ‘çš„idæ˜¯ï¼š1æˆ‘çš„åå­—æ˜¯ï¼štwoæˆ‘çš„idæ˜¯ï¼š2 è¿™é‡Œæˆ‘è¦è§£é‡Šä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæœ‰çš„æ–¹æ³•ä½¿ç”¨staticä¿®é¥°äº†ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœä½¿ç”¨staticä¿®é¥°ï¼Œè¯¥æ–¹æ³•å°±å¯ä»¥é€šè¿‡ç±».å‡ºæ¥ï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•æ˜¯æœ¬ç±»çš„ï¼Œé‚£ä¹ˆç±»åå¯ä»¥çœç•¥ä¸å†™ã€‚æ¯”å¦‚è¿™æ · public static void add() &#123; &#125;public static void main(String[] args) &#123; //åœ¨è¿™é‡Œè°ƒç”¨addæ–¹æ³•ï¼Œå±äºåŒä¸€ä¸ªç±»ï¼Œå¯ä»¥çœç•¥ç±»å add();&#125; å¦‚æœæˆ‘ä»¬éœ€è¦ç›´æ¥åœ¨mainæ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°±ä¼šä½¿ç”¨staticä¿®é¥°ã€‚è¿™é‡Œåªæ˜¯è§£é‡Šå‰é¢ä¸ºä»€ä¹ˆæœ‰çš„æ–¹æ³•è¦ä½¿ç”¨staticä¿®é¥°ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›ç›´æ¥è°ƒç”¨ã€‚ è¿™é‡Œæœ‰å…³staticæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„äº‹é¡¹ é™æ€åªèƒ½è®¿é—®é™æ€ï¼Œé™æ€ä¸èƒ½è®¿é—®éé™æ€ã€‚å³åœ¨é™æ€æ–¹æ³•é‡Œé¢ï¼Œä¸èƒ½è®¿é—®æˆå‘˜å˜é‡ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨æˆå‘˜æ–¹æ³•ã€‚è¿™æ—¶å› ä¸ºåœ¨å†…å­˜ä¸­ï¼Œå…ˆæœ‰é™æ€å†…å®¹ï¼Œåæœ‰éé™æ€å†…å®¹ã€‚â€å…ˆäººä¸çŸ¥åäººï¼ŒåäººçŸ¥é“å…ˆäººâ€ã€‚ é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨thisã€‚æˆ‘ä»¬çŸ¥é“ï¼Œè°è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆthiså°±æ˜¯è¿™ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯è°ƒç”¨é™æ€æ–¹æ³•æ˜¯ç±»ï¼Œè€Œä¸æ˜¯å¯¹è±¡ï¼Œå³ä½¿ä½¿ç”¨å¯¹è±¡è°ƒç”¨é™æ€æ–¹æ³•ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¹Ÿä¼šè½¬æ¢ä¸ºç±»è°ƒç”¨ã€‚ staticçš„å†…å­˜å›¾åœ¨æ–¹æ³•åŒºä¸­æœ‰ä¸€å—å†…å­˜ç©ºé—´ï¼Œä¸“é—¨ç”¨ä»¥ä¿å­˜é™æ€å˜é‡çš„ ä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œé™æ€å˜é‡ä¸å¯¹è±¡æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚ é™æ€ä»£ç å—é™æ€ä»£ç å—çš„æ ¼å¼æ˜¯ static &#123; &#125; è¯¥ä»£ç å—å†™åœ¨ç±»ä¸­ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ‰§è¡Œå”¯ä¸€çš„ä¸€æ¬¡ã€‚åé¢åœ¨åˆ›å»ºå¯¹è±¡ä¸ä¼šå†æ‰§è¡Œã€‚å®ƒå…ˆäºæ„é€ æ–¹æ³•çš„æ‰§è¡Œã€‚å®ƒçš„ä½œç”¨ä¸€èˆ¬æ˜¯ä¸ºäº†åˆå§‹åŒ–é™æ€å˜é‡ã€‚ ç»§æ‰¿ç»§æ‰¿ï¼Œä¸»è¦è§£å†³çš„æ˜¯å…±æ€§æŠ½å–ã€‚å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œå°±æ‹¥æœ‰çˆ¶ç±»æ‰€æœ‰çš„æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå­ç±»è¿˜å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å†…å®¹ã€‚å­ç±»ä¸çˆ¶ç±»çš„å…³ç³»ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼šå­ç±»å°±æ˜¯ä¸€ä¸ªçˆ¶ç±»ã€‚æ¯”å¦‚çˆ¶ç±»æ˜¯äººï¼Œå­ç±»æ˜¯å­¦ç”Ÿï¼Œå­ç±»å°±æ˜¯çˆ¶ç±»è¯´çš„å°±æ˜¯å­¦ç”Ÿæ˜¯äººã€‚ä¹Ÿå«is-aå…³ç³»ã€‚ ç»§æ‰¿çš„æ ¼å¼å­ç±»é€šè¿‡extendså…³é”®å­—åŸºç¡€çˆ¶ç±»ï¼Œè€Œçˆ¶ç±»çš„å®šä¹‰ä¸ä¸€èˆ¬ç±»çš„å®šä¹‰ç›¸åŒï¼Œç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªçˆ¶ç±»Personå’Œä¸€ä¸ªå­ç±»Studentã€‚ public class Person &#123; String name; int age; public void showA() &#123; System.out.println(\"æˆ‘æ˜¯çˆ¶ç±»çš„æ–¹æ³•\"); &#125;&#125; public class Student extends Person &#123; int id; //å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•&#125; å­ç±»è®¿é—®çˆ¶ç±»æˆå‘˜å˜é‡ä¸Šé¢è®²è¿‡ï¼Œä¸€æ—¦å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œé‚£ä¹ˆå­ç±»å°±æ‹¥æœ‰å­ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ã€‚é‚£ä¹ˆå­ç±»æ€ä¹ˆè®¿é—®çˆ¶ç±»çš„æˆå‘˜å˜é‡ï¼Œè¿™é‡Œåˆ†ä¸ºé‡åå’Œä¸é‡åä¸¤ç§ ä¸é‡å è¿™ç§æƒ…å†µæœ€ç®€å•ï¼Œè¿™æ—¶æ˜¯ç›´æ¥ç”¨å­ç±»å¯¹è±¡.çˆ¶ç±»çš„æˆå‘˜å˜é‡å°±å¯ä»¥è®¿é—® Student stu = new Student();stu.name;stu.age; é‡å ç›´æ¥ å¦‚æœä½¿ç”¨å­ç±»å¯¹è±¡.çš„è¯ï¼Œè®¿é—®çš„å°±æ˜¯å­ç±»çš„æˆå‘˜å˜é‡ é—´æ¥ é—´æ¥æŒ‡çš„å°±æ˜¯é€šè¿‡æˆå‘˜æ–¹æ³•è®¿é—®ï¼Œæ­¤æ—¶ä¸¾ä¸ªä¾‹å­è¯´æ˜ å‡è®¾çˆ¶ç±»æœ‰ä¸€ä¸ªint num;ï¼Œå­ç±»ä¹Ÿæœ‰ä¸€ä¸ªint num;ã€‚ç°åœ¨çˆ¶ç±»æœ‰ä¸€ä¸ªshowAæ–¹æ³•å¦‚ä¸‹ public void showA() &#123; System.out.println(num);&#125; é‚£ä¹ˆå¦‚æœå­ç±»å¯¹è±¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆä½¿ç”¨çš„å°±æ˜¯çˆ¶ç±»çš„numã€‚ç°åœ¨å¦‚æœå­ç±»æœ‰ä¸€ä¸ªshowBæ–¹æ³•ï¼Œå¦‚ä¸‹ public void showB() &#123; System.out.println(num);&#125; å¦‚æœå­ç±»å¯¹è±¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆä½¿ç”¨å°±æ˜¯å­ç±»çš„numã€‚ç®€è€Œè¨€ä¹‹ï¼Œæ–¹æ³•å±äºè°ï¼Œå°±ç”¨è°çš„ã€‚ åŒºåˆ†ä¸‰ç§å˜é‡è¿™ä¸‰ç§å˜é‡æŒ‡çš„å°±æ˜¯ çˆ¶ç±»çš„æˆå‘˜å˜é‡ å­ç±»çš„æˆå‘˜å˜é‡ å±€éƒ¨å˜é‡ ä¹‹å‰æˆ‘ä»¬è®²è¿‡åŒºåˆ†å±€éƒ¨å˜é‡å’Œæˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬ä½¿ç”¨thiså…³é”®å­—åŠ ä»¥åŒºåˆ†ã€‚ç°åœ¨å‡è®¾åœ¨å­ç±»çš„ä¸€ä¸ªæˆå‘˜æ–¹æ³•ä¸­ï¼Œçˆ¶ç±»ï¼Œå­ç±»æœ‰æˆå‘˜å˜é‡nameï¼Œè€Œè¯¥æ–¹æ³•ä¹Ÿæœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè¿™æ—¶æˆ‘ä»¬è¿™ä¹ˆåŒºåˆ†ï¼Œå¦‚ä¸‹ï¼š super.name; //çˆ¶ç±»çš„namethis.name; //å­ç±»çš„namename //å±€éƒ¨å˜é‡name åŒç†ï¼Œå¦‚æœå­ç±»æœ‰æˆå‘˜æ–¹æ³•å’Œçˆ¶ç±»çš„ä¸€ä¸ªæˆå‘˜æ–¹æ³•é‡åçš„è¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨å­ç±»çš„æŸä¸ªæˆå‘˜æ–¹æ³•ä¸­ä½¿ç”¨çˆ¶ç±»çš„è¿™ä¸ªæˆå‘˜æ–¹æ³•çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨super.çˆ¶ç±»æ–¹æ³•()è°ƒç”¨ã€‚superè¿™ä¸ªå…³é”®å­—æŒ‡çš„å°±æ˜¯çˆ¶ç±»å¯¹è±¡ã€‚ é‡å†™ä¹‹å‰æˆ‘ä»¬æœ‰å¤šæ¬¡æåˆ°é‡å†™çš„æ¦‚å¿µï¼Œé‚£ä¹ˆé‡å†™æ˜¯ä»€ä¹ˆ? é‡å†™æŒ‡çš„å°±æ˜¯å­ç±»çš„æŸä¸ªæ–¹æ³•ä¸çˆ¶ç±»çš„æ–¹æ³•çš„æ–¹æ³•åç§°ä¸€æ ·ï¼Œå‚æ•°åˆ—è¡¨ä¹Ÿä¸€æ ·ï¼Œç›¸å½“äºæŠŠçˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•è¦†ç›–äº†ã€‚å½“æˆ‘ä»¬ä½¿ç”¨å­ç±»å¯¹è±¡.è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨å­ç±»çš„æ–¹æ³•ã€‚ é‡å†™çš„æ–¹æ³•éœ€è¦æ»¡è¶³ä¸€å®šçš„è¦æ±‚ï¼Œå¦‚ä¸‹ï¼š å¿…é¡»çˆ¶å­ç±»æ–¹æ³•åç›¸åŒï¼Œå‚æ•°åˆ—è¡¨ç›¸åŒ å­ç±»æ–¹æ³•çš„è¿”å›å€¼èŒƒå›´è¦å°äºçˆ¶ç±»æ–¹æ³•(Object &gt; String) å­ç±»æ–¹æ³•çš„æƒé™å¿…é¡»å¤§äºç­‰äºçˆ¶ç±»çš„æƒé™æ“ä½œç¬¦ //æƒé™ä¿®é¥°ç¬¦çš„å¤§å°ç†Ÿæ‚‰æ€’public &gt; protected &gt; (default) &gt; private æ³¨æ„ï¼š æœ‰ä¸€ä¸ªæ³¨è§£ï¼Œ@Overrideï¼ŒæŠŠå®ƒæ”¾åœ¨è¦é‡å†™çš„æ–¹æ³•å‰é¢ï¼Œå¯ä»¥æ£€æŸ¥æ˜¯å¦é‡å†™æ­£ç¡®ï¼Œæ¯”å¦‚ä½ é‡å†™çš„æ–¹æ³•æ¼æ‰äº†ä¸€ä¸ªå­—æ¯ï¼Œè¿™ç›¸å½“äºä½ è‡ªå·±æœ‰äº†ä¸€ä¸ªæ–°çš„æˆå‘˜æ–¹æ³•ï¼Œå¹¶ä¸æ˜¯é‡å†™ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œè¿™å¯èƒ½ä¼šé€ æˆé—®é¢˜ï¼Œå› ä¸ºä½ æ˜¯æƒ³é‡å†™çš„ã€‚ä½†æ˜¯ä½ å¦‚æœåœ¨æ–¹æ³•å‰é¢åŠ ä¸Š@Overrideï¼Œå®ƒä¼šæ£€æŸ¥è¿™ä¸ªæ–¹æ³•æ˜¯ä¸æ˜¯é‡å†™ï¼Œå¦‚æœä¸æ˜¯ä¼šæŠ¥é”™ã€‚è¿™ä¸ªæ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ã€‚ @Override //å†™åœ¨æ–¹æ³•çš„å‰é¢public void show() &#123; &#125; ç»§æ‰¿ä¸­çš„æ„é€ æ–¹æ³•ä¸ºäº†è®²è§£æ¸…æ¥šï¼Œå‡è®¾æœ‰ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªæ˜¯Personç±»ï¼Œæ˜¯çˆ¶ç±»ï¼Œå¦ä¸€ä¸ªæ˜¯Studentç±»ï¼Œæ˜¯å­ç±»ã€‚ä¸¤ä¸ªæ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ public class Person &#123; public Person() &#123; System.out.println(\"çˆ¶ç±»çš„æ„é€ æ–¹æ³•\") &#125;&#125; public class Student extends Person&#123; public Student() &#123; System.out.println(\"æˆ‘æ˜¯å­ç±»çš„æ„é€ æ–¹æ³•\"); &#125;&#125; æˆ‘è¦è®²çš„æ˜¯ï¼Œåœ¨å­ç±»æ„é€ æ–¹æ³•çš„ç¬¬ä¸€è¡Œï¼Œé»˜è®¤æœ‰super();ï¼Œè¿™ä¸ªä»£è¡¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œå³åœ¨è°ƒç”¨å­ç±»æ„é€ æ–¹æ³•æ—¶ï¼Œä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ æ–¹æ³•ï¼Œç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªStudentå¯¹è±¡ï¼Œçœ‹çœ‹æ‰“å°è¾“å‡º public class TestExtends &#123; public static void main(String[] args) &#123; Student student = new Student(); &#125;&#125; æ‰“å°è¾“å‡ºä¸º æˆ‘æ˜¯çˆ¶ç±»çš„æ„é€ æ–¹æ³•æˆ‘æ˜¯å­ç±»çš„æ„é€ æ–¹æ³• å¯è§æ˜¯é»˜è®¤ä¼šè°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ æ–¹æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ä¹‹å‰å»ºè®®ä¸ºç±»å†™ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ï¼Œå› ä¸ºåœ¨åˆ›å»ºå­ç±»å¯¹è±¡æ—¶ä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„æ— å‚æ„é€ æ–¹æ³•ï¼Œå¦‚æœçˆ¶ç±»æ²¡æœ‰çš„è¯ï¼Œä¼šæŠ¥é”™ã€‚ æ³¨æ„ï¼š superè°ƒç”¨å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªè¯­å¥ï¼Œæ¯”å¦‚ä¸‹é¢ä¼šæŠ¥é”™ public Student() &#123; System.out.println(\"æˆ‘æ˜¯å­ç±»çš„æ„é€ æ–¹æ³•\"); super(); //ä¼šæŠ¥é”™ï¼Œå› ä¸ºä¸æ˜¯ç¬¬ä¸€ä¸ªè¯­å¥&#125; è¿™ä¹Ÿæ„å‘³ç€åœ¨æ–¹æ³•ä¸­åªèƒ½è°ƒç”¨ä¸€æ¬¡super()æ–¹æ³•ï¼Œå› ä¸ºç¬¬äºŒä¸ªsuperä¸æ˜¯ç¬¬ä¸€ä¸ªè¯­å¥äº† public Student() &#123; super(); super(\"name\",12); //å‡è®¾çˆ¶ç±»æœ‰ä¸€ä¸ªæœ‰å‚æ„é€ æ–¹æ³• ç”±äºä¸æ˜¯ç¬¬ä¸€ä¸ªè¯­å¥ï¼ŒæŠ¥é”™ //è¿™æ„å‘³ç€åªèƒ½è°ƒç”¨ä¸€ä¸ªsuper()æ–¹æ³• System.out.println(\"æˆ‘æ˜¯å­ç±»çš„æ„é€ æ–¹æ³•\"); &#125; this()å¯ä»¥è°ƒç”¨æœ¬ç±»çš„æ„é€ æ–¹æ³•ï¼Œthis()ä¹Ÿå¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªè¯­å¥ï¼Œæ‰€ä»¥this()å’Œsuper()ä¸èƒ½åŒæ—¶å‡ºç°ã€‚ å¦‚æœçˆ¶ç±»æœ‰æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å­ç±»çš„æ„é€ æ–¹æ³•ä¸­æ˜¾å¼çš„è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦‚ä¸Šé¢super(â€œnameâ€,12)ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸ä¼šé»˜è®¤è°ƒç”¨æ— å‚çš„æ„é€ æ–¹æ³•ã€‚æ‰€ä»¥çˆ¶ç±»ä¸­æ²¡æœ‰æ— å‚çš„æ„é€ æ–¹æ³•ä¸ä¸€å®šä¼šæŠ¥é”™ã€‚å»ºè®®æœ€å¥½è¿˜æ˜¯å†™ä¸€ä¸ªå§ï¼Œå³ä½¿ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæœ‰ç‰¹æ®Šéœ€æ±‚çš„é™¤å¤–ã€‚ ç»§æ‰¿çš„ä¸‰ä¸ªç‰¹å¾ Javaè¯­è¨€æ˜¯å•ç»§æ‰¿çš„ï¼Œåªèƒ½æœ‰ä¸€ä¸ªç›´æ¥çˆ¶ç±» å¯ä»¥æœ‰å¤šçº§ç»§æ‰¿ï¼Œç»§æ‰¿çš„æºå¤´æ˜¯Object ä¸€ä¸ªå­ç±»çš„ç›´æ¥çˆ¶ç±»æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªå­ç±» æŠ½è±¡ç±»æŠ½æ ·æ–¹æ³•ï¼šä½¿ç”¨å…³é”®å­—abstractä¿®é¥°çš„æ–¹æ³•ï¼ŒæŠ½è±¡æ–¹æ³•æ²¡æœ‰æ–¹æ³•ä½“ï¼Œç›´æ¥å¤§æ‹¬å·ç»“æŸã€‚æŠ½æ ·æ–¹æ³•æ‰€åœ¨çš„ç±»å¿…é¡»æ˜¯æŠ½æ ·ç±»ï¼ŒæŠ½æ ·ç±»çš„å®šä¹‰æ˜¯åœ¨classå‰é¢åŠ abstractã€‚ å¦‚ä¸‹å®šä¹‰äº†ä¸€ä¸ªæŠ½æ ·ç±» public abstract class Animal &#123; public abstract void eat(); public abstract void sleep();&#125; eat(), sleep()æ–¹æ³•æ˜¯æŠ½æ ·æ–¹æ³•ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ï¼Œç›´æ¥åˆ†å·ç»“æŸã€‚ æ³¨æ„ï¼š ä¸èƒ½ç›´æ¥åˆ›å»ºæŠ½è±¡ç±»å¯¹è±¡ï¼Œåº”å½“ç”¨ä¸€ä¸ªç±»ç»§æ‰¿è¯¥æŠ½è±¡ç±»ï¼Œè¯¥ç±»å¿…é¡»é‡å†™æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå¦‚æœè¯¥ç±»æ²¡æœ‰é‡å†™æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥ç±»ä¹Ÿå¿…é¡»æ˜¯æŠ½è±¡ç±»ã€‚ æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ æ–¹æ³•ï¼Œç»™æŠ½è±¡ç±»çš„æˆå‘˜å˜é‡åˆå§‹åŒ– æŠ½æ ·ç±»ä¸ä¸€å®šè¦æœ‰æŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å«æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»æ˜¯æŠ½è±¡ç±» å¦‚ä¸‹åˆ›å»ºä¸€ä¸ªDogç±»ç»§æ‰¿æŠ½è±¡ç±»Animal public class Dog extends Animal &#123; @Override public void eat() &#123; System.out.println(\"æ±ªæ±ªæ±ª...\"); &#125; @Override public void sleep() &#123; System.out.println(\"å‘¼å‘¼å‘¼...\"); &#125; public static void main(String[] args) &#123; Dog dog = new Dog(); dog.eat(); dog.sleep(); &#125;&#125; è¾“å‡ºä¸º æ±ªæ±ªæ±ª...å‘¼å‘¼å‘¼... æ¥å£æ¥å£å°±æ˜¯å…¬å…±çš„è§„èŒƒæ ‡å‡†ã€‚ æ¥å£çš„å®šä¹‰æˆ‘ä»¬ç±»çš„å®šä¹‰æ˜¯ä½¿ç”¨classå…³é”®å­—ï¼Œè€Œæ¥å£çš„å®šä¹‰æ˜¯ä½¿ç”¨interfaceå…³é”®å­—ã€‚å¦‚ä¸‹å®šä¹‰äº†ä¸€ä¸ªæ¥å£ public interface MyInterface &#123; ...&#125; æ¥å£é‡Œé¢å¯ä»¥æœ‰ä»€ä¹ˆï¼Œè¿™ä¸ç‰ˆæœ¬æœ‰å…³ã€‚ Java 7 å¸¸é‡ æŠ½è±¡æ–¹æ³• Java 8(æ–°å¢) é»˜è®¤æ–¹æ³• é™æ€æ–¹æ³• Java 9(æ–°å¢) ç§æœ‰æ–¹æ³• æ¥å£çš„ä½¿ç”¨ æ¥å£ä¸èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦ä¸€ä¸ªç±»å»å®ç°å®ƒã€‚æˆ‘ä»¬åœ¨ä¹‹å‰ä½¿ç”¨extendså»ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œè€Œå®ç°ä¸€ä¸ªæ¥å£ä½¿ç”¨implementså…³é”®å­—ï¼Œå¦‚ public class MyClass implements MyInterface &#123; &#125; å®ç°å¿…é¡»å®ç°æ¥å£ä¸­çš„æ‰€æœ‰æŠ½æ ·æ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰å…¨éƒ¨å®ç°ï¼Œé‚£ä¹ˆè¯¥ç±»å¿…é¡»ä¸ºæŠ½æ ·ç±» åˆ›å»ºå®ç°ç±»å¯¹è±¡ä½¿ç”¨ æŠ½è±¡æ–¹æ³•æ¥å£ä¸­çš„æŠ½æ ·æ–¹æ³•çš„ä¿®é¥°ç¬¦å¿…é¡»æ˜¯public abstractï¼Œæ‰€è¿™ä¸¤ä¸ªå…³é”®å­—å¯ä»¥çœå»ï¼Œå¦‚ä¸‹çš„å†™æ³•éƒ½æ˜¯å¯¹çš„ public abstract void eat(); //ä¸çœç•¥abstract void eat(); //åªçœç•¥publicpublic void eat(); //åªçœç•¥abstractvoid eat(); //ä¸¤ä¸ªéƒ½çœç•¥ é»˜è®¤æ–¹æ³•é»˜è®¤æ–¹æ³•çš„å®šä¹‰ä¸º public default è¿”å›å€¼ æ–¹æ³•å(å‚æ•°åˆ—è¡¨) &#123; //ä¿®é¥°ç¬¦å¿…é¡»æ˜¯publicï¼Œæ‰€ä»¥publicå¯ä»¥çœç•¥ //æ–¹æ³•ä½“&#125; é»˜è®¤æ–¹æ³•å°±è¦è§£å†³çš„æ˜¯å‡çº§é—®é¢˜ã€‚å‡è®¾ä½ è¦å‡çº§ä¸€ä¸ªæ¥å£ï¼Œå¦‚æœä½ æ·»åŠ ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆç”±äºå®ç°ç±»æ²¡æœ‰å®ç°è¯¥æŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆå®ç°ç±»å°±ä¸èƒ½ä½¿ç”¨ï¼Œè¿™æ ·æ˜¯ä¸åˆç†çš„ã€‚ä½†æ˜¯æ·»åŠ é»˜è®¤æ–¹æ³•çš„è¯ï¼Œå®ç°ç±»ä¸éœ€è¦å®ç°è¯¥æ–¹æ³•ï¼Œå®ç°ç±»å¯ä»¥æ­£å¸¸çš„ä½¿ç”¨ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å®ç°ç±»å¯¹è±¡è°ƒç”¨è¯¥é»˜è®¤æ–¹æ³•ã€‚ é™æ€æ–¹æ³•é™æ€æ–¹æ³•çš„å®šä¹‰ä¸º public static è¿”å›å€¼ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)&#123; //åŒdefaultæ–¹æ³•ï¼Œpublicå¯ä»¥çœç•¥ //æ–¹æ³•ä½“&#125; å®ç°ç±»ä¸èƒ½ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•ï¼Œåªèƒ½é€šè¿‡æ¥å£.é™æ€æ–¹æ³•è°ƒç”¨ã€‚å› ä¸ºä¸€ä¸ªå®ç°ç±»æ˜¯å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªæ¥å£çš„ï¼Œå¦‚ä½•å¤šä¸ªæ¥å£æœ‰ç›¸åŒçš„é™æ€æ–¹æ³•ï¼Œé‚£ä¹ˆé€šè¿‡å®ç°ç±»è°ƒç”¨é™æ€æ–¹æ³•ï¼Œé‚£ä¹ˆè°ƒç”¨å“ªä¸ªå‘¢ï¼Ÿæ‰€ä»¥å®ç°ç±»æ˜¯ä¸èƒ½ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•çš„ã€‚ä¸åŒäºç»§æ‰¿ï¼Œå› ä¸ºç»§æ‰¿åªæœ‰ä¸€ä¸ªç›´æ¥çˆ¶ç±»ã€‚ ç§æœ‰æ–¹æ³•ç§æœ‰æ–¹æ³•æ˜¯ä¸ºè§£å†³ä»£ç é‡å¤é—®é¢˜çš„ã€‚å‡è®¾æœ‰ä¸¤ä¸ªé»˜è®¤æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªé»˜è®¤æ–¹æ³•çš„ä»£ç é‡å¤å¾ˆå¤šï¼Œé‚£æˆ‘ä»¬æƒ³ç€å¯ä»¥æŠŠé‡å¤çš„ä»£ç æŠ½å‡ºæ¥å½¢æˆä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œç„¶ååœ¨è¿™ä¸¤ä¸ªé»˜è®¤æ–¹æ³•ä¸­è°ƒç”¨è¿™ä¸ªæ–°æ–¹æ³•å°±å¯ä»¥ã€‚ä½†æ˜¯è¿™ä¸ªæ–°æ–¹æ³•æ˜¯ä¸€ä¸ªä¸­é—´æ–¹æ³•ï¼Œåº”å½“æ˜¯åªèƒ½åœ¨æ¥å£å†…æ‰èƒ½å¤Ÿè¢«è°ƒç”¨ï¼Œæ‰€ä»¥ä¸èƒ½æ˜¯é»˜è®¤æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åº”è¯¥è¢«å®šä¹‰ä¸ºç§æœ‰æ–¹æ³•ã€‚ ç§æœ‰æ–¹æ³•åˆ†ä¸ºä¸¤ç±» æ™®é€šç§æœ‰æ–¹æ³• è§£å†³é»˜è®¤æ–¹æ³•ä»£ç é‡å¤é—®é¢˜ï¼Œåªä½¿ç”¨privateä¿®é¥° é™æ€ç§æœ‰æ–¹æ³• è§£å†³é™æ€æ–¹æ³•ä»£ç é‡å¤é—®é¢˜ï¼Œä½¿ç”¨private staticä¿®é¥° å¸¸é‡æ¥å£ä¸­ä¹Ÿèƒ½å®šä¹‰â€æˆå‘˜å˜é‡â€ï¼Œåªä¸è¿‡å¿…é¡»ä½¿ç”¨public static finalä¿®é¥°ï¼Œfinalä»£è¡¨çš„å°±æ˜¯ä¸å¯å˜çš„æ„æ€ï¼Œæ‰€ä»¥å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªå¸¸é‡ã€‚æ¥å£ä¸­çš„å¸¸é‡å¿…é¡»è¿›è¡Œèµ‹å€¼ï¼Œä¸èƒ½ä¸èµ‹å€¼ public static final int NUM = 10ï¼› å¯¹äºå¸¸é‡ï¼Œæˆ‘ä»¬é‡‡ç”¨æ‰€æœ‰å­—æ¯å¤§å†™ï¼Œå¹¶ä¸”å•è¯ä¹‹é—´ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†å‰²ã€‚æ¥å£ä½¿ç”¨å¸¸é‡çš„æ–¹æ³•æ˜¯æ¥å£.å¸¸é‡ï¼ŒåŸå› åŒé™æ€æ–¹æ³•ä¸€æ ·ã€‚ æ³¨æ„äº‹é¡¹ æ¥å£æ²¡æœ‰é™æ€ä»£ç å—å’Œæ„é€ æ–¹æ³• ä¸€ä¸ªç±»å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªæ¥å£ ... implements æ¥å£1ï¼Œæ¥å£2ï¼Œ... å¦‚æœå®ç°çš„ä¸¤ä¸ªæ¥å£æœ‰ç›¸åŒçš„æŠ½è±¡æ–¹æ³•ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªå³å¯ ä¸èƒ½æ²¡æœ‰å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆå°±å¿…é¡»æ˜¯æŠ½è±¡ç±» å¦‚æœå®ç°çš„ä¸¤ä¸ªæ¥å£æœ‰é‡å¤çš„é»˜è®¤æ–¹æ³•ï¼Œé‚£ä¹ˆå®ç°ç±»å¿…é¡»é‡å†™è¯¥é»˜è®¤æ–¹æ³• ä¸€ä¸ªç±»çš„ç›´æ¥çˆ¶ç±»ä¸æ¥å£çš„é»˜è®¤æ–¹æ³•é‡å¤çš„è¯ï¼Œä¼˜å…ˆä½¿ç”¨ç›´æ¥çˆ¶ç±»çš„æ–¹æ³• æ¥å£ä¸æ¥å£ä¹‹é—´å¤šç»§æ‰¿çš„ æ¥å£ extends æ¥å£1ï¼Œæ¥å£2ï¼Œ... å¦‚æœç»§æ‰¿çš„å¤šä¸ªæ¥å£é»˜è®¤æ–¹æ³•é‡å¤ï¼Œé‚£ä¹ˆå¿…é¡»é‡å†™ï¼Œä¸”é‡å†™çš„æ–¹æ³•å¿…é¡»ä¸ºé»˜è®¤æ–¹æ³•ã€‚å¦‚æœæŠ½è±¡æ–¹æ³•é‡å¤ï¼Œåªç»§æ‰¿ä¸€ä¸ªã€‚ å¤šæ€ç»§æ‰¿å’Œå®ç°æ¥å£æ˜¯å¤šæ€çš„åŸºç¡€ã€‚ å¤šæ€çš„å®šä¹‰å¤šæ€çš„å®šä¹‰å°±æ˜¯çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€‚ çˆ¶ç±» å¯¹è±¡å = new å­ç±»();æ¥å£ å¯¹è±¡å = new å®ç°ç±»(); å¦‚å‡è®¾æœ‰ä¸€ä¸ªçˆ¶ç±»Personå’Œä¸€ä¸ªå­ç±»Studentå¦‚ä¸‹ public class Person &#123; String name = \"çˆ¶ç±»\"; public Person() &#123; &#125; public void show() &#123; System.out.println(\"æˆ‘æ˜¯çˆ¶ç±»çš„showæ–¹æ³•\"); &#125;&#125; public class Student extends Person&#123; String name = \"å­ç±»\"; @Override public void show() &#123; System.out.println(\"æˆ‘æ˜¯å­ç±»çš„showæ–¹æ³•\"); &#125;&#125; ç°åœ¨æˆ‘ä½¿ç”¨å¤šæ€çš„å†™æ³•ï¼Œåˆ›å»ºä¸€ä¸ªStudentå¯¹è±¡æŒ‡å‘Personå¼•ç”¨ï¼Œå¹¶ä¸”è°ƒç”¨showæ–¹æ³• public class Muti &#123; public static void main(String[] args) &#123; Person per = new Student(); per.show(); System.out.println(per.name); &#125;&#125; è¿™æ—¶çš„è¾“å‡ºä¸º æˆ‘æ˜¯å­ç±»çš„showæ–¹æ³•çˆ¶ç±» æ˜¯ä¸æ˜¯æœ‰ç‚¹éš¾ä»¥ç†è§£ä¸Šé¢çš„è¾“å‡ºï¼Œä¸‹é¢è®²è§£ä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šæœ‰ä¸Šé¢çš„è¾“å‡ºã€‚ å¤šæ€è®¿é—®æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•çš„è§„åˆ™è®¿é—®æˆå‘˜æ–¹æ³•çš„è§„åˆ™ å¦‚æœå¤šæ€å†™æ³•åˆ›å»ºçš„å¯¹è±¡ï¼Œè°ƒç”¨æˆå‘˜æ–¹æ³•æ—¶ï¼Œåœ¨ç¼–è¯‘æ—¶çœ‹å·¦è¾¹ï¼Œå³çœ‹çˆ¶ç±»æœ‰æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœçˆ¶ç±»æ²¡æœ‰ï¼Œé‚£ä¹ˆä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹é¢æˆ‘åœ¨Studentä¸­æ–°å»ºäº†ä¸€ä¸ªå­ç±»ç‰¹æœ‰çš„æ–¹æ³•ï¼Œå¦‚æœä½¿ç”¨perå¯¹è±¡è°ƒç”¨çš„è¯ï¼Œå°†ä¼šå‘ç”Ÿé”™è¯¯ã€‚ public class Student extends Person&#123; String name = \"å­ç±»\"; @Override public void show() &#123; System.out.println(\"æˆ‘æ˜¯å­ç±»çš„showæ–¹æ³•\"); &#125; public void showAgain() &#123; System.out.println(\"æˆ‘æ˜¯å­ç±»ç‰¹æœ‰çš„æ–¹æ³•\"); &#125;&#125; æˆ‘ä»¬è§‚å¯Ÿåˆ°ç¨‹åºæŠ¥é”™äº†ï¼Œå› ä¸ºçˆ¶ç±»å¹¶æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ã€‚ åœ¨è¿è¡Œæ—¶çœ‹å³è¾¹ï¼Œå³å¦‚æœè¿™ä¸ªæ–¹æ³•å­ç±»é‡å†™äº†ï¼Œé‚£ä¹ˆè°ƒç”¨å­ç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢ä¹Ÿçœ‹åˆ°äº†ï¼Œè¾“å‡ºçš„æ˜¯å­ç±»çš„æ–¹æ³• å£è¯€ï¼šâ€ç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œçœ‹å³è¾¹â€ è®¿é—®æˆå‘˜å˜é‡çš„è§„åˆ™è®¿é—®æˆå‘˜å˜é‡çš„è§„åˆ™ä¸è®¿é—®æˆå‘˜æ–¹æ³•çš„è§„åˆ™ä¸åŒã€‚ è®¿é—®æˆå‘˜å˜é‡æ—¶ï¼Œç¼–è¯‘æ—¶çš„è§„åˆ™ä¹Ÿä¸€æ ·ï¼Œå¦‚æœçˆ¶ç±»æ²¡æœ‰è¯¥å˜é‡ï¼Œåˆ™è®¿é—®ä¸äº†è¯¥å˜é‡ã€‚è®¿é—®ä¸äº†å­ç±»çš„å˜é‡ã€‚ å³ä½¿å­ç±»ä¸­çš„æˆå‘˜å˜é‡ä¸çˆ¶ç±»ä¸­çš„æˆå‘˜å˜é‡é‡åï¼Œé‚£ä¹ˆè®¿é—®çš„ä¹Ÿæ˜¯çˆ¶ç±»çš„æˆå‘˜å˜é‡ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ï¼Œæˆ‘ä»¬åœ¨æ‰“å°è¾“å‡ºnameæ˜¯è¾“å‡ºçš„æ˜¯çˆ¶ç±»çš„æˆå‘˜å˜é‡ã€‚ å£è¯€ï¼šâ€ç¼–è¯‘çœ‹å·¦è¾¹ï¼Œè¿è¡Œä¹Ÿçœ‹å·¦è¾¹â€ å¯¹è±¡è½¬å‹å¯¹è±¡è½¬å‹åˆ†ä¸ºå‘ä¸Šè½¬å‹å’Œå‘ä¸‹è½¬å‹ã€‚ å¯¹è±¡å‘ä¸Šè½¬å‹å¤šæ€å°±æ˜¯å‘ä¸Šè½¬å‹ï¼Œå› ä¸ºæ˜¯å­ç±»å¯¹è±¡æŒ‡å‘çˆ¶ç±»çš„å¼•ç”¨ã€‚åˆ›å»ºçš„æ˜¯å­ç±»çš„å¯¹è±¡ï¼Œä½†æ˜¯ä½¿ç”¨å´æ˜¯å½“åšçˆ¶ç±»å¯¹è±¡ä½¿ç”¨ã€‚å¤šæ€æœ‰ä¸€ä¸ªæ˜æ˜¾çš„å¼Šç«¯å°±æ˜¯æ— æ³•ä½¿ç”¨å­ç±»ç‰¹æœ‰çš„æ–¹æ³•å’Œå­ç±»çš„æˆå‘˜å˜é‡ã€‚ å¯¹è±¡å‘ä¸‹è½¬å‹æˆ‘ä»¬æåˆ°äº†å¤šæ€çš„å¼Šç«¯ï¼Œä½†æ˜¯æˆ‘å°±æ˜¯è¦ä½¿ç”¨å­ç±»çš„ç‰¹æœ‰æ–¹æ³•æ€ä¹ˆåŠï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘ä¸‹è½¬å‹ï¼Œæ¯”å¦‚ Person per = new Student();Student stu = (Student) per; //å‘ä¸‹è½¬å‹ è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Studentå¯¹è±¡ç‰¹æœ‰çš„æ–¹æ³•äº†ï¼Œæ¯”å¦‚ public class Muti &#123; public static void main(String[] args) &#123; Person per = new Student(); Student stu = (Student) per; stu.showAgain(); &#125;&#125; è¾“å‡ºä¸º æˆ‘æ˜¯å­ç±»ç‰¹æœ‰çš„æ–¹æ³• ä½†æ˜¯ï¼Œå‘ä¸‹è½¬å‹è¦æ³¨æ„ï¼Œæˆ‘åŸæ¥æ˜¯Studentå¯¹è±¡æ‰èƒ½è½¬ä¸ºStudentå¯¹è±¡ï¼Œæˆ‘å¦‚æœåŸæ¥ä¸æ˜¯ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚ä¸‹é¢æˆ‘åˆ›å»ºä¸€ä¸ªTeacherç»§æ‰¿äº†Personï¼Œç°åœ¨æˆ‘è¦æŠŠperå¼ºè¡Œè½¬å‹ä¸ºTeacherå¯¹è±¡ æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œåœ¨ç¼–è¯‘æ—¶å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œç°åœ¨æˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸‹ æŠ›å‡ºäº†ClassCastExceptionå¼‚å¸¸ï¼Œæ„æ€æ˜¯ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚æ‰€ä»¥å‘ä¸‹è½¬å‹ä¸å®‰å…¨ã€‚ é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ›å»ºä¸€ä¸ªå­ç±»å¯¹è±¡æŒ‡å‘å­ç±»å‘¢ï¼Ÿä½•å¿…å¤šæ¬¡ä¸€ä¸¾ä½¿ç”¨å¤šæ€å†™æ³•ç„¶ååˆç»™è½¬å›æ¥å‘¢? æˆ‘ä»¬æ¥çœ‹è¿™ä¹ˆä¸€ä¸ªæ–¹æ³• public void someMethod(Person per) è¿™ä¸ªç±»çš„æ–¹æ³•å‚æ•°åªè¦æ±‚æ˜¯Personå°±å¯ä»¥ï¼Œå®ƒä¸ç®¡ä½ æ˜¯Studentè¿˜æ˜¯Teacherï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æŠŠStudentå¯¹è±¡ä¼ è¿›å»ï¼Œè¿™æ˜¯ä¸æ˜¯å¤šæ€çš„å†™æ³•ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é‡Œé¢è¦ç”¨åˆ°Studentç‰¹æœ‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯è¦å‘ä¸‹è½¬å‹ã€‚ å…¶å®å¸¸å¸¸æˆ‘ä»¬ä½¿ç”¨æ¥å£ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºçš„æ„æ€å°±æ˜¯æˆ‘æ‰ä¸ç®¡ä½ æ˜¯ä»€ä¹ˆï¼Œä½ åªæœ‰å®ç°æˆ‘çš„æ¥å£å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥ä½¿ç”¨ä½ äº†ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªæ¥å£å«åšUSBï¼Œé‚£ä¹ˆä¼ è¿›æ¥çš„å‚æ•°ï¼Œä½ åªè¦å®ç°äº†æˆ‘ä»¬USBæ¥å£å°±å¯ä»¥ï¼Œä¸ç®¡ä½ æ˜¯é¼ æ ‡å®ç°äº†è¿˜æ˜¯é”®ç›˜å®ç°äº†ï¼Œä½ åªè¦å®ç°äº†ï¼Œæˆ‘å°±å¯ä»¥ç”¨ã€‚è¿™å°±æ˜¯å¤šæ€çš„ç”¨æ³•å•Šã€‚ instanceofä¸Šé¢æˆ‘ä»¬è¯´äº†ï¼Œå¯¹è±¡çš„å‘ä¸‹è½¬å‹æ˜¯æœ‰é£é™©çš„ï¼Œå› ä¸ºå¦‚æœæˆ‘ä¸æ˜¯Studentä½ ç»™æˆ‘è½¬ç»™Studenté‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸çš„ã€‚ç°åœ¨instanceofå…³é”®å­—å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»–å¯ä»¥åˆ¤æ–­å¤šæ€åˆ›å»ºçš„çˆ¶ç±»å¼•ç”¨ä¸ºå“ªä¸ªå­ç±»ã€‚å…·ä½“ç”¨æ³•ä¸º å¤šæ€åˆ›å»ºçš„çˆ¶ç±»å¼•ç”¨ instanceof å­ç±» è¯¥è¡¨è¾¾å¼è¿”å›ä¸€ä¸ªbooleanå€¼ï¼Œå¦‚æœå¤šæ€åˆ›å»ºçš„çˆ¶ç±»å¼•ç”¨æ˜¯è¿™ä¸ªå­ç±»ï¼Œé‚£ä¹ˆè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ä¾‹å¦‚ Person per = new Student();per instanceof Student; //trueper instanceof Teacher; //false ç°åœ¨è€ƒè™‘è¿™ä¹ˆä¸€ä¸ªå‡½æ•° public void someMethod(Person per) æˆ‘ä»¬ç°åœ¨å°±åœ¨æ–¹æ³•ä¸­æ ¹æ®per instanceof Xxxçš„ç»“æœè¿›è¡Œå®‰å…¨çš„å‘ä¸‹è½¬å‹ public void someMethod(Person per) &#123; if (per instanceof Student) &#123; Student student = (Student) per; //å®ç°Studentå¯¹è±¡ç‰¹æœ‰çš„æ“ä½œ &#125; else if (per instanceof Teacher) &#123; Teacher teacher = (Teacher) per; //å®ç°Teacherå¯¹è±¡ç‰¹æœ‰çš„æ“ä½œ &#125;&#125; finalfinalå…³é”®å­—å¯ä»¥ä¿®é¥° ä¸€ä¸ªç±» ä¿®é¥°ä¸€ä¸ªç±»æ—¶ï¼Œè¯¥ç±»ä¸èƒ½å¤Ÿè¢«ç»§æ‰¿ æ‰€ä»¥finalä¸èƒ½å’Œabstractå…³é”®å­—ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºæŠ½è±¡ç±»ä¸èƒ½è‡ªå·±åˆ›å»ºå¯¹è±¡ï¼Œåªèƒ½è¢«ç»§æ‰¿ æ–¹æ³• ä¿®é¥°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå­ç±»ä¸èƒ½é‡å†™è¯¥æ–¹æ³• å±€éƒ¨å˜é‡ ä¿®é¥°ä¸€ä¸ªå±€éƒ¨å˜é‡æ—¶ï¼Œè¿™ä¸ªå˜é‡ä¸èƒ½è¿›è¡Œæ›´æ”¹ ä¸‹é¢ä¸¤ç§å†™æ³•éƒ½å¯ä»¥ final int num = 10; final int num;num = 10; æˆå‘˜å˜é‡ å› ä¸ºæˆå‘˜å˜é‡æœ‰é»˜è®¤å€¼ï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨èµ‹å€¼ è¦ä¹ˆç›´æ¥èµ‹å€¼ï¼Œè¦ä¹ˆåœ¨æ„é€ æ–¹æ³•ä¸­è¿›è¡Œèµ‹å€¼ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­èµ‹å€¼æ—¶ï¼Œæ‰€æœ‰çš„æ„é€ æ–¹æ³•éƒ½è¦è¿›è¡Œèµ‹å€¼ï¼Œå³ä½¿æ˜¯æ— å‚æ„é€ æ–¹æ³•ï¼Œä¹Ÿè¦è¿›è¡Œèµ‹å€¼ final int num = 10;//ä¸‹é¢çš„å†™æ³•æ˜¯é”™è¯¯çš„final int num;num = 10; public Xxx() &#123; num = 0;&#125;public Xxx(int num) &#123; this.num = num;&#125; æƒé™ä¿®é¥°ç¬¦æƒé™ä¿®é¥°ç¬¦æ€»å…±æœ‰å››ç§ï¼Œæƒé™ä»å¤§åˆ°å°çš„é¡ºåºä¸º public protected (default)ï¼Œå°±æ˜¯ä»€ä¹ˆéƒ½ä¸å†™ private ä¸‹è¡¨åˆ—å‡ºäº†ä¸åŒä¿®é¥°ç¬¦ä¸‹çš„è®¿é—®è§„åˆ™ åŒä¸€ä¸ªç±» åŒä¸€ä¸ªåŒ… ä¸åŒåŒ…çš„å­ç±» ä¸åŒåŒ…éå­ç±» public èƒ½ èƒ½ èƒ½ èƒ½ protected èƒ½ èƒ½ èƒ½ ä¸èƒ½ (default) èƒ½ èƒ½ ä¸èƒ½ ä¸èƒ½ private èƒ½ ä¸èƒ½ ä¸èƒ½ ä¸èƒ½ å†…éƒ¨ç±»å†…éƒ¨ç±»æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç±» æˆå‘˜å†…éƒ¨ç±» å±€éƒ¨å†…éƒ¨ç±» åŒ¿åå†…éƒ¨ç±» ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å†…éƒ¨ç±»çš„ä½¿ç”¨ æˆå‘˜å†…éƒ¨ç±»æˆå‘˜å†…éƒ¨ç±»å°±åƒæˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ä¸€æ ·å®šä¹‰åœ¨ç±»é‡Œé¢ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªå«åšBodyï¼Œå†…éƒ¨è¿˜æœ‰ä¸€ä¸ªç±»å«åšHeartã€‚æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå®šä¹‰ public class Body &#123; public class Heart &#123; &#125;&#125; å†…éƒ¨ç±»å¯ä»¥éšæ„çš„è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ï¼Œä½†æ˜¯å¤–éƒ¨ç±»è¦è®¿é—®å†…éƒ¨ç±»è¦å€ŸåŠ©å†…éƒ¨ç±»å¯¹è±¡ã€‚ å¦‚ä½•ä½¿ç”¨æˆå‘˜å†…éƒ¨ç±» åœ¨å¤–éƒ¨ç±»çš„æ–¹æ³•ä¸­ä½¿ç”¨å†…éƒ¨ç±»ï¼Œç„¶ååœ¨mainæ–¹æ³•ä¸­è°ƒç”¨å¤–éƒ¨ç±»çš„æ–¹æ³•ã€‚ ç›´æ¥åˆ›å»ºå†…éƒ¨ç±»çš„å¯¹è±¡ï¼Œåˆ›å»ºæ ¼å¼ä¸º å¤–éƒ¨ç±».å†…éƒ¨ç±» å¯¹è±¡å = new å¤–éƒ¨ç±»().new å†…éƒ¨ç±»(); æ¯”å¦‚ä¸Šé¢æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªHeartå¯¹è±¡å°±å¯ä»¥è¿™ä¹ˆå†™ Body.Heart heart = new Body().new Heart(); å†…éƒ¨ç±»å˜é‡ä¸å¤–éƒ¨ç±»å˜é‡é‡åé—®é¢˜ï¼Œå‡è®¾å¤–éƒ¨ç±»æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡numï¼Œå†…éƒ¨ç±»ä¹Ÿæœ‰ä¸€ä¸ªæˆå‘˜å˜é‡numï¼Œåœ¨å†…éƒ¨ç±»çš„æˆå‘˜æ–¹æ³•ä¸­ä¹Ÿæœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡numï¼Œç°åœ¨åœ¨å†…éƒ¨ç±»çš„è¿™ä¸ªæ–¹æ³•ä¸­æ€ä¹ˆè®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜å˜é‡ï¼Œæ€ä¹ˆè®¿é—®å†…éƒ¨ç±»çš„æˆå‘˜å˜é‡ã€‚å¦‚ä¸‹ num //å±€éƒ¨å˜é‡this.num //å†…éƒ¨ç±»çš„æˆå‘˜å˜é‡å¤–éƒ¨ç±»å.this.name //å¤–éƒ¨ç±»çš„æˆå‘˜å˜é‡ ç°åœ¨æ¥çœ‹ä¸€ä¸ªä¾‹å­ public class Body &#123; int num = 10; //å¤–éƒ¨ç±»çš„num public class Heart &#123; int num = 20; //å†…éƒ¨ç±»çš„num public void showNum(int num) &#123; System.out.println(num); //æ‰“å°å±€éƒ¨å˜é‡ System.out.println(this.num); //æ‰“å°å†…éƒ¨ç±»çš„æˆå‘˜å˜é‡ System.out.println(Body.this.num); //æ‰“å°å¤–éƒ¨ç±»çš„æˆå‘˜å˜é‡ &#125; &#125; public static void main(String[] args) &#123; Body.Heart heart = new Body().new Heart(); heart.showNum(30); //å±€éƒ¨å˜é‡num &#125;&#125; è¾“å‡ºç»“æœä¸º 302010 å±€éƒ¨å†…éƒ¨ç±»å±€éƒ¨å†…éƒ¨ç±»å°±æ˜¯å®šä¹‰åœ¨æ–¹æ³•å†…éƒ¨çš„ç±»ï¼Œå®šä¹‰å¦‚ä¸‹ class å±€éƒ¨å†…éƒ¨ç±»å &#123; &#125; æ³¨æ„ï¼Œä¸è¦å†™ä»»ä½•çš„ä¿®é¥°ç¬¦ã€‚è¿™å¹¶ä¸ä»£è¡¨å®ƒçš„ä¿®é¥°ç¬¦æƒé™æ˜¯(default)ï¼Œå› ä¸ºä¿®é¥°ç¬¦æ²¡æœ‰æ„ä¹‰ï¼Œç±»å®šä¹‰åœ¨æ–¹æ³•çš„å†…éƒ¨ï¼Œåªæœ‰åœ¨æ–¹æ³•å†…éƒ¨åœ¨èƒ½å¤Ÿè®¿é—®ã€‚ æˆ‘ä»¬åœ¨è¿™é‡Œé€‚æ—¶çš„æ€»ç»“ä¸€ä¸‹ä¿®é¥°ç¬¦ä¿®é¥°ç±» å¤–éƒ¨ç±» åªèƒ½æ˜¯public, (default) å†…éƒ¨ç±» æˆå‘˜å†…éƒ¨ç±» å¯ä»¥æ˜¯å››ç§ä¿®é¥°ç¬¦çš„ä»»æ„ä¸€ç§ å±€éƒ¨å†…éƒ¨ç±» ä»€ä¹ˆéƒ½ä¸èƒ½å†™ å±€éƒ¨å†…éƒ¨ç±»å¦‚æœæƒ³è®¿é—®æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å¿…é¡»æ˜¯å±€éƒ¨finalçš„ï¼Œä»€ä¹ˆå«åšæœ‰æ•ˆfinalå‘¢ï¼ŸæŒ‡çš„å°±æ˜¯æ²¡æœ‰ä½¿ç”¨finalä¿®é¥°ç¬¦ä¿®é¥°ï¼ˆå½“ç„¶ä½ ä½¿ç”¨finalä¿®é¥°æ›´åŠ çš„ä¿é™©ï¼‰ï¼Œä½†æ˜¯å˜é‡çš„å€¼æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚æ¯”å¦‚ä¸‹é¢ public void testlocalInnerClass() &#123; int num = 10; class LocalInnerClass &#123; public void printNum() &#123; System.out.println(num); &#125; &#125;&#125; è¿™é‡Œçš„numè™½ç„¶æ²¡æœ‰ä½¿ç”¨finalä¿®é¥°ç¬¦ä¿®é¥°ï¼Œä½†æ˜¯å®ƒåªè¿›è¡Œäº†ä¸€æ¬¡èµ‹å€¼ï¼Œæ‰€ä»¥æ˜¯æœ‰æ•ˆfinalçš„ï¼Œæ‰€ä»¥åœ¨å±€éƒ¨å†…éƒ¨ç±»ä¸­å¯ä»¥è®¿é—®è¯¥å˜é‡ã€‚å‡è®¾numåˆè¿›è¡Œäº†èµ‹å€¼ï¼Œé‚£ä¹ˆå°†ä¼šç¼–è¯‘å¤±è´¥ã€‚ åŒ¿åå†…éƒ¨ç±»åŒ¿åå†…éƒ¨ç±»æ˜¯ç›¸å½“é‡è¦çš„æ¦‚å¿µäº†ã€‚å¦‚æœæ¥å£å®ç°ç±»(æˆ–è€…æ˜¯çˆ¶ç±»çš„å­ç±»)åªä½¿ç”¨ä¸€æ¬¡ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µå¯çœç•¥æ‰è¯¥ç±»çš„å®šä¹‰ï¼Œè€Œæ”¹ä¸ºä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ã€‚ æ¯”å¦‚æœ‰ä¸€ä¸ªæ¥å£ï¼Œå«åšUSBå¥½äº†ï¼Œç„¶ååœ¨ä¸€ä¸ªComputerç±»ä¸­è¦ä½¿ç”¨è¯¥æ¥å£ï¼Œå¦‚ä¸‹ public interface USB &#123; public abstract void open(); public abstract void close();&#125; public class Computer &#123; public void useUsb(USB usb) &#123; usb.open(); usb.close(); &#125;&#125; ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»å»å®ç°USBæ¥å£ï¼Œç„¶ååˆ›å»ºå¯¹è±¡ï¼Œä¼ å…¥Computerçš„è¿™ä¸ªæ–¹æ³•ä¸­ public class ImpUSB implements USB &#123; @Override public void open() &#123; System.out.println(\"æ‰“å¼€USBè®¾å¤‡\"); &#125; @Override public void close() &#123; System.out.println(\"å…³é—­USBè®¾å¤‡\"); &#125;&#125; public class Computer &#123; public void useUsb(USB usb) &#123; usb.open(); usb.close(); &#125; public static void main(String[] args) &#123; Computer computer = new Computer(); ImpUSB impUSB = new ImpUSB(); computer.useUsb(impUSB); &#125;&#125; è¾“å‡ºä¸º æ‰“å¼€USBè®¾å¤‡å…³é—­USBè®¾å¤‡ ä½†æ˜¯è¿™æ ·å†™æœªå¿…å¤ªéº»çƒ¦äº†ï¼Œè¿™ä¸ªç±»åªä½¿ç”¨äº†ä¸€æ¬¡ï¼Œä½†æ˜¯ä¸ºäº†ä½¿ç”¨è¿™ä¸ªæ¥å£ï¼Œæˆ‘å´è¦å†™ä¸€ä¸ªç±»å»å®ç°è¯¥æ¥å£ï¼Œç„¶ååˆ›å»ºå¯¹è±¡ä½¿ç”¨ï¼Œæœªå¿…æœ‰ç‚¹éº»çƒ¦ã€‚Javaæä¾›äº†æ›´åŠ æ–¹ä¾¿çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯åŒ¿åå†…éƒ¨ç±»ã€‚ åŒ¿åå†…éƒ¨ç±»çš„å®šä¹‰æ ¼å¼ä¸º æ¥å£åç§° å¯¹è±¡å = new æ¥å£åç§°() &#123; //åœ¨è¿™é‡Œè¦†ç›–é‡å†™æ¥å£æ‰€æœ‰çš„æ–¹æ³•&#125; ç°åœ¨æˆ‘ä»¬åŒ¿åå†…éƒ¨ç±»æ¥å®ç°ä¸Šé¢åŒæ ·çš„æ•ˆæœ public static void main(String[] args) &#123; Computer computer = new Computer(); //åˆ›å»ºåŒ¿åå†…éƒ¨ç±» USB usb = new USB() &#123; @Override public void open() &#123; System.out.println(\"èŠ±å¼æ‰“å¼€USBè®¾å¤‡\"); &#125; @Override public void close() &#123; System.out.println(\"èŠ±å¼å…³é—­USBè®¾å¤‡\"); &#125; &#125;; computer.useUsb(usb);&#125; è¾“å‡ºä¸º èŠ±å¼æ‰“å¼€USBè®¾å¤‡èŠ±å¼å…³é—­USBè®¾å¤‡ åœ¨è¿™é‡Œæˆ‘ä»¬å¹¶æ²¡æœ‰åˆ›å»ºä¸€ä¸ªå®ç°ç±»å»å®ç°USBæ¥å£ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œè¿™ä¸ªç±»æ²¡æœ‰åå­—ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå«åšåŒ¿åå†…éƒ¨ç±»ï¼‰ï¼Œæ‰€ä»¥å®ƒä¸èƒ½é€šè¿‡å®ƒåœ¨åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚æ­£å¦‚åŒ¿åå¯¹è±¡ä¸€æ ·ï¼Œåªèƒ½è°ƒç”¨ä¸€æ¬¡æ–¹æ³•ã€‚ åŒ¿åå†…éƒ¨ç±»çš„æ³¨æ„äº‹é¡¹ åŒ¿åå†…éƒ¨ç±»åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œåªèƒ½ä½¿ç”¨å”¯ä¸€çš„ä¸€æ¬¡ åŒ¿åå¯¹è±¡åœ¨è°ƒç”¨æ–¹æ³•åªèƒ½è°ƒç”¨å”¯ä¸€çš„ä¸€æ¬¡ åŒ¿åå†…éƒ¨ç±»æ˜¯çœç•¥äº†ç±»çš„åç§°ï¼ŒåŒ¿åå¯¹è±¡æ˜¯çœç•¥äº†å¯¹è±¡çš„åç§°","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"é¢å‘å¯¹è±¡","slug":"é¢å‘å¯¹è±¡","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"}]},{"title":"JavaåŸºç¡€çŸ¥è¯†","date":"2019-07-03T16:00:00.000Z","path":"/JavaåŸºç¡€çŸ¥è¯†ä»‹ç»/","text":"ç¬¬ä¸€ä¸ªç¨‹åº: HelloWorldä¸‹é¢å°†ä¹¦å†™Javaçš„ç¬¬ä¸€ä¸ªç¨‹åºï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨å‘½ä»¤è¡Œè¾“å‡ºHello World!ã€‚æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºHelloWorld.javaï¼Œä½¿ç”¨è®°äº‹æœ¬æˆ–å…¶ä»–ä»£ç ç¼–è¾‘å·¥å…·æ‰“å¼€ï¼Œæ•²å…¥ä»¥ä¸‹ä»£ç  public class HelloWorld &#123; public static void main(String[] args) &#123; System.out.println(\"Hello World!\"); &#125;&#125; ç„¶ååœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ javac HelloWorld.javajava HelloWorld ç„¶åå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­çœ‹åˆ°Hello World!è¾“å‡ºäº†ã€‚ æ³¨æ„äº‹é¡¹ï¼š classåé¢çš„HelloWorldè¦ä¸æ–‡ä»¶åä¸€æ ·ï¼ŒåŒ…æ‹¬å¤§å°å†™ åœ¨å‘½ä»¤è¡Œä½¿ç”¨javacæˆ–è€…javaå‘½ä»¤æ—¶ï¼Œè¦ä¿è¯æ‰€å¤„çš„è·¯å¾„ä¸æ–‡ä»¶HelloWorld.javaåœ¨åŒä¸€ä¸ªè·¯å¾„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œè§£å†³åŠæ³•æœ‰ä¸¤ç§ ç¬¬ä¸€ç§ï¼Œä½¿ç”¨cdå‘½ä»¤åˆ‡æ¢åˆ°HelloWorld.javaæ–‡ä»¶çš„ç›®å½• ç¬¬äºŒç§ï¼Œjavacæˆ–è€…javaå‘½ä»¤åè·Ÿä¸ŠHelloWorld.javaçš„å®Œæ•´è·¯å¾„åç§° javacå‘½ä»¤åé¢æœ‰åç¼€.javaï¼Œjavaå‘½ä»¤åé¢æ²¡æœ‰ä»»ä½•çš„åç¼€ ç°åœ¨ç¨å¾®è§£é‡Šä¸Šé¢ç¨‹åºçš„æ„æ€ï¼Œå› ä¸ºåˆšåˆšèµ·æ­¥ï¼Œå¾ˆå¤šä¸œè¥¿ç°åœ¨éƒ½è§£é‡Šä¸äº†ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå¹¶ä¸è¦æ±‚å¼„æ‡‚ã€‚ç¬¬ä¸€è¡Œ public class HelloWorld è¿™é‡Œï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½HelloWorldå¿…é¡»ä¸æ–‡ä»¶åç›¸åŒã€‚ç¬¬äºŒè¡Œ public static void main(String[] args) è¿™ä¸ªæ˜¯å›ºå®šçš„å†™æ³•ï¼Œå‡ ä¹æ¯ä¸ªç¨‹åºéƒ½æ˜¯è¿™ä¹ˆå†™çš„ï¼Œè¿™ä¸ªæ˜¯ç¨‹åºçš„å…¥å£ï¼Œç¨‹åºä»è¿™é‡Œå¼€å§‹æ‰§è¡Œã€‚ç¬¬ä¸‰è¡Œ System.out.println(\"Hello World!\"); è¿™ä¸ªè¯­å¥æ˜¯å…³é”®çš„ç¨‹åºï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å‘å±å¹•è¾“å‡ºå­—ç¬¦ï¼Œè¿™é‡Œæˆ‘ä»¬è¾“å…¥çš„æ˜¯Hello World!ï¼Œæ³¨æ„è¾“å‡ºçš„è¯­å¥éœ€è¦è¢«åŒå¼•å·æ‹¬èµ·æ¥ã€‚ æ ‡è¯†ç¬¦ä¸å‘½åè§„èŒƒæ ‡è¯†ç¬¦çš„å‘½åè§„èŒƒ ç”±æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿å’Œç¾å…ƒç¬¦ç»„æˆ ä¸èƒ½ç”±æ•°å­—å¼€å¤´ ä¸èƒ½æ˜¯å…³é”®å­— ä¸Šé¢æ˜¯æ ‡è¯†ç¬¦å‘½åçš„ç¡¬æ€§è§„èŒƒï¼Œå³å¦‚æœä¸æŒ‰ç…§ä¸Šé¢çš„æ¥åšï¼Œé‚£ä¹ˆç¨‹åºåœ¨ç¼–è¯‘æ—¶ä¸èƒ½å¤Ÿé€šè¿‡ï¼Œä¸‹é¢ä»‹ç»è½¯æ€§è§„èŒƒï¼Œæ„æ€å°±æ˜¯å¦‚æœä½ ä¸æŒ‰ç…§ä¸‹é¢çš„æ¥ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è½¯æ€§è§„èŒƒæ˜¯å¤§å®¶çº¦å®šä¿—æˆçš„ï¼Œå¤§å®¶éƒ½éµå®ˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŒ‰ç…§ä¸‹é¢çš„æ¥ ç±»åï¼šå¤§é©¼å³°å‘½åæ³•ï¼Œå³é¦–å­—æ¯å…¨éƒ¨å¤§å†™ï¼Œå¦‚HelloWorld å˜é‡åä¸æ–¹æ³•åï¼šå°é©¼å³°å‘½åæ³•ï¼Œå³ç¬¬ä¸€ä¸ªé¦–å­—æ¯å°å†™ï¼Œåé¢çš„é¦–å­—æ¯å…¨éƒ¨å¤§å†™ï¼Œå¦‚helloWorld Javaä¸­çš„å¸¸é‡Javaä¸­çš„å¸¸é‡åˆ†ä¸ºï¼š å­—ç¬¦ä¸²å¸¸é‡ï¼šä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„ï¼Œå¦‚â€Hello World!â€ æ•´å‹å¸¸é‡ï¼šå…¶å®å°±æ˜¯æ•´æ•°ï¼Œå¦‚5 æµ®ç‚¹æ•°ï¼šå°æ•°ï¼Œå¦‚2.5 å­—ç¬¦å¸¸é‡ï¼šç”¨å•å¼•å·æ‹¬èµ·æ¥çš„ï¼Œå•å¼•å·é‡Œé¢å¿…é¡»æœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä¸å¯ä»¥æ²¡æœ‰ï¼Œä¹Ÿä¸å¯ä»¥å¤šäºä¸€ä¸ªï¼Œå¦‚â€™abâ€™,â€™â€™éƒ½æ˜¯é”™è¯¯çš„ï¼Œå¦å¤–è¿™ä¸ªå­—ç¬¦å¯ä»¥æ˜¯ä¸­æ–‡ï¼Œå¦‚â€™ä¸­â€™ å¸ƒå°”å¸¸é‡ï¼šåªæœ‰ä¸¤ä¸ªå€¼trueå’Œfalse ç©ºå¸¸é‡ï¼šnullï¼Œè¿™ä¸ªåœ¨è¿™é‡Œä¸å¤šåšä»‹ç» åœ¨å‰é¢æˆ‘ä»¬å­¦ä¹ äº†å‘å±å¹•è¾“å‡ºHello World!ï¼Œç±»ä¼¼çš„ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°è¯•ç€æŠŠå¸¸é‡è¾“å‡ºå‡ºæ¥ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ä¸ºConstant.javaï¼Œæ³¨æ„å‰é¢æåŠçš„å‘½åè§„èŒƒï¼ŒConstantæ˜¯ç±»åï¼Œæ‰€ä»¥é¦–å­—æ¯éœ€è¦å¤§å†™ï¼Œç„¶ååœ¨è¯¥æ–‡ä»¶ä¸­æ•²å…¥ public class Constant &#123; public static void main(String[] args) &#123; //ä¸‹é¢æˆ‘å°†è¾“å‡ºä¸€äº›å¸¸é‡ System.out.println(\"Hello\"); //è¾“å‡ºå­—ç¬¦ä¸²å¸¸é‡ System.out.println(5); //è¾“å‡ºæ•´å‹å¸¸é‡ System.out.println(2.5); //è¾“å‡ºæµ®ç‚¹å‹å¸¸é‡ System.out.println('a'); //è¾“å‡ºå­—ç¬¦å‹å¸¸é‡ System.out.println(true); //è¾“å‡ºå¸ƒå°”å‹å¸¸é‡ &#125;&#125; è¾“å‡ºä¸ºï¼š Hello52.5atrue æ³¨æ„ï¼š ä¸èƒ½æ‰“å°å‡ºnullï¼Œå¦‚System.out.println(null)ä¼šæŠ¥é”™ ä¸Šé¢//åé¢çš„å†…å®¹ä¸ºæ³¨é‡Šï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨çš„å¿½ç•¥ï¼Œæ³¨é‡Šæ˜¯å¯¹ç¨‹åºçš„è§£é‡Šï¼Œæ˜¯ä¸ºäº†å¸®åŠ©äººçœ‹æ‡‚ç¨‹åºçš„ åŸºæœ¬æ•°æ®ç±»å‹Javaä¸­çš„æ•°æ®ç±»å‹åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼Œå¼•ç”¨æ•°æ®ç±»å‹æš‚ä¸”ä¸æï¼Œè¿™é‡Œçš„é‡ç‚¹æ˜¯æŒæ¡åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹åˆ†ä¸ºå››ç±»ï¼š æ•´å‹ æµ®ç‚¹å‹ å­—ç¬¦å‹ å¸ƒå°”ç±»å‹ æ•´å‹å¯ä»¥ç»†åˆ†ä¸ºï¼š byte short int long ä¸Šé¢æ•´å‹æ•°æ®ç±»å‹éƒ½è¡¨ç¤ºæ•´æ•°ï¼Œåªæ˜¯è¡¨ç¤ºçš„èŒƒå›´å¤§å°ä¸ä¸€æ ·ï¼Œbyteä½¿ç”¨ä¸€ä¸ªå­—èŠ‚å³8bitæ¥è¡¨ç¤ºä¸€ä¸ªæ•´æ•°çš„å¤§å°ï¼Œè¡¨ç¤ºçš„èŒƒå›´ä¸º-128~127ï¼Œshortä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼ŒèŒƒå›´æ¯”byteå¤§ä¸€ç‚¹ï¼Œå¤§çº¦åœ¨å‡ ä¸‡å·¦å³ï¼Œintä½¿ç”¨å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œæ˜¯æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œå› ä¸ºå®ƒçš„èŒƒå›´å·²ç»å¤§åˆ°è¶³å¤Ÿæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨äº†ï¼Œlongä½¿ç”¨å…«ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œæ¯”intçš„èŒƒå›´è¿˜è¦å¤§ï¼Œä½†æ˜¯ç”±äºä½¿ç”¨intå·²ç»è¶³å¤Ÿäº†ï¼Œä»èŠ‚çœç©ºé—´çš„è§’åº¦è®²ï¼Œæ²¡å¿…è¦ç”¨longã€‚ æµ®ç‚¹å‹å¯ä»¥åˆ†ä¸º float double floatä½¿ç”¨å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå°æ•°ï¼Œè™½ç„¶ä½¿ç”¨çš„æ˜¯å››ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯è¡¨ç¤ºçš„èŒƒå›´æ¯”ä½¿ç”¨å…«ä¸ªå­—èŠ‚çš„longæ›´å¤§ï¼Œdoubleä½¿ç”¨å…«ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå°æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨doubleè¡¨ç¤ºå°æ•°æ›´ç²¾ç¡®ï¼Œæˆ‘ä»¬åœ¨å¹³å¸¸ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯doubleã€‚ å­—ç¬¦å‹æ²¡æ³•ç»†åˆ†ï¼Œåªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯charç±»å‹ï¼Œä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚ å¸ƒå°”å‹ä¹Ÿæ²¡æœ‰åŠæ³•ç»†åˆ†ï¼Œåªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯booleanï¼Œä½¿ç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå®ƒåªæœ‰ä¸¤ä¸ªå€¼trueå’Œfalseã€‚ æ³¨æ„ï¼š å­—ç¬¦ä¸²ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯å¼•ç”¨ç±»å‹ï¼Œè¿™ä¸ªåé¢è¯¦ç»†é˜è¿°ã€‚ å˜é‡å˜é‡çš„å‘½åéœ€è¦æœä»å‰é¢æ‰€è®²çš„æ ‡è¯†ç¬¦æ‰€éœ€éµä»çš„ç¡¬æ€§æˆ–è½¯æ€§çš„è§„å®šã€‚å˜é‡çš„å£°æ˜æ–¹æ³•ä¸ºï¼š æ•°æ®ç±»å‹ å˜é‡å æ¯”å¦‚ï¼š int a;float f;double d; ä¸Šé¢æ˜¯å¯¹å˜é‡çš„å£°æ˜ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œæ²¡æœ‰è¢«èµ‹å€¼çš„å˜é‡æ˜¯ä¸èƒ½è¢«ä½¿ç”¨çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œä¸‹é¢ä¸¾ä¸€äº›ä¾‹å­ï¼š byte by = 20;short s = 10;int a = 2;long l = 122222222222222L;float f = 1.2F;double d = 2.5;char c = 'a';boolean b = true; æ³¨æ„ï¼š å¯¹floatå˜é‡è¿›è¡Œèµ‹å€¼æ—¶ï¼Œåé¢éœ€è¦åŠ ä¸ŠF å¯¹longç±»å‹çš„å˜é‡è¿›è¡Œèµ‹å€¼æ—¶ï¼Œåé¢éœ€è¦åŠ ä¸ŠL(å¤§å°å†™éƒ½å¯ä»¥ï¼Œä¸è¿‡å°å†™çš„låƒ1ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨å¤§å†™)ï¼Œå½“å³è¾¹å¸¸é‡çš„å€¼çš„å¤§å°å°äºintç±»å‹çš„èŒƒå›´æ—¶ï¼ŒLå¯ä»¥çœç•¥ long l = 2; Javaä¸­ï¼Œæ•´å‹å¸¸é‡çš„ç±»å‹é»˜è®¤ä¸ºintï¼Œæµ®ç‚¹å‹å¸¸é‡çš„ç±»å‹é»˜è®¤ä¸ºdouble åœ¨ä¸€ä¸ªèŠ±æ‹¬å·å†…éƒ¨ï¼Œå˜é‡åä¸èƒ½ç›¸åŒ æ•°æ®ç±»å‹è½¬æ¢æ•°æ®ç±»å‹è½¬æ¢åˆ†ä¸ºä¸¤ç§ï¼š è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œä¹Ÿç§°ä¸ºéšå‹è½¬æ¢ å¼ºåˆ¶ç±»å‹è½¬æ¢ è‡ªåŠ¨ç±»å‹è½¬æ¢å½“å°†æŸæ•°æ®ç±»å‹çš„å€¼èµ‹å€¼ç»™æŸä¸ªèƒ½å¤Ÿè¡¨ç¤ºæ›´å¤§èŒƒå›´çš„æ•°æ®ç±»å‹çš„å˜é‡æ—¶ï¼Œä¼šå‘ç”Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œæ¯”å¦‚ byte b = 20;int a = b; ä¸Šé¢çš„bæ˜¯byteç±»å‹ï¼Œaæ˜¯intç±»å‹ï¼Œintç±»å‹çš„èŒƒå›´æ›´åŠ çš„å¤§ï¼Œæ‰€ä»¥å°†bèµ‹å€¼ç»™aæ—¶ä¼šè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œå°†20è½¬åŒ–ä¸ºintç±»å‹èµ‹å€¼ç»™aï¼Œä½†æ˜¯bè¿˜æ˜¯byteç±»å‹ã€‚ä½†æ˜¯ä¸èƒ½å°†å¤§èŒƒå›´çš„æ•°æ®ç±»å‹çš„å€¼èµ‹å€¼ç»™æ›´å°èŒƒå›´æ•°æ®ç±»å‹çš„å˜é‡ï¼Œå¦‚ int a = 20;byte b = a; //ä¸è¡Œï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ èŒƒå›´ä»å°åˆ°å¤§çš„é¡ºåºä¸º ç®­å¤´ä»£è¡¨å¯ä»¥è½¬æ¢ã€‚ åœ¨å‰é¢æˆ‘ä»¬æåŠåˆ°ï¼Œå½“å°†ä¸€ä¸ªæ•´æ•°èµ‹å€¼ç»™longç±»å‹çš„å˜é‡æ—¶ï¼Œå¦‚æœè¡¨ç¤ºçš„èŒƒå›´æ²¡æœ‰è¶…è¿‡intï¼Œé‚£ä¹ˆå¯ä»¥ä¸å†™åé¢çš„Lï¼Œè¿™æ—¶å› ä¸ºå‘ç”Ÿäº†è‡ªåŠ¨ç±»å‹è½¬æ¢ long l = 12; //åé¢æ²¡æœ‰åŠ Lï¼ŒJavaé»˜è®¤æ•´æ•°ç±»å‹ä¸ºintï¼Œè¿™é‡Œå‘ç”Ÿäº†è‡ªåŠ¨ç±»å‹è½¬æ¢ å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸Šé¢æåŠåˆ°å¤§èŒƒå›´ä¸èƒ½è½¬å‘å°èŒƒå›´ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¼ºè¡Œè½¬æ¢ï¼Œæ¯”å¦‚æˆ‘æƒ³å°†intç±»å‹çš„æ•°å€¼è½¬åŒ–ä¸ºbyteç±»å‹çš„æ•°å€¼ int a = 20;byte b = (byte) a; åœ¨è¦è½¬æ¢çš„æ•°æ®å‰é¢åŠ ä¸Š(byte)å°±å¯ä»¥å¼ºè¡Œè½¬åŒ–ä¸ºbyteç±»å‹ã€‚ è™½ç„¶å¯ä»¥å°†å¤§èŒƒå›´è½¬åŒ–ä¸ºå°èŒƒå›´ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å¹³å¸¸æ—¶ä¸ä¼šè¿™ä¹ˆå¹²ï¼Œå› ä¸ºå¾€å¾€å°†å¤§èŒƒå›´çš„æ•°è½¬åŒ–ä¸ºå°èŒƒå›´çš„æ•°æ—¶ï¼Œä¼šæœ‰ç²¾åº¦æŸå¤±ï¼Œæ¯”å¦‚ï¼š double d = 3.5;int i = (int) d; //ç»“æœä¸º3ï¼Œå°æ•°ç‚¹åé¢çš„æ•°ç›´æ¥èˆå»ï¼Œå¹¶ä¸æ˜¯å››èˆäº”å…¥ æˆ‘ä»¬çŸ¥é“Javaçš„æ•´æ•°é»˜è®¤ä¸ºintï¼Œé‚£ä¹ˆä¸‹é¢çš„è¯­å¥ä¸ºä»€ä¹ˆæ²¡æœ‰æŠ¥é”™ byte b = 20; //20æ˜¯intç±»å‹ï¼Œintä¸èƒ½è½¬byteï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰æŠ¥é”™short s = 30; //åŒä¸Š è¿™æ˜¯å› ä¸ºï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ£€æŸ¥å³è¾¹æ•°å€¼çš„èŒƒå›´ï¼Œå¦‚æœæ²¡æœ‰è¶…è¿‡byteæˆ–è€…shortèƒ½å¤Ÿè¡¨ç¤ºçš„å¤§å°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºbyteæˆ–shortï¼Œç›¸å½“äº byte b = (byte) 20;short s = (short) 30; å‡ ç‚¹æ³¨æ„ char,short,byteç±»å‹åœ¨è¿›è¡Œè®¡ç®—æ—¶ï¼Œä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹å‚ä¸è®¡ç®— byte num1 = 10;byte num2 = 20;//ä¸‹é¢è¿™è¡Œè¯­å¥ä¼šæŠ¥é”™byte num3 = num1 + num2; //åœ¨è®¡ç®—æ—¶ï¼Œnum1å’Œnum2ä¼šè‡ªåŠ¨çš„æå‡ä¸ºintç±»å‹ï¼Œè€Œintç±»å‹ä¸èƒ½è½¬ä¸ºbyteï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ ä½†æ˜¯ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯æ­£ç¡®çš„ byte b = 1 + 2; å½“å³è¾¹å…¨æ˜¯å¸¸é‡æ—¶ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šç›´æ¥è®¡ç®—ï¼Œç›¸å½“äºä¸‹é¢ byte b = 3; ç”±äº3æ²¡æœ‰è¶…å‡ºbyteèƒ½å¤Ÿè¡¨ç¤ºçš„èŒƒå›´ï¼Œæ‰€ä»¥ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºbyteã€‚ char c = 'A';//ä¸‹é¢è¿™è¡Œè¯­å¥ä¼šè¾“å‡ºä¸€ä¸ªæ•°å­—System.out.println(c + 0); //65 æˆ‘ä»¬çŸ¥é“charæ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå­—ç¬¦å¯ä»¥è¿›è¡Œè®¡ç®—å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºè®¡ç®—æœºåœ¨åº•å±‚æ˜¯ä½¿ç”¨æ•°å­—è¡¨ç¤ºå­—ç¬¦çš„ï¼Œæ¯”å¦‚ä¸Šé¢â€™Aâ€™å°±æ˜¯ä½¿ç”¨æ•°å­—65è¡¨ç¤ºçš„ï¼Œä¸Šé¢çš„å­—ç¬¦ä¸æ•°å­—0è¿›è¡Œè®¡ç®—ï¼Œä¼šè‡ªåŠ¨æå‡ä¸ºintç±»å‹ï¼Œæ‰€ä»¥æœ€åè¾“å‡ºçš„å°±æ˜¯æ•°å­—ã€‚ æˆ‘ä»¬éœ€è¦çŸ¥é“å‡ ä¸ªç‰¹æ®Šå­—ç¬¦å¯¹åº”çš„æ•°å­— å­—ç¬¦ ASCIIç  â€˜0â€™ 48 â€˜Aâ€™ 65 â€˜aâ€™ 97 å¤§å†™å­—æ¯ä¸å°å†™å­—æ¯ä¹‹é—´å·®32ã€‚ booleanç±»å‹ä¸èƒ½è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢ ä¾‹å¦‚ï¼Œä¸‹é¢å°†å¯¹booleanç±»å‹è¿›è¡Œè½¬æ¢ï¼Œæ˜¯é”™è¯¯çš„å†™æ³•ï¼š int i = 1;boolean b1 = i; //é”™è¯¯boolean b2 = (boolean) i; //é”™è¯¯ boolean b = true;int i1 = b; //é”™è¯¯int i2 = (int) b; //é”™è¯¯ è¿ç®—ç¬¦Javaä¸­çš„è¿ç®—ç¬¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š ç®—æœ¯è¿ç®—ç¬¦ èµ‹å€¼è¿ç®—ç¬¦ æ¯”è¾ƒè¿ç®—ç¬¦ é€»è¾‘è¿ç®—ç¬¦ ä¸‰å…ƒè¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦ç®—æœ¯è¿ç®—ç¬¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š +ï¼ŒåŠ æ³• -ï¼Œå‡æ³• *ï¼Œä¹˜æ³• /ï¼Œé™¤æ³• %ï¼Œå–ä½™ ++ï¼Œè‡ªå¢ â€“ï¼Œè‡ªå‡ ä¸åŒç±»å‹çš„æ•°æ®ä¹‹é—´è¿›è¡Œè¿ç®—ï¼Œå¾—åˆ°çš„ç»“æœçš„æ•°æ®ç±»å‹ä¸ºèŒƒå›´æœ€å¤§çš„é‚£ä¸ªæ•°æ®ç±»å‹ï¼Œå¦‚ï¼š double d = 2 + 3.5; //int + double ==&gt; doubleint i = 2 + 3.5; //è¯¥å†™æ³•é”™è¯¯ åŠ æ³•æœ‰ä¸¤ç§ä½œç”¨ï¼š ä¸¤æ•°å­—é—´è¿›è¡ŒåŠ æ³•è¿ç®— å­—ç¬¦ä¸²çš„è¿æ¥ int c = 3 + 5; //è¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œç»“æœä¸º8String s = \"Hello\" + \"World\"; //æ‹¼æ¥ä¸ºHelloWorld æ³¨æ„ï¼šä»»ä½•æ•°æ®ç±»å‹ä¸å­—ç¬¦ä¸²è¿æ¥æ—¶ï¼Œä¼šè‡ªåŠ¨å˜æˆå­—ç¬¦ä¸² String s = 1 + \"Hello\"; //1Hello é™¤æ³•éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸¤ä¸ªæ•´æ•°ç›¸é™¤ï¼Œå¾—åˆ°çš„è¿˜æ˜¯æ•´æ•°ï¼Œå³ä½¿é™¤ä¸å°½ï¼Œå¦‚ int a = 10/3; //a = 3 ä¸‹é¢é‡ç‚¹ä»‹ç»++å’Œâ€“ï¼Œç”±äºäºŒè€…ååˆ†çš„ç›¸ä¼¼ï¼Œè¿™é‡Œåªä»‹ç»++ã€‚++çš„ä½œç”¨æ˜¯è‡ªåŠ¨åŠ 1ï¼Œå¦‚ int a = 3;a++; //ç›¸å½“äºa = a + 1 aå˜ä¸ºäº†4 å…¶ä¸­++å¯ä»¥åœ¨å˜é‡çš„å‰é¢ï¼Œä¹Ÿå¯ä»¥åœ¨å˜é‡çš„åé¢ï¼Œå¦‚ä¸‹ a++;++a; äºŒè€…çš„ä½œç”¨å‡æ˜¯ä½¿å˜é‡aåŠ 1ï¼Œå½“äºŒè€…å¦‚ä¸Šå•ç‹¬ä½¿ç”¨æ—¶ï¼ŒäºŒè€…æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯å½“æ··åˆä½¿ç”¨æ—¶ï¼Œæœ‰åŒºåˆ«ï¼Œå…·ä½“è¡¨ç°å¦‚ä¸‹ ++aï¼šå…ˆå°†aè¿›è¡Œ+1ï¼Œç„¶åä½¿ç”¨a a++ï¼šå…ˆä½¿ç”¨aï¼Œå†å°†å…¶è¿›è¡Œ+1 ä¾‹å¦‚ï¼š int a = 3;b = a++; //å…ˆä½¿ç”¨aï¼Œå³å…ˆå°†açš„å€¼èµ‹å€¼ç»™bï¼Œæ‰€ä»¥b=3ï¼Œç„¶å+1ï¼Œæ‰€ä»¥æœ€åa=4 int a = 3;b = ++a; //å…ˆå°†a+1ï¼Œå³a=4ï¼Œç„¶åå°†aèµ‹å€¼ç»™bï¼Œæ‰€ä»¥b=4 â€“çš„ä½œç”¨æ˜¯å‡1ï¼Œå…¶ç”¨æ³•åŒ++ä¸€æ¨¡ä¸€æ ·ï¼Œè¿™é‡Œä¸å¤šåŠ ä»‹ç»ã€‚ æ³¨æ„ï¼š å¸¸é‡ä¸èƒ½è¿›è¡Œ++,â€“è¿ç®— 30++; //è¯¥å†™æ³•æ˜¯é”™è¯¯çš„ èµ‹å€¼è¿ç®—ç¬¦èµ‹å€¼è¿ç®—ç¬¦åˆ†ä¸ºåŸºæœ¬èµ‹å€¼è¿ç®—ç¬¦å’Œå¤åˆèµ‹å€¼è¿ç®—ç¬¦ åŸºæœ¬èµ‹å€¼è¿ç®—ç¬¦ = å¤åˆèµ‹å€¼è¿ç®—ç¬¦ += -= *= /= %= åŸºæœ¬èµ‹å€¼è¿ç®—ç¬¦çš„ä½œç”¨å°±æ˜¯æŠŠå³è¾¹çš„å€¼èµ‹ç»™å·¦è¾¹çš„å˜é‡ int a = 3; //æŠŠ3èµ‹ç»™å˜é‡a æ³¨æ„ï¼š å¸¸é‡æ˜¯ä¸å˜çš„ï¼Œä¸èƒ½è¢«èµ‹å€¼ï¼Œæ‰€ä»¥å¸¸é‡ä¸èƒ½å‡ºç°åœ¨èµ‹å€¼è¿ç®—ç¬¦çš„å·¦è¾¹ 50 = 30; //è¯¥å†™æ³•æ˜¯é”™è¯¯çš„ å¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼Œè¿™é‡Œä»‹ç»+=ï¼Œå…¶ä»–ä¸å®ƒç±»ä¼¼ int a = 3;a += 3; //ç›¸å½“äºa = a + 3a *= 3; //ç›¸å½“äºa = a * 3// å…¶ä»–çš„åŒç†å¯ä»¥çŸ¥é“... ... æ³¨æ„ï¼š å¤åˆèµ‹å€¼è¿ç®—ç¬¦éšå«äº†å¼ºåˆ¶ç±»å‹è½¬æ¢ short s = 2;s += 2; //è¿™é‡Œæš—å«äº†å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œs + 2å¾—åˆ°çš„æ˜¯ä¸€ä¸ªintç±»å‹ï¼Œè¢«å¼ºåˆ¶è½¬æ¢ä¸ºäº†shortç±»å‹ï¼Œæ‰€ä»¥ç›¸å½“äºs = (short) (s + 2); æ¯”è¾ƒè¿ç®—ç¬¦æ¯”è¾ƒè¿ç®—ç¬¦å¯¹æ“ä½œæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¾—åˆ°ä¸€ä¸ªbooleanæ•°æ®ç±»å‹çš„å€¼ï¼Œæ¯”è¾ƒè¿ç®—ç¬¦åŒ…å«ä»¥ä¸‹ï¼š ==ï¼šåˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ &gt; &lt; &gt;=ï¼šå¤§äºç­‰äº &lt;= !=ï¼šåˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦ä¸ç›¸ç­‰ æ³¨æ„ï¼š åœ¨åˆ¤æ–­æŸå˜é‡å±äºæŸåŒºé—´ï¼Œæ¯”å¦‚æ˜¯å¦å¤§äº3å°äº5æ—¶ï¼Œä¸èƒ½å†™æˆ3 &lt; x &lt; 5ï¼Œåº”å½“ä½¿ç”¨åé¢æåŠçš„é€»è¾‘è¿ç®—ç¬¦3 &lt; x &amp;&amp; x &lt; 5 é€»è¾‘è¿ç®—ç¬¦é€»è¾‘è¿ç®—ç¬¦çš„å¯¹è±¡æ˜¯booleanæ•°æ®ç±»å‹çš„å€¼ï¼ŒåŒ…å«ä¸‹é¢ä¸‰ä¸ªæ“ä½œ &amp;&amp;ï¼šä¸æ“ä½œï¼Œå½“ä¸¤ä¸ªæ“ä½œæ•°åŒæ—¶ä¸ºtrueæ—¶ï¼Œç»“æœæ‰ä¸ºtrue ||ï¼šæˆ–æ“ä½œï¼Œä¸¤ä¸ªæ“ä½œæ•°ä¸­æœ‰ä¸€ä¸ªæ“ä½œæ•°ä¸ºtrueæ—¶ï¼Œç»“æœå°±ä¸ºtrue !ï¼šéæ“ä½œï¼Œ!true = false, !false = true æ³¨æ„ï¼š é€»è¾‘è¿ç®—ç¬¦çš„æ“ä½œå¯¹è±¡ä¸ºbooleanï¼Œæ‰€ä»¥å¦‚æœæ“ä½œå¯¹è±¡ä¸ä¸ºbooleanç±»å‹æ—¶ï¼Œä¼šæŠ¥é”™ boolean b = 5 &amp;&amp; 2; //ä¼šæŠ¥é”™boolean b = 5 &amp;&amp; true; //ä¼šæŠ¥é”™ çŸ­è·¯ è¡¨è¾¾å¼1 &amp;&amp; è¡¨è¾¾å¼2ï¼šå½“è¡¨è¾¾å¼1ä¸ºå‡æ—¶ï¼Œå·²ç»å¯ä»¥åˆ¤æ–­å‡ºç»“æœä¸ºå‡ï¼Œæ‰€ä»¥ä¸ä¼šå¯¹è¡¨è¾¾å¼2è¿›è¡Œåˆ¤æ–­ï¼Œä¸ä¼šæ‰§è¡Œè¡¨è¾¾å¼2 è¡¨è¾¾å¼1 || è¡¨è¾¾å¼2ï¼šå½“è¡¨è¾¾å¼1ä¸ºçœŸæ—¶ï¼Œå·²ç»å¯ä»¥åˆ¤æ–­å‡ºç»“æœä¸ºçœŸï¼ŒåŒä¸Šã€‚ int a = 3;System,out.println(false &amp;&amp; a++ &lt; 100); //æ­¤æ—¶è¿›è¡Œäº†çŸ­è·¯è¿ç®—ï¼Œa++ &lt; 100æ²¡æœ‰å¾—åˆ°æ‰§è¡Œï¼Œæ‰€ä»¥a = 3 int a = 3;System.out.println(true || a++ &lt; 100); //åŒä¸Š ä¸‰å…ƒè¿ç®—ç¬¦è¿™é‡Œçš„ä¸‰å…ƒæŒ‡çš„æ˜¯æœ‰ä¸‰ä¸ªæ“ä½œæ•°ï¼Œä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„è¿ç®—ç¬¦çš„æ“ä½œæ•°è¦ä¹ˆæ˜¯ä¸€ä¸ªçš„ï¼Œå¦‚++,â€“,!ï¼Œè¦ä¹ˆæ˜¯ä¸¤ä¸ªçš„ï¼Œå¦‚+,-,â€¦ï¼Œä¸‰å…ƒè¿ç®—ç¬¦çš„æ ¼å¼æ˜¯ å˜é‡ = æ¡ä»¶åˆ¤æ–­ ? è¡¨è¾¾å¼1 : è¡¨è¾¾å¼2; é¦–å…ˆä¼šè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ¡ä»¶åˆ¤æ–­å¾—åˆ°çš„ç»“æœä¸ºtrueï¼Œé‚£ä¹ˆä¼šå°†è¡¨è¾¾å¼1çš„ç»“æœèµ‹å€¼ç»™å˜é‡ï¼Œæ­¤æ—¶è¡¨è¾¾å¼2ä¸ä¼šå¾—åˆ°æ‰§è¡Œï¼›å¦åˆ™å°†è¡¨è¾¾å¼2çš„ç»“æœèµ‹å€¼ä¸ºå˜é‡ã€‚ int a= 3;int b = 4;int c = 4 &gt; 3 ? a : b++; //c = 3ï¼Œè¡¨è¾¾å¼2æ²¡æœ‰æ‰§è¡Œï¼Œb = 4System.out.println(b); //è¾“å‡ºä¸º4 æ³¨æ„ï¼š å˜é‡çš„ç±»å‹å¿…é¡»ä¸è¡¨è¾¾å¼çš„ç»“æœçš„ç±»å‹ä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ¥é”™ int c = 4 &gt; 3 ? 2 : 2.5; //è¯¥è¯­å¥æ˜¯é”™çš„ï¼Œ2.5æ˜¯doubleç±»å‹ï¼Œä¸èƒ½è½¬åŒ–ä¸ºint å¯èƒ½æœ‰çš„äººä¼šè¯´è¿”å›çš„2ï¼Œä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨å®é™…ä¸­ï¼Œåˆ¤æ–­è¯­å¥çš„ç»“æœä¸æ˜¯ç¡®å®šçš„ï¼Œå¦åˆ™ç›´æ¥å°†2èµ‹å€¼ç»™cå¥½äº†ï¼Œæ ¹æœ¬ä¸éœ€è¦åˆ¤æ–­ï¼Œå› æ­¤ä¸¤ä¸ªè¡¨è¾¾å¼çš„ç»“æœéƒ½æœ‰å¯èƒ½èµ‹å€¼ç»™å˜é‡ï¼Œç¼–è¯‘å™¨ä¼šæ£€æŸ¥è¡¨è¾¾å¼å¾—åˆ°çš„æ•°æ®ç±»å‹ã€‚ å•ç‹¬å†™ä¸‰å…ƒè¡¨è¾¾å¼æ˜¯é”™è¯¯çš„ int a = 4; b = 3;a &gt; b ? a : b; //è¿™ä¹ˆå•ç‹¬å†™æ˜¯é”™è¯¯çš„ ä½†æ˜¯å¯ä»¥è¿™ä¹ˆå†™ System.out.println(a &gt; b ? a : b); //è¿™ä¹ˆå†™æ˜¯å¯¹çš„ æµç¨‹æ§åˆ¶æµç¨‹æŒ‡çš„å°±æ˜¯ç¨‹åºæ‰§è¡Œçš„é¡ºåºï¼Œå†™è¿‡æ±‡ç¼–çš„åŒå­¦éƒ½çŸ¥é“ï¼Œç”¨æ±‡ç¼–å†™ç¨‹åºçš„æµç¨‹æ§åˆ¶éƒ½æ˜¯jumpçš„ï¼Œå„ç§è·³æ¥è·³å»ï¼Œè¿™ä¼šå¯¼è‡´ç¨‹åºçš„æµç¨‹æå…¶çš„ä¸æ¸…æ¥šï¼Œå½“å‡ºç°bugæ—¶ï¼Œæå…¶çš„éš¾ä»¥è°ƒè¯•ï¼Œæˆ‘ä»¬ç§°è¿™ç§ç¨‹åºä¸ºâ€œæ„å¤§åˆ©é¢æ¡â€ï¼Œæ„æ€å°±æ˜¯åƒæ„å¤§åˆ©é¢æ¡ä¸€æ ·äº¤ç¼ åœ¨ä¸€èµ·ï¼Œæå…¶æ··ä¹±ã€‚ åæ¥äººä»¬å‘ç°ï¼Œåªéœ€è¦ä¸‰ç§ç»“æ„å°±å¯ä»¥å†™å‡ºä»»ä½•çš„ç¨‹åºï¼Œè¿™ä¸‰ç§ç»“æ„å°±æ˜¯é¡ºåºç»“æ„ï¼Œé€‰æ‹©ç»“æ„ï¼Œå¾ªç¯ç»“æ„ï¼Œä½¿ç”¨è¿™ä¸‰ç§ç»“æ„ä½¿å¾—ç¨‹åºæ¡ç†æ¸…æ™°ï¼Œç»“æ„æ¸…æ™°ã€‚ä¸‹é¢å°±è¯¦ç»†çš„ä»‹ç»è¿™ä¸‰ç§ç»“æ„ã€‚ é¡ºåºç»“æ„é¡ºåºç»“æ„æŒ‡çš„å°±æ˜¯ç¨‹åºä»ä¸Šåˆ°ä¸‹ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œä¾‹å¦‚ System.out.println(\"æˆ‘æ˜¯ç¬¬ä¸€æ¡è¯­å¥\");System.out.println(\"æˆ‘æ˜¯ç¬¬äºŒæ¡è¯­å¥\"); è¾“å‡ºä¸º æˆ‘æ˜¯ç¬¬ä¸€æ¡è¯­å¥æˆ‘æ˜¯ç¬¬äºŒæ¡è¯­å¥ é€‰æ‹©ç»“æ„æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ ¹æ®æŸç§çŠ¶æ€æ¥åˆ¤æ–­å“ªæ®µç¨‹åºåº”è¯¥æ‰§è¡Œï¼Œæ¯”å¦‚ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œæ ¹æ®æ˜¯å¦è¾“å…¥æ­£ç¡®æ¥å†³å®šç¨‹åºçš„è¡Œä¸ºã€‚ é€‰æ‹©ç»“æ„åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¸€ä¸ªä¸å…³é”®å­—if,elseæœ‰å…³ï¼Œä¸€ä¸ªä¸å…³é”®å­—switch,caseæœ‰å…³ï¼Œä¸‹é¢è¯¦ç»†è¿›è¡Œä»‹ç»ã€‚ if-elseè¯­å¥å•ç‹¬ä¸€ä¸ªifä½¿ç”¨æ–¹æ³•ä¸º if (åˆ¤æ–­è¯­å¥) &#123; //ä»£ç &#125; å¯¹åˆ¤æ–­è¯­å¥è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœç»“æœä¸ºçœŸï¼Œåˆ™æ‰§è¡Œifé‡Œé¢çš„ä»£ç ï¼Œå¦‚æœä¸ºå‡ï¼Œåˆ™è·³è¿‡æ•´ä¸ªè¯­å¥ã€‚ if-elseè¯­å¥ä¸Šé¢ifè¯­å¥æ˜¯å½“ç»“æœä¸ºçœŸæ—¶æ‰§è¡Œè¯­å¥å—ï¼Œä½†æ˜¯å½“ç»“æœä¸ºå‡å´ä»€ä¹ˆéƒ½ä¸å¹²ï¼Œæˆ‘ä»¬å¸Œæœ›å½“ç»“æœä¸ºå‡æ—¶ï¼Œä¹Ÿèƒ½æœ‰ç›¸åº”çš„æ“ä½œï¼Œé‚£ä¹ˆå°±è¦ç”¨åˆ°if-elseè¯­å¥ if (åˆ¤æ–­è¯­å¥) &#123; //ifè¯­å¥å—&#125; else &#123; //elseè¯­å¥å—&#125; å½“ç»“æœä¸ºçœŸæ—¶ï¼Œæ‰§è¡Œifè¯­å¥å—ï¼Œç»“æœä¸ºå‡æ—¶ï¼Œæ‰§è¡Œelseè¯­å¥å—ã€‚ if-else-if elseè¯­å¥çº§è”æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦çš„æ˜¯ä¸€æ¬¡åˆ¤æ–­ï¼Œè€Œæ˜¯å¤šä¸ªåˆ¤æ–­ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªåˆ†æ®µå‡½æ•°ï¼Œæ ¹æ®å‡½æ•°çš„ä¸åŒå–å€¼ï¼Œé€‰æ‹©ä¸åŒçš„å‡½æ•°ï¼Œæ¯”å¦‚$$y =\\begin{cases}2x - 1, &amp;x &lt; 1 \\\\2x, &amp;1 \\leq x &lt; 2 \\\\2x + 1, &amp;x \\geq 2\\end{cases}$$ if (x &lt; 1) &#123; y = 2 * x - 1;&#125; else if (1 &lt;= x &amp;&amp; x &lt; 2) &#123; y = 2 * x;&#125; else &#123; //x &gt;= 2 y = 2 * x + 1&#125; switch-caseè¯­å¥switch-caseè¯­å¥çš„æ ¼å¼ä¸º switch (è¡¨è¾¾å¼) &#123; case å¸¸é‡1: è¯­å¥1; break; case å¸¸é‡2: è¯­å¥2; break; ... case å¸¸é‡n: è¯­å¥n; break; default: è¯­å¥n+1; break;&#125; è¯¥æ®µç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸ºï¼Œé¦–å…ˆè®¡ç®—switchè¡¨è¾¾å¼çš„ç»“æœï¼Œç„¶åå°†è¡¨è¾¾å¼çš„ç»“æœä¸å¸¸é‡1,å¸¸é‡2,â€¦æ¯”è¾ƒï¼Œçœ‹æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸å…¶ä¸­æŸä¸ªå¸¸é‡ç›¸ç­‰ï¼Œåˆ™ä¼šæ‰§è¡Œç›¸åº”çš„è¯­å¥å—ã€‚å¦‚æœä¸æ‰€æœ‰çš„caseå¸¸é‡éƒ½ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œdefaultä¸­çš„è¯­å¥ã€‚ æ³¨æ„ï¼š å¤šä¸ªcaseçš„å¸¸é‡ä¸èƒ½ç›¸åŒ switchè¡¨è¾¾å¼çš„ç»“æœåªèƒ½æ˜¯ä¸‹é¢çš„å‡ ç§ç±»å‹ åŸºæœ¬æ•°æ®ç±»å‹ï¼šbyte,short,char,int å¼•ç”¨ç±»å‹ï¼šStringï¼Œæšä¸¾ç±»å‹ caseçš„é¡ºåºå¯ä»¥å‘ç”Ÿæ”¹å˜ å¦å¤–ï¼Œæ¯”è¾ƒé‡è¦çš„æ˜¯ï¼Œå…¶å®breakä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥çš„è¯ï¼Œç”±äºæ²¡æœ‰breakï¼Œç¨‹åºä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œç›´åˆ°é‡åˆ°breakæˆ–è€…ç¨‹åºæ‰§è¡Œç»“æŸã€‚ switch (1) &#123; case 1: System.out.println(1); //ä¸ä¼šé€€å‡ºç¨‹åºï¼Œç»§ç»­æ‰§è¡Œ case 2: System.out.println(2); break; //åœ¨è¿™é‡Œé‡åˆ°breakï¼Œé€€å‡º default: System.out.println(3); break;&#125; ç¨‹åºçš„è¾“å‡ºä¸º 12 å¾ªç¯ç»“æ„å¾ªç¯æŒ‡çš„å°±æ˜¯é‡å¤æ‰§è¡ŒæŸæ®µç¨‹åºï¼Œä¸€èˆ¬å¾ªç¯ç”±ä¸‹é¢å››éƒ¨åˆ†ç»„æˆ åˆå§‹åŒ– æ¡ä»¶åˆ¤æ–­ å¾ªç¯ä½“ å¾ªç¯æ§åˆ¶è¯­å¥ å¾ªç¯æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ forå¾ªç¯ whileå¾ªç¯ do-whileå¾ªç¯ ä¸‹é¢è¯¦ç»†ä»‹ç»ã€‚ forå¾ªç¯forå¾ªç¯çš„æ ¼å¼ä¸º for (åˆå§‹åŒ–è¯­å¥; æ¡ä»¶åˆ¤æ–­; å¾ªç¯æ§åˆ¶) &#123; å¾ªç¯ä½“;&#125; æ‰§è¡Œçš„é¡ºåºä¸ºï¼Œå…ˆæ‰§è¡Œåˆå§‹åŒ–è¯­å¥ï¼Œç„¶åè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœç»“æœä¸ºçœŸï¼Œé‚£ä¹ˆè¿›å…¥å¾ªç¯ä½“ï¼Œå¦‚æœç»“æœä¸ºå‡ï¼Œé‚£ä¹ˆé€€å‡ºå¾ªç¯ï¼Œæ‰§è¡Œå®Œå¾ªç¯ä½“åï¼Œæ¥ç€æ‰§è¡Œå¾ªç¯æ§åˆ¶è¯­å¥ï¼Œç„¶åè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¾ªç¯å¾€å¤ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­æ‰“å°å‡º1-100çš„å’Œ int sum = 0;for (int i = 1; i &lt;= 100; i++) &#123; //æ³¨æ„ï¼Œè¿™ä¸ªiåªèƒ½åœ¨forå¾ªç¯é‡Œé¢ç”¨ï¼Œåœ¨å¤–é¢ä¸èƒ½ç”¨ sum = sum + i;&#125; whileå¾ªç¯whileå¾ªç¯çš„æ ¼å¼ä¸º while (åˆ¤æ–­è¯­å¥) &#123; å¾ªç¯ä½“&#125; é¦–å…ˆä¼šå¯¹åˆ¤æ–­è¯­å¥è¿›è¡Œåˆ¤æ–­ï¼ŒçœŸå°±æ‰§è¡Œå¾ªç¯ä½“ï¼Œå‡å°±é€€å‡ºå¾ªç¯ã€‚æ‰§è¡Œå®Œå¾ªç¯ä½“ï¼Œæ¥ç€è¿›è¡Œåˆ¤æ–­ï¼Œå¾ªç¯å¾€å¤ã€‚ä¸‹é¢çš„ä¾‹å­è®¡ç®—1-100çš„å’Œ int sum = 0;int i = 1; //åˆå§‹åŒ–è¯­å¥while (i &lt;= 100) &#123; //åˆ¤æ–­è¯­å¥ sum = sum + i; //å¾ªç¯ä½“ i++; //å¾ªç¯æ§åˆ¶è¯­å¥&#125; do-whileå¾ªç¯do-whileå¾ªç¯çš„æ ¼å¼ä¸º do &#123; å¾ªç¯ä½“&#125; while (æ¡ä»¶åˆ¤æ–­); é¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ï¼Œç„¶åè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼ŒçœŸå°±ç»§ç»­æ‰§è¡Œå¾ªç¯ä½“ï¼Œå¦åˆ™é€€å‡ºå¾ªç¯ã€‚ do-whileå¾ªç¯ä¸whileå¾ªç¯çš„åŒºåˆ«æ˜¯ï¼Œdo-whileä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ï¼Œä¾‹å¦‚ int i = -1;do &#123; System.out.println(1);&#125; while (i &gt; 0); è¾“å‡ºä¸º 1 å¾ªç¯æ§åˆ¶breakå’Œcontinueå½“åœ¨å¾ªç¯ä½“ä¸­æ‰§è¡Œåˆ°breakæ—¶ï¼Œä¼šç›´æ¥é€€å‡ºå¾ªç¯ï¼Œå¦‚ for (int i = 1; i &lt;= 10; i++) &#123; System.out.println(i); if (i == 2) &#123; break; //å½“i = 2æ—¶é€€å‡ºå¾ªç¯ &#125;&#125; ç¨‹åºè¾“å‡ºä¸º 12 å½“åœ¨å¾ªç¯ä½“ä¸­æ‰§è¡Œåˆ°continueæ—¶ï¼Œé€€å‡ºæ­¤æ¬¡å¾ªç¯ï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œå¦‚ for (int i = 1; i &lt;= 5; i++) &#123; if (i == 3) &#123; continue; //é€€å‡ºæ­¤æ¬¡å¾ªç¯ï¼Œåé¢çš„ä»£ç ä¸æ‰§è¡Œäº†ï¼Œç›´æ¥æ‰§è¡Œå¾ªç¯æ§åˆ¶è¯­å¥i++ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ &#125; System.out.println(i);&#125; è¾“å‡ºä¸º 1245 æ­»å¾ªç¯å½“å¾ªç¯ä¸€ç›´è¿›è¡Œä¸‹å»ï¼Œä¸èƒ½é€€å‡ºï¼Œé‚£ä¹ˆå°±æˆä¸ºäº†æ­»å¾ªç¯ï¼Œä¾‹å¦‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ while (true) &#123; System.out.println(\"Hello\");&#125;for (int i = 0; ; i++) &#123; //çœç•¥äº†æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œé»˜è®¤ä¸ºçœŸï¼Œæ˜¯æ­»å¾ªç¯ System.out.println(i);&#125;for (int i = 0; i &lt; 10; ) &#123; //çœç•¥äº†å¾ªç¯æ§åˆ¶è¯­å¥ï¼Œiä¸€ç›´ä¸º0ï¼Œæ¡ä»¶åˆ¤æ–­ä¸€ç›´ä¸ºçœŸï¼Œä¸ºæ­»å¾ªç¯ System.out.println(i);&#125; å¾ªç¯åµŒå¥—å¾ªç¯é‡Œé¢å¯ä»¥åµŒå¥—ç€ä¸€ä¸ªå¾ªç¯ï¼Œä¾‹å¦‚è¾“å‡ºä¹ä¹ä¹˜æ³•è¡¨ for (int i = 1; i &lt; 10; i++) &#123; for (int j = 1; j &lt;= i; j++) &#123; System.out.printf(\"%d*%d=%2d \",j,i,j*i); //ç±»ä¼¼äºCè¯­è¨€ï¼Œæ ¼å¼åŒ–è¾“å‡ºï¼Œä»¥ä¾¿å¯¹é½ &#125; System.out.println();&#125; è¾“å‡ºä¸º 1*1= 1 1*2= 2 2*2= 4 1*3= 3 2*3= 6 3*3= 9 1*4= 4 2*4= 8 3*4=12 4*4=16 1*5= 5 2*5=10 3*5=15 4*5=20 5*5=25 1*6= 6 2*6=12 3*6=18 4*6=24 5*6=30 6*6=36 1*7= 7 2*7=14 3*7=21 4*7=28 5*7=35 6*7=42 7*7=49 1*8= 8 2*8=16 3*8=24 4*8=32 5*8=40 6*8=48 7*8=56 8*8=64 1*9= 9 2*9=18 3*9=27 4*9=36 5*9=45 6*9=54 7*9=63 8*9=72 9*9=81 æ–¹æ³•å…¥é—¨æ–¹æ³•å®šä¹‰æ–¹æ³•å®šä¹‰çš„æ ¼å¼ä¸º ä¿®é¥°ç¬¦ è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°ç±»å‹ å‚æ•°) &#123; ä»£ç  ...; return ...;&#125; å…¶ä¸­ä¿®é¥°ç¬¦ç›®å‰å›ºå®šä¸ºpublic staticï¼Œæ–¹æ³•è¦ç¬¦åˆä¹‹å‰åœ¨æ ‡è¯†ç¬¦é‡Œé¢çš„è§„å®šã€‚ æ³¨æ„ï¼š æ–¹æ³•ä¸èƒ½å®šä¹‰åœ¨æ–¹æ³•é‡Œé¢ æ–¹æ³•å®šä¹‰çš„å‰åé¡ºåºæ— æ‰€è°“ æ–¹æ³•åº”åœ¨classå’Œmainæ–¹æ³•ä¹‹é—´å®šä¹‰ returnçš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯ç»ˆæ­¢ç¨‹åºé€€å‡ºæ–¹æ³•ï¼Œç¬¬äºŒä¸ªæ˜¯è¿”å›å€¼ å¦‚æœè¿”å›å€¼çš„ç±»å‹æ—¶voidï¼Œå¯ä»¥åªå†™return;ï¼Œä»£è¡¨é€€å‡ºæ–¹æ³• public class Hello &#123; //å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯è®¡ç®—ä¸¤ä¸ªintæ•´æ•°çš„å’Œï¼Œå¹¶è¿”å›ä¸€ä¸ªintç±»å‹çš„å€¼ //è¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªintç±»å‹çš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªintç±»å‹çš„å€¼ public static int add (int x, int y) &#123; return x + y; &#125; //mainæ–¹æ³•çš„é¡ºåºå¯ä»¥å’Œä¸Šé¢addæ–¹æ³•çš„é¡ºåºé¢ å€’ public static void main(String[] args) &#123; //... ... //ä¸èƒ½åœ¨é‡Œé¢å®šä¹‰æ–¹æ³• &#125;&#125; æ–¹æ³•è°ƒç”¨æ–¹æ³•è°ƒç”¨çš„æ ¼å¼ä¸º æ–¹æ³•å(å‚æ•°); ä¾‹å¦‚ï¼Œåœ¨mainæ–¹æ³•ä¸­è°ƒç”¨ä¸Šé¢å®šä¹‰çš„addæ–¹æ³• public class Hello &#123; public static int add (int x, int y) &#123; return x + y; &#125; public static void main(String[] args) &#123; //è°ƒç”¨addæ–¹æ³•ï¼Œå…¶ä¸­2 å’Œ 3æ˜¯å‚æ•°ï¼Œå¿…é¡»æ˜¯intç±»å‹ï¼Œå¦åˆ™ä¼šæŠ¥é”™ int c = add(2, 3); //ä½¿ç”¨å˜é‡cæ¥æ¥å—æ–¹æ³•è¿”å›çš„ç»“æœï¼Œæ­¤æ—¶c = 5 &#125;&#125; æ–¹æ³•é‡è½½æ–¹æ³•é‡è½½æŒ‡çš„æ˜¯ä¸¤ä¸ªæ–¹æ³•çš„æ–¹æ³•åç›¸åŒï¼Œä½†æ˜¯å‚æ•°åˆ—è¡¨ä¸åŒï¼Œå‚æ•°åˆ—è¡¨ä¸åŒåŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢ å‚æ•°ä¸ªæ•°ä¸åŒ å‚æ•°ç±»å‹ä¸åŒ å‚æ•°é¡ºåºä¸åŒ ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ–¹æ³•æ˜¯é‡è½½ public static void add (int i, intj);static int add (double i, double j);public void add (double i, intj); æ³¨æ„ï¼š åˆ¤æ–­æ–¹æ³•æ˜¯å¦æ˜¯é‡è½½ï¼Œå…³é”®æ˜¯çœ‹æ–¹æ³•åæ˜¯å¦ç›¸åŒï¼Œå‚æ•°åˆ—è¡¨æ˜¯å¦ä¸åŒï¼Œä¸ä¿®é¥°ç¬¦ï¼Œè¿”å›å€¼æ²¡æœ‰ä»»ä½•çš„å…³ç³» ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ–¹æ³•ä¸æ˜¯é‡è½½ public static void add (int i, int j);static void add (int i, int j); //ä¸ä¿®é¥°ç¬¦æ— å…³ï¼Œå‚æ•°åˆ—è¡¨ç›¸åŒï¼Œæ‰€ä»¥ä¸æ˜¯é‡è½½ï¼Œç¼–è¯‘ä¼šæŠ¥é”™public static int (int i, int j); //ä¸è¿”å›å€¼æ— å…³ï¼Œå‚æ•°åˆ—è¡¨ç›¸åŒï¼Œæ‰€ä»¥ä¹Ÿä¸æ˜¯é‡è½½ï¼Œç¼–è¯‘ä¼šæŠ¥é”™ ä¸‹é¢ä¸¾ä¸€ä¸ªæ³¨æ„äº‹é¡¹ï¼Œå‡è®¾æœ‰ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªæ–¹æ³• public static void add (int i, double j); åœ¨mainæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆè°ƒç”¨ add(2, 2); //æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸¤ä¸ªæ•´æ•°ï¼Œå› ä¸ºä¼šè¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ä¸ºdouble ç„¶åæˆ‘ä»¬å¯¹è¯¥æ–¹æ³•é‡è½½äº† public static void add (double i, int j); //å‚æ•°åˆ—è¡¨çš„é¡ºåºä¸åŒï¼Œæ˜¯é‡è½½ å¦‚æœæˆ‘ä»¬è¿˜åœ¨mainæ–¹æ³•ä¸­ä¼ å…¥ä¸¤ä¸ªæ•´æ•° add (2, 2); //è¿™æ—¶ä¼šæŠ¥é”™ å› ä¸ºåœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå‘ç°ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å°±ä¼šæ„Ÿåˆ°æ¨¡ç³Šï¼Œä¸çŸ¥é“è°ƒç”¨å“ªä¸€ä¸ªæ–¹æ³•ï¼Œå°±ä¼šæŠ¥é”™ã€‚ æ•°ç»„å‡è®¾ä½ è¦ä¿å­˜ä¸€ç»„å­¦ç”Ÿçš„æˆç»©ï¼Œæˆ‘ä»¬ä¼šè€ƒè™‘æ¯ä¸ªå­¦ç”Ÿç”¨ä¸åŒçš„å˜é‡ä¿å­˜ï¼Œå¦‚ int score1 = 100;int score2 = 80;... ... è¿™æ ·å†™çš„è¯ä»£ç å¾ˆé•¿ï¼Œå¹¶ä¸”ä¸åˆ©äºæ‰¹é‡æ“ä½œï¼Œæ¯”å¦‚å¦‚æœæˆ‘è¦ç»™æ¯ä¸ªå­¦ç”ŸåŠ ä¸Šååˆ†ï¼Œé‚£æˆ‘ä»¬åªèƒ½è¿™ä¹ˆå†™ score1 = score1 + 10;... ... è¿™åªæ˜¯ä½“åŠ›æ´»ã€‚ Javaä¸­ä¸“é—¨æœ‰ä¸€ç±»æ•°æ®ç±»å‹ç”¨æ¥ä¿å­˜è¿™æ ·çš„æ•°æ®ï¼Œå®ƒå«åšæ•°ç»„ï¼Œä¸‹é¢æˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»ã€‚ æ•°ç»„çš„åˆå§‹åŒ–æ•°ç»„çš„åˆå§‹åŒ–åˆ†ä¸ºä¸¤ç»„ï¼Œåˆ†åˆ«ä¸ºåŠ¨æ€åˆå§‹åŒ–ï¼ˆæŒ‡å®šé•¿åº¦ï¼‰å’Œé™æ€åˆå§‹åŒ–ï¼ˆæŒ‡å®šå†…å®¹ï¼‰ã€‚ åŠ¨æ€åˆå§‹åŒ–åŠ¨æ€åˆå§‹åŒ–çš„æ ¼å¼ä¸º æ•°æ®ç±»å‹[] æ•°ç»„å = new æ•°æ®ç±»å‹[æ•°ç»„é•¿åº¦]; ä¾‹å¦‚ï¼Œä¸‹é¢å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º3çš„intç±»å‹çš„æ•°ç»„ int[] array = new array[3]; åŠ¨æ€åˆå§‹åŒ–å…¶å®å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ† int[] array;array = new array[3]; é™æ€åˆå§‹åŒ–é™æ€åˆå§‹åŒ–çš„æ ¼å¼ä¸º æ•°æ®ç±»å‹[] æ•°ç»„å = new æ•°æ®ç±»å‹[] &#123;å†…å®¹&#125;; ä¾‹å¦‚ï¼Œä¸‹é¢åˆ›å»ºäº†ä¸€ä¸ªStringç±»å‹çš„æ•°ç»„ï¼Œé‡Œé¢æœ‰3ä¸ªå­—ç¬¦ä¸²ï¼Œå†…å®¹ä¹‹é—´ä½¿ç”¨é€—å·éš”å¼€ String[] str = new String[]&#123; \"Hello\", \"World\", \"!!!\" &#125;; ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è®¡ç®—å†…å®¹çš„ä¸ªæ•°æ¥ç¡®å®šæ•°ç»„çš„é•¿åº¦ã€‚é™æ€åˆå§‹åŒ–è¿˜æœ‰çœç•¥æ ¼å¼ æ•°æ®ç±»å‹[] æ•°ç»„å = &#123;å†…å®¹&#125;; ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ç”¨çœç•¥æ ¼å¼é‡å†™ä¸º String[] str = &#123; \"Hello\", \"World\", \"!!!\" &#125; é™æ€åˆå§‹åŒ–ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆ String[] str;str = new String[] &#123; \"Hello\", \"World\", \"!!!\" &#125;; ä½†æ˜¯çœç•¥æ ¼å¼ä¸èƒ½è¿™æ ·çœ‹ï¼Œä¾‹å¦‚ä¸‹é¢çš„å†™æ³•æ˜¯é”™è¯¯çš„ String[] str;str = &#123; \"Hello\", \"World\", \"!!!\" &#125;; æ³¨æ„ï¼š æ•°ç»„çš„é•¿åº¦åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½å¤Ÿå‘ç”Ÿæ”¹å˜ å¯ä»¥é€šè¿‡æ•°ç»„å.lengthæ¥å¾—åˆ°æ•°ç»„çš„é•¿åº¦ é™æ€åˆå§‹åŒ–ä¼šæ ¹æ®å†…å®¹æ¥è‡ªåŠ¨æ¨ç®—å‡ºæ•°ç»„çš„é•¿åº¦ è®¿é—®æ•°ç»„æˆ‘ä»¬é€šè¿‡æ•°ç»„å[ç´¢å¼•]çš„æ–¹å¼æ¥è®¿é—®æ•°ç»„é‡Œé¢çš„å†…å®¹ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ç´¢å¼•å€¼æ˜¯ä»0å¼€å§‹çš„ï¼Œæ‰€ä»¥ç´¢å¼•çš„èŒƒå›´ä¸º0~æ•°ç»„é•¿åº¦-1 int[] array = &#123; 1, 2, 3 &#125;;System.out.println(arrays[0]); //è®¿é—®æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè¾“å‡º1System.out.println(arrays[1]); //è®¿é—®æ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œè¾“å‡º2 æ³¨æ„ï¼š ç´¢å¼•çš„èŒƒå›´ä¸èƒ½è¶…è¿‡æ•°ç»„çš„é•¿åº¦ï¼Œå¦åˆ™ä¼šæŠ¥é”™ ä¾‹å¦‚å¯¹äºä¸Šé¢å®šä¹‰çš„æ•°ç»„ï¼Œä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ array[3]; //ä¼šæŠ¥é”™ åŠ¨æ€åˆå§‹åŒ–æœ‰é»˜è®¤å€¼ï¼Œä¸åŒç±»å‹çš„é»˜è®¤å€¼ä¸åŒï¼Œå¦‚ä¸‹ æ•°æ®ç±»å‹ é»˜è®¤å€¼ æ•´å‹(byte,short,int,long) 0 æµ®ç‚¹å‹(floatå’Œdouble) 0.0 å­—ç¬¦(char) â€˜\\u0000â€™ å¸ƒå°”å‹(boolean) false å¼•ç”¨å†…å®¹ null é™æ€åˆå§‹åŒ–å…¶å®ä¹Ÿæœ‰é»˜è®¤å€¼ï¼Œä¸è¿‡é©¬ä¸Šåˆè¢«èµ‹å€¼è¢«è¦†ç›–äº† Javaçš„å†…å­˜æ¨¡å‹Javaçš„å†…å®¹æ¨¡å‹åˆ†ä¸ºäº”éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ æ ˆ(Stack) å­˜æ”¾çš„éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œå˜é‡ä¸€æ—¦è¶…å‡ºä½œç”¨åŸŸï¼Œç«‹åˆ»ä»æ ˆå†…å­˜ä¸­æ¶ˆå¤± å½“è°ƒç”¨æ–¹æ³•è¿è¡Œæ—¶ï¼Œæ ˆä¼šä¸ºæ–¹æ³•å¼€è¾Ÿä¸€å—ç©ºé—´ å †(Heap) å‡¡æ˜¯newå‡ºæ¥çš„ï¼Œéƒ½åœ¨å †ä¸­ å †å†…å­˜é‡Œé¢çš„ä¸œè¥¿éƒ½æœ‰ä¸€ä¸ªåœ°å€å€¼ å †å†…å­˜é‡Œçš„æ•°æ®éƒ½æœ‰é»˜è®¤å€¼ï¼ŒåŒæ•°ç»„çš„é»˜è®¤å€¼ æ–¹æ³•åŒº(Method Area) å­˜å‚¨classç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–¹æ³•çš„ä¿¡æ¯ æœ¬åœ°æ–¹æ³•æ ˆ(Native Method Stack) ä¸æ“ä½œç³»ç»Ÿç›¸å…³ å¯„å­˜å™¨(PC Register) ä¸CPUç›¸å…³ï¼Œé€Ÿåº¦éå¸¸çš„å¿« ç›®å‰æˆ‘ä»¬éœ€è¦å…³æ³¨çš„å‰ä¸‰ä¸ªã€‚ æ•°ç»„çš„å†…å­˜å›¾ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€æ®µä»£ç ï¼Œç„¶åä»å†…å­˜çš„è§’åº¦çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆ public static void main(String[] args) &#123; int[] array1 = new int[3]; System.out.println(array1); // çŒœçŒœæ‰“å°å‡ºä»€ä¹ˆ array1[0] = 10; System.out.println(array1[0]); int[] array2 = array1; System.out.println(array2); array2[1] = 200; System.out.println(array1[1]);&#125; ä¸Šé¢ä»£ç çš„è¾“å‡ºä¸º [I@15db974210[I@15db9742200 ä¸‹é¢å°†ä»å†…å­˜çš„è§’åº¦è§£é‡Šï¼Œé¦–å…ˆç¬¬ä¸€è¡Œ public static void main(String[] args) è¯¥æ–¹æ³•çš„ä¿¡æ¯ä¼šä¿å­˜åœ¨æ–¹æ³•åŒºä¸­ï¼Œå¦‚æœæ–¹æ³•åŒºä¸­æ²¡æœ‰è¯¥æ–¹æ³•ï¼Œé‚£ä¹ˆç¨‹åºä¼šæŠ¥é”™ã€‚ç„¶åæ‰¾åˆ°mainæ–¹æ³•åï¼Œè¿™æ—¶ä¼šæŠŠmainæ¨å…¥æ ˆä¸­ï¼Œæ ˆå†…å­˜ä¼šä¸ºmainæ–¹æ³•å¼€è¾Ÿä¸€å—ç©ºé—´ int[] array1 = new int[3]; è¿™ä¸€è¡Œæ˜¯åŠ¨æ€åˆå§‹åŒ–æ•°ç»„ï¼Œé¦–å…ˆä¼šåœ¨mainæ–¹æ³•ä¸­åˆ†é…ä¸€å—ç©ºé—´ä¿å­˜å˜é‡array1çš„å€¼ï¼Œåœ¨å †ä¸­ä¼šå¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œç©ºé—´çš„å¤§å°ä¸º3ä¸ªintçš„å¤§å°ï¼Œé‡Œé¢çš„é»˜è®¤å€¼ä¸º0ï¼Œåœ¨å †ä¸­å­˜æ”¾çš„ä¸œè¥¿éƒ½æœ‰ä¸€ä¸ªåœ°å€ï¼Œarray1ä¿å­˜çš„å°±æ˜¯è¿™ä¸ªåœ°å€ã€‚è®¿é—®æ•°ç»„å°±æ˜¯é€šè¿‡è¿™ä¸ªåœ°å€å»è®¿é—®åœ¨å †ä¸­ä¿å­˜çš„æ•°æ®çš„ã€‚ System.out.println(array1); è¿™ä¸€è¡Œæ‰“å°å˜é‡array1çš„å€¼ï¼Œæˆ‘ä»¬çŸ¥é“array1ä¿å­˜çš„æ˜¯æ•°ç»„åœ¨å †ä¸­çš„åœ°å€ï¼Œæ‰€ä»¥è¾“å‡ºçš„æ˜¯[I@15db9742ï¼Œå…¶ä¸­[ä»£è¡¨ç±»å‹ä¸ºæ•°ç»„ï¼ŒIä»£è¡¨æ˜¯intç±»å‹ï¼Œ@ç¬¦å·åé¢çš„åå…­è¿›åˆ¶æ•°å­—æ˜¯åœ°å€çš„å“ˆå¸Œå€¼ã€‚ array1[0] = 10;System.out.println(array1[0]); ç¬¬ä¸€è¡Œæ˜¯å¯¹æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹å€¼ä¸º10ï¼ŒåŸæ¥æ•°ç»„ä¸­çš„å…ƒç´ é»˜è®¤ä¸º0ï¼Œç°åœ¨æ”¹å˜ä¸ºäº†10ã€‚åœ¨å†…å­˜ä¸­çš„è¿‡ç¨‹ä¸ºï¼Œé¦–å…ˆæ ¹æ®array1ä¿å­˜çš„åœ°å€å»å¯»æ‰¾åœ¨å †ä¸­çš„æ•°ç»„ï¼Œç„¶åæ ¹æ®ç´¢å¼•å€¼å»å¯»æ‰¾å¯¹åº”çš„ä½ç½®ï¼Œç„¶åå¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ int[] array2 = array1;System.out.pritnln(array2); è¿™è¡Œè¯­å¥å£°æ˜äº†ä¸€ä¸ªæ•°ç»„å˜é‡array2ï¼Œå®ƒçš„å€¼ä¸array1çš„å€¼ç›¸åŒï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¸º[I@15db9742ã€‚è¿™è¡¨ç¤ºä¸¤ä¸ªæ•°ç»„å˜é‡æŒ‡å‘åœ¨å †ä¸­çš„åŒä¸€ä¸ªæ•°ç»„ array2[1] = 200;System.out.println(array1[1]); ä¸Šé¢çš„è¯­å¥è¡¨ç¤ºé€šè¿‡array2ä¿®æ”¹æ•°ç»„ä¸­çš„å…ƒç´ array2[1]ä¸º200ï¼Œç”±äºarray1å’Œarray2æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥array2å¯¹æ•°ç»„è¿›è¡Œä¿®æ”¹ä¹Ÿä¼šå½±å“åˆ°array1ã€‚æ‰€ä»¥è¾“å‡ºçš„ç»“æœæ˜¯200è€Œä¸æ˜¯0ã€‚ æ•°ç»„ç»ƒä¹ å­¦ä¹ äº†æ•°ç»„çš„å†…å®¹ä¹‹åï¼Œæˆ‘ä»¬åšå‡ ä¸ªç»ƒä¹ å·©å›ºä¸€ä¸‹çŸ¥è¯†ã€‚ éå†æ•°ç»„éå†æ•°ç»„æŒ‡çš„å°±æ˜¯è®¿é—®æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬ä½¿ç”¨forå¾ªç¯ï¼Œå°†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ‰“å°å‡ºæ¥ã€‚ int[] array = &#123; 1, 4, 7, 9, 5&#125;;for (int i = 0; i &lt; array.length; i++) &#123; System.out.println(array[i]);&#125; è¾“å‡ºä¸º 14795 æ‰¾åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼æ€è·¯ä¸ºï¼Œæƒ³è±¡ä¸ºè¿™æ˜¯ä¸€ä¸ªæ‰“æ“‚å°ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ å°±æ˜¯æŒ‘æˆ˜è€…ï¼Œé¦–å…ˆè®©æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ“‚ä¸»ï¼Œåé¢çš„æŒ‘æˆ˜è€…ï¼ˆæ•°ç»„å…ƒç´ ï¼‰å»æŒ‘æˆ˜ï¼Œæ¯”æ“‚ä¸»å¼ºçš„è¯å°±æˆä¸ºæ–°çš„æ“‚ä¸»ï¼Œæ¯”æ“‚ä¸»å¼±é‚£ä¹ˆæ“‚ä¸»å°±ç»§ç»­åœ¨å°ä¸Šï¼Œé‚£ä¹ˆæœ€åæ‰€æœ‰äººéƒ½æŒ‘æˆ˜å®Œäº†ï¼Œé‚£ä¹ˆæ­¤åˆ»çš„æ“‚ä¸»å°±æ˜¯æœ€å¼ºçš„ç”·äººã€‚ int[] array = &#123; 1, 4, 7, 9, 5&#125;;int max = array[0]; //æ“‚ä¸»ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ for (int i = 1; i &lt; array.length; i++) &#123; //æŒ‘æˆ˜è€…ä¸æ–­æŒ‘æˆ˜ if (array[i] &gt; max) &#123; max = array[i]; //å¦‚æœæŒ‘æˆ˜è€…æ¯”æ“‚ä¸»å¼ºï¼Œé‚£ä¹ˆæ¢æ“‚ä¸»ï¼Œå¦åˆ™æ“‚ä¸»ä¸å˜ &#125;&#125;System.out.println(max); //æ­¤åˆ»çš„æ“‚ä¸»å°±æ˜¯æœ€å¼ºçš„ è¾“å‡ºä¸º 9 æ•°ç»„åè½¬æ‰€è°“çš„æ•°ç»„åè½¬å°±æ˜¯ç›¸å¯¹åº”çš„ä½ç½®è°ƒæ¢é¡ºåºï¼Œæ¯”å¦‚ç´¢å¼•ä¸º0ä¸ç´¢å¼•ä¸ºarray.length-1ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ ï¼‰è°ƒæ¢ä½ç½®ï¼Œä¸€èˆ¬çš„ç´¢å¼•ä¸ºiçš„å…ƒç´ ä¸ç´¢å¼•ä¸ºarray.length-1-içš„å…ƒç´ äº¤æ¢ä½ç½®ï¼Œé‚£ä¹ˆäº¤æ¢çš„æ¡ä»¶å°±æ˜¯i &lt; array.length -1 - iå¾—åˆ°i &lt; (array.length -1) / 2 int[] array = &#123; 1, 4, 7, 9, 5&#125;;int len = array.length;for (int i = 0; i &lt; (len - 1) / 2; i++) &#123; int temp = array[i]; array[i] = array[len -1 -i]; array[len -1 -i] = temp;&#125;for (int i = 0; i &lt; len; i++) &#123; System.out.println(array[i]);&#125; è¾“å‡ºä¸º 59741 æ•°ç»„ä¸æ–¹æ³•æ•°ç»„å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼è¿”å›ã€‚ æ–¹æ³•ä½œä¸ºå‡½æ•°å‚æ•°ä¸‹é¢å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯æ‰“å°å‡ºæ•°ç»„é‡Œé¢çš„æ‰€æœ‰çš„å…ƒç´ ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ•´å‹çš„æ•°ç»„å‚æ•°ã€‚ public static void printArray (int[] array) &#123; for (int i = 0; i &lt; array.length; i++) &#123; System.out.println(array[i]); &#125;&#125; ä¸‹é¢åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³• int[] array = &#123; 1, 2, 3 &#125;;printArray(array); è¾“å‡ºä¸º 123 æ³¨æ„ï¼š æ•°ç»„ä¼ é€’çš„æ˜¯åœ°å€å€¼ï¼Œæ‰€ä»¥printArrayæ–¹æ³•ä¸­çš„arrayä¸mainæ–¹æ³•ä¸­çš„arrayæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥å¦‚æœåœ¨printArrayæ–¹æ³•ä¸­å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œä¼šå½±å“åˆ°mainæ–¹æ³•ä¸­çš„arrayã€‚ éšç€printArrayæ–¹æ³•çš„æ‰§è¡Œå®Œæˆï¼Œåœ¨æ ˆå†…å­˜ä¸­ä¼šå°†ä¸ºprintArrayå¼€è¾Ÿçš„ç©ºé—´å‡ºæ ˆï¼Œæ­¤æ—¶printArrayæ–¹æ³•ä¸­çš„arrayå˜é‡ä¼šç«‹å³æ¶ˆå¤±ã€‚ ä¸ä»…æ˜¯æ•°ç»„ï¼Œå¼•ç”¨ç±»å‹ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼Œä¼ é€’çš„éƒ½æ˜¯åœ°å€å€¼ æ•°ç»„ä½œä¸ºæ–¹æ³•è¿”å›å€¼ä¸‹é¢æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œè¿”å›è¯¥æ•°ç»„çš„æ‰€æœ‰æ•°å­—ä¹‹å’ŒåŠå¹³å‡æ•°ï¼Œç”±äºreturnè¯­å¥åªèƒ½è¿”å›0æˆ–1ä¸ªå€¼ï¼Œè¦è¿”å›ä¸¤ä¸ªå€¼çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼è¡¨ç¤ºå’Œï¼Œç¬¬äºŒä¸ªå€¼è¡¨ç¤ºå¹³å‡æ•°ã€‚ public static double[] getSumAndAvg (int[] array) &#123; double sum = 0; for (int i = 0; i &lt; array.length; i++) &#123; //æ±‚å’Œ sum = sum + array[i]; &#125; double avg = sum / array.length; //å¾—åˆ°å¹³å‡æ•° double[] result = &#123; sum, avg &#125;; //åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå€¼ä¸ºsum ç¬¬äºŒä¸ªå€¼ä¸ºavg return result;&#125; åœ¨mainæ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³• int[] array = &#123; 1, 4, 7, 9, 5&#125;;double[] resArr = getSumAndAvg(array); //å¾—åˆ°æ•°ç»„System.out.println(\"Sum is \" + resArr[0]); //æ‰“å°è¾“å‡ºå’ŒSystem.out.println(\"Average is \" + resArr[1]); //æ‰“å°è¾“å‡ºå¹³å‡æ•° è¾“å‡ºä¸º Sum is 26.0Average is 5.2 æ³¨æ„ï¼š æ–¹æ³•è¿”å›æ—¶æ•°ç»„çš„åœ°å€å€¼ï¼Œå†…å­˜åˆ†æè¿‡ç¨‹åŒä¸Šç±»ä¼¼ è¿”å›å¼•ç”¨æ•°æ®ç±»å‹ï¼Œè¿”å›çš„ä¹Ÿæ˜¯åœ°å€å€¼","tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"},{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"}]},{"title":"Javaå¼€å‘ç¯å¢ƒæ­å»º","date":"2019-06-30T16:00:00.000Z","path":"/Javaç¯å¢ƒæ­å»º/","text":"Javaç¯å¢ƒæ­å»ºåˆ†ä¸ºä¸‰æ­¥ï¼š ä¸‹è½½JDK å®‰è£…JDK ç¯å¢ƒå˜é‡é…ç½® ä¸‹é¢å°†è¯¦ç»†ä»‹ç»å®‰è£…çš„æ­¥éª¤ã€‚ ä¸‹è½½JDKé¦–å…ˆè¿›å…¥Oracleå®˜ç½‘è¿›è¡Œä¸‹è½½ åœ¨æœç´¢æ¡†è¾“å…¥ Javaï¼Œå¼¹å‡ºçš„ç¬¬ä¸€æ¡å°±æ˜¯ Java Downloadï¼Œè¿›å…¥é¡µé¢ï¼Œé€‰æ‹© JDK 8 è¿›è¡Œä¸‹è½½ é€‰æ‹©ç¬¦åˆè‡ªå·±æ“ä½œç³»ç»Ÿç‰ˆæœ¬çš„ JDK ä¸‹è½½ å‹¾é€‰åŒæ„ï¼Œå¹¶ç‚¹å‡»ä¸‹è½½ è¿™æ—¶éœ€è¦ä½ è¿›è¡Œç™»å½• æœ‰è´¦å·çš„ç™»å½•ä¸‹è½½ï¼Œæ²¡è´¦å·çš„æ³¨å†Œä¸€ä¸ªå³å¯ã€‚ç™»å½•æˆåŠŸåå°±å¼€å§‹ä¸‹è½½äº† å®‰è£…JDKå®‰è£…JDKå°±æ˜¯ä¸€ç›´ç‚¹nextå³å¯ï¼Œå› ä¸ºJDKæ˜¯åŒ…å«JREçš„ï¼Œæ‰€ä»¥JREå¯ä»¥ä¸å¿…å®‰è£…ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸è¦å°†å®‰è£…ç›®å½•å®‰è£…åœ¨ä¸­æ–‡ç›®å½•ä¸‹ï¼Œå› ä¸ºå¯èƒ½ä¼šç¢°åˆ°å„ç§å„æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†å®ƒæ‰¼æ€åœ¨æ‘‡ç¯®é‡Œå³å¯ã€‚è¿™é‡Œéœ€è¦è®°ä½å®‰è£…çš„è·¯å¾„ï¼Œæ¯”å¦‚æˆ‘å®‰è£…çš„è·¯å¾„æ˜¯ D:\\Java\\jdk1.8.0_271 è¿›å…¥ä½ çš„å®‰è£…ç›®å½•ï¼Œå†…å®¹å¦‚ä¸‹ ç¯å¢ƒå˜é‡é…ç½®ç°åœ¨è¦è¿›è¡Œç¯å¢ƒå˜é‡çš„é…ç½®ï¼Œå¯èƒ½ä½ ä¸çŸ¥é“ä¸ºä»€ä¹ˆéœ€è¦è¿›è¡Œé…ç½®ã€‚æˆ‘ä»¬çœ‹è¿™ä¹ˆä¸€ä¸ªæƒ…å†µï¼Œä½ åœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸€ä¸ªå‘½ä»¤ï¼Œæ¯”å¦‚ notepad(å®ƒä¼šæ‰“å¼€ä¸€ä¸ªè®°äº‹æœ¬)ï¼Œä½†æ˜¯å½“ä½ è¾“å…¥ä¸€ä¸²ä¹±ä¸ƒå…«ç³Ÿçš„å­—ç¬¦æ—¶ï¼Œå®ƒä¼šæç¤ºä½  é‚£å‘½ä»¤è¡Œæ€ä¹ˆçŸ¥é“ notepad æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œè€Œä½ ä¹±è¾“å…¥çš„å­—ç¬¦ä¸æ˜¯å‘½ä»¤å‘¢? å› ä¸ºå½“ä½ è¾“å…¥å­—ç¬¦åï¼Œå‘½ä»¤è¡Œä¼šå»ä¸€ä¸ªè·¯å¾„æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªå‘½ä»¤ï¼Œå¦‚æœæœ‰é‚£ä¹ˆæ‰§è¡Œè¯¥å‘½ä»¤ï¼Œæ²¡æœ‰å°±ä¼šæŠ¥å‡ºä¸Šé¢é‚£æ ·çš„é”™è¯¯ã€‚ä¸ºäº†æˆ‘ä»¬èƒ½å¤Ÿåœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨æœ‰å…³äº Java çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å°±è¦å°†æœ‰å…³ Java çš„å‘½ä»¤æ·»åŠ åˆ°è·¯å¾„ä¸­ï¼Œè¿™ä¸ªè·¯å¾„å°±æ˜¯æˆ‘ä»¬è¦å»é…ç½®çš„ä¸œè¥¿ã€‚é‚£ä¹ˆä¸Java æœ‰å…³çš„å‘½ä»¤æ”¾åœ¨å“ªé‡Œï¼Œæ”¾åœ¨å®‰è£…ç›®å½•ä¸‹çš„ bin ç›®å½•ä¸‹ï¼Œç„¶åè¿›å…¥ bin ç›®å½•ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢å°±æ˜¯æœ‰å…³ Java çš„å„ç§å‘½ä»¤ï¼Œæˆ‘ä»¬å¤åˆ¶ bin çš„è·¯å¾„ï¼Œå¦‚ D:\\Java\\jdk1.8.0_271\\bin ç°åœ¨æ¥åˆ°æ¡Œé¢ï¼Œå³é”®æˆ‘çš„ç”µè„‘ï¼Œç‚¹å‡»å±æ€§ ç„¶åæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ ä¼šè¿›å…¥ä¸‹é¢è¿™ä¸ªç•Œé¢ ç‚¹å‡»æ–°å»ºï¼Œå°† bin ç›®å½•æ‰€åœ¨çš„è·¯å¾„å†™ä¸Šå» æ¥ç€ä¸€è·¯ç‚¹ç¡®å®šè¿”å›ã€‚ä¸ºäº†æ£€éªŒæ˜¯å¦é…ç½®æˆåŠŸï¼Œæˆ‘ä»¬æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥javaå’Œjavacå‘½ä»¤ï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„å‘½ä»¤è¡Œè¾“å‡ºå°±è¯´æ˜æˆåŠŸäº† C:\\Users\\22231Î» javaç”¨æ³•: java [-options] class [args...] (æ‰§è¡Œç±») æˆ– java [-options] -jar jarfile [args...] (æ‰§è¡Œ jar æ–‡ä»¶)å…¶ä¸­é€‰é¡¹åŒ…æ‹¬: -d32 ä½¿ç”¨ 32 ä½æ•°æ®æ¨¡å‹ (å¦‚æœå¯ç”¨) -d64 ä½¿ç”¨ 64 ä½æ•°æ®æ¨¡å‹ (å¦‚æœå¯ç”¨) -server é€‰æ‹© \"server\" VM é»˜è®¤ VM æ˜¯ server. -cp &lt;ç›®å½•å’Œ zip/jar æ–‡ä»¶çš„ç±»æœç´¢è·¯å¾„&gt; -classpath &lt;ç›®å½•å’Œ zip/jar æ–‡ä»¶çš„ç±»æœç´¢è·¯å¾„&gt; ç”¨ ; åˆ†éš”çš„ç›®å½•, JAR æ¡£æ¡ˆ å’Œ ZIP æ¡£æ¡ˆåˆ—è¡¨, ç”¨äºæœç´¢ç±»æ–‡ä»¶ã€‚ -D&lt;åç§°&gt;=&lt;å€¼&gt; è®¾ç½®ç³»ç»Ÿå±æ€§ -verbose:[class|gc|jni] å¯ç”¨è¯¦ç»†è¾“å‡º -version è¾“å‡ºäº§å“ç‰ˆæœ¬å¹¶é€€å‡º -version:&lt;å€¼&gt; è­¦å‘Š: æ­¤åŠŸèƒ½å·²è¿‡æ—¶, å°†åœ¨ æœªæ¥å‘è¡Œç‰ˆä¸­åˆ é™¤ã€‚ éœ€è¦æŒ‡å®šçš„ç‰ˆæœ¬æ‰èƒ½è¿è¡Œ -showversion è¾“å‡ºäº§å“ç‰ˆæœ¬å¹¶ç»§ç»­ -jre-restrict-search | -no-jre-restrict-search è­¦å‘Š: æ­¤åŠŸèƒ½å·²è¿‡æ—¶, å°†åœ¨ æœªæ¥å‘è¡Œç‰ˆä¸­åˆ é™¤ã€‚ åœ¨ç‰ˆæœ¬æœç´¢ä¸­åŒ…æ‹¬/æ’é™¤ç”¨æˆ·ä¸“ç”¨ JRE -? -help è¾“å‡ºæ­¤å¸®åŠ©æ¶ˆæ¯ -X è¾“å‡ºéæ ‡å‡†é€‰é¡¹çš„å¸®åŠ© -ea[:&lt;packagename&gt;...|:&lt;classname&gt;] -enableassertions[:&lt;packagename&gt;...|:&lt;classname&gt;] æŒ‰æŒ‡å®šçš„ç²’åº¦å¯ç”¨æ–­è¨€ -da[:&lt;packagename&gt;...|:&lt;classname&gt;] -disableassertions[:&lt;packagename&gt;...|:&lt;classname&gt;] ç¦ç”¨å…·æœ‰æŒ‡å®šç²’åº¦çš„æ–­è¨€ -esa | -enablesystemassertions å¯ç”¨ç³»ç»Ÿæ–­è¨€ -dsa | -disablesystemassertions ç¦ç”¨ç³»ç»Ÿæ–­è¨€ -agentlib:&lt;libname&gt;[=&lt;é€‰é¡¹&gt;] åŠ è½½æœ¬æœºä»£ç†åº“ &lt;libname&gt;, ä¾‹å¦‚ -agentlib:hprof å¦è¯·å‚é˜… -agentlib:jdwp=help å’Œ -agentlib:hprof=help -agentpath:&lt;pathname&gt;[=&lt;é€‰é¡¹&gt;] æŒ‰å®Œæ•´è·¯å¾„ååŠ è½½æœ¬æœºä»£ç†åº“ -javaagent:&lt;jarpath&gt;[=&lt;é€‰é¡¹&gt;] åŠ è½½ Java ç¼–ç¨‹è¯­è¨€ä»£ç†, è¯·å‚é˜… java.lang.instrument -splash:&lt;imagepath&gt; ä½¿ç”¨æŒ‡å®šçš„å›¾åƒæ˜¾ç¤ºå¯åŠ¨å±å¹•æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·å‚é˜… http://www.oracle.com/technetwork/java/javase/documentation/index.htmlã€‚C:\\Users\\22231Î» javacç”¨æ³•: javac &lt;options&gt; &lt;source files&gt;å…¶ä¸­, å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬: -g ç”Ÿæˆæ‰€æœ‰è°ƒè¯•ä¿¡æ¯ -g:none ä¸ç”Ÿæˆä»»ä½•è°ƒè¯•ä¿¡æ¯ -g:&#123;lines,vars,source&#125; åªç”ŸæˆæŸäº›è°ƒè¯•ä¿¡æ¯ -nowarn ä¸ç”Ÿæˆä»»ä½•è­¦å‘Š -verbose è¾“å‡ºæœ‰å…³ç¼–è¯‘å™¨æ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„æ¶ˆæ¯ -deprecation è¾“å‡ºä½¿ç”¨å·²è¿‡æ—¶çš„ API çš„æºä½ç½® -classpath &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶å’Œæ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½® -cp &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶å’Œæ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½® -sourcepath &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾è¾“å…¥æºæ–‡ä»¶çš„ä½ç½® -bootclasspath &lt;è·¯å¾„&gt; è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½® -extdirs &lt;ç›®å½•&gt; è¦†ç›–æ‰€å®‰è£…æ‰©å±•çš„ä½ç½® -endorseddirs &lt;ç›®å½•&gt; è¦†ç›–ç­¾åçš„æ ‡å‡†è·¯å¾„çš„ä½ç½® -proc:&#123;none,only&#125; æ§åˆ¶æ˜¯å¦æ‰§è¡Œæ³¨é‡Šå¤„ç†å’Œ/æˆ–ç¼–è¯‘ã€‚ -processor &lt;class1&gt;[,&lt;class2&gt;,&lt;class3&gt;...] è¦è¿è¡Œçš„æ³¨é‡Šå¤„ç†ç¨‹åºçš„åç§°; ç»•è¿‡é»˜è®¤çš„æœç´¢è¿›ç¨‹ -processorpath &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾æ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½® -parameters ç”Ÿæˆå…ƒæ•°æ®ä»¥ç”¨äºæ–¹æ³•å‚æ•°çš„åå°„ -d &lt;ç›®å½•&gt; æŒ‡å®šæ”¾ç½®ç”Ÿæˆçš„ç±»æ–‡ä»¶çš„ä½ç½® -s &lt;ç›®å½•&gt; æŒ‡å®šæ”¾ç½®ç”Ÿæˆçš„æºæ–‡ä»¶çš„ä½ç½® -h &lt;ç›®å½•&gt; æŒ‡å®šæ”¾ç½®ç”Ÿæˆçš„æœ¬æœºæ ‡å¤´æ–‡ä»¶çš„ä½ç½® -implicit:&#123;none,class&#125; æŒ‡å®šæ˜¯å¦ä¸ºéšå¼å¼•ç”¨æ–‡ä»¶ç”Ÿæˆç±»æ–‡ä»¶ -encoding &lt;ç¼–ç &gt; æŒ‡å®šæºæ–‡ä»¶ä½¿ç”¨çš„å­—ç¬¦ç¼–ç  -source &lt;å‘è¡Œç‰ˆ&gt; æä¾›ä¸æŒ‡å®šå‘è¡Œç‰ˆçš„æºå…¼å®¹æ€§ -target &lt;å‘è¡Œç‰ˆ&gt; ç”Ÿæˆç‰¹å®š VM ç‰ˆæœ¬çš„ç±»æ–‡ä»¶ -profile &lt;é…ç½®æ–‡ä»¶&gt; è¯·ç¡®ä¿ä½¿ç”¨çš„ API åœ¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶ä¸­å¯ç”¨ -version ç‰ˆæœ¬ä¿¡æ¯ -help è¾“å‡ºæ ‡å‡†é€‰é¡¹çš„æè¦ -Aå…³é”®å­—[=å€¼] ä¼ é€’ç»™æ³¨é‡Šå¤„ç†ç¨‹åºçš„é€‰é¡¹ -X è¾“å‡ºéæ ‡å‡†é€‰é¡¹çš„æè¦ -J&lt;æ ‡è®°&gt; ç›´æ¥å°† &lt;æ ‡è®°&gt; ä¼ é€’ç»™è¿è¡Œæ—¶ç³»ç»Ÿ -Werror å‡ºç°è­¦å‘Šæ—¶ç»ˆæ­¢ç¼–è¯‘ @&lt;æ–‡ä»¶å&gt; ä»æ–‡ä»¶è¯»å–é€‰é¡¹å’Œæ–‡ä»¶å å¦‚æœæç¤ºå‘½ä»¤æ‰¾ä¸åˆ°ä¹‹ç±»çš„ï¼Œè¯´æ˜é…ç½®å¤±è´¥äº†ï¼Œå°±è¦å›å¤´ä»”ç»†çœ‹çœ‹æ˜¯ä¸æ˜¯æ¼æ‰äº†ä»€ä¹ˆã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/Java/"},{"name":"è½¯ä»¶å®‰è£…åŠé…ç½®","slug":"è½¯ä»¶å®‰è£…åŠé…ç½®","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE/"}]},{"title":"CSSåŸºç¡€","date":"2019-02-11T16:00:00.000Z","path":"/CSSåŸºç¡€/","text":"CSSå…¥é—¨ä¹‹å‰æˆ‘ä»¬å­¦ä¹ è¿‡HTMLçš„åŸºæœ¬çŸ¥è¯†ï¼Œå¯¹äºç½‘é¡µæ¥è¯´ï¼ŒHTMLæ­å»ºçš„åªæ˜¯æ¡†æ¶ï¼Œè€Œå¯¹äºç½‘é¡µçš„ç¾å®¹ï¼Œåˆ™éœ€è¦ç”¨åˆ°CSSï¼ŒCSSå°±å¯ä»¥çœ‹åšæ˜¯ç½‘é¡µçš„ç¾å®¹å¸ˆã€‚CSSçš„å…¨ç§°å«åšCascading Style Sheets,ä¸­æ–‡åå­—å«å±‚å æ ·å¼è¡¨ã€‚æˆ‘ä»¬å¯ä»¥ç”¨CSSè®¾ç½®å­—ä½“çš„é¢œè‰²ï¼Œå­—ä½“çš„å¤§å°ä»¥åŠå›¾ç‰‡å¤–å½¢ï¼Œæ’ç‰ˆå¸ƒå±€ç­‰ç­‰â€ç¾é¢œâ€çš„å·¥ä½œã€‚ CSSçš„ä¹¦å†™ä½ç½®è¡Œå†…å¼CSSçš„ä¹¦å†™ä½ç½®æœ‰ä¸‰ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯è¡Œå†…ï¼Œå¦‚ä¸‹ &lt;æ ‡ç­¾ style=\"å±æ€§1:å±æ€§å€¼1; å±æ€§2:å±æ€§å€¼2 ...\"&gt; ä¸‹é¢å°±æ˜¯æŠŠè¿™ä¸ªä¸€çº§æ ‡é¢˜è®¾ç½®ä¸ºçº¢è‰²ã€‚ &lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;/head&gt; &lt;body&gt; &lt;h1 style = \"color:red\"&gt;CSSå…¥é—¨&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt; å†…åµŒå¼å†…åµŒå¼æ˜¯å°†CSSä»£ç é›†ä¸­å†™åœ¨HTMLæ–‡æ¡£çš„headå¤´éƒ¨æ ‡ç­¾ä¸­ï¼Œå¹¶ä¸”ç”¨styleæ ‡ç­¾å®šä¹‰ï¼Œå…¶åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š &lt;head&gt; &lt;style&gt; é€‰æ‹©å™¨&#123;å±æ€§1:å±æ€§å€¼1; å±æ€§2:å±æ€§å€¼2; ...&#125; &lt;/style&gt;&lt;/head&gt; æ¯”å¦‚ä¸‹é¢ &lt;head&gt; &lt;style&gt; h1&#123;color:red;&#125; &lt;/style&gt;&lt;/head&gt; å°±æ˜¯æŠŠæ‰€æœ‰çš„h1æ ‡ç­¾çš„æ–‡å­—é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²ã€‚ å¤–é“¾å¼å¤–é“¾å¼æŒ‡çš„æ˜¯HTMLæ–‡ä»¶ä¸CSSæ–‡ä»¶åˆ†å¼€å†™ï¼Œåœ¨å®é™…å·¥ä½œä¸­å°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚ä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘åœ¨ä»‹ç»CSSçš„ä½¿ç”¨çš„æ—¶å€™ä¸€èˆ¬ä¼šç”¨å†…åµŒå¼ã€‚å¤–é“¾å¼çš„å†™æ³•å¦‚ä¸‹ &lt;link rel=\"stylesheet\" href=\"CSSæ–‡ä»¶çš„è·¯å¾„\" type=\"text/CSS\"/ &gt; linkæ ‡ç­¾æ˜¯å•æ ‡ç­¾ï¼Œå®ƒæ˜¯æ”¾åœ¨headæ ‡ç­¾å†…çš„ã€‚åœ¨ä½¿ç”¨linkæ ‡ç­¾æ—¶ï¼Œå¿…é¡»æŒ‡å®šlinkæ ‡ç­¾çš„ä¸‰ä¸ªå±æ€§,å¦‚ä¸‹: href:å®šä¹‰æ‰€é“¾æ¥å¤–éƒ¨æ ·å¼è¡¨æ–‡ä»¶çš„URL,å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ã€‚ type:å®šä¹‰æ‰€é“¾æ¥æ–‡æ¡£çš„ç±»å‹ï¼Œåœ¨è¿™é‡Œéœ€è¦æŒ‡å®šä¸ºâ€text/CSSâ€,è¡¨ç¤ºé“¾æ¥çš„å¤–éƒ¨æ–‡ä»¶ä¸ºCSSæ ·å¼è¡¨ã€‚ rel:å®šä¹‰å½“å‰æ–‡æ¡£ä¸è¢«é“¾æ¥æ–‡æ¡£ä¹‹é—´çš„å…³ç³»ï¼Œåœ¨è¿™é‡Œéœ€è¦æŒ‡å®šä¸ºâ€stylesheetâ€ï¼Œè¡¨ç¤ºè¢«é“¾æ¥çš„æ–‡æ¡£æ˜¯ä¸€ä¸ªæ ·å¼è¡¨æ–‡ä»¶ã€‚ é€‰æ‹©å™¨æ ‡ç­¾é€‰æ‹©å™¨ä½¿ç”¨HTMLçš„æ ‡ç­¾åä½œä¸ºé€‰æ‹©å™¨ï¼Œä¸ºHTMLçš„æŸä¸€æ ‡ç­¾æŒ‡å®šç»Ÿä¸€çš„CSSæ ·å¼ã€‚æ¯”å¦‚ä¸Šé¢çš„ h1&#123;color:red;&#125; å°±æ˜¯æ ‡ç­¾é€‰æ‹©å™¨ï¼Œä½¿ç”¨h1ä½œä¸ºé€‰æ‹©å™¨ï¼Œæ‰€æœ‰çš„h1æ ‡ç­¾åŒ…å«çš„æ–‡å­—éƒ½è¢«è®¾ç½®ä¸ºçº¢è‰²ã€‚ ç±»é€‰æ‹©å™¨ç±»é€‰æ‹©å™¨æ˜¯æœ€å¸¸ç”¨çš„é€‰æ‹©å™¨ï¼Œç±»é€‰æ‹©å™¨ä½¿ç”¨.ï¼ˆè‹±æ–‡ç‚¹å·ï¼‰è¿›è¡Œæ ‡è¯†ï¼Œåé¢ç´§è·Ÿç±»åï¼Œå…¶åŸºæœ¬è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š .ç±»å&#123; å±æ€§:å±æ€§å€¼; ... ...&#125; æ ‡ç­¾åœ¨è°ƒç”¨CSSæ ·å¼æ—¶ï¼Œä½¿class=â€ç±»åâ€å³å¯ï¼Œæ¯”å¦‚ &lt;head&gt; &lt;style&gt; .red&#123; color : red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;h1 class=\"red\"&gt;CSSå…¥é—¨&lt;/h1&gt;&lt;/body&gt; æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªç±»é€‰æ‹©å™¨ï¼Œç±»åå«åšred,åœ¨h1æ ‡ç­¾ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡class=â€redâ€è°ƒç”¨äº†è¯¥ç±»ï¼Œæ‰€ä»¥h1æ ‡ç­¾æ‰€åŒ…å«çš„æ–‡å­—è®¾ç½®æˆäº†çº¢è‰²ã€‚ å¤šç±»åé€‰æ‹©å™¨å¦‚æœæˆ‘ä»¬åœ¨æ ‡ç­¾ä¸­éœ€è¦è°ƒç”¨å¤šä¸ªç±»æ€ä¹ˆåŠï¼Œæ¯”å¦‚æœ‰ä¸¤ä¸ªç±»åˆ†åˆ«ä¸º .red&#123; color:red;&#125;.font14&#123; font-size=14px;&#125; å¦‚æœåŠ å…¥h1æ ‡ç­¾è¦è°ƒç”¨è¿™ä¸¤ä¸ªç±»çš„è¯ï¼Œå†™æ³•å¦‚ &lt;h1 class = \"red font14\"&gt;æ ‡é¢˜&lt;/h1&gt; è¿™ä¸ªå°±å«åšå¤šç±»åé€‰æ‹©å™¨ã€‚ è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå¦‚æœè°ƒç”¨çš„å¤šä¸ªç±»æœ‰å†²çªæ€ä¹ˆåŠ?æ¯”å¦‚è°ƒç”¨çš„ä¸¤ä¸ªç±»ä¸€ä¸ªè®¾ç½®é¢œè‰²ä¸ºçº¢è‰²ï¼Œä¸€ä¸ªè®¾ç½®é¢œè‰²ä¸ºè“è‰²ï¼Œæ˜¯å¦‚ä½•å¤„ç†è¿™ç§å†²çª? .red&#123; color:red;&#125;.blue&#123; color:blue;&#125; å‡è®¾h1è°ƒç”¨å¦‚ä¸‹ &lt;h1 class=\"blue red\"&gt;æ ‡é¢˜&lt;/h1&gt; ä½ è§‰å¾—ä¼šæ˜¯è“è‰²è¿˜æ˜¯çº¢è‰²çš„?ç­”æ¡ˆæ˜¯è“è‰²çš„ï¼Œè™½ç„¶è°ƒç”¨æ—¶blueå†™åœ¨redå‰é¢ï¼Œä½ æƒ³redä¼šè¦†ç›–blue,æ‰€ä»¥ä¼šæ˜¯çº¢è‰²ï¼Œå®é™…ä¸Šæœ€ç»ˆçš„æ•ˆæœä¸è°ƒç”¨çš„é¡ºåºæ— å…³ï¼Œè€Œä¸CSSä¹¦å†™çš„é¡ºåºæœ‰å…³ï¼Œç”±äºCSSä¹¦å†™æ—¶redåœ¨blueçš„ä¸Šé¢ï¼Œæ‰€ä»¥åªæœ‰æœ€åçš„blueç”Ÿæ•ˆã€‚ idé€‰æ‹©å™¨ä¸ç±»é€‰æ‹©å™¨å¾ˆç›¸ä¼¼ï¼Œä¸ç®¡è°ƒç”¨æ–¹å¼æ˜¯é€šè¿‡idæ¥è°ƒç”¨çš„ï¼Œå¹¶ä¸”ä¹¦å†™æ–¹å¼ä¸Šæœ‰å·®åˆ«ï¼Œå³å°†.æ”¹ä¸ºäº†#ã€‚å¦‚ä¸‹ #idå&#123; å±æ€§:å±æ€§å€¼; ... ...&#125; è°ƒç”¨æ–¹å¼åŒç±»è°ƒç”¨æ–¹å¼ï¼Œä¸è¿‡ç”¨çš„ä¸æ˜¯class=â€â€è€Œæ˜¯id=â€â€ã€‚ä¸ç±»é€‰æ‹©å™¨ä¸åŒçš„æ˜¯ï¼Œç”±äºidæ˜¯å”¯ä¸€çš„ï¼Œä¸åŒçš„æ ‡ç­¾çš„idä¸èƒ½ç›¸åŒï¼Œæ‰€ä»¥è¯¥ç§æ–¹æ³•åªèƒ½ç»™å”¯ä¸€çš„ä¸€ä¸ªidè®¾ç½®æ ·å¼ã€‚å¹¶ä¸”idé€‰æ‹©å™¨èƒ½åšåˆ°çš„ï¼Œç±»é€‰æ‹©å™¨ä¹Ÿèƒ½åšåˆ°ï¼Œæ‰€ä»¥å®é™…ä¸Šç±»é€‰æ‹©å™¨æ˜¯ç”¨çš„æœ€å¤šçš„ã€‚ é€šé…ç¬¦é€‰æ‹©å™¨ä¹¦å†™æ–¹å¼å¦‚ä¸‹ *&#123; å±æ€§:å±æ€§å€¼; ... ... &#125; *å°±æ˜¯é€šé…ç¬¦ï¼Œä»£è¡¨æ‰€æœ‰æ ‡ç­¾çš„æ„æ€ï¼Œæ„æ€æ˜¯æ‰€æœ‰çš„æ ‡ç­¾éƒ½ä¼šè¢«è®¾ç½®æˆè¿™æ ·çš„æ ·å¼ï¼Œè¯¥ç§æ–¹æ³•åœ¨å¼€å‘å‡ ä¹ä¸ç”¨ã€‚ å­—ä½“æ ·å¼å­—ä½“å¤§å°font-sizeå±æ€§æ˜¯ç”¨æ¥è®¾ç½®å­—ä½“å¤§å°çš„ï¼Œå­—ä½“å¤§å°çš„å•ä½æœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯px,ä»£è¡¨çš„æ˜¯åƒç´ ï¼Œ1pxä»£è¡¨çš„å°±æ˜¯ä¸€ä¸ªåƒç´ çš„å¤§å°ã€‚æ¯”å¦‚ font-size: 20px; åœ¨ç½‘é¡µä¸­æ™®éä½¿ç”¨14px+,å¹¶ä¸”å°½é‡ç”¨å¶æ•°å¤§å°ï¼Œå› ä¸ºå¥‡æ•°å¯èƒ½åœ¨ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­å‡ºç°è«åçš„é—®é¢˜ã€‚ å­—ä½“font-familyå±æ€§æ˜¯ç”¨æ¥è®¾ç½®å­—ä½“çš„ï¼Œæ¯”å¦‚ font-family: \"æ¥·ä½“\"; è‹±æ–‡å­—ä½“å¯ä»¥ä¸åŠ å¼•å·ï¼Œä½†æ˜¯å¦‚æœè‹±æ–‡å­—ä½“å«æœ‰ç©ºæ ¼ï¼Œåˆ™éœ€è¦åŠ ä¸Šå¼•å·ï¼Œæ¯”å¦‚ font-family: \"Times New Roman\"; å¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªå­—ä½“ï¼Œä¸­é—´ä»¥é€—å·éš”å¼€ï¼Œè¡¨ç¤ºå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒç¬¬ä¸€ä¸ªå­—ä½“ï¼Œåˆ™ä¼šå°è¯•ä¸‹ä¸€ä¸ªï¼Œç›´åˆ°æ‰¾åˆ°åˆé€‚çš„å­—ä½“ã€‚ åœ¨CSSä¸­è®¾ç½®å­—ä½“åç§°ï¼Œç›´æ¥å†™ä¸­æ–‡æ˜¯å¯ä»¥çš„ã€‚ä½†æ˜¯åœ¨æ–‡ä»¶ç¼–ç (GB2312ã€UTF-8ç­‰)ä¸åŒ¹é…æ—¶ä¼šäº§ç”Ÿä¹±ç çš„é”™è¯¯ã€‚xpç³»ç»Ÿä¸æ”¯æŒç±»ä¼¼å¾®è½¯é›…é»‘çš„ä¸­æ–‡ã€‚è§£å†³åŠæ³•æ˜¯å¯ä»¥ä½¿ç”¨CSS Unicodeå­—ä½“è¡¨ç¤ºï¼Œæ¯”å¦‚ font-family: &quot;\\5FAE\\8F6F\\96C5\\9ED1&quot; å°±è¡¨ç¤ºè®¾ç½®å­—ä½“ä¸ºå¾®è½¯é›…é»‘ã€‚å…¶ä¸­ \\5FAE\\8F6F\\96C5\\9ED1 å°±æ˜¯Unicodeå­—ä½“ã€‚å¸¸è§ä¸­æ–‡å¯¹åº”çš„Unicodeå­—ä½“å¦‚ä¸‹: å­—ä½“åç§° è‹±æ–‡åç§° Unicode ç¼–ç  å®‹ä½“ SimSun \\5B8B\\4F53 æ–°å®‹ä½“ NSimSun \\65B0\\5B8B\\4F53 é»‘ä½“ SimHei \\9ED1\\4F53 å¾®è½¯é›…é»‘ Microsoft YaHei \\5FAE\\8F6F\\96C5\\9ED1 æ¥·ä½“_GB2312 KaiTi_GB2312 \\6977\\4F53_GB2312 éš¶ä¹¦ LiSu \\96B6\\4E66 å¹¼å›­ YouYuan \\5E7C\\5706 åæ–‡ç»†é»‘ STXihei \\534E\\6587\\7EC6\\9ED1 ç»†æ˜ä½“ MingLiU \\7EC6\\660E\\4F53 æ–°ç»†æ˜ä½“ PMingLiU \\65B0\\7EC6\\660E\\4F53 å­—ä½“ç²—ç»†font-weightå±æ€§æ˜¯ç”¨æ¥è®¾ç½®å­—ä½“ç²—ç»†çš„ï¼Œå¯é€‰å±æ€§å€¼æœ‰normal, bold, older, lighter,é™¤äº†æœ‰ç€å››ç§å€¼å¯é€‰å¤–ï¼Œå…¶å€¼è¿˜å¯ä»¥æ˜¯æ•°å­—ï¼ŒèŒƒå›´ä¸º100-900å¹¶ä¸”å¿…é¡»ä¸º100çš„å€æ•°ã€‚normalç›¸å½“äºæ˜¯400,boldç›¸å½“äºæ˜¯700,ä¸€èˆ¬å»ºè®®ç”¨æ•°å­—ã€‚ font-weight: 400; å­—ä½“é£æ ¼font-styleå±æ€§æ˜¯ç”¨æ¥è®¾ç½®å­—ä½“é£æ ¼çš„ï¼Œæœ‰ä¸¤ç§å€¼å¯é€‰ï¼Œåˆ†åˆ«æ˜¯normalå¯¹äºæ­£å¸¸çš„å­—ä½“é£æ ¼ï¼Œå¦ä¸€ä¸ªæ˜¯italicå¯¹åº”çš„æ˜¯æ–œä½“é£æ ¼ã€‚ font-style: italic; ç»¼åˆè¿å†™å‡å¦‚æˆ‘ä»¬è®¾ç½®å­—ä½“çš„æ—¶å€™ï¼Œå››ä¸ªéƒ½è¦è®¾ç½®ï¼Œå‡å¦‚æˆ‘è¦è®¾ç½®å­—ä½“å¤§å°ä¸º20px,å­—ä½“ä¸ºå¾®è½¯é›…é»‘ï¼Œå­—ä½“ç²—ç»†ä¸º500,å­—ä½“é£æ ¼ä¸ºæ–œä½“ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·å†™: .font &#123; font-size: 20px; font-family: \"\\5FAE\\8F6F\\96C5\\9ED1\"; font-weight: 500; font-style: italic;&#125; å› ä¸ºå¯¹äºå­—ä½“æ ·å¼å†™çš„æ¯”è¾ƒé¢‘ç¹ï¼Œè¿™ä¹ˆå†™çš„è¯è¿‡äºçš„ç¹çï¼Œæ‰€ä»¥CSSè§„å®šå¯ä»¥å¯¹å…¶ç»¼åˆè¿å†™ï¼Œå¦‚ä¸‹ .font &#123; font: italic 500 20px \"\\5FAE\\8F6F\\96C5\\9ED1\";&#125; å…¶ä¸­ä¹¦å†™é¡ºåºå¿…é¡»ä¸ºfont-style, font-weight, font-size, font-family,å…¶ä¸­font-sizeå’Œfont-familyä¸å¯ä»¥çœç•¥ã€‚ æ–‡æœ¬æ ·å¼é¢œè‰²colorå±æ€§ç”¨ä»¥è®¾ç½®æ–‡æœ¬çš„é¢œè‰²ï¼Œå…¶å–å€¼æœ‰ä¸‰ç§æ–¹æ³•: red,green,blueâ€¦ç­‰å†…ç½®çš„é¢œè‰² ä½¿ç”¨åå…­è¿›åˆ¶ï¼Œæ¯”å¦‚#FF0000ï¼Œå…¶ä¸­åå…­è¿›åˆ¶çš„å‰ä¸¤ä½ä»£è¡¨ä¸‰åŸºè‰²ä¸­çš„çº¢è‰²ï¼Œä¸­é—´ä¸¤ä½ä»£è¡¨ç»¿è‰²ï¼Œåä¸¤ä½ä»£è¡¨è“è‰²ã€‚æ‰€ä»¥#FF0000ä»£è¡¨çš„å°±æ˜¯çº¢è‰²ã€‚ ä½¿ç”¨RGBä»£ç ï¼Œæ¯”å¦‚çº¢è‰²ä¸ºrgb(255,0,0)ã€‚ å…¶ä¸­ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨çš„æœ€å¤šï¼Œå¦‚æœåå…­è¿›åˆ¶çš„ä¸‰å¯¹æ¯ä¸¤ä½æ˜¯ç›¸åŒçš„ï¼Œåˆ™å¯ä»¥ç¼©å†™ä¸ºä¸€ä¸ªï¼Œæ¯”å¦‚#FF0000å¯ä»¥ç¼©å†™ä¸º#F00ã€‚#FFDD66å¯ä»¥ç¼©å†™ä¸º#FD6ã€‚ è¡Œé«˜line-heightå±æ€§ç”¨ä»¥è®¾ç½®è¡Œé«˜ï¼Œæ¯”å¦‚å¯¹ä¸€ä¸ªæ®µè½æ¥è¯´ï¼Œå…¶è¡Œä¸è¡Œä¹‹é—´çš„è·ç¦»å¤ªå°äº†ï¼Œåˆ™å¯ä»¥é€šè¿‡è®¾ç½®è¡Œé«˜æ¥è°ƒæ•´è¡Œé—´çš„è·ç¦»ã€‚ p&#123; line-height: 40px;&#125; æ–‡æœ¬å¯¹é½æ–¹å¼text-alignç”¨ä»¥è®¾ç½®æ–‡æœ¬çš„æ°´å¹³å¯¹é½æ–¹å¼ï¼Œå¯é€‰å€¼æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«ä¸ºleft, right, centerã€‚ text-align: center; ç¼©è¿›text-indentç”¨ä»¥è®¾ç½®æ®µè½é¦–è¡Œçš„ç¼©è¿›è·ç¦»ï¼Œä¸€èˆ¬è®¾ç½®ä¸º2emå³ä¸¤ä¸ªå­—çš„è·ç¦»ï¼š text-indent: 2em; æ–‡æœ¬ä¿®é¥°text-decorationå±æ€§ç”¨æ¥ä¿®é¥°æ–‡æœ¬ï¼Œæœ‰ä¸€ä¸‹å‡ ä¸ªå€¼å¯é€‰: noneï¼šå–æ¶ˆæ–‡æœ¬ä¿®é¥°æˆ–æ— ä¿®é¥° underlineï¼šä¸‹åˆ’çº¿ overlineï¼šä¸Šåˆ’çº¿ line-throughï¼šåˆ é™¤çº¿ å¤åˆé€‰æ‹©å™¨åä»£é€‰æ‹©å™¨å‡å¦‚æœ‰ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªä¾‹å­ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;åä»£é€‰æ‹©å™¨&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt; &lt;p&gt;å¼€å¿ƒ&lt;/p&gt; &lt;p&gt;å¿«ä¹&lt;/p&gt; &lt;/div&gt; &lt;p&gt;ä¹è§‚&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬å¸Œæœ›å°†å¼€å¿ƒå’Œå¿«ä¹å˜æˆçº¢è‰²ï¼Œè€Œä¸å½±å“ä¹è§‚ï¼Œå³å°†divæ ‡ç­¾ä¸‹çš„pæ ‡ç­¾è®¾ç½®ä¸ºçº¢è‰²ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„pæ ‡ç­¾è®¾ç½®ä¸ºçº¢è‰²ï¼Œæ‰€ä»¥ä¸èƒ½è¿™ä¹ˆå†™ p &#123; color: red;&#125; ä¹Ÿè®¸ä½ ä»¬å¯èƒ½ä¼šå†™ä¸€ä¸ªç±»ï¼Œç„¶åè®©è¿™ä¸¤ä¸ªpæ ‡ç­¾å»è°ƒç”¨ï¼Œä½†æ˜¯å‡è®¾divä¸‹æœ‰å¾ˆå¤šè¿™æ ·çš„pæ ‡ç­¾çš„è¯ï¼Œè¿™æ ·åšå°±ä¸ç°å®ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯åä»£é€‰æ‹©å™¨ï¼Œå¦‚ä¸‹ div p &#123; color: red;&#125; å³è®¾ç½®divæ ‡ç­¾ä¸‹çš„pæ ‡ç­¾è®¾ç½®ä¸ºçº¢è‰²ã€‚å› ä¸ºä¹è§‚æ‰€å¤„çš„pæ ‡ç­¾ä¸åœ¨divæ ‡ç­¾ä¸‹ï¼Œæ‰€ä»¥ä¹è§‚ä¸å—å½±å“ã€‚æ•ˆæœå¦‚ä¸‹: å­ä»£é€‰æ‹©å™¨å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªæ¡ˆä¾‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;å­ä»£é€‰æ‹©å™¨&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=\"#\"&gt;ä¸€çº§èœå•&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;ä¸€çº§èœå•&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=\"#\"&gt;ä¸€çº§èœå•&lt;/a&gt;&lt;/li&gt; &lt;li&gt; &lt;div&gt;&lt;a href=\"#\"&gt;äºŒçº§èœå•&lt;/a&gt;&lt;/div&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬å¸Œæœ›ä¸€çº§èœå•å˜ä¸ºçº¢è‰²ï¼Œè€ŒäºŒçº§èœå•ä¸å—åˆ°å½±å“ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨åä»£é€‰æ‹©å™¨ ul li a &#123; color: red;&#125; é‚£ä¹ˆliæ ‡ç­¾ä¸‹çš„æ‰€æœ‰aæ ‡ç­¾éƒ½ä¼šå—åˆ°å½±å“ï¼ŒäºŒçº§èœå•ä¹Ÿä¼šå—åˆ°å½±å“ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨å­ä»£é€‰æ‹©å™¨ ul&gt;li&gt;a &#123; color: red;&#125; ä¸Šé¢ä¾¿æ˜¯å­ä»£é€‰æ‹©å™¨çš„å†™æ³•ï¼Œä¸åä»£é€‰æ‹©å™¨ä¸åŒï¼Œå­ä»£åªåŒ…æ‹¬â€å„¿å­â€,è€Œåä»£åˆ™æ˜¯åŒ…æ‹¬åä»£æ‰€æœ‰çš„ã€‚æ‰€ä»¥ä½¿ç”¨å­ä»£é€‰æ‹©å™¨ï¼Œå—åˆ°å½±å“çš„åªæœ‰liæ ‡ç­¾ä¸‹çš„aæ ‡ç­¾ï¼ŒäºŒçº§èœå•æ²¡æœ‰å—åˆ°å½±å“ã€‚æ•ˆæœä¸º: äº¤é›†é€‰æ‹©å™¨å‡è®¾æœ‰ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªæ¡ˆä¾‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;äº¤é›†é€‰æ‹©å™¨&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt;å•Šå•Š&lt;/div&gt; &lt;div&gt;å•Šå•Š&lt;/div&gt; &lt;div&gt;å•Šå•Š&lt;/div&gt; &lt;p&gt;ä¸€ä¸€&lt;/p&gt; &lt;p&gt;ä¸€ä¸€&lt;/p&gt; &lt;p&gt;ä¸€ä¸€&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬å¸Œæœ›å°†ç¬¬ä¸‰ä¸ªdivæ ‡ç­¾ä¸­çš„æ–‡å­—è®¾ç½®ä¸ºçº¢è‰²ã€‚å¾ˆç®€å•çš„ä¸€ä¸ªæ–¹æ³•å°±æ˜¯è¿™æ · .red &#123; color: red;&#125; ç„¶åè®©ç¬¬ä¸‰ä¸ªdivæ ‡ç­¾å»è°ƒç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œåšå‡ºè¦æ±‚ï¼Œå½“pæ ‡ç­¾å»è°ƒç”¨è¿™ä¸ªç±»æ—¶ï¼Œå®ƒçš„é¢œè‰²ä¸ä¼šæ”¹å˜ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ç”¨åˆ°äº¤é›†é€‰æ‹©å™¨ div.red &#123; color: red;&#125; ä¸Šé¢çš„é€‰æ‹©å™¨è¡¨æ˜ï¼Œåªæœ‰divæ ‡ç­¾è°ƒç”¨è¿™ä¸ªç±»æ‰ä¼šç”Ÿæ•ˆï¼Œå…¶ä»–æ ‡ç­¾è°ƒç”¨è¿™ä¸ªç±»ä¸ä¼šç”Ÿæ•ˆï¼Œè¿™å°±æ˜¯äº¤é›†é€‰æ‹©å™¨ã€‚ å¹¶é›†é€‰æ‹©å™¨å‡è®¾åˆæœ‰ä¸‹é¢è¿™ä¸ªæ¡ˆä¾‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;å¹¶é›†é€‰æ‹©å™¨&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt;123&lt;/div&gt; &lt;p&gt;123&lt;/p&gt; &lt;h1&gt;123&lt;/h1&gt; &lt;a href=\"#\"&gt;123&lt;/a&gt; &lt;strong&gt;123&lt;/strong&gt; &lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬å¸Œæœ›div,p.h1æ ‡ç­¾éƒ½è®¾ç½®ä¸ºçº¢è‰²ï¼Œå…¶ä»–çš„ä¸å˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ div &#123; color: red;&#125;p &#123; color: red;&#125;h1 &#123; color: red;&#125; ä½¿ç”¨å¹¶é›†é€‰æ‹©å™¨å¯ä»¥ä½¿ä¸Šé¢çš„ä»£ç å¤§å¤§å‡å°‘ div, p, h1 &#123; color: red;&#125; ä½¿ç”¨é€—å·å°†æ ‡ç­¾æˆ–è€…ç±»åéš”å¼€ã€‚ é“¾æ¥ä¼ªç±»é€‰æ‹©å™¨ä»€ä¹ˆæ˜¯ä¼ªç±»é€‰æ‹©å™¨ï¼Œä¼ªç±»é€‰æ‹©å™¨æ˜¯å‘æŸäº›é€‰æ‹©å™¨æ·»åŠ ç‰¹æ®Šæ•ˆæœï¼Œæ¯”å¦‚ä¸ºé“¾æ¥æ·»åŠ ç‰¹æ®Šæ•ˆæœ,é“¾æ¥ä¼ªç±»é€‰æ‹©å™¨æœ‰å››ä¸ªï¼Œåˆ†åˆ«ä¸º linkï¼šæœªè®¿é—®è¿‡çš„é“¾æ¥çŠ¶æ€ visitedï¼šå·²è®¿é—®è¿‡çš„é“¾æ¥çŠ¶æ€ hoverï¼šé¼ æ ‡æ”¾ä¸Šå»æ—¶çš„é“¾æ¥çŠ¶æ€ activeï¼šé¼ æ ‡æŒ‰ä¸‹æ—¶çš„é“¾æ¥çŠ¶æ€ ç±»é€‰æ‹©å™¨ä½¿ç”¨ç‚¹.,è€Œä¼ªç±»é€‰æ‹©å™¨ä½¿ç”¨å†’å·:ã€‚ç°åœ¨æˆ‘ä»¬æœ‰è¿™ä¸ªéœ€è¦ï¼Œå½“æœªè®¿é—®é“¾æ¥æ—¶ï¼Œé“¾æ¥å­—ä½“ä¸º25px,æ— ä¸‹åˆ’çº¿ï¼Œå½“é¼ æ ‡æ”¾ä¸Šå»æ—¶ï¼Œé¢œè‰²å˜ä¸ºçº¢è‰²ï¼Œå½“æŒ‰ä¸‹æ—¶é¢œè‰²å˜ä¸ºæ©™è‰²ï¼Œå½“è®¿é—®åï¼Œé¢œè‰²ä¸ºç»¿è‰²ã€‚CSSæ ·å¼æŒ‰å¦‚ä¸‹å†™ a:link &#123; font-size: 25px; text-decoration: none; /*å–æ¶ˆä¸‹åˆ’çº¿*/&#125;a:visited &#123; color: green;&#125;a:hover &#123; color: red;&#125;a:active &#123; color: orange;&#125; æ•ˆæœä¸º å½“æœªæŒ‰ä¸‹é“¾æ¥æ—¶ï¼Œé“¾æ¥ä¸ºè“è‰²ï¼ŒæŒ‰æŠŠé¼ æ ‡æ”¾ä¸Šå»æ—¶ï¼Œé“¾æ¥å˜ä¸ºçº¢è‰²ï¼Œå½“æŒ‰ä¸‹é“¾æ¥æ—¶ï¼Œé“¾æ¥å˜ä¸ºæ©™è‰²ï¼Œå½“è®¿é—®å®Œé“¾æ¥åï¼Œé“¾æ¥å˜ä¸ºäº†ç»¿è‰²ã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¼ªç±»é€‰æ‹©å™¨çš„é¡ºåºå¿…é¡»æŒ‰ç…§lvhaçš„é¡ºåºæ¥ï¼Œå¦åˆ™ä¼šè¾¾ä¸åˆ°æƒ³è¦çš„æ•ˆæœã€‚åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œä¸€èˆ¬åªç”¨åˆ°hover,ä¸ä¼šå†™çš„è¿™ä¹ˆå¤æ‚ï¼Œå³æˆ‘ä»¬åªéœ€è¦å½“é¼ æ ‡æ”¾ä¸Šå»å˜é¢œè‰²å°±è¡Œï¼Œå¦‚ä¸‹ a &#123; font-size: 25px; text-decoration: none;&#125;a:hover &#123; color: red;&#125; æ ‡ç­¾æ˜¾ç¤ºæ¨¡å¼æˆ‘ä»¬æŠŠæ ‡ç­¾åˆ†ä¸ºä¸‰ç±»ï¼Œä¸€ç±»ä¸ºå—çº§(block)æ ‡ç­¾ï¼Œä¸€ç±»ä¸ºè¡Œå†…(inline)æ ‡ç­¾,æœ€åä¸€ç±»ä¸ºäºŒè€…çš„ç»¼åˆï¼Œä¸ºè¡Œå†…å—(inline-block)æ ‡ç­¾ã€‚æ¯ä¸ªå—æ ‡ç­¾é€šå¸¸éƒ½ä¼šç‹¬è‡ªå æ®ä¸€æ•´è¡Œæˆ–å¤šæ•´è¡Œï¼Œå¯ä»¥å¯¹å…¶è®¾ç½®å®½åº¦ã€é«˜åº¦ã€å¯¹é½ç­‰å±æ€§ï¼Œå¸¸ç”¨äºç½‘é¡µå¸ƒå±€å’Œç½‘é¡µç»“æ„çš„æ­å»ºã€‚å¸¸è§çš„å—çº§æ ‡ç­¾åŒ…æ‹¬ &lt;h1&gt;~&lt;h6&gt;ã€&lt;p&gt;ã€&lt;div&gt;ã€&lt;ul&gt;ã€&lt;ol&gt;ã€&lt;li&gt; è¡Œå†…æ ‡ç­¾ï¼ˆå†…è”æ ‡ç­¾ï¼‰ä¸å æœ‰ç‹¬ç«‹çš„åŒºåŸŸï¼Œä»…ä»…é è‡ªèº«çš„å­—ä½“å¤§å°å’Œå›¾åƒå°ºå¯¸æ¥æ”¯æ’‘ç»“æ„ï¼Œä¸€èˆ¬ä¸å¯ä»¥è®¾ç½®å®½åº¦ã€é«˜åº¦ã€å¯¹é½ç­‰å±æ€§ï¼Œå¸¸ç”¨äºæ§åˆ¶é¡µé¢ä¸­æ–‡æœ¬çš„æ ·å¼ã€‚å¸¸è§çš„è¡Œå†…æ ‡ç­¾åŒ…æ‹¬ &lt;a&gt;ã€&lt;strong&gt;ã€&lt;b&gt;ã€&lt;em&gt;ã€&lt;i&gt;ã€&lt;del&gt;ã€&lt;s&gt;ã€&lt;ins&gt;ã€&lt;u&gt;ã€&lt;span&gt; å‡è®¾æˆ‘ä»¬å¯¹è¡Œå†…æ ‡ç­¾è®¾ç½®å…¶å®½é«˜å±æ€§ a &#123; width: 20px; height: 30px;&#125; è¿™æ ·åšæ˜¯æ²¡æœ‰æ•ˆæœçš„ã€‚é“¾æ¥açš„å®½é«˜å±æ€§ä¸ä¼šæ”¹å˜ã€‚ åœ¨è¡Œå†…å…ƒç´ ä¸­æœ‰å‡ ä¸ªç‰¹æ®Šçš„æ ‡ç­¾â€”â€”&lt;img /&gt;ã€&lt;input /&gt;ã€&lt;td&gt;ï¼Œå¯ä»¥å¯¹å®ƒä»¬è®¾ç½®å®½é«˜å’Œå¯¹é½å±æ€§ï¼Œæœ‰äº›èµ„æ–™å¯èƒ½ä¼šç§°å®ƒä»¬ä¸ºè¡Œå†…å—æ ‡ç­¾ã€‚é‚£ä¹ˆæ ‡ç­¾çš„è¿™ç§æ˜¾ç¤ºæ¨¡å¼å¯ä¸å¯ä»¥è½¬æ¢å‘¢? ç­”æ¡ˆæ˜¯å¯ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨displayå±æ€§å¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œå¦‚ display: inline; /*å°†å—çº§æ ‡ç­¾è½¬æ¢ä¸ºè¡Œå†…æ ‡ç­¾*/display: block; /*å°†è¡Œå†…æ ‡ç­¾è½¬æ¢ä¸ºå—çº§æ ‡ç­¾*/display: inline-block; /*å°†å—çº§æ ‡ç­¾æˆ–è€…è¡Œå†…æ ‡ç­¾è½¬æ¢ä¸ºè¡Œå†…å—æ ‡ç­¾*/ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸‹é¢çš„ç¨‹åº &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;æ ‡ç­¾æ˜¾ç¤ºæ¨¡å¼&lt;/title&gt; &lt;style&gt; a &#123; text-decoration: none; /*å–æ¶ˆä¸‹åˆ’çº¿*/ background: pink; /*è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼Œç”¨ä»¥è§‚å¯Ÿè¯¥æ ‡ç­¾æ˜¾ç¤ºæ¨¡å¼çš„è½¬æ¢*/ &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;a href=\"#\"&gt;é“¾æ¥&lt;/a&gt; &lt;a href=\"#\"&gt;é“¾æ¥&lt;/a&gt; &lt;a href=\"#\"&gt;é“¾æ¥&lt;/a&gt; &lt;/body&gt;&lt;/html&gt; å› ä¸ºæ ‡ç­¾aæ˜¯è¡Œå†…æ ‡ç­¾ï¼Œæ‰€ä»¥è¿™ä¸‰ä¸ªæ ‡ç­¾æ˜¯æ˜¾ç¤ºåœ¨ä¸€è¡Œå†…çš„ï¼Œå¦‚ä¸‹: å¹¶ä¸”æ— æ³•å¯¹å…¶è®¾ç½®å®½é«˜ä»¥åŠå¯¹é½å±æ€§ã€‚ç°åœ¨æˆ‘ä»¬å°†æ ‡ç­¾açš„æ˜¾ç¤ºæ¨¡å¼æ”¹ä¸ºå—çº§æ¨¡å¼ a &#123; text-decoration: none; background: pink; display: block;&#125; æ•ˆæœä¸º å¯è§é“¾æ¥å·²ç»å˜ä¸ºäº†å—çº§æ ‡ç­¾ï¼Œä¸€ä¸ªæ ‡ç­¾å æ®ä¸€æ•´è¡Œï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥å¯¹å…¶è®¾ç½®å®½é«˜å±æ€§ä»¥åŠå¯¹å…¶æ–¹å¼ï¼Œå¦‚ä¸‹ a &#123; text-decoration: none; background: pink; display: block; width: 400px; height: 100px; text-align: center;&#125; æ•ˆæœä¸º å¯è§é“¾æ¥açš„å®½é«˜å‘ç”Ÿäº†å˜åŒ–ï¼Œå¹¶ä¸”å…¶å†…çš„æ–‡å­—æ°´å¹³å±…ä¸­å¯¹é½äº†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„æ ‡ç­¾çœ‹åšæ˜¯ä¸€ä¸ªç›’å­ï¼Œæœ‰çš„ç›’å­æ˜¯å æ®ä¸€è¡Œçš„ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®å…¶å¤§å°ï¼Œæœ‰çš„ç›’å­åªèƒ½åœ¨è¡Œå†…ï¼Œå¹¶ä¸”ä¸èƒ½è®¾ç½®å…¶å¤§å°ï¼Œè¿˜æœ‰çš„ç›’å­è™½ç„¶åœ¨è¡Œå†…ï¼Œä½†æ˜¯å¯ä»¥è®¾ç½®å…¶å¤§å°ã€‚æˆ‘ä»¬å°±ç”¨CSSå¯¹ç›’å­è¿›è¡Œæ“ä½œï¼Œæˆ–æ‘†æ”¾ï¼Œæˆ–ä¿®é¥°ï¼Œæˆ–æ”¹å˜ç›’å­çš„æ˜¾ç¤ºæ¨¡å¼ç­‰ç­‰ã€‚ å¯¼èˆªæ ç»ƒä¹ ç°åœ¨æˆ‘ä»¬è¦åšä¸€ä¸ªå¯¼èˆªæ ï¼Œå…¶æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ æˆ‘ä»¬è¦æ±‚å¯¼èˆªæ çš„å¸ƒå±€å±…ä¸­æ˜¾ç¤ºï¼Œå¹¶ä¸”å…¶å†…çš„æ–‡å­—ä¹Ÿè¦å±…ä¸­å¯¹é½ã€‚å¹¶ä¸”å½“é¼ æ ‡æ”¾åœ¨ç½‘ç«™å¯¼èˆªä¸Šï¼Œå…¶èƒŒæ™¯å›¾ç‰‡å‘ç”Ÿå˜æ¢ã€‚ é¦–å…ˆç¬¬ä¸€æ­¥ä¾¿æ˜¯æ˜¾ç¤ºç€å…­ä¸ªé“¾æ¥ï¼Œå¦‚ä¸‹ &lt;div class=\"nav\"&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt;&lt;/div&gt; æ•ˆæœå¦‚ä¸‹: ç¬¬äºŒæ­¥ï¼Œå–æ¶ˆä¸‹åˆ’çº¿ï¼Œå¹¶ä¸”è®¾ç½®å­—ä½“é¢œè‰²ä¸ºç™½è‰²ï¼Œå¹¶ä¸”æ·»åŠ èƒŒæ™¯å›¾ç‰‡ï¼Œç”±äºé“¾æ¥æ ‡ç­¾aæ˜¯è¡Œå†…æ ‡ç­¾ï¼Œå…¶å¤§å°ä¸å¯ä»¥æ”¹å˜ï¼Œä¸ºäº†ä½¿æ·»åŠ çš„èƒŒæ™¯å›¾ç‰‡å»åˆï¼Œè¿˜éœ€è¦æ”¹å˜å…¶æ˜¾ç¤ºæ¨¡å¼ä¸ºdisplay: inline-block,ç„¶åè®¾ç½®å…¶å®½é«˜å±æ€§ä¸ºå›¾ç‰‡å®½é«˜çš„å¤§å°ã€‚å¦‚ä¸‹: .nav a &#123; text-decoration: none; /*å–æ¶ˆä¸‹åˆ’çº¿*/ color: #FFF; /*è®¾ç½®å­—ä½“é¢œè‰²ä¸ºç™½è‰²*/ display: inline-block; width: 120px; height: 50px; background-image: url(bg.png);&#125; åœ¨è¿™é‡Œï¼Œä¸ºäº†åªå½±å“å¯¼èˆªæ çš„é“¾æ¥æ ‡ç­¾ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨äº†åä»£é€‰æ‹©å™¨ã€‚æ•ˆæœå¦‚ä¸‹: è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å‘ç°å¯¼èˆªæ æ²¡æœ‰å±…ä¸­å¯¹é½ï¼Œå¹¶ä¸”é‡Œé¢çš„æ–‡å­—æ²¡æœ‰å±…ä¸­å¯¹é½ .nav &#123; text-align: center;&#125; æˆ‘ä»¬è®¾ç½®.navç±»é‡Œçš„æ–‡å­—å±…ä¸­å¯¹é½ï¼Œä½†æ˜¯divé‡Œé¢çš„æ˜¯é“¾æ¥ï¼Œtext-alignå±æ€§è¿˜æœ‰ç”¨å—? ç­”æ¡ˆæ˜¯å¯ä»¥ï¼Œé“¾æ¥åœ¨å—ç±»æ ‡ç­¾é‡Œé¢å¯ä»¥å½“åšæ˜¯æ–‡å­—å¤„ç†ï¼Œè¿™æ˜¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œè®°ä½äº†ã€‚æ•ˆæœå¦‚ä¸‹ï¼š æˆ‘ä»¬å‘ç°å¯¼èˆªæ å±…ä¸­å¯¹é½äº†ç°åœ¨æˆ‘ä»¬éœ€è¦å°†é“¾æ¥é‡Œé¢çš„æ–‡å­—æ°´å¹³å±…ä¸­å¯¹é½å’Œå‚ç›´å±…ä¸­å¯¹é½ï¼Œåœ¨.nav aåŠ å…¥å¦‚ä¸‹ text-align: center;line-height: 50px; /*å½“è¡Œé«˜ç­‰äºæ ‡ç­¾è®¾ç½®çš„é«˜åº¦æ—¶ï¼Œä¼šä½¿æ–‡å­—å‚ç›´å±…ä¸­å¯¹é½*/ æ•ˆæœå¦‚ä¸‹ ç°åœ¨æœ€åä¸€æ­¥å°±æ˜¯å°†é¼ æ ‡æ”¾ä¸Šå»ï¼ŒèƒŒæ™¯å›¾ç‰‡æ”¹å˜ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼ªç±»hover,å¦‚ä¸‹ .nav a:hover &#123; background-image: url(\"bgc.png\");&#125; è¿™é‡Œä¸ºäº†åªå¯¹å¯¼èˆªæ çš„é“¾æ¥ç”Ÿæ•ˆï¼Œè¿™é‡Œä¹Ÿç”¨äº†åä»£é€‰æ‹©å™¨ï¼Œæ•ˆæœå¦‚ä¸‹: åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»å®Œæ•´çš„å®ç°äº†å¯¼èˆªæ çš„æ¡ˆä¾‹ï¼Œä¸‹é¢è´´å‡ºå®Œæ•´çš„ä»£ç ã€‚ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;å¯¼èˆªæ æ¡ˆä¾‹&lt;/title&gt; &lt;style&gt; .nav a &#123; text-decoration: none; /*å–æ¶ˆä¸‹åˆ’çº¿*/ color: #FFF; /*è®¾ç½®å­—ä½“é¢œè‰²ä¸ºç™½è‰²*/ display: inline-block; width: 120px; height: 50px; background-image: url(bg.png); text-align: center; line-height: 50px; &#125; .nav a:hover &#123; background-image: url(\"bgc.png\"); &#125; .nav &#123; text-align: center; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"nav\"&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;a href=\"#\"&gt;ç½‘ç«™å¯¼èˆª&lt;/a&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; è¡Œé«˜åœ¨ä¹‹å‰æˆ‘ä»¬æœ‰æåˆ°è¿™ä¸ªå±æ€§line-heightï¼Œè¯¥å±æ€§ç”¨æ¥è®¾ç½®è¡Œé«˜ï¼Œå¹¶ä¸”æˆ‘ä»¬ç”¨å®ƒæ¥è®¾ç½®è¿‡è¡Œé—´è·ã€‚ä¸ºäº†æ˜ç™½è¡Œé«˜æŒ‡çš„æ˜¯ä»€ä¹ˆä¹‹é—´çš„è·ç¦»ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç™½ä¸‹é¢è¿™ä¸ªå›¾ ä¸€ä¸ªæ–‡æœ¬å†…å®¹è¢«å››æ¡çº¿åˆ’åˆ†ï¼Œè€Œè¡Œé«˜æŒ‡çš„å°±æ˜¯åŸºçº¿ä¸åŸºçº¿ä¹‹é—´çš„è·ç¦»ï¼Œå½“ä¸è®¾ç½®è¡Œé«˜æ—¶ï¼Œè¡Œé«˜çš„å¤§å°ä¸ºå­—ä½“çš„å¤§å°ï¼Œæ‰€ä»¥è¡Œä¸è¡Œä¹‹é—´æ˜¯ç´§è´´ç€çš„ã€‚ åœ¨å¯¼èˆªæ ç»ƒä¹ ä¸­ï¼Œä¸ºäº†ä½¿æ–‡å­—èƒ½å¤Ÿå‚ç›´å±…ä¸­å¯¹é½ï¼Œæˆ‘ä»¬è®©line-heightçš„å¤§å°ç­‰äºç›’å­çš„å¤§å°ï¼Œä¸ºäº†è§£é‡Šè¿™ä¸€ç°è±¡ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ç›’å­çš„ç»„æˆï¼Œç›’å­çš„é«˜åº¦ç”±ä¸Šè·ç¦»ï¼Œä¸‹è·ç¦»å’Œæ–‡æœ¬å†…å®¹çš„é«˜åº¦ç»„æˆï¼Œä¸Šè·ç¦»çš„å¤§å°ä¸º(è¡Œé«˜-å†…å®¹é«˜åº¦)/2,ä¸‹è·ç¦»çš„é«˜åº¦=ç›’å­é«˜åº¦-ä¸Šè·ç¦»çš„é«˜åº¦-å†…å®¹é«˜åº¦ã€‚å½“æ–‡æœ¬å‚ç›´å±…ä¸­æ˜¾ç¤ºæ—¶ï¼Œä¸Šè·ç¦»çš„é«˜åº¦ç­‰äºä¸‹è·ç¦»çš„é«˜åº¦ï¼Œè¿™æ—¶ä¸Šè·ç¦»çš„é«˜åº¦=(ç›’å­é«˜åº¦-å†…å®¹é«˜åº¦)/2,å¯¹æ¯”äºä¸Šè·ç¦»é«˜åº¦çš„å…¬å¼ï¼Œå¾—åˆ°æ­¤æ—¶è¡Œé«˜ç­‰äºç›’å­çš„é«˜åº¦ã€‚æ‰€ä»¥è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆå½“è¡Œé«˜ç­‰äºç›’å­é«˜åº¦æ—¶ï¼Œæ–‡å­—ä¼šå‚ç›´æ°´å¹³å±…ä¸­ï¼Œå½“è¡Œé«˜å¢å¤§æ—¶ï¼Œä¸Šè·ç¦»çš„é«˜åº¦å¢å¤§ï¼Œæ–‡å­—ä¼šå‘ä¸‹ç§»åŠ¨ã€‚","tags":[{"name":"CSS","slug":"CSS","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/CSS/"},{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"}]},{"title":"HTMLåŸºç¡€","date":"2019-02-07T16:00:00.000Z","path":"/HTMLå…¥é—¨/","text":"éœ€è¦çš„å¼€å‘å·¥å…·ç”±äºç›®å‰çš„å¸‚åœºä¸ŠGoogleçš„å æœ‰ç‡æœ€é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨Chormeä½œä¸ºå¼€å‘ç”¨çš„æµè§ˆå™¨ï¼Œè€Œå†™ä»£ç çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œæˆ‘ä¸€èˆ¬ç”¨WebStormã€‚ ç¬¬ä¸€ä¸ªHTMLé¡µé¢ä¸€èˆ¬æ–°å…¥æ‰‹ä¸€ä¸ªè¯­è¨€ï¼Œéƒ½æ˜¯å…ˆæ•²ä¸€ä¸ªä»£ç ï¼Œç„¶ååœ¨è§£é‡Šè¿™ä¸ªä»£ç ï¼ŒæŒ‰ç…§æƒ¯ä¾‹éƒ½æ˜¯æ˜¾ç¤ºHello World,æ‰€ä»¥è¿™é‡Œå°±åœ¨ç½‘é¡µä¸­æ˜¾ç¤ºHello Worldã€‚ &lt;html&gt; &lt;head&gt; &lt;title&gt;ç¬¬ä¸€ä¸ªé¡µé¢&lt;/title&gt; &lt;/head&gt; &lt;body&gt; Hello World &lt;/body&gt;&lt;/html&gt; ä»¥ä¸Šçš„ç¨‹åºå¯ä»¥å†™åœ¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼Œç„¶åå°†åç¼€åæ”¹ä¸º.htmlï¼Œç”¨æµè§ˆå™¨æ‰“å¼€å³å¯ã€‚ ä¸€èˆ¬å†™htmlçš„æ ¼å¼åº”è¯¥å¦‚ä¸‹ &lt;html&gt; &lt;head&gt; &lt;/head&gt; &lt;body&gt; &lt;/body&gt;&lt;/html&gt; å…¶ä¸­&lt;html&gt;,&lt;head&gt;ç­‰ç­‰ç§°ä¸ºæ ‡ç­¾ï¼Œåœ¨htmlä¸­ï¼Œå†…å®¹éƒ½æ˜¯ç”±æ ‡ç­¾æ¥å‘ˆç°çš„ï¼Œè€Œæ ‡ç­¾åˆ†ä¸ºåŒæ ‡ç­¾å’Œå•æ ‡ç­¾ï¼Œä¸€èˆ¬æˆ‘ä»¬é‡åˆ°çš„éƒ½æ˜¯åŒæ ‡ç­¾ï¼Œæ¯”å¦‚ä¸Šé¢çš„&lt;html&gt;&lt;/html&gt;æ˜¯åŒæ ‡ç­¾ï¼Œ&lt;html&gt;æ˜¯å¼€å§‹æ ‡ç­¾ï¼Œ&lt;/html&gt;æ˜¯ç»“æŸæ ‡ç­¾ã€‚å•æ ‡ç­¾æ¯”å¦‚&lt;br /&gt;æ˜¯æ¢è¡Œæ ‡ç­¾ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ¢è¡Œã€‚ å…¶ä¸­&lt;body&gt;&lt;/body&gt;æ ‡ç­¾é‡Œå†™çš„ä¸œè¥¿æ‰æ˜¯ç½‘é¡µå‘ˆç°çš„å†…å®¹ï¼Œæ¯”å¦‚ä¸Šé¢çš„Hello Worldå°±æ˜¯å†™åœ¨bodyæ ‡ç­¾é‡Œé¢çš„,è€Œ&lt;head&gt;&lt;/head&gt;æ ‡ç­¾é‡Œå†™çš„ä¸œè¥¿éƒ½ä¸ä¼šå‘ˆç°åœ¨ç½‘é¡µä¸­ï¼Œä¸€èˆ¬å†™çš„éƒ½æ˜¯ç½‘é¡µçš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ‰€ç”¨çš„ç¼–ç ï¼Œç½‘é¡µçš„æ ‡é¢˜ï¼Œç½‘é¡µçš„ç‰ˆæƒç­‰ç­‰ã€‚ æˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨ç¬¬ä¸€è¡ŒåŠ ä¸Š&lt;!DOCTYPE html&gt;,è¿™ä¸ªæ˜¯ç”¨æ¥å‘Šè¯‰æµè§ˆå™¨æˆ‘ä»¬ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬ï¼Œè¿™ä¹ˆå†™çš„è¯å°±ä»£è¡¨æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯html5çš„ç‰ˆæœ¬ã€‚ æ’ç‰ˆæ ‡ç­¾æ ‡é¢˜åœ¨htmlä¸­å…±æœ‰6ç§æ ‡é¢˜ï¼Œåˆ†åˆ«æ˜¯ &lt;h1&gt;&lt;/h1&gt;&lt;h2&gt;&lt;/h2&gt;... ...&lt;h6&gt;&lt;/h6&gt; å…¶ä¸­h1ä¸ºæœ€å¤§çš„æ ‡é¢˜ï¼Œç§°ä¸ºä¸€çº§æ ‡é¢˜ï¼Œh6ç§°ä¸ºå…­çº§æ ‡é¢˜ï¼Œä¸Šé¢çš„æ ‡é¢˜æ ‡ç­¾éƒ½æ˜¯åŒæ ‡ç­¾ã€‚ æˆ‘ä»¬åœ¨ç½‘é¡µä¸­çœ‹çœ‹æ ‡é¢˜çš„æ•ˆæœ: &lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;ç½‘é¡µæ ‡é¢˜&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;ä¸€çº§æ ‡é¢˜&lt;/h1&gt; &lt;h2&gt;äºŒçº§æ ‡é¢˜&lt;/h2&gt; &lt;h3&gt;ä¸‰çº§æ ‡é¢˜&lt;/h3&gt; &lt;h4&gt;å››çº§æ ‡é¢˜&lt;/h4&gt; &lt;h5&gt;äº”çº§æ ‡é¢˜&lt;/h5&gt; &lt;h6&gt;å…­çº§æ ‡é¢˜&lt;/h6&gt; &lt;/body&gt;&lt;/html&gt; å±•ç¤ºæ˜¾ç¤ºæ•ˆæœï¼š æ®µè½æ®µè½æ ‡ç­¾æ˜¯ç”¨&lt;p&gt;&lt;/p&gt;æ ‡ç­¾æ¥å‘ˆç°çš„ï¼Œåœ¨&lt;p&gt;æ ‡ç­¾å†…éƒ¨çš„å†…å®¹è§†ä¸ºä¸€ä¸ªæ®µè½ï¼Œè¯¥æ ‡ç­¾ä¼šæ ¹æ®æµè§ˆå™¨çª—å£çš„å¤§å°è‡ªåŠ¨æ¢è¡Œã€‚ &lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;ç½‘é¡µæ ‡é¢˜&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt;æ°´é™†è‰æœ¨ä¹‹èŠ±ï¼Œå¯çˆ±è€…ç”šè•ƒã€‚æ™‹é™¶æ¸Šæ˜ç‹¬çˆ±èŠã€‚è‡ªæå”æ¥ï¼Œä¸–äººç”šçˆ±ç‰¡ä¸¹ã€‚ äºˆç‹¬çˆ±è²ä¹‹å‡ºæ·¤æ³¥è€Œä¸æŸ“ï¼Œæ¿¯æ¸…æ¶Ÿè€Œä¸å¦–ï¼Œä¸­é€šå¤–ç›´ï¼Œä¸è”“ä¸æï¼Œé¦™è¿œç›Šæ¸…ï¼Œ äº­äº­å‡€æ¤ï¼Œå¯è¿œè§‚è€Œä¸å¯äºµç©ç„‰ã€‚(ç”šçˆ± ä¸€ä½œï¼šç››çˆ±)&lt;/p&gt; &lt;p&gt;äºˆè°“èŠï¼ŒèŠ±ä¹‹éšé€¸è€…ä¹Ÿï¼›ç‰¡ä¸¹ï¼ŒèŠ±ä¹‹å¯Œè´µè€…ä¹Ÿï¼›è²ï¼ŒèŠ±ä¹‹å›å­è€…ä¹Ÿã€‚ å™«ï¼èŠä¹‹çˆ±ï¼Œé™¶åé²œæœ‰é—»ã€‚è²ä¹‹çˆ±ï¼ŒåŒäºˆè€…ä½•äºº?ç‰¡ä¸¹ä¹‹çˆ±ï¼Œå®œä¹ä¼—çŸ£!&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; å±•ç¤ºæ˜¾ç¤ºæ•ˆæœï¼š åœ¨htmlä»£ç ä¸­è¿›è¡Œæ¢è¡Œæ“ä½œæ—¶ï¼Œåœ¨ç½‘é¡µæ˜¾ç¤ºæ—¶ä¸ä¼šè¿›è¡Œæ¢è¡Œæ“ä½œï¼Œhtmlä¸­æ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯ç”±æ ‡ç­¾å®ç°çš„ï¼Œæ‰€ä»¥æ¢è¡Œä¹Ÿéœ€è¦æ¢è¡Œæ ‡ç­¾å®ç°ã€‚ æˆ‘ä»¬å¯ä»¥è§åˆ°ï¼Œæ®µè½ä¹‹é—´ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œå¹¶ä¸”æ®µè½ä¹‹é—´è¿˜éš”æœ‰ä¸€ä¸ªç©ºè¡Œã€‚ æ°´å¹³çº¿æ°´å¹³çº¿æ ‡ç­¾&lt;hr /&gt;æ˜¯ä¸€ä¸ªå•æ ‡ç­¾ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ˜¾ç¤ºä¸€æ¡æ°´å¹³çº¿ã€‚ æ¢è¡Œæ¢è¡Œæ ‡ç­¾ä¸º&lt;br /&gt;,ä¹Ÿæ˜¯ä¸€ä¸ªå•æ ‡ç­¾ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ¢è¡Œï¼Œæ¢è¡Œä¹‹åï¼Œä¸ä¼šåƒæ®µè½ä¸€æ ·ä¹‹é—´è¿˜æœ‰ä¸€ä¸ªç©ºè¡Œï¼Œè€Œæ˜¯ä¸¤è¡Œä¼šç´§è´´ç€ã€‚ ä¸¤ä¸ªæ— è¯­ä¹‰åŒ–çš„æ ‡ç­¾&lt;div&gt;&lt;/div&gt;å’Œ&lt;span&gt;&lt;/span&gt;,è¿™ä¸¤ä¸ªæ ‡ç­¾æ²¡æœ‰å®é™…çš„åŠŸèƒ½ï¼Œåœ¨åé¢ä¸»è¦æ˜¯é…åˆCSSè¿›è¡Œå¸ƒå±€ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸è¦ç®¡å®ƒå¥½äº†ã€‚ &lt;div&gt;æ ‡ç­¾ä¼šå®ç°è‡ªåŠ¨æ¢è¡Œï¼Œæ‰€ä»¥ä¸€è¡Œåªèƒ½æœ‰ä¸€ä¸ª&lt;div&gt;æ ‡ç­¾ï¼Œ&lt;span&gt;ä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œæ‰€ä»¥ä¸€è¡Œå¯ä»¥æœ‰å¤šä¸ª&lt;span&gt;æ ‡ç­¾ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­: &lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;ç½‘é¡µæ ‡é¢˜&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div&gt;ä¼šè‡ªåŠ¨æ¢è¡Œ&lt;/div&gt; &lt;span&gt;ä¸ä¼šè‡ªåŠ¨æ¢è¡Œ&lt;/span&gt;&lt;span&gt;å¯ä»¥æœ‰å¤šä¸ª&lt;/span&gt; &lt;/body&gt;&lt;/html&gt; å±•ç¤ºæ˜¾ç¤ºæ•ˆæœï¼š æ–‡æœ¬æ ¼å¼åŒ–å­—ä½“åŠ ç²—åŠ ç²—æ ‡ç­¾æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«ä¸º&lt;b&gt;&lt;/b&gt;å’Œ&lt;strong&gt;&lt;/strong&gt;,äºŒè€…éƒ½èƒ½è¿›è¡ŒåŠ ç²—ï¼Œä¸è¿‡&lt;strong&gt;æ ‡ç­¾æ¯”è¾ƒæœ‰è¯­ä¹‰ï¼Œæ‰€ä»¥ç”¨çš„æ¯”è¾ƒå¤šã€‚ æ–œä½“æ–œä½“æ ‡ç­¾ä¹Ÿæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«ä¸º&lt;i&gt;&lt;/i&gt;å’Œ&lt;em&gt;&lt;/em&gt;,åŒæ ·çš„ï¼Œ&lt;em&gt;ç”¨çš„æ¯”è¾ƒå¤šã€‚ åˆ é™¤çº¿åŒæ ·ä¹Ÿæœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«ä¸º&lt;s&gt;&lt;/s&gt;å’Œ&lt;del&gt;&lt;/del&gt;,åé¢çš„æœ‰è¯­ä¹‰ï¼Œç”¨çš„å¤šã€‚ ä¸‹åˆ’çº¿ä¸¤ä¸ªï¼Œåˆ†åˆ«ä¸º&lt;u&gt;&lt;/u&gt;å’Œ&lt;ins&gt;&lt;/ins&gt;,åé¢çš„æœ‰è¯­ä¹‰ï¼Œä¸ºinsertçš„ç¼©å†™ï¼Œç”¨çš„è¾ƒå¤šã€‚ ç®€å•çš„æ¼”ç¤ºä¸€ä¸‹: &lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;ç½‘é¡µæ ‡é¢˜&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;strong&gt;ç²—ä½“&lt;/strong&gt;&lt;/br &gt; &lt;em&gt;æ–œä½“&lt;/em&gt;&lt;/br &gt; &lt;del&gt;åˆ é™¤çº¿&lt;/del&gt;&lt;/br &gt; &lt;ins&gt;ä¸‹åˆ’çº¿&lt;/ins&gt;&lt;/br &gt; &lt;/body&gt;&lt;/html&gt; å±•ç¤ºæ˜¾ç¤ºæ•ˆæœï¼š å›¾åƒæ ‡ç­¾å‘ç½‘é¡µä¸­æ·»åŠ å›¾ç‰‡çš„æ–¹æ³•ä¸º &lt;img src=\"å›¾ç‰‡çš„è·¯å¾„\"&gt; è¿™æ˜¯ä¸€ä¸ªå•æ ‡ç­¾ï¼Œsrcç§°ä¸ºæ ‡ç­¾&lt;img&gt;çš„å±æ€§ï¼Œå®ƒçš„å€¼åº”è¯¥ä¸ºå›¾ç‰‡çš„è·¯å¾„ã€‚ è€Œè·¯å¾„åˆåˆ†ä¸ºç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„,ä¸‹é¢å°†ç®€å•ä»‹ç»ä¸€ä¸‹äºŒè€…ï¼Œå‡è®¾æœ‰å¦‚ä¸‹çš„ç›®å½•ç»“æ„ ç£ç›˜C file1æ–‡ä»¶å¤¹ html.md p1.png imageæ–‡ä»¶å¤¹ p2.png p3.png ç°åœ¨æˆ‘æ‰“å¼€çš„æ˜¯html.mdæ–‡ä»¶,å¦‚æœæˆ‘è¦ä¸ç»å¯¹è·¯å¾„æ’å…¥p1.png, p2.png, p3.pngè¿™ä¸‰å¼ å›¾ç‰‡ï¼Œé‚£ä¹ˆæ–¹æ³•æ˜¯è¿™æ ·çš„ &lt;img src=\"C:/file1/p1.png\"&gt;&lt;img src=\"C:/file1/image/p2.png\"&gt;&lt;img src=\"C:/p3.png\"&gt; å¦‚æœä»¥ç›¸å¯¹è·¯å¾„æ’å…¥å›¾ç‰‡ï¼Œé‚£ä¹ˆå›¾ç‰‡ç›¸å¯¹äºè¯¥æ–‡ä»¶çš„ä½ç½®å°±å¾ˆé‡è¦ï¼Œä¸‹é¢æ¼”ç¤ºå¦‚ä½•ä»¥ç›¸å¯¹è·¯å¾„æ’å…¥å›¾ç‰‡ &lt;img src=\"p1.png\"&gt;&lt;img src=\"image/p2.png\"&gt;&lt;img src=\"../p3.png\"&gt; p1.pngå’Œæ–‡ä»¶html.mdå¤„äºåŒä¸€çº§ç›®å½•ï¼Œæ‰€ä»¥ç›´æ¥å†™src=â€p1.pngâ€å³å¯ï¼Œè€Œp2.pngä½äºimageæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸html.mdæ–‡ä»¶å¤„äºåŒä¸€ç›®å½•ï¼Œæ‰€ä»¥å†™ä¸ºsrc=â€image/p2.pngâ€,è€Œp3.pngä½äºä¸Šçº§ç›®å½•ï¼Œ..è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•ï¼Œæ‰€ä»¥å†™ä¸ºsrc=â€../p3.pngâ€ã€‚ å›¾åƒæ ‡ç­¾é™¤äº†æœ‰srcå±æ€§å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„å±æ€§ï¼Œå¦‚ä¸‹ å±æ€§ åŠŸèƒ½ alt å›¾åƒä¸èƒ½æ˜¾ç¤ºæ—¶çš„æ›¿æ¢æ–‡æœ¬ title é¼ æ ‡æ‚¬åœæ˜¾ç¤ºçš„å†…å®¹ width, height å®½åº¦å’Œé«˜åº¦ï¼Œè®¾ç½®å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥ï¼Œä¼šç­‰æ¯”ä¾‹çš„ç¼©æ”¾ border æ·»åŠ è¾¹æ¡†ï¼Œå…¶å€¼ä¸ºè¾¹æ¡†çš„ç²—ç»† ä¸‹é¢ç»™ä¸€ä¸ªç¤ºä¾‹å†™æ³•: &lt;img src=\"p1.png\" width=\"60%\" title=\"p1.png\" border=\"1\"&gt; é“¾æ¥æ ‡ç­¾æˆ‘ä»¬ç¢°åˆ°ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ä¸€å¥è¯å°±å¯ä»¥è·³è½¬åˆ°ä¸€ä¸ªç½‘é¡µï¼Œæˆ–è€…ç‚¹å‡»ä¸€å¼ å›¾ç‰‡è·³è½¬ã€‚é‚£ä¹ˆè¿™ä¸ªå°±æ˜¯ç”¨é“¾æ¥æ ‡ç­¾å®ç°çš„ã€‚é“¾æ¥æ ‡ç­¾ä¸º: &lt;a href=\"é“¾æ¥åœ°å€\"&gt;è·³è½¬çš„æ–‡å­—æˆ–å›¾ç‰‡&lt;/a&gt; æ¯”å¦‚ä½ ç‚¹å‡»è¿™é‡Œå°±ä¼šè·³è½¬åˆ°ç™¾åº¦ã€‚æ¯”è¾ƒéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè·³è½¬åˆ°å¤–éƒ¨çš„ç½‘é¡µè¦å†™æˆhttps://www.baidu.comï¼Œè€Œä¸è¦å†™æˆwww.baidu.comã€‚ å¦å¤–ï¼Œæ³¨æ„è¿™ä¸ªè·³è½¬æ˜¯åœ¨æœ¬é¡µé¢æ‰“å¼€çš„ï¼Œè€Œä¸æ˜¯æ–°æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œå¦‚æœéœ€è¦åœ¨æ–°é¡µé¢æ‰“å¼€ï¼Œåˆ™å¯ä»¥æ”¹å˜å…¶å±æ€§targetçš„å€¼ï¼Œå¦‚ä¸‹ &lt;a href=\"https://www.baidu.com\" target = \"_blank\"&gt;ç‚¹å‡»è¿™é‡Œ&lt;/a&gt; targetæœ‰ä¸¤ç§å€¼å¯é€‰ï¼Œåˆ†åˆ«ä¸º_selfå’Œ_blank,é»˜è®¤ä¸º_selfï¼Œå³åœ¨æœ¬é¡µé¢æ‰“å¼€ã€‚é™¤äº†å¯ä»¥è·³è½¬åˆ°å¤–é“¾ï¼Œä¹Ÿå¯ä»¥åœ¨é¡µé¢å†…è¿›è¡Œè·³è½¬ï¼Œä½ å¯ä»¥ç»™ä¸€ä¸ªæ ‡ç­¾è®¾å®šä¸€ä¸ªidå€¼,æ¯”å¦‚ &lt;img src=\"1.png\" id = \"1\"&gt; æˆ‘ç»™è¿™å¼ æ’å…¥çš„å›¾ç‰‡è®¾äº†idå€¼ä¸º1,é‚£ä¹ˆæˆ‘å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¯­å¥è·³è½¬åˆ°è¿™å¼ å›¾ç‰‡ &lt;a href=\"#1\"&gt;è·³è½¬åˆ°1.png&lt;/a&gt; é€šè¿‡idè·³è½¬å‰é¢è¦åŠ #å·ã€‚ åˆ—è¡¨æ— åºåˆ—è¡¨è¯¥ç§åˆ—è¡¨åœ¨å®é™…ä¸­ä½¿ç”¨çš„è¾ƒå¤š,æ•ˆæœå¤§æ¦‚æ˜¯è¿™æ · è¶³çƒ ç¯®çƒ æ— åºåˆ—è¡¨çš„æ ‡ç­¾ä¸º &lt;ul&gt; &lt;li&gt;è¶³çƒ&lt;/li&gt; &lt;li&gt;ç¯®çƒ&lt;/li&gt;&lt;/ul&gt; æ³¨æ„:&lt;ul&gt;&lt;/ul&gt;æ ‡ç­¾é‡Œé¢åªèƒ½æ”¾&lt;li&gt;&lt;/li&gt;æ ‡ç­¾ï¼Œè€Œ&lt;li&gt;&lt;\\li&gt;èƒ½æ”¾ä»»ä½•å†…å®¹ã€‚ æœ‰åºåˆ—è¡¨æœ‰åºåˆ—è¡¨ä¹Ÿç»å¸¸ç”¨ï¼Œå…¶æ ‡ç­¾ä¸æ— åºçš„å¾ˆç›¸ä¼¼ &lt;ol&gt; &lt;li&gt;è¶³çƒ&lt;/li&gt; &lt;li&gt;ç¯®çƒ&lt;/li&gt;&lt;/ol&gt; æ•ˆæœæ˜¯è¿™æ · è¶³çƒ ç¯®çƒ æ³¨æ„äº‹é¡¹åŒæ— åºã€‚ è‡ªå®šä¹‰åˆ—è¡¨ä½¿ç”¨ä»¥ä¸‹æ ¼å¼å®šä¹‰è‡ªå®šä¹‰åˆ—è¡¨ &lt;dl&gt; &lt;dt&gt;çƒç±»&lt;/dt&gt; &lt;dd&gt;è¶³çƒ&lt;/dd&gt; &lt;dd&gt;ç¯®çƒ&lt;/dd&gt;&lt;/dl&gt; æ•ˆæœå¦‚ä¸‹ çƒç±» è¶³çƒ ç¯®çƒ è¡¨æ ¼è¡¨æ ¼åœ¨ç½‘é¡µä¸­ä¹Ÿå¾ˆå¸¸è§ï¼Œå…¶å†™æ³•ä¸º &lt;table&gt; &lt;tr&gt; &lt;td&gt;å­¦ç§‘&lt;/td&gt; &lt;td&gt;åˆ†æ•°&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;ç‰©ç†&lt;/td&gt; &lt;td&gt;99&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; å…¶æ•ˆæœä¸º å­¦ç§‘ åˆ†æ•° ç‰©ç† 99 &lt;table&gt;&lt;/table&gt;æ ‡ç­¾å°±è¡¨ç¤ºè¡¨æ ¼ï¼Œè€Œ&lt;tr&gt;&lt;/tr&gt;è¡¨ç¤ºä¸€è¡Œï¼Œ&lt;td&gt;&lt;/td&gt;è¡¨ç¤ºä¸€ä¸ªå•å…ƒæ ¼ã€‚tableæ ‡ç­¾æœ‰å¾ˆå¤šçš„å±æ€§ï¼Œå¦‚ä¸‹ å±æ€§ åŠŸèƒ½ align è¯¥å±æ€§è®¾å®šå¯¹é½æ–¹å¼ï¼Œæœ‰left,center,rightä¸‰ä¸ªå€¼å¯é€‰ cellspacing å•å…ƒæ ¼ä¸å•å…ƒæ ¼ä¹‹é—´çš„è·ç¦»ï¼Œé»˜è®¤ä¸º2 cellpadding å•å…ƒæ ¼å†…çš„å­—ä¸å•å…ƒæ ¼ä¹‹é—´çš„è·ç¦»ï¼Œé»˜è®¤ä¸º1 ä¸€èˆ¬æˆ‘ä»¬è®¾ç½®tableçš„ä»¥ä¸‹ä¸‰ä¸ªå±æ€§ä¸º0ï¼Œè¿™ä¸‰ä¸ªå±æ€§åˆ†åˆ«ä¸ºcellspacing, cellpadding, borderï¼Œç§°ä¹‹ä¸ºâ€ä¸‰å‚ä¸º0â€ã€‚æˆ‘ä»¬è¿˜å¯ä½¿ç”¨&lt;caption&gt;&lt;/caption&gt;æ ‡ç­¾è®¾ç½®è¡¨æ ¼çš„æ ‡é¢˜ï¼Œå¦‚ &lt;table&gt; &lt;caption&gt;æˆç»©å•&lt;/caption&gt; &lt;tr&gt; &lt;td&gt;å­¦ç§‘&lt;/td&gt; &lt;td&gt;åˆ†æ•°&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;ç‰©ç†&lt;/td&gt; &lt;td&gt;99&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; æˆç»©å• å­¦ç§‘ åˆ†æ•° ç‰©ç† 99 å› ä¸ºè¡¨å¤´æ¯”è¾ƒç‰¹æ®Šï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™æˆ‘ä»¬åœ¨è¡¨å¤´ä¸­ä¸ç”¨tdï¼Œä½¿ç”¨th,è¯¥æ ‡ç­¾ä¼šåŠ ç²—å±…ä¸­ï¼Œæˆ‘ä»¬æ”¹åŠ¨å¦‚ä¸‹ &lt;th&gt;å­¦ç§‘&lt;/th&gt;&lt;th&gt;åˆ†æ•°&lt;/th&gt; æ•ˆæœä¸º æˆç»©å• å­¦ç§‘ åˆ†æ•° ç‰©ç† 99 ä¸‹é¢è®²çš„è¿™ä¸ªåœ¨å®é™…ä¸­ä¹Ÿç»å¸¸é‡åˆ°çš„æ˜¯å•å…ƒæ ¼åˆå¹¶ã€‚å‡å¦‚æœ‰ä¸‹é¢è¿™ä¸ªè¡¨æ ¼ &lt;table&gt; &lt;tr&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; 123 123 123 123 123 123 123 123 123 æˆ‘å¸Œæœ›å°†æœ€åä¸€è¡Œçš„åä¸¤åˆ—åˆå¹¶æˆä¸€ä¸ªå•å…ƒæ ¼,é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“å•å…ƒæ ¼çš„åˆå¹¶åˆ†ä¸ºè¡Œå’Œå¹¶rowspanå’Œåˆ—åˆå¹¶colspan,è¡Œåˆå¹¶æ˜¯è‡ªå·¦è€Œå³çš„ï¼Œåˆ—åˆå¹¶æ˜¯è‡ªä¸Šè€Œä¸‹çš„ã€‚å°†æœ€åä¸€è¡Œçš„åä¸¤åˆ—åˆå¹¶ä¸ºä¸€ä¸ªï¼Œæ‰€ä»¥æ˜¯åˆ—å’Œå¹¶ï¼Œå¹¶ä¸”æ˜¯ä¸¤ä¸ªåˆå¹¶æˆä¸€ä¸ªï¼Œæ‰€ä»¥colspan = â€œ2â€,æ‰€ä»¥ä¸Šé¢çš„ç¨‹åºæ”¹ä¸º &lt;table&gt; &lt;tr&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;td&gt;123&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;123&lt;/td&gt; &lt;td colspan=\"2\"&gt;123&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; æ•ˆæœä¸º 123 123 123 123 123 123 123 123 åœ¨ç¬¬ä¸‰ä¸ªtr(ä»£è¡¨ç¬¬ä¸‰è¡Œ)çš„ç¬¬äºŒä¸ªtdå¤„è®¾ç½®colspan=â€2â€,å› ä¸ºè¦åˆå¹¶æœ€åä¸€åˆ—ï¼Œæ‰€ä»¥è¦åˆ å»æœ€åä¸€ä¸ªtdã€‚ è¡¨å•ç°å®ä¸­ä¼šç»å¸¸æäº¤è¡¨å•ï¼Œæ¯”å¦‚åœ¨æ³¨å†Œé‚®ç®±æ—¶ï¼Œä½ å°±éœ€è¦æäº¤è¡¨å•ï¼Œè¡¨å•ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œè¡¨å•æ§ä»¶ï¼Œæç¤ºæ–‡æœ¬å’Œè¡¨å•åŸŸã€‚ ç°åœ¨é‡ç‚¹ä»‹ç»è¡¨å•æ§ä»¶ï¼Œå› ä¸ºè¿™ä¸ªåŒ…å«äº†å…·ä½“çš„è¡¨å•åŠŸèƒ½é¡¹ï¼Œå¦‚å•è¡Œæ–‡æœ¬è¾“å…¥æ¡†ã€å¯†ç è¾“å…¥æ¡†ã€å¤é€‰æ¡†ã€æäº¤æŒ‰é’®ã€é‡ç½®æŒ‰é’®ç­‰ã€‚ä¸è¡¨å•æœ‰å…³çš„æ ‡ç­¾æ˜¯&lt;input/ &gt;,&lt;input/ &gt;æ˜¯ä¸€ä¸ªå•æ ‡ç­¾ï¼Œæ ¹æ®å…¶å±æ€§typeè®¾ç½®ä¸åŒçš„å€¼ï¼Œå¯ä»¥æŒ‡å®šä¸åŒçš„æ§ä»¶ç±»å‹ï¼Œå¦‚: typeçš„å€¼ æ§ä»¶ text å•è¡Œæ–‡æœ¬è¾“å…¥æ¡† password å¯†ç è¾“å…¥æ¡† radio å•é€‰æŒ‰é’® checkbox å¤é€‰æ¡† button æ™®é€šæŒ‰é’® submit æäº¤æŒ‰é’® reset é‡ç½®æŒ‰é’® image å›¾åƒå½¢å¼çš„æäº¤æŒ‰é’® file æ–‡ä»¶åŸŸ &lt;input/ &gt;è¿˜æœ‰å…¶ä»–çš„å±æ€§é…åˆtypeå±æ€§ä½¿ç”¨ï¼Œå¦‚ä¸‹ å±æ€§ åŠŸèƒ½ name æ§ä»¶çš„åç§° value æ§ä»¶çš„é»˜è®¤æ–‡æœ¬å€¼ size æ§ä»¶åœ¨é¡µé¢ä¸­çš„æ˜¾ç¤ºå®½åº¦ï¼Œåªèƒ½ä¸ºæ­£æ•´æ•° checked å®šä¹‰é€‰æ‹©æ§ä»¶é»˜è®¤è¢«é€‰ä¸­çš„é¡¹ maxlength æ§ä»¶å…è®¸è¾“å…¥çš„æœ€å¤§å­—ç¬¦æ•° è¿™é‡Œæˆ‘æƒ³è¯´ä¸€ä¸‹å•é€‰æŒ‰é’®ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªå•é€‰æŒ‰é’®ï¼Œæ¯”å¦‚ç”·å’Œå¥³è®©ä½ é€‰ï¼ŒæŒ‰é“ç†åªèƒ½é€‰ä¸€ä¸ªï¼Œå¦‚ä¸‹ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;/head&gt; &lt;body&gt; &lt;input type=\"radio\"&gt;ç”·&lt;input type=\"radio\"&gt;å¥³ &lt;/body&gt;&lt;/html&gt; ä½ å¯ä»¥å‘ç°ä¸¤ä¸ªéƒ½å¯ä»¥é€‰åˆ°ï¼Œè§£å†³åŠæ³•å°†äºŒè€…çš„nameå±æ€§è®¾ç½®ä¸ºç›¸åŒçš„ï¼Œæ¯”å¦‚sex,ç›¸åŒçš„nameä»£è¡¨ä»–ä»¬æ˜¯åŒä¸€ç»„çš„ï¼Œå¯¹äºå•é€‰æŒ‰é’®ï¼ŒåŒä¸€ç»„çš„åªèƒ½é€‰ä¸­ä¸€ä¸ªã€‚ &lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;/head&gt; &lt;body&gt; &lt;input type=\"radio\" name=\"sex\"&gt;ç”·&lt;input type=\"radio\" name=\"sex\"&gt;å¥³ &lt;/body&gt;&lt;/html&gt; è¿™ä¸ªæ—¶å€™ä½ åªèƒ½é€‰ä¸€ä¸ªã€‚ ä¸‹é¢è¦ä»‹ç»ä¸€ä¸ª&lt;label&gt;&lt;/label&gt;æ ‡ç­¾ï¼Œå½“labelä¸ä¸€ä¸ªè¡¨å•æ§ä»¶ç»‘å®šæ—¶ï¼Œç‚¹å‡»è¯¥labelä¼šè·å¾—è¯¥æ§ä»¶çš„è¾“å…¥ç„¦ç‚¹,é‚£ä¹ˆå¦‚ä½•ä¸è¡¨å•æ§ä»¶ç»‘å®šå‘¢?ä½¿ç”¨forå±æ€§,å¦‚ä¸‹ &lt;label for=\"word\"&gt;Sex&lt;/label&gt;&lt;input type = \"text\" id = \"word\"&gt; å½“ä½ ç‚¹å‡»Sex,ä¼šè‡ªåŠ¨è·å¾—è¾“å…¥ç„¦ç‚¹ã€‚æ•ˆæœå¦‚ä¸‹: textåªèƒ½è¾“å…¥ä¸€è¡Œçš„æ–‡æœ¬ï¼Œäº‹å®ä¸Šï¼Œæˆ‘ä»¬åœ¨ç½‘é¡µä¸­ç»å¸¸è§å¯ä»¥è¾“å…¥å¤šè¡Œæ–‡æœ¬çš„è¾“å…¥æ¡†ï¼Œæ¯”å¦‚åœ¨æˆ‘ä»¬å‘è¡¨è¯„è®ºæ—¶çš„è¾“å…¥æ¡†ï¼Œå¤šè¡Œè¾“å…¥çš„æ ‡ç­¾æ˜¯textarea,ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹: &lt;textarea cols=\"æ¯è¡Œä¸­çš„å­—ç¬¦æ•°\" rows=\"æ˜¾ç¤ºçš„è¡Œæ•°\"&gt; é»˜è®¤æ˜¾ç¤ºæ–‡æœ¬&lt;/textarea&gt; æ•ˆæœå¦‚ä¸‹ æœ€åä¸€ä¸ªè¦ä»‹ç»çš„å°±æ˜¯ä¸‹æ‹‰èœå•ï¼Œä¸‹æ‹‰èœå•çš„æ ‡ç­¾æ˜¯ &lt;select&gt; &lt;option&gt;åŒ—äº¬&lt;/option&gt; &lt;option&gt;ä¸Šæµ·&lt;/option&gt; &lt;option&gt;é’å²›&lt;/option&gt;&lt;/select&gt; å¦‚ä¸‹æ‰€ç¤º åŒ—äº¬ ä¸Šæµ· é’å²› å½“optionä¸­è®¾ç½®selectedå±æ€§ä¸ºselected=â€selectedâ€,é‚£ä¹ˆè¿™ä¸ªoptionæ˜¯é»˜è®¤é€‰ä¸­é¡¹ã€‚æ¯”å¦‚æˆ‘è¦è®¾ç½®ä¸Šæµ·ä¸ºé»˜è®¤é€‰ä¸­é¡¹é‚£ä¹ˆ &lt;select&gt; &lt;option&gt;åŒ—äº¬&lt;/option&gt; &lt;option selected=\"selected\"&gt;ä¸Šæµ·&lt;/option&gt; &lt;option&gt;é’å²›&lt;/option&gt;&lt;/select&gt; åŒ—äº¬ ä¸Šæµ· é’å²›","tags":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"},{"name":"HTML","slug":"HTML","permalink":"https://lastknightcoder.github.io/lastknightcoder/tags/HTML/"}]}]