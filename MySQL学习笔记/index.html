<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MySQL学习笔记 | Coder</title><meta name="description" content="MySQL数据库入门"><meta name="keywords" content="MySQL"><meta name="author" content="熊滔"><meta name="copyright" content="熊滔"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://lastknightcoder.gitee.io/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="MySQL学习笔记"><meta name="twitter:description" content="MySQL数据库入门"><meta name="twitter:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/img/bg73.png"><meta property="og:type" content="article"><meta property="og:title" content="MySQL学习笔记"><meta property="og:url" content="https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="Coder"><meta property="og:description" content="MySQL数据库入门"><meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/img/bg73.png"><meta property="article:published_time" content="2019-09-13T16:00:00.000Z"><meta property="article:modified_time" content="2019-09-13T16:00:00.000Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="https://lastknightcoder.gitee.io/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="prev" title="数据结构--Java语言描述" href="https://lastknightcoder.gitee.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84--Java%E6%8F%8F%E8%BF%B0/"><link rel="next" title="矩阵等价与向量组等价" href="https://lastknightcoder.gitee.io/%E7%9F%A9%E9%98%B5%E7%AD%89%E4%BB%B7%E4%B8%8E%E5%90%91%E9%87%8F%E7%BB%84%E7%AD%89%E4%BB%B7/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: 'https://lastknightcoder.gitee.io/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://lastknightcoder.gitee.io/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://lastknightcoder.gitee.io/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="https://lastknightcoder.gitee.io/archives/"><div class="headline">文章</div><div class="length_num">63</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="https://lastknightcoder.gitee.io/tags/"><div class="headline">标签</div><div class="length_num">54</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="https://lastknightcoder.gitee.io/categories/"><div class="headline">分类</div><div class="length_num">21</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL基本概念"><span class="toc-number">1.</span> <span class="toc-text">MySQL基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#连接MySQL"><span class="toc-number">1.1.</span> <span class="toc-text">连接MySQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL语句分类"><span class="toc-number">1.2.</span> <span class="toc-text">SQL语句分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注释"><span class="toc-number">1.3.</span> <span class="toc-text">注释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL"><span class="toc-number">2.</span> <span class="toc-text">DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#操作数据库"><span class="toc-number">2.1.</span> <span class="toc-text">操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询"><span class="toc-number">2.1.1.</span> <span class="toc-text">查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建"><span class="toc-number">2.1.2.</span> <span class="toc-text">创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改"><span class="toc-number">2.1.3.</span> <span class="toc-text">修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除"><span class="toc-number">2.1.4.</span> <span class="toc-text">删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用数据库"><span class="toc-number">2.1.5.</span> <span class="toc-text">使用数据库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#操作表"><span class="toc-number">2.2.</span> <span class="toc-text">操作表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建-1"><span class="toc-number">2.2.2.</span> <span class="toc-text">创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除-1"><span class="toc-number">2.2.3.</span> <span class="toc-text">删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改-1"><span class="toc-number">2.2.4.</span> <span class="toc-text">修改</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML"><span class="toc-number">3.</span> <span class="toc-text">DML</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#添加数据"><span class="toc-number">3.1.</span> <span class="toc-text">添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除数据"><span class="toc-number">3.2.</span> <span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新数据"><span class="toc-number">3.3.</span> <span class="toc-text">更新数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL"><span class="toc-number">4.</span> <span class="toc-text">DQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基础查询"><span class="toc-number">4.1.</span> <span class="toc-text">基础查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#查询多个字段"><span class="toc-number">4.1.1.</span> <span class="toc-text">查询多个字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#去重"><span class="toc-number">4.1.2.</span> <span class="toc-text">去重</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#计算列"><span class="toc-number">4.1.3.</span> <span class="toc-text">计算列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#起别名"><span class="toc-number">4.1.4.</span> <span class="toc-text">起别名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件查询"><span class="toc-number">4.2.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#排序查询"><span class="toc-number">4.3.</span> <span class="toc-text">排序查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模糊查询"><span class="toc-number">4.4.</span> <span class="toc-text">模糊查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#聚合函数"><span class="toc-number">4.5.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分组查询"><span class="toc-number">4.6.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分页查询"><span class="toc-number">4.7.</span> <span class="toc-text">分页查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#约束"><span class="toc-number">5.</span> <span class="toc-text">约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#非空约束"><span class="toc-number">5.1.</span> <span class="toc-text">非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#唯一约束"><span class="toc-number">5.2.</span> <span class="toc-text">唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主键约束"><span class="toc-number">5.3.</span> <span class="toc-text">主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#外键约束"><span class="toc-number">5.4.</span> <span class="toc-text">外键约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三大范式"><span class="toc-number">6.</span> <span class="toc-text">三大范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多表查询"><span class="toc-number">7.</span> <span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内连接"><span class="toc-number">7.1.</span> <span class="toc-text">内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#外连接"><span class="toc-number">7.2.</span> <span class="toc-text">外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#子查询"><span class="toc-number">7.3.</span> <span class="toc-text">子查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务"><span class="toc-number">8.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的特性"><span class="toc-number">8.1.</span> <span class="toc-text">事务的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的隔离级别"><span class="toc-number">8.2.</span> <span class="toc-text">事务的隔离级别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#权限管理"><span class="toc-number">9.</span> <span class="toc-text">权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建用户"><span class="toc-number">9.1.</span> <span class="toc-text">创建用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#授予权限"><span class="toc-number">9.2.</span> <span class="toc-text">授予权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#撤销权限"><span class="toc-number">9.3.</span> <span class="toc-text">撤销权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看权限"><span class="toc-number">9.4.</span> <span class="toc-text">查看权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除用户"><span class="toc-number">9.5.</span> <span class="toc-text">删除用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改管理员密码"><span class="toc-number">9.6.</span> <span class="toc-text">修改管理员密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改普通用户密码"><span class="toc-number">9.7.</span> <span class="toc-text">修改普通用户密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考链接"><span class="toc-number">10.</span> <span class="toc-text">参考链接</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://gitee.com/lastknightcoder/blogimage/raw/master/img/bg73.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="https://lastknightcoder.gitee.io/">Coder</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/link/"><i class="fa-fw fa fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="https://lastknightcoder.gitee.io/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">MySQL学习笔记</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2019-09-14 00:00:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-09-14</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2019-09-14 00:00:00"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-09-14</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="https://lastknightcoder.gitee.io/categories/MySQL/">MySQL</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>这篇文章是记录我学习MySQL时的一些笔记，不成体系，仅为以后快速学习准备，由于记录的是从零学习MySQL的笔记，所以笔记的内容是十分的基础的，基本上是以用为主，不牵涉到具体的原理性问题。</p>
<a id="more"></a>

<h2 id="MySQL基本概念"><a href="#MySQL基本概念" class="headerlink" title="MySQL基本概念"></a>MySQL基本概念</h2><p>我们使用Java编写程序，一般数据都是存储在内存中的，一旦程序终止或断电，那么数据就会丢失，所以我们需要将数据存储到本地文件中，我们一般存储到数据库中，而MySQL正是这么一款数据库。</p>
<p>安装MySQL很简单，直接使用搜索引擎搜索MySQL，进入官网进行安装，MySQL是开源的软件。目前企业使用的是5.5-5.7的版本，选择进行下载即可。若要卸载MySQL，在手动卸载MySQL后，还要删除 <code>C:\ProgramData\MySQL</code> 这个文件夹，否则重新安装时不能成功。</p>
<h3 id="连接MySQL"><a href="#连接MySQL" class="headerlink" title="连接MySQL"></a>连接MySQL</h3><p>在命令行中输入</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure>

<p>然后会提示你输入密码</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql01.png">

<p>输入的密码以密文的形式显示，以保证安全。当然你也可以直接在<code>-p</code>后面输入密码，不过这样并不安全。</p>
<h3 id="SQL语句分类"><a href="#SQL语句分类" class="headerlink" title="SQL语句分类"></a>SQL语句分类</h3><p>SQL语句按功能分为</p>
<ul>
<li>DDL：操作数据库，表</li>
<li>DML：增、删、改数据</li>
<li>DQL：查询数据</li>
<li>DLL：与授权有关</li>
</ul>
<p>在MySQL中不区分大小写，不过关键字一般会大写，而数据库名和表名一般小写，SQL语句需要以<code>;</code>结尾，否则会一直等待输入。</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>MySQL的注释为<code>--</code>后面需要接一个空格，否则会报错，另一种注释为<code>#</code>，这是MySQL独有的，后面不需要加空格</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show databases; -- 显示所有的数据库</span><br><span class="line">show databases; #显示所有的数据库</span><br></pre></td></tr></table></figure>

<h2 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h2><p>这里来介绍操作数据库和表的SQL语句，这些操作一般就是C(Create), R(Retrieve), U(Update), D(Delete)。</p>
<h3 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h3><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>首先介绍查询数据库的语句，连接上MySQL后，在命令行中输入(这里关键字没有大写)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<p>这个语句的作用是显示出所有的数据库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sakila             |</span><br><span class="line">| sys                |</span><br><span class="line">| world              |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.31 sec)</span><br></pre></td></tr></table></figure>

<p>下面这条语句的作用是显示出某数据库所用的字符集</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show create database 数据库名;</span><br></pre></td></tr></table></figure>

<p>比如</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show create database world;</span><br></pre></td></tr></table></figure>

<p>输出为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                                  |</span><br><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">| world    | CREATE DATABASE &#96;world&#96; &#x2F;*!40100 DEFAULT CHARACTER SET latin1 *&#x2F; |</span><br><span class="line">+----------+------------------------------------------------------------------+</span><br><span class="line">1 row in set (0.05 sec)</span><br></pre></td></tr></table></figure>

<p>可见world数据库所用的字符集为latin1。</p>
<h4 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h4><p>创建数据库的语句为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database 数据库名;</span><br></pre></td></tr></table></figure>

<p>如</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database db1; -- 创建一个名为db1的数据库</span><br></pre></td></tr></table></figure>

<p>如果数据库已经存在，那么会发生错误，例如再次执行上面的命令<code>create database db1;</code>会发生如下错误</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ERROR 1007 (HY000): Can&#39;t create database &#39;db1&#39;; database exists</span><br></pre></td></tr></table></figure>

<p>这个时候我们可以使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database if not exists db1; -- 如果db1不存在，那么创建db1，否则什么也不做</span><br></pre></td></tr></table></figure>

<p>我们还可以在创建数据库时指定字符集，如</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database db2 character set gbk;</span><br></pre></td></tr></table></figure>

<p>使用<code>show create database db2;</code>查看字符集</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="code">+----------+</span>-------------------------------------------------------------+</span><br><span class="line">| Database | Create Database                                             |</span><br><span class="line"><span class="code">+----------+</span>-------------------------------------------------------------+</span><br><span class="line">| db2      | CREATE DATABASE <span class="code">`db2`</span> /<span class="strong">*!40100 DEFAULT CHARACTER SET gbk *</span>/ |</span><br><span class="line"><span class="code">+----------+</span>-------------------------------------------------------------+</span><br><span class="line">1 row in set (0.03 sec)</span><br></pre></td></tr></table></figure>

<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><p>我们可以通过下面的命令修改数据库的字符集</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter database 数据库名 character set 字符集;</span><br></pre></td></tr></table></figure>

<p>例如修改db2数据库为utf8编码</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter database db2 character set utf8;</span><br></pre></td></tr></table></figure>

<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p>我们可以使用drop命令删除数据库，例如</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop database db2;</span><br></pre></td></tr></table></figure>

<p>使用<code>show databases;</code>查看数据库，发现db2已经被删除了</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="code">+--------------------+</span></span><br><span class="line">| Database           |</span><br><span class="line"><span class="code">+--------------------+</span></span><br><span class="line">| information<span class="emphasis">_schema |</span></span><br><span class="line"><span class="emphasis">| db1                |</span></span><br><span class="line"><span class="emphasis">| mysql              |</span></span><br><span class="line"><span class="emphasis">| performance_</span>schema |</span><br><span class="line">| sakila             |</span><br><span class="line">| sys                |</span><br><span class="line">| world              |</span><br><span class="line"><span class="code">+--------------------+</span></span><br></pre></td></tr></table></figure>

<p>如果数据库不存在，那么会报错，比如在删除一次db2</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ERROR 1008 (HY000): Can&#39;t drop database &#39;db2&#39;; database doesn&#39;t exist</span><br></pre></td></tr></table></figure>

<p>这个时候我们可以使用下面的语句</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop database if exists db2; -- 如果db2存在则删除db2，否则什么也不做</span><br></pre></td></tr></table></figure>

<h4 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h4><p>通过<code>select database();</code>命令可以查看我们正在使用哪一个数据库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| NULL       |</span><br><span class="line">+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>因为我们没有使用数据库，所以这里显示的是NULL，可以通过<code>use 数据库名;</code>来使用数据库，比如使用db1数据库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">use db1;</span><br></pre></td></tr></table></figure>

<p>再次执行<code>select database();</code>输出为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| db1        |</span><br><span class="line">+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="操作表"><a href="#操作表" class="headerlink" title="操作表"></a>操作表</h3><h4 id="查询-1"><a href="#查询-1" class="headerlink" title="查询"></a>查询</h4><p>可以使用show tables查询某数据库中所有的表，例如现在我们使用world数据库，然后查询其中所有的表</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">use world;</span><br><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<p>结果为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+-----------------+</span><br><span class="line">| Tables_in_world |</span><br><span class="line">+-----------------+</span><br><span class="line">| city            |</span><br><span class="line">| country         |</span><br><span class="line">| countrylanguage |</span><br><span class="line">+-----------------+</span><br><span class="line">3 rows in set (0.09 sec)</span><br></pre></td></tr></table></figure>

<p>我们还可以使用<code>desc 表名;</code>来查询某表的结构，我们来查询<code>city</code>表的结构</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">desc city;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">| Field       | Type     | Null | Key | Default | Extra          |</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">| ID          | int(11)  | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| Name        | char(35) | NO   |     |         |                |</span><br><span class="line">| CountryCode | char(3)  | NO   | MUL |         |                |</span><br><span class="line">| District    | char(20) | NO   |     |         |                |</span><br><span class="line">| Population  | int(11)  | NO   |     | 0       |                |</span><br><span class="line">+-------------+----------+------+-----+---------+----------------+</span><br><span class="line">5 rows in set (0.65 sec)</span><br></pre></td></tr></table></figure>

<p>使用<code>show create table 表名;</code>查看表的字符集。</p>
<h4 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h4><p>创建表的语法为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table 表名(列名1 数据类型1, ..., 列名n 数据类型n);</span><br></pre></td></tr></table></figure>

<p>MySQL中常用的数据类型有</p>
<ul>
<li>int<ul>
<li>整数类型</li>
</ul>
</li>
<li>double<ul>
<li>浮点数类型，接收两个参数，如double(5,2)，5代表数字的总长度，2代表小数点后的位数</li>
</ul>
</li>
<li>date<ul>
<li>日期类型，格式为yy-MM-dd</li>
</ul>
</li>
<li>datetime<ul>
<li>日期类型，格式为yy-MM-dd HH:mm:ss</li>
</ul>
</li>
<li>timestamp<ul>
<li>时间戳，格式为yy-MM-dd HH:mm:ss，当不赋值或赋值为NULL时，自动使用当前的时间作为值</li>
</ul>
</li>
<li>varchar<ul>
<li>字符串类型，接收一个参数表示字符串的最大长度，如varchar(20)</li>
</ul>
</li>
</ul>
<p>现在我们在db1中创建一个student表</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">use db1; -- 使用数据库db1</span><br><span class="line">create table student(name varchar(10), age int, score double(4,1), insert_time timestamp); -- 创建表student 里面包括name age score insert_time 等列</span><br><span class="line">desc student; -- 查看student表的结构</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+-------------+-------------+------+-----+-------------------+-----------------------------+</span><br><span class="line">| Field       | Type        | Null | Key | Default           | Extra                       |</span><br><span class="line">+-------------+-------------+------+-----+-------------------+-----------------------------+</span><br><span class="line">| name        | varchar(10) | YES  |     | NULL              |                             |</span><br><span class="line">| age         | int(11)     | YES  |     | NULL              |                             |</span><br><span class="line">| score       | double(4,1) | YES  |     | NULL              |                             |</span><br><span class="line">| insert_time | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |</span><br><span class="line">+-------------+-------------+------+-----+-------------------+-----------------------------+</span><br><span class="line">4 rows in set (0.07 sec)</span><br></pre></td></tr></table></figure>

<h4 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h4><p>同删除数据库一样，有两种用法</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop table 表名;</span><br><span class="line">drop table if exists 表名;</span><br></pre></td></tr></table></figure>

<p>这里不多做解释。</p>
<h4 id="修改-1"><a href="#修改-1" class="headerlink" title="修改"></a>修改</h4><ul>
<li>重命名表名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 rename to 新表名;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改表的字符集</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 character set 字符集;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加一列</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 add 列名 数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改列名及其类型</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 change 列名 新列名 新数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改列的数据类型</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 modify 列名 新数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除列</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table 表名 drop 列名;</span><br></pre></td></tr></table></figure>

<h2 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h2><p>DML是与修改数据有关的sql语句。修改数据主要包括的是增删改数据。为了查看修改数据的效果，这里介绍一个查询数据的命令</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from 表名;</span><br></pre></td></tr></table></figure>

<p>现在创建一个student的表</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE student (</span><br><span class="line">    name varchar(10), -- 名字长度最大10个字符</span><br><span class="line">    age int, -- 年龄</span><br><span class="line">    math_score double(3,1), -- 数学成绩</span><br><span class="line">    english_score double(3,1), -- 英语成绩</span><br><span class="line">    insert_time timestamp  -- 数据加入的时间</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DESC student; -- 查看表的结构</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql02.png">

<h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><p>向表中添加数据的写法为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">insert into 表名(列名1, 列名2, ..., 列名n) values(值1, 值2, ..., 值n); -- 列名和值要一一对应</span><br></pre></td></tr></table></figure>

<p>例如向表中添加数据</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSERT INTO student (name, age, math_score, english_score) VALUES (&#39;dilireba&#39;, 27, 60, 70);</span><br><span class="line">INSERT INTO student (name, age, math_score, english_score) VALUES (&#39;gulinazha&#39;, 28, 62, 68);</span><br></pre></td></tr></table></figure>

<p>使用<code>SELECT * FROM student;</code>得到数据为</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql03.png">

<p>注意：</p>
<ul>
<li>列名和值名要一一对应</li>
<li>如果表名后不定义列名，则默认为给所有列添加，如<ul>
<li>INSERT INTO student VALUES (‘dilireba’, 27, 60, 70);</li>
</ul>
</li>
<li>除了数字类型，其他类型要用引号(<code>&#39;</code>)括起来</li>
</ul>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p>删除数据的格式为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delete from 表名 [where 条件]; -- 删除满足条件的行</span><br></pre></td></tr></table></figure>

<p>其中<code>[]</code>代表的是里面的内容可省略，如果不加条件的话，默认为删除表中的所有数据，现在我们删除上例中<code>age &gt; 27</code>的行，如下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DELETE FROM student WHERE age &gt; 27;</span><br></pre></td></tr></table></figure>

<p>得到的结果为</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql04.png">

<p>如果要删除表中的所有数据的话，不推荐使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delete from 表名;</span><br></pre></td></tr></table></figure>

<p>因为它会将表中的数据一行一行的删除，效率较慢，推荐使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">truncate table 表名;</span><br></pre></td></tr></table></figure>

<p>它会直接删除这个表，然后创建一个空表，这个表的名字和结构与删除的表相同，从效果上就相当于是删除了表中所有的数据，但是它的效率比<code>delete from 表名;</code>快。</p>
<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><p>更新数据的语法为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">update 表名 set 列名1 &#x3D; 值1, ..., 列名n &#x3D; 值n [where 条件]; -- 当符合条件时，更新值</span><br></pre></td></tr></table></figure>

<p>如何省略条件，那么会修改所有的行，如现在我要更新，如何符合条件age = 27，那么将age修改为28，如下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">UPDATE student set age &#x3D; 28 WHERE age &#x3D; 27;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql05.png">

<h2 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h2><p>查询数据的基本语法为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    字段列表</span><br><span class="line">FROM </span><br><span class="line">    表名列表</span><br><span class="line">WHERE </span><br><span class="line">    条件列表</span><br><span class="line">GROUP BY </span><br><span class="line">    分组字段</span><br><span class="line">HAVING </span><br><span class="line">    分组后的条件限定</span><br><span class="line">ORDER BY </span><br><span class="line">    排序</span><br><span class="line">LIMIT </span><br><span class="line">    分页限定</span><br></pre></td></tr></table></figure>

<p>下面会详细的讲解其中各个关键字的意思。创建一个student表如下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE student (</span><br><span class="line">    id int,  --  编号</span><br><span class="line">    name varchar(20), --  姓名</span><br><span class="line">    age int, --  年龄</span><br><span class="line">    sex varchar(5),  --  性别</span><br><span class="line">    address varchar(100),  --  地址</span><br><span class="line">    math int, --  数学</span><br><span class="line">    english int --  英语</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>向其中插入以下数据</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSERT INTO student(id,name,age,sex,address,math,english) VALUES </span><br><span class="line">       (1,&#39;马云&#39;,55,&#39;男&#39;, &#39;杭州 &#39;,66,78),</span><br><span class="line">       (2,&#39;马化腾 &#39;,45,&#39;女 &#39;,&#39;深圳 &#39;,98,87),</span><br><span class="line">       (3,&#39;马景涛 &#39;,55,&#39;男 &#39;,&#39;香港 &#39;,56,77),</span><br><span class="line">       (4,&#39;柳岩&#39;,20,&#39;女 &#39;,&#39;湖南 &#39;,76,65),</span><br><span class="line">       (5,&#39;柳青 &#39;,20,&#39;男 &#39;,&#39;湖南 &#39;,86,NULL),</span><br><span class="line">       (6,&#39;刘德华 &#39;,57,&#39;男 &#39;,&#39;香港&#39;,99, 99),</span><br><span class="line">       (7,&#39;马德&#39;,22,&#39;女&#39;,&#39;香港&#39;,99,99),</span><br><span class="line">       (8,&#39;德玛西亚&#39;,18,&#39;男&#39;,&#39;南京&#39;,56,65);</span><br></pre></td></tr></table></figure>

<p>如果提示</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Incorrect string value: &#39;\xE9\xA9\xAC\xE4\xBA\x91&#39; for column &#39;name&#39; at row 1</span><br></pre></td></tr></table></figure>

<p>那么就是因为字符编码的问题，这时可以修改<code>name,address,sex</code>的字符集为<code>utf8</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table student change name name char(20) character set utf8;</span><br><span class="line">alter table student change address address char(100) character set utf8;</span><br><span class="line">alter table student change sex sex char(5) character set utf8;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql06.png">

<h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><h4 id="查询多个字段"><a href="#查询多个字段" class="headerlink" title="查询多个字段"></a>查询多个字段</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name, age </span><br><span class="line">FROM </span><br><span class="line">	student; -- 查询name和age字段</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql07.png">

<h4 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h4><p>查询address字段时，发现有相同的，如”香港”</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	address </span><br><span class="line">FROM </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql08.png">

<p>如果希望重复出现的只出现一次，那么可以使用DISTINCT</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT DISTINCT </span><br><span class="line">	address </span><br><span class="line">FROM </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql09.png">

<h4 id="计算列"><a href="#计算列" class="headerlink" title="计算列"></a>计算列</h4><p>现在要计算它们的数学成绩和英语成绩的和</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name, math, english, math+english </span><br><span class="line">FROM </span><br><span class="line">	student; -- 为了看出是谁的总分，这里加上一个name字段</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql10.png">

<p>我们发现第5行的结果为null，这是因为null+其它数得到的结果都是null，但是这里我们应该把null当做0处理 ，这样加出来的就是总分，而不是null</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name, math, english, math+ifnull(english,0) </span><br><span class="line">FROM </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<p>这里使用了ifnull(english,0)，如果english的值是null，那么就替换为0，所以我们得到的结果为</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql11.png">

<h4 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h4><p>我们注意到上面的最后一列的列名为math+ifnull(english,0)，这个列名没有什么意义，我们应该为它起个别名，如score</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name, math, english, math+ifnull(english,0) AS score </span><br><span class="line">FROM </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql12.png">

<p>其中AS作为一个起别名的作用，AS其实可以省略，使用空格替代即可，如</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name, math, english, math+ifnull(english,0) score </span><br><span class="line">FROM </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<p>该句得到的结果与上面的相同</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql12.png">

<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><p>我们使用WHERE来指明条件查询，比如我要查询年龄在20岁以上的</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name,age </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">WHERE </span><br><span class="line">	age &gt; 20;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql13.png">

<p>可见WHERE后面跟的是一个逻辑值，既然是逻辑值就可以使用与或非运算</p>
<ul>
<li>AND</li>
<li>OR</li>
<li>NOT</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name,age </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">WHERE </span><br><span class="line">	age &gt; 20 AND age &lt; 50; -- 年龄在20-50之间的</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql14.png">

<p>我们可以使用BETWEEN … AND …来简化上面的操作</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name,age </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">WHERE </span><br><span class="line">	age BETWEEN 20 AND 50; -- 在20-50之间，包括20和50</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql15.png">

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name,age </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">WHERE </span><br><span class="line">	age &#x3D; 18 OR age &#x3D; 20 OR age &#x3D; 25; -- 查询年龄为18或20或25的</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql16.png">

<p>我们可以使用IN达到相同的效果</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name,age </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">WHERE </span><br><span class="line">	age IN (18,20,25); -- 查询年龄为18或20或25的</span><br></pre></td></tr></table></figure>

<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><p>使用ORDER BY来对查询结果进行排序，后面跟要排序的字段，默认对字段进行升序排序。</p>
<ul>
<li>ASC：升序</li>
<li>DESC：降序</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name,math </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">ORDER BY </span><br><span class="line">	math; -- 默认为升序</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql17.png">

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name,math </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">ORDER BY </span><br><span class="line">	math DESC; -- 降序</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql18.png">

<p>ORDER BY可以对多个字段进行排序，先对前面的字段进行排序，如果前面的字段相同，在根据后面的字段排序，比如按照数学和英语成绩排名，优先按数学成绩来，如果数学成绩相同则按英语成绩来</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name,math,english </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">ORDER BY </span><br><span class="line">	math DESC, english DESC;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql19.png">

<h3 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h3><p>使用LIKE进行模糊查询，比如记不住全称，这时可以使用模糊查询，比如想查询姓马的，在查询之前要介绍占位符</p>
<ul>
<li>_：表示单个任意字符</li>
<li>%：表示多个任意字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">WHERE </span><br><span class="line">	name LIKE &#39;马%&#39;;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql20.png">

<p>如果我想查询名字中带有”德”字的</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">	name </span><br><span class="line">FROM </span><br><span class="line">	student </span><br><span class="line">WHERE </span><br><span class="line">	name LIKE &#39;%德%&#39;;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql21.png">

<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>聚合函数将一列作为整体，进行纵向计算。聚合函数有</p>
<ul>
<li>count：统计个数，不包括NULL。</li>
<li>max：计算最大值</li>
<li>min：计算最小值</li>
<li>sum：计算总和</li>
<li>avg：计算平均值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT count(math) FROM student;</span><br><span class="line">SELECT max(math) FROM student;</span><br><span class="line">SELECT min(math) FROM student;</span><br><span class="line">SELECT sum(math) FROM student;</span><br><span class="line">SELECT avg(math) FROM student;</span><br></pre></td></tr></table></figure>

<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><p>使用GROUP BY进行分组查询，比如我想男生和女生的数学平均分，那么可以使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">     sex,avg(math) avg  -- avg是别名</span><br><span class="line">FROM </span><br><span class="line">     student </span><br><span class="line">GROUP BY </span><br><span class="line">     sex;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql22.png">

<p>如果我想对分数在70以上的人计算平均分，并且统计人数，可以这么写</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">     sex,avg(math) avg, count(id) count -- avg和count是别名</span><br><span class="line">FROM </span><br><span class="line">     student </span><br><span class="line">WHERE </span><br><span class="line">     math &gt; 70 </span><br><span class="line">GROUP BY </span><br><span class="line">     sex;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql23.png">

<p>如果分组后的还要进行筛选，那么可以使用HAVING，比如这里我要筛选分组后人数大于2的才进行统计</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">       sex,avg(math) avg, count(id) count</span><br><span class="line">FROM</span><br><span class="line">     student</span><br><span class="line">WHERE</span><br><span class="line">      math &gt; 70</span><br><span class="line">GROUP BY</span><br><span class="line">         sex</span><br><span class="line">HAVING</span><br><span class="line">    count(id) &gt; 2;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql24.png">

<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p>当我们查询数据时，如果我们一页只能显示几行数据，我们就要进行分页查询，使用LIMIT，后面跟两个数，第一个数代表查询的起始位置，从0开始，第二个代表一页显示的行数，如</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">       *</span><br><span class="line">FROM</span><br><span class="line">    student</span><br><span class="line">LIMIT</span><br><span class="line">    0,3; -- 查询中0开始的3行数据</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql25.png">

<p>如果我们要查询第二页，可以怎么写</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">       *</span><br><span class="line">FROM</span><br><span class="line">    student</span><br><span class="line">LIMIT</span><br><span class="line">    3,3;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql25.png">

<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>所谓约束就是对数据产生限制，比如说某列不能为空(NULL)，有或者说某列的数据不能重复。约束一般包括下面四种约束</p>
<ul>
<li>非空约束(not null)</li>
<li>唯一约束(unique)</li>
<li>主键约束(primary key)</li>
<li>外键约束(foreign key)</li>
</ul>
<h3 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h3><p>所谓的非空约束指的就是该列不能有NULL值，下面介绍如何创建非空约束，分为两种情况，一种是在创建表示添加非空约束，一种是在创建表之后添加非空约束</p>
<ol>
<li>创建表示添加非空约束</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE emp(</span><br><span class="line">    id int,</span><br><span class="line">    name varchar(10) not null); -- 为name添加非空约束 name不能为NULL</span><br></pre></td></tr></table></figure>

<p>如果此时为name赋值为NULL，那么这条语句将会报错</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">INSERT INTO emp(id,name) VALUES (0,NULL); -- 为name赋值为NULL 将会报错</span><br></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Column</span> <span class="string">'name'</span> cannot be <span class="keyword">null</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在创建表后添加非空约束</li>
</ol>
<p>如现在给id也添加非空约束，应当这么写</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE emp MODIFY id int not null; -- 为id添加非空约束</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除非空约束</li>
</ol>
<p>删除的办法与添加的语法差不多，如现在我又要删除id的非空约束，应当这么写</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE emp MODIFY id int; -- 删除id的非空约束</span><br></pre></td></tr></table></figure>

<h3 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h3><p>唯一约束指的是该列的值不能相同，关键字为unique。</p>
<ol>
<li>创建表时如何添加唯一约束</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE emp(</span><br><span class="line">    id int UNIQUE,</span><br><span class="line">    name varchar(10)); -- 为name添加非空约束 name不能为NULL</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建表后添加唯一约束</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE emp MODIFY id int UNIQUE;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除唯一约束</li>
</ol>
<p>删除唯一约束的语法与删除非空约束的语法不同，如下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE emp DROP INDEX id;</span><br></pre></td></tr></table></figure>

<h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><p>主键约束(primary key)是上面两个的总和，即该列既不能为NULL，也不能相同。一张表只能有一个字段为主键。</p>
<ol>
<li>创建表时添加主键</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE emp(</span><br><span class="line">    id int PRIMARY KEY,</span><br><span class="line">    name varchar(10));</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建表后添加主键</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE emp MODIFY id int PRIMARY KEY;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除主键</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE emp DROP PRIMARY KEY ; -- 因为主键只有一个，不必指明是哪个字段</span><br></pre></td></tr></table></figure>

<p>下面介绍一个小知识点，主键自动增长，当我们添加数据时，如果我们设置了主键增长并且没有为主键赋值，那么主键的值会相较于上一条数据主键的值增长，设置主键自动增长的语法为(假设设置(了)id为主键)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE emp(</span><br><span class="line">    id int PRIMARY KEY AUTO_INCREMENT, -- 创建表时添加</span><br><span class="line">    name varchar(10) ); </span><br><span class="line"></span><br><span class="line">ALTER TABLE emp MODIFY id int AUTO_INCREMENT; -- 创建表后添加 id已经设置为主键了</span><br></pre></td></tr></table></figure>

<p>删除主键增长的方法为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE emp MODIFY id int; -- 这样是不会删除主键的，只会删除主键自动增长</span><br></pre></td></tr></table></figure>

<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p>假设有这么一张表</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql27.png">

<p>观察研发部门和部门地点，发现数据冗余很严重，并且在后续添加数据中添加的也是这么一对一对的，很麻烦并且有在添加数据可能会出错，所以我们可以把这张表拆成两张表，如下</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql30.png">

<p>现在问题是怎么将这两张表联系起来，答案就是外键约束。那么什么是外键，从表(被别人约束的表)中与主表(用来约束别人的表)主键对应的那一列，如：员工表中的 dep_id。</p>
<ol>
<li>新建表时增加外键</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[CONSTRAINT] [外键约束名称] FOREIGN KEY(外键字段名) REFERENCES 主表名(主键字段名)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建表后添加外键</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE 从表 ADD [CONSTRAINT] [外键约束名称] FOREIGN KEY (外键字段名) REFERENCES  主表(主</span><br><span class="line">键字段名);</span><br></pre></td></tr></table></figure>

<p>比如我在创建employee表时添加外键</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE employee(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    name VARCHAR(20),</span><br><span class="line">    age INT,</span><br><span class="line">    dep_id INT,  --  外键对应主表的主键</span><br><span class="line">    CONSTRAINT emp_depid_fk FOREIGN KEY (dep_id) REFERENCES department(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>employee表已经存在的情况下添加外键</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ALTER TABLE employee ADD CONSTRAINT emp_depid_fk FOREIGN KEY (dep_id) REFERENCES department(id);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除外键</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--  删除 employee 表的 emp_depid_fk 外键</span><br><span class="line">ALTER TABLE employee DROP FOREIGN KEY emp_depid_fk;</span><br></pre></td></tr></table></figure>

<p>这个时候又会出现新的问题，比如我改变主表中id=1为id=5，但是这时是不会成功的，因为如果改了，从表中的dep_id便没有对应的值，这个时候就需要级联操作(在修改和删除主表的主键时，同时更新或删除副表的外键值，称为级联操作)。</p>
<ul>
<li>ON UPDATE CASCADE <ul>
<li>级联更新，只能是创建表的时候创建级联关系。更新主表中的主键，从表中的外键<br>列也自动同步更新</li>
</ul>
</li>
<li>ON DELETE CASCADE<ul>
<li>级联删除</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table employee(</span><br><span class="line">    id int primary key auto_increment,</span><br><span class="line">    name varchar(20),</span><br><span class="line">    age int,</span><br><span class="line">    dep_id int,  --  外键对应主表的主键</span><br><span class="line">    --  创建外键约束</span><br><span class="line">    constraint emp_depid_fk foreign key (dep_id) references department(id) on update cascade on delete cascade</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h2><p>设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求。设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。</p>
<p>目前关系数据库有六种范式 ： 第一范式(1NF) 、第二范式(2NF) 、第三范式(3NF) 、巴斯-科德范式(BCNF) 、第四范式(4NF)和第五范式(5NF，又称完美范式) 。满足最低要求的范式是第一范式(1NF) 。在第一范式的基础上进一步满足更多规范要求的称为第二范式(2NF) ，其余范式以次类推。一般说来，数据库只需满足第三范式(3NF)就行了。</p>
<p>为了理解三大范式，我们首先来看这么一张表</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql31.png">

<p>我们首先来看第一范式的概念：数据库表的每一列都是不可分割的原子数据项。即表中的某个列有多个值时，必须拆分为不同的列。上面的那个表不满足第一范式，因为系的那一列被拆成了两列，我们将它拆分成不同的列</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql32.png">

<p>它现在满足第一范式的要求了，接下来看第二范式的概念：在1NF的基础上，非码属性必须完全依赖于码。为了理解这句话的意思，先看下面几个概念：</p>
<ol>
<li>函数依赖：A=&gt;B，如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A<ul>
<li>例如：学号=&gt;姓名。(学号，课程名称) –&gt; 分数</li>
</ul>
</li>
<li>完全函数依赖：A=&gt;B， 如果A是一个属性组，则B属性值得确定需要依赖于A属性组中所有的属性值。<ul>
<li>例如：(学号，课程名称) =&gt; 分数</li>
</ul>
</li>
<li>部分函数依赖：A=&gt;B， 如果A是一个属性组，则B属性值的确定只需要依赖于A属性组中某一些值即可。<ul>
<li>例如：(学号，课程名称) – &gt; 姓名，只依靠学号</li>
</ul>
</li>
<li>传递函数依赖：A=&gt;B, B =&gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性(属性组)的值可以确定唯一C属性的值，则称 C 传递函数依赖于A<ul>
<li>例如：学号=&gt;系名，系名=&gt;系主任</li>
</ul>
</li>
<li>码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码<ul>
<li>例如：该表中码为：(学号，课程名称)</li>
<li>主属性：码属性组中的所有属性</li>
<li>非主属性：除过码属性组的属性</li>
</ul>
</li>
</ol>
<p>其实2NF就是在1NF基础上消除非主属性对主码的部分函数依赖，上表中的码为(学号，课程名称)，只有分数完全依赖该码组，所以我们拆分表如下，</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql33.png">

<p>第三范式(3NF)：在2NF基础上，任何非主属性不依赖于其它非主属性(在2NF基础上消除传递依赖)，在学生表中存在学号=&gt; 系名 =&gt; 系主任的传递依赖，所以再次拆分表</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql34.png">

<p>三大范式小结</p>
<ul>
<li>1NF: 原子性，表中每列不可再拆分。</li>
<li>2NF: 不产生局部依赖，一张表只描述一件事情</li>
<li>3NF: 不产生传递依赖，表中每一列都直接依赖于主键。而不是通过其它列间接依赖于主键。 </li>
</ul>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>多表查询顾名思义就是同时查询多张表，假设有下面这么两张表(第一张是职员(emp)表，第二张是部门(dept)表)</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql35.png">

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql36.png">

<p>现在我们同时查询这两张表</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    emp, dept;</span><br></pre></td></tr></table></figure>

<p>我们将得到下面这么一张表</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql37.png">

<p>这张表的结果是两张表一一组合得到的，得到的结果也叫做笛卡尔积，我们可以看到很有的信息都是错误的，我们的目的就是去除这些无用的信息。</p>
<h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示。内连接分为</p>
<ul>
<li>隐式内连接<ul>
<li>使用WHERE条件指定</li>
</ul>
</li>
<li>显示内连接<ul>
<li>使用INNER JOIN … ON语句</li>
</ul>
</li>
</ul>
<p>比如现在我要在上面的笛卡尔积中筛选出emp表外键dept_id等于主表主键id的，那么分别使用隐式内连接和显式外连接的写法为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#隐式写法</span><br><span class="line">SELECT</span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    emp, dept</span><br><span class="line">WHERE</span><br><span class="line">    emp.dept_id &#x3D; dept.id;</span><br><span class="line">    </span><br><span class="line">#显式写法</span><br><span class="line">SELECT * FROM emp INNER JOIN dept ON emp.dept_id &#x3D; dept.id;</span><br></pre></td></tr></table></figure>

<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><p>为了演示外连接，在上面的部门表中新加入一个销售部</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql38.png">

<p>外连接分为</p>
<ul>
<li>左外连接</li>
<li>右外连接</li>
</ul>
<p>两者只要掌握一种即可，因为用另一种时，将二表的顺序交换即可。那什么是左外连接，就是在内连接的基础上，以左表为基准，显示左表的所有内容，如果右表没有对应的内容，那么显示为NULL，现在我们进行一次内连接查询</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM dept INNER JOIN emp e ON e.dept_id &#x3D; dept.id; # e是emp的别名</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql39.png">

<p>现在我们进行一次左外连接查询</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM dept LEFT JOIN emp e ON dept.id &#x3D; e.dept_id;</span><br></pre></td></tr></table></figure>

<p>因为左外连接查询是以左表(dept)为基准，左表的内容会全部显示出来，即销售部会被查询出来，而对应的员工表没有对应的元素，所以会显示空</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql40.png">

<p>而右外连接与左外连接相反，是以右表为基准，现在如果我们将二表的位置交换，并且使用右外连接查询，得到的结果与上面的会是相同的</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM emp e RIGHT JOIN dept d ON e.dept_id &#x3D; d.id;</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql41.png">

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>所谓的子查询是指将查询得到的结果作为另一个查询语句的条件，比如我想查出薪资最高员工的信息，那么思路如下</p>
<ul>
<li>查出最高的薪资是多少</li>
<li>匹配谁的薪资为最高薪资</li>
</ul>
<p>那么第一步查出的最高薪资就作为了第二步进行匹配的条件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM emp t1 WHERE t1.salary &#x3D; (SELECT max(salary) FROM emp);</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql42.png">

<p>子查询得到的结果有多种，例如</p>
<ul>
<li>单行单列</li>
<li>单列多行</li>
<li>多行多列的值(表)</li>
</ul>
<p>当结果是单个列的值的时候，肯定在WHERE后面作为条件，父查询使用比较运算符，如：&gt; 、&lt;、&lt;&gt;、 = 等。现在我要查询小于平均薪资的人有哪些，那么可以这么写</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM emp t1 WHERE t1.salary &lt; (SELECT avg(salary) FROM emp);</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql43.png">

<p>子查询结果是单列多行，结果集类似于一个数组，父查询使用 IN 运算符。查询工资大于5000的员工，来自于哪些部门</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    t1.name</span><br><span class="line">FROM</span><br><span class="line">     dept t1</span><br><span class="line">WHERE</span><br><span class="line">    t1.id IN (SELECT emp.dept_id FROM emp WHERE emp.salary &gt; 5000);</span><br></pre></td></tr></table></figure>

<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql44.png">

<p>子查询结果只要是多列，肯定在FROM后面作为表</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT 查询字段 FROM （子查询）表别名 WHERE 条件;</span><br></pre></td></tr></table></figure>

<p>子查询作为表需要取别名，否则这张表没有名称则无法访问表中的字段。查询出2011年以后入职的员工信息，包括部门名称 </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    *</span><br><span class="line">FROM</span><br><span class="line">    (SELECT * FROM db1.emp t1 WHERE t1.join_date &gt; &quot;2011-1-1&quot;) t3, dept d</span><br><span class="line">WHERE</span><br><span class="line">    d.id &#x3D; t3.dept_id;</span><br></pre></td></tr></table></figure>

<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>所谓事务是指一系列的操作，这些操作要么同时成功，要么同时失败。比如转账，不能我这里转账成功，你那么收不到钱，那么钱就这么消失了? 如果事务执行成功了，那么就提交，如果有一条失败了，那么就需要进行回滚(即回到之前的状态)。与事务有关的三条语句为</p>
<ul>
<li>start transaction<ul>
<li>开启事务</li>
</ul>
</li>
<li>commit<ul>
<li>提交事务</li>
<li>可手动提交，也可设置为自动提交</li>
</ul>
</li>
<li>roll back<ul>
<li>回滚事务</li>
<li>当事务执行失败时自动自动，也可手动执行</li>
</ul>
</li>
</ul>
<p>假设有这么一张表，里面存储的是用户名和余额信息</p>
<img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://raw.githubusercontent.com/LastKnightCoder/img/master/mysql45.png">

<p>现在张三要向李四转账500块，如下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 张三账号-500 </span><br><span class="line">update account set balance &#x3D; balance - 500 where name&#x3D;&#39;张三&#39;; </span><br><span class="line">-- 李四账号+500 </span><br><span class="line">update account set balance &#x3D; balance + 500 where name&#x3D;&#39;李四&#39;;</span><br></pre></td></tr></table></figure>

<p>如果我们不开启事务的话，那么当张三转了500块时，这时服务器崩溃了，李四没有收到钱，但是钱还是少了，这种情况是不能发生的，我们应当开启一个事务，这两个操作要么同时成功，要么同时失败。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">START TRANSACTION; -- 开启一个事务</span><br><span class="line"></span><br><span class="line">-- 张三账号-500</span><br><span class="line">update account set balance &#x3D; balance - 500 where name&#x3D;&#39;张三&#39;;</span><br><span class="line">-- 李四账号+500</span><br><span class="line">update account set balance &#x3D; balance + 500 where name&#x3D;&#39;李四&#39;;</span><br><span class="line"></span><br><span class="line">COMMIT; -- 提交事务</span><br></pre></td></tr></table></figure>

<p>开启事务后，所有的操作都在临时日志文件中，commit操作是将临时日志中的内容写到数据库的存储引擎中，所以在提交事务之前，是不会对数据库中的内容进行修改的。而rollback则是清空临时日志文件，之前没有进行提交的内容全部清除。</p>
<p>事务的步骤可以简述为下面几步</p>
<ul>
<li>客户端连接数据库服务器，创建连接时创建此用户临时日志文件 </li>
<li>开启事务以后，所有的操作都会先写入到临时日志文件中 </li>
<li>所有的查询操作从表中查询，但会经过日志文件加工后才返回 </li>
<li>如果事务提交则将日志文件中的数据写到表中，否则清空日志文件</li>
</ul>
<p>事务的提交分为自动提交和手动提交，在MySQL命令行的默认设置下，事务都是自动提交的，即执行SQL语句后就会马上执行COMMIT操作。因此要显式地开启一个事务务须使用命令BEGIN或START TRANSACTION，或者执行命令SET AUTOCOMMIT=0，用来禁止使用当前会话的自动提交。</p>
<ul>
<li><strong>SET AUTOCOMMIT=0</strong> <ul>
<li>禁止自动提交</li>
</ul>
</li>
<li><strong>SET AUTOCOMMIT=1</strong> <ul>
<li>开启自动提交</li>
</ul>
</li>
</ul>
<h3 id="事务的特性"><a href="#事务的特性" class="headerlink" title="事务的特性"></a>事务的特性</h3><p>事务的四大特性ACID</p>
<ul>
<li>原子性(Atomicity)<ul>
<li>每个事务都是一个整体，不可再拆分，事务中所有的SQL语句要么都执行成功， 要么都失败。</li>
</ul>
</li>
<li>一致性(Consistency)<ul>
<li>事务在执行前数据库的状态与执行后数据库的状态保持一致。如：转账前2个人的 总金额是 2000，转账后 2 个人总金额也是 2000 </li>
</ul>
</li>
<li>隔离性(Isolation)<ul>
<li>事务与事务之间不应该相互影响，执行时保持隔离的状态。 </li>
</ul>
</li>
<li>持久性(Durability)<ul>
<li>一旦事务执行成功，对数据库的修改是持久的。就算关机，也是保存下来的。 </li>
</ul>
</li>
</ul>
<p>这篇文章<a href="https://zhuanlan.zhihu.com/p/60723043" target="_blank" rel="noopener">MySQL事务：ACID特性的实现原理总结分析</a>详细讲解了MySQL的事务，所以在这里我不多做介绍，因为讲的没人家好。</p>
<h3 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h3><p>事务在操作时的理想状态是所有的事务之间保持隔离，互不影响。但是因为并发操作，多个用户同时访问同一个数据时，可能引发并发访问的问题，如</p>
<ul>
<li>脏读 <ul>
<li>一个事务读取到了另一个事务中尚未提交的数据</li>
<li>比如李四向张三转了500块，但是没有提交，这时张三读取数据，发现已经到账500块，跟李四说到账了，这时李四进行roll back</li>
</ul>
</li>
<li>不可重复读 <ul>
<li>一个事务中两次读取的数据内容不一致，要求的是一个事务中多次读取时数据是一致的，这是事务update时引发的问题</li>
<li>两次查询输出的结果不同，到底哪次是对的? 不知道以哪次为准。 有的时候这不是一个问题，当然是后面的为准。但是我们可以考虑这样一种情况，比如银行程序需要将查询结果分别输出到电脑屏幕和发短信给客 户，结果在一个事务中针对不同的输出目的地进行的两次查询不一致，导致文件和屏幕中的结果不一致，银行工作 人员就不知道以哪个为准了。 </li>
<li>脏读与不可重复读的区别在于：前者读到的是其他事务未提交的数据，后者读到的是其他事务已提交的数据</li>
</ul>
</li>
<li>幻读<ul>
<li>一个事务中两次读取的数据的数量不一致，要求在一个事务多次读取的数据的数量是一致的，这是insert或delete时引发的问题</li>
<li>幻读是事务非独立执行时发生的一种现象。例如事务T1对一个表中所有的行的某个数据项做了从 “1” 修改为 “2” 的操作，这时事务T2又对这个表中插入了一行数据项，而这个数据项的数值还是为 “1” 并且提交给数据库。而操作事务T1的用户如果再查看刚刚修改的数据，会发现还有一行没有修改，其实这行是从事务T2中添加的，就好像产生幻觉一样，这就是发生了幻读。</li>
<li>幻读和不可重复读都是读取了另一条已经提交的事务(这点就脏读不同)，所不同的是不可重复读查询的都是同一个数据项，而幻读针对的是一批数据整体(比如数据的个数)。</li>
</ul>
</li>
</ul>
<p>MySQL数据库有四种隔离级别 </p>
<ul>
<li>read uncommitted<ul>
<li>上面三种问题都有可能发生</li>
</ul>
</li>
<li>read committed<ul>
<li>不可能发生脏读，因为只有读到已提交的数据</li>
</ul>
</li>
<li>repeatable read<ul>
<li>可能发生幻读</li>
<li>这时MySQL的默认隔离级别</li>
</ul>
</li>
<li>serializable<ul>
<li>所有的问题都不会发生</li>
</ul>
</li>
</ul>
<p>上面的级别最低，下面的级别最高，隔离级别越高，性能越差，安全性越高。在MySQL数据库中设置事务的隔离级别</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set [glogal | session] transaction isolation level 隔离级别名称;</span><br><span class="line">set tx_isolation&#x3D;&#39;隔离级别名称&#39;;</span><br></pre></td></tr></table></figure>

<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><p>我们现在默认使用的都是root用户：超级管理员，拥有全部的权限。但是一个公司里面的数据库服务器上面可能同时运行着很多个项目的数据库。所以我们应该可以根据不同的项目建立不同的用户，分配不同的权限来管理和维护数据库。</p>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED BY &#39;密码&#39;;</span><br></pre></td></tr></table></figure>

<ul>
<li>‘用户名’ <ul>
<li>将创建的用户名 </li>
</ul>
</li>
<li>‘主机名’ <ul>
<li>指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以 从任意远程主机登陆，可以使用通配符% </li>
</ul>
</li>
<li>该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器 </li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#创建 user1 用户，只能在 localhost 这个服务器登录 mysql 服务器，密码为 123 </span><br><span class="line">create user &#39;user1&#39;@&#39;localhost&#39; identified by &#39;123&#39;; </span><br><span class="line">#创建 user2 用户可以在任何电脑上登录 mysql 服务器，密码为 123 </span><br><span class="line">create user &#39;user2&#39;@&#39;%&#39; identified by &#39;123&#39;;</span><br></pre></td></tr></table></figure>

<p>创建的用户名都在mysql数据库中的user表中可以查看到，密码经过了加密。 </p>
<h3 id="授予权限"><a href="#授予权限" class="headerlink" title="授予权限"></a>授予权限</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GRANT 权限 1, 权限 2... ON 数据库名.表名 TO &#39;用户名&#39;@&#39;主机名&#39;;</span><br></pre></td></tr></table></figure>

<ul>
<li>GRANT…ON…TO <ul>
<li>授权关键字 </li>
</ul>
</li>
<li>权限<ul>
<li>授予用户的权限，如 CREATE、ALTER、SELECT、INSERT、UPDATE 等。如果要授 予所有的权限则使用 ALL </li>
</ul>
</li>
<li>数据库名.表名 <ul>
<li>该用户可以操作哪个数据库的哪些表。如果要授予该用户对所有数据库和表的相应操作 权限则可用*表示，如*.* </li>
</ul>
</li>
<li>‘用户名‘@’主机名’ <ul>
<li>给哪个用户授权</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#给 user1 用户分配对 test 这个数据库操作的权限：创建表，修改表，插入记录，更新记录，查询 </span><br><span class="line">grant create,alter,insert,update,select on test.* to &#39;user1&#39;@&#39;localhost&#39;; </span><br><span class="line"> </span><br><span class="line">#给 user2 用户分配所有权限，对所有数据库的所有表  </span><br><span class="line">grant all on *.* to &#39;user2&#39;@&#39;%&#39;;</span><br></pre></td></tr></table></figure>

<h3 id="撤销权限"><a href="#撤销权限" class="headerlink" title="撤销权限"></a>撤销权限</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">REVOKE  权限 1, 权限 2... ON 数据库.表名 from &#39;用户名&#39;@&#39;主机名&#39;;</span><br></pre></td></tr></table></figure>

<ul>
<li>REVOKE…ON…FROM <ul>
<li>撤销授权的关键字 </li>
</ul>
</li>
<li>权限 <ul>
<li>用户的权限，如 CREATE、ALTER、SELECT、INSERT、UPDATE 等，所有的权限则使用 ALL </li>
</ul>
</li>
<li>数据库名.表名 <ul>
<li>对哪些数据库的哪些表，如果要取消该用户对所有数据库和表的操作权限则可用*表 示，如*.* </li>
</ul>
</li>
<li>‘用户名‘@’主机名’ <ul>
<li>给哪个用户撤销  </li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#撤销 user1 用户对 test 数据库所有表的操作的权限 </span><br><span class="line">revoke all on test.* from &#39;user1&#39;@&#39;localhost&#39;;</span><br></pre></td></tr></table></figure>

<h3 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW GRANTS FOR &#39;用户名&#39;@&#39;主机名&#39;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SHOW GRANTS FOR &#39;root&#39;@&#39;localhost&#39;;</span><br></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DROP USER &#39;用户名&#39;@&#39;主机名&#39;;</span><br></pre></td></tr></table></figure>

<h3 id="修改管理员密码"><a href="#修改管理员密码" class="headerlink" title="修改管理员密码"></a>修改管理员密码</h3><p>如果忘了原来的管理员密码</p>
<ol>
<li>cmd – &gt; net stop mysql 停止mysql服务<ul>
<li>需要管理员运行该cmd</li>
</ul>
</li>
<li>使用无验证方式启动mysql服务：mysqld –skip-grant-tables</li>
<li>打开新的cmd窗口,直接输入mysql命令，敲回车。就可以登录成功</li>
<li>use mysql;</li>
<li>update user set password = password(‘你的新密码’) where user = ‘root’;</li>
<li>关闭两个窗口</li>
<li>打开任务管理器，手动结束mysqld.exe 的进程</li>
<li>启动mysql服务</li>
<li>使用新密码登录。</li>
</ol>
<p>如果记得原来的密码</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysqladmin -uroot -p password 新密码 #需要在未登陆 MySQL 的情况下操作，新密码不需要加上引号。</span><br></pre></td></tr></table></figure>

<h3 id="修改普通用户密码"><a href="#修改普通用户密码" class="headerlink" title="修改普通用户密码"></a>修改普通用户密码</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set password for &#39;用户名&#39;@&#39;主机名&#39; &#x3D; password(&#39;新密码&#39;);</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.cnblogs.com/whu-2017/p/9293083.html" target="_blank" rel="noopener">数据库隔离级别，每个级别会引发什么问题</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/60723043" target="_blank" rel="noopener">MySQL事务：ACID特性的实现原理总结分析</a></li>
<li><a href="https://www.cnblogs.com/bypp/p/8618382.html" target="_blank" rel="noopener">MySQL数据查询之多表查询</a></li>
<li><a href="https://blog.csdn.net/ch717828/article/details/41357431" target="_blank" rel="noopener">MySQL插入中文错误</a></li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">熊滔</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lastknightcoder.gitee.io" target="_blank">Coder</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="https://lastknightcoder.gitee.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><a class="post-meta__tags" href="https://lastknightcoder.gitee.io/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/lastknightcoder/blogimage/raw/master/img/bg65.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="https://lastknightcoder.gitee.io/img/wechatpay.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="https://lastknightcoder.gitee.io/img/alipay.png" alt="支付宝"/><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="https://lastknightcoder.gitee.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84--Java%E6%8F%8F%E8%BF%B0/"><img class="prev_cover" data-src="https://gitee.com/lastknightcoder/blogimage/raw/master/img/bg72.png" onerror="onerror=null;src='https://lastknightcoder.gitee.io/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">数据结构--Java语言描述</div></div></a></div><div class="next-post pull_right"><a href="https://lastknightcoder.gitee.io/%E7%9F%A9%E9%98%B5%E7%AD%89%E4%BB%B7%E4%B8%8E%E5%90%91%E9%87%8F%E7%BB%84%E7%AD%89%E4%BB%B7/"><img class="next_cover" data-src="https://gitee.com/lastknightcoder/blogimage/raw/master/img/bg55.jpg" onerror="onerror=null;src='https://lastknightcoder.gitee.io/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">矩阵等价与向量组等价</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="https://lastknightcoder.gitee.io//JDBC/" title="JDBC"><img class="relatedPosts_cover" data-src="https://gitee.com/lastknightcoder/blogimage/raw/master/img/bg71.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-08-15</div><div class="relatedPosts_title">JDBC</div></div></a></div></div><div class="clear_both"></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By 熊滔</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode far fa-moon" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://lastknightcoder.gitee.io/js/utils.js"></script><script src="https://lastknightcoder.gitee.io/js/main.js"></script><script src="https://lastknightcoder.gitee.io/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="https://lastknightcoder.gitee.io/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="https://lastknightcoder.gitee.io/js/search/local-search.js"></script><script>if (document.getElementsByClassName('mermaid').length) {
  loadScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js',function () {
    mermaid.initialize({
      theme: 'default',
  })
})
}</script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script></body></html>