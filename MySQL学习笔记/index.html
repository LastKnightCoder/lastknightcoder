<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>MySQL学习笔记 | Coder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Java,数据库,MySQL">
    <meta name="description" content="MySQL数据库入门">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习笔记">
<meta property="og:url" content="https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
<meta property="og:site_name" content="Coder">
<meta property="og:description" content="MySQL数据库入门">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203163117.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203163637.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203163828.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164212.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164242.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164316.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164546.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164700.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164805.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164847.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165223.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165334.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165334.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165503.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165700.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165802.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170207.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170258.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170333.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170405.png">
<meta property="og:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170436.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203171638.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203171733.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203172109.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203172158.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203172238.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203173134.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203173213.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203173238.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220153.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220352.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220446.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220738.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220840.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221449.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221704.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221735.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221806.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221833.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222043.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222108.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222137.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222157.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222234.png">
<meta property="article:published_time" content="2019-09-13T16:00:00.000Z">
<meta property="article:modified_time" content="2019-09-13T16:00:00.000Z">
<meta property="article:author" content="熊滔">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203163117.png">
    
        <link rel="alternate" type="application/atom+xml" title="Coder" href="https://lastknightcoder.gitee.io/atom.xml">
    
    <link rel="shortcut icon" href="https://lastknightcoder.gitee.io/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(https://lastknightcoder.gitee.io/img/brand.jpg)">
      <div class="brand">
        <a href="https://lastknightcoder.gitee.io/" class="avatar waves-effect waves-circle waves-light">
          <img src="https://lastknightcoder.gitee.io/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">熊滔</h5>
          <a href="mailto:2223106858@qq.com" title="2223106858@qq.com" class="mail">2223106858@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="https://lastknightcoder.gitee.io/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://lastknightcoder.gitee.io/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://lastknightcoder.gitee.io/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://lastknightcoder.gitee.io/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://gitee.com/LastKnightCoder" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">MySQL学习笔记</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">MySQL学习笔记</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-09-13T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2019-09-14
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://lastknightcoder.gitee.io/categories/MySQL/">MySQL</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#MySQL基本概念"><span class="post-toc-number">1.</span> <span class="post-toc-text">MySQL基本概念</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#连接MySQL"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">连接MySQL</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SQL语句分类"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">SQL语句分类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#注释"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">注释</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DDL"><span class="post-toc-number">2.</span> <span class="post-toc-text">DDL</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#操作数据库"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">操作数据库</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#查询"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">查询</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#创建"><span class="post-toc-number">2.1.2.</span> <span class="post-toc-text">创建</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#修改"><span class="post-toc-number">2.1.3.</span> <span class="post-toc-text">修改</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#删除"><span class="post-toc-number">2.1.4.</span> <span class="post-toc-text">删除</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用数据库"><span class="post-toc-number">2.1.5.</span> <span class="post-toc-text">使用数据库</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#操作表"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">操作表</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#查询-1"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">查询</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#创建-1"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">创建</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#删除-1"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">删除</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#修改-1"><span class="post-toc-number">2.2.4.</span> <span class="post-toc-text">修改</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DML"><span class="post-toc-number">3.</span> <span class="post-toc-text">DML</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#添加数据"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">添加数据</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#删除数据"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">删除数据</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#更新数据"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">更新数据</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DQL"><span class="post-toc-number">4.</span> <span class="post-toc-text">DQL</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#基础查询"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">基础查询</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#查询多个字段"><span class="post-toc-number">4.1.1.</span> <span class="post-toc-text">查询多个字段</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#去重"><span class="post-toc-number">4.1.2.</span> <span class="post-toc-text">去重</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#计算列"><span class="post-toc-number">4.1.3.</span> <span class="post-toc-text">计算列</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#起别名"><span class="post-toc-number">4.1.4.</span> <span class="post-toc-text">起别名</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#条件查询"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">条件查询</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#排序查询"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">排序查询</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#模糊查询"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">模糊查询</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#聚合函数"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">聚合函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#分组查询"><span class="post-toc-number">4.6.</span> <span class="post-toc-text">分组查询</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#分页查询"><span class="post-toc-number">4.7.</span> <span class="post-toc-text">分页查询</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#约束"><span class="post-toc-number">5.</span> <span class="post-toc-text">约束</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#非空约束"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">非空约束</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#唯一约束"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">唯一约束</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#主键约束"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">主键约束</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#外键约束"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">外键约束</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#三大范式"><span class="post-toc-number">6.</span> <span class="post-toc-text">三大范式</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#多表查询"><span class="post-toc-number">7.</span> <span class="post-toc-text">多表查询</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#内连接"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">内连接</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#外连接"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">外连接</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#子查询"><span class="post-toc-number">7.3.</span> <span class="post-toc-text">子查询</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#事务"><span class="post-toc-number">8.</span> <span class="post-toc-text">事务</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#事务的特性"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">事务的特性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#事务的隔离级别"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">事务的隔离级别</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#权限管理"><span class="post-toc-number">9.</span> <span class="post-toc-text">权限管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建用户"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">创建用户</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#授予权限"><span class="post-toc-number">9.2.</span> <span class="post-toc-text">授予权限</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#撤销权限"><span class="post-toc-number">9.3.</span> <span class="post-toc-text">撤销权限</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#查看权限"><span class="post-toc-number">9.4.</span> <span class="post-toc-text">查看权限</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#删除用户"><span class="post-toc-number">9.5.</span> <span class="post-toc-text">删除用户</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#修改管理员密码"><span class="post-toc-number">9.6.</span> <span class="post-toc-text">修改管理员密码</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#修改普通用户密码"><span class="post-toc-number">9.7.</span> <span class="post-toc-text">修改普通用户密码</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考链接"><span class="post-toc-number">10.</span> <span class="post-toc-text">参考链接</span></a></li></ol>
        </nav>
    </aside>


<article id="post-MySQL学习笔记"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">MySQL学习笔记</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-09-14 00:00:00" datetime="2019-09-13T16:00:00.000Z"  itemprop="datePublished">2019-09-14</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="https://lastknightcoder.gitee.io/categories/MySQL/">MySQL</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>这篇文章是记录我学习 <code>MySQL</code> 时的一些笔记，不成体系，仅为以后快速学习准备，由于记录的是从零学习 <code>MySQL</code> 的笔记，所以笔记的内容是十分的基础的，基本上是以用为主，不牵涉到具体的原理性问题。</p>
<h2 id="MySQL基本概念"><a href="#MySQL基本概念" class="headerlink" title="MySQL基本概念"></a>MySQL基本概念</h2><p>我们使用Java编写程序，一般数据都是存储在内存中的，一旦程序终止或断电，那么数据就会丢失，所以我们需要将数据存储到本地文件中，我们一般存储到数据库中，而 <code>MySQL</code> 正是这么一款数据库。</p>
<p>安装 <code>MySQL</code> 很简单，直接使用搜索引擎搜索 <code>MySQL</code>，进入官网进行安装，<code>MySQL</code> 是开源的软件。目前企业使用的是5.5-5.7的版本，选择进行下载即可。若要卸载 <code>MySQL</code>，在手动卸载 <code>MySQL</code> 后，还要删除 <code>C:\ProgramData\MySQL</code> 这个文件夹，否则重新安装时不能成功。</p>
<h3 id="连接MySQL"><a href="#连接MySQL" class="headerlink" title="连接MySQL"></a>连接MySQL</h3><p>在命令行中输入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure>

<p>然后会提示你输入密码</p>
<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203163117.png" width="40%"/>

<p>输入的密码以密文的形式显示，以保证安全。当然你也可以直接在 <code>-p</code> 后面输入密码，不过这样并不安全。</p>
<h3 id="SQL语句分类"><a href="#SQL语句分类" class="headerlink" title="SQL语句分类"></a>SQL语句分类</h3><p><code>SQL</code> 语句按功能分为</p>
<ul>
<li><code>DDL</code>：操作数据库，表</li>
<li><code>DML</code>：增、删、改数据</li>
<li><code>DQL</code>：查询数据</li>
<li><code>DLL</code>：与授权有关</li>
</ul>
<p>在 <code>MySQL</code> 中不区分大小写，不过关键字一般会大写，而数据库名和表名一般小写，<code>SQL</code>语句需要以<code>;</code>结尾，否则会一直等待输入。</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p><code>MySQL</code> 的注释为 <code>--</code> 后面需要接一个空格，否则会报错，另一种注释为 <code>#</code>，这是 <code>MySQL</code> 独有的，后面不需要加空格</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>; <span class="comment">-- 显示所有的数据库</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>; <span class="comment">#显示所有的数据库</span></span><br></pre></td></tr></table></figure>

<h2 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h2><p>这里来介绍操作数据库和表的 <code>SQL</code> 语句，这些操作一般就是 <code>C(Create), R(Retrieve), U(Update), D(Delete)</code>。</p>
<h3 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h3><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>首先介绍查询数据库的语句，连接上 <code>MySQL</code> 后，在命令行中输入(这里关键字没有大写)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br></pre></td></tr></table></figure>

<p>这个语句的作用是显示出所有的数据库</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sakila             |</span><br><span class="line">| sys                |</span><br><span class="line">| world              |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.31 sec)</span><br></pre></td></tr></table></figure>

<p>下面这条语句的作用是显示出某数据库所用的字符集</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">database</span> 数据库名;</span><br></pre></td></tr></table></figure>

<p>比如</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">database</span> world;</span><br></pre></td></tr></table></figure>

<p>输出为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">+<span class="comment">----------+------------------------------------------------------------------+</span></span><br><span class="line">| Database | <span class="keyword">Create</span> <span class="keyword">Database</span>                                                  |</span><br><span class="line">+<span class="comment">----------+------------------------------------------------------------------+</span></span><br><span class="line">| world    | <span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="string">`world`</span> <span class="comment">/*!40100 DEFAULT CHARACTER SET latin1 */</span> |</span><br><span class="line">+<span class="comment">----------+------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.05</span> sec)</span><br></pre></td></tr></table></figure>

<p>可见 <code>world</code> 数据库所用的字符集为 <code>latin1</code>。</p>
<h4 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h4><p>创建数据库的语句为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> 数据库名;</span><br></pre></td></tr></table></figure>

<p>如</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> db1; <span class="comment">-- 创建一个名为db1的数据库</span></span><br></pre></td></tr></table></figure>

<p>如果数据库已经存在，那么会发生错误，例如再次执行上面的命令 <code>create database db1;</code> 会发生如下错误</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ERROR 1007 (HY000): Can't <span class="keyword">create</span> <span class="keyword">database</span> <span class="string">'db1'</span>; database exists</span><br></pre></td></tr></table></figure>

<p>这个时候我们可以使用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> db1; <span class="comment">-- 如果db1不存在，那么创建db1，否则什么也不做</span></span><br></pre></td></tr></table></figure>

<p>我们还可以在创建数据库时指定字符集，如</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> db2 <span class="built_in">character</span> <span class="keyword">set</span> gbk;</span><br></pre></td></tr></table></figure>

<p>使用 <code>show create database db2;</code> 查看字符集</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">+<span class="comment">----------+-------------------------------------------------------------+</span></span><br><span class="line">| Database | <span class="keyword">Create</span> <span class="keyword">Database</span>                                             |</span><br><span class="line">+<span class="comment">----------+-------------------------------------------------------------+</span></span><br><span class="line">| db2      | <span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="string">`db2`</span> <span class="comment">/*!40100 DEFAULT CHARACTER SET gbk */</span> |</span><br><span class="line">+<span class="comment">----------+-------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><p>我们可以通过下面的命令修改数据库的字符集</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> 数据库名 <span class="built_in">character</span> <span class="keyword">set</span> 字符集;</span><br></pre></td></tr></table></figure>

<p>例如修改 <code>db2</code> 数据库为 <code>utf8</code> 编码</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> db2 <span class="built_in">character</span> <span class="keyword">set</span> utf8;</span><br></pre></td></tr></table></figure>

<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p>我们可以使用 <code>drop</code> 命令删除数据库，例如</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> db2;</span><br></pre></td></tr></table></figure>

<p>使用 <code>show databases;</code> 查看数据库，发现 <code>db2</code> 已经被删除了</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| Database           |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| information_schema |</span><br><span class="line">| db1                |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sakila             |</span><br><span class="line">| sys                |</span><br><span class="line">| world              |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br></pre></td></tr></table></figure>

<p>如果数据库不存在，那么会报错，比如在删除一次 <code>db2</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ERROR 1008 (HY000): Can't <span class="keyword">drop</span> <span class="keyword">database</span> <span class="string">'db2'</span>; database doesn't exist</span><br></pre></td></tr></table></figure>

<p>这个时候我们可以使用下面的语句</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">exists</span> db2; <span class="comment">-- 如果db2存在则删除db2，否则什么也不做</span></span><br></pre></td></tr></table></figure>

<h4 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h4><p>通过 <code>select database();</code> 命令可以查看我们正在使用哪一个数据库</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| database() |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| NULL       |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>因为我们没有使用数据库，所以这里显示的是 <code>NULL</code>，可以通过 <code>use 数据库名;</code>来使用数据库，比如使用 <code>db1</code> 数据库</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> db1;</span><br></pre></td></tr></table></figure>

<p>再次执行 <code>select database();</code> 输出为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| database() |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| db1        |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="操作表"><a href="#操作表" class="headerlink" title="操作表"></a>操作表</h3><h4 id="查询-1"><a href="#查询-1" class="headerlink" title="查询"></a>查询</h4><p>可以使用 <code>show tables</code> 查询某数据库中所有的表，例如现在我们使用 <code>world</code> 数据库，然后查询其中所有的表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> world;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br></pre></td></tr></table></figure>

<p>结果为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| Tables_in_world |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">| city            |</span><br><span class="line">| country         |</span><br><span class="line">| countrylanguage |</span><br><span class="line">+<span class="comment">-----------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.09</span> sec)</span><br></pre></td></tr></table></figure>

<p>我们还可以使用 <code>desc 表名;</code> 来查询某表的结构，我们来查询 <code>city</code> 表的结构</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">desc city;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">+<span class="comment">-------------+----------+------+-----+---------+----------------+</span></span><br><span class="line">| Field       | Type     | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">-------------+----------+------+-----+---------+----------------+</span></span><br><span class="line">| ID          | int(11)  | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| Name        | char(35) | NO   |     |         |                |</span><br><span class="line">| CountryCode | char(3)  | NO   | MUL |         |                |</span><br><span class="line">| District    | char(20) | NO   |     |         |                |</span><br><span class="line">| Population  | int(11)  | NO   |     | 0       |                |</span><br><span class="line">+<span class="comment">-------------+----------+------+-----+---------+----------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.65</span> sec)</span><br></pre></td></tr></table></figure>

<p>使用 <code>show create table 表名;</code> 查看表的字符集。</p>
<h4 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h4><p>创建表的语法为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(列名<span class="number">1</span> 数据类型<span class="number">1</span>, ..., 列名n 数据类型n);</span><br></pre></td></tr></table></figure>

<p>MySQL 中常用的数据类型有</p>
<ul>
<li><code>int</code><ul>
<li>整数类型</li>
</ul>
</li>
<li><code>double</code><ul>
<li>浮点数类型，接收两个参数，如 <code>double(5,2)</code>，5 代表数字的总长度，2 代表小数点后的位数</li>
</ul>
</li>
<li><code>date</code><ul>
<li>日期类型，格式为 <code>yy-MM-dd</code></li>
</ul>
</li>
<li><code>datetime</code><ul>
<li>日期类型，格式为<code>yy-MM-dd HH:mm:ss</code></li>
</ul>
</li>
<li><code>timestamp</code><ul>
<li>时间戳，格式为<code>yy-MM-dd HH:mm:ss</code>，当不赋值或赋值为NULL时，自动使用当前的时间作为值</li>
</ul>
</li>
<li><code>varchar</code><ul>
<li>字符串类型，接收一个参数表示字符串的最大长度，如 <code>varchar(20)</code></li>
</ul>
</li>
</ul>
<p>现在我们在 db1 中创建一个 student 表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> db1; <span class="comment">-- 使用数据库db1</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(<span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>), age <span class="built_in">int</span>, score <span class="keyword">double</span>(<span class="number">4</span>,<span class="number">1</span>), insert_time <span class="built_in">timestamp</span>); <span class="comment">-- 创建表student 里面包括name age score insert_time 等列</span></span><br><span class="line">desc student; <span class="comment">-- 查看student表的结构</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">+<span class="comment">-------------+-------------+------+-----+-------------------+-----------------------------+</span></span><br><span class="line">| Field       | Type        | Null | Key | Default           | Extra                       |</span><br><span class="line">+<span class="comment">-------------+-------------+------+-----+-------------------+-----------------------------+</span></span><br><span class="line">| name        | varchar(10) | YES  |     | NULL              |                             |</span><br><span class="line">| age         | int(11)     | YES  |     | NULL              |                             |</span><br><span class="line">| score       | double(4,1) | YES  |     | NULL              |                             |</span><br><span class="line">| insert_time | timestamp   | NO   |     | CURRENT_TIMESTAMP | on <span class="keyword">update</span> <span class="keyword">CURRENT_TIMESTAMP</span> |</span><br><span class="line">+<span class="comment">-------------+-------------+------+-----+-------------------+-----------------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.07</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h4><p>同删除数据库一样，有两种用法</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> 表名;</span><br></pre></td></tr></table></figure>

<p>这里不多做解释。</p>
<h4 id="修改-1"><a href="#修改-1" class="headerlink" title="修改"></a>修改</h4><ul>
<li>重命名表名</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">rename</span> <span class="keyword">to</span> 新表名;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改表的字符集</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="built_in">character</span> <span class="keyword">set</span> 字符集;</span><br></pre></td></tr></table></figure>

<ul>
<li>添加一列</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 列名 数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改列名及其类型</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">change</span> 列名 新列名 新数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改列的数据类型</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">modify</span> 列名 新数据类型;</span><br></pre></td></tr></table></figure>

<ul>
<li>删除列</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> 列名;</span><br></pre></td></tr></table></figure>

<h2 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h2><p><code>DML</code> 是与修改数据有关的 <code>sql</code> 语句。修改数据主要包括的是增删改数据。为了查看修改数据的效果，这里介绍一个查询数据的命令</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>

<p>现在创建一个 <code>student</code> 的表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student (</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>), <span class="comment">-- 名字长度最大10个字符</span></span><br><span class="line">    age <span class="built_in">int</span>, <span class="comment">-- 年龄</span></span><br><span class="line">    math_score <span class="keyword">double</span>(<span class="number">3</span>,<span class="number">1</span>), <span class="comment">-- 数学成绩</span></span><br><span class="line">    english_score <span class="keyword">double</span>(<span class="number">3</span>,<span class="number">1</span>), <span class="comment">-- 英语成绩</span></span><br><span class="line">    insert_time <span class="built_in">timestamp</span>  <span class="comment">-- 数据加入的时间</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DESC student; <span class="comment">-- 查看表的结构</span></span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203163637.png"/>

<h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><p>向表中添加数据的写法为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(列名<span class="number">1</span>, 列名<span class="number">2</span>, ..., 列名n) <span class="keyword">values</span>(值<span class="number">1</span>, 值<span class="number">2</span>, ..., 值n); <span class="comment">-- 列名和值要一一对应</span></span><br></pre></td></tr></table></figure>

<p>例如向表中添加数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student (<span class="keyword">name</span>, age, math_score, english_score) <span class="keyword">VALUES</span> (<span class="string">'dilireba'</span>, <span class="number">27</span>, <span class="number">60</span>, <span class="number">70</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student (<span class="keyword">name</span>, age, math_score, english_score) <span class="keyword">VALUES</span> (<span class="string">'gulinazha'</span>, <span class="number">28</span>, <span class="number">62</span>, <span class="number">68</span>);</span><br></pre></td></tr></table></figure>

<p>使用 <code>SELECT * FROM student;</code> 得到数据为</p>
<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203163828.png"/>

<p>注意：</p>
<ul>
<li>列名和值名要一一对应</li>
<li>如果表名后不定义列名，则默认为给所有列添加，如<ul>
<li><code>INSERT INTO student VALUES (&#39;dilireba&#39;, 27, 60, 70);</code></li>
</ul>
</li>
<li>除了数字类型，其他类型要用引号(<code>&#39;</code>)括起来</li>
</ul>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p>删除数据的格式为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 [<span class="keyword">where</span> 条件]; <span class="comment">-- 删除满足条件的行</span></span><br></pre></td></tr></table></figure>

<p>其中 <code>[]</code> 代表的是里面的内容可省略，如果不加条件的话，默认为删除表中的所有数据，现在我们删除上例中 <code>age &gt; 27</code> 的行，如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age &gt; <span class="number">27</span>;</span><br></pre></td></tr></table></figure>

<p>得到的结果为</p>
<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164212.png"/>

<p>如果要删除表中的所有数据的话，不推荐使用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>

<p>因为它会将表中的数据一行一行的删除，效率较慢，推荐使用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>

<p>它会直接删除这个表，然后创建一个空表，这个表的名字和结构与删除的表相同，从效果上就相当于是删除了表中所有的数据，但是它的效率比 <code>delete from 表名;</code> 快。</p>
<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><p>更新数据的语法为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列名<span class="number">1</span> = 值<span class="number">1</span>, ..., 列名n = 值n [<span class="keyword">where</span> 条件]; <span class="comment">-- 当符合条件时，更新值</span></span><br></pre></td></tr></table></figure>

<p>如何省略条件，那么会修改所有的行，如现在我要更新，如何符合条件 <code>age = 27</code>，那么将 <code>age</code> 修改为 <code>28</code>，如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">set</span> age = <span class="number">28</span> <span class="keyword">WHERE</span> age = <span class="number">27</span>;</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164242.png"/>

<h2 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h2><p>查询数据的基本语法为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    字段列表</span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">    表名列表</span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">    条件列表</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> </span><br><span class="line">    分组字段</span><br><span class="line"><span class="keyword">HAVING</span> </span><br><span class="line">    分组后的条件限定</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> </span><br><span class="line">    排序</span><br><span class="line"><span class="keyword">LIMIT</span> </span><br><span class="line">    分页限定</span><br></pre></td></tr></table></figure>

<p>下面会详细的讲解其中各个关键字的意思。创建一个 <code>student</code> 表如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student (</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span>,  <span class="comment">--  编号</span></span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>), <span class="comment">--  姓名</span></span><br><span class="line">    age <span class="built_in">int</span>, <span class="comment">--  年龄</span></span><br><span class="line">    sex <span class="built_in">varchar</span>(<span class="number">5</span>),  <span class="comment">--  性别</span></span><br><span class="line">    address <span class="built_in">varchar</span>(<span class="number">100</span>),  <span class="comment">--  地址</span></span><br><span class="line">    math <span class="built_in">int</span>, <span class="comment">--  数学</span></span><br><span class="line">    english <span class="built_in">int</span> <span class="comment">--  英语</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>向其中插入以下数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student(<span class="keyword">id</span>,<span class="keyword">name</span>,age,sex,address,math,english) <span class="keyword">VALUES</span> </span><br><span class="line">       (<span class="number">1</span>,<span class="string">'马云'</span>,<span class="number">55</span>,<span class="string">'男'</span>, <span class="string">'杭州 '</span>,<span class="number">66</span>,<span class="number">78</span>),</span><br><span class="line">       (<span class="number">2</span>,<span class="string">'马化腾 '</span>,<span class="number">45</span>,<span class="string">'女 '</span>,<span class="string">'深圳 '</span>,<span class="number">98</span>,<span class="number">87</span>),</span><br><span class="line">       (<span class="number">3</span>,<span class="string">'马景涛 '</span>,<span class="number">55</span>,<span class="string">'男 '</span>,<span class="string">'香港 '</span>,<span class="number">56</span>,<span class="number">77</span>),</span><br><span class="line">       (<span class="number">4</span>,<span class="string">'柳岩'</span>,<span class="number">20</span>,<span class="string">'女 '</span>,<span class="string">'湖南 '</span>,<span class="number">76</span>,<span class="number">65</span>),</span><br><span class="line">       (<span class="number">5</span>,<span class="string">'柳青 '</span>,<span class="number">20</span>,<span class="string">'男 '</span>,<span class="string">'湖南 '</span>,<span class="number">86</span>,<span class="literal">NULL</span>),</span><br><span class="line">       (<span class="number">6</span>,<span class="string">'刘德华 '</span>,<span class="number">57</span>,<span class="string">'男 '</span>,<span class="string">'香港'</span>,<span class="number">99</span>, <span class="number">99</span>),</span><br><span class="line">       (<span class="number">7</span>,<span class="string">'马德'</span>,<span class="number">22</span>,<span class="string">'女'</span>,<span class="string">'香港'</span>,<span class="number">99</span>,<span class="number">99</span>),</span><br><span class="line">       (<span class="number">8</span>,<span class="string">'德玛西亚'</span>,<span class="number">18</span>,<span class="string">'男'</span>,<span class="string">'南京'</span>,<span class="number">56</span>,<span class="number">65</span>);</span><br></pre></td></tr></table></figure>

<p>如果提示</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Incorrect string value: '\xE9\xA9\xAC\xE4\xBA\x91' for column 'name' at row 1</span><br></pre></td></tr></table></figure>

<p>那么就是因为字符编码的问题，这时可以修改 <code>name,address,sex</code> 的字符集为 <code>utf8</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">change</span> <span class="keyword">name</span> <span class="keyword">name</span> <span class="built_in">char</span>(<span class="number">20</span>) <span class="built_in">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">change</span> address address <span class="built_in">char</span>(<span class="number">100</span>) <span class="built_in">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">change</span> sex sex <span class="built_in">char</span>(<span class="number">5</span>) <span class="built_in">character</span> <span class="keyword">set</span> utf8;</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164316.png"/>

<h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><h4 id="查询多个字段"><a href="#查询多个字段" class="headerlink" title="查询多个字段"></a>查询多个字段</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>, age </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student; <span class="comment">-- 查询name和age字段</span></span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164546.png" width="30%"/>

<h4 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h4><p>查询 <code>address</code> 字段时，发现有相同的，如”香港”</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	address </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164700.png" width="25%"/>

<p>如果希望重复出现的只出现一次，那么可以使用 <code>DISTINCT</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> </span><br><span class="line">	address </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164805.png" width="25%"/>

<h4 id="计算列"><a href="#计算列" class="headerlink" title="计算列"></a>计算列</h4><p>现在要计算它们的数学成绩和英语成绩的和</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>, math, english, math+english </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student; <span class="comment">-- 为了看出是谁的总分，这里加上一个name字段</span></span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203164847.png" width="70%"/>

<p>我们发现第 5 行的结果为 <code>null</code>，这是因为 <code>null</code>+ 其它数得到的结果都是 <code>null</code>，但是这里我们应该把 <code>null</code> 当做 0 处理 ，这样加出来的就是总分，而不是 <code>null</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>, math, english, math+<span class="keyword">ifnull</span>(english,<span class="number">0</span>) </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<p>这里使用了 <code>ifnull(english,0)</code>，如果 <code>english</code> 的值是 <code>null</code>，那么就替换为 0，所以我们得到的结果为</p>
<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165223.png" width="80%"/>

<h4 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h4><p>我们注意到上面的最后一列的列名为 <code>math+ifnull(english,0)</code>，这个列名没有什么意义，我们应该为它起个别名，如 <code>score</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>, math, english, math+<span class="keyword">ifnull</span>(english,<span class="number">0</span>) <span class="keyword">AS</span> score </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165334.png" width="60%"/>

<p>其中 <code>AS</code> 作为一个起别名的作用，<code>AS</code> 其实可以省略，使用空格替代即可，如</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>, math, english, math+<span class="keyword">ifnull</span>(english,<span class="number">0</span>) score </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student;</span><br></pre></td></tr></table></figure>

<p>该句得到的结果与上面的相同</p>
<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165334.png" width="60%"/>

<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><p>我们使用 <code>WHERE</code> 来指明条件查询，比如我要查询年龄在 20 岁以上的</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>,age </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	age &gt; <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165503.png" width="30%"/>

<p>可见 <code>WHERE</code> 后面跟的是一个逻辑值，既然是逻辑值就可以使用与或非运算</p>
<ul>
<li><code>AND</code></li>
<li><code>OR</code></li>
<li><code>NOT</code></li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>,age </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	age &gt; <span class="number">20</span> <span class="keyword">AND</span> age &lt; <span class="number">50</span>; <span class="comment">-- 年龄在20-50之间的</span></span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165700.png" width="30%" />

<p>我们可以使用 <code>BETWEEN ... AND ...</code> 来简化上面的操作</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>,age </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	age <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">50</span>; <span class="comment">-- 在20-50之间，包括20和50</span></span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203165802.png" width="30%"/>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>,age </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	age = <span class="number">18</span> <span class="keyword">OR</span> age = <span class="number">20</span> <span class="keyword">OR</span> age = <span class="number">25</span>; <span class="comment">-- 查询年龄为18或20或25的</span></span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170207.png" width="30%"/>

<p>我们可以使用 <code>IN</code> 达到相同的效果</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>,age </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	age <span class="keyword">IN</span> (<span class="number">18</span>,<span class="number">20</span>,<span class="number">25</span>); <span class="comment">-- 查询年龄为18或20或25的</span></span><br></pre></td></tr></table></figure>

<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><p>使用 <code>ORDER BY</code> 来对查询结果进行排序，后面跟要排序的字段，默认对字段进行升序排序。</p>
<ul>
<li><code>ASC</code>：升序</li>
<li><code>DESC</code>：降序</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>,math </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> </span><br><span class="line">	math; <span class="comment">-- 默认为升序</span></span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170258.png" width="30%"/>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>,math </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> </span><br><span class="line">	math <span class="keyword">DESC</span>; <span class="comment">-- 降序</span></span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170333.png" width="30%"/>

<p><code>ORDER BY</code> 可以对多个字段进行排序，先对前面的字段进行排序，如果前面的字段相同，在根据后面的字段排序，比如按照数学和英语成绩排名，优先按数学成绩来，如果数学成绩相同则按英语成绩来</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span>,math,english </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> </span><br><span class="line">	math <span class="keyword">DESC</span>, english <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170405.png" width="50%"/>

<h3 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h3><p>使用 <code>LIKE</code> 进行模糊查询，比如记不住全称，这时可以使用模糊查询，比如想查询姓马的，在查询之前要介绍占位符</p>
<ul>
<li><code>_</code>：表示单个任意字符</li>
<li><code>%</code>：表示多个任意字符</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span> </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	<span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'马%'</span>;</span><br></pre></td></tr></table></figure>

<img src="https://gitee.com/lastknightcoder/blogimage/raw/master/20201203170436.png" width="15%"/>

<p>如果我想查询名字中带有”德”字的</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	<span class="keyword">name</span> </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">	student </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">	<span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'%德%'</span>;</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203171638.png" width="15%"/>

<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>聚合函数将一列作为整体，进行纵向计算。聚合函数有</p>
<ul>
<li><code>count</code>：统计个数，不包括 <code>NULL</code>。</li>
<li><code>max</code>：计算最大值</li>
<li><code>min</code>：计算最小值</li>
<li><code>sum</code>：计算总和</li>
<li><code>avg</code>：计算平均值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">count</span>(math) <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">max</span>(math) <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">min</span>(math) <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sum</span>(math) <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">avg</span>(math) <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure>

<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><p>使用 <code>GROUP BY</code> 进行分组查询，比如我想男生和女生的数学平均分，那么可以使用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">     sex,<span class="keyword">avg</span>(math) <span class="keyword">avg</span>  <span class="comment">-- avg是别名</span></span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">     student </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> </span><br><span class="line">     sex;</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203171733.png" width="25%"/>

<p>如果我想对分数在 70 以上的人计算平均分，并且统计人数，可以这么写</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">     sex,<span class="keyword">avg</span>(math) <span class="keyword">avg</span>, <span class="keyword">count</span>(<span class="keyword">id</span>) <span class="keyword">count</span> <span class="comment">-- avg和count是别名</span></span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">     student </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">     math &gt; <span class="number">70</span> </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> </span><br><span class="line">     sex;</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203172109.png" width="40%"/>

<p>如果分组后的还要进行筛选，那么可以使用 <code>HAVING</code>，比如这里我要筛选分组后人数大于 2 的才进行统计</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">       sex,<span class="keyword">avg</span>(math) <span class="keyword">avg</span>, <span class="keyword">count</span>(<span class="keyword">id</span>) <span class="keyword">count</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">     student</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">      math &gt; <span class="number">70</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">         sex</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">    <span class="keyword">count</span>(<span class="keyword">id</span>) &gt; <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203172158.png" width="40%"/>


<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p>当我们查询数据时，如果我们一页只能显示几行数据，我们就要进行分页查询，使用 <code>LIMIT</code>，后面跟两个数，第一个数代表查询的起始位置，从 0 开始，第二个代表一页显示的行数，如</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">       *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    student</span><br><span class="line"><span class="keyword">LIMIT</span></span><br><span class="line">    <span class="number">0</span>,<span class="number">3</span>; <span class="comment">-- 查询中0开始的3行数据</span></span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203172238.png"/>

<p>如果我们要查询第二页，可以怎么写</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">       *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    student</span><br><span class="line"><span class="keyword">LIMIT</span></span><br><span class="line">    <span class="number">3</span>,<span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203173134.png"/>


<h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>所谓约束就是对数据产生限制，比如说某列不能为空(NULL)，有或者说某列的数据不能重复。约束一般包括下面四种约束</p>
<ul>
<li>非空约束(not null)</li>
<li>唯一约束(unique)</li>
<li>主键约束(primary key)</li>
<li>外键约束(foreign key)</li>
</ul>
<h3 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h3><p>所谓的非空约束指的就是该列不能有 <code>NULL</code> 值，下面介绍如何创建非空约束，分为两种情况，一种是在创建表示添加非空约束，一种是在创建表之后添加非空约束</p>
<ol>
<li>创建表示添加非空约束</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="literal">null</span>); <span class="comment">-- 为name添加非空约束 name不能为NULL</span></span><br></pre></td></tr></table></figure>

<p>如果此时为 name 赋值为 <code>NULL</code>，那么这条语句将会报错</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(<span class="keyword">id</span>,<span class="keyword">name</span>) <span class="keyword">VALUES</span> (<span class="number">0</span>,<span class="literal">NULL</span>); <span class="comment">-- 为name赋值为NULL 将会报错</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Column 'name' cannot be null</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在创建表后添加非空约束</li>
</ol>
<p>如现在给 id 也添加非空约束，应当这么写</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>; <span class="comment">-- 为id添加非空约束</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除非空约束</li>
</ol>
<p>删除的办法与添加的语法差不多，如现在我又要删除 id 的非空约束，应当这么写</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">int</span>; <span class="comment">-- 删除id的非空约束</span></span><br></pre></td></tr></table></figure>

<h3 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h3><p>唯一约束指的是该列的值不能相同，关键字为 <code>unique</code>。</p>
<ol>
<li>创建表时如何添加唯一约束</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>)); <span class="comment">-- 为name添加非空约束 name不能为NULL</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建表后添加唯一约束</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">UNIQUE</span>;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除唯一约束</li>
</ol>
<p>删除唯一约束的语法与删除非空约束的语法不同，如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">DROP</span> <span class="keyword">INDEX</span> <span class="keyword">id</span>;</span><br></pre></td></tr></table></figure>

<h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><p>主键约束<code>(primary key)</code>是上面两个的总和，即该列既不能为 <code>NULL</code>，也不能相同。一张表只能有一个字段为主键。</p>
<ol>
<li>创建表时添加主键</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>));</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建表后添加主键</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span>;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除主键</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">DROP</span> PRIMARY <span class="keyword">KEY</span> ; <span class="comment">-- 因为主键只有一个，不必指明是哪个字段</span></span><br></pre></td></tr></table></figure>

<p>下面介绍一个小知识点，主键自动增长，当我们添加数据时，如果我们设置了主键增长并且没有为主键赋值，那么主键的值会相较于上一条数据主键的值增长，设置主键自动增长的语法为(假设设置(了) id 为主键)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT, <span class="comment">-- 创建表时添加</span></span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>) ); </span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">int</span> AUTO_INCREMENT; <span class="comment">-- 创建表后添加 id已经设置为主键了</span></span><br></pre></td></tr></table></figure>

<p>删除主键增长的方法为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">int</span>; <span class="comment">-- 这样是不会删除主键的，只会删除主键自动增长</span></span><br></pre></td></tr></table></figure>

<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p>假设有这么一张表</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203173213.png"/>

<p>观察研发部门和部门地点，发现数据冗余很严重，并且在后续添加数据中添加的也是这么一对一对的，很麻烦并且有在添加数据可能会出错，所以我们可以把这张表拆成两张表，如下</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203173238.png"/>

<p>现在问题是怎么将这两张表联系起来，答案就是外键约束。那么什么是外键，从表(被别人约束的表)中与主表(用来约束别人的表)主键对应的那一列，如：员工表中的 dep_id。</p>
<ol>
<li>新建表时增加外键</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[CONSTRAINT] [外键约束名称] FOREIGN KEY(外键字段名) REFERENCES 主表名(主键字段名)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建表后添加外键</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 从表 <span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span>] [外键约束名称] <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (外键字段名) <span class="keyword">REFERENCES</span>  主表(主</span><br><span class="line">键字段名);</span><br></pre></td></tr></table></figure>

<p>比如我在创建 employee 表时添加外键</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employee(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="built_in">INT</span>,</span><br><span class="line">    dep_id <span class="built_in">INT</span>,  <span class="comment">--  外键对应主表的主键</span></span><br><span class="line">    <span class="keyword">CONSTRAINT</span> emp_depid_fk <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (dep_id) <span class="keyword">REFERENCES</span> department(<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>employee 表已经存在的情况下添加外键</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> emp_depid_fk <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (dep_id) <span class="keyword">REFERENCES</span> department(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除外键</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--  删除 employee 表的 emp_depid_fk 外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> emp_depid_fk;</span><br></pre></td></tr></table></figure>

<p>这个时候又会出现新的问题，比如我改变主表中 id=1 为 id=5，但是这时是不会成功的，因为如果改了，从表中的 dep_id 便没有对应的值，这个时候就需要级联操作(在修改和删除主表的主键时，同时更新或删除副表的外键值，称为级联操作)。</p>
<ul>
<li><code>ON UPDATE CASCADE</code> <ul>
<li>级联更新，只能是创建表的时候创建级联关系。更新主表中的主键，从表中的外键<br>列也自动同步更新</li>
</ul>
</li>
<li><code>ON DELETE CASCADE</code><ul>
<li>级联删除</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="built_in">int</span>,</span><br><span class="line">    dep_id <span class="built_in">int</span>,  <span class="comment">--  外键对应主表的主键</span></span><br><span class="line">    <span class="comment">--  创建外键约束</span></span><br><span class="line">    <span class="keyword">constraint</span> emp_depid_fk <span class="keyword">foreign</span> <span class="keyword">key</span> (dep_id) <span class="keyword">references</span> department(<span class="keyword">id</span>) <span class="keyword">on</span> <span class="keyword">update</span> <span class="keyword">cascade</span> <span class="keyword">on</span> <span class="keyword">delete</span> <span class="keyword">cascade</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="三大范式"><a href="#三大范式" class="headerlink" title="三大范式"></a>三大范式</h2><p>设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求。设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。</p>
<p>目前关系数据库有六种范式 ： 第一范式(1NF) 、第二范式(2NF) 、第三范式(3NF) 、巴斯-科德范式(BCNF) 、第四范式(4NF)和第五范式(5NF，又称完美范式) 。满足最低要求的范式是第一范式(1NF) 。在第一范式的基础上进一步满足更多规范要求的称为第二范式(2NF) ，其余范式以次类推。一般说来，数据库只需满足第三范式(3NF)就行了。</p>
<p>为了理解三大范式，我们首先来看这么一张表</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220153.png" width="60%"/>

<p>我们首先来看第一范式的概念：数据库表的每一列都是不可分割的原子数据项。即表中的某个列有多个值时，必须拆分为不同的列。上面的那个表不满足第一范式，因为系的那一列被拆成了两列，我们将它拆分成不同的列</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220352.png" width="60%"/>

<p>它现在满足第一范式的要求了，接下来看第二范式的概念：在1NF的基础上，非码属性必须完全依赖于码。为了理解这句话的意思，先看下面几个概念：</p>
<ol>
<li>函数依赖：<code>A=&gt;B</code>，如果通过 A 属性(属性组)的值，可以确定唯一 B 属性的值。则称 B 依赖于 A <ul>
<li>例如：学号<code>=&gt;</code>姓名。(学号，课程名称) <code>--&gt;</code> 分数</li>
</ul>
</li>
<li>完全函数依赖：<code>A=&gt;B</code>， 如果 A 是一个属性组，则 B 属性值得确定需要依赖于 A 属性组中所有的属性值。<ul>
<li>例如：(学号，课程名称) <code>=&gt;</code> 分数</li>
</ul>
</li>
<li>部分函数依赖：<code>A=&gt;B</code>， 如果 A 是一个属性组，则 B 属性值的确定只需要依赖于 A 属性组中某一些值即可。<ul>
<li>例如：(学号，课程名称) <code>--&gt;</code> 姓名，只依靠学号</li>
</ul>
</li>
<li>传递函数依赖：<code>A=&gt;B</code>, <code>B=&gt;C</code> . 如果通过 A 属性(属性组)的值，可以确定唯一 B 属性的值，在通过 B 属性(属性组)的值可以确定唯一 C 属性的值，则称 C 传递函数依赖于 A<ul>
<li>例如：学号 <code>=&gt;</code> 系名，系名 <code>=&gt;</code> 系主任</li>
</ul>
</li>
<li>码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码<ul>
<li>例如：该表中码为：(学号，课程名称)</li>
<li>主属性：码属性组中的所有属性</li>
<li>非主属性：除过码属性组的属性</li>
</ul>
</li>
</ol>
<p>其实 2NF 就是在 1NF 基础上消除非主属性对主码的部分函数依赖，上表中的码为(学号，课程名称)，只有分数完全依赖该码组，所以我们拆分表如下</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220446.png" width="80%"/>

<p>第三范式(3NF)：在2NF基础上，任何非主属性不依赖于其它非主属性(在2NF基础上消除传递依赖)，在学生表中存在学号 <code>=&gt;</code> 系名 <code>=&gt;</code> 系主任的传递依赖，所以再次拆分表</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220738.png" width="70%" />

<p>三大范式小结</p>
<ul>
<li>1NF: 原子性，表中每列不可再拆分。</li>
<li>2NF: 不产生局部依赖，一张表只描述一件事情</li>
<li>3NF: 不产生传递依赖，表中每一列都直接依赖于主键。而不是通过其它列间接依赖于主键。 </li>
</ul>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>多表查询顾名思义就是同时查询多张表，假设有下面这么两张表(第一张是职员(emp)表，第二张是部门(dept)表)</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203220840.png"/>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221449.png" width="30%"/>

<p>现在我们同时查询这两张表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp, dept;</span><br></pre></td></tr></table></figure>

<p>我们将得到下面这么一张表</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221704.png"/>

<p>这张表的结果是两张表一一组合得到的，得到的结果也叫做笛卡尔积，我们可以看到很有的信息都是错误的，我们的目的就是去除这些无用的信息。</p>
<h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示。内连接分为</p>
<ul>
<li>隐式内连接<ul>
<li>使用 <code>WHERE</code> 条件指定</li>
</ul>
</li>
<li>显示内连接<ul>
<li>使用 <code>INNER JOIN ... ON</code> 语句</li>
</ul>
</li>
</ul>
<p>比如现在我要在上面的笛卡尔积中筛选出 emp 表外键 dept_id 等于主表主键 id 的，那么分别使用隐式内连接和显式外连接的写法为</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">#隐式写法</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    emp, dept</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    emp.dept_id = dept.id;</span><br><span class="line">    </span><br><span class="line"><span class="comment">#显式写法</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.dept_id = dept.id;</span><br></pre></td></tr></table></figure>

<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><p>为了演示外连接，在上面的部门表中新加入一个销售部</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221735.png" width="30%"/>

<p>外连接分为</p>
<ul>
<li>左外连接</li>
<li>右外连接</li>
</ul>
<p>两者只要掌握一种即可，因为用另一种时，将二表的顺序交换即可。那什么是左外连接，就是在内连接的基础上，以左表为基准，显示左表的所有内容，如果右表没有对应的内容，那么显示为 <code>NULL</code>，现在我们进行一次内连接查询</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> dept <span class="keyword">INNER</span> <span class="keyword">JOIN</span> emp e <span class="keyword">ON</span> e.dept_id = dept.id; <span class="comment"># e是emp的别名</span></span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221806.png"/>

<p>现在我们进行一次左外连接查询</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> dept <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> emp e <span class="keyword">ON</span> dept.id = e.dept_id;</span><br></pre></td></tr></table></figure>

<p>因为左外连接查询是以左表(dept)为基准，左表的内容会全部显示出来，即销售部会被查询出来，而对应的员工表没有对应的元素，所以会显示空</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203221833.png"/>

<p>而右外连接与左外连接相反，是以右表为基准，现在如果我们将二表的位置交换，并且使用右外连接查询，得到的结果与上面的会是相同的</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp e <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> dept d <span class="keyword">ON</span> e.dept_id = d.id;</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222043.png"/>

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>所谓的子查询是指将查询得到的结果作为另一个查询语句的条件，比如我想查出薪资最高员工的信息，那么思路如下</p>
<ul>
<li>查出最高的薪资是多少</li>
<li>匹配谁的薪资为最高薪资</li>
</ul>
<p>那么第一步查出的最高薪资就作为了第二步进行匹配的条件</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp t1 <span class="keyword">WHERE</span> t1.salary = (<span class="keyword">SELECT</span> <span class="keyword">max</span>(salary) <span class="keyword">FROM</span> emp);</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222108.png"/>

<p>子查询得到的结果有多种，例如</p>
<ul>
<li>单行单列</li>
<li>单列多行</li>
<li>多行多列的值(表)</li>
</ul>
<p>当结果是单个列的值的时候，肯定在 <code>WHERE</code> 后面作为条件，父查询使用比较运算符，如：<code>&gt; 、&lt;、&lt;&gt;、 =</code> 等。现在我要查询小于平均薪资的人有哪些，那么可以这么写</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp t1 <span class="keyword">WHERE</span> t1.salary &lt; (<span class="keyword">SELECT</span> <span class="keyword">avg</span>(salary) <span class="keyword">FROM</span> emp);</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222137.png"/>

<p>子查询结果是单列多行，结果集类似于一个数组，父查询使用 IN 运算符。查询工资大于5000的员工，来自于哪些部门</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    t1.name</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">     dept t1</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    t1.id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> emp.dept_id <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.salary &gt; <span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222157.png" width="18%"/>

<p>子查询结果只要是多列，肯定在FROM后面作为表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 查询字段 <span class="keyword">FROM</span> （子查询）表别名 <span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></table></figure>

<p>子查询作为表需要取别名，否则这张表没有名称则无法访问表中的字段。查询出2011年以后入职的员工信息，包括部门名称 </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    *</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> db1.emp t1 <span class="keyword">WHERE</span> t1.join_date &gt; <span class="string">"2011-1-1"</span>) t3, dept d</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    d.id = t3.dept_id;</span><br></pre></td></tr></table></figure>

<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>所谓事务是指一系列的操作，这些操作要么同时成功，要么同时失败。比如转账，不能我这里转账成功，你那么收不到钱，那么钱就这么消失了? 如果事务执行成功了，那么就提交，如果有一条失败了，那么就需要进行回滚(即回到之前的状态)。与事务有关的三条语句为</p>
<ul>
<li><code>start transaction</code><ul>
<li>开启事务</li>
</ul>
</li>
<li><code>commit</code><ul>
<li>提交事务</li>
<li>可手动提交，也可设置为自动提交</li>
</ul>
</li>
<li><code>roll back</code><ul>
<li>回滚事务</li>
<li>当事务执行失败时自动自动，也可手动执行</li>
</ul>
</li>
</ul>
<p>假设有这么一张表，里面存储的是用户名和余额信息</p>
<img src="https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20201203222234.png" width="50%"/>

<p>现在张三要向李四转账 500 块，如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 张三账号-500 </span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> balance = balance - <span class="number">500</span> <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'张三'</span>; </span><br><span class="line"><span class="comment">-- 李四账号+500 </span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> balance = balance + <span class="number">500</span> <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'李四'</span>;</span><br></pre></td></tr></table></figure>

<p>如果我们不开启事务的话，那么当张三转了 500 块时，这时服务器崩溃了，李四没有收到钱，但是钱还是少了，这种情况是不能发生的，我们应当开启一个事务，这两个操作要么同时成功，要么同时失败。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>; <span class="comment">-- 开启一个事务</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三账号-500</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> balance = balance - <span class="number">500</span> <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'张三'</span>;</span><br><span class="line"><span class="comment">-- 李四账号+500</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> balance = balance + <span class="number">500</span> <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">COMMIT</span>; <span class="comment">-- 提交事务</span></span><br></pre></td></tr></table></figure>

<p>开启事务后，所有的操作都在临时日志文件中，<code>commit</code> 操作是将临时日志中的内容写到数据库的存储引擎中，所以在提交事务之前，是不会对数据库中的内容进行修改的。而 <code>rollback</code> 则是清空临时日志文件，之前没有进行提交的内容全部清除。</p>
<p>事务的步骤可以简述为下面几步</p>
<ul>
<li>客户端连接数据库服务器，创建连接时创建此用户临时日志文件 </li>
<li>开启事务以后，所有的操作都会先写入到临时日志文件中 </li>
<li>所有的查询操作从表中查询，但会经过日志文件加工后才返回 </li>
<li>如果事务提交则将日志文件中的数据写到表中，否则清空日志文件</li>
</ul>
<p>事务的提交分为自动提交和手动提交，在 <code>MySQL</code> 命令行的默认设置下，事务都是自动提交的，即执行 <code>SQL</code> 语句后就会马上执行 <code>COMMIT</code> 操作。因此要显式地开启一个事务务须使用命令 <code>BEGIN</code> 或 <code>START TRANSACTION</code>，或者执行命令 <code>SET AUTOCOMMIT=0</code>，用来禁止使用当前会话的自动提交。</p>
<ul>
<li><strong>SET AUTOCOMMIT=0</strong> <ul>
<li>禁止自动提交</li>
</ul>
</li>
<li><strong>SET AUTOCOMMIT=1</strong> <ul>
<li>开启自动提交</li>
</ul>
</li>
</ul>
<h3 id="事务的特性"><a href="#事务的特性" class="headerlink" title="事务的特性"></a>事务的特性</h3><p>事务的四大特性 ACID</p>
<ul>
<li>原子性(Atomicity)<ul>
<li>每个事务都是一个整体，不可再拆分，事务中所有的 <code>SQL</code> 语句要么都执行成功， 要么都失败。</li>
</ul>
</li>
<li>一致性(Consistency)<ul>
<li>事务在执行前数据库的状态与执行后数据库的状态保持一致。如：转账前 2 个人的 总金额是 2000，转账后 2 个人总金额也是 2000 </li>
</ul>
</li>
<li>隔离性(Isolation)<ul>
<li>事务与事务之间不应该相互影响，执行时保持隔离的状态。 </li>
</ul>
</li>
<li>持久性(Durability)<ul>
<li>一旦事务执行成功，对数据库的修改是持久的。就算关机，也是保存下来的。 </li>
</ul>
</li>
</ul>
<p>这篇文章<a href="https://zhuanlan.zhihu.com/p/60723043" target="_blank" rel="noopener">MySQL事务：ACID特性的实现原理总结分析</a>详细讲解了 MySQL 的事务，所以在这里我不多做介绍，因为讲的没人家好。</p>
<h3 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h3><p>事务在操作时的理想状态是所有的事务之间保持隔离，互不影响。但是因为并发操作，多个用户同时访问同一个数据时，可能引发并发访问的问题，如</p>
<ul>
<li>脏读 <ul>
<li>一个事务读取到了另一个事务中尚未提交的数据</li>
<li>比如李四向张三转了 500 块，但是没有提交，这时张三读取数据，发现已经到账 500 块，跟李四说到账了，这时李四进行 <code>roll back</code></li>
</ul>
</li>
<li>不可重复读 <ul>
<li>一个事务中两次读取的数据内容不一致，要求的是一个事务中多次读取时数据是一致的，这是事务 <code>update</code> 时引发的问题</li>
<li>两次查询输出的结果不同，到底哪次是对的? 不知道以哪次为准。 有的时候这不是一个问题，当然是后面的为准。但是我们可以考虑这样一种情况，比如银行程序需要将查询结果分别输出到电脑屏幕和发短信给客 户，结果在一个事务中针对不同的输出目的地进行的两次查询不一致，导致文件和屏幕中的结果不一致，银行工作 人员就不知道以哪个为准了。 </li>
<li>脏读与不可重复读的区别在于：前者读到的是其他事务未提交的数据，后者读到的是其他事务已提交的数据</li>
</ul>
</li>
<li>幻读<ul>
<li>一个事务中两次读取的数据的数量不一致，要求在一个事务多次读取的数据的数量是一致的，这是 <code>insert</code> 或 <code>delete</code> 时引发的问题</li>
<li>幻读是事务非独立执行时发生的一种现象。例如事务 T1 对一个表中所有的行的某个数据项做了从 “1” 修改为 “2” 的操作，这时事务 T2 又对这个表中插入了一行数据项，而这个数据项的数值还是为 “1” 并且提交给数据库。而操作事务 T1 的用户如果再查看刚刚修改的数据，会发现还有一行没有修改，其实这行是从事务 T2 中添加的，就好像产生幻觉一样，这就是发生了幻读。</li>
<li>幻读和不可重复读都是读取了另一条已经提交的事务(这点就脏读不同)，所不同的是不可重复读查询的都是同一个数据项，而幻读针对的是一批数据整体(比如数据的个数)。</li>
</ul>
</li>
</ul>
<p>MySQL数据库有四种隔离级别 </p>
<ul>
<li><code>read uncommitted</code><ul>
<li>上面三种问题都有可能发生</li>
</ul>
</li>
<li><code>read committed</code><ul>
<li>不可能发生脏读，因为只有读到已提交的数据</li>
</ul>
</li>
<li><code>repeatable read</code><ul>
<li>可能发生幻读</li>
<li>这时 MySQL 的默认隔离级别</li>
</ul>
</li>
<li><code>serializable</code><ul>
<li>所有的问题都不会发生</li>
</ul>
</li>
</ul>
<p>上面的级别最低，下面的级别最高，隔离级别越高，性能越差，安全性越高。在 MySQL 数据库中设置事务的隔离级别</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> [glogal | <span class="keyword">session</span>] <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> 隔离级别名称;</span><br><span class="line"><span class="keyword">set</span> tx_isolation=<span class="string">'隔离级别名称'</span>;</span><br></pre></td></tr></table></figure>

<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><p>我们现在默认使用的都是 root 用户：超级管理员，拥有全部的权限。但是一个公司里面的数据库服务器上面可能同时运行着很多个项目的数据库。所以我们应该可以根据不同的项目建立不同的用户，分配不同的权限来管理和维护数据库。</p>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'密码'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>‘用户名’ <ul>
<li>将创建的用户名 </li>
</ul>
</li>
<li>‘主机名’ <ul>
<li>指定该用户在哪个主机上可以登陆，如果是本地用户可用 localhost，如果想让该用户可以 从任意远程主机登陆，可以使用通配符% </li>
</ul>
</li>
<li>该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器 </li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">#创建 user1 用户，只能在 localhost 这个服务器登录 mysql 服务器，密码为 123 </span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'user1'</span>@<span class="string">'localhost'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'123'</span>; </span><br><span class="line"><span class="comment">#创建 user2 用户可以在任何电脑上登录 mysql 服务器，密码为 123 </span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'user2'</span>@<span class="string">'%'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'123'</span>;</span><br></pre></td></tr></table></figure>

<p>创建的用户名都在 mysql 数据库中的 user 表中可以查看到，密码经过了加密。 </p>
<h3 id="授予权限"><a href="#授予权限" class="headerlink" title="授予权限"></a>授予权限</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> 权限 <span class="number">1</span>, 权限 <span class="number">2.</span>.. <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">TO</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>GRANT…ON…TO</code> <ul>
<li>授权关键字 </li>
</ul>
</li>
<li>权限<ul>
<li>授予用户的权限，如 <code>CREATE、ALTER、SELECT、INSERT、UPDATE</code> 等。如果要授 予所有的权限则使用 <code>ALL</code> </li>
</ul>
</li>
<li>数据库名.表名 <ul>
<li>该用户可以操作哪个数据库的哪些表。如果要授予该用户对所有数据库和表的相应操作 权限则可用 * 表示，如 *.* </li>
</ul>
</li>
<li>‘用户名‘@’主机名’ <ul>
<li>给哪个用户授权</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">#给 user1 用户分配对 test 这个数据库操作的权限：创建表，修改表，插入记录，更新记录，查询 </span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span>,<span class="keyword">alter</span>,<span class="keyword">insert</span>,<span class="keyword">update</span>,<span class="keyword">select</span> <span class="keyword">on</span> test.* <span class="keyword">to</span> <span class="string">'user1'</span>@<span class="string">'localhost'</span>; </span><br><span class="line"> </span><br><span class="line"><span class="comment">#给 user2 用户分配所有权限，对所有数据库的所有表  </span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> <span class="string">'user2'</span>@<span class="string">'%'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="撤销权限"><a href="#撤销权限" class="headerlink" title="撤销权限"></a>撤销权限</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span>  权限 <span class="number">1</span>, 权限 <span class="number">2.</span>.. <span class="keyword">ON</span> 数据库.表名 <span class="keyword">from</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>REVOKE…ON…FROM</code><ul>
<li>撤销授权的关键字 </li>
</ul>
</li>
<li>权限 <ul>
<li>用户的权限，如 <code>CREATE、ALTER、SELECT、INSERT、UPDATE</code> 等，所有的权限则使用 <code>ALL</code> </li>
</ul>
</li>
<li>数据库名.表名 <ul>
<li>对哪些数据库的哪些表，如果要取消该用户对所有数据库和表的操作权限则可用*表 示，如*.* </li>
</ul>
</li>
<li>‘用户名‘@’主机名’ <ul>
<li>给哪个用户撤销  </li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">#撤销 user1 用户对 test 数据库所有表的操作的权限 </span></span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">all</span> <span class="keyword">on</span> test.* <span class="keyword">from</span> <span class="string">'user1'</span>@<span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> <span class="string">'root'</span>@<span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="修改管理员密码"><a href="#修改管理员密码" class="headerlink" title="修改管理员密码"></a>修改管理员密码</h3><p>如果忘了原来的管理员密码</p>
<ol>
<li><code>cmd --&gt; net stop mysql</code> 停止 mysql 服务<ul>
<li>需要管理员运行该 cmd</li>
</ul>
</li>
<li>使用无验证方式启动 mysql 服务：<code>mysqld --skip-grant-tables</code></li>
<li>打开新的 cmd 窗口,直接输入 mysql 命令，敲回车。就可以登录成功</li>
<li><code>use mysql;</code></li>
<li><code>update user set password = password(&#39;你的新密码&#39;) where user = &#39;root&#39;;</code></li>
<li>关闭两个窗口</li>
<li>打开任务管理器，手动结束 mysqld.exe 的进程</li>
<li>启动 mysql 服务</li>
<li>使用新密码登录。</li>
</ol>
<p>如果记得原来的密码</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqladmin -uroot -p password 新密码 <span class="comment">#需要在未登陆 MySQL 的情况下操作，新密码不需要加上引号。</span></span><br></pre></td></tr></table></figure>

<h3 id="修改普通用户密码"><a href="#修改普通用户密码" class="headerlink" title="修改普通用户密码"></a>修改普通用户密码</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">password</span> <span class="keyword">for</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span> = <span class="keyword">password</span>(<span class="string">'新密码'</span>);</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://www.cnblogs.com/whu-2017/p/9293083.html" target="_blank" rel="noopener">数据库隔离级别，每个级别会引发什么问题</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/60723043" target="_blank" rel="noopener">MySQL事务：ACID特性的实现原理总结分析</a></li>
<li><a href="https://www.cnblogs.com/bypp/p/8618382.html" target="_blank" rel="noopener">MySQL数据查询之多表查询</a></li>
<li><a href="https://blog.csdn.net/ch717828/article/details/41357431" target="_blank" rel="noopener">MySQL插入中文错误</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2019-09-13T16:00:00.000Z" itemprop="dateUpdated">2019-09-14 00:00:00</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="https://lastknightcoder.gitee.io">
            <img src="https://lastknightcoder.gitee.io/img/avatar.jpg" alt="熊滔">
            熊滔
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="https://lastknightcoder.gitee.io/tags/Java/" rel="tag">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="https://lastknightcoder.gitee.io/tags/MySQL/" rel="tag">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="https://lastknightcoder.gitee.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=《MySQL学习笔记》 — Coder&pic=https://lastknightcoder.gitee.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=《MySQL学习笔记》 — Coder&source=人生天地间，忽如远行客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《MySQL学习笔记》 — Coder&url=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&via=https://lastknightcoder.gitee.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="https://lastknightcoder.gitee.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84--Java%E6%8F%8F%E8%BF%B0/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">数据结构--Java描述</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="https://lastknightcoder.gitee.io/JavaWeb/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Java Web笔记</h4>
      </a>
    </div>
  
</nav>



    


<section class="comments" id="comments">
    <div id="disqus_thread"></div>
    <script>
    var disqus_shortname = 'lastknightcoder';
    lazyScripts.push('//' + disqus_shortname + '.disqus.com/embed.js')
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</section>



















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="https://lastknightcoder.gitee.io/img/wechatpay.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="https://lastknightcoder.gitee.io/img/wechatpay.png" data-alipay="https://lastknightcoder.gitee.io/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="https://lastknightcoder.gitee.io/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>熊滔 &copy; 2019 - 2021</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=《MySQL学习笔记》 — Coder&pic=https://lastknightcoder.gitee.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=《MySQL学习笔记》 — Coder&source=人生天地间，忽如远行客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《MySQL学习笔记》 — Coder&url=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&via=https://lastknightcoder.gitee.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://lastknightcoder.gitee.io/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtklEQVR42u3ay3LCMBAEwPz/TydVuYLNjFYKpKp9ogx+tA6SmN2vr/j4/j0ezzyef/z26tr7+zyev3rWhgMPDw9v6dWvjvZh95j8zNVA5O+Mh4eHd5qX37odmvulIv+8Nrh4eHh47+UlW+R8w538PhkUPDw8vM/ntbFFPtHj4eHh/S9eEkbsCg7un/u2rAUPDw8v5rUFsE/4fLC+h4eHhzeoqudH2zqQbKPnb4iHh4d3grcW184LZpPPdWEMDw8PbytvspHNX+J+gPKhrCMSPDw8vD/h3f/hz6PY5D7t+TpixsPDwzvGa6fmyTZ6V8EsugoPDw/vGK+NGybh7NpmOhncF+seHh4e3iZeUpJv257aLfJaTFz8JcDDw8PbymvDiLYRqo4PykF/8bZ4eHh4B3h5UNtO65MN8Rx8+Us8PDy8MW9yo/aFdm2788IYHh4e3gne2oSel6ny3+Rb8AKGh4eHd4zXLgzzYljbWLArHMHDw8Ob83a1OuVT9tqy0RbhnoQReHh4eAd4a+Wl9lWSyLgNgi+fi4eHh3eMNwkO8pJYPoiTAPfJwoCHh4e3lTe53aTYPzlfh854eHh4W3mTaKBtGmiXmTaH3ralxsPDwyt5k6JXu8CsDcS2dis8PDy8Aa+d1tdedK1hKwl8LwcXDw8P7wCvnmrjFqj82jwOzotheHh4eOd4bUvT2nBMmgbyElqUT+Ph4eGNeXlUOolxJxvrdkF6UeXDw8PDG/O+y6ONBtb2+JOoougpw8PDw1viTabdecGsbRRY2/rj4eHhneBNFoN8al5jrG3BL8NcPDw8vK28XYtBfoe1tq3FrBoPDw/vA3i7pu92o9xGGHh4eHjv5bWT8jxWaFuyRgsDHh4eXsnLb51/m1yVg0cLAx4eHt5W3oaOrQPnJ+0IG+p7eHh4eM/P/ABM3pKX7fyC3gAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: 'https://lastknightcoder.gitee.io/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
